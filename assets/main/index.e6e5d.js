window.__require=function e(t,o,n){function r(a,s){if(!o[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var u=o[a]={exports:{}};t[a][0].call(u.exports,function(e){return r(t[a][1][e]||e)},u,u.exports,e,t,o,n)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)r(n[a]);return r}({AddODRToChildren:[function(e,t,o){"use strict";cc._RF.push(t,"ab4c6hKBxJITL/C7P9khOwA","AddODRToChildren");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./OffScreen/OffscreenDisableRender"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.referenceCamera=null,t}return r(t,e),t.prototype.start=function(){var e=0,t=this.node.getComponentsInChildren(cc.RenderComponent),o=this;t.forEach(function(t){var n=t.node.addComponent(a.default);n.renderComponent=t,n.referenceCamera=o.referenceCamera,e++}),cc.log("["+this.node.name+"] Adding ODR to "+e+" objects")},i([l(cc.Camera)],t.prototype,"referenceCamera",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./OffScreen/OffscreenDisableRender":"OffscreenDisableRender"}],AdsManager_impl:[function(e,t,o){"use strict";cc._RF.push(t,"08e10f30eZCdqhW2DkZA4Xt","AdsManager_impl");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../CrossFeatures/Dialogs/Script/NgcDialogManager"),c=e("../../../Services/Ads/Ads"),l=e("../../../Services/Telemetry/Telemetry"),u=e("../BuildConfig"),p=e("../NgcScreenManager"),d=e("../NgcSoundManager"),f=e("../NgcUserInfo"),h=e("./NgcAdsManager"),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.show=function(e,t,o,n,r,u){var g;return i(this,void 0,void 0,function(){var i,y,m,_,v,S,b,N,P;return a(this,function(a){switch(a.label){case 0:return i="function"==typeof r,y="function"==typeof u,-1===h.default.inst.getAllowedPointcut().indexOf(e)?(i&&r(),y&&u(!1,0),[2]):(h.default.inst.lastPoincutID=e,c.NgcAds.inst?c.NgcAds.inst.adsIsAvailable(t)?t===c.AdsType.Banner?[3,2]:[4,s.NgcDialogManager.showLoadingAdMsg()]:(P=t===c.AdsType.VideoReward,l.NgcTelemetry.inst.LogEvent_GameAdsStart(f.default.numberOfAdsWatched,f.default.numberAdsSession,!1,P?o:"null",P?n:0,c.NgcAds.inst.getName(),t,e),i&&r(),y&&u(!1,0),[2]):[3,3]);case 1:a.sent(),a.label=2;case 2:switch(t){case c.AdsType.Banner:cc.log("AdsManager","Show Ads Banner",e),c.NgcAds.inst.isBannerShowing&&this.hide(h.default.lastBannerPointcutID),null===(g=p.default.inst)||void 0===g||g.showBanner(),h.default.lastBannerPointcutID=e,h.default.showBannerTimeStamp=Date.now(),m=function(e){l.NgcTelemetry.inst.LogEvent_GameAdsRequest(!0,"null",0,c.NgcAds.inst.getName(),c.AdsType.Banner,e)},_=function(e){l.NgcTelemetry.inst.LogEvent_GameAdsStart(f.default.numberOfAdsWatched,f.default.numberAdsSession,!0,"null",0,c.NgcAds.inst.getName(),c.AdsType.Banner,e)},c.NgcAds.inst.showAds(e,c.AdsType.Banner,m,_);break;case c.AdsType.Interstitial:switch(cc.log("AdsManager","Show Ads Interstitial",e),v=Date.now(),S=v,e){case h.NgcPointcuts.interPreGame:l.NgcTelemetry.inst.LogEvent_OnboardingPreR2InterRequest({adsProvider:c.NgcAds.inst.getName()})}l.NgcTelemetry.inst.LogEvent_GameAdsRequest(!0,"null",0,c.NgcAds.inst.getName(),c.AdsType.Interstitial,e),c.NgcAds.inst.showAds(e,c.AdsType.Interstitial,function(){switch(d.NgcSoundManager.inst.stopMusic(),i&&r(),f.default.updateAdsInfo(),e){case h.NgcPointcuts.interPreGame:l.NgcTelemetry.inst.LogEvent_OnboardingPreR2InterStart({adsProvider:c.NgcAds.inst.getName(),actualSec:Date.now()-v})}S=Date.now(),l.NgcTelemetry.inst.LogEvent_GameAdsStart(f.default.numberOfAdsWatched,f.default.numberAdsSession,!0,"null",0,c.NgcAds.inst.getName(),c.AdsType.Interstitial,e)},function(t,o){if(s.NgcDialogManager.hideLoadingAdMsg(),d.NgcSoundManager.inst.resumeLastPlayedMusic(),y&&u(t,o),t||f.default.updateAdsInfo(),t||!t&&o>0){switch(e){case h.NgcPointcuts.interPreGame:l.NgcTelemetry.inst.LogEvent_OnboardingPreR2InterEnd({adsProvider:c.NgcAds.inst.getName(),actualSec:Date.now()-S})}l.NgcTelemetry.inst.LogEvent_GameAdsStop("null",0,t?1:0,c.NgcAds.inst.getName(),c.AdsType.Interstitial,o,null,e,!t)}});break;case c.AdsType.VideoReward:switch(cc.log("AdsManager","Show Ads VideoReward",e),b=Date.now(),N=b,P=t===c.AdsType.VideoReward,e){case h.NgcPointcuts.videoDaily:l.NgcTelemetry.inst.LogEvent_OnboardingDailyVideoRequest({adsProvider:c.NgcAds.inst.getName()});break;case h.NgcPointcuts.videoRewardDialog:l.NgcTelemetry.inst.LogEvent_OnboardingClaim2xVideoRequest({adsProvider:c.NgcAds.inst.getName()})}l.NgcTelemetry.inst.LogEvent_GameAdsRequest(!0,P?o:"null",P?n:0,c.NgcAds.inst.getName(),c.AdsType.VideoReward,e),c.NgcAds.inst.showAds(e,c.AdsType.VideoReward,function(){switch(d.NgcSoundManager.inst.stopMusic(),i&&r(),f.default.updateAdsInfo(),N=Date.now(),e){case h.NgcPointcuts.videoDaily:l.NgcTelemetry.inst.LogEvent_OnboardingDailyVideoStart({adsProvider:c.NgcAds.inst.getName(),actualSec:Date.now()-b});break;case h.NgcPointcuts.videoRewardDialog:l.NgcTelemetry.inst.LogEvent_OnboardingClaim2xVideoStart({adsProvider:c.NgcAds.inst.getName(),actualSec:Date.now()-b})}l.NgcTelemetry.inst.LogEvent_GameAdsStart(f.default.numberOfAdsWatched,f.default.numberAdsSession,!0,o,n,c.NgcAds.inst.getName(),c.AdsType.VideoReward,e)},function(t,r){if(s.NgcDialogManager.hideLoadingAdMsg(),d.NgcSoundManager.inst.resumeLastPlayedMusic(),y&&u(t,r),t||f.default.updateAdsInfo(),t||!t&&r>0){switch(e){case h.NgcPointcuts.videoDaily:l.NgcTelemetry.inst.LogEvent_OnboardingDailyVideoEnd({adsProvider:c.NgcAds.inst.getName(),actualSec:Date.now()-N,checker:t});break;case h.NgcPointcuts.videoRewardDialog:l.NgcTelemetry.inst.LogEvent_OnboardingClaim2xVideoEnd({adsProvider:c.NgcAds.inst.getName(),actualSec:Date.now()-N})}l.NgcTelemetry.inst.LogEvent_GameAdsStop(o,n,t?1:0,c.NgcAds.inst.getName(),c.AdsType.VideoReward,r,0,e,!t)}})}a.label=3;case 3:return[2]}})})},t.prototype.hide=function(e,t){var o,n;if(void 0===e&&(e=null),void 0===t&&(t=c.AdsType.Banner),h.default.inst.lastPoincutID=e,t===c.AdsType.Banner){if(u.NgcBuildConfig.offlineMode)return void(null===(o=p.default.inst)||void 0===o||o.hideBanner());if(this.hasAds(c.AdsType.Banner)){if(e){if(e!==h.default.lastBannerPointcutID)return}else e=h.default.lastBannerPointcutID;if(cc.log("AdsManager","Hide Banner",e),c.NgcAds.inst.isBannerShowing){null===(n=p.default.inst)||void 0===n||n.hideBanner();var r=Date.now()-h.default.showBannerTimeStamp;c.NgcAds.inst.hideAds(e,c.AdsType.Banner,function(e){l.NgcTelemetry.inst.LogEvent_GameAdsStop(null,null,1,c.NgcAds.inst.getName(),c.AdsType.Banner,r,0,e)})}}}},t.prototype.hasAds=function(e){if(c.NgcAds.inst)switch(e){case c.AdsType.Banner:return c.NgcAds.inst.adsIsAvailable(c.AdsType.Banner);case c.AdsType.Interstitial:return c.NgcAds.inst.adsIsAvailable(c.AdsType.Interstitial);case c.AdsType.VideoReward:return c.NgcAds.inst.adsIsAvailable(c.AdsType.VideoReward)}return!1},t}(h.default);o.default=g,cc._RF.pop()},{"../../../CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../Services/Ads/Ads":"Ads","../../../Services/Telemetry/Telemetry":"Telemetry","../BuildConfig":"BuildConfig","../NgcScreenManager":"NgcScreenManager","../NgcSoundManager":"NgcSoundManager","../NgcUserInfo":"NgcUserInfo","./NgcAdsManager":"NgcAdsManager"}],Ads_impl_GameDistributionSrv:[function(e,t,o){"use strict";cc._RF.push(t,"f8a05kIwhROa79GhQ+ntCJ1","Ads_impl_GameDistributionSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../GameFramework/Scripts/Ads/NgcAdsManager"),s=e("../../GameFramework/Scripts/NgcScreenManager"),c=e("../../SDK/GameDistribution/GameDistributionSrv"),l=e("./Ads"),u=cc._decorator.ccclass,p={banner_shop:{TOP_CENTER:{size:"LEADER_BOARD"}},banner_mainmenu:{TOP_CENTER:{size:"LEADER_BOARD"}},banner_leaderboard:{TOP_CENTER:{size:"LEADER_BOARD"},CENTER_LEFT:{size:"SKYSCRAPER"},CENTER_RIGHT:{size:"SKYSCRAPER"}},banner_reward_video:{TOP_CENTER:{size:"LEADER_BOARD"},CENTER_LEFT:{size:"SKYSCRAPER"},CENTER_RIGHT:{size:"SKYSCRAPER"}},banner_loading:{TOP_CENTER:{size:"LEADER_BOARD"},CENTER_LEFT:{size:"SKYSCRAPER"},CENTER_RIGHT:{size:"SKYSCRAPER"}},banner_revive:{TOP_CENTER:{size:"LEADER_BOARD"},CENTER_LEFT:{size:"SKYSCRAPER"},CENTER_RIGHT:{size:"SKYSCRAPER"}},banner_spectator:{TOP_CENTER:{size:"LEADER_BOARD"},CENTER_LEFT:{size:"SKYSCRAPER"},CENTER_RIGHT:{size:"SKYSCRAPER"}},banner_result:{TOP_CENTER:{size:"LEADER_BOARD"},CENTER_LEFT:{size:"SKYSCRAPER"},CENTER_RIGHT:{size:"SKYSCRAPER"}}},d={banner_shop:{TOP_CENTER:{size:"LEADER_BOARD"}},banner_mainmenu:{TOP_CENTER:{size:"LEADER_BOARD"}},banner_leaderboard:{TOP_CENTER:{size:"LEADER_BOARD"}},banner_reward_video:{TOP_CENTER:{size:"LEADER_BOARD"}},banner_loading:{TOP_CENTER:{size:"LEADER_BOARD"}},banner_revive:{TOP_CENTER:{size:"LEADER_BOARD"}},banner_spectator:{TOP_CENTER:{size:"LEADER_BOARD"}},banner_result:{TOP_CENTER:{size:"LEADER_BOARD"}}},f=function(){function e(){this._scaleFactor=1,this._offsetX=0,this._offsetY=0,this._isShowing=!1,this._afterAdHandlerIsInvoked=!1}return e.prototype.create=function(e){var t=e.screenPointcut,o=e.alignment,n=e.size;this._screenPointcut=t,this._alignment=o,"CENTER_LEFT"===o?this._screenPointcut=this._screenPointcut+"_left":"CENTER_RIGHT"===o&&(this._screenPointcut=this._screenPointcut+"_right"),this._createElement(this._screenPointcut),this.setSize(n),this.alignIn(document.body),document.body.appendChild(this._element)},e.prototype.show=function(e,t){var o=this;this._afterAdHandlerIsInvoked=!1,e&&e(this._screenPointcut);var n=window.gdsdk;if(void 0!==n&&"undefined"!==n.showAd){var r=""+this._screenPointcut,i=document.getElementById(r);n.showAd(n.AdType.Display,{containerId:r}).then(function(){new MutationObserver(function(){o._afterAdHandlerIsInvoked||(i.getElementsByTagName("iframe").length>=1?(console.log(o._screenPointcut+" banner is being displayed"),o._isShowing=!0,t&&t(o._screenPointcut),o._afterAdHandlerIsInvoked=!0):console.error(o._screenPointcut+" banner cannot be displayed"))}).observe(i,{attributes:!0,childList:!0,subtree:!0})}).catch(function(e){return console.error(e)}),i&&i.style&&(i.style.zIndex="1",i.style.opacity="255")}},e.prototype.hide=function(e){var t=document.getElementById(""+this._screenPointcut);t&&t.style&&(t.style.zIndex="-1",t.style.opacity="0"),this._isShowing&&(e&&e(this._screenPointcut),this._isShowing=!1)},e.prototype.setSize=function(e){var t,o;switch(e){default:case"LARGE_RECTANGLE":t=336,o=280;break;case"MEDIUM_RECTANGLE":t=300,o=250;break;case"BILLBOARD":t=970,o=250;break;case"LEADER_BOARD":t=728,o=90;break;case"SKYSCRAPER":t=120,o=600;break;case"WIDE_SKYSRAPER":t=160,o=600}this._width=t,this._height=o,this._element.style.width=this._width+"px",this._element.style.height=this._height+"px"},e.prototype.alignIn=function(e,t){var o=this;this._parent?console.warn("Banner already aligned, ignoring..."):(this._parent=e,this._alignment=t||this._alignment,this._resizeListener=function(){o._resize()},window.addEventListener("resize",this._resizeListener),this._resize())},e.prototype._resize=function(){if(this._parent){var e=this._parent.getBoundingClientRect(),t=Math.min(1,cc.view.getFrameSize().width/this._width),o=Math.min(1,.6*cc.view.getFrameSize().height/this._height);switch(this._alignment){case"TOP_LEFT":this._position(e.left,e.top);break;case"TOP_CENTER":this._element.style.transform="scale("+t+")",this._position(e.left+e.width/2-this._width*this._scaleFactor/2,e.top-(1-t)*this._height*.5);break;case"TOP_RIGHT":this._position(e.left+e.width-this._width*this._scaleFactor,e.top);break;case"CENTER_LEFT":this._element.style.transform="scale("+o+")",this._position(e.left-(1-o)*this._width*.5,e.top+e.height/2-this._height*this._scaleFactor/2);break;case"CENTER":this._position(e.left+e.width/2-this._width*this._scaleFactor/2,e.top+e.height/2-this._height*this._scaleFactor/2);break;case"CENTER_RIGHT":this._element.style.transform="scale("+o+")",this._position(e.left+e.width-this._width*this._scaleFactor+(1-o)*this._width*.5,e.top+e.height/2-this._height*this._scaleFactor/2);break;case"BOTTOM_LEFT":this._position(e.left,e.top+e.height-this._height*this._scaleFactor);break;case"BOTTOM_CENTER":this._position(e.left+e.width/2-this._width*this._scaleFactor/2,e.top+e.height-this._height*this._scaleFactor);break;case"BOTTOM_RIGHT":this._position(e.left+e.width-this._width*this._scaleFactor,e.top+e.height-this._height*this._scaleFactor)}}},e.prototype._position=function(e,t){this._element.style.left=e+this._offsetX+"px",this._element.style.top=t+this._offsetY+"px"},e.prototype._createElement=function(e){this._element=document.createElement("div"),this._element.style.position="absolute",this._element.style.top="0px",this._element.style.left="0px",this._element.style.zIndex="-1",this._element.id=""+e},e}(),h=function(){function e(){this._alignments=[],this._banners=[]}return e.prototype.create=function(e){var t=e.screenPointcut,o=e.alignment,n=e.size,r=new f;return r.create({screenPointcut:t,alignment:o,size:n}),this._banners.push(r),this._alignments.push(o),r},e.prototype.show=function(e,t){this._banners.map(function(o){o.show(e,t)})},e.prototype.hide=function(e){this._banners.map(function(t){t.hide(e)})},e}(),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameCanvas=null,t.adsLoaded=!1,t.adContainer=null,t.adDisplayContainer=null,t.adsLoader=null,t.adsManager=null,t.googleModuleAvailAble=!0,t.callbackAfterPlayVideo=null,t.callbackBeforePlayVideo=null,t.startShowVideoAdsFn=null,t.banner=null,t.timeOutFn=null,t}return r(t,e),t.prototype._preInit=function(){return new Promise(function(e){e("NgcAds_impl_GameDistribution pre-initialized")})},t.prototype._getName=function(){return"GameDistribution"},t.prototype._init=function(){return this.bannerData||(this.bannerData=cc.sys.isMobile?d:p),this._bannerPointcuts={},this.createBanner(),new Promise(function(e){e("NgcAds_impl_GameDistribution initialized")})},t.prototype._preCacheAds=function(e){var t=window.gdsdk;if(void 0!==t&&"undefined"!==t.preloadAd){console.log("Preloading "+l.AdsType[e]+" ad");var o=e===l.AdsType.VideoReward?"rewarded":"";t.preloadAd(o).then(function(t){console.log(l.AdsType[e]+" ad preloaded: ",t)}).catch(function(e){console.error("Failed to preload: ",e)})}},t.prototype._adsIsAvailable=function(e){switch(e){case l.AdsType.Banner:case l.AdsType.Interstitial:return!0;case l.AdsType.VideoReward:return!this.waitingNewVideo}return!0},t.prototype._showAds=function(e,t,o,n){switch(console.log("NgcAds_impl_GameDistribution Showing "+l.AdsType[t]+" ad..."),c.default.inst.resetAdTimes(),t){case l.AdsType.Banner:this.showBanner(e,o,n);break;case l.AdsType.Interstitial:this.GDShowInterstitialAd(o,n);break;case l.AdsType.VideoReward:this.GDShowRewardedAd(o,n)}},t.prototype._hideAds=function(e,t,o){switch(console.log("NgcAds_impl_GameDistribution Hiding "+l.AdsType[t]+" ad..."),t){case l.AdsType.Banner:this.hideBanner(e,o);break;case l.AdsType.Interstitial:case l.AdsType.VideoReward:}},t.prototype.createBanner=function(){for(var e in this.bannerData){var t=e,o=this.bannerData[t],n=new h;for(var r in this._bannerPointcuts[t]=n,o){var i=r,a=o[i].size;this._bannerPointcuts[t].create({screenPointcut:t,alignment:i,size:a})}}},t.prototype.showBanner=function(e,t,o){var n;return console.log("NgcAds_impl_GameDistribution Show banner: ",e),null===(n=this._bannerPointcuts[e])||void 0===n||n.show(t,o),this.isBannerShowing=!0,this.isBannerShowing},t.prototype.hideBanner=function(e,t){var o;return console.log("NgcAds_impl_GameDistribution Hide banner: ",e),null===(o=this._bannerPointcuts[e])||void 0===o||o.hide(t),s.default.inst.topBannerIsActive=this.isBannerShowing=!1,this.isBannerShowing},t.prototype._targetingPersonalAds=function(){},t.prototype._waitVideoRewardReady=function(){this.waitingNewVideo=!1},t.prototype.GDShowInterstitialAd=function(e,t){var o=window.gdsdk;if(void 0!==o&&"undefined"!==o.showAd){var n=this.setLoadingAdTimeOut(t);c.default.inst.setBeforeAdHandler(e),o.showAd().then(function(e){console.error("GDShowInterstitialAd Response: ",e),clearTimeout(n),t(c.default.inst.adIsWatched(),c.default.inst.getAdViewingDuration())}).catch(function(e){console.error("GDShowInterstitialAd Error: ",e),clearTimeout(n),t(!1,0)})}},t.prototype.GDShowRewardedAd=function(e,t){var o=window.gdsdk;if(void 0!==o&&"undefined"!==o.showAd){var n=this.setLoadingAdTimeOut(t);c.default.inst.setBeforeAdHandler(e),o.showAd("rewarded").then(function(e){console.error("GDShowRewardedAd Response: ",e),clearTimeout(n),t(c.default.inst.adIsWatched(),c.default.inst.getAdViewingDuration())}).catch(function(e){console.error("GDShowRewardedAd Error: ",e),clearTimeout(n),t(!1,0)})}},t.prototype.setLoadingAdTimeOut=function(e){return setTimeout(function(){c.default.inst.impressionUrlIsPinged()||cc.director.isPaused()||(console.error("[Ads_impl_GameDistributionSrv] It took too long to load the ad"),e&&e(!1,0))},1e3*a.default.inst.maxLoadingAdMessageDuration)},i([u],t)}(l.NgcAds);o.default=g,cc._RF.pop()},{"../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../SDK/GameDistribution/GameDistributionSrv":"GameDistributionSrv","./Ads":"Ads"}],Ads:[function(e,t,o){"use strict";cc._RF.push(t,"def7e1pH1NBZJkP/CQiMPvW","Ads");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcAds=o.AdsType=void 0;var c=e("../Platform/Platform"),l=e("../Service"),u=cc._decorator,p=u.ccclass;u.property,function(e){e[e.Banner=0]="Banner",e[e.Interstitial=1]="Interstitial",e[e.VideoReward=2]="VideoReward"}(o.AdsType||(o.AdsType={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isBannerShowing=!1,t.waitingNewVideo=!1,t.timeStartWaitNewVideo=null,t._isSDKLoaded=!0,t}return r(t,e),t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.getName=function(){return this._getName()},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){return this._init(e)},t.prototype.preCacheAds=function(e){this._preCacheAds(e)},t.prototype.adsIsAvailable=function(e){return!c.NgcPlatform.isOfflineMode()&&this._adsIsAvailable(e)},t.prototype.showAds=function(e,t,o,n){void 0===o&&(o=null),void 0===n&&(n=null),this._showAds(e,t,o,n)},t.prototype.targetingPersonalAds=function(e){this._targetingPersonalAds(e)},t.prototype.hideAds=function(e,t,o){void 0===o&&(o=null),this._hideAds(e,t,o)},t.prototype.waitVideoRewardReady=function(){this._waitVideoRewardReady()},t.prototype.isFakeAdsPlatform=function(){return!1},Object.defineProperty(t.prototype,"isLazyLoad",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSDSLoaded",{get:function(){return this._isSDKLoaded},enumerable:!1,configurable:!0}),t.prototype._loadSDK=function(){return a(this,void 0,Promise,function(){return s(this,function(){return[2]})})},t.srvInstances=[],t.inst=null,i([p],t)}(l.NgcService);o.NgcAds=d,cc._RF.pop()},{"../Platform/Platform":"Platform","../Service":"Service"}],AppEventsCenter:[function(e,t,o){"use strict";cc._RF.push(t,"3e81d3TZCBE1bOYZzwJRXDu","AppEventsCenter");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i,a=e("./Utils/CustomEventEmitter");(function(e){e[e.NODE_POOL_MANAGER_READY=0]="NODE_POOL_MANAGER_READY",e[e.GAMESCREEN_ASSET_READY=1]="GAMESCREEN_ASSET_READY",e[e.EMOTES_ASSET_READY=2]="EMOTES_ASSET_READY",e[e.GAME_PARAMETERS_READY=3]="GAME_PARAMETERS_READY"})(i||(i={}));var s=function(e){function t(){return e.call(this)||this}return r(t,e),Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.events=i,t}(a.default);o.default=s,cc._RF.pop()},{"./Utils/CustomEventEmitter":"CustomEventEmitter"}],BackgroundAdapterX:[function(e,t,o){"use strict";cc._RF.push(t,"460ecT/dTRO9qnQQiOQX7fE","BackgroundAdapterX");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){var e=cc.view.getCanvasSize().width/this.node.width,t=this.node.width*e;this.node.scaleX=t},i([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],BackgroundAdapter:[function(e,t,o){"use strict";cc._RF.push(t,"608deY4vcVBhJZyj7CDPv7e","BackgroundAdapter");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){cc.log(cc.view.getCanvasSize().width);var e=Math.min(cc.view.getCanvasSize().width/this.node.width,cc.view.getCanvasSize().height/this.node.height),t=this.node.width*e,o=this.node.height*e;this.node.parent.scaleX=cc.view.getCanvasSize().width/t,this.node.parent.scaleY=cc.view.getCanvasSize().height/o},i([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],BadConnectionNotification:[function(e,t,o){"use strict";cc._RF.push(t,"cc8c1yHvwNOCqAGDj7biarD","BadConnectionNotification");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from=1,t.to=2,t.cycleTimeSec=1,t}return r(t,e),t.prototype.start=function(){cc.tween(this.node).repeatForever(cc.tween(this.node).to(1,{opacity:100}).to(1,{opacity:100}).to(1,{opacity:255}).to(1,{opacity:255}).to(1,{opacity:100}).to(1,{opacity:255})).start()},i([c],t.prototype,"from",void 0),i([c],t.prototype,"to",void 0),i([c],t.prototype,"cycleTimeSec",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],BigDay:[function(e,t,o){"use strict";cc._RF.push(t,"4b0fewk7HNAibRnnkQyZwKD","BigDay");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBigDay=void 0;var a=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.today=null,t.tomorrow=null,t.other=null,t.items=null,t.specialReward=null,t.specialIcon=null,t.dayLabel=null,t.timeRemaining=null,t.multiNum=null,t.itemIcon=null,t.timeUntilClaim=0,t.curTime=0,t}return r(t,e),i([l(cc.Node)],t.prototype,"today",void 0),i([l(cc.Node)],t.prototype,"tomorrow",void 0),i([l(cc.Node)],t.prototype,"other",void 0),i([l(cc.Node)],t.prototype,"items",void 0),i([l(cc.Node)],t.prototype,"specialReward",void 0),i([l(cc.Sprite)],t.prototype,"specialIcon",void 0),i([l(a.NgcLabelLocalized)],t.prototype,"dayLabel",void 0),i([l(cc.Label)],t.prototype,"timeRemaining",void 0),i([l(cc.Label)],t.prototype,"multiNum",void 0),i([l(cc.Sprite)],t.prototype,"itemIcon",void 0),i([c],t)}(cc.Component);o.NgcBigDay=u,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],BlendAnimBase:[function(e,t,o){"use strict";cc._RF.push(t,"e2368ba6BJMlqgE4v614kYX","BlendAnimBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Network/HSANetUtils"),s=e("./Utils/ConstConfig"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton=null,t.allAnims=[],t.skin="",t.queuedSkin=null,t}var o;return r(t,e),o=t,t.prototype.idle=function(){},t.prototype.getSkin=function(){return this.skin},t.prototype.queueSkin=function(e){this.queuedSkin=e},t.prototype.setSkinByName=function(e){this.getSkeleton().setSkin(e),this.skin=e},t.prototype.findSkinIndexByName=function(e){for(var t=0,o=0,n=this.getSkeleton().skeletonData.getRuntimeData(!0).skins;o<n.length;o++){if(n[o].name==e)return t;t++}return-1},t.prototype.getSkinNameByIndex=function(e){return e<0||e>=s.ConstConfig.SHARK_DATABASE.length?(console.error("Invalid skin index"),""):s.ConstConfig.SHARK_DATABASE[e].name},t.prototype.setSkinByIndex=function(e){if(!(e<0||e>=this.getNumSkins())){for(var t=0,o=0,n=this.getSkeleton().skeletonData.getRuntimeData(!0).skins;o<n.length;o++){var r=n[o];if(t==e)return this.setSkinByName(r.name),r.name;t++}return""}cc.log("Skin idx out of range")},t.prototype.setRandomSkin=function(){this.setSkinByIndex(a.default.RandomRange(1,this.getNumSkins()-1,!0))},t.prototype.getNumSkins=function(){return s.ConstConfig.SHARK_DATABASE.length},t.prototype.playAnim=function(e){this.getSkeleton().setAnimation(0,e.name,e.loop)},t.prototype.getSkeleton=function(){return this.skeleton?this.skeleton:(this.skeleton=this.node.getComponent(sp.Skeleton),this.skeleton)},t.prototype.setTimeScale=function(e){this.skeleton.timeScale=e},t.prototype.getTimeScale=function(){return this.skeleton.timeScale},t.prototype.init=function(e){this.mixFlatAnimArray(e)},t.prototype.onLoad=function(){var e=this.flattenAllAnims();this.init(e)},t.prototype.start=function(){},t.prototype.flattenAllAnims=function(){for(var e=[],t=0;t<this.allAnims.length;t++)for(var o=this.allAnims[t],n=0;n<o.length;n++)e.push(o[n]);return e},t.prototype.mixFlatAnimArray=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)this.getSkeleton()&&(this.getSkeleton().setMix(e[t],e[n],o.defaultBlendTimeSec),this.getSkeleton().setMix(e[n],e[t],o.defaultBlendTimeSec))},t.prototype.update=function(){this.queuedSkin&&(this.setSkinByName(this.queuedSkin),this.queuedSkin=null)},t.defaultBlendTimeSec=.1,o=i([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"./Network/HSANetUtils":"HSANetUtils","./Utils/ConstConfig":"ConstConfig"}],BlockObject:[function(e,t,o){"use strict";cc._RF.push(t,"f76a1IHkkFBZZIVuxZhRwER","BlockObject");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../globals"),s=e("../Main"),c=e("../../Scripts/HSAUtils"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteNode=null,t.physicsNode=null,t.textNode=null,t._isEnabled=!1,t._iconBlinkingTween=null,t._textBlinkingTween=null,t._limitedSize=0,t}return r(t,e),t.prototype.start=function(){this.spriteNode.opacity=0,this.textNode.opacity=0},t.prototype.update=function(){var e=null;if(s.Main.getAppContext()===s.AppContext.Gameplay&&(e=a.default.PlayerController.localPlayer),e&&e.curSize>this.limitedSize){var t=e.getWorldPosition(),o=c.default.getWorldPos(this.node);cc.Vec2.distance(t,o)<800?(null===this._iconBlinkingTween&&(this.spriteNode.opacity=0,this.textNode.scale=e.node.scale,this.onEnable()),this.textNode.opacity=this.spriteNode.opacity):null!=this._iconBlinkingTween&&this.spriteNode.opacity<35&&(this.onDisable(),this.spriteNode.opacity=0,this.textNode.opacity=0)}else null!=this._iconBlinkingTween&&(this.onDisable(),this.spriteNode.opacity=0,this.textNode.opacity=0)},t.prototype.onEnable=function(){this._iconBlinkingTween&&this._iconBlinkingTween.stop(),this._iconBlinkingTween=cc.tween(this.spriteNode).repeatForever(cc.tween().to(.5,{opacity:30}).to(.5,{opacity:255}).start()).start(),this._textBlinkingTween=cc.tween(this.textNode).repeatForever(cc.tween().by(.5,{scale:-.3}).by(.5,{scale:.3}).start()).start(),this._isEnabled=!0},t.prototype.onDisable=function(){this._iconBlinkingTween&&(this._iconBlinkingTween.stop(),this._iconBlinkingTween=null),this._textBlinkingTween&&(this._textBlinkingTween.stop(),this._textBlinkingTween=null),this._isEnabled=!1},Object.defineProperty(t.prototype,"limitedSize",{get:function(){return this._limitedSize},set:function(e){this._limitedSize=e},enumerable:!1,configurable:!0}),t.prototype.setObjectSize=function(e){var t=this.physicsNode.getComponent(cc.PhysicsBoxCollider);t.size.width=e.width,t.size.height=e.height;var o=Math.min(e.height,e.width)/this.spriteNode.width;this.spriteNode.scale=o,this.textNode.scale=o},i([p(cc.Node)],t.prototype,"spriteNode",void 0),i([p(cc.Node)],t.prototype,"physicsNode",void 0),i([p(cc.Node)],t.prototype,"textNode",void 0),i([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../Scripts/HSAUtils":"HSAUtils","../../globals":"globals","../Main":"Main"}],BombController:[function(e,t,o){"use strict";cc._RF.push(t,"a472422thRJ3qEW7eFiDkgl","BombController");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../GameCamera"),s=e("./ObstacleControllerBase"),c=e("../GameObject"),l=e("../SoundManager"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.explosionPartical=null,t.nodeBomb=null,t.dame=0,t.TimeAutoReappears=0,t.anim=null,t}return r(t,e),t.prototype.start=function(){e.prototype.start.call(this),this.initParameters(),this.anim=this.nodeBomb.getComponent(cc.Animation)},t.prototype.initParameters=function(){var e=this.obstacleData.navalMine;this.dame=e.damage,this.TimeAutoReappears=e.RespawnTime},t.prototype.onLoad=function(){var e=this;this.node.on("canExplosion",function(){e.nodeBomb.active&&e.doExplosion()},this)},t.prototype.getType=function(){return c.GameObjectType.Bomb},t.prototype.getDame=function(){return this.dame},t.prototype.doExplosion=function(){var e=this;this.explosionPartical.node.active=!0,this.nodeBomb.active=!1,this.anim.stop(this.anim.getClips()[0].name),this.node.getComponent(cc.CircleCollider).enabled=!1,this.scheduleOnce(function(){e.explosionPartical.node.active=!1},.5),this.autoAppearAfterExplosion(this.TimeAutoReappears),this.playSoundEffect()},t.prototype.playSoundEffect=function(){a.default.inst.IsNodeVisible(this.node)?l.default.inst.playBombExplosion(.8):l.default.inst.playBombExplosion(.1)},t.prototype.autoAppearAfterExplosion=function(e){var t=this;this.scheduleOnce(function(){t.anim.play(t.anim.getClips()[1].name),t.nodeBomb.active=!0,t.anim.once("finished",function(){t.anim.play(t.anim.getClips()[0].name),t.explosionPartical.resetSystem(),t.node.getComponent(cc.CircleCollider).enabled=!0})},e-this.anim.getClips()[0].duration)},i([d(cc.ParticleSystem)],t.prototype,"explosionPartical",void 0),i([d(cc.Node)],t.prototype,"nodeBomb",void 0),i([p],t)}(s.default);o.default=f,cc._RF.pop()},{"../GameCamera":"GameCamera","../GameObject":"GameObject","../SoundManager":"SoundManager","./ObstacleControllerBase":"ObstacleControllerBase"}],BoostBarOnShark:[function(e,t,o){"use strict";cc._RF.push(t,"591d0vbnxtBpbY/PhyzPVOp","BoostBarOnShark");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../globals"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.FLASHING_SPEED=1.5,t.BoostBarElement=[null],t.offsetProgress=.05,t}return r(t,e),t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.monitorProgress=function(e){var t=this;this.BoostBarElement.forEach(function(o,n){o.progress>=1-t.offsetProgress?o.node.getChildByName("barOrange").active=!0:o.node.getChildByName("barOrange").active=!1,o.progress=cc.misc.clampf((e-100*n)/100,0,1)}),this.BoostBarElement[this.BoostBarElement.length-1].progress>=1&&(a.default.GameUI.inst.showDragToControl(!1),a.default.GameUI.inst.showDoubleTabTutorial())},i([l([cc.ProgressBar])],t.prototype,"BoostBarElement",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../globals":"globals"}],BoostBar:[function(e,t,o){"use strict";cc._RF.push(t,"3453dJG2TtBjLaA32Vbh9Br","BoostBar");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../globals"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.FLASHING_SPEED=1.5,t.progressBars=[null],t.fxFlashing=null,t.fxReducing=null,t.isForceFullEnergy=!1,t._flashingStarted=!1,t._opacityDeltaPerSecond=0,t._isIncreasing=!1,t}return r(t,e),t.prototype.start=function(){this.startFlashing(!1),this.enableFXInscreasing(!1)},t.prototype.update=function(e){this._flashingStarted&&this.updateFlashing(e),this._isIncreasing&&this.updateFXIncreasing(e)},t.prototype.monitorProgress=function(e){this.isForceFullEnergy||(e=cc.misc.clampf(e,0,1),this.progressBars[0].progress<e?this.enableFXInscreasing(!0):this.enableFXInscreasing(!1),this.progressBars.forEach(function(t){t.progress=e}),e>=1?this.startFlashing(!0):this._flashingStarted&&this.startFlashing(!1))},t.prototype.forceFullBoostBar=function(e){this.isForceFullEnergy=e,this.isForceFullEnergy&&(this.enableFXInscreasing(!0),this.startFlashing(!0),this.progressBars.forEach(function(e){e.progress=1}))},t.prototype.startFlashing=function(e){this._flashingStarted&&e||(this._flashingStarted=e,this.fxFlashing.active=e,this.fxFlashing.opacity=0,!0===e&&(this._opacityDeltaPerSecond=510/this.FLASHING_SPEED,a.default.GameUI.inst.showDoubleTabTutorial()))},t.prototype.updateFlashing=function(e){var t=this._opacityDeltaPerSecond*e,o=this.fxFlashing.opacity;o+t<0?(t=-o,this._opacityDeltaPerSecond*=-1):o+t>255&&(t=255-o,this._opacityDeltaPerSecond*=-1),this.fxFlashing.opacity+=t},t.prototype.enableFXInscreasing=function(e){this.fxReducing.active=e,this._isIncreasing=e},t.prototype.updateFXIncreasing=function(){var e=this.progressBars[0].node,t=e.getPosition().x-e.width*e.scaleX,o=cc.v2(t+this.fxReducing.width/4*this.fxReducing.scaleX,this.fxReducing.y);this.fxReducing.setPosition(o)},i([l([cc.ProgressBar])],t.prototype,"progressBars",void 0),i([l(cc.Node)],t.prototype,"fxFlashing",void 0),i([l(cc.Node)],t.prototype,"fxReducing",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../globals":"globals"}],BoosterUI:[function(e,t,o){"use strict";cc._RF.push(t,"1d1deGXPflNmKyJs2PMvUoc","BoosterUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.boosterType=void 0;var a,s=e("../../NanoGameCore/Core/Utils"),c=e("../../NanoGameCore/Services/Inventory/Inventory"),l=e("../TrackingManager"),u=e("../UserInfo"),p=e("../Utils/ConstConfig"),d=cc._decorator,f=d.ccclass,h=d.property;(function(e){e[e.none=0]="none",e[e.magnet=1]="magnet",e[e.gold=2]="gold",e[e.electro=3]="electro"})(a=o.boosterType||(o.boosterType={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollView=null,t.activatedHelmet=null,t.activatedArmor=null,t.activatedMask=null,t.shockHelmetSpriteFrame=null,t.shockArmorSpriteFrame=null,t.shockMaskSpriteFrame=null,t.magnetHelmetSpriteFrame=null,t.magnetArmorSpriteFrame=null,t.magnetMaskSpriteFrame=null,t.bronzeHelmetSpriteFrame=null,t.bronzeArmorSpriteFrame=null,t.bronzeMaskSpriteFrame=null,t.magnetAnim=null,t.goldAnim=null,t.electroAnim=null,t.boosterFX=null,t.button=null,t.SHOCK_WEIGHT=0,t.MAGNET_WEIGHT=50,t.BRONZE_WEIGHT=50,t.RABBID_HEAD_OFFSET=cc.v2(50,50),t.RABBIT_ARMOR_OFFSET=cc.v2(26,-42),t.RABBIT_MASK_OFFSET=cc.v2(57,-12),t.ROLLING_SPEED_DEFAULT=6,t.curActivatedBooster=a.none,t.rollingSpeed=t.ROLLING_SPEED_DEFAULT,t.scrollContentChildOffset=0,t.isSlotMachineWorking=!1,t}return r(t,e),t.prototype.start=function(){cc.tween(this.activatedHelmet).repeatForever(cc.tween(this.activatedHelmet).to(.3,{angle:360}).to(0,{angle:0})).start(),cc.tween(this.activatedArmor).repeatForever(cc.tween(this.activatedArmor).to(.3,{angle:360}).to(0,{angle:0})).start(),cc.tween(this.activatedMask).repeatForever(cc.tween(this.activatedMask).to(.3,{angle:360}).to(0,{angle:0})).start(),this.setActiveOfItems(!1),this.boosterFX.active=this.curActivatedBooster!=a.none,this.scrollContentChildOffset=this.scrollView.content.children[0].getContentSize().height+this.scrollView.content.getComponent(cc.Layout).spacingY},t.prototype.rolling=function(){this.scrollView.node.on("scroll-ended",this.rollingFromBottomToTop,this),this.scrollView.scrollToTop(.01,!1)},t.prototype.rollingFromBottomToTop=function(){this.scrollView.scrollToBottom(0,!0),this.scrollView.scrollToTop(this.rollingSpeed,!1)},t.prototype.onDisable=function(){this.scrollView.node.off("scroll-ended",this.rollingFromBottomToTop,this)},t.prototype.onEnable=function(){this.rolling(),this.activatedArmor.setPosition(0,0),this.activatedHelmet.setPosition(0,0),this.activatedMask.setPosition(0,0),this.boosterFX.active=!1},t.prototype.getRandomBooster=function(){var e=Math.round(Math.random()*(this.SHOCK_WEIGHT+this.BRONZE_WEIGHT+this.MAGNET_WEIGHT)+1);return e<=this.SHOCK_WEIGHT?a.electro:e<=this.MAGNET_WEIGHT+this.SHOCK_WEIGHT?a.magnet:a.gold},t.prototype.triggerBooster=function(e,t,o){var n=this;if(void 0===t&&(t=!1),void 0===o&&(o=null),!this.isSlotMachineWorking){o||(o=this.getRandomBooster());var r,i,d,f=0;this.curActivatedBooster=o,o==a.electro?(r=this.shockHelmetSpriteFrame,i=this.shockArmorSpriteFrame,d=this.shockMaskSpriteFrame,f=0):o==a.magnet?(r=this.magnetHelmetSpriteFrame,i=this.magnetArmorSpriteFrame,d=this.magnetMaskSpriteFrame,f=2*this.scrollContentChildOffset):(r=this.bronzeHelmetSpriteFrame,i=this.bronzeArmorSpriteFrame,d=this.bronzeMaskSpriteFrame,f=this.scrollContentChildOffset),t||l.default.inst.LogEvent_BuyItem(s.Utils.enumToString(a,this.curActivatedBooster),1,1,1,u.UserInfo.curCoin);var h={itemID:p.ConstConfig.INVENTORY.ITEM_ID.STAR,count:0},g={itemID:s.Utils.enumToString(a,this.curActivatedBooster),count:1};c.NgcInventory.inst.addItemList([h,g],function(e,t){e?console.log("[BoosterUI] 'addItemList callback ERR = "+e):console.log("[BoosterUI] 'addItemList callback success res = "+t)}),this.isSlotMachineWorking=!0,this.scrollView.scrollToTop(.01,!1),this.rollingSpeed=.3,this.scheduleOnce(function(){n.scrollView.stopAutoScroll();var t=n.boosterFX.getComponent(cc.Animation);n.scrollView.setContentPosition(cc.v2(n.scrollView.content.x,f)),n.activatedHelmet.getComponent(cc.Sprite).spriteFrame=r,n.activatedArmor.getComponent(cc.Sprite).spriteFrame=i,n.activatedMask.getComponent(cc.Sprite).spriteFrame=d,n.button.interactable=!1;var o=e.add(n.RABBID_HEAD_OFFSET),a=e.add(n.RABBIT_MASK_OFFSET),s=e.add(n.RABBIT_ARMOR_OFFSET);n.scheduleOnce(function(){n.setActiveOfItems(!0),cc.tween(n.activatedHelmet).to(.5,{position:cc.v3(n.activatedHelmet.parent.convertToNodeSpaceAR(o))}).call(function(){n.activatedHelmet.active=!1,n.button.interactable=!0,n.activatedHelmet.setPosition(0,0),n.boosterFX.active=!0,n.boosterFX.scale=1,n.boosterFX.angle=0,n.boosterFX.opacity=255,t.play(t.getClips()[n.curActivatedBooster-1].name),n.rollingSpeed=n.ROLLING_SPEED_DEFAULT,n.scrollView.scrollToTop(n.rollingSpeed,!1),n.isSlotMachineWorking=!1}).start(),cc.tween(n.activatedArmor).to(.5,{position:cc.v3(n.activatedArmor.parent.convertToNodeSpaceAR(s))}).call(function(){n.activatedArmor.active=!1,n.activatedArmor.setPosition(0,0)}).start(),cc.tween(n.activatedMask).to(.5,{position:cc.v3(n.activatedMask.parent.convertToNodeSpaceAR(a))}).call(function(){n.activatedMask.active=!1,n.activatedMask.setPosition(0,0)}).start()},.2)},1.5)}},t.prototype.setActiveOfItems=function(e){this.activatedHelmet.active=e,this.activatedArmor.active=e,this.activatedMask.active=e},i([h(cc.ScrollView)],t.prototype,"scrollView",void 0),i([h(cc.Node)],t.prototype,"activatedHelmet",void 0),i([h(cc.Node)],t.prototype,"activatedArmor",void 0),i([h(cc.Node)],t.prototype,"activatedMask",void 0),i([h(cc.SpriteFrame)],t.prototype,"shockHelmetSpriteFrame",void 0),i([h(cc.SpriteFrame)],t.prototype,"shockArmorSpriteFrame",void 0),i([h(cc.SpriteFrame)],t.prototype,"shockMaskSpriteFrame",void 0),i([h(cc.SpriteFrame)],t.prototype,"magnetHelmetSpriteFrame",void 0),i([h(cc.SpriteFrame)],t.prototype,"magnetArmorSpriteFrame",void 0),i([h(cc.SpriteFrame)],t.prototype,"magnetMaskSpriteFrame",void 0),i([h(cc.SpriteFrame)],t.prototype,"bronzeHelmetSpriteFrame",void 0),i([h(cc.SpriteFrame)],t.prototype,"bronzeArmorSpriteFrame",void 0),i([h(cc.SpriteFrame)],t.prototype,"bronzeMaskSpriteFrame",void 0),i([h(cc.AnimationClip)],t.prototype,"magnetAnim",void 0),i([h(cc.AnimationClip)],t.prototype,"goldAnim",void 0),i([h(cc.AnimationClip)],t.prototype,"electroAnim",void 0),i([h(cc.Node)],t.prototype,"boosterFX",void 0),i([h(cc.Button)],t.prototype,"button",void 0),i([f],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../../NanoGameCore/Core/Utils":"Utils","../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../TrackingManager":"TrackingManager","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig"}],BuildConfig:[function(e,t,o){"use strict";cc._RF.push(t,"a3c26DUjBdO/py9pJ58vSjj","BuildConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBuildConfig=void 0,o.NgcBuildConfig={buildVersionName:"20220706.90.59.GameDistribution",offlineMode:!1,platformGameID:"HSA",buildPlatform:"GameDistribution",uplayGenomeId:"c8203404-737c-4678-ae3e-7268df4d4abc",gameClientURL:"https://nano.ubisoft.com/HungrySharkArena/index.html",shortGameClientURL:"uat.nano.ubisoft.com/?gameID=HSA",serverSplitting:!1,useNgcServer:!1,alwaysOfferFreeRevive:!1,enabledDebugMode:!1,gameServerURL:"wss://hs-gameserver.nano.ubisoft.com:1339/003",tuningDataURL:"https://nanoservices-storage-prod.s3.ap-south-1.amazonaws.com/HSA/GameParameters.yaml",versionValidURL:"",deploymentEnvironment:"Live",SDK:{FacebookSrv:{appID:322672265443395,secret:""},NanoSrv:{url:"https://services.nano.ubisoft.com"},UplaySrv:{urlConnect:"https://connect.ubisoft.com",env:"PROD"}},services:{NavBar:{shareButton:!1,backToAppButton:!1,settingButton:!0,abountButton:!0,howtoPlayButton:!0,moreGamesButton:!1,currentGamesButton:!1,likeUsButton:!1,loginButton:!1,addToHomeButton:!1,languageButton:!0,controlButton:!1,cookieButton:!1,shareUrl:"https://nano.ubisoft.com/HungrySharkArena/index.html?share=true",shareDescription:"Play free live multiplayer games with Ubisoft Nano!",shareGameName:"Hungry Shark Arena"},Ads:{adInPlayBannerID1:"nano-ubisoft-com_728x90",subID:"HSAnano",bannerHeight:100,timeWaitNewVideo:2},PWF:{mandatoryLogIn:!1,active:!0},Tips:{bundles:"01_Tip_Texture"},ShareMe:{facebook:!0,twitter:!0,email:!0}}},cc._RF.pop()},{}],BundleAsset:[function(e,t,o){"use strict";cc._RF.push(t,"57a8eJYSkBFLJtQk8h3J0G5","BundleAsset");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.BundleAsset=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundUnselected=null,t.backgroundSelected=null,t}return r(t,e),i([c(cc.SpriteFrame)],t.prototype,"backgroundUnselected",void 0),i([c(cc.SpriteFrame)],t.prototype,"backgroundSelected",void 0),i([s],t)}(cc.Component);o.BundleAsset=l,cc._RF.pop()},{}],Bundle:[function(e,t,o){"use strict";cc._RF.push(t,"dbf3cbUs+NIEaq/YmepHEbz","Bundle");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.Bundle=void 0;var a=e("../../../../Core/ResizableComponent"),s=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),l=e("../../../../GameFramework/Scripts/NgcShopManager"),u=e("../AssetComponent/BundleAsset"),p=e("../ItemPool"),d=e("./ItemShop"),f=cc._decorator,h=f.ccclass,g=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.bundleName=null,t.promoteTag=null,t.timeContainer=null,t.itemContainer=null,t.itemContainerLayout=null,t.timeExpired=null,t.fullCost=null,t.fullCostCurrencyIcon=null,t.actualCost=null,t.actualCostCurrencyIcon=null,t.reducePercent=null,t.coinSpriteFrame=null,t.starSpriteFrame=null,t._bundleAsset=null,t._displayingItemInfoList=[],t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._bundleAsset=this.node.getComponent(u.BundleAsset),this.updateBackground()},t.prototype.childUpdateInfo=function(){var e=this.ItemInfo;this.bundleName.setLocalizedText(e.bundleName),this.promoteTag.setLocalizedText(e.xValue),this.fullCost.string=e.fullCost.value.toString(),this.fullCostCurrencyIcon.spriteFrame="coin"===e.fullCost.currency?this.coinSpriteFrame:this.starSpriteFrame,this.actualCost.string=this._itemInfo.price.value.toString(),this.actualCostCurrencyIcon.spriteFrame="coin"===e.price.currency?this.coinSpriteFrame:this.starSpriteFrame,this.actualCost.node.opacity=l.NgcShopManager.getInstance().getCurrencyCountByID(e.price.currency)<this._itemInfo.price.value?100:255,this.reducePercent.string=e.promoTag.toString()+"%",this.setTimeExpired(),this.updateItems()},t.prototype.childSelect=function(){this.updateBackground()},Object.defineProperty(t.prototype,"ItemInfo",{get:function(){return this._itemInfo},enumerable:!1,configurable:!0}),t.prototype.updateBackground=function(){this.background.spriteFrame=this._isSelected?this._bundleAsset.backgroundSelected:this._bundleAsset.backgroundUnselected},t.prototype.setTimeExpired=function(){this.schedule(this.timerCountDown,1,cc.macro.REPEAT_FOREVER),this.timerCountDown()},t.prototype.timerCountDown=function(){var e=this._itemInfo,t=Date.parse(e.timer)-(new Date).getTime(),o=new Date(t),n=Math.floor(t/864e5),r=o.getHours(),i="0"+o.getMinutes(),a="0"+o.getSeconds();this.timeExpired.string=n.toString()+(n>1?" Days ":" Day ")+r+":"+i.substr(-2)+":"+a.substr(-2),t<0&&l.NgcShopManager.getInstance().checkRemoveEliminatedBundle()},t.prototype.isNewItemList=function(){for(var e=function(e){if(-1==t._displayingItemInfoList.findIndex(function(t){return t.itemID===e}))return{value:!0}},t=this,o=0,n=this.ItemInfo.itemIDs;o<n.length;o++){var r=e(n[o]);if("object"==typeof r)return r.value}return!1},t.prototype.updateItems=function(){this.isNewItemList()&&(this.removeOldItems(),this.addNewItems())},t.prototype.removeOldItems=function(){this.itemContainerLayout.node.children.forEach(function(e){p.NgcItemPool.inst.putShopItem(e)}),this.itemContainerLayout.node.removeAllChildren()},t.prototype.addNewItems=function(){var e=this;this._displayingItemInfoList=[],this.ItemInfo.itemIDs.map(function(e){return c.NgcItemInfoManager.getInstance().getSingleItemInfo(e)}).forEach(function(t){var o=p.NgcItemPool.inst.getSingleItem(t.displayType);e.itemContainerLayout.node.addChild(o);var n=o.getComponent(d.ItemShop);n.Interactable=!1;var r={};Object.assign(r,t),r.isBought=!0,r.itemStatusType=c.NgcItemStatusType.Unlock,n.updateInfo(r),e._displayingItemInfoList.push(r)})},t.prototype.resize=function(e){a.ResizableComponent.getResizableComponent(this.node).baseSize.x=this.node.x=0,a.ResizableComponent.resizeNodeByWidth(this.node,e),this.resizeItems()},t.prototype.resizeItems=function(){var e=this.itemContainerLayout.node.children[0].getComponent(a.ResizableComponent).baseSize.width,t=this.itemContainerLayout.node.children[0].getComponent(a.ResizableComponent).baseSize.height,o=this.itemContainerLayout,n=this.itemContainerLayout.node.children.length,r=this.itemContainer.height,i=(this.itemContainer.width-o.paddingLeft-o.paddingRight-(n-1)*o.spacingX)/n;if(i/e*t<=r){var s=Math.floor(i);this.itemContainerLayout.node.children.forEach(function(e){return a.ResizableComponent.resizeNodeByWidth(e,s)})}else{var c=Math.floor(r);this.itemContainerLayout.node.children.forEach(function(e){return a.ResizableComponent.resizeNodeByHeight(e,c)})}},i([g(cc.Sprite)],t.prototype,"background",void 0),i([g(s.NgcLabelLocalized)],t.prototype,"bundleName",void 0),i([g(s.NgcLabelLocalized)],t.prototype,"promoteTag",void 0),i([g(cc.Node)],t.prototype,"timeContainer",void 0),i([g(cc.Node)],t.prototype,"itemContainer",void 0),i([g(cc.Layout)],t.prototype,"itemContainerLayout",void 0),i([g(cc.Label)],t.prototype,"timeExpired",void 0),i([g(cc.Label)],t.prototype,"fullCost",void 0),i([g(cc.Sprite)],t.prototype,"fullCostCurrencyIcon",void 0),i([g(cc.Label)],t.prototype,"actualCost",void 0),i([g(cc.Sprite)],t.prototype,"actualCostCurrencyIcon",void 0),i([g(cc.Label)],t.prototype,"reducePercent",void 0),i([g(cc.SpriteFrame)],t.prototype,"coinSpriteFrame",void 0),i([g(cc.SpriteFrame)],t.prototype,"starSpriteFrame",void 0),i([h],t)}(d.ItemShop);o.Bundle=y,cc._RF.pop()},{"../../../../Core/ResizableComponent":"ResizableComponent","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../AssetComponent/BundleAsset":"BundleAsset","../ItemPool":"ItemPool","./ItemShop":"ItemShop"}],1:[function(){},{}],2:[function(e,t){var o,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(o===setTimeout)return setTimeout(e,0);if((o===i||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch(t){try{return o.call(null,e,0)}catch(t){return o.call(this,e,0)}}}function c(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(function(){try{o="function"==typeof setTimeout?setTimeout:i}catch(e){o=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}})();var l,u=[],p=!1,d=-1;function f(){p&&l&&(p=!1,l.length?u=l.concat(u):d=-1,u.length&&h())}function h(){if(!p){var e=s(f);p=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,p=!1,c(e)}}function g(e,t){this.fun=e,this.array=t}function y(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];u.push(new g(e,t)),1!==u.length||p||s(h)},g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(){return[]},r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],3:[function(e,t){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var o=function(){};o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e}},{}],4:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],5:[function(e,t,o){(function(t,n){var r=/%[sdj%]/g;o.format=function(e){if(!b(e)){for(var t=[],o=0;o<arguments.length;o++)t.push(s(arguments[o]));return t.join(" ")}o=1;for(var n=arguments,i=n.length,a=String(e).replace(r,function(e){if("%%"===e)return"%";if(o>=i)return e;switch(e){case"%s":return String(n[o++]);case"%d":return Number(n[o++]);case"%j":try{return JSON.stringify(n[o++])}catch(t){return"[Circular]"}default:return e}}),c=n[o];o<i;c=n[++o])v(c)||!C(c)?a+=" "+c:a+=" "+s(c);return a},o.deprecate=function(e,r){if(N(n.process))return function(){return o.deprecate(e,r).apply(this,arguments)};if(!0===t.noDeprecation)return e;var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),i=!0}return e.apply(this,arguments)}};var i,a={};function s(e,t){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),_(t)?n.showHidden=t:t&&o._extend(n,t),N(n.showHidden)&&(n.showHidden=!1),N(n.depth)&&(n.depth=2),N(n.colors)&&(n.colors=!1),N(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),p(n,e,n.depth)}function c(e,t){var o=s.styles[t];return o?"\x1b["+s.colors[o][0]+"m"+e+"\x1b["+s.colors[o][1]+"m":e}function l(e){return e}function u(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function p(e,t,n){if(e.customInspect&&t&&I(t.inspect)&&t.inspect!==o.inspect&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return b(r)||(r=p(e,r,n)),r}var i=d(e,t);if(i)return i;var a=Object.keys(t),s=u(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),T(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(t);if(0===a.length){if(I(t)){var c=t.name?": "+t.name:"";return e.stylize("[Function"+c+"]","special")}if(P(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(w(t))return e.stylize(Date.prototype.toString.call(t),"date");if(T(t))return f(t)}var l,_="",v=!1,S=["{","}"];return m(t)&&(v=!0,S=["[","]"]),I(t)&&(_=" [Function"+(t.name?": "+t.name:"")+"]"),P(t)&&(_=" "+RegExp.prototype.toString.call(t)),w(t)&&(_=" "+Date.prototype.toUTCString.call(t)),T(t)&&(_=" "+f(t)),0!==a.length||v&&0!=t.length?n<0?P(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),l=v?h(e,t,n,s,a):a.map(function(o){return g(e,t,n,s,o,v)}),e.seen.pop(),y(l,_,S)):S[0]+_+S[1]}function d(e,t){if(N(t))return e.stylize("undefined","undefined");if(b(t)){var o="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(o,"string")}return S(t)?e.stylize(""+t,"number"):_(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,o,n,r){for(var i=[],a=0,s=t.length;a<s;++a)A(t,String(a))?i.push(g(e,t,o,n,String(a),!0)):i.push("");return r.forEach(function(r){r.match(/^\d+$/)||i.push(g(e,t,o,n,r,!0))}),i}function g(e,t,o,n,r,i){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),A(n,r)||(a="["+r+"]"),s||(e.seen.indexOf(c.value)<0?(s=v(o)?p(e,c.value,null):p(e,c.value,o-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),N(a)){if(i&&r.match(/^\d+$/))return s;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function y(e,t,o){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?o[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+o[1]:o[0]+t+" "+e.join(", ")+" "+o[1]}function m(e){return Array.isArray(e)}function _(e){return"boolean"==typeof e}function v(e){return null===e}function S(e){return"number"==typeof e}function b(e){return"string"==typeof e}function N(e){return void 0===e}function P(e){return C(e)&&"[object RegExp]"===R(e)}function C(e){return"object"==typeof e&&null!==e}function w(e){return C(e)&&"[object Date]"===R(e)}function T(e){return C(e)&&("[object Error]"===R(e)||e instanceof Error)}function I(e){return"function"==typeof e}function R(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}o.debuglog=function(e){if(N(i)&&(i=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(i)){var n=t.pid;a[e]=function(){var t=o.format.apply(o,arguments);console.error("%s %d: %s",e,n,t)}}else a[e]=function(){};return a[e]},o.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},o.isArray=m,o.isBoolean=_,o.isNull=v,o.isNullOrUndefined=function(e){return null==e},o.isNumber=S,o.isString=b,o.isSymbol=function(e){return"symbol"==typeof e},o.isUndefined=N,o.isRegExp=P,o.isObject=C,o.isDate=w,o.isError=T,o.isFunction=I,o.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},o.isBuffer=e("./support/isBuffer");var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),E[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}o.log=function(){console.log("%s - %s",k(),o.format.apply(o,arguments))},o.inherits=e("inherits"),o._extend=function(e,t){if(!t||!C(t))return e;for(var o=Object.keys(t),n=o.length;n--;)e[o[n]]=t[o[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":4,_process:2,inherits:3}],CCGIFTest:[function(e,t,o){"use strict";cc._RF.push(t,"95292FzWddAUopOS5LSKBKW","CCGIFTest");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.CCGIFTest=void 0;var c=e("./CCGIF"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gifImage=null,t}return r(t,e),t.prototype.start=function(){return a(this,void 0,void 0,function(){return s(this,function(){return cc.find("Canvas/loading").active=!0,cc.find("Canvas/btnPlay").active=!1,cc.find("Canvas/loading").active=!1,cc.find("Canvas/btnPlay").active=!0,console.debug("preload success"),[2]})})},t.prototype.onLoad=function(){this.gifImage.getComponent(c.default).loadUrl("https://nanoservices-storage.s3.ap-south-1.amazonaws.com/NGC/1636532242433-UnE.gif")},i([p(cc.Node)],t.prototype,"gifImage",void 0),i([u],t)}(cc.Component);o.CCGIFTest=d,cc._RF.pop()},{"./CCGIF":"CCGIF"}],CCGIF:[function(e,t,o){"use strict";cc._RF.push(t,"c0ff5NcIN5BPITgP1IQiCbP","CCGIF");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./GIF"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.path="",t.delays=[],t.frames=[],t.frameIdx=0,t}return r(t,e),t.prototype.onLoad=function(){},t.prototype.preload=function(){return a(this,void 0,void 0,function(){var e=this;return s(this,function(){return c.GIFCache.getInstance(),[2,new Promise(function(t,o){cc.resources.load(e.path,function(n,r){n?o(n):(e.delays=r._nativeAsset.delays.map(function(e){return e/100}),e.frames=r._nativeAsset.spriteFrames,t())})})]})})},t.prototype.loadUrl=function(e,t,o){var n=this;this.gifSp=e,this.gifSp.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.gifSp.node.setContentSize(152,152),c.GIFCache.getInstance(),cc.assetManager.loadAny({url:t},function(e,t){e||(n.delays=t.delays.map(function(e){return e/100}),n.frames=t.spriteFrames,o&&o(),n.play(!0))})},t.prototype.play=function(e,t){var o=this;if(void 0===e&&(e=!1),void 0===t&&(t=!1),t||this.stop(),this.frames.length){if(this.frameIdx>=this.frames.length&&(this.frameIdx=0,!e))return;this.gifSp.spriteFrame=this.frames[this.frameIdx],this.scheduleOnce(function(){o.play(e,!0)},this.delays[this.frameIdx]),this.frameIdx++}},t.prototype.stop=function(){this.frameIdx=0,this.unscheduleAllCallbacks()},i([p(cc.String)],t.prototype,"path",void 0),i([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./GIF":"GIF"}],CONSTANTS:[function(e,t,o){"use strict";cc._RF.push(t,"ded84qp1pxDWZW97OXieGnS","CONSTANTS"),Object.defineProperty(o,"__esModule",{value:!0}),o.NGC_CONSTANTS=void 0,o.NGC_CONSTANTS={LOCALIZATION_LANG:{ARABIC:cc.sys.LANGUAGE_ARABIC,BULGARIAN:cc.sys.LANGUAGE_BULGARIAN,CHINESE:cc.sys.LANGUAGE_CHINESE,DUTCH:cc.sys.LANGUAGE_DUTCH,ENGLISH:cc.sys.LANGUAGE_ENGLISH,FRENCH:cc.sys.LANGUAGE_FRENCH,GERMAN:cc.sys.LANGUAGE_GERMAN,HUNGARIAN:cc.sys.LANGUAGE_HUNGARIAN,ITALIAN:cc.sys.LANGUAGE_ITALIAN,JAPANESE:cc.sys.LANGUAGE_JAPANESE,KOREAN:cc.sys.LANGUAGE_KOREAN,NORWEGIAN:cc.sys.LANGUAGE_NORWEGIAN,POLISH:cc.sys.LANGUAGE_POLISH,PORTUGUESE:cc.sys.LANGUAGE_PORTUGUESE,ROMANIAN:cc.sys.LANGUAGE_ROMANIAN,RUSSIAN:cc.sys.LANGUAGE_RUSSIAN,SPANISH:cc.sys.LANGUAGE_SPANISH,TURKISH:cc.sys.LANGUAGE_TURKISH,UKRAINIAN:cc.sys.LANGUAGE_UKRAINIAN,UNKNOWN:cc.sys.LANGUAGE_UNKNOWN,VIETNAM:"vn"},INVENTORY:{TYPE:{CURRENCY:"currency",EQUIPPABLE:"equippable",COMSUMABLE:"consumable"},CATEGORY:{SOFT_CURRENCY:"sort_currency",BOOSTER:"booster"}},MAX_LOADING_AD_MESSAGE_DURATION:10},cc._RF.pop()},{}],CameraHelper:[function(e,t,o){"use strict";cc._RF.push(t,"1f81ccUni5CcZTGMTQ10cvc","CameraHelper");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Main"),s=cc._decorator,c=s.ccclass,l=s.requireComponent,u=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.myCameraOb=null,t.screenHeight=0,t.screenWidth=0,t.topOfScreenInWorldUnits=0,t.bottomOfScreenInWorldUnits=0,t.leftOfScreenInWorldUnits=0,t.rightOfScreenInWorldUnits=0,t}return r(t,e),t.prototype.onLoad=function(){this.myCameraOb=this.node.getComponent(cc.Camera),this.myCameraOb||console.error("MISSING CAMERA")},t.prototype.recalc=function(){this.screenHeight=a.Main.inst.mainCanvas.node.height,this.screenWidth=a.Main.inst.mainCanvas.node.width;var e=cc.v2(this.screenWidth,this.screenHeight),t=cc.v2(0,0),o=this.myCameraOb.getScreenToWorldPoint(e);this.topOfScreenInWorldUnits=o.y,this.rightOfScreenInWorldUnits=o.x;var n=this.myCameraOb.getScreenToWorldPoint(t);this.bottomOfScreenInWorldUnits=n.y,this.leftOfScreenInWorldUnits=n.x},t.prototype.start=function(){},t.prototype.update=function(){this.recalc()},i([l(cc.Camera)],t.prototype,"onLoad",null),i([c],t)}(cc.Component));o.default=u,cc._RF.pop()},{"./Main":"Main"}],CharacterControllerBase:[function(e,t,o){"use strict";cc._RF.push(t,"88612W5W8lNqYKCaLMN/5Gd","CharacterControllerBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../globals"),s=e(".//HSAUtils"),c=e("./GameScripts/GameObjectMgr"),l=e("./GameScripts/PoolItemInfo"),u=e("./Obstacle/BlockObject"),p=cc._decorator,d=p.ccclass,f=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startSpeed=0,t.rotatableAnglePerSecond=0,t._curSpeed=0,t._curDirection=cc.v2(0,0),t.characterHeight=0,t._isDead=!1,t._isInWaterSurface=!1,t}return r(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){this._curSpeed=this.startSpeed,this._isDead=!1;var e=this.node.getComponentInChildren(sp.Skeleton),t=e?e.node:null;this.characterHeight=t?t.getBoundingBoxToWorld().height:0},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.navigateFollowGuidedDirection=function(e,t,o){if(this._curDirection&&t&&(0!==t.x||0!==t.y)){var n=cc.v2(t.x,t.y);o||(o=this.rotatableAnglePerSecond*e);var r,i=cc.misc.radiansToDegrees(s.default.cartesianToPolar(this._curDirection).y)+180,a=cc.misc.radiansToDegrees(s.default.cartesianToPolar(n).y)+180,c=Math.min(o,Math.abs(a-i));r=s.default.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(i+c))).angle(n)>s.default.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(i-c))).angle(n)?i+c-180:i-c-180,this.forceNavigateFollowAngle(r)}},t.prototype.forceNavigateFollowAngle=function(e){this._curDirection=s.default.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(e))),this.node.angle=e,this.updateFlipYFollowingAngle()},t.prototype.updateFlipYFollowingAngle=function(){var e=this.node.angle%180;e>90||e<-90?this.node.scaleY>0&&(this.node.scaleY=-this.node.scaleY):this.node.scaleY<0&&(this.node.scaleY=-this.node.scaleY)},t.prototype.forceNavigateFollowDirection=function(e){var t=s.default.cartesianToPolar(cc.v2(e.x,e.y)).y;return this.forceNavigateFollowAngle(cc.misc.radiansToDegrees(t))},t.prototype.isPlayerDie=function(){return this._isDead},t.prototype.applyMovement=function(e,t,o,n){if(void 0===n&&(n=-1),!this.isPlayerDie()){t||(t=this._curDirection);var r=this._curSpeed;o&&(r=o);var i=this.node.width*this.node.scaleX*.4,a=this.getWorldPosition(),s=cc.v2(a).add(cc.v2(t).mul(i)),c=cc.v2(t.x,t.y).multiplyScalar(r*e),l=cc.director.getPhysicsManager().rayCast(cc.v2(a),cc.v2(s).add(c),cc.RayCastType.Closest);if(l.length>0){var p=!0,d=l[0].collider.node;if("InvisibleBlock"===d.group){var f=d.parent.getComponent(u.default);f&&-1!=n&&f.limitedSize>=n&&(p=!1)}if(p){var h=l[0].point.add(l[0].normal.mul(2));return void this.setWorldPosition(h.add(cc.v2(-t.x,-t.y).mul(i)))}}a.addSelf(c),this.setWorldPosition(a)}},t.prototype.spawnFlyawayText=function(e,t,o,n){var r=c.default.inst.getFreeItem(l.PoolItemType.FlyawayText),i=r.getComponent(cc.Label);return r.scale=.8,t&&t>0&&(i.fontSize=t),o&&(i.node.color=o),r.parent=a.default.SceneManager.inst.flyawayTextNode,n?r.setPosition(n):r.setPosition(this.node.getPosition()),i.string=e,cc.tween(r).parallel(cc.tween().by(.2,{scale:.8}),cc.tween().by(.5,{position:cc.v2(0,0)})).call(function(){c.default.inst.pushFreeItem(l.PoolItemType.FlyawayText,r)}).start(),i},t.prototype.spawnFlyawayTextUI=function(e,t,o){var n=c.default.inst.getFreeItem(l.PoolItemType.FlyawayText),r=n.getComponent(cc.Label);return t&&t>0&&(r.fontSize=t),o&&(r.node.color=o),n.parent=a.default.GameUI.inst.node,n.setPosition(cc.v2(0,0)),r.string=e,n.scale=.5,n.opacity=50,cc.tween(n).parallel(cc.tween().to(1,{opacity:255}),cc.tween().to(1,{scale:1.2}),cc.tween().to(1,{position:cc.v2(0,cc.view.getVisibleSize().height/4)})).parallel(cc.tween().to(1,{opacity:0}),cc.tween().to(1,{position:cc.v2(0,cc.view.getVisibleSize().height/4)})).call(function(){c.default.inst.pushFreeItem(l.PoolItemType.FlyawayText,n)}).start(),r},t.SIZE_OF_BLOOD_EFFECT_FOR_EAT=25,i([d],t)}(cc.Component));o.default=f,cc._RF.pop()},{"../globals":"globals",".//HSAUtils":"HSAUtils","./GameScripts/GameObjectMgr":"GameObjectMgr","./GameScripts/PoolItemInfo":"PoolItemInfo","./Obstacle/BlockObject":"BlockObject"}],CheatsManager:[function(e,t,o){"use strict";cc._RF.push(t,"736ccb8ztNLcpYw/wNaf3dR","CheatsManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),s=e("../GameCamera"),c=e("../../globals"),l=e("../GameEnums"),u=e("../GameObject"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggleControlOnAir=null,t.btnSizeUp=null,t.btnGodMode=null,t.positionLabel=null,t.cameraStateLabel=null,t.zoomRatioLabel=null,t.offsetLabel=null,t.targetOffsetLabel=null,t.levelGridNode=null,t}var o;return r(t,e),o=t,t.prototype.start=function(){o.inst=this,this.toggleControlOnAir.node.active=!1},t.prototype.update=function(){if(a.NgcBuildConfig.enabledDebugMode){if(!s.default.inst)return;var e=s.default.inst.getWorldPosition();this.positionLabel.string="["+e.x.toFixed(1)+", "+e.y.toFixed(1)+"]",this.cameraStateLabel.string="["+(s.default.inst.curState===s.CameraState.playerFixed?"playerFixed":s.default.inst.curState===s.CameraState.showAbove?"showAbove":"showBottom")+"]",this.zoomRatioLabel.string=""+s.default.inst.cameraOb.zoomRatio.toFixed(2),this.offsetLabel.string="["+s.default.inst.offsetX.toFixed(1)+", "+s.default.inst.offsetY.toFixed(1)+"]",this.targetOffsetLabel.string="["+s.default.inst._targetOffsetX.toFixed(1)+", "+s.default.inst._targetOffsetY.toFixed(1)+"]"}},t.prototype.cheatSizeUp=function(){var e=this;c.default.PlayerController.localPlayer.sizeUp(),this.btnSizeUp.interactable=!1,this.scheduleOnce(function(){e.btnSizeUp.interactable=!0},2)},t.prototype.cheatgodmode=function(){c.default.PlayerController.localPlayer.isGodMode=!c.default.PlayerController.localPlayer.isGodMode,c.default.PlayerController.localPlayer.isImmortal=c.default.PlayerController.localPlayer.isGodMode,this.btnGodMode.getComponentInChildren(cc.Label).string="God Mode = "+c.default.PlayerController.localPlayer.isGodMode},t.prototype.cheatToggleGrid=function(){if(this.levelGridNode){var e=!this.levelGridNode.active;this.levelGridNode.active=e}},t.prototype.cheatDead=function(){c.default.PlayerController.localPlayer.typeOfAttacker=u.GameObjectType.Toxic,c.default.PlayerController.localPlayer.setState(l.PlayerState.Dead)},t.prototype.cameraZoomIn=function(){s.default.inst.cameraOb.zoomRatio+=.1,s.default.inst.zoomRatio=s.default.inst.cameraOb.zoomRatio},t.prototype.cameraZoomOut=function(){s.default.inst.cameraOb.zoomRatio-=.1,s.default.inst.zoomRatio=s.default.inst.cameraOb.zoomRatio},t.prototype.isAllowControlOnAir=function(){return this.toggleControlOnAir.isChecked},i([f(cc.Toggle)],t.prototype,"toggleControlOnAir",void 0),i([f(cc.Button)],t.prototype,"btnSizeUp",void 0),i([f(cc.Button)],t.prototype,"btnGodMode",void 0),i([f(cc.Label)],t.prototype,"positionLabel",void 0),i([f(cc.Label)],t.prototype,"cameraStateLabel",void 0),i([f(cc.Label)],t.prototype,"zoomRatioLabel",void 0),i([f(cc.Label)],t.prototype,"offsetLabel",void 0),i([f(cc.Label)],t.prototype,"targetOffsetLabel",void 0),i([f(cc.Node)],t.prototype,"levelGridNode",void 0),o=i([d],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../globals":"globals","../GameCamera":"GameCamera","../GameEnums":"GameEnums","../GameObject":"GameObject"}],CircleBar:[function(e,t,o){"use strict";cc._RF.push(t,"73dafSPVfRGC6QA+phE/jy8","CircleBar");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ColorIconSize=[cc.color(11,151,209,255),cc.color(15,255,247,255),cc.color(21,238,36,255),cc.color(239,202,28,255),cc.color(243,110,12,255),cc.color(247,38,38,255)],t.bgSprite=null,t.iconSprite=null,t.BGprogressBar=[],t}return r(t,e),t.prototype.updateBGProgress=function(e){e>=0&&e<=5&&(this.bgSprite.spriteFrame=this.BGprogressBar[e],this.iconSprite.node.color=this.ColorIconSize[e])},i([c(cc.Sprite)],t.prototype,"bgSprite",void 0),i([c(cc.Sprite)],t.prototype,"iconSprite",void 0),i([c([cc.SpriteFrame])],t.prototype,"BGprogressBar",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],CoBranchEdgeHTML:[function(e,t,o){"use strict";cc._RF.push(t,"4981dWyMSZLR7lVGzcDvFEG","CoBranchEdgeHTML"),Object.defineProperty(o,"__esModule",{value:!0}),o.coBranchEdgeHTML=void 0,o.coBranchEdgeHTML=function(e,t){return'\n        <!DOCTYPE html>\n        <html lang="en">\n\n        <head>\n        <meta charset="UTF-8" />\n        <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n        <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n        <link rel="preload" href="https://uat-nanosharing-apst1-001-s3.s3.ap-south-1.amazonaws.com/assets/images/logo/edge_white_logo.png" as="image" media="(max-width: 130px)">\n        <link rel="preload" href="https://uat-nanosharing-apst1-001-s3.s3.ap-south-1.amazonaws.com/assets/images/logo/plus_icon.png" as="image" media="(max-width: 20px)">\n        <link rel="preload" href="https://uat-nanosharing-apst1-001-s3.s3.ap-south-1.amazonaws.com/assets/images/logo/ubisoft_logo.png" as="image" media="(max-width: 130px)">\n        <title>Ubisoft Nano - Instant Party Games</title>\n        <style>\n            @font-face {\n            font-family: \'Ubisoft Sans Regular\';\n            src: local(\'Ubisoft Sans Regular\'), url(https://uat-nanosharing-apst1-001-s3.s3.ap-south-1.amazonaws.com/assets/fonts/UbisoftSans-Regular.otf) format(\'truetype\');\n            }\n\n            @font-face {\n            font-family: \'Ubisoft Sans Bold\';\n            src: local(\'Ubisoft Sans Bold\'), url(https://uat-nanosharing-apst1-001-s3.s3.ap-south-1.amazonaws.com/assets/fonts/UbisoftSans-Bold.otf) format(\'truetype\');\n            }\n\n            * {\n            -moz-box-sizing: border-box;\n            -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n            font-family: \'Ubisoft Sans Regular\';\n            background-color: white;\n            }\n\n            .container {\n            flex: 1;\n            display: flex;\n            max-width: 768px;\n            margin: auto;\n            height: 90vh;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n            text-align: center;\n            }\n\n            .text {\n            line-height: 1.2;\n            font-size: 35px;\n            }\n\n            .text__bottom {\n            margin-top: 5vh;\n            }\n\n            .cobranch {\n            display: flex;\n            flex-direction: row;\n            justify-content: center;\n            align-items: center;\n            margin-top: 5vh;\n            height: 130px;\n            /* padding: 0 180px; */\n            }\n\n            .img {\n            width: 100%;\n            height: auto;\n            object-fit: contain;\n            }\n\n            .img--big {\n            max-width: 130px;\n            }\n\n            .img--small {\n            max-width: 20px;\n            }\n\n            .img__plus {\n            margin: 0 60px;\n            }\n\n            .footer {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            margin-left: auto;\n            margin-right: auto;\n            text-align: center;\n            font-size: 20px;\n            background-color: #E3E9EE;\n            height: 10vh;\n            }\n\n            .footer a:link,\n            a:visited {\n            color: #6F6F6F;\n            background-color: #E3E9EE;\n            }\n\n            .btn {\n            width: 100px;\n            background: #303030;\n            color: #f2f2f2;\n            text-align: center;\n            padding: 10px;\n            align-self: center;\n            margin-top: 5vh;\n            border-radius: 4px;\n            }\n\n            .btn:hover {\n            background: black;\n            }\n\n            @media only screen and (max-width: 768px) {\n            .img__plus {\n                margin: 0 25px;\n            }\n\n            .text {\n                font-size: 20px;\n            }\n            }\n\n            @media only screen and (max-width: 600px) {\n            .text {\n                font-size: 20px;\n            }\n\n            .img--small {\n                max-width: 15px;\n            }\n            }\n\n            @media only screen and (max-width: 480px) {\n            .text {\n                font-size: 18px;\n            }\n\n            .img--big {\n                max-width: 120px;\n            }\n\n            .img--small {\n                max-width: 12px;\n            }\n            }\n\n            @media only screen and (max-width: 320px) {\n            .text {\n                font-size: 15px;\n            }\n\n            .img--big {\n                max-width: 100px;\n            }\n            }\n        </style>\n        </head>\n\n        <body>\n        <div class="container">\n            <div class="text text__top">\n            To Open Ubisoft Nano in Microsoft Edge,\n            <br>\n            just select "<strong>Open Microsoft Edge</strong>" in the\n            <br>\n            dialog above\n            </div>\n            <div class="cobranch">\n            <div class="img__edge">\n                <img\n                src="https://uat-nanosharing-apst1-001-s3.s3.ap-south-1.amazonaws.com/assets/images/logo/edge_white_logo.png"\n                class="img img--big" alt="icon-edge" />\n            </div>\n            <div class="img__plus">\n                <img src="https://uat-nanosharing-apst1-001-s3.s3.ap-south-1.amazonaws.com/assets/images/logo/plus_icon.png"\n                class="img img--small" alt="icon-plus"/>\n            </div>\n            <div class="img__nano">\n                <img src="https://uat-nanosharing-apst1-001-s3.s3.ap-south-1.amazonaws.com/assets/images/logo/ubisoft_logo.png"\n                class="img img--big" alt="icon-ubisoft" />\n            </div>\n            </div>\n            <div class="text text__bottom">Didn\'t work? Try lauching again</div>\n            <div class="btn" onclick="window.open(\''+e+'\', \'_self\')">\n            Try again\n            </div>\n        </div>\n        <div class="footer">\n            <div class="footer_rule">\n                <a href="'+t+'" target="_blank"/>\n                    Privacy Rules\n                </a>\n            </div>\n        </div>\n        </body>\n        </html>\n    '},cc._RF.pop()},{}],CollectibleBase:[function(e,t,o){"use strict";cc._RF.push(t,"3d8f1Ui939KLYT0BkzuQlZY","CollectibleBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.PowerUpItem=o.CollectibleState=void 0;var a,s=e("../../globals"),c=e("../BlendAnimBase"),l=e("../GameObject"),u=e("../SpawnObject/PowerUpSpawner"),p=cc._decorator,d=p.ccclass;p.property,function(e){e[e.Idle=0]="Idle",e[e.Collecting=1]="Collecting"}(a=o.CollectibleState||(o.CollectibleState={})),function(e){e.GoldRush="gold_rush",e.DoubleDamage="double_damage",e.Invincible="invincible",e.Twin="twin",e.Hint="hint"}(o.PowerUpItem||(o.PowerUpItem={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.collectSoundId=null,t.timeActive=0,t.target=null,t.collectibleID=0,t.dynamic=!1,t.collectibleType=null,t.positionNode=null,t.startPointPos=null,t.curState=a.Idle,t.homeWorldPosition=cc.v2(0,0),t.localBounds=cc.rect(),t}var o;return r(t,e),o=t,t.prototype.onCollisionEnter=function(e){var t=e.node.getComponent(l.default);this.canCollectBy(t)&&this.curState==a.Idle&&this.onCollect(t)},t.prototype.canCollectBy=function(e){return e.objectType==l.GameObjectType.Player},t.prototype.setPointStart=function(e){this.startPointPos=e},t.prototype.onCollect=function(e){this.curState=a.Collecting;var t=null;if(e.objectType==l.GameObjectType.Player){if((t=e.node.getComponent(s.default.PlayerController)).curState==s.default.PlayerState.Dead)return;t.collect(this)}this.node.destroy()},t.prototype.getCollectScore=function(){return 0},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.setCollectibleType=function(e){this.collectibleType=e},t.prototype.getCollectibleType=function(){return this.collectibleType},t.prototype.setDynamic=function(e){this.dynamic=e},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.homeWorldPosition=this.getWorldPosition(),this.collectibleID=o.nextCollID++},t.prototype.start=function(){e.prototype.start.call(this),s.default.SceneManager.inst.addCollectible(this)},t.prototype.reset=function(){this.node.active=!0,this.timeActive=0,this.curState=a.Idle,this.positionNode&&this.node.setPosition(this.positionNode)},t.prototype.onDestroy=function(){var e=u.default.inst.pointActive.indexOf(this.startPointPos);-1!==e&&u.default.inst.pointActive.splice(e,1),s.default.SceneManager.inst.destroyCollectibleByuuid(this.node.uuid)},t.prototype.onDisable=function(){},t.prototype.update=function(){},t.nextCollID=0,t.MOVINGLOOT_WAIT_BEFORE_COLLECT_TIME=.3,t.RANDOM_UP_MIN=2,t.RANDOM_UP_MAX=10,o=i([d],t)}(c.default);o.default=f,cc._RF.pop()},{"../../globals":"globals","../BlendAnimBase":"BlendAnimBase","../GameObject":"GameObject","../SpawnObject/PowerUpSpawner":"PowerUpSpawner"}],CollectibleDoubleDamage:[function(e,t,o){"use strict";cc._RF.push(t,"bc2a3PEj2xAjbVRBoxt2JxX","CollectibleDoubleDamage");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./CollectibleBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.idleAnims=["icon"],t}return r(t,e),t.prototype.onCollect=function(t){e.prototype.onCollect.call(this,t)},t.prototype.getCollectScore=function(){return 0},t.prototype.doIdle=function(){},t.prototype.reset=function(){e.prototype.reset.call(this),this.doIdle()},t.prototype.onLoad=function(){this.allAnims=[this.idleAnims],e.prototype.onLoad.call(this),this.doIdle(),this.setCollectibleType(a.PowerUpItem.DoubleDamage)},t.prototype.start=function(){e.prototype.start.call(this)},i([c],t)}(a.default));o.default=l,cc._RF.pop()},{"./CollectibleBase":"CollectibleBase"}],CollectibleGoldRush:[function(e,t,o){"use strict";cc._RF.push(t,"1a16f8cvDdCv6H3RmCNzH3M","CollectibleGoldRush");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./CollectibleBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.idleAnims=["icon"],t}return r(t,e),t.prototype.onCollect=function(t){e.prototype.onCollect.call(this,t)},t.prototype.getCollectScore=function(){return 0},t.prototype.doIdle=function(){},t.prototype.reset=function(){e.prototype.reset.call(this),this.doIdle()},t.prototype.onLoad=function(){this.allAnims=[this.idleAnims],e.prototype.onLoad.call(this),this.doIdle(),this.setCollectibleType(a.PowerUpItem.GoldRush)},t.prototype.start=function(){e.prototype.start.call(this)},i([c],t)}(a.default));o.default=l,cc._RF.pop()},{"./CollectibleBase":"CollectibleBase"}],CollectibleHint:[function(e,t,o){"use strict";cc._RF.push(t,"aaa5fJIYt5INaUoMEcS6oL7","CollectibleHint");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./CollectibleBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.idleAnims=["icon"],t}return r(t,e),t.prototype.onCollect=function(t){e.prototype.onCollect.call(this,t)},t.prototype.getCollectScore=function(){return 0},t.prototype.doIdle=function(){},t.prototype.reset=function(){e.prototype.reset.call(this),this.doIdle()},t.prototype.onLoad=function(){this.allAnims=[this.idleAnims],e.prototype.onLoad.call(this),this.doIdle(),this.setCollectibleType(a.PowerUpItem.Hint)},t.prototype.start=function(){e.prototype.start.call(this)},i([c],t)}(a.default));o.default=l,cc._RF.pop()},{"./CollectibleBase":"CollectibleBase"}],CollectibleSizeUp:[function(e,t,o){"use strict";cc._RF.push(t,"395e3pFUbNDZ4i5TE8svD9V","CollectibleSizeUp");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./CollectibleBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.idleAnims=["idle"],t.collectAnims=["pickup"],t}return r(t,e),t.prototype.onCollect=function(t){e.prototype.onCollect.call(this,t)},t.prototype.getCollectScore=function(){return 0},t.prototype.doIdle=function(){},t.prototype.reset=function(){e.prototype.reset.call(this),this.doIdle()},t.prototype.onLoad=function(){this.allAnims=[this.idleAnims,this.collectAnims],e.prototype.onLoad.call(this),this.doIdle()},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},i([c],t)}(a.default));o.default=l,cc._RF.pop()},{"./CollectibleBase":"CollectibleBase"}],CollisionController:[function(e,t,o){"use strict";cc._RF.push(t,"db840TZfcBIcKCYqFByXAsZ","CollisionController");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.CollisionType=void 0;var a,s=e("../HSAUtils"),c=cc._decorator,l=c.ccclass,u=c.property;(function(e){e[e.Static=0]="Static",e[e.Dynamic=1]="Dynamic"})(a=o.CollisionType||(o.CollisionType={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.collisionType=a.Static,t._boxCollider=null,t._staticBodiesColliding=[],t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){this._boxCollider=this.node.getComponent(cc.BoxCollider)},t.prototype.update=function(){this.calcPositionWithStaticCollisions()},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.calcPositionWithStaticCollisions=function(){if(this._staticBodiesColliding.length>0){for(var e=this.getWorldPosition(),t=0;t<this._staticBodiesColliding.length;t++){var o=this._staticBodiesColliding[t].rect,n=o.x,r=o.y,i=o.width,a=o.height,c=s.default.cartesianToPolar(cc.v2(-i/2,a/2)).y,l=s.default.cartesianToPolar(cc.v2(i/2,a/2)).y,u=s.default.cartesianToPolar(cc.v2(-i/2,-a/2)).y,p=s.default.cartesianToPolar(cc.v2(i/2,-a/2)).y,d=s.default.cartesianToPolar(cc.v2(e.x,e.y).sub(cc.v2(n,r))).y;d<=c&&d>=l?e.y=Math.max(e.y,r+a/2+this._boxCollider.size.height/2*Math.abs(this.node.scaleY)+this._boxCollider.offset.y):d<=p&&d>=u?e.y=Math.min(e.y,r-a/2-this._boxCollider.size.height/2*Math.abs(this.node.scaleY)-this._boxCollider.offset.y):e.x=d<l&&d>p?Math.max(e.x,n+i/2+this._boxCollider.size.width/2*Math.abs(this.node.scaleX)+this._boxCollider.offset.x):Math.min(e.x,n-i/2-this._boxCollider.size.width/2*Math.abs(this.node.scaleX)-this._boxCollider.offset.x)}this.setWorldPosition(e)}},t.prototype.onCollisionStay=function(e){if(this.collisionType!==a.Static){var t=e.node.getComponent(o);if(t&&t.collisionType===a.Static){for(var n=e.node.getComponent(cc.BoxCollider),r=e.node.parent.convertToWorldSpaceAR(e.node.getPosition()),i=!0,s=0;s<this._staticBodiesColliding.length;s++)this._staticBodiesColliding[s].key===e.uuid&&(i=!1);i&&this._staticBodiesColliding.push({key:e.uuid,rect:cc.rect(r.x+n.offset.x,r.y+n.offset.y,n.size.width*e.node.scaleX,n.size.height*e.node.scaleY)})}}},t.prototype.onCollisionExit=function(e){if(this.collisionType!==a.Static){var t=e.node.getComponent(o);t&&t.collisionType===a.Static&&this._staticBodiesColliding.forEach(function(t,o,n){t.key===e.uuid&&n.splice(o,1)})}},i([u({type:cc.Enum(a)})],t.prototype,"collisionType",void 0),o=i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../HSAUtils":"HSAUtils"}],CollisionManager:[function(e,t,o){"use strict";cc._RF.push(t,"1320eFqtsxDq7EExyzfBsz2","CollisionManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.debugDraw=!1,t.drawBoundingBox=!1,t}return r(t,e),t.prototype.onEnable=function(){var e=cc.director.getCollisionManager();e.enabled=!0,e.enabledDebugDraw=this.debugDraw,e.enabledDrawBoundingBox=this.drawBoundingBox;var t=cc.director.getPhysicsManager();t.enabled=!0,t.gravity=cc.v2(0,0),t.enabledAccumulator=!1},t.prototype.onDisable=function(){var e=cc.director.getCollisionManager();e.enabled=!1,e.enabledDebugDraw=!1,e.enabledDrawBoundingBox=!1,cc.director.getPhysicsManager().enabled=!1},i([c(cc.Boolean)],t.prototype,"debugDraw",void 0),i([c(cc.Boolean)],t.prototype,"drawBoundingBox",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],ConstConfig:[function(e,t,o){"use strict";cc._RF.push(t,"81007HJ4aNIy64xPOXXbO+j","ConstConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.ConstConfig=void 0,o.ConstConfig={SUBPACKAGE_NAME:{},STAR:"Star",TOTAL_TIME_SPENT:"TotalTimeSpent",IS_HARD_RESET_DATA:"IS_HARD_RESET_DATA",SCENE:{GAME_SCENE:"GameScene"},PARAMS:{DEFAULT_COIN:0,DEFAULT_SCORE_MULTIPLIER_VALUE:1,DEFAULT_SCORE_MULTIPLIER_LEVEL:0,FIX_SCREEN:cc.v2(640,960),SECRET_KEY:"123321",POS_EMOJI:cc.v2(60,57)},SHARK_DEFAULT_ID:"hexanchidae",DEFAULT_SHARK_NAME:"Hexanchidae",UNLOCK_TYPE:{COMING_SOON:0,UNLOCK_BY_ADS:1,UNLOCK_BY_COIN:2,UNLOCK_BY_DRW:3,UNLOCK_BY_DEFAULT:4},SHARK_DATABASE:[{name:"Hexanchidae",type:"Brawler",id:"hexanchidae",unlockType:4,value:5},{name:"Thresher",type:"Hunter",id:"thresher",unlockType:2,value:110},{name:"Squalicorax",type:"Charger",id:"squalicorax",unlockType:2,value:600},{name:"Axe-Head",type:"Brawler",id:"axehead",unlockType:2,value:6900},{name:"Ninja",type:"Hunter",id:"ninja",unlockType:2,value:15e3},{name:"Great-scar",type:"Brawler",id:"greatscar",unlockType:2,value:25e3},{name:"Rad Spencer",type:"Charger",id:"radspencer",unlockType:2,value:3e4},{name:"Unicorn",type:"Charger",id:"unicorn",unlockType:3,value:5},{name:"Chibs",type:"Hunter",id:"chibs",unlockType:3,value:5},{name:"Static",type:"Brawler",id:"static",unlockType:1,value:1},{name:"Roboshark",type:"Hunter",id:"roboshark",unlockType:1,value:3},{name:"Magma",type:"Charger",id:"magma",unlockType:1,value:5},{name:"Danichthys",type:"Brawler",id:"danichthys",unlockType:2,value:800},{name:"Lolitooth",type:"Charger",id:"lolitooth",unlockType:1,value:8},{name:"Toadster",type:"Charger",id:"toadster",unlockType:2,value:4e3},{name:"Febarracudista",type:"Hunter",id:"febarracudista",unlockType:1,value:10},{name:"Pungytavius",type:"Hunter",id:"pungytavius",unlockType:1,value:1e4},{name:"Kaolinlamna",type:"Brawler",id:"kaolinlamna",unlockType:3,value:5}],INVENTORY:{ITEM_ID:{COIN:"coin",STAR:"star",SM_VALUE:"smvalue",SM_LEVEL:"smlevel",CRETOLAMNA:"cretolamna",SICKLEFIN:"sicklefin",SAWDUST:"sawdust",THRESHER:"thresher",JADGHEI:"jadghei",TOADSTER:"toadster",RAD_SPENCER:"rad_spencer",WOBBEGONG:"wobbegong",SILVERJAW:"silverjaw",CROWN:"crown",TICKET:"ticket"},TYPE:{CURRENCY:"currency",SCOREMULTIPLIER:"scoremultiplier",EQUIPPABLE:"equippable"},CATEGORY:{SOFT_CURRENCY:"soft_currency",ADS_COUNTER:"ads_counter",SKIN:"skin",VALUE:"value",LEVEL:"level"}},SCORES:{KILL_OPPONENT:0,SIZE_UP:[0,0,0,0,0,0],EACH_LETTER:100,ALL_LETTER:500},DIALOG_URLS:{EndGameRewardDialog:"Prefabs/Dialogs/EndGameRewardDialog"},PREFAB_URLS:{StartScreen:"Prefabs/Screens/StartScreen",ShopScreen:"Prefabs/Screens/ShopScreen",ShopScreenPC:"Prefabs/Screens/ShopScreenPC",LeaderBoardUI:"Prefabs/Screens/LeaderBoardUI",LeaderBoardUI_PC:"Prefabs/Screens/LeaderBoardUI_PC",PartyRoomScreen:"Prefabs/Screens/PartyRoomScreen",PrizeScreen:"Prefabs/Screens/PrizeScreen",GameScreen:"Prefabs/Screens/GameScreen",DailyRewardUI:"NanoImplementation/CrossFeatures/DailyReward/Prefab/DailyRewardUI",CountryFlagsManagerDriver:"LazyPrefabs/CountryFlagsManagerDriver",NodePoolManagerDriver:"LazyPrefabs/NodePoolManagerDriver",EmotesDriver:"LazyPrefabs/EmotesDriver",SoundResource:"LazyPrefabs/SoundResource"},COIN:"COIN_HSA",SCORE_MULTIPLIER_VALUE:"SCORE_MULTIPLIER_VALUE_HSA",SCORE_MULTIPLIER_LEVEL:"SCORE_MULTIPLIER_LEVEL_HSA",LAST_SCPACK_TIME:"LAST_SCPACK_TIME_HSA",BEST_SCORE:"BEST_SCORE_HSA",TOTAL_SESSIONS:"TOTAL_SESSIONS_HSA",UNLOCKED_SHARKLIST:"UNLOCKED_SHARKLIST_HSA",CURRENCY_ADS_COUNTER:"CURRENCY_ADS_COUNTER_HSA",SKIN_NAME_LOCAL:"SKIN_NAME_LOCAL_HSA",CURRENCY_SOURCE:{DailyReward:"daily_reward",UnlockShark:"unlock_shark",GameResult:"game_result",ScoreMultiplier:"score_multiplier",CurrencyPack:"currency_pakc"},TWEEN_TAGS:{Shark_Type_Popup:100}},cc._RF.pop()},{}],ControlHint:[function(e,t,o){"use strict";cc._RF.push(t,"d5d21cMgbtJJoH9cHOH5T9p","ControlHint");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tapHint=null,t.spaceHint=null,t}return r(t,e),t.prototype.start=function(){var e=cc.sys.isMobile;this.tapHint.active=e,this.spaceHint.active=!e;var t=e?this.tapHint:this.spaceHint;cc.tween(t).delay(3).to(7,{opacity:0}).call(function(){t.active=!1}).start()},i([c(cc.Node)],t.prototype,"tapHint",void 0),i([c(cc.Node)],t.prototype,"spaceHint",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],CountryFlagsManager:[function(e,t,o){"use strict";cc._RF.push(t,"e71bbwOSCZKxp7FQ1DVnUpo","CountryFlagsManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcCountryFlagsManager=void 0;var a=e("../../Core/Utils"),s=e("./BuildConfig"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.countriesFlagSpriteFrame=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst||(o.inst=this)},t.getLocalCountry=function(){var e=this;s.NgcBuildConfig.offlineMode||a.Utils.getHttp(this.url_check_country,{},function(t,o){t?console.error(t):e.setLocalCountry(o)})},t.setOnGetContryCompletedCallback=function(e){this.callBack=e},t.prototype.getFlagSpriteFrame=function(e){return e?(e=e.toUpperCase(),"CN"===o.localCountry&&["TW","HK","MO"].indexOf(e)>=0&&(e="CN"),e=e.toLowerCase(),this.countriesFlagSpriteFrame.getSpriteFrame(e)):null},t.prototype.getCountryCodes=function(){return a.Utils.getKeys(this.countriesFlagSpriteFrame._spriteFrames)},t.prototype.getRandomCountryCode=function(){return a.Utils.randomArr(this.getCountryCodes())},t.prototype.getRandomFlagSpriteFrame=function(){return a.Utils.randomArr(this.countriesFlagSpriteFrame.getSpriteFrames())},t.setLocalCountry=function(e){var t=e.split("\n");for(var o in t)if(t[o].indexOf("loc=")>=0){var n=t[o].replace("loc=","");n=n.toLowerCase(),this.localCountry=n}this.onGetCountryCompleted()},t.onGetCountryCompleted=function(){this.callBack&&this.callBack()},t.inst=null,t.localCountry="",t.callBack=null,t.url_check_country="https://www.cloudflare.com/cdn-cgi/trace",i([u(cc.SpriteAtlas)],t.prototype,"countriesFlagSpriteFrame",void 0),o=i([l],t)}(cc.Component);o.NgcCountryFlagsManager=p,cc._RF.pop()},{"../../Core/Utils":"Utils","./BuildConfig":"BuildConfig"}],CrownRoadManager:[function(e,t,o){"use strict";cc._RF.push(t,"f84d7w85X1OPYX6iiD3XdHZ","CrownRoadManager");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../../Scripts/GameTrackingDataSupporter"),i=e("../../../Core/nCSV"),a=e("../../../GameFramework/Scripts/BuildConfig"),s=e("../../../SDK/Nano/NanoSrv"),c=e("../../../Services/Inventory/Inventory"),l=e("../../../Services/Platform/Platform"),u=e("../../../Services/Telemetry/Telemetry"),p=e("../../GameMode/Script/NgcGameModeManager"),d=cc._decorator,f=d.ccclass,h=(d.property,function(){function e(){this.CROWN_BALANCING_PATH="Text/crownBalancing.csv",this.CROWN_REWARDS_PATH="Text/crownRewards.csv",this.crownRank=1,this.oldCrownRank=1,this.rewardData=null,this.balancingData=null,this.loadingTimeout=null,this.fetchDataFromServer(this.onLoadingDataCompleted.bind(this))}var t;return t=e,e.init=function(){t.inst?console.warn("NgcCrownRoadManager was initialized!!"):a.NgcBuildConfig.offlineMode||(t.inst=new t)},e.isInitialized=function(){var e=t.inst;return!!e&&c.NgcInventory.inst&&Object.keys(c.NgcInventory.inst.itemTable).length>0&&e.rewardData&&e.balancingData},e.checkRefreshUI=function(){var e;null===(e=this.crownRoadUIInst)||void 0===e||e.checkRefreshUI()},e.setCrownDisplayTarget=function(e){var t;null===(t=this.crownRoadUIInst)||void 0===t||t.setCrownDisplayTarget(e)},e.setAfterRewardCallback=function(e){var t;null===(t=this.crownRoadUIInst)||void 0===t||t.setAfterRewardCallback(e)},e.currentRankItemID=function(){var e;return null===(e=this.crownRoadUIInst)||void 0===e?void 0:e.currentRankItemID},e.prototype.onLoadingDataCompleted=function(e,o){var n=this;"rewards"===e&&(this.rewardData={},o.forEach(function(e){if(0!==e.milestone.length){var t=null;e.itemID.match(/crownRank(\d+)/i)&&(t=parseInt(RegExp.$1)),n.rewardData[e.milestone]=[e.itemID,parseInt(e.quantity),t,e.label]}}),t.getCrownRoadData(function(e){n.crownRank-n.oldCrownRank<=1&&(n.oldCrownRank=n.crownRank),t.inst.getRewardsBaseOnPoint(e.crownRank)})),"balancing"===e&&(this.balancingData={},o.forEach(function(e){var t;if(0!==(null===(t=e.crownRank)||void 0===t?void 0:t.length)){var o={};for(var r in e)"crownRank"!==r&&(o[r]=parseInt(e[r]));n.balancingData[e.crownRank]=o,n.crownRank-n.oldCrownRank<=1&&(n.oldCrownRank=n.crownRank)}}))},e.prototype.getRewardsBaseOnPoint=function(e,t){void 0===t&&(t=!1);var o=0,n=null,r=null,i=null;for(var a in this.rewardData){var s=parseInt(a);if(t?e<=s:e<s)return n=this.rewardData[a],r=this.rewardData[o],this.crownRank-this.oldCrownRank<=1&&(this.oldCrownRank=this.crownRank),[{point:o,reward:r},{point:s,reward:n},i];null!==this.rewardData[a][2]&&(this.crownRank=this.rewardData[a][2],i={point:s,reward:this.rewardData[a]}),o=s}return this.crownRank-this.oldCrownRank<=1?this.oldCrownRank=this.crownRank:this.crownRank=this.oldCrownRank,null},e.prototype.fetchDataFromServer=function(e){var t=this;if(l.NgcPlatform.isOfflineMode())cc.loader.loadRes(this.CROWN_REWARDS_PATH,function(o,n){if(!o&&n.text){var r=i.nCSV.parseTable(n.text);e("rewards",r)}else e("Failed to get data from url "+t.CROWN_REWARDS_PATH,null)}),cc.loader.loadRes(this.CROWN_BALANCING_PATH,function(o,n){if(!o&&n.text){var r=i.nCSV.parseTable(n.text);e("balancing",r)}else e("Failed to get data from url "+t.CROWN_BALANCING_PATH,null)});else{clearTimeout(this.loadingTimeout);try{var o=s.default.inst.getCurGameInfo().crownRoad;e("rewards",o.rewardTable),this.balancingData={}}catch(n){this.loadingTimeout=setTimeout(function(){t.fetchDataFromServer(e)},100)}}},e.updateRank=function(e,t){var o=this,n={rank:e};p.NgcGameModeManager.inst.selectedModeId&&(n.gameMode=p.NgcGameModeManager.inst.selectedModeId),s.default.inst.servicePost("/crownroad/updaterank",JSON.stringify(n),function(e,n){e?t&&t(e,null):(t&&t(null,JSON.parse(n).data),o.crownRoadUIInst.downRank&&o.checkRefreshUI())})},e.checkReward=function(e,t){var o,n=this,r=a.NgcBuildConfig.offlineMode?10:null===(o=this.crownRoadData)||void 0===o?void 0:o.crownRank;this.playerRank=e;var i={rank:e};p.NgcGameModeManager.inst.selectedModeId&&(i.gameMode=p.NgcGameModeManager.inst.selectedModeId),s.default.inst.servicePost("/crownroad/checkreward",JSON.stringify(i),function(e,o){if(!e){var i=JSON.parse(o).data,a=i.crownRank-r;i.rankPoints=a,t&&t(i),n.crownRoadUIInst.needRefresh=0!=a,n.crownRoadUIInst.downRank=a<0,n.crownRoadData.crownRank=i.crownRank,n.sendGameOverTracking(o.crownRank,a)}})},e.getCrownRoadData=function(e){s.default.inst.serviceGet("/playerdata",null,function(o,n){if(!o){var r=JSON.parse(n).data.crownRoad||{crownRank:0,highestRank:0,milestone:[]};t.crownRoadData=r,e&&e(r)}})},e.sendGameOverTracking=function(e,o){var n=t.inst.oldCrownRank;t.inst.getRewardsBaseOnPoint(e);var i=t.inst.oldCrownRank,a="Maintained";i>n&&(a="Promoted"),i<n&&(a="Demoted"),r.default.inst.crownEarned=o,u.NgcTelemetry.inst.LogEvent_GameRoundOver({crownRank:i,crownEarnings:o,crownResult:a})},e.inst=null,e.crownRoadUIInst=null,e.crownRoadData=null,e.playerRank=0,t=n([f],e)}());o.default=h,cc._RF.pop()},{"../../../../Scripts/GameTrackingDataSupporter":"GameTrackingDataSupporter","../../../Core/nCSV":"nCSV","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../GameMode/Script/NgcGameModeManager":"NgcGameModeManager"}],CustomEventEmitter:[function(e,t,o){"use strict";cc._RF.push(t,"1f83c7fHm1Bm4rwQGULvB4W","CustomEventEmitter");var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,r++)n[r]=i[a];return n};Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.emit=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(!this._listener)return!1;var r=this._listener.get(e);null==r||r.forEach(function(e,o){for(var i,a=e.length-1;a>=0;a--){var s=e[a];s[1]&&e.splice(a,1),(i=s[0]).call.apply(i,n([o],t))}e.length<=0&&r.delete(o)})},e.prototype.once=function(e,t,o){this._register(e,t,o,!0)},e.prototype.on=function(e,t,o){this._register(e,t,o,!1)},e.prototype.off=function(e,t,o){if(!this._listener)return!1;var n=!1;if(t){var r=this._listener.get(e);if(r){var i=r.get(o);if(i){var a=i.findIndex(function(e){return e[0]===t});a>=0&&(i.splice(a,1),n=!0),i.length<=0&&r.delete(o)}}}else n=this._listener.delete(e);return n||console.warn("[CustomEventEmitter][off] can't find the callback from event id "+e),n},e.prototype._register=function(e,t,o,n){void 0===n&&(n=!1),this._listener||(this._listener=new Map);var r=this._listener.get(e);if(r){var i=r.get(o);i?i.find(function(e){return e[0]===t})?console.warn("[CustomEventEmitter][_register][one="+n+"] The callback is already registered to event id "+e):i.push([t,n]):r.set(o,[[t,n]])}else this._listener.set(e,new Map([[o,[[t,n]]]]))},e}();o.default=r,cc._RF.pop()},{}],CustomLB_UserInfo:[function(e,t,o){"use strict";cc._RF.push(t,"a0ea0aoan5EpaBiBIYeRxAI","CustomLB_UserInfo");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LB_UserInfo"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scoreTitle=null,t}return r(t,e),t.prototype.changeColor=function(){this.rankNumber.node.color=cc.Color.WHITE,this.userName.node.color=cc.Color.WHITE,this.scoreTitle.node.color=cc.Color.WHITE,this.userScore.node.color=cc.Color.WHITE,this.userNameNeedToSave.node.color=cc.Color.WHITE,this.bg2.active=!1},i([l(cc.Label)],t.prototype,"scoreTitle",void 0),i([c],t)}(a.NgcLB_UserInfo);o.default=u,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LB_UserInfo":"LB_UserInfo"}],CustomTask:[function(e,t,o){"use strict";cc._RF.push(t,"6021eCC37NA0L9RtzK/TMto","CustomTask");var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,r++)n[r]=i[a];return n};Object.defineProperty(o,"__esModule",{value:!0});var r=function(){function e(e,t,o,n){this._function=e,this._caller=t,this._args=o,this._tag=n}return Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},enumerable:!1,configurable:!0}),e.prototype.exec=function(){var e;(e=this._function).call.apply(e,n([this._caller],this._args))},e}();o.default=r,cc._RF.pop()},{}],6:[function(e,t){"use strict";t.exports=function(e,t){for(var o=new Array(arguments.length-1),n=0,r=2,i=!0;r<arguments.length;)o[n++]=arguments[r++];return new Promise(function(r,a){o[n]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=new Array(arguments.length-1),o=0;o<t.length;)t[o++]=arguments[o];r.apply(null,t)}};try{e.apply(t||null,o)}catch(s){i&&(i=!1,a(s))}})}},{}],7:[function(e,t,o){"use strict";var n=o;n.length=function(e){var t=e.length;if(!t)return 0;for(var o=0;--t%4>1&&"="===e.charAt(t);)++o;return Math.ceil(3*e.length)/4-o};for(var r=new Array(64),i=new Array(123),a=0;a<64;)i[r[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;n.encode=function(e,t,o){for(var n,i=null,a=[],s=0,c=0;t<o;){var l=e[t++];switch(c){case 0:a[s++]=r[l>>2],n=(3&l)<<4,c=1;break;case 1:a[s++]=r[n|l>>4],n=(15&l)<<2,c=2;break;case 2:a[s++]=r[n|l>>6],a[s++]=r[63&l],c=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=r[n],a[s++]=61,1===c&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))},n.decode=function(e,t,o){for(var n,r=o,a=0,s=0;s<e.length;){var c=e.charCodeAt(s++);if(61===c&&a>1)break;if(void 0===(c=i[c]))throw Error("invalid encoding");switch(a){case 0:n=c,a=1;break;case 1:t[o++]=n<<2|(48&c)>>4,n=c,a=2;break;case 2:t[o++]=(15&n)<<4|(60&c)>>2,n=c,a=3;break;case 3:t[o++]=(3&n)<<6|c,a=0}}if(1===a)throw Error("invalid encoding");return o-r},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},{}],8:[function(e,t){"use strict";function o(){this._listeners={}}t.exports=o,o.prototype.on=function(e,t,o){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:o||this}),this},o.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var o=this._listeners[e],n=0;n<o.length;)o[n].fn===t?o.splice(n,1):++n;return this},o.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var o=[],n=1;n<arguments.length;)o.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,o)}return this}},{}],9:[function(e,t){"use strict";function o(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),o=new Uint8Array(t.buffer),n=128===o[3];function r(e,n,r){t[0]=e,n[r]=o[0],n[r+1]=o[1],n[r+2]=o[2],n[r+3]=o[3]}function i(e,n,r){t[0]=e,n[r]=o[3],n[r+1]=o[2],n[r+2]=o[1],n[r+3]=o[0]}function a(e,n){return o[0]=e[n],o[1]=e[n+1],o[2]=e[n+2],o[3]=e[n+3],t[0]}function s(e,n){return o[3]=e[n],o[2]=e[n+1],o[1]=e[n+2],o[0]=e[n+3],t[0]}e.writeFloatLE=n?r:i,e.writeFloatBE=n?i:r,e.readFloatLE=n?a:s,e.readFloatBE=n?s:a}():function(){function t(e,t,o,n){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,o,n);else if(isNaN(t))e(2143289344,o,n);else if(t>34028234663852886e22)e((r<<31|2139095040)>>>0,o,n);else if(t<11754943508222875e-54)e((r<<31|Math.round(t/1401298464324817e-60))>>>0,o,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((r<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,o,n)}}function o(e,t,o){var n=e(t,o),r=2*(n>>31)+1,i=n>>>23&255,a=8388607&n;return 255===i?a?NaN:r*(1/0):0===i?1401298464324817e-60*r*a:r*Math.pow(2,i-150)*(a+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,r),e.readFloatLE=o.bind(null,i),e.readFloatBE=o.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),o=new Uint8Array(t.buffer),n=128===o[7];function r(e,n,r){t[0]=e,n[r]=o[0],n[r+1]=o[1],n[r+2]=o[2],n[r+3]=o[3],n[r+4]=o[4],n[r+5]=o[5],n[r+6]=o[6],n[r+7]=o[7]}function i(e,n,r){t[0]=e,n[r]=o[7],n[r+1]=o[6],n[r+2]=o[5],n[r+3]=o[4],n[r+4]=o[3],n[r+5]=o[2],n[r+6]=o[1],n[r+7]=o[0]}function a(e,n){return o[0]=e[n],o[1]=e[n+1],o[2]=e[n+2],o[3]=e[n+3],o[4]=e[n+4],o[5]=e[n+5],o[6]=e[n+6],o[7]=e[n+7],t[0]}function s(e,n){return o[7]=e[n],o[6]=e[n+1],o[5]=e[n+2],o[4]=e[n+3],o[3]=e[n+4],o[2]=e[n+5],o[1]=e[n+6],o[0]=e[n+7],t[0]}e.writeDoubleLE=n?r:i,e.writeDoubleBE=n?i:r,e.readDoubleLE=n?a:s,e.readDoubleBE=n?s:a}():function(){function t(e,t,o,n,r,i){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,r,i+t),e(1/n>0?0:2147483648,r,i+o);else if(isNaN(n))e(0,r,i+t),e(2146959360,r,i+o);else if(n>17976931348623157e292)e(0,r,i+t),e((a<<31|2146435072)>>>0,r,i+o);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,r,i+t),e((a<<31|s/4294967296)>>>0,r,i+o);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=n*Math.pow(2,-c))>>>0,r,i+t),e((a<<31|c+1023<<20|1048576*s&1048575)>>>0,r,i+o)}}}function o(e,t,o,n,r){var i=e(n,r+t),a=e(n,r+o),s=2*(a>>31)+1,c=a>>>20&2047,l=4294967296*(1048575&a)+i;return 2047===c?l?NaN:s*(1/0):0===c?5e-324*s*l:s*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=o.bind(null,i,0,4),e.readDoubleBE=o.bind(null,a,4,0)}(),e}function n(e,t,o){t[o]=255&e,t[o+1]=e>>>8&255,t[o+2]=e>>>16&255,t[o+3]=e>>>24}function r(e,t,o){t[o]=e>>>24,t[o+1]=e>>>16&255,t[o+2]=e>>>8&255,t[o+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=o(o)},{}],10:[function(require,module,exports){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},{}],11:[function(e,t){"use strict";t.exports=function(e,t,o){var n=o||8192,r=n>>>1,i=null,a=n;return function(o){if(o<1||o>r)return e(o);a+o>n&&(i=e(n),a=0);var s=t.call(i,a,a+=o);return 7&a&&(a=1+(7|a)),s}}},{}],12:[function(e,t,o){"use strict";var n=o;n.length=function(e){for(var t=0,o=0,n=0;n<e.length;++n)(o=e.charCodeAt(n))<128?t+=1:o<2048?t+=2:55296==(64512&o)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},n.read=function(e,t,o){if(o-t<1)return"";for(var n,r=null,i=[],a=0;t<o;)(n=e[t++])<128?i[a++]=n:n>191&&n<224?i[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(n>>10),i[a++]=56320+(1023&n)):i[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,i)),a=0);return r?(a&&r.push(String.fromCharCode.apply(String,i.slice(0,a))),r.join("")):String.fromCharCode.apply(String,i.slice(0,a))},n.write=function(e,t,o){for(var n,r,i=o,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[o++]=n:n<2048?(t[o++]=n>>6|192,t[o++]=63&n|128):55296==(64512&n)&&56320==(64512&(r=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&r),++a,t[o++]=n>>18|240,t[o++]=n>>12&63|128,t[o++]=n>>6&63|128,t[o++]=63&n|128):(t[o++]=n>>12|224,t[o++]=n>>6&63|128,t[o++]=63&n|128);return o-i}},{}],13:[function(e,t,o){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(o,"__esModule",{value:!0}),o.checkIfValid=void 0,o.checkIfValid=function(e,t){var o=t.separator;if("string"!=typeof e)throw new Error("data has to be typeof: ".concat(n("")," but got typeof: ").concat(n(e)));if(!e.includes(o))throw new Error("data does not include separator: ".concat(o))}},{}],14:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.convertCSVToArray=void 0;var n=e("./helpers/check-if-valid"),r=e("./modules/convert-csv-to-array-of-arrays"),i=e("./modules/convert-csv-to-array-of-objects"),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.header,a=t.type,s=t.separator,c={header:!1!==o,type:a||"object",separator:s||","};return(0,n.checkIfValid)(e,c),"object"===c.type?(0,i.convertCSVToArrayOfObjects)(e,c):(0,r.convertCSVToArrayOfArrays)(e,c)};o.convertCSVToArray=a;var s=a;o.default=s},{"./helpers/check-if-valid":13,"./modules/convert-csv-to-array-of-arrays":15,"./modules/convert-csv-to-array-of-objects":16}],15:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.convertCSVToArrayOfArrays=void 0;var n=e("convert-string-to-number");o.convertCSVToArrayOfArrays=function(e,t){var o=t.header,r=t.separator,i=[],a=e.split(/(?!\B"[^"]*)\n(?![^"]*"\B)/g);return a.forEach(function(e,t){var s=e.split(r),c=[];a.length-1!==t&&(!o&&0!==t||o)&&(s.forEach(function(e){var t=(0,n.convertStringToNumber)(e),o=Number.isNaN(t)?e:t;c.push(o)}),i.push(c))}),i}},{"convert-string-to-number":18}],16:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.convertCSVToArrayOfObjects=void 0;var n=e("convert-string-to-number");function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.convertCSVToArrayOfObjects=function(e,t){var o,i,a=t.header,s=t.separator,c=e.split(/(?!\B"[^"]*)\n(?![^"]*"\B)/g),l=[],u=[];return c.forEach(function(e,t){0===t?(o=e.split(s),a&&l.push(o),o.forEach(function(e){i=Object.assign({},i,r({},e,void 0))})):c.length-1!==t&&(e.split(s).forEach(function(e,t){var a=(0,n.convertStringToNumber)(e),s=Number.isNaN(a)?e:a;i=Object.assign({},i,r({},o[t],s))}),u.push(i))}),l.push.apply(l,u),l}},{"convert-string-to-number":18}],17:[function(e,t,o){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(o,"__esModule",{value:!0}),o.checkIfValid=void 0,o.checkIfValid=function(e){if("string"!=typeof e)throw new Error("value has to be typeof: 'string' but got typeof: '".concat(n(e),"'"))}},{}],18:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.convertStringToNumber=void 0;var n=e("./helpers/check-if-valid"),r=function(e){if((0,n.checkIfValid)(e),Number.isNaN(Number(e)))return NaN;var t=parseFloat(e);return t%1==0?parseInt(e,10):t};o.convertStringToNumber=r;var i=r;o.default=i},{"./helpers/check-if-valid":17}],19:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.BlockCipher,n=t.algo,r=[],i=[],a=[],s=[],c=[],l=[],u=[],p=[],d=[],f=[];(function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var o=0,n=0;for(t=0;t<256;t++){var h=n^n<<1^n<<2^n<<3^n<<4;h=h>>>8^255&h^99,r[o]=h,i[h]=o;var g=e[o],y=e[g],m=e[y],_=257*e[h]^16843008*h;a[o]=_<<24|_>>>8,s[o]=_<<16|_>>>16,c[o]=_<<8|_>>>24,l[o]=_,_=16843009*m^65537*y^257*g^16843008*o,u[h]=_<<24|_>>>8,p[h]=_<<16|_>>>16,d[h]=_<<8|_>>>24,f[h]=_,o?(o=g^e[e[e[m^g]]],n^=e[e[n]]):o=n=1}})();var h=[0,1,2,4,8,16,32,64,128,27,54],g=n.AES=o.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,o=e.sigBytes/4,n=4*((this._nRounds=o+6)+1),i=this._keySchedule=[],a=0;a<n;a++)a<o?i[a]=t[a]:(l=i[a-1],a%o?o>6&&a%o==4&&(l=r[l>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l]):(l=r[(l=l<<8|l>>>24)>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l],l^=h[a/o|0]<<24),i[a]=i[a-o]^l);for(var s=this._invKeySchedule=[],c=0;c<n;c++){if(a=n-c,c%4)var l=i[a];else l=i[a-4];s[c]=c<4||a<=4?l:u[r[l>>>24]]^p[r[l>>>16&255]]^d[r[l>>>8&255]]^f[r[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,c,l,r)},decryptBlock:function(e,t){var o=e[t+1];e[t+1]=e[t+3],e[t+3]=o,this._doCryptBlock(e,t,this._invKeySchedule,u,p,d,f,i),o=e[t+1],e[t+1]=e[t+3],e[t+3]=o},_doCryptBlock:function(e,t,o,n,r,i,a,s){for(var c=this._nRounds,l=e[t]^o[0],u=e[t+1]^o[1],p=e[t+2]^o[2],d=e[t+3]^o[3],f=4,h=1;h<c;h++){var g=n[l>>>24]^r[u>>>16&255]^i[p>>>8&255]^a[255&d]^o[f++],y=n[u>>>24]^r[p>>>16&255]^i[d>>>8&255]^a[255&l]^o[f++],m=n[p>>>24]^r[d>>>16&255]^i[l>>>8&255]^a[255&u]^o[f++],_=n[d>>>24]^r[l>>>16&255]^i[u>>>8&255]^a[255&p]^o[f++];l=g,u=y,p=m,d=_}g=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[p>>>8&255]<<8|s[255&d])^o[f++],y=(s[u>>>24]<<24|s[p>>>16&255]<<16|s[d>>>8&255]<<8|s[255&l])^o[f++],m=(s[p>>>24]<<24|s[d>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^o[f++],_=(s[d>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&p])^o[f++],e[t]=g,e[t+1]=y,e[t+2]=m,e[t+3]=_},keySize:8});t.AES=o._createHelper(g)}(),e.AES},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":20,"./core":21,"./enc-base64":22,"./evpkdf":25,"./md5":30}],20:[function(e,t,o){var n;n=function(e){e.lib.Cipher||function(t){var o=e,n=o.lib,r=n.Base,i=n.WordArray,a=n.BufferedBlockAlgorithm,s=o.enc,c=(s.Utf8,s.Base64),l=o.algo.EvpKDF,u=n.Cipher=a.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,o){this.cfg=this.cfg.extend(o),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:m}return function(t){return{encrypt:function(o,n,r){return e(n).encrypt(t,o,n,r)},decrypt:function(o,n,r){return e(n).decrypt(t,o,n,r)}}}}()}),p=(n.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),o.mode={}),d=n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=p.CBC=function(){var e=d.extend();function o(e,o,n){var r,i=this._iv;i?(r=i,this._iv=t):r=this._prevBlock;for(var a=0;a<n;a++)e[o+a]^=r[a]}return e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;o.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),e.Decryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),o.call(this,e,t,r),this._prevBlock=i}}),e}(),h=(o.pad={}).Pkcs7={pad:function(e,t){for(var o=4*t,n=o-e.sigBytes%o,r=n<<24|n<<16|n<<8|n,a=[],s=0;s<n;s+=4)a.push(r);var c=i.create(a,n);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},g=(n.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:h}),reset:function(){var e;u.reset.call(this);var t=this.cfg,o=t.iv,n=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,o&&o.words):(this._mode=e.call(n,this,o&&o.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),y=(o.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,o=e.salt;return(o?i.create([1398893684,1701076831]).concat(o).concat(t):t).toString(c)},parse:function(e){var t,o=c.parse(e),n=o.words;return 1398893684==n[0]&&1701076831==n[1]&&(t=i.create(n.slice(2,4)),n.splice(0,4),o.sigBytes-=16),g.create({ciphertext:o,salt:t})}},m=n.SerializableCipher=r.extend({cfg:r.extend({format:y}),encrypt:function(e,t,o,n){n=this.cfg.extend(n);var r=e.createEncryptor(o,n),i=r.finalize(t),a=r.cfg;return g.create({ciphertext:i,key:o,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,o,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(o,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),_=(o.kdf={}).OpenSSL={execute:function(e,t,o,n){n||(n=i.random(8));var r=l.create({keySize:t+o}).compute(e,n),a=i.create(r.words.slice(t),4*o);return r.sigBytes=4*t,g.create({key:r,iv:a,salt:n})}},v=n.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:_}),encrypt:function(e,t,o,n){var r=(n=this.cfg.extend(n)).kdf.execute(o,e.keySize,e.ivSize);n.iv=r.iv;var i=m.encrypt.call(this,e,t,r.key,n);return i.mixIn(r),i},decrypt:function(e,t,o,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var r=n.kdf.execute(o,e.keySize,e.ivSize,t.salt);return n.iv=r.iv,m.decrypt.call(this,e,t,r.key,n)}})}()},"object"==typeof o?t.exports=o=n(e("./core"),e("./evpkdf")):"function"==typeof define&&define.amd?define(["./core","./evpkdf"],n):n(this.CryptoJS)},{"./core":21,"./evpkdf":25}],21:[function(e,t,o){(function(n){var r;r=function(){var t=t||function(t){var o;if("undefined"!=typeof window&&window.crypto&&(o=window.crypto),"undefined"!=typeof self&&self.crypto&&(o=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(o=globalThis.crypto),!o&&"undefined"!=typeof window&&window.msCrypto&&(o=window.msCrypto),!o&&void 0!==n&&n.crypto&&(o=n.crypto),!o&&"function"==typeof e)try{o=e("crypto")}catch(y){}var r=function(){if(o){if("function"==typeof o.getRandomValues)try{return o.getRandomValues(new Uint32Array(1))[0]}catch(y){}if("function"==typeof o.randomBytes)try{return o.randomBytes(4).readInt32LE()}catch(y){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var o;return e.prototype=t,o=new e,e.prototype=null,o}}(),a={},s=a.lib={},c=s.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=s.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||p).stringify(this)},concat:function(e){var t=this.words,o=e.words,n=this.sigBytes,r=e.sigBytes;if(this.clamp(),n%4)for(var i=0;i<r;i++){var a=o[i>>>2]>>>24-i%4*8&255;t[n+i>>>2]|=a<<24-(n+i)%4*8}else for(var s=0;s<r;s+=4)t[n+s>>>2]=o[s>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,o=this.sigBytes;e[o>>>2]&=4294967295<<32-o%4*8,e.length=t.ceil(o/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],o=0;o<e;o+=4)t.push(r());return new l.init(t,e)}}),u=a.enc={},p=u.Hex={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],r=0;r<o;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,o=[],n=0;n<t;n+=2)o[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new l.init(o,t/2)}},d=u.Latin1={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],r=0;r<o;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,o=[],n=0;n<t;n++)o[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new l.init(o,t)}},f=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},h=s.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var o,n=this._data,r=n.words,i=n.sigBytes,a=this.blockSize,s=i/(4*a),c=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*a,u=t.min(4*c,i);if(c){for(var p=0;p<c;p+=a)this._doProcessBlock(r,p);o=r.splice(0,c),n.sigBytes-=u}return new l.init(o,u)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(s.Hasher=h.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,o){return new e.init(o).finalize(t)}},_createHmacHelper:function(e){return function(t,o){return new g.HMAC.init(e,o).finalize(t)}}}),a.algo={});return a}(Math);return t},"object"==typeof o?t.exports=o=r():"function"==typeof define&&define.amd?define([],r):this.CryptoJS=r()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{crypto:1}],22:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.WordArray;function n(e,t,n){for(var r=[],i=0,a=0;a<t;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2|n[e.charCodeAt(a)]>>>6-a%4*2;r[i>>>2]|=s<<24-i%4*8,i++}return o.create(r,i)}t.enc.Base64={stringify:function(e){var t=e.words,o=e.sigBytes,n=this._map;e.clamp();for(var r=[],i=0;i<o;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<o;s++)r.push(n.charAt(a>>>6*(3-s)&63));var c=n.charAt(64);if(c)for(;r.length%4;)r.push(c);return r.join("")},parse:function(e){var t=e.length,o=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<o.length;i++)r[o.charCodeAt(i)]=i}var a=o.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return n(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":21}],23:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.WordArray;function n(e,t,n){for(var r=[],i=0,a=0;a<t;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2|n[e.charCodeAt(a)]>>>6-a%4*2;r[i>>>2]|=s<<24-i%4*8,i++}return o.create(r,i)}t.enc.Base64url={stringify:function(e,t=!0){var o=e.words,n=e.sigBytes,r=t?this._safe_map:this._map;e.clamp();for(var i=[],a=0;a<n;a+=3)for(var s=(o[a>>>2]>>>24-a%4*8&255)<<16|(o[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|o[a+2>>>2]>>>24-(a+2)%4*8&255,c=0;c<4&&a+.75*c<n;c++)i.push(r.charAt(s>>>6*(3-c)&63));var l=r.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e,t=!0){var o=e.length,r=t?this._safe_map:this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var a=0;a<r.length;a++)i[r.charCodeAt(a)]=a}var s=r.charAt(64);if(s){var c=e.indexOf(s);-1!==c&&(o=c)}return n(e,o,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),e.enc.Base64url},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":21}],24:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.WordArray,n=t.enc;function r(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],r=0;r<o;r+=2){var i=t[r>>>2]>>>16-r%4*8&65535;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return o.create(n,2*t)}},n.Utf16LE={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],i=0;i<o;i+=2){var a=r(t[i>>>2]>>>16-i%4*8&65535);n.push(String.fromCharCode(a))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>1]|=r(e.charCodeAt(i)<<16-i%2*16);return o.create(n,2*t)}}}(),e.enc.Utf16},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":21}],25:[function(e,t,o){var n;n=function(e){var t,o,n,r,i,a,s;return n=(o=(t=e).lib).Base,r=o.WordArray,a=(i=t.algo).MD5,s=i.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var o,n=this.cfg,i=n.hasher.create(),a=r.create(),s=a.words,c=n.keySize,l=n.iterations;s.length<c;){o&&i.update(o),o=i.update(e).finalize(t),i.reset();for(var u=1;u<l;u++)o=i.finalize(o),i.reset();a.concat(o)}return a.sigBytes=4*c,a}}),t.EvpKDF=function(e,t,o){return s.create(o).compute(e,t)},e.EvpKDF},"object"==typeof o?t.exports=o=n(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],n):n(this.CryptoJS)},{"./core":21,"./hmac":27,"./sha1":46}],26:[function(e,t,o){var n;n=function(e){var t,o,n;return o=(t=e).lib.CipherParams,n=t.enc.Hex,t.format.Hex={stringify:function(e){return e.ciphertext.toString(n)},parse:function(e){var t=n.parse(e);return o.create({ciphertext:t})}},e.format.Hex},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":20,"./core":21}],27:[function(e,t,o){var n;n=function(e){var t,o,n;o=(t=e).lib.Base,n=t.enc.Utf8,t.algo.HMAC=o.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var o=e.blockSize,r=4*o;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),s=i.words,c=a.words,l=0;l<o;l++)s[l]^=1549556828,c[l]^=909522486;i.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,o=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(o))}})},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":21}],28:[function(e,t,o){var n;n=function(e){return e},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core"),e("./lib-typedarrays"),e("./enc-utf16"),e("./enc-base64"),e("./enc-base64url"),e("./md5"),e("./sha1"),e("./sha256"),e("./sha224"),e("./sha512"),e("./sha384"),e("./sha3"),e("./ripemd160"),e("./hmac"),e("./pbkdf2"),e("./evpkdf"),e("./cipher-core"),e("./mode-cfb"),e("./mode-ctr"),e("./mode-ctr-gladman"),e("./mode-ofb"),e("./mode-ecb"),e("./pad-ansix923"),e("./pad-iso10126"),e("./pad-iso97971"),e("./pad-zeropadding"),e("./pad-nopadding"),e("./format-hex"),e("./aes"),e("./tripledes"),e("./rc4"),e("./rabbit"),e("./rabbit-legacy")):"function"==typeof define&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy"],n):this.CryptoJS=n(this.CryptoJS)},{"./aes":19,"./cipher-core":20,"./core":21,"./enc-base64":22,"./enc-base64url":23,"./enc-utf16":24,"./evpkdf":25,"./format-hex":26,"./hmac":27,"./lib-typedarrays":29,"./md5":30,"./mode-cfb":31,"./mode-ctr":33,"./mode-ctr-gladman":32,"./mode-ecb":34,"./mode-ofb":35,"./pad-ansix923":36,"./pad-iso10126":37,"./pad-iso97971":38,"./pad-nopadding":39,"./pad-zeropadding":40,"./pbkdf2":41,"./rabbit":43,"./rabbit-legacy":42,"./rc4":44,"./ripemd160":45,"./sha1":46,"./sha224":47,"./sha256":48,"./sha3":49,"./sha384":50,"./sha512":51,"./tripledes":52,"./x64-core":53}],29:[function(e,t,o){var n;n=function(e){return function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,o=t.init;(t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,n=[],r=0;r<t;r++)n[r>>>2]|=e[r]<<24-r%4*8;o.call(this,n,t)}else o.apply(this,arguments)}).prototype=t}}(),e.lib.WordArray},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":21}],30:[function(e,t,o){var n;n=function(e){return function(t){var o=e,n=o.lib,r=n.WordArray,i=n.Hasher,a=o.algo,s=[];(function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0})();var c=a.MD5=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var o=0;o<16;o++){var n=t+o,r=e[n];e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var i=this._hash.words,a=e[t+0],c=e[t+1],f=e[t+2],h=e[t+3],g=e[t+4],y=e[t+5],m=e[t+6],_=e[t+7],v=e[t+8],S=e[t+9],b=e[t+10],N=e[t+11],P=e[t+12],C=e[t+13],w=e[t+14],T=e[t+15],I=i[0],R=i[1],O=i[2],E=i[3];I=l(I,R,O,E,a,7,s[0]),E=l(E,I,R,O,c,12,s[1]),O=l(O,E,I,R,f,17,s[2]),R=l(R,O,E,I,h,22,s[3]),I=l(I,R,O,E,g,7,s[4]),E=l(E,I,R,O,y,12,s[5]),O=l(O,E,I,R,m,17,s[6]),R=l(R,O,E,I,_,22,s[7]),I=l(I,R,O,E,v,7,s[8]),E=l(E,I,R,O,S,12,s[9]),O=l(O,E,I,R,b,17,s[10]),R=l(R,O,E,I,N,22,s[11]),I=l(I,R,O,E,P,7,s[12]),E=l(E,I,R,O,C,12,s[13]),O=l(O,E,I,R,w,17,s[14]),I=u(I,R=l(R,O,E,I,T,22,s[15]),O,E,c,5,s[16]),E=u(E,I,R,O,m,9,s[17]),O=u(O,E,I,R,N,14,s[18]),R=u(R,O,E,I,a,20,s[19]),I=u(I,R,O,E,y,5,s[20]),E=u(E,I,R,O,b,9,s[21]),O=u(O,E,I,R,T,14,s[22]),R=u(R,O,E,I,g,20,s[23]),I=u(I,R,O,E,S,5,s[24]),E=u(E,I,R,O,w,9,s[25]),O=u(O,E,I,R,h,14,s[26]),R=u(R,O,E,I,v,20,s[27]),I=u(I,R,O,E,C,5,s[28]),E=u(E,I,R,O,f,9,s[29]),O=u(O,E,I,R,_,14,s[30]),I=p(I,R=u(R,O,E,I,P,20,s[31]),O,E,y,4,s[32]),E=p(E,I,R,O,v,11,s[33]),O=p(O,E,I,R,N,16,s[34]),R=p(R,O,E,I,w,23,s[35]),I=p(I,R,O,E,c,4,s[36]),E=p(E,I,R,O,g,11,s[37]),O=p(O,E,I,R,_,16,s[38]),R=p(R,O,E,I,b,23,s[39]),I=p(I,R,O,E,C,4,s[40]),E=p(E,I,R,O,a,11,s[41]),O=p(O,E,I,R,h,16,s[42]),R=p(R,O,E,I,m,23,s[43]),I=p(I,R,O,E,S,4,s[44]),E=p(E,I,R,O,P,11,s[45]),O=p(O,E,I,R,T,16,s[46]),I=d(I,R=p(R,O,E,I,f,23,s[47]),O,E,a,6,s[48]),E=d(E,I,R,O,_,10,s[49]),O=d(O,E,I,R,w,15,s[50]),R=d(R,O,E,I,y,21,s[51]),I=d(I,R,O,E,P,6,s[52]),E=d(E,I,R,O,h,10,s[53]),O=d(O,E,I,R,b,15,s[54]),R=d(R,O,E,I,c,21,s[55]),I=d(I,R,O,E,v,6,s[56]),E=d(E,I,R,O,T,10,s[57]),O=d(O,E,I,R,m,15,s[58]),R=d(R,O,E,I,C,21,s[59]),I=d(I,R,O,E,g,6,s[60]),E=d(E,I,R,O,N,10,s[61]),O=d(O,E,I,R,f,15,s[62]),R=d(R,O,E,I,S,21,s[63]),i[0]=i[0]+I|0,i[1]=i[1]+R|0,i[2]=i[2]+O|0,i[3]=i[3]+E|0},_doFinalize:function(){var e=this._data,o=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;o[r>>>5]|=128<<24-r%32;var i=t.floor(n/4294967296),a=n;o[15+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),o[14+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(o.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,o,n,r,i,a){var s=e+(t&o|~t&n)+r+a;return(s<<i|s>>>32-i)+t}function u(e,t,o,n,r,i,a){var s=e+(t&n|o&~n)+r+a;return(s<<i|s>>>32-i)+t}function p(e,t,o,n,r,i,a){var s=e+(t^o^n)+r+a;return(s<<i|s>>>32-i)+t}function d(e,t,o,n,r,i,a){var s=e+(o^(t|~n))+r+a;return(s<<i|s>>>32-i)+t}o.MD5=i._createHelper(c),o.HmacMD5=i._createHmacHelper(c)}(Math),e.MD5},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":21}],31:[function(e,t,o){var n;n=function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function o(e,t,o,n){var r,i=this._iv;i?(r=i.slice(0),this._iv=void 0):r=this._prevBlock,n.encryptBlock(r,0);for(var a=0;a<o;a++)e[t+a]^=r[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;o.call(this,e,t,r,n),this._prevBlock=e.slice(t,t+r)}}),t.Decryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);o.call(this,e,t,r,n),this._prevBlock=i}}),t}(),e.mode.CFB},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":20,"./core":21}],32:[function(e,t,o){var n;n=function(e){return e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function o(e){if(255==(e>>24&255)){var t=e>>16&255,o=e>>8&255,n=255&e;255===t?(t=0,255===o?(o=0,255===n?n=0:++n):++o):++t,e=0,e+=t<<16,e+=o<<8,e+=n}else e+=1<<24;return e}function n(e){return 0===(e[0]=o(e[0]))&&(e[1]=o(e[1])),e}var r=t.Encryptor=t.extend({processBlock:function(e,t){var o=this._cipher,r=o.blockSize,i=this._iv,a=this._counter;i&&(a=this._counter=i.slice(0),this._iv=void 0),n(a);var s=a.slice(0);o.encryptBlock(s,0);for(var c=0;c<r;c++)e[t+c]^=s[c]}});return t.Decryptor=r,t}(),e.mode.CTRGladman},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":20,"./core":21}],33:[function(e,t,o){var n;n=function(e){var t,o;return e.mode.CTR=(o=(t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){var o=this._cipher,n=o.blockSize,r=this._iv,i=this._counter;r&&(i=this._counter=r.slice(0),this._iv=void 0);var a=i.slice(0);o.encryptBlock(a,0),i[n-1]=i[n-1]+1|0;for(var s=0;s<n;s++)e[t+s]^=a[s]}}),t.Decryptor=o,t),e.mode.CTR},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":20,"./core":21}],34:[function(e,t,o){var n;n=function(e){var t;return e.mode.ECB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t),e.mode.ECB},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":20,"./core":21}],35:[function(e,t,o){var n;n=function(e){var t,o;return e.mode.OFB=(o=(t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){var o=this._cipher,n=o.blockSize,r=this._iv,i=this._keystream;r&&(i=this._keystream=r.slice(0),this._iv=void 0),o.encryptBlock(i,0);for(var a=0;a<n;a++)e[t+a]^=i[a]}}),t.Decryptor=o,t),e.mode.OFB},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":20,"./core":21}],36:[function(e,t,o){var n;n=function(e){return e.pad.AnsiX923={pad:function(e,t){var o=e.sigBytes,n=4*t,r=n-o%n,i=o+r-1;e.clamp(),e.words[i>>>2]|=r<<24-i%4*8,e.sigBytes+=r},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":20,"./core":21}],37:[function(e,t,o){var n;n=function(e){return e.pad.Iso10126={pad:function(t,o){var n=4*o,r=n-t.sigBytes%n;t.concat(e.lib.WordArray.random(r-1)).concat(e.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":20,"./core":21}],38:[function(e,t,o){var n;n=function(e){return e.pad.Iso97971={pad:function(t,o){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,o)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":20,"./core":21}],39:[function(e,t,o){var n;n=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":20,"./core":21}],40:[function(e,t,o){var n;n=function(e){return e.pad.ZeroPadding={pad:function(e,t){var o=4*t;e.clamp(),e.sigBytes+=o-(e.sigBytes%o||o)},unpad:function(e){var t=e.words,o=e.sigBytes-1;for(o=e.sigBytes-1;o>=0;o--)if(t[o>>>2]>>>24-o%4*8&255){e.sigBytes=o+1;break}}},e.pad.ZeroPadding},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":20,"./core":21}],41:[function(e,t,o){var n;n=function(e){var t,o,n,r,i,a,s,c;return n=(o=(t=e).lib).Base,r=o.WordArray,a=(i=t.algo).SHA1,s=i.HMAC,c=i.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var o=this.cfg,n=s.create(o.hasher,e),i=r.create(),a=r.create([1]),c=i.words,l=a.words,u=o.keySize,p=o.iterations;c.length<u;){var d=n.update(t).finalize(a);n.reset();for(var f=d.words,h=f.length,g=d,y=1;y<p;y++){g=n.finalize(g),n.reset();for(var m=g.words,_=0;_<h;_++)f[_]^=m[_]}i.concat(d),l[0]++}return i.sigBytes=4*u,i}}),t.PBKDF2=function(e,t,o){return c.create(o).compute(e,t)},e.PBKDF2},"object"==typeof o?t.exports=o=n(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],n):n(this.CryptoJS)},{"./core":21,"./hmac":27,"./sha1":46}],42:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.StreamCipher,n=t.algo,r=[],i=[],a=[],s=n.RabbitLegacy=o.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,o=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var r=0;r<4;r++)c.call(this);for(r=0;r<8;r++)n[r]^=o[r+4&7];if(t){var i=t.words,a=i[0],s=i[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),p=l>>>16|4294901760&u,d=u<<16|65535&l;for(n[0]^=l,n[1]^=p,n[2]^=u,n[3]^=d,n[4]^=l,n[5]^=p,n[6]^=u,n[7]^=d,r=0;r<4;r++)c.call(this)}},_doProcessBlock:function(e,t){var o=this._X;c.call(this),r[0]=o[0]^o[5]>>>16^o[3]<<16,r[1]=o[2]^o[7]>>>16^o[5]<<16,r[2]=o[4]^o[1]>>>16^o[7]<<16,r[3]=o[6]^o[3]>>>16^o[1]<<16;for(var n=0;n<4;n++)r[n]=16711935&(r[n]<<8|r[n]>>>24)|4278255360&(r[n]<<24|r[n]>>>8),e[t+n]^=r[n]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,o=0;o<8;o++)i[o]=t[o];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,o=0;o<8;o++){var n=e[o]+t[o],r=65535&n,s=n>>>16,c=((r*r>>>17)+r*s>>>15)+s*s,l=((4294901760&n)*n|0)+((65535&n)*n|0);a[o]=c^l}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.RabbitLegacy=o._createHelper(s)}(),e.RabbitLegacy},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":20,"./core":21,"./enc-base64":22,"./evpkdf":25,"./md5":30}],43:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.StreamCipher,n=t.algo,r=[],i=[],a=[],s=n.Rabbit=o.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,o=0;o<4;o++)e[o]=16711935&(e[o]<<8|e[o]>>>24)|4278255360&(e[o]<<24|e[o]>>>8);var n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,o=0;o<4;o++)c.call(this);for(o=0;o<8;o++)r[o]^=n[o+4&7];if(t){var i=t.words,a=i[0],s=i[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),p=l>>>16|4294901760&u,d=u<<16|65535&l;for(r[0]^=l,r[1]^=p,r[2]^=u,r[3]^=d,r[4]^=l,r[5]^=p,r[6]^=u,r[7]^=d,o=0;o<4;o++)c.call(this)}},_doProcessBlock:function(e,t){var o=this._X;c.call(this),r[0]=o[0]^o[5]>>>16^o[3]<<16,r[1]=o[2]^o[7]>>>16^o[5]<<16,r[2]=o[4]^o[1]>>>16^o[7]<<16,r[3]=o[6]^o[3]>>>16^o[1]<<16;for(var n=0;n<4;n++)r[n]=16711935&(r[n]<<8|r[n]>>>24)|4278255360&(r[n]<<24|r[n]>>>8),e[t+n]^=r[n]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,o=0;o<8;o++)i[o]=t[o];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,o=0;o<8;o++){var n=e[o]+t[o],r=65535&n,s=n>>>16,c=((r*r>>>17)+r*s>>>15)+s*s,l=((4294901760&n)*n|0)+((65535&n)*n|0);a[o]=c^l}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.Rabbit=o._createHelper(s)}(),e.Rabbit},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":20,"./core":21,"./enc-base64":22,"./evpkdf":25,"./md5":30}],44:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.StreamCipher,n=t.algo,r=n.RC4=o.extend({_doReset:function(){for(var e=this._key,t=e.words,o=e.sigBytes,n=this._S=[],r=0;r<256;r++)n[r]=r;r=0;for(var i=0;r<256;r++){var a=r%o,s=t[a>>>2]>>>24-a%4*8&255;i=(i+n[r]+s)%256;var c=n[r];n[r]=n[i],n[i]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,o=this._j,n=0,r=0;r<4;r++){o=(o+e[t=(t+1)%256])%256;var i=e[t];e[t]=e[o],e[o]=i,n|=e[(e[t]+e[o])%256]<<24-8*r}return this._i=t,this._j=o,n}t.RC4=o._createHelper(r);var a=n.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});t.RC4Drop=o._createHelper(a)}(),e.RC4},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":20,"./core":21,"./enc-base64":22,"./evpkdf":25,"./md5":30}],45:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib,n=o.WordArray,r=o.Hasher,i=t.algo,a=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=n.create([0,1518500249,1859775393,2400959708,2840853838]),p=n.create([1352829926,1548603684,1836072691,2053994217,0]),d=i.RIPEMD160=r.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var o=0;o<16;o++){var n=t+o,r=e[n];e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var i,d,v,S,b,N,P,C,w,T,I,R=this._hash.words,O=u.words,E=p.words,k=a.words,A=s.words,B=c.words,D=l.words;for(N=i=R[0],P=d=R[1],C=v=R[2],w=S=R[3],T=b=R[4],o=0;o<80;o+=1)I=i+e[t+k[o]]|0,I+=o<16?f(d,v,S)+O[0]:o<32?h(d,v,S)+O[1]:o<48?g(d,v,S)+O[2]:o<64?y(d,v,S)+O[3]:m(d,v,S)+O[4],I=(I=_(I|=0,B[o]))+b|0,i=b,b=S,S=_(v,10),v=d,d=I,I=N+e[t+A[o]]|0,I+=o<16?m(P,C,w)+E[0]:o<32?y(P,C,w)+E[1]:o<48?g(P,C,w)+E[2]:o<64?h(P,C,w)+E[3]:f(P,C,w)+E[4],I=(I=_(I|=0,D[o]))+T|0,N=T,T=w,w=_(C,10),C=P,P=I;I=R[1]+v+w|0,R[1]=R[2]+S+T|0,R[2]=R[3]+b+N|0,R[3]=R[4]+i+P|0,R[4]=R[0]+d+C|0,R[0]=I},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(t.length+1),this._process();for(var r=this._hash,i=r.words,a=0;a<5;a++){var s=i[a];i[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return r},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function f(e,t,o){return e^t^o}function h(e,t,o){return e&t|~e&o}function g(e,t,o){return(e|~t)^o}function y(e,t,o){return e&o|t&~o}function m(e,t,o){return e^(t|~o)}function _(e,t){return e<<t|e>>>32-t}t.RIPEMD160=r._createHelper(d),t.HmacRIPEMD160=r._createHmacHelper(d)}(Math),e.RIPEMD160},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":21}],46:[function(e,t,o){var n;n=function(e){var t,o,n,r,i,a,s;return o=(t=e).lib,n=o.WordArray,r=o.Hasher,i=t.algo,a=[],s=i.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var o=this._hash.words,n=o[0],r=o[1],i=o[2],s=o[3],c=o[4],l=0;l<80;l++){if(l<16)a[l]=0|e[t+l];else{var u=a[l-3]^a[l-8]^a[l-14]^a[l-16];a[l]=u<<1|u>>>31}var p=(n<<5|n>>>27)+c+a[l];p+=l<20?1518500249+(r&i|~r&s):l<40?1859775393+(r^i^s):l<60?(r&i|r&s|i&s)-1894007588:(r^i^s)-899497514,c=s,s=i,i=r<<30|r>>>2,r=n,n=p}o[0]=o[0]+n|0,o[1]=o[1]+r|0,o[2]=o[2]+i|0,o[3]=o[3]+s|0,o[4]=o[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(o/4294967296),t[15+(n+64>>>9<<4)]=o,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=r._createHelper(s),t.HmacSHA1=r._createHmacHelper(s),e.SHA1},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":21}],47:[function(e,t,o){var n;n=function(e){var t,o,n,r,i;return o=(t=e).lib.WordArray,n=t.algo,r=n.SHA256,i=n.SHA224=r.extend({_doReset:function(){this._hash=new o.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}}),t.SHA224=r._createHelper(i),t.HmacSHA224=r._createHmacHelper(i),e.SHA224},"object"==typeof o?t.exports=o=n(e("./core"),e("./sha256")):"function"==typeof define&&define.amd?define(["./core","./sha256"],n):n(this.CryptoJS)},{"./core":21,"./sha256":48}],48:[function(e,t,o){var n;n=function(e){return function(t){var o=e,n=o.lib,r=n.WordArray,i=n.Hasher,a=o.algo,s=[],c=[];(function(){function e(e){for(var o=t.sqrt(e),n=2;n<=o;n++)if(!(e%n))return!1;return!0}function o(e){return 4294967296*(e-(0|e))|0}for(var n=2,r=0;r<64;)e(n)&&(r<8&&(s[r]=o(t.pow(n,.5))),c[r]=o(t.pow(n,1/3)),r++),n++})();var l=[],u=a.SHA256=i.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var o=this._hash.words,n=o[0],r=o[1],i=o[2],a=o[3],s=o[4],u=o[5],p=o[6],d=o[7],f=0;f<64;f++){if(f<16)l[f]=0|e[t+f];else{var h=l[f-15],g=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,y=l[f-2],m=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;l[f]=g+l[f-7]+m+l[f-16]}var _=n&r^n&i^r&i,v=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),S=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&p)+c[f]+l[f];d=p,p=u,u=s,s=a+S|0,a=i,i=r,r=n,n=S+(v+_)|0}o[0]=o[0]+n|0,o[1]=o[1]+r|0,o[2]=o[2]+i|0,o[3]=o[3]+a|0,o[4]=o[4]+s|0,o[5]=o[5]+u|0,o[6]=o[6]+p|0,o[7]=o[7]+d|0},_doFinalize:function(){var e=this._data,o=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return o[r>>>5]|=128<<24-r%32,o[14+(r+64>>>9<<4)]=t.floor(n/4294967296),o[15+(r+64>>>9<<4)]=n,e.sigBytes=4*o.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});o.SHA256=i._createHelper(u),o.HmacSHA256=i._createHmacHelper(u)}(Math),e.SHA256},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":21}],49:[function(e,t,o){var n;n=function(e){return function(t){var o=e,n=o.lib,r=n.WordArray,i=n.Hasher,a=o.x64.Word,s=o.algo,c=[],l=[],u=[];(function(){for(var e=1,t=0,o=0;o<24;o++){c[e+5*t]=(o+1)*(o+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,i=0;i<24;i++){for(var s=0,p=0,d=0;d<7;d++){if(1&r){var f=(1<<d)-1;f<32?p^=1<<f:s^=1<<f-32}128&r?r=r<<1^113:r<<=1}u[i]=a.create(s,p)}})();var p=[];(function(){for(var e=0;e<25;e++)p[e]=a.create()})();var d=s.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var o=this._state,n=this.blockSize/2,r=0;r<n;r++){var i=e[t+2*r],a=e[t+2*r+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(R=o[r]).high^=a,R.low^=i}for(var s=0;s<24;s++){for(var d=0;d<5;d++){for(var f=0,h=0,g=0;g<5;g++)f^=(R=o[d+5*g]).high,h^=R.low;var y=p[d];y.high=f,y.low=h}for(d=0;d<5;d++){var m=p[(d+4)%5],_=p[(d+1)%5],v=_.high,S=_.low;for(f=m.high^(v<<1|S>>>31),h=m.low^(S<<1|v>>>31),g=0;g<5;g++)(R=o[d+5*g]).high^=f,R.low^=h}for(var b=1;b<25;b++){var N=(R=o[b]).high,P=R.low,C=c[b];C<32?(f=N<<C|P>>>32-C,h=P<<C|N>>>32-C):(f=P<<C-32|N>>>64-C,h=N<<C-32|P>>>64-C);var w=p[l[b]];w.high=f,w.low=h}var T=p[0],I=o[0];for(T.high=I.high,T.low=I.low,d=0;d<5;d++)for(g=0;g<5;g++){var R=o[b=d+5*g],O=p[b],E=p[(d+1)%5+5*g],k=p[(d+2)%5+5*g];R.high=O.high^~E.high&k.high,R.low=O.low^~E.low&k.low}R=o[0];var A=u[s];R.high^=A.high,R.low^=A.low}},_doFinalize:function(){var e=this._data,o=e.words,n=(this._nDataBytes,8*e.sigBytes),i=32*this.blockSize;o[n>>>5]|=1<<24-n%32,o[(t.ceil((n+1)/i)*i>>>5)-1]|=128,e.sigBytes=4*o.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,c=s/8,l=[],u=0;u<c;u++){var p=a[u],d=p.high,f=p.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),l.push(f),l.push(d)}return new r.init(l,s)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),o=0;o<25;o++)t[o]=t[o].clone();return e}});o.SHA3=i._createHelper(d),o.HmacSHA3=i._createHmacHelper(d)}(Math),e.SHA3},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],n):n(this.CryptoJS)},{"./core":21,"./x64-core":53}],50:[function(e,t,o){var n;n=function(e){var t,o,n,r,i,a,s;return o=(t=e).x64,n=o.Word,r=o.WordArray,i=t.algo,a=i.SHA512,s=i.SHA384=a.extend({_doReset:function(){this._hash=new r.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}}),t.SHA384=a._createHelper(s),t.HmacSHA384=a._createHmacHelper(s),e.SHA384},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core"),e("./sha512")):"function"==typeof define&&define.amd?define(["./core","./x64-core","./sha512"],n):n(this.CryptoJS)},{"./core":21,"./sha512":51,"./x64-core":53}],51:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.Hasher,n=t.x64,r=n.Word,i=n.WordArray,a=t.algo;function s(){return r.create.apply(r,arguments)}var c=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],l=[];(function(){for(var e=0;e<80;e++)l[e]=s()})();var u=a.SHA512=o.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var o=this._hash.words,n=o[0],r=o[1],i=o[2],a=o[3],s=o[4],u=o[5],p=o[6],d=o[7],f=n.high,h=n.low,g=r.high,y=r.low,m=i.high,_=i.low,v=a.high,S=a.low,b=s.high,N=s.low,P=u.high,C=u.low,w=p.high,T=p.low,I=d.high,R=d.low,O=f,E=h,k=g,A=y,B=m,D=_,M=v,L=S,F=b,G=N,U=P,j=C,x=w,z=T,H=I,W=R,V=0;V<80;V++){var Y,K,q=l[V];if(V<16)K=q.high=0|e[t+2*V],Y=q.low=0|e[t+2*V+1];else{var X=l[V-15],J=X.high,Q=X.low,Z=(J>>>1|Q<<31)^(J>>>8|Q<<24)^J>>>7,$=(Q>>>1|J<<31)^(Q>>>8|J<<24)^(Q>>>7|J<<25),ee=l[V-2],te=ee.high,oe=ee.low,ne=(te>>>19|oe<<13)^(te<<3|oe>>>29)^te>>>6,re=(oe>>>19|te<<13)^(oe<<3|te>>>29)^(oe>>>6|te<<26),ie=l[V-7],ae=ie.high,se=ie.low,ce=l[V-16],le=ce.high,ue=ce.low;K=(K=(K=Z+ae+((Y=$+se)>>>0<$>>>0?1:0))+ne+((Y+=re)>>>0<re>>>0?1:0))+le+((Y+=ue)>>>0<ue>>>0?1:0),q.high=K,q.low=Y}var pe,de=F&U^~F&x,fe=G&j^~G&z,he=O&k^O&B^k&B,ge=E&A^E&D^A&D,ye=(O>>>28|E<<4)^(O<<30|E>>>2)^(O<<25|E>>>7),me=(E>>>28|O<<4)^(E<<30|O>>>2)^(E<<25|O>>>7),_e=(F>>>14|G<<18)^(F>>>18|G<<14)^(F<<23|G>>>9),ve=(G>>>14|F<<18)^(G>>>18|F<<14)^(G<<23|F>>>9),Se=c[V],be=Se.high,Ne=Se.low,Pe=H+_e+((pe=W+ve)>>>0<W>>>0?1:0),Ce=me+ge;H=x,W=z,x=U,z=j,U=F,j=G,F=M+(Pe=(Pe=(Pe=Pe+de+((pe+=fe)>>>0<fe>>>0?1:0))+be+((pe+=Ne)>>>0<Ne>>>0?1:0))+K+((pe+=Y)>>>0<Y>>>0?1:0))+((G=L+pe|0)>>>0<L>>>0?1:0)|0,M=B,L=D,B=k,D=A,k=O,A=E,O=Pe+(ye+he+(Ce>>>0<me>>>0?1:0))+((E=pe+Ce|0)>>>0<pe>>>0?1:0)|0}h=n.low=h+E,n.high=f+O+(h>>>0<E>>>0?1:0),y=r.low=y+A,r.high=g+k+(y>>>0<A>>>0?1:0),_=i.low=_+D,i.high=m+B+(_>>>0<D>>>0?1:0),S=a.low=S+L,a.high=v+M+(S>>>0<L>>>0?1:0),N=s.low=N+G,s.high=b+F+(N>>>0<G>>>0?1:0),C=u.low=C+j,u.high=P+U+(C>>>0<j>>>0?1:0),T=p.low=T+z,p.high=w+x+(T>>>0<z>>>0?1:0),R=d.low=R+W,d.high=I+H+(R>>>0<W>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(o/4294967296),t[31+(n+128>>>10<<5)]=o,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=o._createHelper(u),t.HmacSHA512=o._createHmacHelper(u)}(),e.SHA512},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],n):n(this.CryptoJS)},{"./core":21,"./x64-core":53}],52:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib,n=o.WordArray,r=o.BlockCipher,i=t.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=i.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],o=0;o<56;o++){var n=a[o]-1;t[o]=e[n>>>5]>>>31-n%32&1}for(var r=this._subKeys=[],i=0;i<16;i++){var l=r[i]=[],u=c[i];for(o=0;o<24;o++)l[o/6|0]|=t[(s[o]-1+u)%28]<<31-o%6,l[4+(o/6|0)]|=t[28+(s[o+24]-1+u)%28]<<31-o%6;for(l[0]=l[0]<<1|l[0]>>>31,o=1;o<7;o++)l[o]=l[o]>>>4*(o-1)+3;l[7]=l[7]<<5|l[7]>>>27}var p=this._invSubKeys=[];for(o=0;o<16;o++)p[o]=r[15-o]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,o){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),d.call(this,1,1431655765);for(var n=0;n<16;n++){for(var r=o[n],i=this._lBlock,a=this._rBlock,s=0,c=0;c<8;c++)s|=l[c][((a^r[c])&u[c])>>>0];this._lBlock=a,this._rBlock=i^s}var p=this._lBlock;this._lBlock=this._rBlock,this._rBlock=p,d.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var o=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=o,this._lBlock^=o<<e}function f(e,t){var o=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=o,this._rBlock^=o<<e}t.DES=r._createHelper(p);var h=i.TripleDES=r.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),o=e.length<4?e.slice(0,2):e.slice(2,4),r=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=p.createEncryptor(n.create(t)),this._des2=p.createEncryptor(n.create(o)),this._des3=p.createEncryptor(n.create(r))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=r._createHelper(h)}(),e.TripleDES},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":20,"./core":21,"./enc-base64":22,"./evpkdf":25,"./md5":30}],53:[function(e,t,o){var n;n=function(e){var t,o,n,r,i;return o=(t=e).lib,n=o.Base,r=o.WordArray,(i=t.x64={}).Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),i.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,o=[],n=0;n<t;n++){var i=e[n];o.push(i.high),o.push(i.low)}return r.create(o,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),o=t.length,r=0;r<o;r++)t[r]=t[r].clone();return e}}),e},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":21}],54:[function(e,t){"use strict";var o={single_source_shortest_paths:function(e,t,n){var r={},i={};i[t]=0;var a,s,c,l,u,p,d,f=o.PriorityQueue.make();for(f.push(t,0);!f.empty();)for(c in s=(a=f.pop()).value,l=a.cost,u=e[s]||{})u.hasOwnProperty(c)&&(p=l+u[c],d=i[c],(void 0===i[c]||d>p)&&(i[c]=p,f.push(c,p),r[c]=s));if(void 0!==n&&void 0===i[n]){var h=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(h)}return r},extract_shortest_path_from_predecessor_list:function(e,t){for(var o=[],n=t;n;)o.push(n),e[n],n=e[n];return o.reverse(),o},find_path:function(e,t,n){var r=o.single_source_shortest_paths(e,t,n);return o.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(e){var t,n=o.PriorityQueue,r={};for(t in e=e||{},n)n.hasOwnProperty(t)&&(r[t]=n[t]);return r.queue=[],r.sorter=e.sorter||n.default_sorter,r},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var o={value:e,cost:t};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};void 0!==t&&(t.exports=o)},{}],55:[function(e,t){"use strict";t.exports=function(e){for(var t=[],o=e.length,n=0;n<o;n++){var r=e.charCodeAt(n);if(r>=55296&&r<=56319&&o>n+1){var i=e.charCodeAt(n+1);i>=56320&&i<=57343&&(r=1024*(r-55296)+i-56320+65536,n+=1)}r<128?t.push(r):r<2048?(t.push(r>>6|192),t.push(63&r|128)):r<55296||r>=57344&&r<65536?(t.push(r>>12|224),t.push(r>>6&63|128),t.push(63&r|128)):r>=65536&&r<=1114111?(t.push(r>>18|240),t.push(r>>12&63|128),t.push(r>>6&63|128),t.push(63&r|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},{}],56:[function(e,t,o){var n,r;n="undefined"!=typeof self?self:this,r=function(){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=3)}([function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){this.width=t,this.height=e.length/t,this.data=e}return e.createEmpty=function(t,o){return new e(new Uint8ClampedArray(t*o),t)},e.prototype.get=function(e,t){return!(e<0||e>=this.width||t<0||t>=this.height||!this.data[t*this.width+e])},e.prototype.set=function(e,t,o){this.data[t*this.width+e]=o?1:0},e.prototype.setRegion=function(e,t,o,n,r){for(var i=t;i<t+n;i++)for(var a=e;a<e+o;a++)this.set(a,i,!!r)},e}();t.BitMatrix=o},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(2);t.addOrSubtractGF=function(e,t){return e^t};var r=function(){function e(e,t,o){this.primitive=e,this.size=t,this.generatorBase=o,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var r=1,i=0;i<this.size;i++)this.expTable[i]=r,(r*=2)>=this.size&&(r=(r^this.primitive)&this.size-1);for(i=0;i<this.size-1;i++)this.logTable[this.expTable[i]]=i;this.zero=new n.default(this,Uint8ClampedArray.from([0])),this.one=new n.default(this,Uint8ClampedArray.from([1]))}return e.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},e.prototype.inverse=function(e){if(0===e)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[e]-1]},e.prototype.buildMonomial=function(e,t){if(e<0)throw new Error("Invalid monomial degree less than 0");if(0===t)return this.zero;var o=new Uint8ClampedArray(e+1);return o[0]=t,new n.default(this,o)},e.prototype.log=function(e){if(0===e)throw new Error("Can't take log(0)");return this.logTable[e]},e.prototype.exp=function(e){return this.expTable[e]},e}();t.default=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(1),r=function(){function e(e,t){if(0===t.length)throw new Error("No coefficients.");this.field=e;var o=t.length;if(o>1&&0===t[0]){for(var n=1;n<o&&0===t[n];)n++;if(n===o)this.coefficients=e.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(o-n);for(var r=0;r<this.coefficients.length;r++)this.coefficients[r]=t[n+r]}}else this.coefficients=t}return e.prototype.degree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.addOrSubtract=function(t){var o;if(this.isZero())return t;if(t.isZero())return this;var r=this.coefficients,i=t.coefficients;r.length>i.length&&(r=(o=[i,r])[0],i=o[1]);for(var a=new Uint8ClampedArray(i.length),s=i.length-r.length,c=0;c<s;c++)a[c]=i[c];for(c=s;c<i.length;c++)a[c]=n.addOrSubtractGF(r[c-s],i[c]);return new e(this.field,a)},e.prototype.multiply=function(t){if(0===t)return this.field.zero;if(1===t)return this;for(var o=this.coefficients.length,n=new Uint8ClampedArray(o),r=0;r<o;r++)n[r]=this.field.multiply(this.coefficients[r],t);return new e(this.field,n)},e.prototype.multiplyPoly=function(t){if(this.isZero()||t.isZero())return this.field.zero;for(var o=this.coefficients,r=o.length,i=t.coefficients,a=i.length,s=new Uint8ClampedArray(r+a-1),c=0;c<r;c++)for(var l=o[c],u=0;u<a;u++)s[c+u]=n.addOrSubtractGF(s[c+u],this.field.multiply(l,i[u]));return new e(this.field,s)},e.prototype.multiplyByMonomial=function(t,o){if(t<0)throw new Error("Invalid degree less than 0");if(0===o)return this.field.zero;for(var n=this.coefficients.length,r=new Uint8ClampedArray(n+t),i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],o);return new e(this.field,r)},e.prototype.evaluateAt=function(e){var t=0;if(0===e)return this.getCoefficient(0);var o=this.coefficients.length;if(1===e)return this.coefficients.forEach(function(e){t=n.addOrSubtractGF(t,e)}),t;t=this.coefficients[0];for(var r=1;r<o;r++)t=n.addOrSubtractGF(this.field.multiply(e,t),this.coefficients[r]);return t},e}();t.default=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(4),r=o(5),i=o(11),a=o(12);function s(e){var t=a.locate(e);if(!t)return null;for(var o=0,n=t;o<n.length;o++){var s=n[o],c=i.extract(e,s),l=r.decode(c.matrix);if(l)return{binaryData:l.bytes,data:l.text,chunks:l.chunks,version:l.version,location:{topRightCorner:c.mappingFunction(s.dimension,0),topLeftCorner:c.mappingFunction(0,0),bottomRightCorner:c.mappingFunction(s.dimension,s.dimension),bottomLeftCorner:c.mappingFunction(0,s.dimension),topRightFinderPattern:s.topRight,topLeftFinderPattern:s.topLeft,bottomLeftFinderPattern:s.bottomLeft,bottomRightAlignmentPattern:s.alignmentPattern}}}return null}var c={inversionAttempts:"attemptBoth"};function l(e,t,o,r){void 0===r&&(r={});var i=c;Object.keys(i||{}).forEach(function(e){i[e]=r[e]||i[e]});var a="attemptBoth"===i.inversionAttempts||"invertFirst"===i.inversionAttempts,l="onlyInvert"===i.inversionAttempts||"invertFirst"===i.inversionAttempts,u=n.binarize(e,t,o,a),p=u.binarized,d=u.inverted,f=s(l?d:p);return f||"attemptBoth"!==i.inversionAttempts&&"invertFirst"!==i.inversionAttempts||(f=s(l?p:d)),f}l.default=l,t.default=l},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0);function r(e,t,o){return e<t?t:e>o?o:e}var i=function(){function e(e,t){this.width=e,this.data=new Uint8ClampedArray(e*t)}return e.prototype.get=function(e,t){return this.data[t*this.width+e]},e.prototype.set=function(e,t,o){this.data[t*this.width+e]=o},e}();t.binarize=function(e,t,o,a){if(e.length!==t*o*4)throw new Error("Malformed data passed to binarizer.");for(var s=new i(t,o),c=0;c<t;c++)for(var l=0;l<o;l++){var u=e[4*(l*t+c)+0],p=e[4*(l*t+c)+1],d=e[4*(l*t+c)+2];s.set(c,l,.2126*u+.7152*p+.0722*d)}for(var f=Math.ceil(t/8),h=Math.ceil(o/8),g=new i(f,h),y=0;y<h;y++)for(var m=0;m<f;m++){var _=0,v=1/0,S=0;for(l=0;l<8;l++)for(c=0;c<8;c++){var b=s.get(8*m+c,8*y+l);_+=b,v=Math.min(v,b),S=Math.max(S,b)}var N=_/Math.pow(8,2);if(S-v<=24&&(N=v/2,y>0&&m>0)){var P=(g.get(m,y-1)+2*g.get(m-1,y)+g.get(m-1,y-1))/4;v<P&&(N=P)}g.set(m,y,N)}var C=n.BitMatrix.createEmpty(t,o),w=null;for(a&&(w=n.BitMatrix.createEmpty(t,o)),y=0;y<h;y++)for(m=0;m<f;m++){for(var T=r(m,2,f-3),I=r(y,2,h-3),R=(_=0,-2);R<=2;R++)for(var O=-2;O<=2;O++)_+=g.get(T+R,I+O);var E=_/25;for(R=0;R<8;R++)for(O=0;O<8;O++){c=8*m+R,l=8*y+O;var k=s.get(c,l);C.set(c,l,k<=E),a&&w.set(c,l,!(k<=E))}}return a?{binarized:C,inverted:w}:{binarized:C}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),r=o(6),i=o(9),a=o(10);function s(e,t){for(var o=e^t,n=0;o;)n++,o&=o-1;return n}function c(e,t){return t<<1|e}var l=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],u=[function(e){return(e.y+e.x)%2==0},function(e){return e.y%2==0},function(e){return e.x%3==0},function(e){return(e.y+e.x)%3==0},function(e){return(Math.floor(e.y/2)+Math.floor(e.x/3))%2==0},function(e){return e.x*e.y%2+e.x*e.y%3==0},function(e){return(e.y*e.x%2+e.y*e.x%3)%2==0},function(e){return((e.y+e.x)%2+e.y*e.x%3)%2==0}];function p(e){var t=17+4*e.versionNumber,o=n.BitMatrix.createEmpty(t,t);o.setRegion(0,0,9,9,!0),o.setRegion(t-8,0,8,9,!0),o.setRegion(0,t-8,9,8,!0);for(var r=0,i=e.alignmentPatternCenters;r<i.length;r++)for(var a=i[r],s=0,c=e.alignmentPatternCenters;s<c.length;s++){var l=c[s];6===a&&6===l||6===a&&l===t-7||a===t-7&&6===l||o.setRegion(a-2,l-2,5,5,!0)}return o.setRegion(6,9,1,t-17,!0),o.setRegion(9,6,t-17,1,!0),e.versionNumber>6&&(o.setRegion(t-11,0,3,6,!0),o.setRegion(0,t-11,6,3,!0)),o}function d(e,t,o){for(var n=u[o.dataMask],r=e.height,i=p(t),a=[],s=0,l=0,d=!0,f=r-1;f>0;f-=2){6===f&&f--;for(var h=0;h<r;h++)for(var g=d?r-1-h:h,y=0;y<2;y++){var m=f-y;if(!i.get(m,g)){l++;var _=e.get(m,g);n({y:g,x:m})&&(_=!_),s=c(_,s),8===l&&(a.push(s),l=0,s=0)}}d=!d}return a}function f(e){var t=e.height,o=Math.floor((t-17)/4);if(o<=6)return a.VERSIONS[o-1];for(var n=0,r=5;r>=0;r--)for(var i=t-9;i>=t-11;i--)n=c(e.get(i,r),n);var l=0;for(i=5;i>=0;i--)for(r=t-9;r>=t-11;r--)l=c(e.get(i,r),l);for(var u,p=1/0,d=0,f=a.VERSIONS;d<f.length;d++){var h=f[d];if(h.infoBits===n||h.infoBits===l)return h;var g=s(n,h.infoBits);g<p&&(u=h,p=g),(g=s(l,h.infoBits))<p&&(u=h,p=g)}return p<=3?u:void 0}function h(e){for(var t=0,o=0;o<=8;o++)6!==o&&(t=c(e.get(o,8),t));for(var n=7;n>=0;n--)6!==n&&(t=c(e.get(8,n),t));var r=e.height,i=0;for(n=r-1;n>=r-7;n--)i=c(e.get(8,n),i);for(o=r-8;o<r;o++)i=c(e.get(o,8),i);for(var a=1/0,u=null,p=0,d=l;p<d.length;p++){var f=d[p],h=f.bits,g=f.formatInfo;if(h===t||h===i)return g;var y=s(t,h);y<a&&(u=g,a=y),t!==i&&(y=s(i,h))<a&&(u=g,a=y)}return a<=3?u:null}function g(e,t,o){var n=t.errorCorrectionLevels[o],r=[],i=0;if(n.ecBlocks.forEach(function(e){for(var t=0;t<e.numBlocks;t++)r.push({numDataCodewords:e.dataCodewordsPerBlock,codewords:[]}),i+=e.dataCodewordsPerBlock+n.ecCodewordsPerBlock}),e.length<i)return null;e=e.slice(0,i);for(var a=n.ecBlocks[0].dataCodewordsPerBlock,s=0;s<a;s++)for(var c=0,l=r;c<l.length;c++)l[c].codewords.push(e.shift());if(n.ecBlocks.length>1){var u=n.ecBlocks[0].numBlocks,p=n.ecBlocks[1].numBlocks;for(s=0;s<p;s++)r[u+s].codewords.push(e.shift())}for(;e.length>0;)for(var d=0,f=r;d<f.length;d++)f[d].codewords.push(e.shift());return r}function y(e){var t=f(e);if(!t)return null;var o=h(e);if(!o)return null;var n=g(d(e,t,o),t,o.errorCorrectionLevel);if(!n)return null;for(var a=n.reduce(function(e,t){return e+t.numDataCodewords},0),s=new Uint8ClampedArray(a),c=0,l=0,u=n;l<u.length;l++){var p=u[l],y=i.decode(p.codewords,p.codewords.length-p.numDataCodewords);if(!y)return null;for(var m=0;m<p.numDataCodewords;m++)s[c++]=y[m]}try{return r.decode(s,t.versionNumber)}catch(_){return null}}t.decode=function(e){if(null==e)return null;var t=y(e);if(t)return t;for(var o=0;o<e.width;o++)for(var n=o+1;n<e.height;n++)e.get(o,n)!==e.get(n,o)&&(e.set(o,n,!e.get(o,n)),e.set(n,o,!e.get(n,o)));return y(e)}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r,i=o(7),a=o(8);function s(e,t){for(var o=[],n="",r=[10,12,14][t],i=e.readBits(r);i>=3;){if((l=e.readBits(10))>=1e3)throw new Error("Invalid numeric value above 999");var a=Math.floor(l/100),s=Math.floor(l/10)%10,c=l%10;o.push(48+a,48+s,48+c),n+=a.toString()+s.toString()+c.toString(),i-=3}if(2===i){if((l=e.readBits(7))>=100)throw new Error("Invalid numeric value above 99");a=Math.floor(l/10),s=l%10,o.push(48+a,48+s),n+=a.toString()+s.toString()}else if(1===i){var l;if((l=e.readBits(4))>=10)throw new Error("Invalid numeric value above 9");o.push(48+l),n+=l.toString()}return{bytes:o,text:n}}(function(e){e.Numeric="numeric",e.Alphanumeric="alphanumeric",e.Byte="byte",e.Kanji="kanji",e.ECI="eci"})(n=t.Mode||(t.Mode={})),function(e){e[e.Terminator=0]="Terminator",e[e.Numeric=1]="Numeric",e[e.Alphanumeric=2]="Alphanumeric",e[e.Byte=4]="Byte",e[e.Kanji=8]="Kanji",e[e.ECI=7]="ECI"}(r||(r={}));var c=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function l(e,t){for(var o=[],n="",r=[9,11,13][t],i=e.readBits(r);i>=2;){var a=e.readBits(11),s=Math.floor(a/45),l=a%45;o.push(c[s].charCodeAt(0),c[l].charCodeAt(0)),n+=c[s]+c[l],i-=2}return 1===i&&(s=e.readBits(6),o.push(c[s].charCodeAt(0)),n+=c[s]),{bytes:o,text:n}}function u(e,t){for(var o=[],n="",r=[8,16,16][t],i=e.readBits(r),a=0;a<i;a++){var s=e.readBits(8);o.push(s)}try{n+=decodeURIComponent(o.map(function(e){return"%"+("0"+e.toString(16)).substr(-2)}).join(""))}catch(c){}return{bytes:o,text:n}}function p(e,t){for(var o=[],n="",r=[8,10,12][t],i=e.readBits(r),s=0;s<i;s++){var c=e.readBits(13),l=Math.floor(c/192)<<8|c%192;l+=l<7936?33088:49472,o.push(l>>8,255&l),n+=String.fromCharCode(a.shiftJISTable[l])}return{bytes:o,text:n}}t.decode=function(e,t){for(var o,a,c,d,f=new i.BitStream(e),h=t<=9?0:t<=26?1:2,g={text:"",bytes:[],chunks:[],version:t};f.available()>=4;){var y=f.readBits(4);if(y===r.Terminator)return g;if(y===r.ECI)0===f.readBits(1)?g.chunks.push({type:n.ECI,assignmentNumber:f.readBits(7)}):0===f.readBits(1)?g.chunks.push({type:n.ECI,assignmentNumber:f.readBits(14)}):0===f.readBits(1)?g.chunks.push({type:n.ECI,assignmentNumber:f.readBits(21)}):g.chunks.push({type:n.ECI,assignmentNumber:-1});else if(y===r.Numeric){var m=s(f,h);g.text+=m.text,(o=g.bytes).push.apply(o,m.bytes),g.chunks.push({type:n.Numeric,text:m.text})}else if(y===r.Alphanumeric){var _=l(f,h);g.text+=_.text,(a=g.bytes).push.apply(a,_.bytes),g.chunks.push({type:n.Alphanumeric,text:_.text})}else if(y===r.Byte){var v=u(f,h);g.text+=v.text,(c=g.bytes).push.apply(c,v.bytes),g.chunks.push({type:n.Byte,bytes:v.bytes,text:v.text})}else if(y===r.Kanji){var S=p(f,h);g.text+=S.text,(d=g.bytes).push.apply(d,S.bytes),g.chunks.push({type:n.Kanji,bytes:S.bytes,text:S.text})}}if(0===f.available()||0===f.readBits(f.available()))return g}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.byteOffset=0,this.bitOffset=0,this.bytes=e}return e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Error("Cannot read "+e.toString()+" bits");var t=0;if(this.bitOffset>0){var o=8-this.bitOffset,n=e<o?e:o,r=255>>8-n<<(i=o-n);t=(this.bytes[this.byteOffset]&r)>>i,e-=n,this.bitOffset+=n,8===this.bitOffset&&(this.bitOffset=0,this.byteOffset++)}if(e>0){for(;e>=8;)t=t<<8|255&this.bytes[this.byteOffset],this.byteOffset++,e-=8;var i;e>0&&(r=255>>(i=8-e)<<i,t=t<<e|(this.bytes[this.byteOffset]&r)>>i,this.bitOffset+=e)}return t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}();t.BitStream=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(1),r=o(2);function i(e,t,o,n){var r;t.degree()<o.degree()&&(t=(r=[o,t])[0],o=r[1]);for(var i=t,a=o,s=e.zero,c=e.one;a.degree()>=n/2;){var l=i,u=s;if(s=c,(i=a).isZero())return null;a=l;for(var p=e.zero,d=i.getCoefficient(i.degree()),f=e.inverse(d);a.degree()>=i.degree()&&!a.isZero();){var h=a.degree()-i.degree(),g=e.multiply(a.getCoefficient(a.degree()),f);p=p.addOrSubtract(e.buildMonomial(h,g)),a=a.addOrSubtract(i.multiplyByMonomial(h,g))}if(c=p.multiplyPoly(s).addOrSubtract(u),a.degree()>=i.degree())return null}var y=c.getCoefficient(0);if(0===y)return null;var m=e.inverse(y);return[c.multiply(m),a.multiply(m)]}function a(e,t){var o=t.degree();if(1===o)return[t.getCoefficient(1)];for(var n=new Array(o),r=0,i=1;i<e.size&&r<o;i++)0===t.evaluateAt(i)&&(n[r]=e.inverse(i),r++);return r!==o?null:n}function s(e,t,o){for(var r=o.length,i=new Array(r),a=0;a<r;a++){for(var s=e.inverse(o[a]),c=1,l=0;l<r;l++)a!==l&&(c=e.multiply(c,n.addOrSubtractGF(1,e.multiply(o[l],s))));i[a]=e.multiply(t.evaluateAt(s),e.inverse(c)),0!==e.generatorBase&&(i[a]=e.multiply(i[a],s))}return i}t.decode=function(e,t){var o=new Uint8ClampedArray(e.length);o.set(e);for(var c=new n.default(285,256,0),l=new r.default(c,o),u=new Uint8ClampedArray(t),p=!1,d=0;d<t;d++){var f=l.evaluateAt(c.exp(d+c.generatorBase));u[u.length-1-d]=f,0!==f&&(p=!0)}if(!p)return o;var h=new r.default(c,u),g=i(c,c.buildMonomial(t,1),h,t);if(null===g)return null;var y=a(c,g[0]);if(null==y)return null;for(var m=s(c,g[1],y),_=0;_<y.length;_++){var v=o.length-1-c.log(y[_]);if(v<0)return null;o[v]=n.addOrSubtractGF(o[v],m[_])}return o}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0);function r(e,t,o,n){var r=e.x-t.x+o.x-n.x,i=e.y-t.y+o.y-n.y;if(0===r&&0===i)return{a11:t.x-e.x,a12:t.y-e.y,a13:0,a21:o.x-t.x,a22:o.y-t.y,a23:0,a31:e.x,a32:e.y,a33:1};var a=t.x-o.x,s=n.x-o.x,c=t.y-o.y,l=n.y-o.y,u=a*l-s*c,p=(r*l-s*i)/u,d=(a*i-r*c)/u;return{a11:t.x-e.x+p*t.x,a12:t.y-e.y+p*t.y,a13:p,a21:n.x-e.x+d*n.x,a22:n.y-e.y+d*n.y,a23:d,a31:e.x,a32:e.y,a33:1}}function i(e,t,o,n){var i=r(e,t,o,n);return{a11:i.a22*i.a33-i.a23*i.a32,a12:i.a13*i.a32-i.a12*i.a33,a13:i.a12*i.a23-i.a13*i.a22,a21:i.a23*i.a31-i.a21*i.a33,a22:i.a11*i.a33-i.a13*i.a31,a23:i.a13*i.a21-i.a11*i.a23,a31:i.a21*i.a32-i.a22*i.a31,a32:i.a12*i.a31-i.a11*i.a32,a33:i.a11*i.a22-i.a12*i.a21}}t.extract=function(e,t){for(var o,a,s=(a=i({x:3.5,y:3.5},{x:t.dimension-3.5,y:3.5},{x:t.dimension-6.5,y:t.dimension-6.5},{x:3.5,y:t.dimension-3.5}),{a11:(o=r(t.topLeft,t.topRight,t.alignmentPattern,t.bottomLeft)).a11*a.a11+o.a21*a.a12+o.a31*a.a13,a12:o.a12*a.a11+o.a22*a.a12+o.a32*a.a13,a13:o.a13*a.a11+o.a23*a.a12+o.a33*a.a13,a21:o.a11*a.a21+o.a21*a.a22+o.a31*a.a23,a22:o.a12*a.a21+o.a22*a.a22+o.a32*a.a23,a23:o.a13*a.a21+o.a23*a.a22+o.a33*a.a23,a31:o.a11*a.a31+o.a21*a.a32+o.a31*a.a33,a32:o.a12*a.a31+o.a22*a.a32+o.a32*a.a33,a33:o.a13*a.a31+o.a23*a.a32+o.a33*a.a33}),c=n.BitMatrix.createEmpty(t.dimension,t.dimension),l=function(e,t){var o=s.a13*e+s.a23*t+s.a33;return{x:(s.a11*e+s.a21*t+s.a31)/o,y:(s.a12*e+s.a22*t+s.a32)/o}},u=0;u<t.dimension;u++)for(var p=0;p<t.dimension;p++){var d=l(p+.5,u+.5);c.set(p,u,e.get(Math.floor(d.x),Math.floor(d.y)))}return{matrix:c,mappingFunction:l}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))};function n(e){return e.reduce(function(e,t){return e+t})}function r(e,t,n){var r,i,a,s,c,l,u,p=o(e,t),d=o(t,n),f=o(e,n);return d>=p&&d>=f?(c=(r=[t,e,n])[0],l=r[1],u=r[2]):f>=d&&f>=p?(c=(i=[e,t,n])[0],l=i[1],u=i[2]):(c=(a=[e,n,t])[0],l=a[1],u=a[2]),(u.x-l.x)*(c.y-l.y)-(u.y-l.y)*(c.x-l.x)<0&&(c=(s=[u,c])[0],u=s[1]),{bottomLeft:c,topLeft:l,topRight:u}}function i(e,t,r,i){var a=(n(s(e,r,i,5))/7+n(s(e,t,i,5))/7+n(s(r,e,i,5))/7+n(s(t,e,i,5))/7)/4;if(a<1)throw new Error("Invalid module size");var c=Math.round(o(e,t)/a),l=Math.round(o(e,r)/a),u=Math.floor((c+l)/2)+7;switch(u%4){case 0:u++;break;case 2:u--}return{dimension:u,moduleSize:a}}function a(e,t,n,r){var i,a,s,c,l=[{x:Math.floor(e.x),y:Math.floor(e.y)}],u=Math.abs(t.y-e.y)>Math.abs(t.x-e.x);u?(i=Math.floor(e.y),a=Math.floor(e.x),s=Math.floor(t.y),c=Math.floor(t.x)):(i=Math.floor(e.x),a=Math.floor(e.y),s=Math.floor(t.x),c=Math.floor(t.y));for(var p=Math.abs(s-i),d=Math.abs(c-a),f=Math.floor(-p/2),h=i<s?1:-1,g=a<c?1:-1,y=!0,m=i,_=a;m!==s+h;m+=h){var v=u?_:m,S=u?m:_;if(n.get(v,S)!==y&&(y=!y,l.push({x:v,y:S}),l.length===r+1))break;if((f+=d)>0){if(_===c)break;_+=g,f-=p}}for(var b=[],N=0;N<r;N++)l[N]&&l[N+1]?b.push(o(l[N],l[N+1])):b.push(0);return b}function s(e,t,o,n){var r,i=t.y-e.y,s=t.x-e.x,c=a(e,t,o,Math.ceil(n/2)),l=a(e,{x:e.x-s,y:e.y-i},o,Math.ceil(n/2)),u=c.shift()+l.shift()-1;return(r=l.concat(u)).concat.apply(r,c)}function c(e,t){var o=n(e)/n(t),r=0;return t.forEach(function(t,n){r+=Math.pow(e[n]-t*o,2)}),{averageSize:o,error:r}}function l(e,t,o){try{var n=s(e,{x:-1,y:e.y},o,t.length),r=s(e,{x:e.x,y:-1},o,t.length),i=s(e,{x:Math.max(0,e.x-e.y)-1,y:Math.max(0,e.y-e.x)-1},o,t.length),a=s(e,{x:Math.min(o.width,e.x+e.y)+1,y:Math.min(o.height,e.y+e.x)+1},o,t.length),l=c(n,t),u=c(r,t),p=c(i,t),d=c(a,t),f=Math.sqrt(l.error*l.error+u.error*u.error+p.error*p.error+d.error*d.error),h=(l.averageSize+u.averageSize+p.averageSize+d.averageSize)/4;return f+(Math.pow(l.averageSize-h,2)+Math.pow(u.averageSize-h,2)+Math.pow(p.averageSize-h,2)+Math.pow(d.averageSize-h,2))/h}catch(g){return 1/0}}function u(e,t){for(var o=Math.round(t.x);e.get(o,Math.round(t.y));)o--;for(var n=Math.round(t.x);e.get(n,Math.round(t.y));)n++;for(var r=(o+n)/2,i=Math.round(t.y);e.get(Math.round(r),i);)i--;for(var a=Math.round(t.y);e.get(Math.round(r),a);)a++;return{x:r,y:(i+a)/2}}function p(e,t,r,a,s){var c,u,p;try{u=(c=i(a,r,s,e)).dimension,p=c.moduleSize}catch(_){return null}var d=r.x-a.x+s.x,f=r.y-a.y+s.y,h=(o(a,s)+o(a,r))/2/p,g=1-3/h,y={x:a.x+g*(d-a.x),y:a.y+g*(f-a.y)},m=t.map(function(t){var r=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,i=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.floor(r),Math.floor(i)))return n([t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1]),{x:r,y:i,score:l({x:Math.floor(r),y:Math.floor(i)},[1,1,1],e)+o({x:r,y:i},y)}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score});return{alignmentPattern:h>=15&&m.length?m[0]:y,dimension:u}}t.locate=function(e){for(var t=[],o=[],i=[],a=[],s=function(r){for(var s=0,c=!1,l=[0,0,0,0,0],u=function(t){var i=e.get(t,r);if(i===c)s++;else{l=[l[1],l[2],l[3],l[4],s],s=1,c=i;var u=n(l)/7,p=Math.abs(l[0]-u)<u&&Math.abs(l[1]-u)<u&&Math.abs(l[2]-3*u)<3*u&&Math.abs(l[3]-u)<u&&Math.abs(l[4]-u)<u&&!i,d=n(l.slice(-3))/3,f=Math.abs(l[2]-d)<d&&Math.abs(l[3]-d)<d&&Math.abs(l[4]-d)<d&&i;if(p){var h=t-l[3]-l[4],g=h-l[2],y={startX:g,endX:h,y:r};(m=o.filter(function(e){return g>=e.bottom.startX&&g<=e.bottom.endX||h>=e.bottom.startX&&g<=e.bottom.endX||g<=e.bottom.startX&&h>=e.bottom.endX&&l[2]/(e.bottom.endX-e.bottom.startX)<1.5&&l[2]/(e.bottom.endX-e.bottom.startX)>.5})).length>0?m[0].bottom=y:o.push({top:y,bottom:y})}if(f){var m,_=t-l[4],v=_-l[3];y={startX:v,y:r,endX:_},(m=a.filter(function(e){return v>=e.bottom.startX&&v<=e.bottom.endX||_>=e.bottom.startX&&v<=e.bottom.endX||v<=e.bottom.startX&&_>=e.bottom.endX&&l[2]/(e.bottom.endX-e.bottom.startX)<1.5&&l[2]/(e.bottom.endX-e.bottom.startX)>.5})).length>0?m[0].bottom=y:a.push({top:y,bottom:y})}}},p=-1;p<=e.width;p++)u(p);t.push.apply(t,o.filter(function(e){return e.bottom.y!==r&&e.bottom.y-e.top.y>=2})),o=o.filter(function(e){return e.bottom.y===r}),i.push.apply(i,a.filter(function(e){return e.bottom.y!==r})),a=a.filter(function(e){return e.bottom.y===r})},c=0;c<=e.height;c++)s(c);t.push.apply(t,o.filter(function(e){return e.bottom.y-e.top.y>=2})),i.push.apply(i,a);var d=t.filter(function(e){return e.bottom.y-e.top.y>=2}).map(function(t){var o=(t.top.startX+t.top.endX+t.bottom.startX+t.bottom.endX)/4,r=(t.top.y+t.bottom.y+1)/2;if(e.get(Math.round(o),Math.round(r))){var i=[t.top.endX-t.top.startX,t.bottom.endX-t.bottom.startX,t.bottom.y-t.top.y+1],a=n(i)/i.length;return{score:l({x:Math.round(o),y:Math.round(r)},[1,1,3,1,1],e),x:o,y:r,size:a}}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score}).map(function(e,t,o){if(t>4)return null;var n=o.filter(function(e,o){return t!==o}).map(function(t){return{x:t.x,y:t.y,score:t.score+Math.pow(t.size-e.size,2)/e.size,size:t.size}}).sort(function(e,t){return e.score-t.score});if(n.length<2)return null;var r=e.score+n[0].score+n[1].score;return{points:[e].concat(n.slice(0,2)),score:r}}).filter(function(e){return!!e}).sort(function(e,t){return e.score-t.score});if(0===d.length)return null;var f=r(d[0].points[0],d[0].points[1],d[0].points[2]),h=f.topRight,g=f.topLeft,y=f.bottomLeft,m=p(e,i,h,g,y),_=[];m&&_.push({alignmentPattern:{x:m.alignmentPattern.x,y:m.alignmentPattern.y},bottomLeft:{x:y.x,y:y.y},dimension:m.dimension,topLeft:{x:g.x,y:g.y},topRight:{x:h.x,y:h.y}});var v=u(e,h),S=u(e,g),b=u(e,y),N=p(e,i,v,S,b);return N&&_.push({alignmentPattern:{x:N.alignmentPattern.x,y:N.alignmentPattern.y},bottomLeft:{x:b.x,y:b.y},topLeft:{x:S.x,y:S.y},topRight:{x:v.x,y:v.y},dimension:N.dimension}),0===_.length?null:_}}]).default},"object"==typeof o&&"object"==typeof t?t.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof o?o.jsQR=r():n.jsQR=r()},{}],57:[function(e,t){t.exports=n;var o=null;try{o=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(T){}function n(e,t,o){this.low=0|e,this.high=0|t,this.unsigned=!!o}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var i={},a={};function s(e,t){var o,n,r;return t?(r=0<=(e>>>=0)&&e<256)&&(n=a[e])?n:(o=l(e,(0|e)<0?-1:0,!0),r&&(a[e]=o),o):(r=-128<=(e|=0)&&e<128)&&(n=i[e])?n:(o=l(e,e<0?-1:0,!1),r&&(i[e]=o),o)}function c(e,t){if(isNaN(e))return t?_:m;if(t){if(e<0)return _;if(e>=h)return P}else{if(e<=-g)return C;if(e+1>=g)return N}return e<0?c(-e,t).neg():l(e%f|0,e/f|0,t)}function l(e,t,o){return new n(e,t,o)}n.fromInt=s,n.fromNumber=c,n.fromBits=l;var u=Math.pow;function p(e,t,o){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(o=t,t=!1):t=!!t,(o=o||10)<2||36<o)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return p(e.substring(1),t,o).neg();for(var r=c(u(o,8)),i=m,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),l=parseInt(e.substring(a,a+s),o);if(s<8){var d=c(u(o,s));i=i.mul(d).add(c(l))}else i=(i=i.mul(r)).add(c(l))}return i.unsigned=t,i}function d(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?p(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=p,n.fromValue=d;var f=4294967296,h=f*f,g=h/2,y=s(1<<24),m=s(0);n.ZERO=m;var _=s(0,!0);n.UZERO=_;var v=s(1);n.ONE=v;var S=s(1,!0);n.UONE=S;var b=s(-1);n.NEG_ONE=b;var N=l(-1,2147483647,!1);n.MAX_VALUE=N;var P=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=P;var C=l(0,-2147483648,!1);n.MIN_VALUE=C;var w=n.prototype;w.toInt=function(){return this.unsigned?this.low>>>0:this.low},w.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},w.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(C)){var t=c(e),o=this.div(t),n=o.mul(t).sub(this);return o.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=c(u(e,6),this.unsigned),i=this,a="";;){var s=i.div(r),l=(i.sub(s.mul(r)).toInt()>>>0).toString(e);if((i=s).isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},w.getHighBits=function(){return this.high},w.getHighBitsUnsigned=function(){return this.high>>>0},w.getLowBits=function(){return this.low},w.getLowBitsUnsigned=function(){return this.low>>>0},w.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},w.isZero=function(){return 0===this.high&&0===this.low},w.eqz=w.isZero,w.isNegative=function(){return!this.unsigned&&this.high<0},w.isPositive=function(){return this.unsigned||this.high>=0},w.isOdd=function(){return 1==(1&this.low)},w.isEven=function(){return 0==(1&this.low)},w.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},w.eq=w.equals,w.notEquals=function(e){return!this.eq(e)},w.neq=w.notEquals,w.ne=w.notEquals,w.lessThan=function(e){return this.comp(e)<0},w.lt=w.lessThan,w.lessThanOrEqual=function(e){return this.comp(e)<=0},w.lte=w.lessThanOrEqual,w.le=w.lessThanOrEqual,w.greaterThan=function(e){return this.comp(e)>0},w.gt=w.greaterThan,w.greaterThanOrEqual=function(e){return this.comp(e)>=0},w.gte=w.greaterThanOrEqual,w.ge=w.greaterThanOrEqual,w.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),o=e.isNegative();return t&&!o?-1:!t&&o?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},w.comp=w.compare,w.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(v)},w.neg=w.negate,w.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,o=65535&this.high,n=this.low>>>16,i=65535&this.low,a=e.high>>>16,s=65535&e.high,c=e.low>>>16,u=0,p=0,f=0,h=0;return f+=(h+=i+(65535&e.low))>>>16,p+=(f+=n+c)>>>16,u+=(p+=o+s)>>>16,u+=t+a,l((f&=65535)<<16|(h&=65535),(u&=65535)<<16|(p&=65535),this.unsigned)},w.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},w.sub=w.subtract,w.multiply=function(e){if(this.isZero())return m;if(r(e)||(e=d(e)),o)return l(o.mul(this.low,this.high,e.low,e.high),o.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(C))return e.isOdd()?C:m;if(e.eq(C))return this.isOdd()?C:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(y)&&e.lt(y))return c(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,a=65535&this.low,s=e.high>>>16,u=65535&e.high,p=e.low>>>16,f=65535&e.low,h=0,g=0,_=0,v=0;return _+=(v+=a*f)>>>16,g+=(_+=i*f)>>>16,_&=65535,g+=(_+=a*p)>>>16,h+=(g+=n*f)>>>16,g&=65535,h+=(g+=i*p)>>>16,g&=65535,h+=(g+=a*u)>>>16,h+=t*f+n*p+i*u+a*s,l((_&=65535)<<16|(v&=65535),(h&=65535)<<16|(g&=65535),this.unsigned)},w.mul=w.multiply,w.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var t,n,i;if(o)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?o.div_u:o.div_s)(this.low,this.high,e.low,e.high),o.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?_:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return _;if(e.gt(this.shru(1)))return S;i=_}else{if(this.eq(C))return e.eq(v)||e.eq(b)?C:e.eq(C)?v:(t=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?v:b:(n=this.sub(e.mul(t)),i=t.add(n.div(e)));if(e.eq(C))return this.unsigned?_:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=m}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(t)/Math.LN2),s=a<=48?1:u(2,a-48),p=c(t),f=p.mul(e);f.isNegative()||f.gt(n);)f=(p=c(t-=s,this.unsigned)).mul(e);p.isZero()&&(p=v),i=i.add(p),n=n.sub(f)}return i},w.div=w.divide,w.modulo=function(e){return r(e)||(e=d(e)),o?l((this.unsigned?o.rem_u:o.rem_s)(this.low,this.high,e.low,e.high),o.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},w.mod=w.modulo,w.rem=w.modulo,w.not=function(){return l(~this.low,~this.high,this.unsigned)},w.and=function(e){return r(e)||(e=d(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},w.or=function(e){return r(e)||(e=d(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},w.xor=function(e){return r(e)||(e=d(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},w.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},w.shl=w.shiftLeft,w.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},w.shr=w.shiftRight,w.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},w.shru=w.shiftRightUnsigned,w.shr_u=w.shiftRightUnsigned,w.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},w.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},w.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},w.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},w.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,o){return o?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},{}],58:[function(e,t){"use strict";t.exports=e("./src/index-minimal")},{"./src/index-minimal":59}],59:[function(e,t,o){"use strict";var n=o;function r(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=e("./writer"),n.BufferWriter=e("./writer_buffer"),n.Reader=e("./reader"),n.BufferReader=e("./reader_buffer"),n.util=e("./util/minimal"),n.rpc=e("./rpc"),n.roots=e("./roots"),n.configure=r,r()},{"./reader":60,"./reader_buffer":61,"./roots":62,"./rpc":63,"./util/minimal":66,"./writer":67,"./writer_buffer":68}],60:[function(e,t){"use strict";t.exports=s;var o,n=e("./util/minimal"),r=n.LongBits,i=n.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function s(e){this.buf=e,this.pos=0,this.len=e.length}var c,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new s(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new s(e);throw Error("illegal buffer")},u=function(){return n.Buffer?function(e){return(s.create=function(e){return n.Buffer.isBuffer(e)?new o(e):l(e)})(e)}:l};function p(){var e=new r(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new r(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}s.create=u(),s.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,s.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),s.prototype.int32=function(){return 0|this.uint32()},s.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},s.prototype.bool=function(){return 0!==this.uint32()},s.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)},s.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4)},s.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},s.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},s.prototype.bytes=function(){var e=this.uint32(),t=this.pos,o=this.pos+e;if(o>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,o):t===o?new this.buf.constructor(0):this._slice.call(this.buf,t,o)},s.prototype.string=function(){var e=this.bytes();return i.read(e,0,e.length)},s.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},s.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},s._configure=function(e){o=e,s.create=u(),o._configure();var t=n.Long?"toLong":"toNumber";n.merge(s.prototype,{int64:function(){return p.call(this)[t](!1)},uint64:function(){return p.call(this)[t](!0)},sint64:function(){return p.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},{"./util/minimal":66}],61:[function(e,t){"use strict";t.exports=r;var o=e("./reader");(r.prototype=Object.create(o.prototype)).constructor=r;var n=e("./util/minimal");function r(e){o.call(this,e)}r._configure=function(){n.Buffer&&(r.prototype._slice=n.Buffer.prototype.slice)},r.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},r._configure()},{"./reader":60,"./util/minimal":66}],62:[function(e,t){"use strict";t.exports={}},{}],63:[function(e,t,o){"use strict";o.Service=e("./rpc/service")},{"./rpc/service":64}],64:[function(e,t){"use strict";t.exports=n;var o=e("../util/minimal");function n(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");o.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(n.prototype=Object.create(o.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,n,r,i,a){if(!i)throw TypeError("request must be specified");var s=this;if(!a)return o.asPromise(e,s,t,n,r,i);if(s.rpcImpl)try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(e,o){if(e)return s.emit("error",e,t),a(e);if(null!==o){if(!(o instanceof r))try{o=r[s.responseDelimited?"decodeDelimited":"decode"](o)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",o,t),a(null,o)}s.end(!0)})}catch(c){return s.emit("error",c,t),void setTimeout(function(){a(c)},0)}else setTimeout(function(){a(Error("already ended"))},0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{"../util/minimal":66}],65:[function(e,t){"use strict";t.exports=n;var o=e("../util/minimal");function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var r=n.zero=new n(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var i=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return r;var t=e<0;t&&(e=-e);var o=e>>>0,i=(e-o)/4294967296>>>0;return t&&(i=~i>>>0,o=~o>>>0,++o>4294967295&&(o=0,++i>4294967295&&(i=0))),new n(o,i)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(o.isString(e)){if(!o.Long)return n.fromNumber(parseInt(e,10));e=o.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):r},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,o=~this.hi>>>0;return t||(o=o+1>>>0),-(t+4294967296*o)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return o.Long?new o.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;n.fromHash=function(e){return e===i?r:new n((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,o=this.hi>>>24;return 0===o?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:o<128?9:10}},{"../util/minimal":66}],66:[function(e,t,o){(function(t){"use strict";var n=o;function r(e,t,o){for(var n=Object.keys(t),r=0;r<n.length;++r)void 0!==e[n[r]]&&o||(e[n[r]]=t[n[r]]);return e}function i(e){function t(e,o){if(!(this instanceof t))return new t(e,o);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),o&&r(this,o)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=e("@protobufjs/aspromise"),n.base64=e("@protobufjs/base64"),n.EventEmitter=e("@protobufjs/eventemitter"),n.float=e("@protobufjs/float"),n.inquire=e("@protobufjs/inquire"),n.utf8=e("@protobufjs/utf8"),n.pool=e("@protobufjs/pool"),n.LongBits=e("./longbits"),n.isNode=Boolean(void 0!==t&&t&&t.process&&t.process.versions&&t.process.versions.node),n.global=n.isNode&&t||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var o=e[t];return!(null==o||!e.hasOwnProperty(t))&&("object"!=typeof o||(Array.isArray(o)?o.length:Object.keys(o).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var o=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(o.lo,o.hi,t):o.toNumber(Boolean(t))},n.merge=r,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(e){for(var t={},o=0;o<e.length;++o)t[e[o]]=1;return function(){for(var e=Object.keys(this),o=e.length-1;o>-1;--o)if(1===t[e[o]]&&void 0!==this[e[o]]&&null!==this[e[o]])return e[o]}},n.oneOfSetter=function(e){return function(t){for(var o=0;o<e.length;++o)e[o]!==t&&delete this[e[o]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,o){return new e(t,o)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./longbits":65,"@protobufjs/aspromise":6,"@protobufjs/base64":7,"@protobufjs/eventemitter":8,"@protobufjs/float":9,"@protobufjs/inquire":10,"@protobufjs/pool":11,"@protobufjs/utf8":12}],67:[function(e,t){"use strict";t.exports=u;var o,n=e("./util/minimal"),r=n.LongBits,i=n.base64,a=n.utf8;function s(e,t,o){this.fn=e,this.len=t,this.next=void 0,this.val=o}function c(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function u(){this.len=0,this.head=new s(c,0,0),this.tail=this.head,this.states=null}var p=function(){return n.Buffer?function(){return(u.create=function(){return new o})()}:function(){return new u}};function d(e,t,o){t[o]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function h(e,t,o){for(;e.hi;)t[o++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[o++]=127&e.lo|128,e.lo=e.lo>>>7;t[o++]=e.lo}function g(e,t,o){t[o]=255&e,t[o+1]=e>>>8&255,t[o+2]=e>>>16&255,t[o+3]=e>>>24}u.create=p(),u.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(u.alloc=n.pool(u.alloc,n.Array.prototype.subarray)),u.prototype._push=function(e,t,o){return this.tail=this.tail.next=new s(e,t,o),this.len+=t,this},f.prototype=Object.create(s.prototype),f.prototype.fn=function(e,t,o){for(;e>127;)t[o++]=127&e|128,e>>>=7;t[o]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(h,10,r.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=r.from(e);return this._push(h,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=r.from(e).zzEncode();return this._push(h,t.length(),t)},u.prototype.bool=function(e){return this._push(d,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=r.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var y=n.Array.prototype.set?function(e,t,o){t.set(e,o)}:function(e,t,o){for(var n=0;n<e.length;++n)t[o+n]=e[n]};u.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(d,1,0);if(n.isString(e)){var o=u.alloc(t=i.length(e));i.decode(e,o,0),e=o}return this.uint32(t)._push(y,t,e)},u.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(d,1,0)},u.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new s(c,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(c,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,o=this.len;return this.reset().uint32(o),o&&(this.tail.next=e.next,this.tail=t,this.len+=o),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),o=0;e;)e.fn(e.val,t,o),o+=e.len,e=e.next;return t},u._configure=function(e){o=e,u.create=p(),o._configure()}},{"./util/minimal":66}],68:[function(e,t){"use strict";t.exports=r;var o=e("./writer");(r.prototype=Object.create(o.prototype)).constructor=r;var n=e("./util/minimal");function r(){o.call(this)}function i(e,t,o){e.length<40?n.utf8.write(e,t,o):t.utf8Write?t.utf8Write(e,o):t.write(e,o)}r._configure=function(){r.alloc=n._Buffer_allocUnsafe,r.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,o){t.set(e,o)}:function(e,t,o){if(e.copy)e.copy(t,o,0,e.length);else for(var n=0;n<e.length;)t[o++]=e[n++]}},r.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(r.writeBytesBuffer,t,e),this},r.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(i,t,e),this},r._configure()},{"./util/minimal":66,"./writer":67}],69:[function(e,t,o){const n=e("./can-promise"),r=e("./core/qrcode"),i=e("./renderer/canvas"),a=e("./renderer/svg-tag.js");function s(e,t,o,i,a){const s=[].slice.call(arguments,1),c=s.length,l="function"==typeof s[c-1];if(!l&&!n())throw new Error("Callback required as last argument");if(!l){if(c<1)throw new Error("Too few arguments provided");return 1===c?(o=t,t=i=void 0):2!==c||t.getContext||(i=o,o=t,t=void 0),new Promise(function(n,a){try{const c=r.create(o,i);n(e(c,t,i))}catch(s){a(s)}})}if(c<2)throw new Error("Too few arguments provided");2===c?(a=o,o=t,t=i=void 0):3===c&&(t.getContext&&void 0===a?(a=i,i=void 0):(a=i,i=o,o=t,t=void 0));try{const n=r.create(o,i);a(null,e(n,t,i))}catch(u){a(u)}}o.create=r.create,o.toCanvas=s.bind(null,i.render),o.toDataURL=s.bind(null,i.renderToDataURL),o.toString=s.bind(null,function(e,t,o){return a.render(e,o)})},{"./can-promise":70,"./core/qrcode":86,"./renderer/canvas":93,"./renderer/svg-tag.js":94}],70:[function(e,t){t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},{}],71:[function(e,t,o){const n=e("./utils").getSymbolSize;o.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,o=n(e),r=145===o?26:2*Math.ceil((o-13)/(2*t-2)),i=[o-7];for(let n=1;n<t-1;n++)i[n]=i[n-1]-r;return i.push(6),i.reverse()},o.getPositions=function(e){const t=[],n=o.getRowColCoords(e),r=n.length;for(let o=0;o<r;o++)for(let e=0;e<r;e++)0===o&&0===e||0===o&&e===r-1||o===r-1&&0===e||t.push([n[o],n[e]]);return t}},{"./utils":90}],72:[function(e,t){const o=e("./mode"),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(e){this.mode=o.ALPHANUMERIC,this.data=e}r.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let o=45*n.indexOf(this.data[t]);o+=n.indexOf(this.data[t+1]),e.put(o,11)}this.data.length%2&&e.put(n.indexOf(this.data[t]),6)},t.exports=r},{"./mode":83}],73:[function(e,t){function o(){this.buffer=[],this.length=0}o.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let o=0;o<t;o++)this.putBit(1==(e>>>t-o-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},t.exports=o},{}],74:[function(e,t){function o(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}o.prototype.set=function(e,t,o,n){const r=e*this.size+t;this.data[r]=o,n&&(this.reservedBit[r]=!0)},o.prototype.get=function(e,t){return this.data[e*this.size+t]},o.prototype.xor=function(e,t,o){this.data[e*this.size+t]^=o},o.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},t.exports=o},{}],75:[function(e,t){const o=e("encode-utf8"),n=e("./mode");function r(e){this.mode=n.BYTE,this.data=new Uint8Array(o(e))}r.getBitsLength=function(e){return 8*e},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){for(let t=0,o=this.data.length;t<o;t++)e.put(this.data[t],8)},t.exports=r},{"./mode":83,"encode-utf8":55}],76:[function(e,t,o){const n=e("./error-correction-level"),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];o.getBlocksCount=function(e,t){switch(t){case n.L:return r[4*(e-1)+0];case n.M:return r[4*(e-1)+1];case n.Q:return r[4*(e-1)+2];case n.H:return r[4*(e-1)+3];default:return}},o.getTotalCodewordsCount=function(e,t){switch(t){case n.L:return i[4*(e-1)+0];case n.M:return i[4*(e-1)+1];case n.Q:return i[4*(e-1)+2];case n.H:return i[4*(e-1)+3];default:return}}},{"./error-correction-level":77}],77:[function(e,t,o){function n(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return o.L;case"m":case"medium":return o.M;case"q":case"quartile":return o.Q;case"h":case"high":return o.H;default:throw new Error("Unknown EC Level: "+e)}}o.L={bit:1},o.M={bit:0},o.Q={bit:3},o.H={bit:2},o.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},o.from=function(e,t){if(o.isValid(e))return e;try{return n(e)}catch(r){return t}}},{}],78:[function(e,t,o){const n=e("./utils").getSymbolSize;o.getPositions=function(e){const t=n(e);return[[0,0],[t-7,0],[0,t-7]]}},{"./utils":90}],79:[function(e,t,o){const n=e("./utils"),r=n.getBCHDigit(1335);o.getEncodedBits=function(e,t){const o=e.bit<<3|t;let i=o<<10;for(;n.getBCHDigit(i)-r>=0;)i^=1335<<n.getBCHDigit(i)-r;return 21522^(o<<10|i)}},{"./utils":90}],80:[function(e,t,o){const n=new Uint8Array(512),r=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)n[t]=e,r[e]=t,256&(e<<=1)&&(e^=285);for(let t=255;t<512;t++)n[t]=n[t-255]})(),o.log=function(e){if(e<1)throw new Error("log("+e+")");return r[e]},o.exp=function(e){return n[e]},o.mul=function(e,t){return 0===e||0===t?0:n[r[e]+r[t]]}},{}],81:[function(e,t){const o=e("./mode"),n=e("./utils");function r(e){this.mode=o.KANJI,this.data=e}r.getBitsLength=function(e){return 13*e},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let o=n.toSJIS(this.data[t]);if(o>=33088&&o<=40956)o-=33088;else{if(!(o>=57408&&o<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");o-=49472}o=192*(o>>>8&255)+(255&o),e.put(o,13)}},t.exports=r},{"./mode":83,"./utils":90}],82:[function(e,t,o){o.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function n(e,t,n){switch(e){case o.Patterns.PATTERN000:return(t+n)%2==0;case o.Patterns.PATTERN001:return t%2==0;case o.Patterns.PATTERN010:return n%3==0;case o.Patterns.PATTERN011:return(t+n)%3==0;case o.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case o.Patterns.PATTERN101:return t*n%2+t*n%3==0;case o.Patterns.PATTERN110:return(t*n%2+t*n%3)%2==0;case o.Patterns.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}o.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},o.from=function(e){return o.isValid(e)?parseInt(e,10):void 0},o.getPenaltyN1=function(e){const t=e.size;let o=0,n=0,r=0,i=null,a=null;for(let s=0;s<t;s++){n=r=0,i=a=null;for(let c=0;c<t;c++){let t=e.get(s,c);t===i?n++:(n>=5&&(o+=n-5+3),i=t,n=1),(t=e.get(c,s))===a?r++:(r>=5&&(o+=r-5+3),a=t,r=1)}n>=5&&(o+=n-5+3),r>=5&&(o+=r-5+3)}return o},o.getPenaltyN2=function(e){const t=e.size;let o=0;for(let n=0;n<t-1;n++)for(let r=0;r<t-1;r++){const t=e.get(n,r)+e.get(n,r+1)+e.get(n+1,r)+e.get(n+1,r+1);4!==t&&0!==t||o++}return 3*o},o.getPenaltyN3=function(e){const t=e.size;let o=0,n=0,r=0;for(let i=0;i<t;i++){n=r=0;for(let a=0;a<t;a++)n=n<<1&2047|e.get(i,a),a>=10&&(1488===n||93===n)&&o++,r=r<<1&2047|e.get(a,i),a>=10&&(1488===r||93===r)&&o++}return 40*o},o.getPenaltyN4=function(e){let t=0;const o=e.data.length;for(let n=0;n<o;n++)t+=e.data[n];return 10*Math.abs(Math.ceil(100*t/o/5)-10)},o.applyMask=function(e,t){const o=t.size;for(let r=0;r<o;r++)for(let i=0;i<o;i++)t.isReserved(i,r)||t.xor(i,r,n(e,i,r))},o.getBestMask=function(e,t){const n=Object.keys(o.Patterns).length;let r=0,i=1/0;for(let a=0;a<n;a++){t(a),o.applyMask(a,e);const n=o.getPenaltyN1(e)+o.getPenaltyN2(e)+o.getPenaltyN3(e)+o.getPenaltyN4(e);o.applyMask(a,e),n<i&&(i=n,r=a)}return r}},{}],83:[function(e,t,o){const n=e("./version-check"),r=e("./regex");function i(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return o.NUMERIC;case"alphanumeric":return o.ALPHANUMERIC;case"kanji":return o.KANJI;case"byte":return o.BYTE;default:throw new Error("Unknown mode: "+e)}}o.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},o.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},o.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},o.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},o.MIXED={bit:-1},o.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!n.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},o.getBestModeForData=function(e){return r.testNumeric(e)?o.NUMERIC:r.testAlphanumeric(e)?o.ALPHANUMERIC:r.testKanji(e)?o.KANJI:o.BYTE},o.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},o.isValid=function(e){return e&&e.bit&&e.ccBits},o.from=function(e,t){if(o.isValid(e))return e;try{return i(e)}catch(n){return t}}},{"./regex":88,"./version-check":91}],84:[function(e,t){const o=e("./mode");function n(e){this.mode=o.NUMERIC,this.data=e.toString()}n.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){let t,o,n;for(t=0;t+3<=this.data.length;t+=3)o=this.data.substr(t,3),n=parseInt(o,10),e.put(n,10);const r=this.data.length-t;r>0&&(o=this.data.substr(t),n=parseInt(o,10),e.put(n,3*r+1))},t.exports=n},{"./mode":83}],85:[function(e,t,o){const n=e("./galois-field");o.mul=function(e,t){const o=new Uint8Array(e.length+t.length-1);for(let r=0;r<e.length;r++)for(let i=0;i<t.length;i++)o[r+i]^=n.mul(e[r],t[i]);return o},o.mod=function(e,t){let o=new Uint8Array(e);for(;o.length-t.length>=0;){const e=o[0];for(let i=0;i<t.length;i++)o[i]^=n.mul(t[i],e);let r=0;for(;r<o.length&&0===o[r];)r++;o=o.slice(r)}return o},o.generateECPolynomial=function(e){let t=new Uint8Array([1]);for(let r=0;r<e;r++)t=o.mul(t,new Uint8Array([1,n.exp(r)]));return t}},{"./galois-field":80}],86:[function(e,t,o){const n=e("./utils"),r=e("./error-correction-level"),i=e("./bit-buffer"),a=e("./bit-matrix"),s=e("./alignment-pattern"),c=e("./finder-pattern"),l=e("./mask-pattern"),u=e("./error-correction-code"),p=e("./reed-solomon-encoder"),d=e("./version"),f=e("./format-info"),h=e("./mode"),g=e("./segments");function y(e,t){const o=e.size,n=c.getPositions(t);for(let r=0;r<n.length;r++){const t=n[r][0],i=n[r][1];for(let n=-1;n<=7;n++)if(!(t+n<=-1||o<=t+n))for(let r=-1;r<=7;r++)i+r<=-1||o<=i+r||(n>=0&&n<=6&&(0===r||6===r)||r>=0&&r<=6&&(0===n||6===n)||n>=2&&n<=4&&r>=2&&r<=4?e.set(t+n,i+r,!0,!0):e.set(t+n,i+r,!1,!0))}}function m(e){const t=e.size;for(let o=8;o<t-8;o++){const t=o%2==0;e.set(o,6,t,!0),e.set(6,o,t,!0)}}function _(e,t){const o=s.getPositions(t);for(let n=0;n<o.length;n++){const t=o[n][0],r=o[n][1];for(let o=-2;o<=2;o++)for(let n=-2;n<=2;n++)-2===o||2===o||-2===n||2===n||0===o&&0===n?e.set(t+o,r+n,!0,!0):e.set(t+o,r+n,!1,!0)}}function v(e,t){const o=e.size,n=d.getEncodedBits(t);let r,i,a;for(let s=0;s<18;s++)r=Math.floor(s/3),i=s%3+o-8-3,a=1==(n>>s&1),e.set(r,i,a,!0),e.set(i,r,a,!0)}function S(e,t,o){const n=e.size,r=f.getEncodedBits(t,o);let i,a;for(i=0;i<15;i++)a=1==(r>>i&1),i<6?e.set(i,8,a,!0):i<8?e.set(i+1,8,a,!0):e.set(n-15+i,8,a,!0),i<8?e.set(8,n-i-1,a,!0):i<9?e.set(8,15-i-1+1,a,!0):e.set(8,15-i-1,a,!0);e.set(n-8,8,1,!0)}function b(e,t){const o=e.size;let n=-1,r=o-1,i=7,a=0;for(let s=o-1;s>0;s-=2)for(6===s&&s--;;){for(let o=0;o<2;o++)if(!e.isReserved(r,s-o)){let n=!1;a<t.length&&(n=1==(t[a]>>>i&1)),e.set(r,s-o,n),-1==--i&&(a++,i=7)}if((r+=n)<0||o<=r){r-=n,n=-n;break}}}function N(e,t,o){const r=new i;o.forEach(function(t){r.put(t.mode.bit,4),r.put(t.getLength(),h.getCharCountIndicator(t.mode,e)),t.write(r)});const a=8*(n.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t));for(r.getLengthInBits()+4<=a&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);const s=(a-r.getLengthInBits())/8;for(let n=0;n<s;n++)r.put(n%2?17:236,8);return P(r,e,t)}function P(e,t,o){const r=n.getSymbolTotalCodewords(t),i=r-u.getTotalCodewordsCount(t,o),a=u.getBlocksCount(t,o),s=a-r%a,c=Math.floor(r/a),l=Math.floor(i/a),d=l+1,f=c-l,h=new p(f);let g=0;const y=new Array(a),m=new Array(a);let _=0;const v=new Uint8Array(e.buffer);for(let n=0;n<a;n++){const e=n<s?l:d;y[n]=v.slice(g,g+e),m[n]=h.encode(y[n]),g+=e,_=Math.max(_,e)}const S=new Uint8Array(r);let b,N,P=0;for(b=0;b<_;b++)for(N=0;N<a;N++)b<y[N].length&&(S[P++]=y[N][b]);for(b=0;b<f;b++)for(N=0;N<a;N++)S[P++]=m[N][b];return S}function C(e,t,o,r){let i;if(Array.isArray(e))i=g.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let n=t;if(!n){const t=g.rawSplit(e);n=d.getBestVersionForData(t,o)}i=g.fromString(e,n||40)}}const s=d.getBestVersionForData(i,o);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<s)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+s+".\n")}else t=s;const c=N(t,o,i),u=n.getSymbolSize(t),p=new a(u);return y(p,t),m(p),_(p,t),S(p,o,0),t>=7&&v(p,t),b(p,c),isNaN(r)&&(r=l.getBestMask(p,S.bind(null,p,o))),l.applyMask(r,p),S(p,o,r),{modules:p,version:t,errorCorrectionLevel:o,maskPattern:r,segments:i}}o.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let o,i,a=r.M;return void 0!==t&&(a=r.from(t.errorCorrectionLevel,r.M),o=d.from(t.version),i=l.from(t.maskPattern),t.toSJISFunc&&n.setToSJISFunction(t.toSJISFunc)),C(e,o,a,i)}},{"./alignment-pattern":71,"./bit-buffer":73,"./bit-matrix":74,"./error-correction-code":76,"./error-correction-level":77,"./finder-pattern":78,"./format-info":79,"./mask-pattern":82,"./mode":83,"./reed-solomon-encoder":87,"./segments":89,"./utils":90,"./version":92}],87:[function(e,t){const o=e("./polynomial");function n(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}n.prototype.initialize=function(e){this.degree=e,this.genPoly=o.generateECPolynomial(this.degree)},n.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=o.mod(t,this.genPoly),r=this.degree-n.length;if(r>0){const e=new Uint8Array(this.degree);return e.set(n,r),e}return n},t.exports=n},{"./polynomial":85}],88:[function(e,t,o){let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+(n=n.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";o.KANJI=new RegExp(n,"g"),o.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),o.BYTE=new RegExp(r,"g"),o.NUMERIC=new RegExp("[0-9]+","g"),o.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const i=new RegExp("^"+n+"$"),a=new RegExp("^[0-9]+$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");o.testKanji=function(e){return i.test(e)},o.testNumeric=function(e){return a.test(e)},o.testAlphanumeric=function(e){return s.test(e)}},{}],89:[function(e,t,o){const n=e("./mode"),r=e("./numeric-data"),i=e("./alphanumeric-data"),a=e("./byte-data"),s=e("./kanji-data"),c=e("./regex"),l=e("./utils"),u=e("dijkstrajs");function p(e){return unescape(encodeURIComponent(e)).length}function d(e,t,o){const n=[];let r;for(;null!==(r=e.exec(o));)n.push({data:r[0],index:r.index,mode:t,length:r[0].length});return n}function f(e){const t=d(c.NUMERIC,n.NUMERIC,e),o=d(c.ALPHANUMERIC,n.ALPHANUMERIC,e);let r,i;return l.isKanjiModeEnabled()?(r=d(c.BYTE,n.BYTE,e),i=d(c.KANJI,n.KANJI,e)):(r=d(c.BYTE_KANJI,n.BYTE,e),i=[]),t.concat(o,r,i).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function h(e,t){switch(t){case n.NUMERIC:return r.getBitsLength(e);case n.ALPHANUMERIC:return i.getBitsLength(e);case n.KANJI:return s.getBitsLength(e);case n.BYTE:return a.getBitsLength(e)}}function g(e){return e.reduce(function(e,t){const o=e.length-1>=0?e[e.length-1]:null;return o&&o.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}function y(e){const t=[];for(let o=0;o<e.length;o++){const r=e[o];switch(r.mode){case n.NUMERIC:t.push([r,{data:r.data,mode:n.ALPHANUMERIC,length:r.length},{data:r.data,mode:n.BYTE,length:r.length}]);break;case n.ALPHANUMERIC:t.push([r,{data:r.data,mode:n.BYTE,length:r.length}]);break;case n.KANJI:t.push([r,{data:r.data,mode:n.BYTE,length:p(r.data)}]);break;case n.BYTE:t.push([{data:r.data,mode:n.BYTE,length:p(r.data)}])}}return t}function m(e,t){const o={},r={start:{}};let i=["start"];for(let a=0;a<e.length;a++){const s=e[a],c=[];for(let e=0;e<s.length;e++){const l=s[e],u=""+a+e;c.push(u),o[u]={node:l,lastCount:0},r[u]={};for(let e=0;e<i.length;e++){const a=i[e];o[a]&&o[a].node.mode===l.mode?(r[a][u]=h(o[a].lastCount+l.length,l.mode)-h(o[a].lastCount,l.mode),o[a].lastCount+=l.length):(o[a]&&(o[a].lastCount=l.length),r[a][u]=h(l.length,l.mode)+4+n.getCharCountIndicator(l.mode,t))}}i=c}for(let n=0;n<i.length;n++)r[i[n]].end=0;return{map:r,table:o}}function _(e,t){let o;const c=n.getBestModeForData(e);if((o=n.from(t,c))!==n.BYTE&&o.bit<c.bit)throw new Error('"'+e+'" cannot be encoded with mode '+n.toString(o)+".\n Suggested mode is: "+n.toString(c));switch(o!==n.KANJI||l.isKanjiModeEnabled()||(o=n.BYTE),o){case n.NUMERIC:return new r(e);case n.ALPHANUMERIC:return new i(e);case n.KANJI:return new s(e);case n.BYTE:return new a(e)}}o.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(_(t,null)):t.data&&e.push(_(t.data,t.mode)),e},[])},o.fromString=function(e,t){const n=m(y(f(e,l.isKanjiModeEnabled())),t),r=u.find_path(n.map,"start","end"),i=[];for(let o=1;o<r.length-1;o++)i.push(n.table[r[o]].node);return o.fromArray(g(i))},o.rawSplit=function(e){return o.fromArray(f(e,l.isKanjiModeEnabled()))}},{"./alphanumeric-data":72,"./byte-data":75,"./kanji-data":81,"./mode":83,"./numeric-data":84,"./regex":88,"./utils":90,dijkstrajs:54}],90:[function(e,t,o){let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];o.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},o.getSymbolTotalCodewords=function(e){return r[e]},o.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},o.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},o.isKanjiModeEnabled=function(){return void 0!==n},o.toSJIS=function(e){return n(e)}},{}],91:[function(e,t,o){o.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},{}],92:[function(e,t,o){const n=e("./utils"),r=e("./error-correction-code"),i=e("./error-correction-level"),a=e("./mode"),s=e("./version-check"),c=n.getBCHDigit(7973);function l(e,t,n){for(let r=1;r<=40;r++)if(t<=o.getCapacity(r,n,e))return r}function u(e,t){return a.getCharCountIndicator(e,t)+4}function p(e,t){let o=0;return e.forEach(function(e){const n=u(e.mode,t);o+=n+e.getBitsLength()}),o}function d(e,t){for(let n=1;n<=40;n++)if(p(e,n)<=o.getCapacity(n,t,a.MIXED))return n}o.from=function(e,t){return s.isValid(e)?parseInt(e,10):t},o.getCapacity=function(e,t,o){if(!s.isValid(e))throw new Error("Invalid QR Code version");void 0===o&&(o=a.BYTE);const i=8*(n.getSymbolTotalCodewords(e)-r.getTotalCodewordsCount(e,t));if(o===a.MIXED)return i;const c=i-u(o,e);switch(o){case a.NUMERIC:return Math.floor(c/10*3);case a.ALPHANUMERIC:return Math.floor(c/11*2);case a.KANJI:return Math.floor(c/13);case a.BYTE:default:return Math.floor(c/8)}},o.getBestVersionForData=function(e,t){let o;const n=i.from(t,i.M);if(Array.isArray(e)){if(e.length>1)return d(e,n);if(0===e.length)return 1;o=e[0]}else o=e;return l(o.mode,o.getLength(),n)},o.getEncodedBits=function(e){if(!s.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;n.getBCHDigit(t)-c>=0;)t^=7973<<n.getBCHDigit(t)-c;return e<<12|t}},{"./error-correction-code":76,"./error-correction-level":77,"./mode":83,"./utils":90,"./version-check":91}],93:[function(e,t,o){const n=e("./utils");function r(e,t,o){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=o,t.width=o,t.style.height=o+"px",t.style.width=o+"px"}function i(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}o.render=function(e,t,o){let a=o,s=t;void 0!==a||t&&t.getContext||(a=t,t=void 0),t||(s=i()),a=n.getOptions(a);const c=n.getImageWidth(e.modules.size,a),l=s.getContext("2d"),u=l.createImageData(c,c);return n.qrToImageData(u.data,e,a),r(l,s,c),l.putImageData(u,0,0),s},o.renderToDataURL=function(e,t,n){let r=n;void 0!==r||t&&t.getContext||(r=t,t=void 0),r||(r={});const i=o.render(e,t,r),a=r.type||"image/png",s=r.rendererOpts||{};return i.toDataURL(a,s.quality)}},{"./utils":95}],94:[function(e,t,o){const n=e("./utils");function r(e,t){const o=e.a/255,n=t+'="'+e.hex+'"';return o<1?n+" "+t+'-opacity="'+o.toFixed(2).slice(1)+'"':n}function i(e,t,o){let n=e+t;return void 0!==o&&(n+=" "+o),n}function a(e,t,o){let n="",r=0,a=!1,s=0;for(let c=0;c<e.length;c++){const l=Math.floor(c%t),u=Math.floor(c/t);l||a||(a=!0),e[c]?(s++,c>0&&l>0&&e[c-1]||(n+=a?i("M",l+o,.5+u+o):i("m",r,0),r=0,a=!1),l+1<t&&e[c+1]||(n+=i("h",s),s=0)):r++}return n}o.render=function(e,t,o){const i=n.getOptions(t),s=e.modules.size,c=e.modules.data,l=s+2*i.margin,u=i.color.light.a?"<path "+r(i.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",p="<path "+r(i.color.dark,"stroke")+' d="'+a(c,s,i.margin)+'"/>',d='viewBox="0 0 '+l+" "+l+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+u+p+"</svg>\n";return"function"==typeof o&&o(null,f),f}},{"./utils":95}],95:[function(e,t,o){function n(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");const o=parseInt(t.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:255&o,hex:"#"+t.slice(0,6).join("")}}o.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,o=e.width&&e.width>=21?e.width:void 0,r=e.scale||4;return{width:o,scale:o?4:r,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},o.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},o.getImageWidth=function(e,t){const n=o.getScale(e,t);return Math.floor((e+2*t.margin)*n)},o.qrToImageData=function(e,t,n){const r=t.modules.size,i=t.modules.data,a=o.getScale(r,n),s=Math.floor((r+2*n.margin)*a),c=n.margin*a,l=[n.color.light,n.color.dark];for(let o=0;o<s;o++)for(let t=0;t<s;t++){let u=4*(o*s+t),p=n.color.light;o>=c&&t>=c&&o<s-c&&t<s-c&&(p=l[i[Math.floor((o-c)/a)*r+Math.floor((t-c)/a)]?1:0]),e[u++]=p.r,e[u++]=p.g,e[u++]=p.b,e[u]=p.a}}},{}],96:[function(e,t,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.SimpleCrypto=void 0;var r=e("crypto-js"),i=function(){function e(e){if(void 0===e)throw new Error("SimpleCrypto object MUST BE initialised with a SECRET KEY.");this._dataBuffer="",this._encoder=r.enc.Utf8,this._secret=(0,r.SHA3)("string"==typeof e?e:e.toString()),this._keySize=256,this._iterations=100}return e.sanitiseData=function(e){if(null==e)throw new Error("There is no data provided. Process halted.");var t="object"==typeof e?JSON.stringify(e):"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e.toString():null;if(null===t)throw new Error("Invalid data type. Only object, string, number and boolean data types are allowed.");return t},e.transform=function(e){if("true"===e.toLowerCase()||"false"===e.toLowerCase())return"true"===e.toLowerCase();try{return JSON.parse(e)}catch(t){return/^-?[\d.]+(?:e-?\d+)?$/.test(e)&&!isNaN(parseFloat(e))?parseFloat(e):e}},Object.defineProperty(e,"encoders",{get:function(){return n({Default:r.enc.Utf8},r.enc)},enumerable:!1,configurable:!0}),e.generateRandom=function(e,t){void 0===e&&(e=128),void 0===t&&(t=!1);var o=r.lib.WordArray.random(e/8);return t?o:o.toString()},e.generateRandomString=function(t){return void 0===t&&(t=128),e.generateRandom(t,!1)},e.generateRandomWordArray=function(t){return void 0===t&&(t=128),e.generateRandom(t,!0)},e.prototype._decrypt=function(){if(this._dataBuffer.length<=64)throw new Error("Invalid cipher text. Decryption halted.");var t=r.enc.Hex.parse(this._dataBuffer.substr(0,32)),o=r.enc.Hex.parse(this._dataBuffer.substr(32,32)),n=this._dataBuffer.substring(64,this._dataBuffer.length-64),i=(0,r.PBKDF2)(this._secret.toString(),t,{keySize:this._keySize/32,iterations:this._iterations}),a=this._dataBuffer.substring(this._dataBuffer.length-64),s=this._dataBuffer.substring(0,this._dataBuffer.length-64);if(a!=(0,r.HmacSHA256)(s,i).toString())throw new Error("Invalid encrypted text received. Decryption halted.");var c=r.AES.decrypt(n,i,{iv:o,padding:r.pad.Pkcs7,mode:r.mode.CBC});return e.transform(c.toString(e.encoders.Default))},e.prototype._encrypt=function(){var t=e.generateRandom(128,!0),o=e.generateRandom(128,!0),n=(0,r.PBKDF2)(this._secret.toString(),t,{keySize:this._keySize/32,iterations:this._iterations}),i=r.AES.encrypt(this._dataBuffer,n,{iv:o,padding:r.pad.Pkcs7,mode:r.mode.CBC}),a=t.toString()+o.toString()+i.toString();return a+(0,r.HmacSHA256)(a,n).toString()},e.prototype.decrypt=function(e,t,o){var n=this,r=function(e){"boolean"!=typeof e&&n.setEncoder(e)};try{return void 0!==e&&this.update(e),void 0!==t&&r(t),void 0!==o&&r(o),this._decrypt()}catch(i){throw i}},e.prototype.encrypt=function(e){try{return void 0!==e&&this.update(e),this._encrypt()}catch(t){throw t}},e.prototype.decryptObject=function(e){return this.update(e).decrypt()},e.prototype.encryptObject=function(e){return this.update(e).encrypt()},e.prototype.append=function(t){try{return this._dataBuffer=this._dataBuffer+e.sanitiseData(t),this}catch(o){throw o}},e.prototype.update=function(t){try{return this._dataBuffer=e.sanitiseData(t),this}catch(o){throw o}},e.prototype.setEncoder=function(e){return this._encoder=e,this},e.prototype.setSecret=function(e){return this._secret=(0,r.SHA3)("string"==typeof e?e:e.toString()),this},e}();o.SimpleCrypto=i,o.default=i},{"crypto-js":105}],97:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.BlockCipher,n=t.algo,r=[],i=[],a=[],s=[],c=[],l=[],u=[],p=[],d=[],f=[];(function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var o=0,n=0;for(t=0;t<256;t++){var h=n^n<<1^n<<2^n<<3^n<<4;h=h>>>8^255&h^99,r[o]=h,i[h]=o;var g=e[o],y=e[g],m=e[y],_=257*e[h]^16843008*h;a[o]=_<<24|_>>>8,s[o]=_<<16|_>>>16,c[o]=_<<8|_>>>24,l[o]=_,_=16843009*m^65537*y^257*g^16843008*o,u[h]=_<<24|_>>>8,p[h]=_<<16|_>>>16,d[h]=_<<8|_>>>24,f[h]=_,o?(o=g^e[e[e[m^g]]],n^=e[e[n]]):o=n=1}})();var h=[0,1,2,4,8,16,32,64,128,27,54],g=n.AES=o.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,o=e.sigBytes/4,n=4*((this._nRounds=o+6)+1),i=this._keySchedule=[],a=0;a<n;a++)if(a<o)i[a]=t[a];else{var s=i[a-1];a%o?o>6&&a%o==4&&(s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s]):(s=r[(s=s<<8|s>>>24)>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s],s^=h[a/o|0]<<24),i[a]=i[a-o]^s}for(var c=this._invKeySchedule=[],l=0;l<n;l++)a=n-l,s=l%4?i[a]:i[a-4],c[l]=l<4||a<=4?s:u[r[s>>>24]]^p[r[s>>>16&255]]^d[r[s>>>8&255]]^f[r[255&s]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,c,l,r)},decryptBlock:function(e,t){var o=e[t+1];e[t+1]=e[t+3],e[t+3]=o,this._doCryptBlock(e,t,this._invKeySchedule,u,p,d,f,i),o=e[t+1],e[t+1]=e[t+3],e[t+3]=o},_doCryptBlock:function(e,t,o,n,r,i,a,s){for(var c=this._nRounds,l=e[t]^o[0],u=e[t+1]^o[1],p=e[t+2]^o[2],d=e[t+3]^o[3],f=4,h=1;h<c;h++){var g=n[l>>>24]^r[u>>>16&255]^i[p>>>8&255]^a[255&d]^o[f++],y=n[u>>>24]^r[p>>>16&255]^i[d>>>8&255]^a[255&l]^o[f++],m=n[p>>>24]^r[d>>>16&255]^i[l>>>8&255]^a[255&u]^o[f++],_=n[d>>>24]^r[l>>>16&255]^i[u>>>8&255]^a[255&p]^o[f++];l=g,u=y,p=m,d=_}g=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[p>>>8&255]<<8|s[255&d])^o[f++],y=(s[u>>>24]<<24|s[p>>>16&255]<<16|s[d>>>8&255]<<8|s[255&l])^o[f++],m=(s[p>>>24]<<24|s[d>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^o[f++],_=(s[d>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&p])^o[f++],e[t]=g,e[t+1]=y,e[t+2]=m,e[t+3]=_},keySize:8});t.AES=o._createHelper(g)}(),e.AES},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":98,"./core":99,"./enc-base64":100,"./evpkdf":102,"./md5":107}],98:[function(e,t,o){var n;n=function(e){e.lib.Cipher||function(t){var o=e,n=o.lib,r=n.Base,i=n.WordArray,a=n.BufferedBlockAlgorithm,s=o.enc,c=(s.Utf8,s.Base64),l=o.algo.EvpKDF,u=n.Cipher=a.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,o){this.cfg=this.cfg.extend(o),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:m}return function(t){return{encrypt:function(o,n,r){return e(n).encrypt(t,o,n,r)},decrypt:function(o,n,r){return e(n).decrypt(t,o,n,r)}}}}()}),p=(n.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),o.mode={}),d=n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=p.CBC=function(){var e=d.extend();function o(e,o,n){var r=this._iv;if(r){var i=r;this._iv=t}else i=this._prevBlock;for(var a=0;a<n;a++)e[o+a]^=i[a]}return e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;o.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),e.Decryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),o.call(this,e,t,r),this._prevBlock=i}}),e}(),h=(o.pad={}).Pkcs7={pad:function(e,t){for(var o=4*t,n=o-e.sigBytes%o,r=n<<24|n<<16|n<<8|n,a=[],s=0;s<n;s+=4)a.push(r);var c=i.create(a,n);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},g=(n.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:h}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv,o=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=o.createEncryptor;else n=o.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==n?this._mode.init(this,t&&t.words):(this._mode=n.call(o,this,t&&t.words),this._mode.__creator=n)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),y=(o.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,o=e.salt;if(o)var n=i.create([1398893684,1701076831]).concat(o).concat(t);else n=t;return n.toString(c)},parse:function(e){var t=c.parse(e),o=t.words;if(1398893684==o[0]&&1701076831==o[1]){var n=i.create(o.slice(2,4));o.splice(0,4),t.sigBytes-=16}return g.create({ciphertext:t,salt:n})}},m=n.SerializableCipher=r.extend({cfg:r.extend({format:y}),encrypt:function(e,t,o,n){n=this.cfg.extend(n);var r=e.createEncryptor(o,n),i=r.finalize(t),a=r.cfg;return g.create({ciphertext:i,key:o,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,o,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(o,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),_=(o.kdf={}).OpenSSL={execute:function(e,t,o,n){n||(n=i.random(8));var r=l.create({keySize:t+o}).compute(e,n),a=i.create(r.words.slice(t),4*o);return r.sigBytes=4*t,g.create({key:r,iv:a,salt:n})}},v=n.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:_}),encrypt:function(e,t,o,n){var r=(n=this.cfg.extend(n)).kdf.execute(o,e.keySize,e.ivSize);n.iv=r.iv;var i=m.encrypt.call(this,e,t,r.key,n);return i.mixIn(r),i},decrypt:function(e,t,o,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var r=n.kdf.execute(o,e.keySize,e.ivSize,t.salt);return n.iv=r.iv,m.decrypt.call(this,e,t,r.key,n)}})}()},"object"==typeof o?t.exports=o=n(e("./core"),e("./evpkdf")):"function"==typeof define&&define.amd?define(["./core","./evpkdf"],n):n(this.CryptoJS)},{"./core":99,"./evpkdf":102}],99:[function(e,t,o){var n;n=function(){var e=e||function(e){var t=Object.create||function(){function e(){}return function(t){var o;return e.prototype=t,o=new e,e.prototype=null,o}}(),o={},n=o.lib={},r=n.Base={extend:function(e){var o=t(this);return e&&o.mixIn(e),o.hasOwnProperty("init")&&this.init!==o.init||(o.init=function(){o.$super.init.apply(this,arguments)}),o.init.prototype=o,o.$super=this,o},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},i=n.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,o=e.words,n=this.sigBytes,r=e.sigBytes;if(this.clamp(),n%4)for(var i=0;i<r;i++){var a=o[i>>>2]>>>24-i%4*8&255;t[n+i>>>2]|=a<<24-(n+i)%4*8}else for(i=0;i<r;i+=4)t[n+i>>>2]=o[i>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,o=this.sigBytes;t[o>>>2]&=4294967295<<32-o%4*8,t.length=e.ceil(o/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var o,n=[],r=function(t){t=t;var o=987654321,n=4294967295;return function(){var r=((o=36969*(65535&o)+(o>>16)&n)<<16)+(t=18e3*(65535&t)+(t>>16)&n)&n;return r/=4294967296,(r+=.5)*(e.random()>.5?1:-1)}},a=0;a<t;a+=4){var s=r(4294967296*(o||e.random()));o=987654071*s(),n.push(4294967296*s()|0)}return new i.init(n,t)}}),a=o.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],r=0;r<o;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,o=[],n=0;n<t;n+=2)o[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new i.init(o,t/2)}},c=a.Latin1={stringify:function(e){for(var t=e.words,o=e.sigBytes,n=[],r=0;r<o;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push(String.fromCharCode(i))}return n.join("")},parse:function(e){for(var t=e.length,o=[],n=0;n<t;n++)o[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new i.init(o,t)}},l=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},u=n.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var o=this._data,n=o.words,r=o.sigBytes,a=this.blockSize,s=r/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,l=e.min(4*c,r);if(c){for(var u=0;u<c;u+=a)this._doProcessBlock(n,u);var p=n.splice(0,c);o.sigBytes-=l}return new i.init(p,l)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(n.Hasher=u.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,o){return new e.init(o).finalize(t)}},_createHmacHelper:function(e){return function(t,o){return new p.HMAC.init(e,o).finalize(t)}}}),o.algo={});return o}(Math);return e},"object"==typeof o?t.exports=o=n():"function"==typeof define&&define.amd?define([],n):this.CryptoJS=n()},{}],100:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.WordArray;function n(e,t,n){for(var r=[],i=0,a=0;a<t;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2,c=n[e.charCodeAt(a)]>>>6-a%4*2;r[i>>>2]|=(s|c)<<24-i%4*8,i++}return o.create(r,i)}t.enc.Base64={stringify:function(e){var t=e.words,o=e.sigBytes,n=this._map;e.clamp();for(var r=[],i=0;i<o;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<o;s++)r.push(n.charAt(a>>>6*(3-s)&63));var c=n.charAt(64);if(c)for(;r.length%4;)r.push(c);return r.join("")},parse:function(e){var t=e.length,o=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<o.length;i++)r[o.charCodeAt(i)]=i}var a=o.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return n(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64},"object"==typeof o?t.exports=o=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(this.CryptoJS)},{"./core":99}],101:[function(e,t,o){arguments[4][24][0].apply(o,arguments)},{"./core":99,dup:24}],102:[function(e,t,o){var n;n=function(e){var t,o,n,r,i,a,s;return n=(o=(t=e).lib).Base,r=o.WordArray,a=(i=t.algo).MD5,s=i.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var o=this.cfg,n=o.hasher.create(),i=r.create(),a=i.words,s=o.keySize,c=o.iterations;a.length<s;){l&&n.update(l);var l=n.update(e).finalize(t);n.reset();for(var u=1;u<c;u++)l=n.finalize(l),n.reset();i.concat(l)}return i.sigBytes=4*s,i}}),t.EvpKDF=function(e,t,o){return s.create(o).compute(e,t)},e.EvpKDF},"object"==typeof o?t.exports=o=n(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],n):n(this.CryptoJS)},{"./core":99,"./hmac":104,"./sha1":123}],103:[function(e,t,o){arguments[4][26][0].apply(o,arguments)},{"./cipher-core":98,"./core":99,dup:26}],104:[function(e,t,o){arguments[4][27][0].apply(o,arguments)},{"./core":99,dup:27}],105:[function(e,t,o){var n;n=function(e){return e},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core"),e("./lib-typedarrays"),e("./enc-utf16"),e("./enc-base64"),e("./md5"),e("./sha1"),e("./sha256"),e("./sha224"),e("./sha512"),e("./sha384"),e("./sha3"),e("./ripemd160"),e("./hmac"),e("./pbkdf2"),e("./evpkdf"),e("./cipher-core"),e("./mode-cfb"),e("./mode-ctr"),e("./mode-ctr-gladman"),e("./mode-ofb"),e("./mode-ecb"),e("./pad-ansix923"),e("./pad-iso10126"),e("./pad-iso97971"),e("./pad-zeropadding"),e("./pad-nopadding"),e("./format-hex"),e("./aes"),e("./tripledes"),e("./rc4"),e("./rabbit"),e("./rabbit-legacy")):"function"==typeof define&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy"],n):this.CryptoJS=n(this.CryptoJS)},{"./aes":97,"./cipher-core":98,"./core":99,"./enc-base64":100,"./enc-utf16":101,"./evpkdf":102,"./format-hex":103,"./hmac":104,"./lib-typedarrays":106,"./md5":107,"./mode-cfb":108,"./mode-ctr":110,"./mode-ctr-gladman":109,"./mode-ecb":111,"./mode-ofb":112,"./pad-ansix923":113,"./pad-iso10126":114,"./pad-iso97971":115,"./pad-nopadding":116,"./pad-zeropadding":117,"./pbkdf2":118,"./rabbit":120,"./rabbit-legacy":119,"./rc4":121,"./ripemd160":122,"./sha1":123,"./sha224":124,"./sha256":125,"./sha3":126,"./sha384":127,"./sha512":128,"./tripledes":129,"./x64-core":130}],106:[function(e,t,o){arguments[4][29][0].apply(o,arguments)},{"./core":99,dup:29}],107:[function(e,t,o){arguments[4][30][0].apply(o,arguments)},{"./core":99,dup:30}],108:[function(e,t,o){var n;n=function(e){return e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function o(e,t,o,n){var r=this._iv;if(r){var i=r.slice(0);this._iv=void 0}else i=this._prevBlock;n.encryptBlock(i,0);for(var a=0;a<o;a++)e[t+a]^=i[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;o.call(this,e,t,r,n),this._prevBlock=e.slice(t,t+r)}}),t.Decryptor=t.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);o.call(this,e,t,r,n),this._prevBlock=i}}),t}(),e.mode.CFB},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":98,"./core":99}],109:[function(e,t,o){arguments[4][32][0].apply(o,arguments)},{"./cipher-core":98,"./core":99,dup:32}],110:[function(e,t,o){arguments[4][33][0].apply(o,arguments)},{"./cipher-core":98,"./core":99,dup:33}],111:[function(e,t,o){arguments[4][34][0].apply(o,arguments)},{"./cipher-core":98,"./core":99,dup:34}],112:[function(e,t,o){arguments[4][35][0].apply(o,arguments)},{"./cipher-core":98,"./core":99,dup:35}],113:[function(e,t,o){arguments[4][36][0].apply(o,arguments)},{"./cipher-core":98,"./core":99,dup:36}],114:[function(e,t,o){arguments[4][37][0].apply(o,arguments)},{"./cipher-core":98,"./core":99,dup:37}],115:[function(e,t,o){arguments[4][38][0].apply(o,arguments)},{"./cipher-core":98,"./core":99,dup:38}],116:[function(e,t,o){arguments[4][39][0].apply(o,arguments)},{"./cipher-core":98,"./core":99,dup:39}],117:[function(e,t,o){var n;n=function(e){return e.pad.ZeroPadding={pad:function(e,t){var o=4*t;e.clamp(),e.sigBytes+=o-(e.sigBytes%o||o)},unpad:function(e){for(var t=e.words,o=e.sigBytes-1;!(t[o>>>2]>>>24-o%4*8&255);)o--;e.sigBytes=o+1}},e.pad.ZeroPadding},"object"==typeof o?t.exports=o=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":98,"./core":99}],118:[function(e,t,o){arguments[4][41][0].apply(o,arguments)},{"./core":99,"./hmac":104,"./sha1":123,dup:41}],119:[function(e,t,o){arguments[4][42][0].apply(o,arguments)},{"./cipher-core":98,"./core":99,"./enc-base64":100,"./evpkdf":102,"./md5":107,dup:42}],120:[function(e,t,o){arguments[4][43][0].apply(o,arguments)},{"./cipher-core":98,"./core":99,"./enc-base64":100,"./evpkdf":102,"./md5":107,dup:43}],121:[function(e,t,o){arguments[4][44][0].apply(o,arguments)},{"./cipher-core":98,"./core":99,"./enc-base64":100,"./evpkdf":102,"./md5":107,dup:44}],122:[function(e,t,o){arguments[4][45][0].apply(o,arguments)},{"./core":99,dup:45}],123:[function(e,t,o){arguments[4][46][0].apply(o,arguments)},{"./core":99,dup:46}],124:[function(e,t,o){arguments[4][47][0].apply(o,arguments)},{"./core":99,"./sha256":125,dup:47}],125:[function(e,t,o){arguments[4][48][0].apply(o,arguments)},{"./core":99,dup:48}],126:[function(e,t,o){var n;n=function(e){return function(t){var o=e,n=o.lib,r=n.WordArray,i=n.Hasher,a=o.x64.Word,s=o.algo,c=[],l=[],u=[];(function(){for(var e=1,t=0,o=0;o<24;o++){c[e+5*t]=(o+1)*(o+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var r=1,i=0;i<24;i++){for(var s=0,p=0,d=0;d<7;d++){if(1&r){var f=(1<<d)-1;f<32?p^=1<<f:s^=1<<f-32}128&r?r=r<<1^113:r<<=1}u[i]=a.create(s,p)}})();var p=[];(function(){for(var e=0;e<25;e++)p[e]=a.create()})();var d=s.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var o=this._state,n=this.blockSize/2,r=0;r<n;r++){var i=e[t+2*r],a=e[t+2*r+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(R=o[r]).high^=a,R.low^=i}for(var s=0;s<24;s++){for(var d=0;d<5;d++){for(var f=0,h=0,g=0;g<5;g++)f^=(R=o[d+5*g]).high,h^=R.low;var y=p[d];y.high=f,y.low=h}for(d=0;d<5;d++){var m=p[(d+4)%5],_=p[(d+1)%5],v=_.high,S=_.low;for(f=m.high^(v<<1|S>>>31),h=m.low^(S<<1|v>>>31),g=0;g<5;g++)(R=o[d+5*g]).high^=f,R.low^=h}for(var b=1;b<25;b++){var N=(R=o[b]).high,P=R.low,C=c[b];C<32?(f=N<<C|P>>>32-C,h=P<<C|N>>>32-C):(f=P<<C-32|N>>>64-C,h=N<<C-32|P>>>64-C);var w=p[l[b]];w.high=f,w.low=h}var T=p[0],I=o[0];for(T.high=I.high,T.low=I.low,d=0;d<5;d++)for(g=0;g<5;g++){var R=o[b=d+5*g],O=p[b],E=p[(d+1)%5+5*g],k=p[(d+2)%5+5*g];R.high=O.high^~E.high&k.high,R.low=O.low^~E.low&k.low}R=o[0];var A=u[s];R.high^=A.high,R.low^=A.low}},_doFinalize:function(){var e=this._data,o=e.words,n=(this._nDataBytes,8*e.sigBytes),i=32*this.blockSize;o[n>>>5]|=1<<24-n%32,o[(t.ceil((n+1)/i)*i>>>5)-1]|=128,e.sigBytes=4*o.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,c=s/8,l=[],u=0;u<c;u++){var p=a[u],d=p.high,f=p.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),l.push(f),l.push(d)}return new r.init(l,s)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),o=0;o<25;o++)t[o]=t[o].clone();return e}});o.SHA3=i._createHelper(d),o.HmacSHA3=i._createHmacHelper(d)}(Math),e.SHA3},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],n):n(this.CryptoJS)},{"./core":99,"./x64-core":130}],127:[function(e,t,o){arguments[4][50][0].apply(o,arguments)},{"./core":99,"./sha512":128,"./x64-core":130,dup:50}],128:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib.Hasher,n=t.x64,r=n.Word,i=n.WordArray,a=t.algo;function s(){return r.create.apply(r,arguments)}var c=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],l=[];(function(){for(var e=0;e<80;e++)l[e]=s()})();var u=a.SHA512=o.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var o=this._hash.words,n=o[0],r=o[1],i=o[2],a=o[3],s=o[4],u=o[5],p=o[6],d=o[7],f=n.high,h=n.low,g=r.high,y=r.low,m=i.high,_=i.low,v=a.high,S=a.low,b=s.high,N=s.low,P=u.high,C=u.low,w=p.high,T=p.low,I=d.high,R=d.low,O=f,E=h,k=g,A=y,B=m,D=_,M=v,L=S,F=b,G=N,U=P,j=C,x=w,z=T,H=I,W=R,V=0;V<80;V++){var Y=l[V];if(V<16)var K=Y.high=0|e[t+2*V],q=Y.low=0|e[t+2*V+1];else{var X=l[V-15],J=X.high,Q=X.low,Z=(J>>>1|Q<<31)^(J>>>8|Q<<24)^J>>>7,$=(Q>>>1|J<<31)^(Q>>>8|J<<24)^(Q>>>7|J<<25),ee=l[V-2],te=ee.high,oe=ee.low,ne=(te>>>19|oe<<13)^(te<<3|oe>>>29)^te>>>6,re=(oe>>>19|te<<13)^(oe<<3|te>>>29)^(oe>>>6|te<<26),ie=l[V-7],ae=ie.high,se=ie.low,ce=l[V-16],le=ce.high,ue=ce.low;K=(K=(K=Z+ae+((q=$+se)>>>0<$>>>0?1:0))+ne+((q+=re)>>>0<re>>>0?1:0))+le+((q+=ue)>>>0<ue>>>0?1:0),Y.high=K,Y.low=q}var pe,de=F&U^~F&x,fe=G&j^~G&z,he=O&k^O&B^k&B,ge=E&A^E&D^A&D,ye=(O>>>28|E<<4)^(O<<30|E>>>2)^(O<<25|E>>>7),me=(E>>>28|O<<4)^(E<<30|O>>>2)^(E<<25|O>>>7),_e=(F>>>14|G<<18)^(F>>>18|G<<14)^(F<<23|G>>>9),ve=(G>>>14|F<<18)^(G>>>18|F<<14)^(G<<23|F>>>9),Se=c[V],be=Se.high,Ne=Se.low,Pe=H+_e+((pe=W+ve)>>>0<W>>>0?1:0),Ce=me+ge;H=x,W=z,x=U,z=j,U=F,j=G,F=M+(Pe=(Pe=(Pe=Pe+de+((pe+=fe)>>>0<fe>>>0?1:0))+be+((pe+=Ne)>>>0<Ne>>>0?1:0))+K+((pe+=q)>>>0<q>>>0?1:0))+((G=L+pe|0)>>>0<L>>>0?1:0)|0,M=B,L=D,B=k,D=A,k=O,A=E,O=Pe+(ye+he+(Ce>>>0<me>>>0?1:0))+((E=pe+Ce|0)>>>0<pe>>>0?1:0)|0}h=n.low=h+E,n.high=f+O+(h>>>0<E>>>0?1:0),y=r.low=y+A,r.high=g+k+(y>>>0<A>>>0?1:0),_=i.low=_+D,i.high=m+B+(_>>>0<D>>>0?1:0),S=a.low=S+L,a.high=v+M+(S>>>0<L>>>0?1:0),N=s.low=N+G,s.high=b+F+(N>>>0<G>>>0?1:0),C=u.low=C+j,u.high=P+U+(C>>>0<j>>>0?1:0),T=p.low=T+z,p.high=w+x+(T>>>0<z>>>0?1:0),R=d.low=R+W,d.high=I+H+(R>>>0<W>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(o/4294967296),t[31+(n+128>>>10<<5)]=o,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=o._createHelper(u),t.HmacSHA512=o._createHmacHelper(u)}(),e.SHA512},"object"==typeof o?t.exports=o=n(e("./core"),e("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],n):n(this.CryptoJS)},{"./core":99,"./x64-core":130}],129:[function(e,t,o){var n;n=function(e){return function(){var t=e,o=t.lib,n=o.WordArray,r=o.BlockCipher,i=t.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=i.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],o=0;o<56;o++){var n=a[o]-1;t[o]=e[n>>>5]>>>31-n%32&1}for(var r=this._subKeys=[],i=0;i<16;i++){var l=r[i]=[],u=c[i];for(o=0;o<24;o++)l[o/6|0]|=t[(s[o]-1+u)%28]<<31-o%6,l[4+(o/6|0)]|=t[28+(s[o+24]-1+u)%28]<<31-o%6;for(l[0]=l[0]<<1|l[0]>>>31,o=1;o<7;o++)l[o]=l[o]>>>4*(o-1)+3;l[7]=l[7]<<5|l[7]>>>27}var p=this._invSubKeys=[];for(o=0;o<16;o++)p[o]=r[15-o]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,o){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),d.call(this,1,1431655765);for(var n=0;n<16;n++){for(var r=o[n],i=this._lBlock,a=this._rBlock,s=0,c=0;c<8;c++)s|=l[c][((a^r[c])&u[c])>>>0];this._lBlock=a,this._rBlock=i^s}var p=this._lBlock;this._lBlock=this._rBlock,this._rBlock=p,d.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var o=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=o,this._lBlock^=o<<e}function f(e,t){var o=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=o,this._rBlock^=o<<e}t.DES=r._createHelper(p);var h=i.TripleDES=r.extend({_doReset:function(){var e=this._key.words;this._des1=p.createEncryptor(n.create(e.slice(0,2))),this._des2=p.createEncryptor(n.create(e.slice(2,4))),this._des3=p.createEncryptor(n.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=r._createHelper(h)}(),e.TripleDES},"object"==typeof o?t.exports=o=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(this.CryptoJS)},{"./cipher-core":98,"./core":99,"./enc-base64":100,"./evpkdf":102,"./md5":107}],130:[function(e,t,o){arguments[4][53][0].apply(o,arguments)},{"./core":99,dup:53}],131:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(o,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(o,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(o,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(o,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(o,"version",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(o,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(o,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(o,"parse",{enumerable:!0,get:function(){return p.default}});var n=d(e("./v1.js")),r=d(e("./v3.js")),i=d(e("./v4.js")),a=d(e("./v5.js")),s=d(e("./nil.js")),c=d(e("./version.js")),l=d(e("./validate.js")),u=d(e("./stringify.js")),p=d(e("./parse.js"));function d(e){return e&&e.__esModule?e:{default:e}}},{"./nil.js":133,"./parse.js":134,"./stringify.js":138,"./v1.js":139,"./v3.js":140,"./v4.js":142,"./v5.js":143,"./validate.js":144,"./version.js":145}],132:[function(e,t,o){"use strict";function n(e){const t=[],o=32*e.length;for(let n=0;n<o;n+=8){const o=e[n>>5]>>>n%32&255,r=parseInt("0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o),16);t.push(r)}return t}function r(e){return 15+(e+64>>>9<<4)}function i(e,t){e[t>>5]|=128<<t%32,e[r(t)-1]=t;let o=1732584193,n=-271733879,i=-1732584194,a=271733878;for(let r=0;r<e.length;r+=16){const t=o,c=n,f=i,h=a;o=l(o,n,i,a,e[r],7,-680876936),a=l(a,o,n,i,e[r+1],12,-389564586),i=l(i,a,o,n,e[r+2],17,606105819),n=l(n,i,a,o,e[r+3],22,-1044525330),o=l(o,n,i,a,e[r+4],7,-176418897),a=l(a,o,n,i,e[r+5],12,1200080426),i=l(i,a,o,n,e[r+6],17,-1473231341),n=l(n,i,a,o,e[r+7],22,-45705983),o=l(o,n,i,a,e[r+8],7,1770035416),a=l(a,o,n,i,e[r+9],12,-1958414417),i=l(i,a,o,n,e[r+10],17,-42063),n=l(n,i,a,o,e[r+11],22,-1990404162),o=l(o,n,i,a,e[r+12],7,1804603682),a=l(a,o,n,i,e[r+13],12,-40341101),i=l(i,a,o,n,e[r+14],17,-1502002290),o=u(o,n=l(n,i,a,o,e[r+15],22,1236535329),i,a,e[r+1],5,-165796510),a=u(a,o,n,i,e[r+6],9,-1069501632),i=u(i,a,o,n,e[r+11],14,643717713),n=u(n,i,a,o,e[r],20,-373897302),o=u(o,n,i,a,e[r+5],5,-701558691),a=u(a,o,n,i,e[r+10],9,38016083),i=u(i,a,o,n,e[r+15],14,-660478335),n=u(n,i,a,o,e[r+4],20,-405537848),o=u(o,n,i,a,e[r+9],5,568446438),a=u(a,o,n,i,e[r+14],9,-1019803690),i=u(i,a,o,n,e[r+3],14,-187363961),n=u(n,i,a,o,e[r+8],20,1163531501),o=u(o,n,i,a,e[r+13],5,-1444681467),a=u(a,o,n,i,e[r+2],9,-51403784),i=u(i,a,o,n,e[r+7],14,1735328473),o=p(o,n=u(n,i,a,o,e[r+12],20,-1926607734),i,a,e[r+5],4,-378558),a=p(a,o,n,i,e[r+8],11,-2022574463),i=p(i,a,o,n,e[r+11],16,1839030562),n=p(n,i,a,o,e[r+14],23,-35309556),o=p(o,n,i,a,e[r+1],4,-1530992060),a=p(a,o,n,i,e[r+4],11,1272893353),i=p(i,a,o,n,e[r+7],16,-155497632),n=p(n,i,a,o,e[r+10],23,-1094730640),o=p(o,n,i,a,e[r+13],4,681279174),a=p(a,o,n,i,e[r],11,-358537222),i=p(i,a,o,n,e[r+3],16,-722521979),n=p(n,i,a,o,e[r+6],23,76029189),o=p(o,n,i,a,e[r+9],4,-640364487),a=p(a,o,n,i,e[r+12],11,-421815835),i=p(i,a,o,n,e[r+15],16,530742520),o=d(o,n=p(n,i,a,o,e[r+2],23,-995338651),i,a,e[r],6,-198630844),a=d(a,o,n,i,e[r+7],10,1126891415),i=d(i,a,o,n,e[r+14],15,-1416354905),n=d(n,i,a,o,e[r+5],21,-57434055),o=d(o,n,i,a,e[r+12],6,1700485571),a=d(a,o,n,i,e[r+3],10,-1894986606),i=d(i,a,o,n,e[r+10],15,-1051523),n=d(n,i,a,o,e[r+1],21,-2054922799),o=d(o,n,i,a,e[r+8],6,1873313359),a=d(a,o,n,i,e[r+15],10,-30611744),i=d(i,a,o,n,e[r+6],15,-1560198380),n=d(n,i,a,o,e[r+13],21,1309151649),o=d(o,n,i,a,e[r+4],6,-145523070),a=d(a,o,n,i,e[r+11],10,-1120210379),i=d(i,a,o,n,e[r+2],15,718787259),n=d(n,i,a,o,e[r+9],21,-343485551),o=s(o,t),n=s(n,c),i=s(i,f),a=s(a,h)}return[o,n,i,a]}function a(e){if(0===e.length)return[];const t=8*e.length,o=new Uint32Array(r(t));for(let n=0;n<t;n+=8)o[n>>5]|=(255&e[n/8])<<n%32;return o}function s(e,t){const o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o}function c(e,t,o,n,r,i){return s((a=s(s(t,e),s(n,i)))<<(c=r)|a>>>32-c,o);var a,c}function l(e,t,o,n,r,i,a){return c(t&o|~t&n,e,t,r,i,a)}function u(e,t,o,n,r,i,a){return c(t&n|o&~n,e,t,r,i,a)}function p(e,t,o,n,r,i,a){return c(t^o^n,e,t,r,i,a)}function d(e,t,o,n,r,i,a){return c(o^(t|~n),e,t,r,i,a)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;o.default=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let o=0;o<t.length;++o)e[o]=t.charCodeAt(o)}return n(i(a(e),8*e.length))}},{}],133:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.default="00000000-0000-0000-0000-000000000000"},{}],134:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n,r=(n=e("./validate.js"))&&n.__esModule?n:{default:n};o.default=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");let t;const o=new Uint8Array(16);return o[0]=(t=parseInt(e.slice(0,8),16))>>>24,o[1]=t>>>16&255,o[2]=t>>>8&255,o[3]=255&t,o[4]=(t=parseInt(e.slice(9,13),16))>>>8,o[5]=255&t,o[6]=(t=parseInt(e.slice(14,18),16))>>>8,o[7]=255&t,o[8]=(t=parseInt(e.slice(19,23),16))>>>8,o[9]=255&t,o[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,o[11]=t/4294967296&255,o[12]=t>>>24&255,o[13]=t>>>16&255,o[14]=t>>>8&255,o[15]=255&t,o}},{"./validate.js":144}],135:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],136:[function(e,t,o){"use strict";let n;Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};const r=new Uint8Array(16)},{}],137:[function(e,t,o){"use strict";function n(e,t,o,n){switch(e){case 0:return t&o^~t&n;case 1:return t^o^n;case 2:return t&o^t&n^o&n;case 3:return t^o^n}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;o.default=function(e){const t=[1518500249,1859775393,2400959708,3395469782],o=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let o=0;o<t.length;++o)e.push(t.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,a=Math.ceil(i/16),s=new Array(a);for(let n=0;n<a;++n){const t=new Uint32Array(16);for(let o=0;o<16;++o)t[o]=e[64*n+4*o]<<24|e[64*n+4*o+1]<<16|e[64*n+4*o+2]<<8|e[64*n+4*o+3];s[n]=t}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(let c=0;c<a;++c){const e=new Uint32Array(80);for(let t=0;t<16;++t)e[t]=s[c][t];for(let t=16;t<80;++t)e[t]=r(e[t-3]^e[t-8]^e[t-14]^e[t-16],1);let i=o[0],a=o[1],l=o[2],u=o[3],p=o[4];for(let o=0;o<80;++o){const s=Math.floor(o/20),c=r(i,5)+n(s,a,l,u)+p+t[s]+e[o]>>>0;p=u,u=l,l=r(a,30)>>>0,a=i,i=c}o[0]=o[0]+i>>>0,o[1]=o[1]+a>>>0,o[2]=o[2]+l>>>0,o[3]=o[3]+u>>>0,o[4]=o[4]+p>>>0}return[o[0]>>24&255,o[0]>>16&255,o[0]>>8&255,255&o[0],o[1]>>24&255,o[1]>>16&255,o[1]>>8&255,255&o[1],o[2]>>24&255,o[2]>>16&255,o[2]>>8&255,255&o[2],o[3]>>24&255,o[3]>>16&255,o[3]>>8&255,255&o[3],o[4]>>24&255,o[4]>>16&255,o[4]>>8&255,255&o[4]]}},{}],138:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n,r=(n=e("./validate.js"))&&n.__esModule?n:{default:n};const i=[];for(let a=0;a<256;++a)i.push((a+256).toString(16).substr(1));o.default=function(e,t=0){const o=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!(0,r.default)(o))throw TypeError("Stringified UUID is invalid");return o}},{"./validate.js":144}],139:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=i(e("./rng.js")),r=i(e("./stringify.js"));function i(e){return e&&e.__esModule?e:{default:e}}let a,s,c=0,l=0;o.default=function(e,t,o){let i=t&&o||0;const u=t||new Array(16);let p=(e=e||{}).node||a,d=void 0!==e.clockseq?e.clockseq:s;if(null==p||null==d){const t=e.random||(e.rng||n.default)();null==p&&(p=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==d&&(d=s=16383&(t[6]<<8|t[7]))}let f=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:l+1;const g=f-c+(h-l)/1e4;if(g<0&&void 0===e.clockseq&&(d=d+1&16383),(g<0||f>c)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,l=h,s=d;const y=(1e4*(268435455&(f+=122192928e5))+h)%4294967296;u[i++]=y>>>24&255,u[i++]=y>>>16&255,u[i++]=y>>>8&255,u[i++]=255&y;const m=f/4294967296*1e4&268435455;u[i++]=m>>>8&255,u[i++]=255&m,u[i++]=m>>>24&15|16,u[i++]=m>>>16&255,u[i++]=d>>>8|128,u[i++]=255&d;for(let n=0;n<6;++n)u[i+n]=p[n];return t||(0,r.default)(u)}},{"./rng.js":136,"./stringify.js":138}],140:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=i(e("./v35.js")),r=i(e("./md5.js"));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v3",48,r.default);o.default=a},{"./md5.js":132,"./v35.js":141}],141:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,t,o){function i(e,i,s,c){if("string"==typeof e&&(e=a(e)),"string"==typeof i&&(i=(0,r.default)(i)),16!==i.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(i),l.set(e,i.length),(l=o(l))[6]=15&l[6]|t,l[8]=63&l[8]|128,s){c=c||0;for(let e=0;e<16;++e)s[c+e]=l[e];return s}return(0,n.default)(l)}try{i.name=e}catch(l){}return i.DNS=s,i.URL=c,i},o.URL=o.DNS=void 0;var n=i(e("./stringify.js")),r=i(e("./parse.js"));function i(e){return e&&e.__esModule?e:{default:e}}function a(e){e=unescape(encodeURIComponent(e));const t=[];for(let o=0;o<e.length;++o)t.push(e.charCodeAt(o));return t}const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";o.DNS=s;const c="6ba7b811-9dad-11d1-80b4-00c04fd430c8";o.URL=c},{"./parse.js":134,"./stringify.js":138}],142:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=i(e("./rng.js")),r=i(e("./stringify.js"));function i(e){return e&&e.__esModule?e:{default:e}}o.default=function(e,t,o){const i=(e=e||{}).random||(e.rng||n.default)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){o=o||0;for(let e=0;e<16;++e)t[o+e]=i[e];return t}return(0,r.default)(i)}},{"./rng.js":136,"./stringify.js":138}],143:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=i(e("./v35.js")),r=i(e("./sha1.js"));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,n.default)("v5",80,r.default);o.default=a},{"./sha1.js":137,"./v35.js":141}],144:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n,r=(n=e("./regex.js"))&&n.__esModule?n:{default:n};o.default=function(e){return"string"==typeof e&&r.default.test(e)}},{"./regex.js":135}],145:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n,r=(n=e("./validate.js"))&&n.__esModule?n:{default:n};o.default=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},{"./validate.js":144}],146:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.jsonSchema=o.fromString=o.empty=o.isUuid=o.regex=o.uuid=void 0;const n=e("util"),r=e("uuid"),i={v4:/(?:^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u,v5:/(?:^[a-f0-9]{8}-[a-f0-9]{4}-5[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u};o.regex=i;const a={v4:{type:"string",pattern:i.v4.toString().slice(1,-2)},v5:{type:"string",pattern:i.v5.toString().slice(1,-2)}};o.jsonSchema=a;const s=(0,n.deprecate)(()=>(0,r.v4)(),"uuidv4() is deprecated. Use v4() from the uuid module instead.");o.uuid=s;const c=(0,n.deprecate)(e=>(0,r.validate)(e)&&(4===(0,r.version)(e)||5===(0,r.version)(e)),"isUuid() is deprecated. Use validate() from the uuid module instead.");o.isUuid=c;const l=(0,n.deprecate)(()=>r.NIL,"empty() is deprecated. Use NIL from the uuid module instead.");o.empty=l;const u=(0,n.deprecate)((e,t="bb5d0ffa-9a4c-4d7c-8fc2-0a7d2220ba45")=>(0,r.v5)(e,t),"fromString() is deprecated. Use v5() from the uuid module instead.");o.fromString=u},{util:5,uuid:131}],DailyBoosterUI:[function(e,t,o){"use strict";cc._RF.push(t,"7c425wh2DlHHKRE8OQiO73J","DailyBoosterUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../GameFramework/Scripts/BuildConfig"),l=e("../../../GameFramework/Scripts/NgcMain"),u=e("../../../Services/Ads/Ads"),p=e("../../../Services/Inventory/Inventory"),d=e("../../Dialogs/Script/MessageDialog/MessageDialog"),f=e("../../Dialogs/Script/NgcDialogManager"),h=e("../../OfflineMode/OfflineMode"),g=e("./NgcBoosterItem"),y=e("./NgcBoosterScroll"),m=e("./NgcLuckyBoosterManager"),_=cc._decorator,v=_.ccclass,S=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollingArea=null,t.boosterScroll=null,t.spinButton=null,t.boosterLabel=null,t.inGameLabel=null,t.useBoosterItem=null,t.messageDialog=null,t.messageTargetNode=null,t._posX=0,t._useBoosterItemPos=null,t._isPlayingAnimation=!1,t}return r(t,e),t.prototype.onLoad=function(){m.NgcLuckyBoosterManager.getInstance().init(this),this.createMessageTargetNode(),this.initUseBoosterItem(),this.node.opacity=0,this._posX=this.node.width/2},t.prototype.start=function(){if(this.spinButton.node.parent.children[1]){if(c.NgcBuildConfig.offlineMode||u.NgcAds.inst&&u.NgcAds.inst.isFakeAdsPlatform()){var e=p.NgcInventory.inst.itemTable[m.NO_ADS_SPIN_CURRENCY].picture,t=this.spinButton.node.children[0],o=t.getComponentInChildren(cc.Sprite),n=t.getComponentInChildren(cc.Label);cc.loader.loadRes(e,cc.SpriteFrame,function(e,t){e||(o.spriteFrame=t,o.node.scale=.5)}),n.node.active=!0,u.NgcAds.inst&&u.NgcAds.inst.isFakeAdsPlatform()&&(n.string=""+m.NO_ADS_SPIN_CURRENCY_NUMBER),c.NgcBuildConfig.offlineMode&&(n.string=h.OfflineMode.Config.DailyBoosterPrice.toString())}}else console.error("NGC: Please merge new LuckyBooster.")},t.prototype.update=function(e){this.boosterScroll.update(e)},t.prototype.createMessageTargetNode=function(){this.messageTargetNode=new cc.Node,cc.find("Canvas").addChild(this.messageTargetNode)},t.prototype.initUseBoosterItem=function(){this.useBoosterItem.node.opacity=0,this._useBoosterItemPos=this.useBoosterItem.node.position},t.prototype.onSpinButtonClick=function(){this._isPlayingAnimation||m.NgcLuckyBoosterManager.getInstance().onSpinButtonClick()},t.prototype.enableInGameText=function(e){this.spinButton.node.active=!e,this.boosterLabel.active=!e,this.inGameLabel.active=e},t.prototype.moveBoosterToCharacter=function(e,t){var o=this;this._isPlayingAnimation=!0,this.useBoosterItem.ImageSprite=e,this.useBoosterItem.node.opacity=255,this.useBoosterItem.node.x=this._useBoosterItemPos.x,this.useBoosterItem.node.y=this._useBoosterItemPos.y;var n=l.NgcMain.inst.getWorldPosOfMainCharacter(),r=this.useBoosterItem.node.convertToWorldSpaceAR(cc.v2(0,0)),i=cc.v2(n.x-r.x,n.y-r.y);cc.tween(this.useBoosterItem.node).to(.6,{x:this.useBoosterItem.node.x+i.x,y:this.useBoosterItem.node.y+i.y},{easing:"quartInOut"}).call(function(){o.useBoosterItem.node.opacity=0,t&&t(),o._isPlayingAnimation=!1}).start()},t.prototype.showLuckyBoosterMessage=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(o){switch(o.label){case 0:return this.messageDialog&&this.messageDialog.isValid&&this.messageDialog.destroy(),[4,f.NgcDialogManager.create(d.NgcMessageDialog)];case 1:return(t=o.sent()).init(e,!0),this.messageDialog=t.node,t.show(null,this.messageTargetNode),[2]}})})},t.prototype.hide=function(){var e=this;this.spinButton.interactable=!1,this._isPlayingAnimation=!0;var t=this._posX-this.node.width;this.node.x=this._posX,cc.tween(this.node).parallel(cc.tween().to(.15,{scaleX:1.6}).to(.15,{scaleX:1},{easing:"cubicInOut"}),cc.tween().delay(.15).to(.15,{x:t},{easing:"cubicIn"})).call(function(){e.node.opacity=0,e._isPlayingAnimation=!1}).start()},t.prototype.show=function(){var e=this;this._isPlayingAnimation=!0;var t=this._posX;this.node.opacity=255,this.node.x=this._posX-this.node.width,cc.tween(this.node).parallel(cc.tween().to(.15,{x:t},{easing:"cubicOut"}),cc.tween().to(.15,{scaleX:1.6}).to(.15,{scaleX:1},{easing:"cubicOut"})).call(function(){e._isPlayingAnimation=!1,e.spinButton.interactable=!0}).start()},i([S(cc.Node)],t.prototype,"scrollingArea",void 0),i([S(y.NgcBoosterScroll)],t.prototype,"boosterScroll",void 0),i([S(cc.Button)],t.prototype,"spinButton",void 0),i([S(cc.Node)],t.prototype,"boosterLabel",void 0),i([S(cc.Node)],t.prototype,"inGameLabel",void 0),i([S(g.default)],t.prototype,"useBoosterItem",void 0),i([v],t)}(cc.Component);o.default=b,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../Services/Ads/Ads":"Ads","../../../Services/Inventory/Inventory":"Inventory","../../Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../OfflineMode/OfflineMode":"OfflineMode","./NgcBoosterItem":"NgcBoosterItem","./NgcBoosterScroll":"NgcBoosterScroll","./NgcLuckyBoosterManager":"NgcLuckyBoosterManager"}],DailyRewardManager:[function(e,t,o){"use strict";cc._RF.push(t,"02890RvpgFHr71sZ83Cp+P0","DailyRewardManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcDailyRewardManager=void 0;var c=e("../../../../Scripts/Utils/ConstConfig"),l=e("../../../GameFramework/Scripts/BuildConfig"),u=e("../../../GameFramework/Scripts/NgcMain"),p=e("../../../GameFramework/Scripts/NgcShopManager"),d=e("../../../GameFramework/Scripts/NgcUserInfo"),f=e("../../../Services/DailyReward/DailyReward"),h=e("../../DeliveryReward/Script/DeliveryRewardAnimation"),g=e("../../LuckyBooster/Script/NgcLuckyBoosterManager"),y=e("../../NavBar/Script/NavBarManager"),m=e("../../OfflineMode/OfflineMode"),_=e("./DailyRewardUI"),v=cc._decorator,S=v.ccclass,b=v.property,N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dailyRewardUIPrefab=null,t.dailyRewardUI=null,t.isDailyRewardAlreadyShow=!1,t.blockInputsNode=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this,u.NgcMain.inst.setCrossFeatureInst(u.CrossFeature.NgcDailyRewardManager,this)},t.prototype.start=function(){var e=this;cc.log("DailyRewardManager start"),this.dailyRewardUIPrefab?(this.initDailyReward(),this.initBlockTouchNode()):cc.resources.load(c.ConstConfig.PREFAB_URLS.DailyRewardUI,function(t,n){t?cc.error(t):(cc.log("DailyRewardManager prefab loaded"),e.dailyRewardUIPrefab=n,o.inst.initDailyReward(),o.inst.initBlockTouchNode())})},t.prototype.initDailyReward=function(){this.dailyRewardUI=cc.instantiate(this.dailyRewardUIPrefab),this.dailyRewardUI.parent=this.node,this.getDailyRewardUIComponent().firstInit(),this.dailyRewardUI.active=!1},t.prototype.initBlockTouchNode=function(){this.blockInputsNode=new cc.Node,this.blockInputsNode.setContentSize(this.node.getContentSize()),this.blockInputsNode.parent=cc.find("Canvas"),this.blockInputsNode.addComponent(cc.BlockInputEvents),this.blockInputsNode.active=!1},t.prototype.getDailyRewardUINode=function(){return this.dailyRewardUI},t.prototype.getDailyRewardUIComponent=function(){var e;return null===(e=this.dailyRewardUI)||void 0===e?void 0:e.getComponent(_.NgcDailyRewardUI)},t.prototype.isDailyRewardActive=function(){var e;return null===(e=this.getDailyRewardUINode())||void 0===e?void 0:e.active},t.prototype.updateInventory=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,u.NgcMain.inst.updateUserInfo()];case 1:return e.sent(),[2]}})})},t.prototype.checkReward=function(){return a(this,void 0,Promise,function(){var e,t,n,r,i,a,c=this;return s(this,function(s){switch(s.label){case 0:if(!o.inst.getDailyRewardUIComponent())return this.scheduleOnce(function(){return c.checkReward()},.1),cc.log("DailyRewardManager checkReward postponed"),[2];if(cc.log("DailyRewardManager checkReward run"),this.blockInputsNode.active=!0,e=!1,l.NgcBuildConfig.offlineMode?(t=m.OfflineMode.Config.RoundBeforeFirstDailyReward,e=m.OfflineMode.GetTotalRoundCount()>=t):(t=parseInt(f.NgcDailyReward.inst.parameters.firstSessionRunsBeforeDisplay),e=d.default.totalRoundCount>=t),!e)return this.blockInputsNode.active=!1,[2];s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,f.NgcDailyReward.inst.peekCurState()];case 2:return n=s.sent(),r=1===n.curStep||n.canClaim,i=u.NgcMain.inst.appState===u.AppState.Game,!r||i?[2]:(this.getDailyRewardUIComponent().initUI(f.NgcDailyReward.inst.rewardSchedule,n).then(function(){y.NgcNavBarManager.inst.showAllNavBar(!1),c.getDailyRewardUINode().getComponent(_.NgcDailyRewardUI).show()}),[3,5]);case 3:return a=s.sent(),console.error(a),[3,5];case 4:return this.blockInputsNode.active=!1,[7];case 5:return[2]}})})},t.prototype.showClaimRewardAnimation=function(e){h.default.inst.showRewardAnimation(e,function(){p.NgcShopManager.getInstance().updateBoughtItem(e.itemID);var t=g.NgcLuckyBoosterManager.getInstance();t.applyBooster(),t.checkBoosterUI()},!0)},t.inst=null,i([b(cc.Prefab)],t.prototype,"dailyRewardUIPrefab",void 0),o=i([S],t)}(cc.Component);o.NgcDailyRewardManager=N,cc._RF.pop()},{"../../../../Scripts/Utils/ConstConfig":"ConstConfig","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../Services/DailyReward/DailyReward":"DailyReward","../../DeliveryReward/Script/DeliveryRewardAnimation":"DeliveryRewardAnimation","../../LuckyBooster/Script/NgcLuckyBoosterManager":"NgcLuckyBoosterManager","../../NavBar/Script/NavBarManager":"NavBarManager","../../OfflineMode/OfflineMode":"OfflineMode","./DailyRewardUI":"DailyRewardUI"}],DailyRewardUI:[function(e,t,o){"use strict";cc._RF.push(t,"40df3B3TgROXpui1ApnlzGq","DailyRewardUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcDailyRewardUI=void 0;var c,l=e("../../../../Scripts/GameTrackingDataSupporter"),u=e("../../../../Scripts/UserInfo"),p=e("../../../GameFramework/Scripts/Ads/NgcAdsManager"),d=e("../../../GameFramework/Scripts/BuildConfig"),f=e("../../../GameFramework/Scripts/CONSTANTS"),h=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),g=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),y=e("../../../GameFramework/Scripts/NgcUserInfo"),m=e("../../../SDK/Nano/NanoSrv"),_=e("../../../Services/Ads/Ads"),v=e("../../../Services/DailyReward/DailyReward"),S=e("../../../Services/Inventory/Inventory"),b=e("../../../Services/Platform/Platform"),N=e("../../../Services/Telemetry/Telemetry"),P=e("../../Dialogs/Script/DialogBase"),C=e("../../Dialogs/Script/MessageDialog/MessageDialog"),w=e("../../Dialogs/Script/NgcDialogManager"),T=e("../../NavBar/Script/NavBarManager"),I=e("./BigDay"),R=e("./DailyRewardManager"),O=e("./NgcDay"),E=cc._decorator,k=E.ccclass,A=E.property;(function(e){e[e.today=0]="today",e[e.tomorrow=1]="tomorrow",e[e.other=2]="other",e[e.claimed=3]="claimed"})(c||(c={}));var B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.smallDays=null,t.bigRewards=null,t.day=null,t.videoIcon=null,t.subClaimNowLabel=null,t.claimButtonLabel=null,t.claimButtonBackground=null,t.claimButtonGrayBackground=null,t.mainLayout=null,t.videoAdsBtn=null,t.flashLightAnim=null,t.ignoreBackKey=!0,t.DAILYREWARD_TEXTURE_PATH="Texture/DailyReward/",t.SMALL_DAY_COUNT=6,t.SKIN_SCALE=1.5,t.SKIN_TOP_ALIGN=43,t.rewardIsCurrency=!0,t.todayRewardInfo=null,t.isRewardClaimed=!1,t.isLockingClaim=!1,t}return r(t,e),t.prototype.show=function(){this.isRewardClaimed=!1,this.enableVideoAdsBtn(),e.prototype.show.call(this)},t.prototype.hide=function(){e.prototype.hide.call(this,null,!1)},t.prototype.firstInit=function(){for(var e=this,t=0;t<this.SMALL_DAY_COUNT;t++)cc.instantiate(this.day).parent=this.smallDays;cc.view.on("canvas-resize",function(){e.resizeWidget(!0,1)}),this.resizeWidget(!0,1)},t.prototype.initUI=function(e,t){return a(this,void 0,Promise,function(){var o,n,r;return s(this,function(){return this.rewardState=t,o=t.curStep,n=o%7,r=Math.floor(o/7),0===n&&r>0&&(r-=1),this.renderSmallDays(n,r,e,S.NgcInventory.inst.itemTable),this.renderBigDay(n,r,e,S.NgcInventory.inst.itemTable),this.modifyClaimButtonForNoAds(),[2]})})},t.prototype.renderSmallDays=function(e,t,o,n){for(var r=1,i=0,a=this.smallDays.children;i<a.length;i++){var s=a[i].getComponent(O.NgcDay);s.dayLabel.subText=" "+r,s.dayLabel.setLocalizedText("DLR_DAY"),s.timeRemaining.node.active=!1;var c=this.getDayStatus(e,r),l=o[(r+7*t).toString()];this.updateDayStatus(s,c,l,n),r+=1}},t.prototype.renderBigDay=function(e,t,o,n){var r;r=6===e?c.tomorrow:0===e?c.today:c.other;var i=this.bigRewards.getComponent(I.NgcBigDay);this.updateBigDayStatus(i,r,o[7*t+7],n)},t.prototype.modifyClaimButtonForNoAds=function(){var e,t,o=this,n=this.subClaimNowLabel.node.getComponent(cc.Button);n.interactable=!1,this.subClaimNowLabel.node.opacity=0;var r=null===(e=p.default.inst)||void 0===e?void 0:e.isAdsPoincutAvailable(p.NgcPointcuts.videoDaily,_.AdsType.VideoReward);this.flashLightAnim.active=this.videoIcon.active=r&&this.rewardIsCurrency,(null===(t=_.NgcAds.inst)||void 0===t?void 0:t.isFakeAdsPlatform())&&(this.flashLightAnim.active=this.videoIcon.active=!1);var i=this.claimButtonLabel.getComponent(h.NgcLabelLocalized);this.videoIcon.active?(i.subText=" x2",i.setLocalizedText("DLR_CLAIM"),setTimeout(function(){cc.tween(o.subClaimNowLabel.node).to(1,{opacity:255}).call(function(){n.interactable=!0}).start()},2e3)):(i.subText="",i.setLocalizedText("DLR_CLAIM"),this.subClaimNowLabel.node.active=!1)},t.prototype.getDayStatus=function(e,t){return 0===e?c.claimed:e===t?c.today:e+1===t?c.tomorrow:e>t?c.claimed:c.other},t.prototype.updateDayStatus=function(e,t,o,n){e.today.active=t===c.today,e.tomorrow.active=t===c.tomorrow,e.other.active=t===c.other||t===c.claimed,e.item.active=t!==c.claimed,e.claimed.active=t===c.claimed;var r=this.getRewardInFunctionString(o.reward);if(r){var i=r.itemID,a=n[i];if(a){switch(t===c.today&&(this.todayRewardInfo=r,this.rewardIsCurrency=a.type===f.NGC_CONSTANTS.INVENTORY.TYPE.CURRENCY),e.itemCount.textKey="",e.itemCount.string=r.count.toString(),a.type){case f.NGC_CONSTANTS.INVENTORY.TYPE.EQUIPPABLE:e.itemCount.getComponent(h.NgcLabelLocalized).setLocalizedText("DAILY_REWARD_ITEM"),e.itemIcon.node.scale=this.SKIN_SCALE,e.itemIcon.node.getComponent(cc.Widget).top=this.SKIN_TOP_ALIGN;break;case f.NGC_CONSTANTS.INVENTORY.TYPE.COMSUMABLE:e.itemCount.getComponent(h.NgcLabelLocalized).setLocalizedText("DAILY_REWARD_BOOSTER")}"coin"!==i&&cc.loader.loadRes(a.picture,cc.SpriteFrame,function(t,o){t||(e.itemIcon.spriteFrame=o)})}}else this.todayRewardInfo=null},t.prototype.updateBigDayStatus=function(e,t,o,n){e.today.active=t===c.today,e.tomorrow.active=t===c.tomorrow,e.other.active=t===c.other,e.dayLabel.subText=" 7",e.dayLabel.setLocalizedText("DLR_DAY"),e.timeRemaining.node.active=!1,e.items.active=!0,e.specialReward.active=!1,e.items.children[1].active=!1,e.items.children[2].active=!1;var r=this.getRewardInFunctionString(o.reward);if(r){var i=r.itemID;e.multiNum.string="x"+r.count;var a=n[i];a&&(t===c.today&&(this.todayRewardInfo=r,this.rewardIsCurrency=a.type===f.NGC_CONSTANTS.INVENTORY.TYPE.CURRENCY),cc.loader.loadRes(a.picture,cc.SpriteFrame,function(t,o){t||(e.itemIcon.spriteFrame=o)}))}else this.todayRewardInfo=null},t.prototype.enableVideoAdsBtn=function(){this.isLockingClaim=!1,this.videoAdsBtn.getComponent(cc.Button).interactable=!0,this.videoAdsBtn.getComponentInChildren(cc.Sprite).spriteFrame=this.claimButtonBackground,this.flashLightAnim.active=!0},t.prototype.disableVideoAdsBtn=function(){this.isLockingClaim=!0,this.videoAdsBtn.getComponent(cc.Button).interactable=!1,this.videoAdsBtn.getComponentInChildren(cc.Sprite).spriteFrame=this.claimButtonGrayBackground,this.flashLightAnim.active=!1},t.prototype.onButtonClaimClick=function(e,t){return a(this,void 0,void 0,function(){var o,n,r,i,a,c,l,u=this;return s(this,function(s){switch(s.label){case 0:return this.isLockingClaim?[2]:this.isRewardClaimed?[2]:window.isAdsBlocked?[4,w.NgcDialogManager.showAdsReminderMsg(this.videoAdsBtn)]:[3,2];case 1:return s.sent(),[2];case 2:return this.disableVideoAdsBtn(),o="ads"===t&&this.videoIcon.active&&_.NgcAds.inst,t&&"ads"===t&&o?o?_.NgcAds.inst.waitingNewVideo?(n=d.NgcBuildConfig.services.Ads.timeWaitNewVideo,r=_.NgcAds.inst.timeStartWaitNewVideo,i=Math.round(n-(Date.now()-r)/1e3),[4,w.NgcDialogManager.create(C.NgcMessageDialog)]):[3,4]:[3,5]:(setTimeout(function(){return u.enableVideoAdsBtn()},2e3),this.claimReward(),[2]);case 3:return(a=s.sent()).init(),g.NgcLocalizedManager.setTextKey(a.labelLocalized,"ADS_COOLDOWN",[i.toString()],["xx"]),a.show(null,e.target),this.enableVideoAdsBtn(),[2];case 4:y.default.updateAdsInfo(),c=null,l=null,this.todayRewardInfo&&(c=this.todayRewardInfo.itemID,l=this.todayRewardInfo.count),p.default.inst.show(p.NgcPointcuts.videoDaily,_.AdsType.VideoReward,c,l,null,function(e){e?u.claimReward(!0):w.NgcDialogManager.showAdsNotAvailableMsg(u.videoAdsBtn),u.isLockingClaim&&u.enableVideoAdsBtn()}),setTimeout(function(){return u.enableVideoAdsBtn()},4e3),s.label=5;case 5:return[2]}})})},t.prototype.claimReward=function(e){return void 0===e&&(e=!1),a(this,void 0,void 0,function(){var t,o,n,r,i,c,p,f,h=this;return s(this,function(g){switch(g.label){case 0:return g.trys.push([0,4,,5]),"GameDistribution"===d.NgcBuildConfig.buildPlatform&&(l.default.inst.sendTrackingGDDailyReward=!0),T.NgcNavBarManager.inst.showAllNavBar(!0),[4,v.NgcDailyReward.inst.checkIn(e)];case 1:return t=g.sent(),o=t.data,n=Array.isArray(o)&&!!o[0],this.isRewardClaimed=!!n,[4,S.NgcInventory.inst.forceFetchInventory().then(function(){return a(h,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,u.UserInfo.updateInventoryWithPlatform()];case 1:return e.sent(),cc.systemEvent.emit("refreshInventory"),[2]}})})})];case 2:return g.sent(),[4,R.NgcDailyRewardManager.inst.updateInventory()];case 3:return g.sent(),this.isRewardClaimed?(this.hide(),r=n?o[0].details.itemID:void 0,i=n?o[0].details.count:void 0,p={multiplierOffer:e?0:1,itemRewardID:(c={itemID:r,count:i}).itemID,itemRewardValue:c.count,stepID:this.rewardState.curStep,ViewedAd:e},N.NgcTelemetry.inst.LogEvent_DailyLoginReward(p),N.NgcTelemetry.inst.LogEvent_OnboardingDailyloginCollected(p),R.NgcDailyRewardManager.inst.isDailyRewardAlreadyShow||(R.NgcDailyRewardManager.inst.isDailyRewardAlreadyShow=!0,this.uploadDailyRewardIsAlreadyFirstShow()),R.NgcDailyRewardManager.inst.showClaimRewardAnimation(c),b.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_DLRCLAIM:{viewedAd:e}}),"*"),[3,5]):[2];case 4:return f=g.sent(),console.error(f),[3,5];case 5:return[2]}})})},t.prototype.getRewardInFunctionString=function(e){return e.startsWith("get-item(")?{itemID:e.slice(9,e.indexOf(",")),count:parseInt(e.slice(e.indexOf(",")+1,e.indexOf(")")))}:null},t.prototype.uploadDailyRewardIsAlreadyFirstShow=function(){m.default.inst.servicePost("/playerdata",JSON.stringify({_isAlreadyFirstShow:!0}),function(e){e||cc.log("update _isAlreadyFirstShow success")})},i([A(cc.Node)],t.prototype,"smallDays",void 0),i([A(cc.Node)],t.prototype,"bigRewards",void 0),i([A(cc.Prefab)],t.prototype,"day",void 0),i([A(cc.Node)],t.prototype,"videoIcon",void 0),i([A(h.NgcLabelLocalized)],t.prototype,"subClaimNowLabel",void 0),i([A(h.NgcLabelLocalized)],t.prototype,"claimButtonLabel",void 0),i([A(cc.SpriteFrame)],t.prototype,"claimButtonBackground",void 0),i([A(cc.SpriteFrame)],t.prototype,"claimButtonGrayBackground",void 0),i([A(cc.Node)],t.prototype,"mainLayout",void 0),i([A(cc.Node)],t.prototype,"videoAdsBtn",void 0),i([A(cc.Node)],t.prototype,"flashLightAnim",void 0),i([k],t)}(P.NgcDialogBase);o.NgcDailyRewardUI=B,cc._RF.pop()},{"../../../../Scripts/GameTrackingDataSupporter":"GameTrackingDataSupporter","../../../../Scripts/UserInfo":"UserInfo","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/CONSTANTS":"CONSTANTS","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads","../../../Services/DailyReward/DailyReward":"DailyReward","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../Dialogs/Script/DialogBase":"DialogBase","../../Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../NavBar/Script/NavBarManager":"NavBarManager","./BigDay":"BigDay","./DailyRewardManager":"DailyRewardManager","./NgcDay":"NgcDay"}],DailyReward_impl_NanoSrv:[function(e,t,o){"use strict";cc._RF.push(t,"77d34h8Tm5DmYboSeTRllrw","DailyReward_impl_NanoSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../NanoGameCore/SDK/SDK"),l=e("../../Core/Utils"),u=e("../../CrossFeatures/OfflineMode/OfflineMode"),p=e("../../GameFramework/Scripts/BuildConfig"),d=e("../../GameFramework/Scripts/NgcUserInfo"),f=e("../../SDK/Nano/NanoSrv"),h=e("../../Services/Inventory/Inventory"),g=e("../Platform/Platform"),y=e("./DailyReward"),m=cc._decorator,_=m.ccclass,v=(m.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype._preInit=function(){return new Promise(function(e){e("DailyReward_impl_Nano pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("DailyReward_impl_Nano initialized")})},t.prototype.getName=function(){return"NgcDailyReward_impl_NanoSrv"},t.prototype.onLogin=function(e){var t=this,o=function(t){var o=t[0],n=t[1];return e(o?null:"Error parsing daily rewards table",o?n:null)};if(p.NgcBuildConfig.offlineMode)l.LoadAsset("offline:text/daily-reward").then(function(e){return o(t.initRewardScheduleFromCSV(e.text))});else{var n=f.default.inst.getCurGameInfo().dailyRewardTableByCohort[f.default.inst._getCohort()];l.Utils.getHttp(n,null,function(e,n){o(t.initRewardScheduleFromCSV(n))})}},t.prototype.do_cmd_GetItem=function(e,t,o){if(2===e.length){var n=e[0],r=parseInt(e[1]),i=1;t&&t.hasOwnProperty("multiplier")&&(i=parseFloat(t.multiplier));var a=r*i,s=null;if(t&&t.hasOwnProperty("itemSubsitution")&&(s=t.itemSubsitution),s){var c=s(n,r);n=c.itemID,r=c.quantity}t.simulated?o(null,{action:"get-item",details:{itemID:n,count:a}}):h.NgcInventory.inst.addItem(n,a,function(e,t){e?o(e,null):o(null,{action:"get-item",details:t})})}else o("get-item requires 2 args",null)},t.prototype.processCommandSingle=function(e,t,o){var n=l.Utils.parseFunctionCallString(e);if(null!==n){var r=n[0];n.shift();var i={};switch(t.hasOwnProperty(r)&&(i=t[r]),t.simulated&&(i.simulated=!0),r){case"get-item":this.do_cmd_GetItem(n,i,function(e,t){o(e,t)})}}else o("Failed to process string "+e,null)},t.prototype.processCommandListTopAndRecurse=function(e,t,o,n){var r=this,i=e[0];e.shift(),this.processCommandSingle(i,o,function(i,a){i?n(i,null):(t.push(a),e.length>0?r.processCommandListTopAndRecurse(e,t,o,n):n(null,t))})},t.prototype.processCommandSetString=function(e,t,o){var n=e.split("&");n.forEach(function(e,t,o){o[t]=e.trim()}),this.processCommandListTopAndRecurse(n,[],t,o)},t.prototype.getAdsMultiplier=function(){var e=d.default.offlineDailyReward;return e?e.curAdsRewardFactor:this.parameters.adsRewardFactorBase},t.prototype.keymangle=function(e){return e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)},t.prototype.getCurStep=function(){var e=d.default.offlineDailyReward;return e?e.curStep:this.firstStepID},t.prototype.getElapsedTimeInCurCycleSec=function(){var e=d.default.offlineDailyReward;return e?(c.NgcSDK.getCurTime()-e.curStepStartDate)/1e3:0},t.prototype.getFreeTimeOnResetFailMS=function(){return 36e5*this.parameters.freeHoursOnResetFail},t.prototype._peekCurState=function(){return a(this,void 0,Promise,function(){var e,t,o,n,r,i,a;return s(this,function(s){switch(s.label){case 0:return p.NgcBuildConfig.offlineMode?[3,2]:[4,f.default.inst.serviceGetAsync("/dailyRewards/peekCurState")];case 1:return e=s.sent(),[2,JSON.parse(e).data];case 2:return t=u.OfflineMode.GetDailyRewardState(),o=t.claimedDays,n=t.curStep,r=t.curStepStartDate,i=Number(n),a=c.NgcSDK.getCurTime()-r,!o||o<=0?[2,{canClaim:!0,curStep:i,timeUntilClaim:0}]:a>=864e5?[2,{canClaim:!0,curStep:i,timeUntilClaim:0}]:[2,{canClaim:!1,curStep:i,timeUntilClaim:864e5-a}]}})})},t.prototype._checkin=function(e){return a(this,void 0,Promise,function(){var t,o,n,r,i,a,l,d,h,g;return s(this,function(s){switch(s.label){case 0:return p.NgcBuildConfig.offlineMode?[3,2]:(t="/dailyRewards/checkin"+(e?"?adView=true":""),[4,f.default.inst.servicePostAsync(t,"{}")]);case 1:return o=s.sent(),[2,JSON.parse(o)];case 2:return[4,u.OfflineMode.GetDailyRewardState()];case 3:for(n=s.sent(),r=this.rewardSchedule[n.curStep],u.OfflineMode.SetDailyRewardState({curStep:Number(r.ifPassGotoStep),claimedDays:Number(n.curStep),curStepStartDate:c.NgcSDK.getCurTime()}),i=r.reward.split("&"),a=function(e){var t=e.substr(0,e.indexOf("(")),o=e.replace(t,"").replace("(","").replace(")","").split(","),n=o[0],r=o[1],i=n.trim(),a=r.trim();return u.OfflineMode.UpdateItem(i,parseFloat(a)),{value:new Promise(function(e){e({data:[{details:{itemID:i,count:a}}]})})}},l=0,d=i;l<d.length;l++)if(h=d[l],"object"==typeof(g=a(h)))return[2,g.value];return[2,[]]}})})},t.prototype.failCycle=function(){var e=this.getCurStep(),t={curStep:this.rewardSchedule[e].ifFailGotoStep,curStepStartDate:c.NgcSDK.getCurTime()-this.getFreeTimeOnResetFailMS(),curAdsRewardFactor:this.getAdsMultiplier()};return d.default.offlineDailyReward=t,t},t.prototype.doItemSubstitution=function(e,t){var o={itemID:e,quantity:t},n=h.NgcInventory.inst.itemTable[e];if(!n)return console.warn("Item ID "+e+"not found"),o;if("equippable"!==n.type)return o;if(!this.parameters.defaultRewardIfAlreadyOwned)return o;var r=l.Utils.parseFunctionCallString(this.parameters.defaultRewardIfAlreadyOwned);return r&&"get-item"===r[0]?o={itemID:r[1],quantity:parseInt(r[2])}:(console.warn("Error parsing replacement reward"),o)},t.prototype._getRewardForStep=function(e,t,o){if(g.NgcPlatform.isOfflineMode){var n=this.rewardSchedule[e],r={simulated:!0};t&&(r["get-item"]={multiplier:this.getAdsMultiplier(),itemSubsitution:this.doItemSubstitution}),this.processCommandSetString(n.reward,r,function(e,t){e?o(e,null):o(null,t)})}else{var i="/dailyRewards/getRewardForStep";i+="?adView="+t,i+="&stepID="+e,p.NgcBuildConfig.enabledDebugMode&&(i=l.Utils.addQuery(i,"devTimeOffsetMin="+f.default.inst.devTimeOffsetMinutes.toString())),f.default.inst.serviceGet(i,null,function(e,t){e?o(e,null):o(null,JSON.parse(t).data)})}},i([_],t)}(y.NgcDailyReward));o.default=v,cc._RF.pop()},{"../../../NanoGameCore/SDK/SDK":"SDK","../../Core/Utils":"Utils","../../CrossFeatures/OfflineMode/OfflineMode":"OfflineMode","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../SDK/Nano/NanoSrv":"NanoSrv","../../Services/Inventory/Inventory":"Inventory","../Platform/Platform":"Platform","./DailyReward":"DailyReward"}],DailyReward:[function(e,t,o){"use strict";cc._RF.push(t,"591d9TdpvxAxq/gl3Bpukuh","DailyReward");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcDailyReward=void 0;var c=e("../../Core/nCSV"),l=e("../Service"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardSchedule={},t.parameters={},t.firstStepID=null,t}return r(t,e),t.prototype.peekCurState=function(){return this._peekCurState()},t.prototype.checkIn=function(e){return a(this,void 0,Promise,function(){return s(this,function(){return[2,this._checkin(e)]})})},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){return this._init(e)},t.prototype.getRewardForStep=function(e,t,o){this._getRewardForStep(e,t,function(e,t){o(e,t)})},t.prototype.getFirstStep=function(){return this.rewardSchedule[this.firstStepID]},t.prototype.getTotalSteps=function(){return Object.keys(this.rewardSchedule).length},t.prototype.getNextStep=function(e){var t=this.rewardSchedule[e];return this.rewardSchedule[t.ifPassGotoStep]},t.prototype.initRewardScheduleFromTableAndParams=function(e,t){var o=this;return!!e&&(this.rewardSchedule={},e.forEach(function(e){var t=e.stepID;o.firstStepID||(o.firstStepID=t),o.rewardSchedule.hasOwnProperty(t)?console.warn("Duplicate step ID: "+t):o.rewardSchedule[t]=e}),this.parameters=t,!0)},t.prototype.initRewardScheduleFromCSV=function(e){var t=c.nCSV.parseTable(e),o=c.nCSV.parseParameters(e);return[this.initRewardScheduleFromTableAndParams(t,o),t]},t.srvInstances=[],t.inst=null,i([p],t)}(l.NgcService));o.NgcDailyReward=d,cc._RF.pop()},{"../../Core/nCSV":"nCSV","../Service":"Service"}],DeathZoneManager:[function(e,t,o){"use strict";cc._RF.push(t,"e6cefnETNhMMq/PQPczw3qn","DeathZoneManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./TuningData"),s=e("./Maps/MapController"),c=e(".//HSAUtils"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.deathZoneNode=null,t.bottomWave=null,t.leftWave=null,t.rightWave=null,t.isShrinking=!1,t._endZone=null,t._mapSize=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst&&cc.error("There are more than 1 DeathZoneManager instance!!!"),o.inst=this,this.deathZoneNode.active=!1},t.prototype.start=function(){},t.prototype.update=function(e){this.isShrinking&&this.updateWavePositionByDistance(e)},t.prototype.reset=function(){this.isShrinking=!1,this.deathZoneNode.active=!1},t.prototype.activeDeathZone=function(){this.isShrinking||(this.isShrinking=!0,this.deathZoneNode.active=!0,this._endZone=s.default.inst.getRandomEndZones(),this._mapSize=s.default.inst.getMapSize(),this.leftWave.setPosition(200,this._mapSize.height/2),this.rightWave.setPosition(this._mapSize.width-200,this._mapSize.height/2),this.bottomWave.setPosition(this._mapSize.width/2,200))},t.prototype.checkPointInDeatchZone=function(e){var t=this.node.parent.convertToNodeSpaceAR(cc.v2(e.x,e.y));return!(!this.isShrinking||!(t.x<this.leftWave.x||t.x>this.rightWave.x||t.y<this.bottomWave.y))},t.prototype.getNearestDistanceToDeathZone=function(e){var t=c.default.getWorldPos(this.leftWave),o=c.default.getWorldPos(this.rightWave),n=c.default.getWorldPos(this.bottomWave),r=cc.Intersection.pointLineDistance(e,cc.v2(t.x,t.y),cc.v2(t.x,t.y+this.leftWave.height),!1),i=cc.Intersection.pointLineDistance(e,cc.v2(o.x,o.y),cc.v2(o.x,o.y+this.rightWave.height),!1),a=cc.Intersection.pointLineDistance(e,cc.v2(n.x,n.y),cc.v2(n.x+this.bottomWave.width,n.y),!1);return Math.min(r,i,a)},t.prototype.updateWavePositionByDistance=function(e){if(a.default.inst.getGameParameters()){var t=a.default.inst.getGameParameters().death_zone.speed*e,o=this.node.parent.convertToNodeSpaceAR(cc.v2(this._endZone.x,this._endZone.y)),n=o.x,r=o.x+this._endZone.width,i=o.y-this._endZone.height;this.leftWave.x=Math.min(this.leftWave.x+t,n),this.rightWave.x=Math.max(this.rightWave.x-t,r),this.bottomWave.y=Math.min(this.bottomWave.y+t,i)}},t.inst=null,i([p(cc.Node)],t.prototype,"deathZoneNode",void 0),i([p(cc.Node)],t.prototype,"bottomWave",void 0),i([p(cc.Node)],t.prototype,"leftWave",void 0),i([p(cc.Node)],t.prototype,"rightWave",void 0),o=i([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{".//HSAUtils":"HSAUtils","./Maps/MapController":"MapController","./TuningData":"TuningData"}],DeathZone_Notice:[function(e,t,o){"use strict";cc._RF.push(t,"8fa82XxGNhKXqiZV9t07A/N","DeathZone_Notice");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Localized/HSALocalizedManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.COUNTING_DOWN_TIME=10,t.title=null,t.number=null,t.isCounting=!1,t}return r(t,e),t.prototype.update=function(e){this.isCounting&&(this.countingNumber-=e,this.countingNumber<=0&&(this.node.active=!1),this.number.string=""+Math.floor(this.countingNumber))},t.prototype.reset=function(){this.title.string=a.default.t("HSA_SAFE_ZONE_WARNING").text,this.number.string="10",this.isCounting=!1,this.countingNumber=this.COUNTING_DOWN_TIME},t.prototype.startCounting=function(){this.isCounting||(this.reset(),this.isCounting=!0)},i([l(cc.Label)],t.prototype,"title",void 0),i([l(cc.Label)],t.prototype,"number",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Localized/HSALocalizedManager":"HSALocalizedManager"}],DefaultScreen:[function(e,t,o){"use strict";cc._RF.push(t,"3ddabqig8dO16ax0B5ZVZeH","DefaultScreen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.DefaultScreen=void 0;var a=e("../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),i([c],t)}(a.default));o.DefaultScreen=l,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase"}],Defines:[function(e,t,o){"use strict";cc._RF.push(t,"e6dd9HRncJPAL17GjkaWF4h","Defines"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameState=void 0,function(e){e[e.AddingPlayers=0]="AddingPlayers",e[e.Countdown=1]="Countdown",e[e.Playing=2]="Playing",e[e.GameOver=3]="GameOver",e[e.TimeOut=4]="TimeOut"}(o.GameState||(o.GameState={})),cc._RF.pop()},{}],Delegate:[function(e,t,o){"use strict";cc._RF.push(t,"e7155A5sQxDgpKkwBPBLPEu","Delegate"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this._fa=[]}return e.prototype.add=function(e){this._fa.indexOf(e)<0&&this._fa.push(e)},e.prototype.del=function(e){var t=this._fa.indexOf(e,0);t>-1&&this._fa.splice(t,1)},e.prototype.call=function(){for(var e,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];for(var n=this._fa.length-1;n>=0;n--)(e=this._fa)[n].apply(e,t)},e}();o.default=n,cc._RF.pop()},{}],DeliveryRewardAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"d293aIeI4lDFIYQoOeRTuRG","DeliveryRewardAnimation");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../DailyReward/Script/RewardClaimAnimation"),s=e("../../EndGameFlow/Reward/RewardUI"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardAnimation=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?cc.error("There are already have NgcTechMessages!!! inst"):(o.inst=this,s.NgcEndGameRewardDialog.deliveryRewardInst=this)},t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.showRewardAnimation=function(e,t,o,n){void 0===t&&(t=function(){}),void 0===o&&(o=!1),void 0===n&&(n=null);var r=cc.instantiate(this.rewardAnimation),i=r.getComponent(a.NgcRewardClaimAnimation);r.parent=this.node,i.setCustomText(n),i.showClaimRewardAnimation(e,function(){t&&t(),r.parent=null,r.destroy()},o)},t.inst=null,i([u(cc.Prefab)],t.prototype,"rewardAnimation",void 0),o=i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../DailyReward/Script/RewardClaimAnimation":"RewardClaimAnimation","../../EndGameFlow/Reward/RewardUI":"RewardUI"}],DialogBase:[function(e,t,o){"use strict";cc._RF.push(t,"05130mDBq5OJq4t7OUUVtKh","DialogBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcDialogBase=o.DIALOG_OPEN_TYPE=void 0;var a,s=e("../../../Core/Utils"),c=e("../../../GameFramework/Scripts/Ads/NgcAdsManager"),l=e("../../../GameFramework/Scripts/NgcScreenManager"),u=e("../../../Services/Ads/Ads"),p=cc._decorator,d=p.ccclass,f=p.property,h=p.menu;(function(e){e[e.BOUNCE_CENTER=0]="BOUNCE_CENTER",e[e.SLIDE_UP=1]="SLIDE_UP",e[e.NONE=2]="NONE"})(a=o.DIALOG_OPEN_TYPE||(o.DIALOG_OPEN_TYPE={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dialogUsingNode=null,t.bgUsingNode=null,t._dialogNodePosition=null,t._outBottomNodePosition=null,t._dWidget=null,t.isHandleKeyDown=!0,t.ignoreBackKey=!1,t.DEFAULT_SCREEN_SIZE=cc.v2(640,960),t.dialogNode=null,t.dialogOpenType=a.BOUNCE_CENTER,t.dimBackground=null,t.currentScale=1,t._hasResized=!1,t.defaultDialogContentWidth=0,t.needScaledBGNodes=[],t.isShowingBanner=!1,t}var o;return r(t,e),o=t,Object.defineProperty(t,"hasDialogShowing",{get:function(){return o.dialogStacks.length>0},enumerable:!1,configurable:!0}),t.prototype.checkShowBanner=function(e){var t,o;c.default.inst&&c.default.inst.isAdsPoincutAvailable(e,u.AdsType.Banner)?(null===(t=c.default.inst)||void 0===t||t.showBanner(e),this.resizeWidget(!1)):null===(o=c.default.inst)||void 0===o||o.hide()},t.prototype.checkResizeWidget=function(e,t,o,n){void 0===t&&(t=!1),void 0===o&&(o=.75),void 0===n&&(n=!1),c.default.inst&&c.default.inst.isAdsPoincutAvailable(e,u.AdsType.Banner)&&this.resizeWidget(t,o,n)},t.prototype.resizeWidget=function(e,t,o){void 0===e&&(e=!1),void 0===t&&(t=.75),void 0===o&&(o=!1);var n=this.node.getComponent(cc.Widget),r=l.default.inst.TopBannerWidget.node.height;if(0!==r&&n)if(n.top=r,n.updateAlignment(),e){this.node.scale*=t;var i=this.node.getChildByName("Blank");if(this.bgUsingNode=this.dimBackground||i,this.bgUsingNode&&o){var a=this.bgUsingNode.getComponent(cc.Widget);a&&(a.updateAlignment(),a.enabled=!1,this.bgUsingNode.scale*=1+t)}}else this.node.getComponentsInChildren(cc.Widget).forEach(function(e){return e.enabled&&e.updateAlignment()}),this.isShowingBanner=!0,i=this.node.getChildByName("Blank"),this.bgUsingNode=this.dimBackground||i,this.needScaledBGNodes.concat([this.bgUsingNode]).forEach(function(e){var t=e.getComponent(cc.Widget);if(t){var o=l.default.inst.getTopBarHeight();t.top=-o,t.updateAlignment()}})},t.prototype.show=function(e){var t=this,o=cc.find("Canvas"),n=e||o,r=this.node.getChildByName("Blank");this.bgUsingNode=this.dimBackground||r;var i=this.bgUsingNode.getComponent(cc.Widget);i.target=o,i&&(i.left=i.right=i.top=i.bottom=0,i.updateAlignment());var a=this.node.getChildByName("Dialog");this.dialogUsingNode=this.dialogNode||a,this.node.active=!0,this.node.parent=n,this.node.setPosition(cc.v2(0,0)),this._dialogNodePosition=cc.v2(this.dialogUsingNode.position);var c=this.dialogUsingNode.scale,l=this.node.parent.getContentSize(),u=80;this._dWidget=this.dialogUsingNode.getComponent(cc.Widget),this._dWidget&&this._dWidget.enabled&&(u=this._dWidget.left);var p=this.defaultDialogContentWidth||this.dialogUsingNode.getContentSize().width;if(s.Utils.log(this.node.name,p+u,u,l),p+u>l.width&&!this._hasResized){var d=l.width/(p+u);this.dialogUsingNode.scale*=d,c=this.dialogUsingNode.scale,this._hasResized=!0}cc.view.setResizeCallback(function(){t.rescale()}),this.showPopup(this.dialogUsingNode,c),cc.sys.isNative&&this.isHandleKeyDown&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.backspace:case cc.macro.KEY.back:this.handleBackKey()}},t.prototype.handleBackKey=function(){var e=o.dialogStacks.length;e>0&&(o.dialogStacks[e-1]!=this||this.ignoreBackKey||this.hide())},t.prototype.hide=function(e,t){var n=this;void 0===e&&(e=null),void 0===t&&(t=!0),this.isHandleKeyDown&&cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);var r=function(){n.node.active=!1,t?(cc.view.setResizeCallback(null),n.node.destroy()):n.dialogUsingNode.scale=n.dialogUsingNode.scale/.9,e&&e(),cc.js.array.remove(o.dialogStacks,n)};if(this.dialogUsingNode&&this.dialogUsingNode.active){switch(this.dialogOpenType){case a.BOUNCE_CENTER:var i=.9*this.dialogUsingNode.scale;cc.tween(this.dialogUsingNode).to(.125,{scale:i}).call(r).start();break;case a.SLIDE_UP:cc.tween(this.dialogUsingNode).to(.25,{position:this._outBottomNodePosition,opacity:255},{easing:"circIn"}).call(r).start();break;default:r()}cc.tween(this.bgUsingNode).to(.25,{opacity:0}).start()}else r()},t.prototype.showPopup=function(e,t){void 0===t&&(t=null);var n=t||1;switch(this.dialogOpenType){case a.BOUNCE_CENTER:e.scale=.9*n,e.opacity=0,this.bgUsingNode.opacity=0,cc.tween(e).to(.25,{scale:n,opacity:255},{easing:"backOut"}).start(),cc.tween(this.bgUsingNode).to(.25,{opacity:150}).start();break;case a.SLIDE_UP:var r=s.Utils.getWorldPos(e),i=-(r.y+e.height/2),c=this._dialogNodePosition.y+i;if(this._outBottomNodePosition=cc.v2(this._dialogNodePosition.x,c),e.setPosition(this._outBottomNodePosition),this._dWidget&&this._dWidget.enabled&&(this._dWidget.enabled=!1,this._dWidget.isAlignBottom)){var l=this._dWidget.bottom+e.scale*e.parent.scale*e.height/2,u=cc.v2(r.x,l);s.Utils.setWorldPos(e,u),this._dialogNodePosition=e.getPosition()}e.setPosition(this._outBottomNodePosition),cc.tween(e).to(.25,{position:this._dialogNodePosition},{easing:"circOut"}).start()}o.dialogStacks.push(this)},t.prototype.rescale=function(){try{var e=Math.min(1,cc.winSize.width/cc.winSize.height*this.DEFAULT_SCREEN_SIZE.y/this.DEFAULT_SCREEN_SIZE.x);this.node.scale*=e/this.currentScale,this.currentScale=e}catch(t){}},t.prototype.init=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.urlPrefab="",t.bundleName="",t.dialogType="",t.dialogStacks=[],i([f(cc.Node)],t.prototype,"dialogNode",void 0),i([f({type:cc.Enum(a)})],t.prototype,"dialogOpenType",void 0),i([f(cc.Node)],t.prototype,"dimBackground",void 0),i([f()],t.prototype,"defaultDialogContentWidth",void 0),i([f([cc.Node])],t.prototype,"needScaledBGNodes",void 0),o=i([d,h("NGC/Dialog/DialogBase")],t)}(cc.Component);o.NgcDialogBase=g,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../Services/Ads/Ads":"Ads"}],DialogOnSceneBase:[function(e,t,o){"use strict";cc._RF.push(t,"8ba85P4OrtI3rJJUmsu9Rnt","DialogOnSceneBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcDialogOnSceneBase=o.DIALOG_OPEN_TYPE=void 0;var a,s=cc._decorator,c=s.ccclass,l=s.property,u=s.menu;(function(e){e[e.BOUNCE_CENTER=0]="BOUNCE_CENTER",e[e.SLIDE_UP=1]="SLIDE_UP"})(a=o.DIALOG_OPEN_TYPE||(o.DIALOG_OPEN_TYPE={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dialogUsingNode=null,t.bgUsingNode=null,t._dialogNodePosition=null,t._outBottomNodePosition=null,t._dWidget=null,t.DEFAULT_SCREEN_SIZE=cc.v2(640,960),t.dialogNode=null,t.dialogOpenType=a.BOUNCE_CENTER,t.dimBackground=null,t.currentScale=1,t._hasResized=!1,t}return r(t,e),t.prototype.onLoad=function(){var e=this.node.getChildByName("Dialog");this.dialogUsingNode=this.dialogNode||e},t.prototype.start=function(){this.show()},t.prototype.show=function(e){var t=cc.find("Canvas"),o=e||t,n=(this.dialogUsingNode.scale,o.getContentSize()),r=80;if(this._dWidget=this.dialogUsingNode.getComponent(cc.Widget),this._dWidget&&this._dWidget.enabled&&(r=this._dWidget.left),this.dialogUsingNode.getContentSize().width+r>n.width&&!this._hasResized){var i=n.width/(this.dialogUsingNode.getContentSize().width+r);this.dialogUsingNode.scale*=i,this.dialogUsingNode.scale,this._hasResized=!0}},t.prototype.rescale=function(){try{var e=Math.min(1,cc.winSize.width/cc.winSize.height*this.DEFAULT_SCREEN_SIZE.y/this.DEFAULT_SCREEN_SIZE.x);this.node.scale*=e/this.currentScale,this.currentScale=e}catch(t){}},t.urlPrefab="",t.bundleName="",t.dialogType="",t.dialogStacks=[],i([l(cc.Node)],t.prototype,"dialogNode",void 0),i([l({type:cc.Enum(a)})],t.prototype,"dialogOpenType",void 0),i([l(cc.Node)],t.prototype,"dimBackground",void 0),i([c,u("NGC/Dialog/DialogOnScene")],t)}(cc.Component);o.NgcDialogOnSceneBase=p,cc._RF.pop()},{}],DieByOpponent:[function(e,t,o){"use strict";cc._RF.push(t,"a7fc6IGyqtBoKMK4ZnVZj9G","DieByOpponent");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Player/PlayerController"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameOpponent=null,t.flagOpponent=null,t.playerRank=null,t.topContainer=null,t.bottomContainer=null,t._topContainerOriginalScale=0,t._bottomContainerOriginalScale=0,t}return r(t,e),t.prototype.onLoad=function(){this._topContainerOriginalScale=this.topContainer.scale,this._bottomContainerOriginalScale=this.bottomContainer.scale},t.prototype.playAnimation=function(e,t,o,n,r,i){var a=this;this.node.opacity=255,this.node.active=!0,this.topContainer.scale=e,this.topContainer.opacity=0,this.bottomContainer.scale=o,this.bottomContainer.opacity=0,cc.tween(this.topContainer).to(t,{opacity:255,scale:this._topContainerOriginalScale}).call(function(){cc.tween(a.bottomContainer).to(n,{opacity:255,scale:a._bottomContainerOriginalScale}).delay(i).call(function(){cc.tween(a.node).to(r,{opacity:0}).call(function(){a.node.active=!1,cc.systemEvent.emit("gameOver")}).start()}).start()}).start()},t.prototype.setOpponentInfo=function(e,t){this.nameOpponent.string=e,this.flagOpponent.spriteFrame=t.spriteFrame},t.prototype.setRank=function(){this.playerRank.string="#"+a.default.localPlayer.curRank},t.prototype.hideUI=function(){this.node.active=!1},i([l(cc.Label)],t.prototype,"nameOpponent",void 0),i([l(cc.Sprite)],t.prototype,"flagOpponent",void 0),i([l(cc.Label)],t.prototype,"playerRank",void 0),i([l(cc.Node)],t.prototype,"topContainer",void 0),i([l(cc.Node)],t.prototype,"bottomContainer",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Player/PlayerController":"PlayerController"}],DigitCountUp:[function(e,t,o){"use strict";cc._RF.push(t,"ed528sK4rdMU6+heZIJuZT0","DigitCountUp");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../SoundManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.fromNum=0,t.toNum=0,t.totaltime=0,t.counter=0,t.audioCountNumberId=0,t.isCountDone=!1,t.callbackFunc=null,t.onCompleteFunc=null,t}return r(t,e),t.prototype.reset=function(){this.label.string="",this.isCountDone=!0},t.prototype.countFrom=function(e,t,o,n){var r=this;o<=0?console.error("invalid time"):(this.fromNum=e,this.toNum=t,this.totaltime=o,this.counter=0,this.callbackFunc=n,this.audioCountNumberId=a.default.inst.playSound(a.AudioClips.NumberCountClip,1,!0),this.isCountDone=!1,setTimeout(function(){a.default.inst.stopSound(r.audioCountNumberId)},1e3*o))},t.prototype.start=function(){},t.prototype.onComplete=function(e){this.onCompleteFunc=e},t.prototype.update=function(e){if(!this.isCountDone){this.counter+=e;var t=this.counter/this.totaltime;t>1&&(t=1,this.onCompleteFunc&&(this.onCompleteFunc(),this.onCompleteFunc=null),a.default.inst.stopSound(this.audioCountNumberId),this.isCountDone=!0),this.callbackFunc&&this.callbackFunc(t);var o=this.toNum-this.fromNum,n=this.fromNum+o*t;this.label.string=n.toFixed(0)}},i([l(cc.Label)],t.prototype,"label",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../SoundManager":"SoundManager"}],DoubleTab:[function(e,t,o){"use strict";cc._RF.push(t,"412b29cAaBOM5/hiZDNyX84","DoubleTab");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.TWINKLING_SPEED=1,t.MAX_TIME_SHOW_TUTORIAL=3,t.tab=null,t.finger=null,t.text=null,t.mode="double-tab",t}return r(t,e),t.prototype.start=function(){},t.prototype.onEnable=function(){this._percent=0,this._time=0,this.mode="double-tab"},t.prototype.setMessage=function(e){this.text.string=e},t.prototype.update=function(e){this._percent+=100/this.TWINKLING_SPEED*e,this._percent>100&&(this._percent=0),this._time+=e,"double-tab"===this.mode?(this._percent>60&&this._percent<=70||this._percent>90&&this._percent<=100?(this.tab.opacity=255,this.finger.opacity=255):(this.tab.opacity=50,this.finger.opacity=50),this._time>this.MAX_TIME_SHOW_TUTORIAL&&(this.node.active=!1)):this._percent%25>=20?(this.tab.opacity=255,this.finger.opacity=255):(this.tab.opacity=50,this.finger.opacity=50)},i([c(cc.Node)],t.prototype,"tab",void 0),i([c(cc.Node)],t.prototype,"finger",void 0),i([c(cc.Label)],t.prototype,"text",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],DragToControl:[function(e,t,o){"use strict";cc._RF.push(t,"12319rXzAFMAJ1Np88Wlall","DragToControl");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../HSAUtils"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ANGLE_MOVING_SPEED=4,t.radius=20,t.finger=null,t.text=null,t._circleCenterLeft=null,t._circleCenterRight=null,t._curCenter=null,t}return r(t,e),t.prototype.start=function(){this._circleCenterLeft=cc.v2(-this.radius,this.finger.y),this._circleCenterRight=cc.v2(this.radius,this.finger.y),this._curCenter=this._circleCenterRight,this._curAngle=0},t.prototype.update=function(){this._curCenter===this._circleCenterRight?(this._curAngle+=this.ANGLE_MOVING_SPEED,180===this._curAngle&&(this._curCenter=this._circleCenterLeft,this._curAngle=0)):(this._curAngle-=this.ANGLE_MOVING_SPEED,0===this._curAngle&&(this._curCenter=this._circleCenterRight,this._curAngle=180)),this._curAngle>360&&(this._curAngle=0),this._curAngle<0&&(this._curAngle=360);var e=a.default.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(this._curAngle))).mul(this.radius),t=cc.v2(this._curCenter.x,this._curCenter.y).add(e);this.finger.setPosition(t.add(cc.v2(this.finger.width/2-10,-this.finger.height/2)))},i([l],t.prototype,"radius",void 0),i([l(cc.Node)],t.prototype,"finger",void 0),i([l(cc.Label)],t.prototype,"text",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../HSAUtils":"HSAUtils"}],EatBar:[function(e,t,o){"use strict";cc._RF.push(t,"68a18UxAJxIiKw/oBg5Ss9P","EatBar");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t}return r(t,e),t.prototype.monitorProgress=function(e){e=cc.misc.clampf(e,0,1),this.progressBar.progress=e},i([c(cc.ProgressBar)],t.prototype,"progressBar",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],EdgeExclusiveComp:[function(e,t,o){"use strict";cc._RF.push(t,"316abyj/W5I9JXADJIC/FSk","EdgeExclusiveComp");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.edgeExclusiveUIParent=null,t.edgeExclusiveUIPrefab=null,t}return r(t,e),t.prototype.onLoad=function(){this.onResized(),cc.view.on("canvas-resize",this.onResized.bind(this)),cc.instantiate(this.edgeExclusiveUIPrefab).parent=this.edgeExclusiveUIParent},t.prototype.onResized=function(){var e=cc.view.getFrameSize(),t=cc.view.getDesignResolutionSize(),o=-.25,n=this.edgeExclusiveUIParent.getComponent(cc.Widget);e.width>e.height?(e.width/e.height>t.height/t.width?o-=o*(e.width/e.height-t.height/t.width):o*=t.height/t.width/(e.width/e.height),o=cc.misc.clampf(o,-.3,-.22),n.horizontalCenter=o,n.isAbsoluteBottom=!0,n.bottom=180,this.edgeExclusiveUIParent.scale=1):(n.horizontalCenter=.38,n.isAbsoluteBottom=!1,n.bottom=.75,this.edgeExclusiveUIParent.scale=.7)},i([c(cc.Node)],t.prototype,"edgeExclusiveUIParent",void 0),i([c(cc.Prefab)],t.prototype,"edgeExclusiveUIPrefab",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],EdgeExclusiveManager:[function(e,t,o){"use strict";cc._RF.push(t,"c0ef4eY4NZCmr75TO4zpe7T","EdgeExclusiveManager");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.EDGE_CATEGORY=void 0;var a=e("../../../Services/Platform/Platform"),s=e("../../../Core/Utils"),c=e("../../../GameFramework/Scripts/NgcUserInfo"),l=e("../../../SDK/Nano/NanoSrv"),u=e("../../../Services/Inventory/Inventory"),p=e("../../../../Scripts/UserInfo"),d=e("../../DeliveryReward/Script/DeliveryRewardAnimation"),f=e("../../../GameFramework/Scripts/NgcShopManager"),h=e("./CoBranchEdgeHTML"),g=e("../../../Services/Telemetry/Telemetry"),y=e("../../TabBar/Script/NgcTabBarManager");o.EDGE_CATEGORY="EES_EXCLUSIVE";var m=cc._decorator,_=m.ccclass,v=(m.property,function(){function e(){this.PRIVACY_POLICY_URL="https://legal.ubi.com/privacypolicy/",this.edgeExclusiveData=null,this.rewardData=null,this.currentWeeklyReward=null,this.fetchDataFromServer(this.onLoadingDataCompleted.bind(this))}var t;return t=e,e.getInstance=function(){return a.NgcPlatform.isOfflineMode()||null!==this._instance||(this._instance=new t),this._instance},e.prototype.fetchDataFromServer=function(e){var t=this;a.NgcPlatform.isOfflineMode()||l.default.inst.serviceGet("/exclusiverewards",null,function(o,n){if(!o&&n){var r=JSON.parse(n).data;cc.error("edge exclusive fetch data: ",r),t.edgeExclusiveData=r;var i=r.rewards;e(i)}})},e.prototype.onLoadingDataCompleted=function(e){this.rewardData=[],this.rewardData=e},e.prototype.forceFetchEdgeExclusive=function(){this.fetchDataFromServer(this.onLoadingDataCompleted.bind(this))},e.prototype.checkReward=function(){var e;(null===(e=this.edgeExclusiveData)||void 0===e?void 0:e.isAvailable)&&(t.edgeExclusiveUIInst.needRefresh=!0,t.edgeExclusiveUIInst.updateUI(),s.Utils.getBrowserType()===s.BROWSER_TYPE.EDGE&&this.getInstantRewards().then(function(){cc.systemEvent.emit("edgeClaim"),y.NgcTabBarManager.inst.selectTab(y.NgcTabBarManager.inst.tabs[0])}).catch(function(){return cc.log("[Edge Exclusive] No more reward to receive.")}))},e.prototype.getCurrentWeeklyReward=function(){var e=this;return this.currentWeeklyReward=null,Object.values(this.rewardData).forEach(function(t){t&&t.isAvailable&&!t.claimed&&(e.currentWeeklyReward=t)}),this.currentWeeklyReward},e.prototype.openEdgeRedirection=function(e){var t={context:e};if(g.NgcTelemetry.inst.LogEvent_GoToEdge(t),!a.NgcPlatform.isOfflineMode()){var o={playerId:c.default.userIdKey,secretKey:c.default.secretKey,socialToken:c.default.facebookAccessToken,platform:a.NgcPlatform.inst.getName(),avatarMobile:c.default.avatarUrl,avatarDesktop:c.default.avatarUrl,socialId:c.default.socialId,name:c.default.localUserName,language:c.default.curLanguage,context:e,browser:s.BROWSER_TYPE[s.Utils.getBrowserType()].toLowerCase(),redirectEdge:!0},n=a.NgcPlatform.encryptData(o),r=s.Utils.getOSType()===s.OS_TYPE.IOS?window.parent.location.href.replace(/^.*:\/\//i,""):window.parent.location.href,i=void 0,l=void 0;r.includes("?")?(i="microsoft-edge:"+r+"&loginData="+encodeURIComponent(n),l="android-app://com.microsoft.emmx/"+r+"&loginData="+encodeURIComponent(n)):(i="microsoft-edge:"+r+"?loginData="+n,l="android-app://com.microsoft.emmx/"+r+"?loginData="+encodeURIComponent(n));var u=h.coBranchEdgeHTML(i,"https://legal.ubi.com/privacypolicy/"),p=s.Utils.getOSType()===s.OS_TYPE.ANDROID,d=s.Utils.getOSType()===s.OS_TYPE.IOS;if(p)return void window.location.assign(l);if(d)return void window.location.assign(i);window.parent.open(i).document.write(u)}},e.prototype.updateRewardItem=function(e){var t=null;return this.rewardData.map(function(o,n){o.itemId!==e||(t=n)}),this.rewardData[t].claimed=!0,this.rewardData[t]},e.prototype.isEventEdgeExclusive=function(){return this.edgeExclusiveData&&this.edgeExclusiveData.isAvailable},e.prototype.getRewardsEdgeExclusive=function(){return this.edgeExclusiveData&&this.edgeExclusiveData.rewards},e.prototype.getRewardsCanClaim=function(){var e=this.getRewardsEdgeExclusive(),t=null;return e&&(t=e.filter(function(e){return e.isAvailable})),t},e.prototype.getRewardByIndex=function(e){return this.getRewardsEdgeExclusive()[e]},e.prototype.getWeekValueByItemId=function(e){var t,o=null;return null===(t=this.edgeExclusiveData)||void 0===t||t.rewards.map(function(t,n){t.itemId===e&&(o=n+1)}),o},e.prototype.getTimeStampRewards=function(){var e,t=this.getRewardsEdgeExclusive();return t&&(e=t.map(function(e){return new Date(e.startDate).getTime()/1e3})),e},e.prototype.getInstantRewards=function(){return r(this,void 0,Promise,function(){var e=this;return i(this,function(){return[2,new Promise(function(o,n){return r(e,void 0,void 0,function(){var e,r,a;return i(this,function(i){switch(i.label){case 0:return e=t.getInstance().getRewardsCanClaim(),0!==(r=e.filter(function(e){return!e.claimed})).length?[3,1]:(n(),[3,5]);case 1:a=r.length-1,i.label=2;case 2:return a>=0?[4,this.claimReward(r[a].itemId)]:[3,5];case 3:i.sent(),0===a&&o(),i.label=4;case 4:return--a,[3,2];case 5:return[2]}})})})]})})},e.prototype.claimReward=function(e){var o=this,n="/exclusiverewards/claim/"+e;return new Promise(function(e,a){l.default.inst.servicePost(n,null,function(n,s){n&&a();var c=JSON.parse(s).data,l={itemID:c.itemId,count:c.amount,imgURL:c.image};u.NgcInventory.inst.addItem(c.itemId,c.amount,function(){u.NgcInventory.inst.forceFetchInventory().then(function(){return r(o,void 0,void 0,function(){return i(this,function(o){switch(o.label){case 0:return[4,p.UserInfo.updateInventoryWithPlatform()];case 1:return o.sent(),d.default.inst.showRewardAnimation(l,function(){f.NgcShopManager.getInstance().updateBoughtItem(c.itemId),t.getInstance().updateRewardItem(c.itemId),e()},!0,null),[2]}})})})})})})},e._instance=null,e.edgeExclusiveUIInst=null,t=n([_],e)}());o.default=v,cc._RF.pop()},{"../../../../Scripts/UserInfo":"UserInfo","../../../Core/Utils":"Utils","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../DeliveryReward/Script/DeliveryRewardAnimation":"DeliveryRewardAnimation","../../TabBar/Script/NgcTabBarManager":"NgcTabBarManager","./CoBranchEdgeHTML":"CoBranchEdgeHTML"}],EdgeExclusiveUI:[function(e,t,o){"use strict";cc._RF.push(t,"ca2e9vXkTFGD5uiCtabO5or","EdgeExclusiveUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../Core/Utils"),l=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),u=e("../../TabBar/Script/NgcTabBarManager"),p=e("./EdgeExclusiveManager"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weekValue=null,t.weekLabel=null,t.edgeLabel=null,t.itemIcon=null,t.weeklyRewardInfo=null,t.needRefresh=!1,t}return r(t,e),t.prototype.onLoad=function(){c.Utils.getBrowserType()===c.BROWSER_TYPE.EDGE?this.edgeLabel.setLocalizedText("EES_EDGE_EXCLUSIVE"):this.edgeLabel.setLocalizedText("EES_PLAY_ON_EDGE ")},t.prototype.start=function(){return a(this,void 0,void 0,function(){return s(this,function(){return p.default.edgeExclusiveUIInst=this,this.node.opacity=0,this.node.getComponent(cc.Button).interactable=!1,[2]})})},t.prototype.updateUI=function(){var e,t=this,o=null;if(!p.default.getInstance().isEventEdgeExclusive())return this.node.opacity=0,this.node.getComponent(cc.Button).interactable=!1,void console.log("[EdgeExclusive] - Event not FOUND");if(c.Utils.getBrowserType()===c.BROWSER_TYPE.EDGE)o=p.default.getInstance().getCurrentWeeklyReward();else{var n=p.default.getInstance().getTimeStampRewards(),r=Date.now()/1e3,i=0;n.forEach(function(e){r>=e&&(i+=1)}),o=p.default.getInstance().getRewardByIndex(i-1)}if(null===o)return this.weeklyRewardInfo=null,this.node.opacity=0,this.node.getComponent(cc.Button).interactable=!1,void console.log("[EdgeExclusive] - Reward not FOUND");this.weeklyRewardInfo=o;var a=o.image,s=(null===(e=this.weeklyRewardInfo)||void 0===e?void 0:e.step)||p.default.getInstance().getWeekValueByItemId(this.weeklyRewardInfo.itemId);cc.assetManager.loadRemote(a,function(e,o){if(e)throw new Error("[Edge Exclusive] Failed to load reward image: "+e+" ");t.itemIcon.spriteFrame=new cc.SpriteFrame(o),t.weekValue.string=s.toString(),cc.tween(t.node).delay(1).to(.5,{opacity:255},{easing:"backOut"}).start(),t.node.getComponent(cc.Button).interactable=!0})},t.prototype.onClick=function(){var e=this;this.node.getComponent(cc.Button).interactable=!1;var t=this.weeklyRewardInfo.itemId;c.Utils.getBrowserType()===c.BROWSER_TYPE.EDGE?p.default.getInstance().claimReward(t,function(){e.node.opacity=0,e.node.getComponent(cc.Button).interactable=!0,cc.systemEvent.emit("edgeClaim"),u.NgcTabBarManager.inst.selectTab(u.NgcTabBarManager.inst.tabs[0])}):(p.default.getInstance().openEdgeRedirection("main menu"),this.node.getComponent(cc.Button).interactable=!0)},i([h(cc.Label)],t.prototype,"weekValue",void 0),i([h(l.NgcLabelLocalized)],t.prototype,"weekLabel",void 0),i([h(l.NgcLabelLocalized)],t.prototype,"edgeLabel",void 0),i([h(cc.Sprite)],t.prototype,"itemIcon",void 0),i([f],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../TabBar/Script/NgcTabBarManager":"NgcTabBarManager","./EdgeExclusiveManager":"EdgeExclusiveManager"}],EmojiAnimationHandler:[function(e,t,o){"use strict";cc._RF.push(t,"e7d344kA+tB8JwbGg2Ci3hz","EmojiAnimationHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onAnimationFinishedCallback=null,t}return r(t,e),t.prototype.setAnimationFinishedCallback=function(e){this.onAnimationFinishedCallback=e},t.prototype.onEmojiAnimationFinished=function(){this.onAnimationFinishedCallback&&this.onAnimationFinishedCallback()},i([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],EmojiScrollItem:[function(e,t,o){"use strict";cc._RF.push(t,"38c3agMYBlAaLSPP3IlcCjg","EmojiScrollItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcEmojiScrollItem=void 0;var a=e("../../../GameFramework/Scripts/NgcGame"),s=e("./Emoji"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerName=null,t.flag=null,t.displayName=null,t.displayFlag=null,t.emojiSkeleton=null,t.bubbleNode=null,t.emotesMgr=null,t.emoji=null,t.emojiComp=null,t}return r(t,e),t.prototype.setEmoji=function(e){this.emojiComp=e,this.emojiComp.node.parent=this.bubbleNode,this.emojiSkeleton=e.node.getComponent(sp.Skeleton)},t.prototype.setEmojiPrefab=function(e){this.emoji=e,this.emojiComp=e.getComponent(s.NgcEmoji),this.emoji.parent=this.bubbleNode,this.emoji.scale=.5,this.emoji.x=0,this.emoji.y=0,this.emojiSkeleton=e.getComponent(sp.Skeleton)},t.prototype.reset=function(e){var t=a.NgcGame.inst.findPlayerByNetID(e.playerNetID),o=a.NgcGame.inst.findPlayerByNetID(e.displayNetID);this.playerName.string=t.getName(),this.flag.spriteFrame=t.getCountryFlag(),null!=o?(this.displayName.string=o.getName(),this.displayFlag.spriteFrame=o.getCountryFlag(),this.displayName.node.active=!0,this.displayFlag.node.active=!0):(this.displayName.string="",this.displayName.node.active=!1,this.displayFlag.node.active=!1),cc.tween(this.node).to(.2,{opacity:255}).start(),this.collapseWhenAnimationCompleted()},t.prototype.collapseWhenAnimationCompleted=function(){var e=this;this.emojiComp.onFinishedAnimation(function(){cc.tween(e.node).to(.2,{opacity:0}).call(function(){e.emotesMgr.emojiPoolArray[e.emojiComp.prefabID].put(e.emoji),e.emoji.parent=null,e.emoji=null,e.emotesMgr.putScrollItemToPool(e),e.emotesMgr.checkAndShowPanelScrollView()}).start()}.bind(this))},i([u(cc.Label)],t.prototype,"playerName",void 0),i([u(cc.Sprite)],t.prototype,"flag",void 0),i([u(cc.Label)],t.prototype,"displayName",void 0),i([u(cc.Sprite)],t.prototype,"displayFlag",void 0),i([u(sp.Skeleton)],t.prototype,"emojiSkeleton",void 0),i([u(cc.Node)],t.prototype,"bubbleNode",void 0),i([l],t)}(cc.Component);o.NgcEmojiScrollItem=p,cc._RF.pop()},{"../../../GameFramework/Scripts/NgcGame":"NgcGame","./Emoji":"Emoji"}],Emoji:[function(e,t,o){"use strict";cc._RF.push(t,"f4616YXl2JJOoYAOfEabkus","Emoji");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcEmoji=void 0;var a=e("./EmojiAnimationHandler"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emojiID="",t.emotesMgr=null,t.skeleton=null,t.bubbleNode=null,t.emojiNode=null,t.animationHandler=null,t.isComplete=!1,t}return r(t,e),t.prototype.onLoad=function(){this.skeleton=this.node.getComponent(sp.Skeleton)},t.prototype.update=function(){if(this.bubbleNode){var e=this.node.parent.convertToWorldSpaceAR(this.node.getPosition());0===this.bubbleNode.anchorX&&(e.x-=this.bubbleNode.width/2),this.bubbleNode.setPosition(this.bubbleNode.parent.convertToNodeSpaceAR(e)),this.emojiNode.setPosition(0,0),this.emojiNode.parent=this.bubbleNode.getChildByName("emoji")}},t.prototype.destroyWhenAnimationComplete=function(){var e=this;this.isComplete=!1,this.onFinishedAnimation(function(){e.isComplete||(e.isComplete=!0,e.emotesMgr.putEmojiToPool(e.prefabID,e),cc.tween(e.bubbleNode).to(.1,{scale:.1}).call(function(){e.emotesMgr.putBubbleToPool(e.bubbleNode),e.bubbleNode=null}).start())}.bind(this)),setTimeout(function(){e.destroyAnimation()},3e3)},t.prototype.destroyAnimation=function(){this.isComplete||(this.isComplete=!0,this.emotesMgr.putEmojiToPool(this.prefabID,this),this.bubbleNode&&(this.bubbleNode.scale=.1,this.emotesMgr.putBubbleToPool(this.bubbleNode),this.bubbleNode=null))},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.onFinishedAnimation=function(e){this.animationHandler.setAnimationFinishedCallback(e)},i([l(cc.String)],t.prototype,"emojiID",void 0),i([l(a.default)],t.prototype,"animationHandler",void 0),i([c],t)}(cc.Component);o.NgcEmoji=u,cc._RF.pop()},{"./EmojiAnimationHandler":"EmojiAnimationHandler"}],EmotesManager:[function(e,t,o){"use strict";cc._RF.push(t,"f4132+IwSRFx7V7TiX1kHkA","EmotesManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcEmotesManager=void 0;var a=e("../../../GameFramework/Scripts/BuildConfig"),s=e("../../../GameFramework/Scripts/Network/NgcNetClient"),c=e("../../../GameFramework/Scripts/Network/NgcNetClientRefactor"),l=e("../../../GameFramework/Scripts/NgcGame"),u=e("../../../Services/Platform/Platform"),p=e("../../../Services/Telemetry/Telemetry"),d=e("../../EndGameFlow/Spectator/Script/NgcSpectatorManager"),f=e("./Emoji"),h=e("./EmojiScrollItem"),g=e("../../../GameFramework/Scripts/NgcMain"),y=cc._decorator,m=y.ccclass,_=y.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emojiPrefabs=[],t.bubblePrefab=null,t.scrollItemPrefab=null,t.parentForEmojis=null,t.parentForBubble=null,t.scaleRatioInGame=.6,t.emojiPoolArray=[],t.bubblePool=null,t.scrollItemPool=null,t.followPlayerEmojis=[],t.deadPanelEmojis=[],t.scrollItemEmojis=[],t.currentEmotesUIInst=null,t.EMOJI_BROADCAST_MESSAGE_TYPE="send_emoji",t.POOL_INIT_SIZE_EACH_EMOJI=5,t.POOL_INIT_SIZE_BUBBLE=20,t.POOL_INIT_SIZE_SCROLL_ITEM=5,t.MAX_EMOJI_SHOW_FOR_DEAD_PLAYERS=5,t.broadcastNetID="",t._allowScrollView=!0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst&&cc.error("There are more than 1 EmotesManager!!!"),o.inst=this;for(var e=0;e<this.emojiPrefabs.length;e++){for(var t=new cc.NodePool,n=0;n<this.POOL_INIT_SIZE_EACH_EMOJI;n++){var r=cc.instantiate(this.emojiPrefabs[e]);t.put(r)}this.emojiPoolArray.push(t)}for(this.bubblePool=new cc.NodePool,e=0;e<this.POOL_INIT_SIZE_BUBBLE;e++){var i=cc.instantiate(this.bubblePrefab);this.bubblePool.put(i)}for(this.scrollItemPool=new cc.NodePool,e=0;e<this.POOL_INIT_SIZE_SCROLL_ITEM;e++){var a=cc.instantiate(this.scrollItemPrefab);this.scrollItemPool.put(a)}},t.prototype.onDisable=function(){var e=this;this.followPlayerEmojis.forEach(function(t){e.putBubbleToPool(t.bubbleNode),t.bubbleNode=null,e.putEmojiToPool(t.prefabID,t)}),this.scrollItemEmojis.forEach(function(t){e.emojiPoolArray[t.emojiComp.prefabID].put(t.emoji),t.emoji.parent=null,t.emoji=null,e.putScrollItemToPool(t)}),this.followPlayerEmojis=[],this.scrollItemEmojis=[],o.inst.allowScrollView(!0)},t.prototype.start=function(){u.NgcPlatform.isOfflineMode()||(a.NgcBuildConfig.useNgcServer?c.NgcNetClientRefactor.inst.registerForBroadcastMessageType(this.EMOJI_BROADCAST_MESSAGE_TYPE,this.handleBroadCastmessageEmoji_Refactor.bind(this)):s.NgcNetClient.inst.registerForBroadcastMessageType(this.EMOJI_BROADCAST_MESSAGE_TYPE,this.handleBroadcastMessageEmoji)),this.visibleScrollView(!1)},t.prototype.setBroadcastNetID=function(e){this.broadcastNetID=e},t.prototype.handleBroadcastMessageEmoji=function(e){var t=e.payload;t.playerNetID!==s.NgcNetClient.inst.localPlayerNetID&&(o.inst._allowScrollView?!1===o.inst.checkIfScrollEmojiIsShowingByNetID(t.playerNetID)&&o.inst.addEmoji(t):!1===o.inst.checkIfEmojiIsShowingByNetID(t.playerNetID)&&o.inst.addEmoji(t))},t.prototype.handleBroadCastmessageEmoji_Refactor=function(e){var t=JSON.parse(e.payload);c.NgcNetClientRefactor.inst.isClientID(e.fromID)||(o.inst._allowScrollView?!1===o.inst.checkIfScrollEmojiIsShowingByNetID(t.playerNetID)&&o.inst.addEmoji(t):!1===o.inst.checkIfEmojiIsShowingByNetID(t.playerNetID)&&o.inst.addEmoji(t))},t.prototype.update=function(){var e=this;this.followPlayerEmojis.forEach(function(t){var o=e._getPlayerEmojiPosByID(t.playerNetID);t&&t.node.parent&&t.setWorldPosition(o)})},t.prototype.init=function(e){this._getPlayerEmojiPosByID=e.getPlayerEmojiPosByID,this._isPlayerDeadByID=e.checkPlayerIsDeadByID,this.setParentForEmojisAndBubble(e.parentForEmojis,e.parentForBubble),this.checkAndShowPanelScrollView()},t.prototype.sendEmoji=function(e,t){var o;o=u.NgcPlatform.isOfflineMode()?l.NgcGame.inst.getLocalPlayerNetID():a.NgcBuildConfig.useNgcServer?g.NgcMain.inst.appState===g.AppState.PartyScreen?c.NgcNetClientRefactor.inst.clientID:c.NgcNetClientRefactor.inst.getCombinedNetID():s.NgcNetClient.inst.localPlayerNetID,this.currentEmotesUIInst.mainButtonClicked();var n={emojiID:t,playerNetID:o,currentDisplayNetID:(a.NgcBuildConfig.useNgcServer?this._isPlayerDeadByID(c.NgcNetClientRefactor.inst.getCombinedNetID()):this._isPlayerDeadByID(s.NgcNetClient.inst.localPlayerNetID))&&this._allowScrollView&&null!=d.NgcSpectatorManager.inst?d.NgcSpectatorManager.inst.currDisplayNetID:"",time:(new Date).getTime(),prefabID:e},r=l.NgcGame.inst?l.NgcGame.inst.curGameNetID:"";""!=this.broadcastNetID&&(r=this.broadcastNetID),u.NgcPlatform.isOfflineMode()||(a.NgcBuildConfig.useNgcServer?c.NgcNetClientRefactor.inst.sendNgcBroadcast(this.EMOJI_BROADCAST_MESSAGE_TYPE,n,o):s.NgcNetClient.inst.broadcastMessage(this.EMOJI_BROADCAST_MESSAGE_TYPE,n,r),p.NgcTelemetry.inst.LogEvent_SendEmoji(t)),this.addEmoji(n)},t.prototype.addEmoji=function(e){if(!1===this._isPlayerDeadByID(e.playerNetID)||!this._allowScrollView){var t=this.getBubbleFromPool(),o=(n=this.getEmojiFromPool(e.prefabID)).getComponent(f.NgcEmoji);t.parent=this.parentForBubble,t.scale=.1,t.anchorX=0,cc.tween(t).to(.1,{scale:1}).start(),n.parent=this.parentForEmojis,n.scale=.1,cc.tween(n).to(.1,{scale:this.scaleRatioInGame}).start(),o.destroyWhenAnimationComplete(),o.prefabID=e.prefabID,o.playerNetID=e.playerNetID,o.emotesMgr=this,o.bubbleNode=t,o.emojiNode=n,this.followPlayerEmojis.push(o)}if(this._allowScrollView){var n;this.visibleScrollView(!0),(n=this.getEmojiFromPool(e.prefabID)).scale=.5,(o=n.getComponent(f.NgcEmoji)).prefabID=e.prefabID,o.playerNetID=e.playerNetID,o.emotesMgr=this,o.bubbleNode=null;var r=this.getScrollItemFromPool(),i=r.getComponent(h.NgcEmojiScrollItem);i.setEmojiPrefab(n);var a={playerNetID:e.playerNetID,displayNetID:e.currentDisplayNetID};i.emotesMgr=this,i.reset(a),this.scrollItemEmojis.push(i);var s=this.currentEmotesUIInst.scrollView;r.parent=s.content,s.scrollToBottom()}},t.prototype.allowScrollView=function(e){this._allowScrollView=e},t.prototype.visibleScrollView=function(e){this.currentEmotesUIInst&&this.currentEmotesUIInst.scrollView&&(this.currentEmotesUIInst.scrollView.node.active=e)},t.prototype.checkAndShowPanelScrollView=function(){this.canShowVisualScollView()?this.visibleScrollView(!0):this.visibleScrollView(!1)},t.prototype.canShowVisualScollView=function(){return this.scrollItemEmojis.length>0},t.prototype.extendEmotesUI=function(e){this.currentEmotesUIInst&&this.currentEmotesUIInst.setExtendEmotes(e)},t.prototype.getEmojiFromPool=function(e){return this.emojiPoolArray[e].size()>0?this.emojiPoolArray[e].get():cc.instantiate(this.emojiPrefabs[e])},t.prototype.putEmojiToPool=function(e,t){this.followPlayerEmojis.forEach(function(e,o,n){e===t&&n.splice(o,1)}),this.emojiPoolArray[e].put(t.node)},t.prototype.getBubbleFromPool=function(){return this.bubblePool.size()>0?this.bubblePool.get():cc.instantiate(this.bubblePrefab)},t.prototype.putBubbleToPool=function(e){this.bubblePool.put(e)},t.prototype.getScrollItemFromPool=function(){return this.scrollItemPool.size()>0?this.scrollItemPool.get():cc.instantiate(this.scrollItemPrefab)},t.prototype.putScrollItemToPool=function(e){this.scrollItemEmojis.forEach(function(t,o,n){t===e&&n.splice(o,1)}),this.scrollItemPool.put(e.node)},t.prototype.checkIfEmojiIsShowingByNetID=function(){return!1},t.prototype.checkIfScrollEmojiIsShowingByNetID=function(){return!1},t.prototype.setParentForEmojisAndBubble=function(e,t){this.parentForEmojis=e,this.parentForBubble=t},t.inst=null,i([_({type:[cc.Prefab]})],t.prototype,"emojiPrefabs",void 0),i([_(cc.Prefab)],t.prototype,"bubblePrefab",void 0),i([_(cc.Prefab)],t.prototype,"scrollItemPrefab",void 0),i([_(cc.Node)],t.prototype,"parentForEmojis",void 0),i([_(cc.Node)],t.prototype,"parentForBubble",void 0),i([_],t.prototype,"scaleRatioInGame",void 0),o=i([m],t)}(cc.Component);o.NgcEmotesManager=v,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../../GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../../../GameFramework/Scripts/NgcGame":"NgcGame","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../EndGameFlow/Spectator/Script/NgcSpectatorManager":"NgcSpectatorManager","./Emoji":"Emoji","./EmojiScrollItem":"EmojiScrollItem"}],EmotesUI:[function(e,t,o){"use strict";cc._RF.push(t,"97b30cIjQdArqrpZr+YtZMk","EmotesUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcEmotesUI=void 0;var a=e("./Emoji"),s=e("./EmotesManager"),c=e("./nodeAnimInfo"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainButton=null,t.emojisBoard=null,t.background=null,t.backgroundGrey=null,t.scrollView=null,t.scrollContainer=null,t.parentOfEmoji=null,t.sizeOfEmoji=64,t.numberOfLines=1,t.nodeAnim=[],t.closeEventNode=null,t._listOfEmoji=[],t.canPickEmoji=!0,t.DEFAULT_SCALE=.6,t.DOWN_SCALE=.4,t.currentScale=1,t._isShowUp=!0,t}return r(t,e),t.prototype.onLoad=function(){this.numberOfEmojis=s.NgcEmotesManager.inst.emojiPrefabs.length;for(var e=0;e<this.numberOfEmojis;e++){var t=cc.instantiate(s.NgcEmotesManager.inst.emojiPrefabs[e]),o=t.getChildByName("bg");null!=o&&(o.active=!0,t.scale=this.DEFAULT_SCALE),t.parent=this.background,t.active=!0,this._listOfEmoji.push(t)}this.background.active=!0,this.backgroundGrey.active=!1,this.canPickEmoji=!0,this.showHideGreyBG();var n=cc.find("Canvas");this.closeEventNode||(this.closeEventNode=this.node.getChildByName("EmotesEventButtonClose")),this.closeEventNode&&(this.closeEventNode.getComponent(cc.Widget).target=n,this.closeEventNode.getComponent(cc.Widget).updateAlignment(),this.closeEventNode.on("touchend",this.onTapDown,this),this.enableTouchOutSide(!0))},t.prototype.onTapDown=function(){s.NgcEmotesManager.inst.extendEmotesUI(!1)},t.prototype.onEnable=function(){s.NgcEmotesManager.inst.currentEmotesUIInst=this},t.prototype.start=function(){var e,t=this;e=this.numberOfEmojis%this.numberOfLines==0?this.numberOfEmojis/this.numberOfLines:Math.floor(this.numberOfEmojis/this.numberOfLines)+1;for(var o=(this.background.width*this.background.scaleX-this.sizeOfEmoji*e)/2+this.sizeOfEmoji/2,n=(this.background.height*this.background.scaleY-this.sizeOfEmoji*this.numberOfLines)/2+this.sizeOfEmoji/2,r=0;r<this.numberOfLines;r++)for(var i=0;i<e;i++)if(!(r*e+i>this.numberOfEmojis)){var a=cc.v2(o+this.sizeOfEmoji*i,n+this.sizeOfEmoji*r);this._listOfEmoji[r*e+i].setPosition(a.x,a.y)}this.mainButton.node.on(cc.Node.EventType.TOUCH_END,this.mainButtonClicked,this),this._listOfEmoji.forEach(function(e,o){e.children[0].on(cc.Node.EventType.TOUCH_START,function(){t.pickEmoji(o)},t)}),this.reScale(),cc.view.setResizeCallback(function(){t.reScale()})},t.prototype.reScale=function(){},Object.defineProperty(t.prototype,"isShowUp",{get:function(){return this._isShowUp},enumerable:!1,configurable:!0}),t.prototype.mainButtonClicked=function(){var e=this;this.nodeAnim.forEach(function(t){t&&t.animShow(!e._isShowUp)}),this._isShowUp=!this._isShowUp,this.enableTouchOutSide(this._isShowUp),this.showHideGreyBG(),cc.tween(this.mainButton.node).to(.1,{scale:.7}).to(.1,{scale:1}).start()},t.prototype.enableTouchOutSide=function(){this.closeEventNode&&(this.closeEventNode.active=this._isShowUp)},t.prototype.addNodeAnim=function(e){this.nodeAnim.push(e)},t.prototype.setExtendEmotes=function(e){!this._isShowUp!=!e&&this.mainButtonClicked()},t.prototype.pickEmoji=function(e){var t=this;if(this.canPickEmoji){this.canPickEmoji=!1,this.showHideGreyBG(),setTimeout(function(){t.canPickEmoji=!0,t.showHideGreyBG()},3e3);var o=this._listOfEmoji[e].getComponent(a.NgcEmoji).emojiID;s.NgcEmotesManager.inst.sendEmoji(e,o),null!=this._listOfEmoji[e].getChildByName("bg")?cc.tween(this._listOfEmoji[e]).to(.05,{scale:this.DOWN_SCALE}).to(.05,{scale:this.DEFAULT_SCALE}).start():cc.tween(this._listOfEmoji[e]).to(.05,{scale:.7}).to(.05,{scale:1}).start()}},t.prototype.showHideGreyBG=function(){this.backgroundGrey.active=this.background.active&&!this.canPickEmoji},t.prototype.enableEmojisBoard=function(e){this.canPickEmoji=e,this.backgroundGrey.active=this.background.active&&!this.canPickEmoji},i([p(cc.Button)],t.prototype,"mainButton",void 0),i([p(cc.Node)],t.prototype,"emojisBoard",void 0),i([p(cc.Node)],t.prototype,"background",void 0),i([p(cc.Node)],t.prototype,"backgroundGrey",void 0),i([p(cc.ScrollView)],t.prototype,"scrollView",void 0),i([p(cc.Node)],t.prototype,"scrollContainer",void 0),i([p(cc.Node)],t.prototype,"parentOfEmoji",void 0),i([p],t.prototype,"sizeOfEmoji",void 0),i([p],t.prototype,"numberOfLines",void 0),i([p([c.NgcNodeAnimInfo])],t.prototype,"nodeAnim",void 0),i([p(cc.Node)],t.prototype,"closeEventNode",void 0),i([u],t)}(cc.Component);o.NgcEmotesUI=d,cc._RF.pop()},{"./Emoji":"Emoji","./EmotesManager":"EmotesManager","./nodeAnimInfo":"nodeAnimInfo"}],EnemyAnimBase:[function(e,t,o){"use strict";cc._RF.push(t,"d10df7SOapPn5RJQjwZuCAH","EnemyAnimBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../BlendAnimBase"),s=e("../Network/HSANetUtils"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skinlist=[],t}return r(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){this.skinlist.length>0?this.setSkinByName(this.skinlist[s.default.RandomRange(0,this.skinlist.length-1,!0)]):e.prototype.setRandomSkin.call(this)},i([u({type:[cc.String]})],t.prototype,"skinlist",void 0),i([l],t)}(a.default);o.default=p,cc._RF.pop()},{"../BlendAnimBase":"BlendAnimBase","../Network/HSANetUtils":"HSANetUtils"}],EnemyControllerBase:[function(e,t,o){"use strict";cc._RF.push(t,"db981T2x5NFWKo1WpNnXSt5","EnemyControllerBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.EnemyType=o.State_OffScreen=o.State_InWaterSurface=o.State_Die=o.State_Swim=o.State_PreInit=void 0;var a,s=e("../../globals"),c=e("../CharacterControllerBase"),l=e("../DeathZoneManager"),u=e("../GameObject"),p=e("../HSAUtils"),d=e("../Maps/MapController"),f=e("../Network/HSANetUtils"),h=e("../OffScreen/OffScreen"),g=e("../GameEnums"),y=e("../TuningData"),m=e("../WaterSurface/WaterSurfaceManager"),_=cc._decorator,v=_.ccclass,S=_.property;o.State_PreInit="PreInit",o.State_Swim="Swim",o.State_Die="Die",o.State_InWaterSurface="InwaterSurface",o.State_OffScreen="OffScreen",function(e){e[e.UnKnow=0]="UnKnow",e[e.ClowFish=1]="ClowFish",e[e.Tuna=2]="Tuna",e[e.Mahi=3]="Mahi",e[e.food_4=4]="food_4",e[e.food_5=5]="food_5",e[e.bird=6]="bird",e[e.Diver=7]="Diver",e[e.Swimmer=8]="Swimmer",e[e.SharkMeat=9]="SharkMeat"}(a=o.EnemyType||(o.EnemyType={}));var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curState=o.State_PreInit,t.guidedDirection=null,t.scoreColor=cc.color(255,255,255,255),t.pointsPerKill=0,t.hpBonusPerKill=0,t.scoreFontSize=0,t.foodData=null,t._changeDirectionTimer=0,t._speedAccelerationPerS=0,t._maxSpeed=0,t.timeInDeathZone=0,t.timeSwimAvoidDeathZone=0,t.isReDirectAvoidDeathZone=!1,t.enemyType=a.ClowFish,t.foodHUD=null,t.offScreen=null,t.listFoodAllowBlood=[a.Tuna,a.Mahi,a.food_4,a.Diver,a.Swimmer],t}var n;return r(t,e),n=t,t.prototype.onLoad=function(){null!=this.foodHUD&&(this.foodHUD.parent=s.default.SceneManager.inst.hpOfSharksNode),e.prototype.onLoad.call(this)},t.prototype.start=function(){if(y.default.inst&&y.default.inst.getGameParameters()){e.prototype.start.call(this);var t=y.default.inst.getGameParameters().PreyControl.Map1;this.startSpeed=t.start_speed,this.rotatableAnglePerSecond=t.turn_rate_persec,this.foodData=y.default.inst.getGameParameters().PreyStats,this.setFoodType(this.enemyType),this.reset(),s.default.SceneManager.inst.addEnemy(this),this.offScreen=this.node.getComponent(h.default),this.updateHPBarTransform()}},t.prototype.initParameter=function(e){this.setScoreColor(cc.color(238,229,22,255)),this.setPointPerKill(e.value),this.setBonusHP(e.hp_bonus),this.setScoreFontSize(e.score_font_size),this.setScaleSize(e.scale_size),this._maxSpeed=e.max_speed,this._speedAccelerationPerS=this._maxSpeed-this.startSpeed},t.prototype.setFoodType=function(e){switch(e){case a.ClowFish:this.initParameter(this.foodData.Clowfish);break;case a.Tuna:this.initParameter(this.foodData.Tuna);break;case a.Mahi:this.initParameter(this.foodData.Mahi);break;case a.food_4:this.initParameter(this.foodData.Eel);break;case a.food_5:break;case a.bird:this.initParameter(this.foodData.Pelican);break;case a.Diver:this.initParameter(this.foodData.Diver);break;case a.Swimmer:this.initParameter(this.foodData.Swimmer);break;case a.SharkMeat:this.initParameter(this.foodData.SharkMeat)}},t.prototype.update=function(e){this.work(e),this.isInTheSurface()&&this.setState(o.State_InWaterSurface),this.updateleaveSurface(),this.KillThisInDeathZone(e)},t.prototype.lateUpdate=function(){this.updateHPBarTransform()},t.prototype.updateHPBarTransform=function(){if(null!=this.foodHUD&&0!=this.foodHUD.active){var e=this.foodHUD,t=this.getWorldPosition(),o=cc.v2(t.x,t.y).add(cc.Vec2.UP.mul(.55*this.node.height*Math.abs(this.node.scaleY)));e&&e.setPosition(e.parent.convertToNodeSpaceAR(o)),e.scale=.8}},t.prototype.KillThisInDeathZone=function(e){l.default.inst.checkPointInDeatchZone(this.getWorldPosition())?(this.timeInDeathZone+=e,this.timeInDeathZone>=n.TIME_LIVED_IN_DEATHZONE&&this.node.destroy()):this.timeInDeathZone=0},t.prototype.work=function(e){switch(this.curState){case o.State_Swim:this._workstate_Swim(e),this._workstate_MagnetEffect(e);break;case o.State_Die:this._workstate_Die(e);break;case o.State_InWaterSurface:this._workstate_InSurface(e);break;case o.State_OffScreen:this._workstate_OffScreen(e)}return!0},t.prototype.setState=function(e){if(e!==this.curState){switch(this.curState,e){case o.State_Swim:this._isInWaterSurface=!1;break;case o.State_InWaterSurface:this._isInWaterSurface=!0}this.curState=e}},t.prototype.reset=function(){this.curState=o.State_Swim,this.guidedDirection=null,this._curSpeed=this.startSpeed},t.prototype._workstate_InSurface=function(e){this._workstate_Swim(e)},t.prototype._workstate_Swim=function(e){if(this.offScreen.IsNodeVisible(this.node)){if(this._changeDirectionTimer<=0&&this.randomNewDirection(),this.applyAcceleration(e),this.redirectToAvoidDeathZone(e),this._isInWaterSurface){this.navigateFollowGuidedDirection(e,this.guidedDirection);var t=this._curDirection.y>0?0:this._curDirection.y;this.applyMovement(e,cc.v2(this._curDirection.x,t))}else this.navigateFollowGuidedDirection(e,this.guidedDirection),this.applyMovement(e);this._changeDirectionTimer-=e}else this.setState(o.State_OffScreen)},t.prototype._workstate_MagnetEffect=function(e){if(this.offScreen.IsNodeVisible(this.node)){var t=s.default.PlayerController.localPlayer;if(null!==t&&!t.isPlayerDie()&&t.curState!=g.PlayerState.OnHelicopter&&t.curState!=g.PlayerState.Win&&t.curState!=g.PlayerState.Dead&&!1!==t.canEat(this.node)){var n=s.default.PlayerController.localPlayer.node.getPosition();if(cc.Vec2.distance(n,this.node.getPosition())<y.default.inst.getGameParameters().shark.magnet_distance_per_sizes[t.curSize]){var r=n.sub(cc.v2(this.node.x,this.node.y)).normalize();this.applyMovement(e,r,y.default.inst.getGameParameters().bot.magnet_speed)}}}else this.setState(o.State_OffScreen)},t.prototype.redirectToAvoidDeathZone=function(){},t.prototype.randomNewDirection=function(){if(!this.isReDirectAvoidDeathZone){var e=f.default.RandomRange(n.FREEMOVE_CHANGE_DIRECTION_TIME_MIN,n.FREEMOVE_CHANGE_DIRECTION_TIME_MAX),t=f.default.RandomRange(0,360);this.guidedDirection=p.default.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(t))),this._changeDirectionTimer=e}},t.prototype._workstate_OffScreen=function(){this.offScreen.IsNodeVisible(this.node)&&this.setState(o.State_Swim)},t.prototype.applyAcceleration=function(e){if(this._curSpeed<this.startSpeed&&(this._curSpeed=this.startSpeed),this._maxSpeed>this.startSpeed){var t=this._speedAccelerationPerS*e;this._curSpeed=Math.min(this._curSpeed+t,this._maxSpeed)}},t.prototype._workstate_Die=function(){},t.prototype.removeHUD=function(){var e=this;null!=this.foodHUD&&(this.foodHUD.parent=null,this.foodHUD.active=!1,this.scheduleOnce(function(){e.foodHUD.destroy()},2))},t.prototype.onCollisionEnter=function(e){var t=e.node.getComponent(u.default);if(t.objectType==u.GameObjectType.Player&&(e.tag===g.ColliderTag.Attackable||e.tag===g.ColliderTag.CanBeAttacked))switch(this.node.getComponent(u.default).objectType){case u.GameObjectType.Food:t.node.parent.emit("collideWithFood",this);break;case u.GameObjectType.Enemy:}},t.prototype.isInTheSurface=function(){return this.enemyType!=a.bird&&this.getWorldPosition().y>d.default.inst.surface.getComponent(m.default).getWorldPosition().y},t.prototype.updateleaveSurface=function(){var e=d.default.inst.surface.getComponent(m.default);this.curState===o.State_InWaterSurface&&this.getWorldPosition().y<e.getWorldPosition().y&&this.setState(o.State_Swim)},t.prototype.getScoreColor=function(){return this.scoreColor},t.prototype.setScoreColor=function(e){this.scoreColor=e},t.prototype.getPointPerKill=function(){return this.pointsPerKill},t.prototype.setPointPerKill=function(e){this.pointsPerKill=e},t.prototype.setBonusHP=function(e){this.hpBonusPerKill=e},t.prototype.getBonusHP=function(){return this.hpBonusPerKill},t.prototype.setScoreFontSize=function(e){this.scoreFontSize=e},t.prototype.getScoreFontSize=function(){return this.scoreFontSize},t.prototype.setScaleSize=function(e){this.node.scale=e},t.prototype.onDestroy=function(){s.default.SceneManager.inst.destroyEnemyByuuid(this.node.uuid)},t.FREEMOVE_CHANGE_DIRECTION_TIME_MIN=.5,t.FREEMOVE_CHANGE_DIRECTION_TIME_MAX=5,t.TIME_LIVED_IN_DEATHZONE=3,t.DISTANCE_CHANGE_DIRECTION_AVOID_DEATHZONE=150,t.TIME_SWIM_AVOID_DEATHZONE=10,i([S({type:cc.Enum(a)})],t.prototype,"enemyType",void 0),i([S(cc.Node)],t.prototype,"foodHUD",void 0),n=i([v],t)}(c.default);o.default=b,cc._RF.pop()},{"../../globals":"globals","../CharacterControllerBase":"CharacterControllerBase","../DeathZoneManager":"DeathZoneManager","../GameEnums":"GameEnums","../GameObject":"GameObject","../HSAUtils":"HSAUtils","../Maps/MapController":"MapController","../Network/HSANetUtils":"HSANetUtils","../OffScreen/OffScreen":"OffScreen","../TuningData":"TuningData","../WaterSurface/WaterSurfaceManager":"WaterSurfaceManager"}],Enemy_FishInFlock:[function(e,t,o){"use strict";cc._RF.push(t,"57346QPzR1Eg7lm6UwADl87","Enemy_FishInFlock");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.State_FollowPursuit=o.State_RunAway=void 0;var a=e("./EnemyControllerBase"),s=e("../../globals"),c=e("../../Scripts/HSAUtils"),l=e("../SceneManager"),u=cc._decorator,p=u.ccclass;u.property,o.State_RunAway="RunAway",o.State_FollowPursuit="FollowPursuit";var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curPursuit=null,t}var n;return r(t,e),n=t,t.prototype.initPursuit=function(e){this.curPursuit=e.pursuit,this.indexInFlock=e.index,this.setState(o.State_FollowPursuit)},t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.start=function(){e.prototype.start.call(this),this.setScoreColor(cc.color(255,255,255,255)),l.default.inst.addClowFish(this.node)},t.prototype.update=function(t){this.work(t),e.prototype.KillThisInDeathZone.call(this,t)},t.prototype.work=function(t){if(!e.prototype.work.call(this,t))return!1;switch(this.curState){case o.State_FollowPursuit:this._workstate_Swim_FishInFlock(t),this._workstate_MagnetEffect(t);break;case o.State_RunAway:this._workstate_RunAwayPlayers(t),this._workstate_MagnetEffect(t)}},t.prototype.setState=function(t){t===a.State_Swim&&(t=o.State_FollowPursuit,this._isInWaterSurface=!1),e.prototype.setState.call(this,t)},t.prototype.applyMovement=function(t,o,n){o||(o=this._curDirection),this.isInTheSurface()&&o.y>0&&(o.y=0),e.prototype.applyMovement.call(this,t,o,n)},t.prototype._workstate_Swim_FishInFlock=function(e){if(this.offScreen.IsNodeVisible(this.node)){if(s.default.PlayerController.localPlayer&&s.default.PlayerController.localPlayer.node){var t=c.default.getWorldPos(s.default.PlayerController.localPlayer.node);if(cc.Vec2.distance(t,this.getWorldPosition())<=n.SHYING_DANGER_DISTANCE)this.setState(o.State_RunAway);else{this._curSpeed=this.startSpeed;var r=this.curPursuit.getFishPositionByIndex(this.indexInFlock),i=this.getWorldPosition(),l=r.sub(i).normalize(),u=cc.Vec2.distance(r,i);this._curSpeed=Math.min(u,this._curSpeed*e),this.applyAcceleration(e),this.navigateFollowGuidedDirection(e,l),this.applyMovement(e,l)}}}else this.setState(a.State_OffScreen)},t.prototype._workstate_RunAwayPlayers=function(e){this._curSpeed=2*this.startSpeed;var t=s.default.PlayerController.localPlayer.node.getPosition();if(cc.Vec2.distance(t,this.node.getPosition())>n.SHYING_DANGER_DISTANCE)this.setState(o.State_FollowPursuit);else{var r=this.node.getPosition().sub(cc.v2(t.x,t.y));this.navigateFollowGuidedDirection(e,r),this.applyMovement(e)}},t.prototype.onDestroy=function(){l.default.inst.removeClowFish(this.node.uuid),e.prototype.onDestroy.call(this)},t.SHYING_DANGER_DISTANCE=200,t.SHYING_SAFE_DISTANCE=300,n=i([p],t)}(a.default);o.default=d,cc._RF.pop()},{"../../Scripts/HSAUtils":"HSAUtils","../../globals":"globals","../SceneManager":"SceneManager","./EnemyControllerBase":"EnemyControllerBase"}],Enemy_FishPursuit:[function(e,t,o){"use strict";cc._RF.push(t,"daa79Rd3Y5DPpcwv+AX4D9J","Enemy_FishPursuit");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./EnemyControllerBase"),s=e("../Network/HSANetUtils"),c=e("./Enemy_FishInFlock"),l=e("../HSAUtils"),u=e("../TuningData"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fishPrefab=null,t.fishOffsets=[],t.fishPositionOffets=[],t.arrayOfFishes=[],t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){if(u.default.inst&&u.default.inst.getGameParameters()){e.prototype.onLoad.call(this);var t=u.default.inst.getGameParameters().PreyControl.Map1.num_fish_in_flock;s.default.RandomRange(0,t)>=10?this.numberOfFishes=s.default.RandomRange(8,11,!0):this.numberOfFishes=s.default.RandomRange(3,7,!0)}},t.prototype.start=function(){e.prototype.start.call(this);for(var t=0;t<this.numberOfFishes;t++){var n=cc.instantiate(this.fishPrefab);n.parent=this.node.parent;var r=l.default.getWorldPos(this.node);l.default.setWorldPos(n,cc.v2(r.x+10*t,r.y+10*t));var i=n.getComponent(c.default);i.initPursuit({pursuit:this,index:t}),this.fishOffsets.push(o.fishFlock_Offsets[t]),this.fishPositionOffets.push({x:0,y:0}),this.arrayOfFishes.push(i)}this.numberOfAliveFishes=this.numberOfFishes,this.fishWidth=50,this.startSpeed=this.startSpeed/3},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.randomNewDirection=function(){e.prototype.randomNewDirection.call(this),this.calculateFishPositionOffsets()},t.prototype.getFishPositionByIndex=function(e){var t=this.getWorldPosition();return cc.v2(t.x+this.fishPositionOffets[e].x,t.y+this.fishPositionOffets[e].y)},t.prototype.KillThisInDeathZone=function(){},t.prototype.calculateFishPositionOffsets=function(){var e=this,t=this.node.angle+180;this.fishOffsets.forEach(function(o,n){var r=cc.v2(o.x*e.fishWidth,o.y*e.fishWidth),i=l.default.cartesianToPolar(r);i.y=cc.misc.degreesToRadians(t-(cc.misc.radiansToDegrees(i.y)-45));var a=l.default.polarToCartesian(i);e.fishPositionOffets[n].x=a.x,e.fishPositionOffets[n].y=a.y})},t.fishFlock_Offsets=[{x:1,y:1},{x:1,y:2},{x:2,y:1},{x:2,y:2},{x:2,y:3},{x:3,y:2},{x:3,y:3},{x:4,y:2},{x:2,y:4},{x:3,y:4},{x:4,y:3}],i([f(cc.Prefab)],t.prototype,"fishPrefab",void 0),o=i([d],t)}(a.default);o.default=h,cc._RF.pop()},{"../HSAUtils":"HSAUtils","../Network/HSANetUtils":"HSANetUtils","../TuningData":"TuningData","./EnemyControllerBase":"EnemyControllerBase","./Enemy_FishInFlock":"Enemy_FishInFlock"}],Enemy_Mahi:[function(e,t,o){"use strict";cc._RF.push(t,"d28e7P7SBVEBJRXZeYSIHUN","Enemy_Mahi");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./EnemyControllerBase"),s=e("../SceneManager"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.start=function(){s.default.inst.addMahi(this.node),e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){s.default.inst.removeMahi(this.node.uuid),e.prototype.onDestroy.call(this)},i([l],t)}(a.default));o.default=u,cc._RF.pop()},{"../SceneManager":"SceneManager","./EnemyControllerBase":"EnemyControllerBase"}],Enemy_Shying:[function(e,t,o){"use strict";cc._RF.push(t,"6d8b4cIy/pO+qyG3Yzbze7F","Enemy_Shying");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.State_RunAway=void 0;var a=e("./EnemyControllerBase"),s=e("../../globals"),c=cc._decorator,l=c.ccclass;c.property,o.State_RunAway="RunAway";var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return r(t,e),n=t,t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.start=function(){e.prototype.start.call(this),this.setScoreColor(cc.color(255,255,255,255))},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.work=function(t){if(!e.prototype.work.call(this,t))return!1;switch(this.curState){case a.State_Swim:this._workstate_Swim_Shying(t),this._workstate_MagnetEffect(t);break;case o.State_RunAway:this._workstate_RunAwayPlayers(t),this._workstate_MagnetEffect(t)}},t.prototype.setState=function(t){switch(e.prototype.setState.call(this,t),t){case a.State_Swim:this._curSpeed=this.startSpeed;break;case o.State_RunAway:this._curSpeed=3*this.startSpeed/2}},t.prototype._workstate_Swim_Shying=function(){var e=s.default.PlayerController.localPlayer.node.getPosition();cc.Vec2.distance(e,this.node.getPosition())<=n.SHYING_DANGER_DISTANCE&&this.setState(o.State_RunAway)},t.prototype._workstate_RunAwayPlayers=function(e){var t=s.default.PlayerController.localPlayer.node.getPosition();if(cc.Vec2.distance(t,this.node.getPosition())>n.SHYING_DANGER_DISTANCE)this.setState(a.State_Swim);else{var o=this.node.getPosition().sub(cc.v2(t.x,t.y));this.navigateFollowGuidedDirection(e,o),this.applyMovement(e)}},t.SHYING_DANGER_DISTANCE=300,t.SHYING_SAFE_DISTANCE=400,n=i([l],t)}(a.default);o.default=u,cc._RF.pop()},{"../../globals":"globals","./EnemyControllerBase":"EnemyControllerBase"}],Enemy_Tuna:[function(e,t,o){"use strict";cc._RF.push(t,"94721P+A+5Lmou66s4u4pob","Enemy_Tuna");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./EnemyControllerBase"),s=e("../SceneManager"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.start=function(){s.default.inst.addTuna(this.node),e.prototype.start.call(this)},t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.onDestroy=function(){s.default.inst.removeTuna(this.node.uuid),e.prototype.onDestroy.call(this)},i([l],t)}(a.default));o.default=u,cc._RF.pop()},{"../SceneManager":"SceneManager","./EnemyControllerBase":"EnemyControllerBase"}],Event:[function(e,t,o){"use strict";cc._RF.push(t,"9689dTp4eZL/qTekW6cQQL9","Event"),Object.defineProperty(o,"__esModule",{value:!0}),o.emit=void 0,o.emit=function(e,t){e.forEach(function(e){e&&e(t)})},cc._RF.pop()},{}],Fake3DRotation:[function(e,t,o){"use strict";cc._RF.push(t,"3f702J09IdNPa0krqe1bp4W","Fake3DRotation");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./GameCamera"),s=e("./../globals"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainCamera=null,t.isTopSurface=!0,t.maxSize=1500,t.mainCameraOffsetScaleX=1,t.isPlane3D=!1,t.isBottomSurface=!0,t.mainCameraOffsetScaleY=1,t.myStartX=0,t.myStartY=0,t}return r(t,e),t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.getSize=function(){return this.node.getContentSize()},t.prototype.getTop=function(){return this.getWorldPosition().y+this.size.height+50},t.prototype.getBottom=function(){return this.getWorldPosition().y-this.size.height+50},t.prototype.getLeft=function(){return this.getWorldPosition().x-this.size.width/2},t.prototype.getRight=function(){return this.getWorldPosition().x+this.size.width/2},t.prototype.normalize=function(e,t,o,n,r){return n+(e-t)*(r-n)/(o-t)},t.prototype.clamp=function(e,t,o){return Math.min(Math.max(e,t),o)},t.prototype.onLoad=function(){this.myStartX=this.getWorldPosition().x,this.myStartY=this.getWorldPosition().y,this.size=this.getSize()},t.prototype.start=function(){},t.prototype.update=function(){var e=this.mainCamera.getWorldPosition().y,t=this.node.scaleX,o=this.node.scaleY,n=this.getTop(),r=this.getBottom();if(this.isTopSurface&&!this.isPlane3D)o=this.clamp(this.normalize(e,r,n,-1,1),0,1)*this.maxSize;else if(this.isPlane3D){var i=this.clamp(this.normalize(e,r,n,-1,1),0,1);this.node.eulerAngles=cc.v3(90-20*i,0,0)}this.isBottomSurface&&(o=this.clamp(this.normalize(e,n,r,-1,1),0,1)),this.node.setScale(t,o)},i([u(a.default)],t.prototype,"mainCamera",void 0),i([u],t.prototype,"isTopSurface",void 0),i([u],t.prototype,"maxSize",void 0),i([u({visible:function(){return this.isTopSurface}})],t.prototype,"mainCameraOffsetScaleX",void 0),i([u({visible:function(){return this.isTopSurface}})],t.prototype,"isPlane3D",void 0),i([u],t.prototype,"isBottomSurface",void 0),i([u({visible:function(){return this.isBottomSurface}})],t.prototype,"mainCameraOffsetScaleY",void 0),i([l],t)}(cc.Component);o.default=p,s.default.Parallax=p,cc._RF.pop()},{"./../globals":"globals","./GameCamera":"GameCamera"}],FakeNamesManager:[function(e,t,o){"use strict";cc._RF.push(t,"26c3faHmJ1KS7jIVd6cqK/s","FakeNamesManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Network/HSANetUtils"),s=(e("convert-csv-to-array").convertCSVToArray,cc._decorator),c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fakeNamesList=null,t.nameTable={},t.tempFlatlist=[],t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst||(o.inst=this,this.fakeNamesList&&this.parseInputFile())},t.prototype.allocRandomPerson=function(){var e=this.tempFlatlist.length,t=a.default.RandomRange(0,e,!0),o=this.tempFlatlist[t];return this.tempFlatlist.splice(t,1),o},t.prototype.resetNameAllocation=function(){var e=this;this.tempFlatlist=[],Object.keys(this.nameTable).forEach(function(t){var o=e.nameTable[t],n=o.maleNames,r=o.femaleNames;n.forEach(function(o){var n={countryCode:t,name:o,sex:"M"};e.tempFlatlist.push(n)}),r.forEach(function(o){var n={countryCode:t,name:o,sex:"F"};e.tempFlatlist.push(n)})}),cc.log("Generated flat list of fake names")},t.prototype.addNames=function(e,t,o){var n=null;n=this.nameTable.hasOwnProperty(e)?this.nameTable[e]:{code:e,maleNames:[],femaleNames:[]},t?n.maleNames=n.maleNames.concat(o):n.femaleNames=n.femaleNames.concat(o),this.nameTable[e]=n},t.prototype.parseInputFile=function(){var e=this.fakeNamesList.text.split("\r\n"),t=this;try{e.forEach(function(e){var o=e.split(","),n=o[0];if(null!=n&&0!=n.length){var r=o[1].toLowerCase(),i="Male"==o[2],a=o.splice(3),s=[];a.forEach(function(e){e.length>0&&s.push(e)}),0!=s.length&&t.addNames(r,i,s)}})}catch(o){return console.error("Error reading names file. Format error?"),!1}return!0},t.prototype.start=function(){},t.inst=null,i([l(cc.TextAsset)],t.prototype,"fakeNamesList",void 0),o=i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./Network/HSANetUtils":"HSANetUtils","convert-csv-to-array":14}],FakeNames:[function(e,t,o){"use strict";cc._RF.push(t,"815fen3LpdOSYfphX7Rvb1S","FakeNames");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../NanoGameCore/GameFramework/Scripts/Network/NetUtils"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fakeNamesList=null,t.nameTable={},t.tempFlatlist=[],t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst||(o.inst=this,this.fakeNamesList&&this.parseInputFile())},t.prototype.allocRandomPerson=function(){var e=this.tempFlatlist.length,t=a.NgcNetUtils.RandomRange(0,e-1,!0),o=this.tempFlatlist[t];return this.tempFlatlist.splice(t,1),o},t.prototype.initFlatList=function(){var e=this;this.tempFlatlist=[],Object.keys(this.nameTable).forEach(function(t){var o=e.nameTable[t],n=o.maleNames,r=o.femaleNames;n.forEach(function(o){var n={countryCode:t,name:o,sex:"M"};e.tempFlatlist.push(n)}),r.forEach(function(o){var n={countryCode:t,name:o,sex:"F"};e.tempFlatlist.push(n)})}),console.log("Generated flat list of fake names")},t.prototype.addNames=function(e,t,o){var n=null;n=this.nameTable.hasOwnProperty(e)?this.nameTable[e]:{code:e,maleNames:[],femaleNames:[]},t?n.maleNames=n.maleNames.concat(o):n.femaleNames=n.femaleNames.concat(o),this.nameTable[e]=n},t.prototype.parseInputFile=function(){var e=this.fakeNamesList.text.split("\r\n"),t=this;try{e.forEach(function(e){var o=e.split(","),n=o[0];if(null!=n&&0!=n.length){var r=o[1].toLowerCase(),i="Male"==o[2],a=o.splice(3),s=[];a.forEach(function(e){e.length>0&&s.push(e)}),0!=s.length&&t.addNames(r,i,s)}})}catch(o){return console.error("Error reading names file. Format error?"),!1}return!0},t.prototype.start=function(){},t.inst=null,i([l(cc.TextAsset)],t.prototype,"fakeNamesList",void 0),o=i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/Network/NetUtils":"NetUtils"}],FlockManager:[function(e,t,o){"use strict";cc._RF.push(t,"acc977bER9DzIlyU18HsI0T","FlockManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../TuningData"),s=e("../Maps/MapController"),c=e("../../Scripts/HSAUtils"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fishPursuitPrefab=null,t.container=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){if(a.default.inst&&a.default.inst.getGameParameters()){var e=a.default.inst.getGameParameters().PreyControl.Map1;this.numberOfFlock=e.num_flock}},t.prototype.createFlocks=function(){for(var e=0;e<this.numberOfFlock;e++){var t=cc.instantiate(this.fishPursuitPrefab);t.parent=this.container;var o=s.default.inst.randomClowFishSpawnWPos();c.default.setWorldPos(t,o)}},t.prototype.reset=function(){},t.inst=null,i([p(cc.Prefab)],t.prototype,"fishPursuitPrefab",void 0),i([p(cc.Node)],t.prototype,"container",void 0),o=i([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../Scripts/HSAUtils":"HSAUtils","../Maps/MapController":"MapController","../TuningData":"TuningData"}],FontsManager:[function(e,t,o){"use strict";cc._RF.push(t,"bd06bTHDMtCkppeaZY3pjQ2","FontsManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcFontsManager=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.quartc=null,t.defaultFont=null,t.UbisoftSansRegular=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.inst=null,i([c(cc.Font)],t.prototype,"quartc",void 0),i([c(cc.Font)],t.prototype,"defaultFont",void 0),i([c(cc.Font)],t.prototype,"UbisoftSansRegular",void 0),o=i([s],t)}(cc.Component);o.NgcFontsManager=l,cc._RF.pop()},{}],FullScreenButton:[function(e,t,o){"use strict";cc._RF.push(t,"f31c5GvBp5OU52rH6Q1Tg5T","FullScreenButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Core/Utils"),s=e("../../Services/Platform/Platform"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enterFSIcon=null,t.exitFSIcon=null,t.btnSprite=null,t}return r(t,e),t.prototype.start=function(){cc.sys.isMobile?(this.node.active=!1,this.node.opacity=0,this.node.getComponent(cc.Button).enabled=!1):s.NgcPlatform&&s.NgcPlatform.inst&&s.NgcPlatform.inst.getName()==a.Utils.enumToString(s.PlatformID,s.PlatformID.Poki)?(this.node.active=!1,this.node.opacity=0,this.node.getComponent(cc.Button).enabled=!1):(this.node.active=!0,this.btnSprite=this.node.getComponent(cc.Sprite))},t.prototype.onClick=function(){cc.sys.isMobile||s.NgcPlatform&&s.NgcPlatform.inst&&s.NgcPlatform.inst.getName()==a.Utils.enumToString(s.PlatformID,s.PlatformID.Poki)||(cc.screen.fullScreen()?(this.btnSprite.spriteFrame=this.enterFSIcon,cc.screen.exitFullScreen()):(this.btnSprite.spriteFrame=this.exitFSIcon,cc.screen.requestFullScreen()))},i([u(cc.SpriteFrame)],t.prototype,"enterFSIcon",void 0),i([u(cc.SpriteFrame)],t.prototype,"exitFSIcon",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../Core/Utils":"Utils","../../Services/Platform/Platform":"Platform"}],GIF:[function(e,t,o){"use strict";cc._RF.push(t,"c63d8V3c2NPzYNB3sN3b21c","GIF");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.GIFCache=o.GIF=o.FileHead=o.FileType=void 0;var i,a=e("../../../Scripts/Performance/SplittedAsyncTask"),s=e("./LZW");(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PNG=1]="PNG",e[e.JPG=2]="JPG",e[e.GIF=3]="GIF",e[e.WEBP=4]="WEBP"})(i=o.FileType||(o.FileType={}));var c=function(){function e(){}return e.IMAGE_PNG="89504e47",e.IMAGE_JPG="ffd8ff",e.IMAGE_GIF="474946",e.RIFF="52494646",e.WEBP_RIFF=e.RIFF,e.WEBP_WEBP="57454250",e}();o.FileHead=c;var l=function(){function e(){this._offset=0,this._info={header:"",frames:[],comment:""},this._delays=[],this._spriteFrames=[],this._canvas=null,this._context=null,this.id="GIF",this.async=!0}return Object.defineProperty(e.prototype,"buffer",{get:function(){return this._buffer},set:function(e){this.clear(),this._buffer=e,this._view=new Uint8Array(e)},enumerable:!1,configurable:!0}),e.prototype.handle=function(e,t){var o=this;this.buffer=e,this.getHeader(),this.getScrDesc(),this._splitAsyncHandler=new a.default(16,function(){0==o._spriteFrames.length?t(new Error("gif\u52a0\u8f7d\u5931\u8d25,\u5e27\u957f\u5ea6\u4e3a0")):t(null,{delays:o._delays,spriteFrames:o._spriteFrames,length:o._info.frames.length})}),this.getTexture()},e.detectFormat=function(e){return-1!=e.indexOf(c.IMAGE_GIF)?i.GIF:-1!=e.indexOf(c.IMAGE_PNG)?i.PNG:-1!=e.indexOf(c.IMAGE_JPG)?i.JPG:-1!=e.indexOf(c.WEBP_RIFF)&&-1!=e.indexOf(c.WEBP_WEBP)?i.WEBP:i.UNKNOWN},e.bytes2HexString=function(e){for(var t="",o=0;o<e.length;o++){var n,r=e[o];1==(n=r<0?(255+r+1).toString(16):r.toString(16)).length&&(n="0"+n),t+=n}return t},e.prototype.getTexture=function(){for(var e=0,t=0,o=this._info.frames;t<o.length;t++){var n=o[t];this._splitAsyncHandler.addTask(this.decodeFrame2Texture,this,[n,e++])}this._splitAsyncHandler.start()},e.prototype.getSpriteFrame=function(e){return this._spriteFrames[e]?this._spriteFrames[e]:this.decodeFrame2Texture(this._info.frames[e],e)},e.prototype.decodeFrame=function(e){var t=this,o=this._context.getImageData(e.img.x,e.img.y,e.img.w,e.img.h);return e.img.m?this._tab=e.img.colorTab:this._tab=this._info.colorTab,s.default.decode(e.img.srcBuf,e.img.codeSize).forEach(function(n,r){o.data[4*r]=t._tab[3*n],o.data[4*r+1]=t._tab[3*n+1],o.data[4*r+2]=t._tab[3*n+2],o.data[4*r+3]=255,e.ctrl.t&&n==e.ctrl.tranIndex&&(o.data[4*r+3]=0)}),o},e.prototype.mergeFrames=function(e,t){var o=t;if(e)for(var n=0;n<o.data.length;n+=4)0==o.data[n+3]&&(o.data[n]=this._lastData.data[n],o.data[n+1]=this._lastData.data[n+1],o.data[n+2]=this._lastData.data[n+2],o.data[n+3]=this._lastData.data[n+3]);return o},e.prototype.dataUrl2SpriteFrame=function(e){var t=new cc.Texture2D,o=new cc.SpriteFrame,n=new Image;return n.src=e,t.initWithElement(n),o.setTexture(t),o},e.prototype.date2SpriteFrame=function(e,t,o){var n=new cc.RenderTexture,r=new cc.SpriteFrame;return n.initWithData(e.data,cc.Texture2D.PixelFormat.RGBA8888,t,o),r.setTexture(n),r},e.prototype.putImageDataJSB=function(e,t,o,n){var r=this,i=function(){for(var n=0;n<e.height;n++)for(var i=0;i<e.width;i++){var a=4*n*e.width+4*i,s=4*(n+o)*r._lastData.width+4*(i+t);0!=e.data[a+3]&&(r._lastData.data[s]=e.data[a],r._lastData.data[s+1]=e.data[a+1],r._lastData.data[s+2]=e.data[a+2],r._lastData.data[s+3]=e.data[a+3])}},a=function(){for(var n=0;n<r._lastData.height;n++)for(var i=0;i<r._lastData.width;i++){var a=4*n*r._lastData.width+4*i,s=4*(n-o)*e.width+4*(i-t),c=!1;(i<t||i>t+e.width)&&(c=!0),(n<o||n>o+e.height)&&(c=!0),c?(r._lastData.data[a+0]=0,r._lastData.data[a+1]=0,r._lastData.data[a+2]=0,r._lastData.data[a+3]=0):(r._lastData.data[a+0]=e.data[s+0],r._lastData.data[a+1]=e.data[s+1],r._lastData.data[a+2]=e.data[s+2],r._lastData.data[a+3]=e.data[s+3])}};4==e.data[0]&&0==e.data[1]&&0==e.data[2]&&0==e.data[3]||(1==n.ctrl.disp||0==n.ctrl.disp?i():2==n.ctrl.disp?a():function(){for(var t=0,o=0;o<e.height;o+=2){for(var n=0,r=0;r<e.width;r++){var i=4*o*e.width+4*r;0==e.data[i+3]&&n++}if(n/e.width>.1&&t++,t/(e.height/2)>.6)return!0}return!1}()?a():i())},e.prototype.putImageDataWeb=function(e,t){var o;if(1==t.ctrl.disp||0==t.ctrl.disp){this._context.putImageData(e,t.img.x,t.img.y,0,0,t.img.w,t.img.h);var n=this._context.getImageData(0,0,this._canvas.width,this._canvas.height),r=this._lastData;o=this.mergeFrames(r,n)}else this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._context.putImageData(e,t.img.x,t.img.y,0,0,t.img.w,t.img.h),o=this._context.getImageData(0,0,this._canvas.width,this._canvas.height);return this._context.putImageData(o,0,0),this._lastData=o,this._canvas.toDataURL()},e.prototype.decodeFrame2Texture=function(e,t){this._context||(this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"),this._canvas.width=e.img.w,this._canvas.height=e.img.h);var o=this.decodeFrame(e);this._delays[t]=e.ctrl.delay;var n=this.putImageDataWeb(o,e);return this._spriteFrames[t]=this.dataUrl2SpriteFrame(n),this._spriteFrames[t]},e.prototype.read=function(e){return this._view.slice(this._offset,this._offset+=e)},e.prototype.getHeader=function(){var e=this;this._info.header="",this.read(6).forEach(function(t){e._info.header+=String.fromCharCode(t)})},e.prototype.getScrDesc=function(){var e=this.read(7);this._info.w=e[0]+(e[1]<<8),this._info.h=e[2]+(e[3]<<8),this._info.m=1&e[4]>>7,this._info.cr=7&e[4]>>4,this._info.s=1&e[4]>>3,this._info.pixel=7&e[4],this._info.bgColor=e[5],this._info.radio=e[6],this._info.m&&(this._info.colorTab=this.read(3*(2<<this._info.pixel))),this.decode()},e.prototype.decode=function(){var e=[],t=this.read(1);switch(t[0]){case 33:this.extension();break;case 44:for(t=this.read(9),this._frame.img={x:t[0]+(t[1]<<8),y:t[2]+(t[3]<<8),w:t[4]+(t[5]<<8),h:t[6]+(t[7]<<8),colorTab:0},this._frame.img.m=1&t[8]>>7,this._frame.img.i=1&t[8]>>6,this._frame.img.s=1&t[8]>>5,this._frame.img.r=3&t[8]>>3,this._frame.img.pixel=7&t[8],this._frame.img.m&&(this._frame.img.colorTab=this.read(3*(2<<this._frame.img.pixel))),this._frame.img.codeSize=this.read(1)[0],e=[];;){if(!(t=this.read(1))[0]){this._frame.img.srcBuf=e,this.decode();break}this.read(t[0]).forEach(function(t){e.push(t)})}}},e.prototype.extension=function(){var e=this,t=this.read(1);switch(t[0]){case 255:if(11!=this.read(1)[0])throw new Error("\u89e3\u6790\u51fa\u9519");for(this._info.appVersion="",this.read(11).forEach(function(t){e._info.appVersion+=String.fromCharCode(t)});;){if(!(t=this.read(1))[0]){this.decode();break}this.read(t[0])}break;case 249:if(4!=this.read(1)[0])throw new Error("\u89e3\u6790\u51fa\u9519");if(t=this.read(4),this._frame={},this._frame.ctrl={disp:7&t[0]>>2,i:1&t[0]>>1,t:1&t[0],delay:t[1]+(t[2]<<8),tranIndex:t[3]},this._info.frames.push(this._frame),0!=this.read(1)[0])throw new Error("\u89e3\u6790\u51fa\u9519");this.decode();break;case 254:(t=this.read(1))[0]&&(this.read(t[0]).forEach(function(t){e._info.comment+=String.fromCharCode(t)}),0==this.read(1)[0]&&this.decode())}},e.prototype.clear=function(){this._tab=null,this._view=null,this._frame=null,this._offset=0,this._info={header:"",frames:[],comment:""},this._lastData=null,this._delays=[],this._spriteFrames=[],this._canvas=null,this._context=null},e}();o.GIF=l;var u=function(){function e(){this.gifFrameMap={}}return e.getInstance=function(){var t=this;return e.instance||(e.instance=new e,cc.macro.ALLOW_IMAGE_BITMAP=!0,cc.assetManager.downloader.register(".gif",cc.assetManager.downloader._downloaders[".binary"]),cc.assetManager.parser.register(".gif",function(e,o,i){return n(t,void 0,void 0,function(){var t,o;return r(this,function(n){switch(n.label){case 0:return t=new l,o=e,e.arrayBuffer?[4,e.arrayBuffer()]:[3,2];case 1:o=n.sent(),n.label=2;case 2:return t.handle(o,i),[2]}})})})),e.instance},e.prototype.preloadGif=function(e){try{e.words&&e.words.forEach(function(e){-1!=e.indexOf(".gif")&&cc.loader.load(e.img,function(){})}),e.classes&&e.classes.forEach(function(e){-1!=e.indexOf(".gif")&&cc.loader.load(e.img,function(){})})}catch(t){cc.log(t)}},e.prototype.addItemFrame=function(e,t){if(1==this.has(e)){var o=this.get(e);o.referenceCount++,o.frameData=t}else{var n={referenceCount:0,type:i.GIF,frame:{}};this.gifFrameMap[e]=n}},e.prototype.addItemType=function(e,t){if(this.has(e))this.get(e).type=t;else{var o={referenceCount:0,type:t,frame:null};this.gifFrameMap[e]=o}},e.prototype.add=function(e,t){this.has(e)||(this.gifFrameMap[e]=t)},e.prototype.get=function(e){return this.gifFrameMap[e]},e.prototype.has=function(e){return null!=this.gifFrameMap[e]},e.prototype.hasFrame=function(e){var t=this.get(e);return null!=t&&null!=t.frameData},e.prototype.relase=function(e){this.has(e)&&(this.gifFrameMap[e]=void 0,cc.loader.release(e))},e.prototype.releaseAll=function(){for(var e in this.gifFrameMap)cc.loader.release(e);this.gifFrameMap={}},e.instance=null,e}();o.GIFCache=u,cc._RF.pop()},{"../../../Scripts/Performance/SplittedAsyncTask":"SplittedAsyncTask","./LZW":"LZW"}],GameCameraTarget:[function(e,t,o){"use strict";cc._RF.push(t,"e64572tdi9I7aNIYThqskjr","GameCameraTarget");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getWorldPosition=function(){var e,t;return null===(t=null===(e=this.node)||void 0===e?void 0:e.parent)||void 0===t?void 0:t.convertToWorldSpaceAR(cc.v2(this.node.getPosition()))},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},i([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],GameCamera:[function(e,t,o){"use strict";cc._RF.push(t,"7db33sfeu9EcrPx6h9XiIf6","GameCamera");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.CameraState=void 0;var a,s,c=e("./GameCameraTarget"),l=e("./../globals"),u=e("./Network/HSANetUtils"),p=e("./Game"),d=e("./TuningData"),f=e("./Maps/MapController"),h=e("../Shared/Defines"),g=e("./Main"),y=e("../NanoGameCore/GameFramework/Scripts/NgcGameCamera"),m=cc._decorator,_=m.ccclass,v=m.property;(function(e){e[e.Inside=0]="Inside",e[e.TopLeft=1]="TopLeft",e[e.TopRight=2]="TopRight",e[e.BottomRight=3]="BottomRight",e[e.BottomLeft=4]="BottomLeft",e[e.CrossingRight=5]="CrossingRight",e[e.CrossingTop=6]="CrossingTop",e[e.CrossingBottom=7]="CrossingBottom",e[e.CrossingLeft=8]="CrossingLeft"})(a||(a={})),function(e){e[e.playerFixed=0]="playerFixed",e[e.showAbove=1]="showAbove",e[e.showBottom=2]="showBottom"}(s=o.CameraState||(o.CameraState={}));var S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cameraOb=null,t.screenHeight=1920,t.screenWidth=1080,t.topOfScreenInWorldUnits=0,t.bottomOfScreenInWorldUnits=0,t.leftOfScreenInWorldUnits=0,t.rightOfScreenInWorldUnits=0,t.target=null,t.homePos=cc.v2(0,0),t.defaultTarget=null,t.useBoundaries=!1,t.topBound=0,t.rightBound=0,t.bottomBound=0,t.leftBound=0,t.curState=null,t._smoothFollow=!1,t._deltaRatio=.1,t._canShake=!1,t._distanceXFromCenter=0,t._distanceYFromCenter=0,t._distanceYFromSurface=0,t._zoomRatio=1,t.offsetX=0,t.offsetY=0,t.smoothSpeedY=2.1,t.smoothSpeedX=2.1,t._speedInSurface=0,t._maxSpeed=0,t._targetOffsetX=0,t._targetOffsetY=0,t._boost_offest=0,t._cameraParam=null,t._reachingBoundary=!1,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"zoomRatio",{set:function(e){g.Main.isDesktopBrowser()&&cc.view.getVisibleSize().width>cc.view.getVisibleSize().height?this._zoomRatio=e*d.default.inst.getGameParameters().camera.zoom_rate_on_PC:this._zoomRatio=e},enumerable:!1,configurable:!0}),t.prototype.initBoundaries=function(){var e=f.default.inst.getMapSize();this.topBound=1e4,this.rightBound=e.width,this.bottomBound=0,this.leftBound=0,cc.log("CAMERA BOUNDARIES:"+this.topBound+" "+this.rightBound+" "+this.bottomBound+" "+this.leftBound)},t.prototype.IsNodeOffscreenLeft=function(e){return e.getBoundingBoxToWorld().xMax<this.leftOfScreenInWorldUnits},t.prototype.IsNodeOffscreenRight=function(e){return e.getBoundingBoxToWorld().xMin>this.rightOfScreenInWorldUnits},t.prototype.getScreenRect=function(e){var t=e.getBoundingBoxToWorld(),o=cc.v2(0,0),n=cc.v2(0,0);return this.cameraOb.getWorldToScreenPoint(cc.v2(t.xMin,t.yMin),o),this.cameraOb.getWorldToScreenPoint(cc.v2(t.xMax,t.yMax),n),{min:o,max:n}},t.prototype.IsNodeVisible=function(e){var t=this.getScreenRect(e);return!(t.max.x<0||t.min.x>this.screenWidth)},t.prototype.isPosVisible=function(e){var t=cc.rect(this.getWorldPosition().x,this.getWorldPosition().y,this.screenWidth,this.screenHeight),o=this.node.parent.convertToWorldSpaceAR(e);return t.contains(o)},t.prototype.reset=function(){this.target=null,this.cameraOb.zoomRatio=this._zoomRatio,cc.log("camera reset")},t.prototype.recalc=function(){this.screenHeight=l.default.Main.inst.mainCanvas.node.height,this.screenWidth=l.default.Main.inst.mainCanvas.node.width;var e=cc.v2(this.screenWidth,this.screenHeight),t=cc.v2(0,0),o=this.cameraOb.getScreenToWorldPoint(e);this.topOfScreenInWorldUnits=o.y,this.rightOfScreenInWorldUnits=o.x;var n=this.cameraOb.getScreenToWorldPoint(t);this.bottomOfScreenInWorldUnits=n.y,this.leftOfScreenInWorldUnits=n.x},t.prototype.onEnable=function(){},t.prototype.start=function(){var e=this;cc.log("Camera start"),d.default.inst&&d.default.inst.getGameParameters()&&(this._cameraParam=d.default.inst.getGameParameters().camera,this._distanceXFromCenter=this._cameraParam.swimming.swimCamera_X_Offset,this._distanceYFromCenter=this._cameraParam.swimming.swimCamera_Y_Offset,this._distanceYFromSurface=this._cameraParam.swimming.surfaceCamera_Y_Offset,this._speedInwater=this._cameraParam.swimming.swimCameraSpeedPerSize,this._speedInSurface=this._cameraParam.swimming.surfacingCameraSpeedPerSize,this._maxSpeed=this._cameraParam.swimming.cameraMaxSpeed,this.initBoundaries(),this.cameraOb=this.node.getComponent(cc.Camera),this.curState=s.playerFixed,this.setTargetToDefault(1,!1),this.recalc(),o.inst=this,this.homePos=this.getWorldPosition(),this.node.on("zoomOutCameraEvent",function(t,o){e.zoomRatio=t,o&&(e._zoomSpeed=o)},this))},t.prototype.shakeCamera=function(e,t,o){if(l.default.PlayerController.localPlayer.isLocalHuman()){this._canShake=!0;for(var n=e/.01,r=[],i=0;i<n;i++){var a=u.default.RandomRange(-1,1,!1)*t,s=u.default.RandomRange(-1,1,!1)*o;r.push(cc.moveBy(.01,cc.v2(a,s)))}var c=cc.sequence(r);this.cameraOb.node.runAction(cc.sequence(c,cc.callFunc(this.stopShakeCamera.bind(this),this)))}},t.prototype.stopShakeCamera=function(){this._canShake=!1},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(cc.v2(this.node.getPosition()))},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.setTarget=function(e,t,o){void 0===t&&(t=.6),void 0===o&&(o=!0),this.target=e,this.zoomRatio=t,this._smoothFollow=o},t.prototype.forceToTarget=function(e,t){this.setWorldPosition(e.getWorldPosition()),t&&(this.cameraOb.zoomRatio=t)},t.prototype.setState=function(e){if(e!==this.curState){switch(e){case s.playerFixed:this.offsetY=0,this.smoothSpeedY=this._speedInwater[l.default.PlayerController.localPlayer.getCurrentSize()],this.smoothSpeedX=this._speedInwater[l.default.PlayerController.localPlayer.getCurrentSize()];break;case s.showAbove:this._targetOffsetY=this.screenHeight*this._cameraParam.swimming.surfaceCamera_Y_Offset_Percent,this.smoothSpeedX=this._speedInwater[l.default.PlayerController.localPlayer.getCurrentSize()],this.smoothSpeedY=this._cameraParam.swimming.surfaceCamera_Y_Offset_Speed}this.curState=e}},t.prototype.changeCameraState=function(e,t){switch(e){case s.playerFixed:this._targetOffsetX=t.offsetX,this._targetOffsetY=t.offsetY,this.smoothSpeedX=this._speedInwater[l.default.PlayerController.localPlayer.getCurrentSize()],this.smoothSpeedY=this._speedInwater[l.default.PlayerController.localPlayer.getCurrentSize()],this.zoomRatio=t.zoomRatio,this._zoomSpeed=t.zoomSpeed,this._changeOffsetSpeed=t.changeOffsetSpeed;break;case s.showAbove:this.offsetY=t.offsetY,this.smoothSpeedX=t.smoothSpeedX,this.smoothSpeedY=t.smoothSpeedY,this._zoomSpeed=o.CAMERA_ZOOM_SPEED;break;case s.showBottom:this._targetOffsetY=t.offsetY,this._changeOffsetSpeed=t.changeOffsetSpeed,this.zoomRatio=t.zoomRatio,this._zoomSpeed=t.zoomSpeed,this._targetOffsetX=0}this.curState=e},t.prototype.updatePos=function(e){switch(this.curState){case s.playerFixed:this.smoothSpeedY=Math.min(this.smoothSpeedY+e,this._maxSpeed),this.UpdatePosPlayerFixed(e);break;case s.showAbove:this.UpdatePosPlayerFixed(e);break;case s.showBottom:this.UpdatePos_ShowBottom(e)}},t.prototype.UpdatePosPlayerFixed=function(e){var t=this.target.getWorldPosition(),o=this.getWorldPosition();t&&o&&(this._currXdirect!=this._getXCoefficientDirection()&&(this.offsetX=0),this._currYdirect!=this._getYCoefficientDirection()&&(this.offsetY=0),this.offsetX=cc.misc.lerp(this.offsetX,this._targetOffsetX,this._changeOffsetSpeed*e),this.offsetY=cc.misc.lerp(this.offsetY,this._targetOffsetY,this._changeOffsetSpeed*e),this._reachingBoundary?(o.x=cc.misc.lerp(o.x,t.x+(this.offsetX+this._boost_offest)*this._getXCoefficientDirection(),this.smoothSpeedX/60),o.y=cc.misc.lerp(o.y,t.y+(this.offsetY+this._boost_offest)*this._getYCoefficientDirection(),this.smoothSpeedY/60)):(o.x=cc.misc.lerp(o.x,t.x+(this.offsetX+this._boost_offest)*this._getXCoefficientDirection(),this.smoothSpeedX*e),o.y=cc.misc.lerp(o.y,t.y+(this.offsetY+this._boost_offest)*this._getYCoefficientDirection(),this.smoothSpeedY*e)),this._currXdirect=this._getXCoefficientDirection(),this._currYdirect=this._getYCoefficientDirection(),this.cameraOb.zoomRatio=cc.misc.lerp(this.cameraOb.zoomRatio,this._zoomRatio,this._zoomSpeed*e),this.setWorldPosition(o))},t.prototype.setTargetOffsetX=function(e,t){void 0===t&&(t=1),this._targetOffsetX=e,this._changeOffsetSpeed=t},t.prototype.UpdatePos_ShowBottom=function(e){var t=this.target.getWorldPosition(),o=this.getWorldPosition();this.cameraOb.zoomRatio=cc.misc.lerp(this.cameraOb.zoomRatio,this._zoomRatio,this._zoomSpeed*e),this.offsetX=cc.misc.lerp(this.offsetX,this._targetOffsetX,this._changeOffsetSpeed*e),this.offsetY=cc.misc.lerp(this.offsetY,this._targetOffsetY,this._changeOffsetSpeed*e),o.x=cc.misc.lerp(o.x,t.x+this.offsetX,this.smoothSpeedX*e),o.y=cc.misc.lerp(o.y,t.y+this.offsetY,this.smoothSpeedY*e),this.setWorldPosition(o)},t.prototype.updateWorldBound=function(){if(this.cameraOb){var e=new cc.Mat4;this.cameraOb.getScreenToWorldMatrix2D(e);var t=2*-(e.m[12]-this.getWorldPosition().x),o=2*-(e.m[13]-this.getWorldPosition().y);this.worldBound=[e.m[12],e.m[13],e.m[12]+t,e.m[13]+o]}},t.prototype.update=function(){this.updateWorldBound()},t.prototype.lateUpdate=function(e){if(this.useBoundaries){var t=this.getWorldPosition(),o=cc.view.getVisibleSize().width/2,n=cc.view.getVisibleSize().height/2;t=this._getPos_Inside_Boundary(t,o,n),this.setWorldPosition(t)}p.default.inst.curGameState!==h.GameState.Playing&&p.default.inst.curGameState!==h.GameState.Countdown||(this.target&&this.updatePos(e),this.recalc())},t.prototype.setTargetToDefault=function(e,t){void 0===e&&(e=1),void 0===t&&(t=!0),this.setTarget(this.defaultTarget,e,!0)},t.prototype._getXCoefficientDirection=function(){var e=l.default.PlayerController.localPlayer.guidedDirection;return e&&e.x<0?-1:1},t.prototype._getYCoefficientDirection=function(){var e=l.default.PlayerController.localPlayer.guidedDirection;return e&&e.y<0?-1:1},t.prototype._getRelativeCameraVSBoundary=function(e,t){var o=this.cameraOb.node.x-e,n=this.cameraOb.node.x+e,r=this.cameraOb.node.y-t,i=this.cameraOb.node.y+t;return o<this.leftBound&&i>this.topBound?a.TopLeft:n>this.rightBound&&i>this.topBound?a.TopRight:n>this.rightBound&&r<this.bottomBound?a.BottomRight:o<this.leftBound&&r<this.bottomBound?a.BottomLeft:o<this.leftBound?a.CrossingLeft:r<this.bottomBound?a.CrossingBottom:n>this.rightBound?a.CrossingRight:i>this.topBound?a.CrossingTop:void 0},t.prototype._getPos_Inside_Boundary=function(e,t,o){switch(this._getRelativeCameraVSBoundary(t,o)){case a.TopLeft:e.x=this.leftBound+t,e.y=this.topBound-o,this._reachingBoundary=!0;break;case a.TopRight:e.x=this.rightBound-t,e.y=this.topBound-o,this._reachingBoundary=!0;break;case a.BottomRight:e.x=this.rightBound-t,e.y=this.bottomBound+o,this._reachingBoundary=!0;break;case a.BottomLeft:e.x=this.leftBound+t,e.y=this.bottomBound+o,this._reachingBoundary=!0;break;case a.CrossingLeft:e.x=this.leftBound+t,this._reachingBoundary=!0;break;case a.CrossingBottom:e.y=this.bottomBound+o,this._reachingBoundary=!0;break;case a.CrossingRight:e.x=this.rightBound-t,this._reachingBoundary=!0;break;case a.CrossingTop:e.y=this.topBound-o,this._reachingBoundary=!0;break;default:this._reachingBoundary=!1}return e},t.CAMERA_ZOOM_SPEED=1.2,t.inst=null,i([v(c.default)],t.prototype,"defaultTarget",void 0),i([v],t.prototype,"useBoundaries",void 0),o=i([_],t)}(y.default);o.default=S,l.default.GameCamera=S,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/NgcGameCamera":"NgcGameCamera","../Shared/Defines":"Defines","./../globals":"globals","./Game":"Game","./GameCameraTarget":"GameCameraTarget","./Main":"Main","./Maps/MapController":"MapController","./Network/HSANetUtils":"HSANetUtils","./TuningData":"TuningData"}],GameDistributionSrv:[function(e,t,o){"use strict";cc._RF.push(t,"59f43YDFrxL/7AO5NSxhoAl","GameDistributionSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GDAdStatus=void 0;var a,s,c,l=e("../../GameFramework/Scripts/NgcMain"),u=e("../SDK"),p=cc._decorator,d=p.ccclass;p.property,function(e){e[e.Loaded=0]="Loaded",e[e.Started=1]="Started",e[e.Clicked=2]="Clicked",e[e.Paused=3]="Paused",e[e.Resumed=4]="Resumed",e[e.Closed=5]="Closed",e[e.FirstQuartile=6]="FirstQuartile",e[e.Midpoint=7]="Midpoint",e[e.ThirdQuarTile=8]="ThirdQuarTile",e[e.ImpressionURLPinged=9]="ImpressionURLPinged",e[e.DurationChanged=10]="DurationChanged",e[e.LinearChanged=11]="LinearChanged",e[e.SkippableStateChanged=12]="SkippableStateChanged",e[e.VolumeChanged=13]="VolumeChanged",e[e.VolumeMuted=14]="VolumeMuted",e[e.NonFatalError=15]="NonFatalError",e[e.FatalError=16]="FatalError",e[e.Completed=17]="Completed",e[e.AdSDKReady=18]="AdSDKReady"}(a=o.GDAdStatus||(o.GDAdStatus={})),function(e){e[e.StartedTime=0]="StartedTime",e[e.PausedTime=1]="PausedTime",e[e.ResumedTime=2]="ResumedTime",e[e.EndedTime=3]="EndedTime",e[e.MaxNumberOfAdTimes=4]="MaxNumberOfAdTimes"}(s||(s={})),function(e){e.SDK_READY="SDK_READY",e.SDK_ERROR="SDK_ERROR",e.SDK_GAME_START="SDK_GAME_START",e.SDK_GAME_PAUSE="SDK_GAME_PAUSE",e.SDK_GDPR_TRACKING="SDK_GDPR_TRACKING",e.SDK_GDPR_TARGETING="SDK_GDPR_TARGETING",e.SDK_GDPR_THIRD_PARTY="SDK_GDPR_THIRD_PARTY",e.AD_SDK_MANAGER_READY="AD_SDK_MANAGER_READY",e.ALL_ADS_COMPLETED="ALL_ADS_COMPLETED",e.SKIPPED="SKIPPED",e.COMPLETE="COMPLETE",e.SDK_REWARDED_WATCH_COMPLETE="SDK_REWARDED_WATCH_COMPLETE",e.USER_CLOSE="USER_CLOSE",e.LOG="LOG",e.AD_SDK_CANCELLED="AD_SDK_CANCELLED",e.AD_ERROR="AD_ERROR",e.AD_METADATA="AD_METADATA",e.LOADED="LOADED",e.STARTED="STARTED",e.AD_BREAK_READY="AD_BREAK_READY",e.CLICK="CLICK",e.PAUSED="PAUSED",e.RESUMED="RESUMED",e.CONTENT_PAUSE_REQUESTED="CONTENT_PAUSE_REQUESTED",e.CONTENT_RESUME_REQUESTED="CONTENT_RESUME_REQUESTED",e.DURATION_CHANGE="DURATION_CHANGE",e.FIRST_QUARTILE="FIRST_QUARTILE",e.MIDPOINT="MIDPOINT",e.THIRD_QUARTILE="THIRD_QUARTILE",e.IMPRESSION="IMPRESSION",e.INTERACTION="INTERACTION",e.LINEAR_CHANGED="LINEAR_CHANGED",e.SKIPPABLE_STATE_CHANGED="SKIPPABLE_STATE_CHANGED",e.VOLUME_CHANGED="VOLUME_CHANGED",e.VOLUME_MUTED="VOLUME_MUTED",e.DISPLAYAD_ERROR="DISPLAYAD_ERROR",e.DISPLAYAD_IMPRESSION="DISPLAYAD_IMPRESSION"}(c||(c={}));var f=[c.COMPLETE,c.SKIPPED,c.SDK_REWARDED_WATCH_COMPLETE,c.USER_CLOSE,c.LOG,c.AD_SDK_CANCELLED,c.AD_ERROR],h=function(e){function t(){var t=e.call(this)||this;return t.sdk=null,t._isLoggedIn=!1,t.adsAvaiable=!1,t._totalPausedDuration=0,t._sendTrackingTime=0,t._currentAdAstatus=a.Started,t._impressionUrlIsPinged=!1,t._adTimes=new Array(s.MaxNumberOfAdTimes).fill(0),o.inst?cc.error("There are multiple places constructing PokiMgr!!!"):o.inst=t,t}var o;return r(t,e),o=t,t.prototype._preInit=function(){var e=this;return new Promise(function(t,o){e._isLoggedIn=!1;var n,r,i,u,p,d=e;window.GD_OPTIONS={gameId:"1afba37790cf4c9696e6e6496f3a180d",onEvent:function(e){switch(e.name){case c.SDK_READY:t("SDK is ready");break;case c.SDK_ERROR:o(e);break;case c.SDK_GAME_START:"warning"===e.status&&console.warn("NgcGameDistributionSrv EVEN "+e.name,e),l.NgcMain.inst.resumeGameLogic();break;case c.SDK_GAME_PAUSE:l.NgcMain.inst.pauseGameLogic();break;case c.SDK_GDPR_TRACKING:case c.SDK_GDPR_TARGETING:case c.SDK_GDPR_THIRD_PARTY:case c.ALL_ADS_COMPLETED:break;case c.SKIPPED:case c.COMPLETE:case c.SDK_REWARDED_WATCH_COMPLETE:d._currentAdAstatus=a.Completed;break;case c.USER_CLOSE:d._currentAdAstatus=a.Closed;break;case c.LOG:d._currentAdAstatus=a.NonFatalError;break;case c.AD_SDK_CANCELLED:case c.AD_ERROR:d._currentAdAstatus=a.FatalError;break;case c.AD_METADATA:break;case c.LOADED:d._currentAdAstatus=a.Loaded;break;case c.STARTED:d._adTimes[s.StartedTime]=Date.now(),d._currentAdAstatus=a.Started,d._beforeAdHandler&&d._beforeAdHandler();break;case c.AD_BREAK_READY:break;case c.CLICK:d._currentAdAstatus=a.Clicked;break;case c.PAUSED:d._adTimes[s.PausedTime]=Date.now(),d._currentAdAstatus=a.Paused;break;case c.RESUMED:d._adTimes[s.ResumedTime]=Date.now(),d._currentAdAstatus=a.Resumed;var n=d._adTimes[s.ResumedTime]-d._adTimes[s.PausedTime];d._totalPausedDuration+=n;break;case c.CONTENT_PAUSE_REQUESTED:case c.CONTENT_RESUME_REQUESTED:break;case c.DURATION_CHANGE:d._currentAdAstatus=a.DurationChanged;break;case c.FIRST_QUARTILE:d._currentAdAstatus=a.FirstQuartile;break;case c.MIDPOINT:d._currentAdAstatus=a.Midpoint;break;case c.THIRD_QUARTILE:d._currentAdAstatus=a.ThirdQuarTile;break;case c.DISPLAYAD_IMPRESSION:case c.IMPRESSION:d._impressionUrlIsPinged=!0,d._currentAdAstatus=a.ImpressionURLPinged;break;case c.INTERACTION:break;case c.LINEAR_CHANGED:d._currentAdAstatus=a.LinearChanged;break;case c.SKIPPABLE_STATE_CHANGED:d._currentAdAstatus=a.SkippableStateChanged;break;case c.VOLUME_CHANGED:d._currentAdAstatus=a.VolumeChanged;break;case c.VOLUME_MUTED:d._currentAdAstatus=a.VolumeMuted;break;case c.AD_SDK_MANAGER_READY:d._currentAdAstatus=a.AdSDKReady;break;case c.DISPLAYAD_ERROR:d._currentAdAstatus=a.NonFatalError}if(d._setEndedTime(e.name),e.name===c.LOG||e.name===c.AD_SDK_CANCELLED||e.name===c.AD_ERROR||e.name===c.SDK_ERROR||e.name===c.DISPLAYAD_ERROR)console.error("NgcGameDistributionSrv EVENT "+e.name+": ",e);else if(console.log("NgcGameDistributionSrv EVENT "+e.name+": ",e),d._sendTrackingTime<1)try{window.gdsdk.sendEvent({eventName:"FTUE__001__game_load_start",data:{milestoneDescription:"FTUE__001__game_load_start"}}),console.warn("Send tracking FTUE__001__game_load_start to Gamedistribution success"),d._sendTrackingTime++}catch(r){cc.warn("Can't send gamedistribution tracking event",r)}}},r="script",i="gamedistribution-jssdk",p=(n=document).getElementsByTagName(r)[0],n.getElementById(i)||((u=n.createElement(r)).id=i,u.src="patch/js/gd-main.js",p.parentNode.insertBefore(u,p))})},t.prototype._init=function(){var e=this;return new Promise(function(t){e.initialized=!0,t("NgcGameDistributionSrv initialized")})},t.prototype._login=function(){return new Promise(function(e){e()})},t.prototype.getName=function(){return"GameDistributionSrv"},t.prototype.getUserID=function(){return""},t.prototype.isLoggedIn=function(){return this._isLoggedIn=!0},t.prototype._logout=function(){return new Promise(function(e){e()})},t.prototype.resetAdTimes=function(){this._adTimes=this._adTimes.fill(0),this._totalPausedDuration=0,this._impressionUrlIsPinged=!1},t.prototype._setEndedTime=function(e){f.find(function(t){return t===e})&&(this._adTimes[s.EndedTime]=Date.now())},t.prototype.getAdViewingDuration=function(){var e=this._adTimes[s.StartedTime];return 0===e?0:this._adTimes[s.EndedTime]-this._totalPausedDuration-e},t.prototype.getAdStatus=function(){return this._currentAdAstatus},t.prototype.adIsWatched=function(){return this._currentAdAstatus===a.Completed},t.prototype.impressionUrlIsPinged=function(){return this._impressionUrlIsPinged},t.prototype.setBeforeAdHandler=function(e){this._beforeAdHandler=e},t.inst=null,o=i([d],t)}(u.NgcSDK);o.default=h,cc._RF.pop()},{"../../GameFramework/Scripts/NgcMain":"NgcMain","../SDK":"SDK"}],GameEnums:[function(e,t,o){"use strict";cc._RF.push(t,"5d1d2CCAdNL5LRhrjoNrsTg","GameEnums"),Object.defineProperty(o,"__esModule",{value:!0}),o.ColliderTag=o.PlayerState=void 0,function(e){e[e.PreInit=0]="PreInit",e[e.Idle=1]="Idle",e[e.Swimming=2]="Swimming",e[e.Windup=3]="Windup",e[e.Dashing=4]="Dashing",e[e.Killed=5]="Killed",e[e.Dead=6]="Dead",e[e.Win=7]="Win",e[e.Stunning=8]="Stunning",e[e.TurnBack=9]="TurnBack",e[e.SizeUp=10]="SizeUp",e[e.PowerUp=11]="PowerUp",e[e.Jumping=12]="Jumping",e[e.Falling=13]="Falling",e[e.OnHelicopter=14]="OnHelicopter",e[e.InWaterSurface=15]="InWaterSurface",e[e.WaitingForRespawn=16]="WaitingForRespawn",e[e.Revive=17]="Revive"}(o.PlayerState||(o.PlayerState={})),function(e){e[e.CanBeAttacked=0]="CanBeAttacked",e[e.Attackable=1]="Attackable",e[e.CanBeBite=2]="CanBeBite"}(o.ColliderTag||(o.ColliderTag={})),cc._RF.pop()},{}],GameInforUI:[function(e,t,o){"use strict";cc._RF.push(t,"d46ffA+IINA5qmJkRQ89PDW","GameInforUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Utils/ConstConfig"),s=e("./Network/NetClient"),c=e("../NanoGameCore/GameFramework/Scripts/BuildConfig"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.version_lb=null,t.fps_lb=null,t.gameSize_lb=null,t.netLatency_lb=null,t.nodeCheat=null,t.isQCBuild=!1,t.currentTime=Date.now(),t.currentFrame=0,t}return r(t,e),t.prototype.onLoad=function(){this.isQCBuild=c.NgcBuildConfig.enabledDebugMode},t.prototype.start=function(){this.version_lb.string="Version :"+c.NgcBuildConfig.buildVersionName,this.gameSize_lb.string="Game Size :"+a.ConstConfig.GAMESIZE,this.nodeCheat.active=this.isQCBuild,this.node.active=this.isQCBuild},t.prototype.update=function(){this.isQCBuild&&(this.currentFrame++,Date.now()-this.currentTime>=1e3&&(this.fps_lb.string="FPS :"+this.currentFrame,this.currentTime=Date.now(),this.currentFrame=0),this.netLatency_lb.string="NetLatency: "+Math.floor(s.default.inst.averageLatencyMS))},i([p(cc.Label)],t.prototype,"version_lb",void 0),i([p(cc.Label)],t.prototype,"fps_lb",void 0),i([p(cc.Label)],t.prototype,"gameSize_lb",void 0),i([p(cc.Label)],t.prototype,"netLatency_lb",void 0),i([p(cc.Node)],t.prototype,"nodeCheat",void 0),i([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","./Network/NetClient":"NetClient","./Utils/ConstConfig":"ConstConfig"}],GameInput:[function(e,t,o){"use strict";cc._RF.push(t,"d026101BKVKJqjWF6r6fQEe","GameInput");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./../globals"),s=e("./GameEnums"),c=e("./TuningData"),l=e("./GameCamera"),u=e("./Main"),p=e("../NanoGameCore/Core/Utils"),d=e("./Game"),f=e("../Shared/Defines"),h=e("../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),g=cc._decorator,y=g.ccclass,m=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchpad=null,t.finger=null,t.fixedPosUICamera=null,t._allowDoubleTapsBoost=!0,t._isHoding=!1,t._posTouchpad=null,t._continuousTouchCount=0,t._lastTouchMilliseconds=0,t}return r(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,function(e){this.onTouchStart(e)},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){this.onTouchMove(e)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){this.onTouchEnd(e)},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){this.onTouchEnd(e)},this),u.Main.isDesktopBrowser()&&this.node.on(cc.Node.EventType.MOUSE_MOVE,function(e){this.onMouseMove(e)},this)},t.prototype.onTouchStart=function(e){d.default.inst.curGameState==f.GameState.Playing&&(u.Main.isDesktopBrowser()||(this._isHoding=!0,this._posTouchpad=cc.v2(e.getLocationX(),e.getLocationY()),this.touchpad.active=!0,this.fixedPosUICamera.node.getPosition(),p.Utils.setWorldPos(this.touchpad,this._posTouchpad)),a.default.PlayerController.localPlayer.curState===s.PlayerState.OnHelicopter&&a.default.PlayerController.localPlayer.touchToWiggle(),u.Main.isDesktopBrowser()&&this.isReleaseTouchToDash()&&a.default.PlayerController.localPlayer.requestToDash(),this.isDoubleTapToDash()&&this.continuousTouchDetect())},t.prototype.isDoubleTapToDash=function(){return!c.default.inst.getGameParameters().GameControl.touch_release_to_dash&&c.default.inst.getGameParameters().GameControl.single_tab_dashing},t.prototype.isReleaseTouchToDash=function(){return c.default.inst.getGameParameters().GameControl.touch_release_to_dash},t.prototype.isFullBarToDash=function(){return c.default.inst.getGameParameters().GameControl.FullBarToDash},t.prototype.onTouchMove=function(e){if(!(d.default.inst.curGameState!=f.GameState.Playing||a.default.PlayerController.localPlayer&&a.default.PlayerController.localPlayer.isPlayerDie())){if(!u.Main.isDesktopBrowser()&&this._isHoding){var t=cc.v2(e.getLocationX(),e.getLocationY());if(cc.Vec2.distance(t,this._posTouchpad)>this.touchpad.width/4){var o=cc.v2(t.x,t.y).sub(this._posTouchpad);this.finger.setPosition(o.normalizeSelf().mul(this.touchpad.width/2)),a.default.PlayerController.localPlayer.setMoveDirection(o.normalize())}}a.default.PlayerController.localPlayer.curState,s.PlayerState.OnHelicopter}},t.prototype.onMouseMove=function(e){if(d.default.inst.curGameState==f.GameState.Playing&&(!a.default.PlayerController.localPlayer||!a.default.PlayerController.localPlayer.isPlayerDie())&&u.Main.isDesktopBrowser()&&a.default.PlayerController.localPlayer){var t=cc.v2(e.getLocationX()-cc.winSize.width/2,e.getLocationY()-cc.winSize.height/2),o=cc.v2(t.x,t.y).sub(cc.v2(0,0));a.default.PlayerController.localPlayer.setMoveDirection(o.normalize())}},t.prototype.onTouchEnd=function(){d.default.inst.curGameState==f.GameState.Playing&&(u.Main.isDesktopBrowser()||(this._isHoding=!1,this.touchpad.active=!1,this.finger.setPosition(cc.v2(0,0)),this.isReleaseTouchToDash()&&a.default.PlayerController.localPlayer.requestToDash(),this.isDoubleTapToDash()&&this.continuousTouchDetect()),a.default.PlayerController.localPlayer.setMoveDirection(null),a.default.PlayerController.localPlayer.curState===s.PlayerState.OnHelicopter&&l.default.inst.setTargetOffsetX(0,4),h.default.inst.onPlayerInput())},t.prototype.continuousTouchDetect=function(){var e=(new Date).getTime(),t=e-this._lastTouchMilliseconds;this._allowDoubleTapsBoost=c.default.inst.getGameParameters().GameControl.allow_double_tap_to_boost,t/1e3<=c.default.inst.getGameParameters().GameControl.double_tab_time_max?this._continuousTouchCount++:this._continuousTouchCount=0,(this._allowDoubleTapsBoost&&this._continuousTouchCount>=1||!this._allowDoubleTapsBoost&&this._continuousTouchCount>=0)&&(a.default.PlayerController.localPlayer.requestToDash(),this._continuousTouchCount=-1),this._lastTouchMilliseconds=e},i([m(cc.Node)],t.prototype,"touchpad",void 0),i([m(cc.Node)],t.prototype,"finger",void 0),i([m(cc.Camera)],t.prototype,"fixedPosUICamera",void 0),i([y],t)}(cc.Component);o.default=_,cc._RF.pop()},{"../NanoGameCore/Core/Utils":"Utils","../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../Shared/Defines":"Defines","./../globals":"globals","./Game":"Game","./GameCamera":"GameCamera","./GameEnums":"GameEnums","./Main":"Main","./TuningData":"TuningData"}],GameObjectMgr:[function(e,t,o){"use strict";cc._RF.push(t,"c2750Q8OaJM9JsuptWPfNuV","GameObjectMgr");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../NanoGameCore/Core/Utils"),l=e("./GamePoolItem"),u=e("./PoolItemInfo"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.DEAD_POSITION=new cc.Vec2(0,0),t.itemList=[],t._itemsPoolList=[],t}var o;return r(t,e),o=t,Object.defineProperty(t,"inst",{get:function(){return this._inst},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){return a(this,void 0,void 0,function(){var e,t,n,r;return s(this,function(){for(o._inst=this,e=0;e<this.itemList.length;e++)if(this._itemsPoolList[this.itemList[e].poolItemType]=[],t=this.itemList[e].itemPrefab)for(n=0;n<this.itemList[e].buffSize;n++)r=cc.instantiate(t),this._itemsPoolList[this.itemList[e].poolItemType].push(r),r.parent=this.itemList[e].parentNode,r.getComponent(l.default).isActive=!1,r.setPosition(this.DEAD_POSITION);return[2]})})},t.prototype.getFreeItem=function(e){if(!this._itemsPoolList[e])throw new Error("GameObjectMgr not found item pool "+c.Utils.enumToString(u.PoolItemType,e));if(cc.log("getFreeItem",e,this._itemsPoolList[e].length),0==this._itemsPoolList[e].length){var t=this.itemList.findIndex(function(t){return t.poolItemType==e}),o=this.itemList[t].itemPrefab;return(n=cc.instantiate(o)).parent=this.itemList[t].parentNode,n.getComponent(l.default).isActive=!0,n}var n;return(n=this._itemsPoolList[e].pop()).getComponent(l.default).isActive=!0,n},t.prototype.pushFreeItem=function(e,t){var o=t.getComponent(l.default);o.isActive&&(o.isActive=!1,t.setPosition(this.DEAD_POSITION),this._itemsPoolList[e].push(t),cc.log("pushFreeItem",e,this._itemsPoolList[e].length))},t._inst=null,i([f([u.default])],t.prototype,"itemList",void 0),o=i([d],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../NanoGameCore/Core/Utils":"Utils","./GamePoolItem":"GamePoolItem","./PoolItemInfo":"PoolItemInfo"}],GameObject:[function(e,t,o){"use strict";cc._RF.push(t,"8c61bVlPwZIBK6/h358UPgm","GameObject");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GameObjectType=void 0;var a,s=cc._decorator,c=s.ccclass,l=s.property;(function(e){e[e.Unknown=0]="Unknown",e[e.Player=1]="Player",e[e.Enemy=2]="Enemy",e[e.Collectible=3]="Collectible",e[e.Food=4]="Food",e[e.Platform=5]="Platform",e[e.Terrain=6]="Terrain",e[e.Bomb=7]="Bomb",e[e.Toxic=8]="Toxic",e[e.WaterSurface=9]="WaterSurface",e[e.DeathZone=10]="DeathZone",e[e.FishPursuit=11]="FishPursuit"})(a=o.GameObjectType||(o.GameObjectType={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.objectType=a.Unknown,t}return r(t,e),t.prototype.GetTypeAsString=function(){return a[this.objectType]},i([l({type:cc.Enum(a)})],t.prototype,"objectType",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],GamePoolItem:[function(e,t,o){"use strict";cc._RF.push(t,"f2911xRuphIwa9l+LRUeS/i","GamePoolItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./PoolItemInfo"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isActive=!1,t.poolItemType=a.PoolItemType.Meat,t}return r(t,e),Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},set:function(e){this._isActive=e},enumerable:!1,configurable:!0}),i([l({type:cc.Enum(a.PoolItemType)})],t.prototype,"poolItemType",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./PoolItemInfo":"PoolItemInfo"}],GameScreen:[function(e,t,o){"use strict";cc._RF.push(t,"4cf6flVy4lHJo1gWq623YDu","GameScreen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager"),s=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),c=e("../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),l=e("../Game"),u=e("../Main"),p=e("../Maps/MapController"),d=e("../Network/ImprovedNetClient"),f=e("../Sound/SoundResource"),h=e("../SoundManager"),g=cc._decorator,y=g.ccclass,m=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.NodeParallax=null,t.beginQueued=!1,t.countDownNode=null,t.activeOnlyForReloadMap=!1,t}return r(t,e),t.prototype.onActivate=function(){e.prototype.onActivate.call(this),this.activeOnlyForReloadMap?this.activeOnlyForReloadMap=!1:(this.beginQueued=!0,f.default.inst&&h.default.inst.playMusic(f.default.inst.SurfaceAMB),u.Main.setAppContext(u.AppContext.Matchmaking),u.Main.inst.gameSceneBackground.active=!1)},t.prototype.onDeactivate=function(){e.prototype.onDeactivate.call(this),u.Main.inst.gameSceneBackground.active=!0,s.NgcBuildConfig.useNgcServer?d.default.inst.sendLeaveGameMessage():cc.error("Need handle sendLeaveGameMessage here!!!")},t.prototype.onLoad=function(){cc.log("GameScreen - onLoad")},t.prototype.start=function(){cc.log("GameScreen - start")},t.prototype.update=function(){this.beginQueued&&p.default.inst.isLoaded&&(l.default.inst.begin(),this.beginQueued=!1)},t.prototype.onTapDown=function(){a.NgcEmotesManager.inst&&a.NgcEmotesManager.inst.extendEmotesUI(!1)},i([m(cc.Node)],t.prototype,"NodeParallax",void 0),i([m(cc.Node)],t.prototype,"countDownNode",void 0),i([y],t)}(c.default);o.default=_,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../Game":"Game","../Main":"Main","../Maps/MapController":"MapController","../Network/ImprovedNetClient":"ImprovedNetClient","../Sound/SoundResource":"SoundResource","../SoundManager":"SoundManager"}],GameShop_impl_NanoSrv:[function(e,t,o){"use strict";cc._RF.push(t,"142a9BXemVJ56kB5ZT8xHnY","GameShop_impl_NanoSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Core/Utils"),s=e("../../CrossFeatures/OfflineMode/OfflineMode"),c=e("../../GameFramework/Scripts/BuildConfig"),l=e("../../GameFramework/Scripts/NgcItemInfoManager"),u=e("../../SDK/Nano/NanoSrv"),p=e("../Ads/Ads"),d=e("../Inventory/Inventory"),f=e("./GameShop"),h=cc._decorator,g=h.ccclass,y=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLogin=function(e){var t=this;if(c.NgcBuildConfig.offlineMode)a.LoadAsset("offline:text/shop-table").then(function(o){t.initShopTableFromCSV(o.text),e(null,t.shopTable)});else{for(var o=0,n=u.default.inst.getCurGameInfo().itemShop;o<n.length;o++){var r=n[o];this.shopTable[r.bundleID]=r}e(null,this.shopTable)}},t.prototype._preInit=function(){return new Promise(function(e){e("GameShop_impl_Nanosrv pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("GameShop_impl_Nanosrv initialized")})},t.prototype._buyBundle=function(e,t){var o=this;if(c.NgcBuildConfig.offlineMode){var n=l.NgcItemInfoManager.getInstance().ItemInfoList.find(function(t){return t.bundleID==e});s.OfflineMode.UpdateItem(n.price.currency,-n.price.value);for(var r=0,i=this._getItems(n.bundleID);r<i.length;r++){var a=i[r];s.OfflineMode.UpdateItem(a.itemID,a.count)}t(null,{})}else if(p.NgcAds.inst&&p.NgcAds.inst.isFakeAdsPlatform()){var f=this.getPrices(e)[0];d.NgcInventory.inst.getItemCount(f.currency,function(n,r){if(!n&&r&&r.count>=f.value){for(var i=o._getItems(e),a=0,s=0,c=i;s<c.length;s++){var l=c[s];d.NgcInventory.inst.addItem(l.itemID,l.count,function(){(a+=1)>=i.length&&t(null,!0)})}d.NgcInventory.inst.consumeItem(f.currency,f.value,function(){})}else t(!1,null)})}else{var h="/shop/buy/"+e;u.default.inst.servicePost(h,null,function(e,o){e?t(e,null):t(null,o)})}},t.prototype._getPricesList=function(e){var t,o,n=[];return e.includes("&")?n=e.split("&").map(function(e){return t=e.slice(0,e.indexOf("(")),o=+e.slice(e.indexOf("(")+1,e.indexOf(")")),{currency:t,value:o}}):(t=e.slice(0,e.indexOf("(")),o=+e.slice(e.indexOf("(")+1,e.indexOf(")")),n.push({currency:t,value:o})),n},t.prototype._getPrices=function(e){var t=this.shopTable[e].price;return p.NgcAds.inst&&p.NgcAds.inst.isFakeAdsPlatform()&&(t=this.shopTable[e].alternative_coins_price||t),c.NgcBuildConfig.offlineMode&&(t=this.shopTable[e].alternative_coins_price.toString()),this._getPricesList(t)},t.prototype._getFullCost=function(e){var t=this.shopTable[e].fullCost;return this._getPricesList(t)},t.prototype._getItems=function(e){var t,o,n,r=this.shopTable[e].items,i=[];return"string"==typeof r&&(null==r?void 0:r.includes("get-item"))?(r.includes("&")?i=r.split("&").map(function(e){var t;if(e.match(/get-item\((.+)\)/i))return t=RegExp.$1.split(",").map(function(e){return e.trim()}),o=t[0],n=t[1],{itemID:o,count:n}}):r.match(/get-item\((.+)\)/i)&&(t=RegExp.$1.split(",").map(function(e){return e.trim()}),o=t[0],n=t[1],i.push({itemID:o,count:n})),i):null},i([g],t)}(f.NgcGameShop));o.default=y,cc._RF.pop()},{"../../Core/Utils":"Utils","../../CrossFeatures/OfflineMode/OfflineMode":"OfflineMode","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../SDK/Nano/NanoSrv":"NanoSrv","../Ads/Ads":"Ads","../Inventory/Inventory":"Inventory","./GameShop":"GameShop"}],GameShop:[function(e,t,o){"use strict";cc._RF.push(t,"29b00+BH9FDHr6mhtiSP3E2","GameShop");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcGameShop=o.ItemPrice=o.BundleDataList=o.BundleData=o.InventoryItemType=void 0;var a=e("../../Core/nCSV"),s=e("../Service"),c=cc._decorator,l=c.ccclass;c.property,function(e){e[e.Currency=0]="Currency",e[e.Consumable=1]="Consumable",e[e.Equipable=2]="Equipable"}(o.InventoryItemType||(o.InventoryItemType={}));o.BundleData=function(){};o.BundleDataList=function(){};o.ItemPrice=function(){};var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shopTable={},t}return r(t,e),t.prototype.getName=function(){return"NgcGameShop"},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){return this._init(e)},t.prototype.buyBundle=function(e,t){this._buyBundle(e,function(e,o){t(e,o)})},t.prototype.getPrices=function(e){return this._getPrices(e)},t.prototype.getFullCost=function(e){return this._getFullCost(e)},t.prototype.getItems=function(e){return this._getItems(e)},t.prototype.initShopTableFromCSV=function(e){var t=a.nCSV.parseTable(e);if(!t)return!1;var o=this;return this.shopTable={},t.forEach(function(e){var t=e.bundleID;o.shopTable.hasOwnProperty(t)?console.warn("Duplicate bundle ID: "+t):o.shopTable[t]=e}),!0},t.prototype.start=function(){},t.srvInstances=[],t.inst=null,i([l],t)}(s.NgcService);o.NgcGameShop=u,cc._RF.pop()},{"../../Core/nCSV":"nCSV","../Service":"Service"}],GameTrackingDataHelper:[function(e,t,o){"use strict";cc._RF.push(t,"03d0bWISQBGDrRcwp96VSDm","GameTrackingDataHelper");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Player/PlayerController"),s=e("./Game"),c=e("./UserInfo"),l=e("../NanoGameCore/Services/Telemetry/Telemetry"),u=e("./../globals"),p=e("./GameObject"),d=e("./Network/NetClient"),f=e("../NanoGameCore/GameFramework/Scripts/BuildConfig"),h=e("../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),g=e("./TrackingManager"),y=e("../NanoGameCore/GameFramework/Scripts/NgcGame"),m=e("../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/NgcRevive"),_=e("./HSAUtils"),v=e("./Utils/ConstConfig"),S=e("./GameTrackingDataSupporter"),b=cc._decorator,N=b.ccclass,P=(b.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hunterClassKilledNumber=0,t.brawlerClassKilledNumber=0,t.chargerClassKilledNumber=0,t.attacksTotal=0,t.preyEaten=0,t.playersEaten=0,t.humanPlayersInGame=0,t.totalPlayersInGame=0,t.playerTotalCount=0,t.numberOfTimesHitMine=0,t.deathPosition="",t.baseScore=0,t.coinEarnings=0,t.runTime=0,t.game_queueStart_timeStamp=0,t.timer_loading_startsceneLoaded=0,t.timer_onboarding_preInterEnd=0,t.timer_gameQueueStart=0,t.timer_playerDied=0,t.timer_gameRoundStart=0,t.timer_gameRoundOver=0,t._sendGDTrackingGameEndTime=0,t._sendGDTrackingRewardClaimTime=0,t.sendGDTracking_MainmenuLoadedTime=0,t.sendGDTracking_DailyRewardTime=0,t}var o;return r(t,e),o=t,t.prototype.alertAddingSharkClassKill=function(e,t){if(e.isLocalHuman())switch(t){case"Charger":this.chargerClassKilledNumber++;break;case"Brawler":this.brawlerClassKilledNumber++;break;case"Hunter":this.hunterClassKilledNumber++}},t.prototype.setHumanPlayersInGame=function(e){this.humanPlayersInGame=e},t.prototype.setQueueStarTimeStamp=function(){this.game_queueStart_timeStamp=Date.now()-this.game_queueStart_timeStamp},t.prototype.setTotalPlayersInGame=function(e){this.totalPlayersInGame=e},t.prototype.alertAttack=function(e){e.isLocalHuman()&&this.attacksTotal++},t.prototype.alertEatPrey=function(e,t){e.isLocalHuman()&&(this.preyEaten+=t)},t.prototype.alertEatPlayer=function(e){e.isLocalHuman()&&this.playersEaten++},t.prototype.alertHitMines=function(e){e.isLocalHuman()&&this.numberOfTimesHitMine++},t.prototype.reset=function(){this.attacksTotal=0,this.preyEaten=0,this.playersEaten=0,this.humanPlayersInGame=0,this.totalPlayersInGame=0,this.numberOfTimesHitMine=0,this.deathPosition="",this.hunterClassKilledNumber=0,this.brawlerClassKilledNumber=0,this.chargerClassKilledNumber=0,this.baseScore=0,this.runTime=0},t.prototype.sendGameResultsToTelemetry=function(e){if(e.isLocalHuman()){var t={roundID:y.NgcGame.roundID,sharkID:e.skin,sharkClass:e.sharkType,hunterClassKilledNumber:o.inst.hunterClassKilledNumber,brawlerClassKilledNumber:o.inst.brawlerClassKilledNumber,chargerClassKilledNumber:o.inst.chargerClassKilledNumber,runTime:o.inst.runTime,roundTime:(Date.now()-o.inst.game_queueStart_timeStamp)/1e3,attacksTotal:o.inst.attacksTotal,preyEaten:o.inst.preyEaten,playersEaten:o.inst.playersEaten,deathPosition:o.inst.deathPosition,baseScore:o.inst.baseScore,numberOfTimesHitMine:o.inst.numberOfTimesHitMine,finalPositionInActionPhase:e.curRank,humanPlayersInGame:o.inst.humanPlayersInGame,totalPlayersInGame:o.inst.totalPlayersInGame,playerTotalCount:o.inst.playerTotalCount,averageFPS:Math.round(u.default.Game.inst.getFPS(s.FPS.AVERAGE)),minFPS:Math.round(u.default.Game.inst.getFPS(s.FPS.MIN)),maxFPS:Math.round(u.default.Game.inst.getFPS(s.FPS.MAX)),currentFPS:Math.round(u.default.Game.inst.getFPS(s.FPS.CURRENT)),sharkSize:e.curSize,averageNetworkLatency:Math.round(d.default.inst.averageLatencyMS),multiplierValue:c.UserInfo.curScoreMultiplierValue+.01,coinEarnings:o.inst.coinEarnings,causeOfDeath:o.inst.causeOfDeath};t.coinSpent=c.UserInfo.curGameExpenseCoin,t.coinEarned=c.UserInfo.curGameIncomeCoin,c.UserInfo.curGameIncomeCoin=0,c.UserInfo.curGameExpenseCoin=0}else console.error("Why is a non-local player sending data")},t.prototype.onLoad=function(){o.inst?cc.log("Why is there more than one GameTrackingDataHelper"):o.inst=this},t.prototype.start=function(){},t.prototype.send_onboarding_gameQueueStart=function(){if(!(h.default.totalRoundCount>1)){var e=(this.timer_gameQueueStart-l.NgcTelemetry.inst.timeStamp_loadingGameStart)/1e3;if(0==h.default.totalRoundCount){var t=(this.timer_gameQueueStart-this.timer_loading_startsceneLoaded)/1e3;g.default.inst.onboarding_gameQueueStart(e,t)}else if(1==h.default.totalRoundCount){t=(this.timer_gameQueueStart-this.timer_onboarding_preInterEnd)/1e3;var o=y.NgcGame.roundID,n=s.default.inst.getFPS(s.FPS.CURRENT),r=e<86400;g.default.inst.onboarding_gameQueueStart2(e,t,o,n,r)}}},t.prototype.send_onboarding_gameRoundStart=function(){var e=Date.now();this.timer_gameRoundStart=e;var t=Math.floor((e-l.NgcTelemetry.inst.timeStamp_loadingGameStart)/1e3),o=Math.floor((e-this.timer_gameQueueStart)/1e3);if(0==h.default.totalRoundCount)g.default.inst.onboarding_gameRoundStart(t,o);else if(1==h.default.totalRoundCount){var n=y.NgcGame.roundID,r=s.default.inst.getFPS(s.FPS.CURRENT),i=t<86400;g.default.inst.onboarding_gameRoundStart2(t,o,n,r,i)}},t.prototype.send_playerDropShark=function(){var e=Date.now(),t=Math.floor((e-l.NgcTelemetry.inst.timeStamp_loadingGameStart)/1e3),o=Math.floor((e-this.timer_gameRoundStart)/1e3),n=Math.floor((e-this.timer_gameQueueStart)/1e3),r=a.default.localPlayer.startPointIndex;0==h.default.totalRoundCount?g.default.inst.onboarding_playerDropSharkR1(t,o,r):1==h.default.totalRoundCount&&g.default.inst.onboarding_playerDropSharkR2(t,o,r);var i=y.NgcGame.roundID,c=a.default.localPlayer.skin,u=s.default.inst.getFPS(s.FPS.CURRENT);g.default.inst.game_playerDropShark(o,r,n,i,c,u)},t.prototype.send_playerDie=function(){var e=y.NgcGame.roundID,t=s.default.inst.getFPS(s.FPS.CURRENT);1===a.default.localPlayer.curRank?o.inst.causeOfDeath="alive":a.default.localPlayer.typeOfAttacker===p.GameObjectType.Player||a.default.localPlayer.typeOfAttacker===p.GameObjectType.Enemy?o.inst.causeOfDeath="killed":a.default.localPlayer.typeOfAttacker===p.GameObjectType.Toxic&&(o.inst.causeOfDeath="acid");var n=o.inst.causeOfDeath,r=a.default.localPlayer.curRank,i=m.default.inst.checker,u=Math.ceil((a.default.localPlayer.getTotalScore()+_.default.rankBonusScore(r))*c.UserInfo.curScoreMultiplierValue/100),d=a.default.localPlayer.skin,f=a.default.localPlayer.curSize,v=o.inst.playersEaten,S=Date.now();this.timer_playerDied=S;var b=(S-l.NgcTelemetry.inst.timeStamp_loadingGameStart)/1e3,N=(S-this.timer_gameRoundStart)/1e3;0==h.default.totalRoundCount&&g.default.inst.onboarding_playerDied(b,N,e,t,n,r,i),g.default.inst.LogEvent_playerDied(e,t,n,r,i,u,d,f,v)},t.prototype.send_gameRoundOver=function(){"GameDistribution"===f.NgcBuildConfig.buildPlatform&&0==this._sendGDTrackingGameEndTime&&(o.inst.sendGDTracking(S.GameDistributionTrackingType.FirstGameEnd),this._sendGDTrackingGameEndTime++);var e=Date.now();this.timer_gameRoundOver=e;var t=(e-this.timer_gameQueueStart)/1e3;1===a.default.localPlayer.curRank?o.inst.causeOfDeath="alive":a.default.localPlayer.typeOfAttacker===p.GameObjectType.Player||a.default.localPlayer.typeOfAttacker===p.GameObjectType.Enemy?o.inst.causeOfDeath="killed":a.default.localPlayer.typeOfAttacker===p.GameObjectType.Toxic&&(o.inst.causeOfDeath="acid");var n=a.default.localPlayer.curRank,r=Math.ceil((a.default.localPlayer.getTotalScore()+_.default.rankBonusScore(n))*c.UserInfo.curScoreMultiplierValue/100),i=a.default.localPlayer.startPointIndex,l=(a.default.localPlayer.getTotalScore()+_.default.rankBonusScore(n))*(c.UserInfo.curScoreMultiplierValue-1);l=Math.ceil(l),g.default.getInst().game_roundOver_ExtraParam(y.NgcGame.roundID,Math.round(u.default.Game.inst.getFPS(s.FPS.CURRENT)),Math.round(u.default.Game.inst.getFPS(s.FPS.AVERAGE)),Math.round(u.default.Game.inst.getFPS(s.FPS.MAX)),Math.round(u.default.Game.inst.getFPS(s.FPS.MIN)),t,o.inst.playerTotalCount,a.default.localPlayer.curRank,r,m.default.inst.checker,o.inst.causeOfDeath,u.default.Game.inst.isSBBoosterActivated,o.inst.hunterClassKilledNumber,o.inst.brawlerClassKilledNumber,o.inst.chargerClassKilledNumber,o.inst.deathPosition,a.default.localPlayer.skin,a.default.localPlayer.sharkType,a.default.localPlayer.curSize,o.inst.preyEaten,o.inst.playersEaten,l,i)},t.prototype.send_revive=function(){var e=Date.now(),t=(e-l.NgcTelemetry.inst.timeStamp_loadingGameStart)/1e3,n=y.NgcGame.roundID,r=s.default.inst.getFPS(s.FPS.CURRENT),i=o.inst.causeOfDeath,p=a.default.localPlayer.curRank,d=Math.ceil((a.default.localPlayer.getTotalScore()+_.default.rankBonusScore(p))*c.UserInfo.curScoreMultiplierValue/100);if(0==h.default.totalRoundCount){var f=(e-this.timer_playerDied)/1e3;g.default.inst.onboarding_playerRevived(t,f,n,r,i,p,"First")}var m=a.default.localPlayer.curSize,v=u.default.Game.inst.isSBBoosterActivated,S=a.default.localPlayer.sharkType,b=a.default.localPlayer.skin;g.default.inst.LogEvent_playerRevived(n,r,i,p,d,S,b,m,v)},t.prototype.send_gameRoundOverClicked=function(e){"GameDistribution"===f.NgcBuildConfig.buildPlatform&&0==this._sendGDTrackingRewardClaimTime&&(this.sendGDTracking(S.GameDistributionTrackingType.FirstGameRewardClaimed),this._sendGDTrackingRewardClaimTime+=1);var t=Date.now(),n=(t-this.timer_gameRoundOver)/1e3,r=(t-this.timer_gameQueueStart)/1e3;1===a.default.localPlayer.curRank?o.inst.causeOfDeath="alive":a.default.localPlayer.typeOfAttacker===p.GameObjectType.Player||a.default.localPlayer.typeOfAttacker===p.GameObjectType.Enemy?o.inst.causeOfDeath="killed":a.default.localPlayer.typeOfAttacker===p.GameObjectType.Toxic&&(o.inst.causeOfDeath="acid");var i=a.default.localPlayer.curRank,s=Math.ceil((a.default.localPlayer.getTotalScore()+_.default.rankBonusScore(i))*c.UserInfo.curScoreMultiplierValue/100),d=a.default.localPlayer.startPointIndex,h=(a.default.localPlayer.getTotalScore()+_.default.rankBonusScore(i))*(c.UserInfo.curScoreMultiplierValue-1);h=Math.ceil(h),g.default.getInst().game_roundOverClicked_ExtraParam(y.NgcGame.roundID,r,a.default.localPlayer.curRank,S.default.inst.crownEarned,s,m.default.inst.checker,o.inst.causeOfDeath,u.default.Game.inst.isSBBoosterActivated,a.default.localPlayer.skin,a.default.localPlayer.sharkType,a.default.localPlayer.curSize,h,d,n),l.NgcTelemetry.inst.LogEvent_GameRoundOverClicked(e)},t.prototype.send_playerWaterLanded=function(){var e=Date.now(),t=Math.round(e-this.timer_gameQueueStart)/1e3;g.default.getInst().LogEvent_LandedWater(a.default.localPlayer.startPointIndex,t,y.NgcGame.roundID,a.default.localPlayer.skin)},t.prototype.setQueueStart_ExtraParam=function(){this.timer_gameQueueStart=Date.now();var e=s.default.inst.getFPS(s.FPS.CURRENT),t=c.UserInfo.localSkinName,o="Brawler";v.ConstConfig.SHARK_DATABASE.forEach(function(e){e.name===t&&(o=e.type)});var n=u.default.Game.inst.isSBBoosterActivated,r=g.default.inst.game_queueStart_ExtraParam(e,t,o,n);l.NgcTelemetry.inst.setGameQueueStartExtraParam(r)},t.prototype.setRoundStart_ExtraParam=function(){var e=Date.now(),t=s.default.inst.getFPS(s.FPS.CURRENT),o=c.UserInfo.localSkinName,n="Brawler",r=this.humanPlayersInGame,i=Math.floor((e-this.timer_gameQueueStart)/1e3);v.ConstConfig.SHARK_DATABASE.forEach(function(e){e.name===o&&(n=e.type)});var p=u.default.Game.inst.isSBBoosterActivated,d=a.default.localPlayer.startPointIndex,f=g.default.inst.game_roundStart_ExtraParam(t,r,i,o,n,p,d);l.NgcTelemetry.inst.setGameRoundStartExtraParam(f)},t.prototype.sendGDTracking=function(e){switch(e){case S.GameDistributionTrackingType.MainScreenShown:this.GDTrackingEvent("FTUE__002__main_screen_shown");break;case S.GameDistributionTrackingType.DailyRewardClaimed:this.GDTrackingEvent("FTUE__003__daily_reward_claimed");break;case S.GameDistributionTrackingType.FirstGameClicked:this.GDTrackingEvent("FTUE__004__first_game_click");break;case S.GameDistributionTrackingType.FirstGameStarted:this.GDTrackingEvent("FTUE__005__first_game_start");break;case S.GameDistributionTrackingType.FirstGameReviveShown:this.GDTrackingEvent("FTUE__006__first_game_revive_shown");break;case S.GameDistributionTrackingType.FirstGameReviveClicked:this.GDTrackingEvent("FTUE__007__first_game_revive_clicked");break;case S.GameDistributionTrackingType.FirstGameEnd:this.GDTrackingEvent("FTUE__008__first_game_end");break;case S.GameDistributionTrackingType.FirstGameRewardClaimed:this.GDTrackingEvent("FTUE__009__first_game_reward_claimed");break;case S.GameDistributionTrackingType.FirstGameMainScreenReturned:this.GDTrackingEvent("FTUE__010__first_game_main_screen_return");break;default:console.warn("Send Gamedistribution tracking: wrong type")}},t.prototype.GDTrackingEvent=function(e){try{window.gdsdk.sendEvent({eventName:e,data:{milestoneDescription:e}}),console.warn("Gamedistribution tracking have been sent: Tracking name "+e)}catch(t){cc.warn("Can't send tracking event",t)}},t.prototype.update=function(){"GameDistribution"===f.NgcBuildConfig.buildPlatform&&(0==this.sendGDTracking_MainmenuLoadedTime&&S.default.inst.getSendTrackingGDMainMenuSignal&&(this.sendGDTracking(S.GameDistributionTrackingType.MainScreenShown),this.sendGDTracking_MainmenuLoadedTime++),1==this.sendGDTracking_MainmenuLoadedTime&&S.default.inst.getSendTrackingGDMainMenuSignal&&(this.sendGDTracking(S.GameDistributionTrackingType.FirstGameMainScreenReturned),this.sendGDTracking_MainmenuLoadedTime++),S.default.inst.getSendTrackingGDReviveShownSignal&&this.sendGDTracking(S.GameDistributionTrackingType.FirstGameReviveShown),S.default.inst.getSendTrackingGDReviveClaimedSignal&&this.sendGDTracking(S.GameDistributionTrackingType.FirstGameReviveClicked),S.default.inst.sendTrackingGDDailyReward&&0==this.sendGDTracking_DailyRewardTime&&(this.sendGDTracking(S.GameDistributionTrackingType.DailyRewardClaimed),this.sendGDTracking_DailyRewardTime++))},t.inst=null,o=i([N],t)}(cc.Component));o.default=P,cc._RF.pop()},{"../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/NgcRevive":"NgcRevive","../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../NanoGameCore/GameFramework/Scripts/NgcGame":"NgcGame","../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","./../globals":"globals","./Game":"Game","./GameObject":"GameObject","./GameTrackingDataSupporter":"GameTrackingDataSupporter","./HSAUtils":"HSAUtils","./Network/NetClient":"NetClient","./Player/PlayerController":"PlayerController","./TrackingManager":"TrackingManager","./UserInfo":"UserInfo","./Utils/ConstConfig":"ConstConfig"}],GameTrackingDataSupporter:[function(e,t,o){"use strict";cc._RF.push(t,"c18adFAO41LpI+cT4qR3I6w","GameTrackingDataSupporter");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GameDistributionTrackingType=void 0;var a=cc._decorator,s=a.ccclass;a.property,function(e){e[e.dummy=0]="dummy",e[e.LoadStart=1]="LoadStart",e[e.MainScreenShown=2]="MainScreenShown",e[e.DailyRewardClaimed=3]="DailyRewardClaimed",e[e.FirstGameClicked=4]="FirstGameClicked",e[e.FirstGameStarted=5]="FirstGameStarted",e[e.FirstGameReviveShown=6]="FirstGameReviveShown",e[e.FirstGameReviveClicked=7]="FirstGameReviveClicked",e[e.FirstGameEnd=8]="FirstGameEnd",e[e.FirstGameRewardClaimed=9]="FirstGameRewardClaimed",e[e.FirstGameMainScreenReturned=10]="FirstGameMainScreenReturned",e[e.size=11]="size"}(o.GameDistributionTrackingType||(o.GameDistributionTrackingType={}));var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._mainMenuSignal=!1,t._reviveShownSignal=!1,t._reviveClaimedSignal=!1,t._trackingReviveAcceptTime=0,t.isStarted=!1,t._dailyRewardSignal=!1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst||(o.inst=this)},Object.defineProperty(t.prototype,"setSendTrackingGDReviveShown",{set:function(e){this._reviveShownSignal=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setSendTrackingGDReviveClaim",{set:function(e){0==this._trackingReviveAcceptTime&&(this._reviveClaimedSignal=e,this._trackingReviveAcceptTime++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setSendTrackingGDMainMenuSignal",{set:function(e){this._mainMenuSignal=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getSendTrackingGDMainMenuSignal",{get:function(){var e=this._mainMenuSignal;return this._mainMenuSignal=!1,e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getSendTrackingGDReviveShownSignal",{get:function(){var e=this._reviveShownSignal;return this._reviveShownSignal&&(this._reviveShownSignal=!1),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getSendTrackingGDReviveClaimedSignal",{get:function(){var e=this._reviveClaimedSignal;return this._reviveClaimedSignal&&(this._reviveClaimedSignal=!1),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sendTrackingGDDailyReward",{get:function(){var e=this._dailyRewardSignal;return this._dailyRewardSignal=!1,e},set:function(e){this._dailyRewardSignal=e},enumerable:!1,configurable:!0}),t.inst=null,o=i([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],GameUI:[function(e,t,o){"use strict";cc._RF.push(t,"a1acfqDQRNJq6QRo6v2MYp3","GameUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../globals"),l=e("../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager"),u=e("../../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/NgcRevive"),p=e("../../NanoGameCore/GameFramework/Scripts/Ads/AdsManager_impl"),d=e("../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),f=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),h=e("../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),g=e("../../NanoGameCore/Services/Ads/Ads"),y=e("../../NanoGameCore/Services/Telemetry/Telemetry"),m=e("../Game"),_=e("../GameTrackingDataHelper"),v=e("../Localized/HSALocalizedManager"),S=e("../Player/PlayerController"),b=e("../SoundManager"),N=e("./DeathZone_Notice"),P=e("./RedWarning"),C=e("./ToxicWarning"),w=e("./Tutorial"),T=cc._decorator,I=T.ccclass,R=T.property,O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.countDownNode=null,t.tutorial=null,t.powerTimerContainer=null,t.inGame_Leaderboard=null,t.toxicCountdown=null,t.deathZone_Notice=null,t.redWarning=null,t.dieByOpponentPopup=null,t.dieByToxicPopup=null,t.winnerFeedback=null,t.toxicWarningEffect=null,t.rankingParentNode=null,t.endGameRewardParentNode=null,t.spectatorNode=null,t.emotesNode=null,t.cheatNode=null,t.endGameFlowBackground=null,t.confettiLeft=null,t.confettiRight=null,t.endGameFlowBackgroundFadeInDuration=0,t.winnerFeedbackScaleUpValue=0,t.winnerFeedbackTransitionDuration=0,t.winnerFeedbackScaleDownValue=0,t.winnerFeedbackDelayBeforeResult=0,t.deathPopUpDelayBeforeResult=0,t.deathPopUpTopContainerFadeInDuration=0,t.deathPopUpTopContainerScale=0,t.deathPopUpBottomContainerFadeInDuration=0,t.deathPopUpBottomContainerScale=0,t.deathPopUpFadeOutDuration=0,t._isShowingTimeNearlyUp=!1,t._isShowingStarvingMessage=!1,t._endGameFlowBackgroundOriginalOpacity=0,t._doesDoubleTabShowed=!1,t.clickAble=!0,t._starvingMessage=null,t._timeUpMessage=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst&&cc.log("There is more than one GameUI."),o.inst=this,this.tutorial.node.active=!0,this._endGameFlowBackgroundOriginalOpacity=this.endGameFlowBackground.opacity,f.NgcBuildConfig.enabledDebugMode?this.cheatNode.active=!0:this.cheatNode.removeFromParent(!0)},t.prototype.reset=function(){this.monitorSizeProgress(0),this.monitorEatProgress(0),this.monitorBoostProgress(0),this.clickAble=!0,this._doesDoubleTabShowed=!1,this.inGame_Leaderboard.active=!1,this.inGame_Leaderboard.opacity=255,this.toxicCountdown.active=!1,this.toxicCountdown.opacity=255,this._isShowingStarvingMessage=!1,this._isShowingTimeNearlyUp=!1,this._starvingMessage&&this._starvingMessage.destroy(),this._timeUpMessage&&this._timeUpMessage.destroy(),this.deathZone_Notice.node.active=!1,this.deathZone_Notice.node.opacity=255,this.deathZone_Notice.reset(),this.dieByOpponentPopup.active=!1,this.dieByToxicPopup.active=!1,this.toxicWarningEffect.nodeOpacity=0,this.endGameFlowBackground.active=!1},t.prototype.monitorSizeProgress=function(){},t.prototype.monitorEatProgress=function(){},t.prototype.monitorBoostProgress=function(){},t.prototype.forceFullBoostBar=function(){},t.prototype.showDragToControl=function(e){void 0===e&&(e=!0),this.tutorial.enableDragToControl(e)},t.prototype.showDoubleTabTutorial=function(e){void 0===e&&(e=!0),this._doesDoubleTabShowed&&!1!==e||(this.tutorial.enableDoubleTab(e),cc.sys.platform===cc.sys.DESKTOP_BROWSER?this.tutorial.setMessageTutorial(v.default.t("HSA_TUTORIAL_CLICK_TO_BOOST_SPEED").text):this.tutorial.setMessageTutorial(v.default.t("HSA_TUTORIAL_RELEASE_TO_BOOST_SPEED").text),this._doesDoubleTabShowed=!0)},t.prototype.showWiggleToDropTutorial=function(e){void 0===e&&(e=!0),this.tutorial.enableDoubleTab(e),cc.sys.platform===cc.sys.DESKTOP_BROWSER?this.tutorial.setMessageTutorial(v.default.t("HSA_TUTORIAL_CLICK_TO_BREAK_FREE").text):this.tutorial.setMessageTutorial(v.default.t("HSA_TUTORIAL_TAP_TO_BREAK_FREE").text),this.tutorial.doubleTab.mode="wiggle"},t.prototype.showRedWarning=function(e,t){t?e?this.redWarning.showRedWarning(!0):this.redWarning.showRedWarning(!1):e&&this.redWarning.startBlinkOnce()},t.prototype.showCountDownScreen=function(){this.countDownNode.active=!0},t.prototype.showInGame_Leaderboard=function(){this.inGame_Leaderboard.active=!0,this.toxicCountdown.active=!0},t.prototype.showEndGameHud=function(){return a(this,void 0,void 0,function(){return s(this,function(){return y.NgcTelemetry.inst.LogEvent_EnterScreen("EndOfActionPhase"),l.NgcEmotesManager.inst.extendEmotesUI(!1),cc.tween(c.default.GameUI.inst.node).to(.1,{opacity:0}).start(),[2]})})},t.prototype.showReviveAds=function(){return new Promise(function(e){u.default.inst.isOfferAccepted()?g.NgcAds.inst&&g.NgcAds.inst.adsIsAvailable(g.AdsType.VideoReward)?(h.default.updateAdsInfo(),p.default.inst.show(d.NgcPointcuts.videoReviveDialog,g.AdsType.VideoReward,"None",0,function(){b.default.inst.stopMusic()},function(t){b.default.inst.playStartScreenMusic(),c.default.Game.inst.isReviveAdsWatched=t?m.ReviveAdsStatus.Watched:m.ReviveAdsStatus.Skipped,e(t)})):u.default.inst.notUsingAdToRevive()?e(!0):e(!1):e(!0),u.default.inst.reset()})},t.prototype.startDeathZone_Notice=function(){this.deathZone_Notice.node.active=!0,this.deathZone_Notice.startCounting()},t.prototype.showEliminatedPopupByOpponent=function(e){var t=this;_.default.inst.baseScore=S.default.localPlayer.getKillsScore()+S.default.localPlayer.getDevouredScore(),_.default.inst.runTime=c.default.Game.inst.getLocalGameClockSec().toString(),_.default.inst.deathPosition="("+S.default.localPlayer.getWorldPosition().x.toString()+", "+S.default.localPlayer.getWorldPosition().y.toString()+")",this.dieByOpponentPopup.getComponent("DieByOpponent").setOpponentInfo(e.nameLabel.string,e.countryFlagSprite),this.dieByOpponentPopup.getComponent("DieByOpponent").setRank(),this._showEndGameFlowBlankBackground(function(){t.dieByOpponentPopup.getComponent("DieByOpponent").playAnimation(t.deathPopUpTopContainerScale,t.deathPopUpTopContainerFadeInDuration,t.deathPopUpBottomContainerScale,t.deathPopUpBottomContainerFadeInDuration,t.deathPopUpFadeOutDuration,t.deathPopUpDelayBeforeResult)}),this.showEndGameHud()},t.prototype.showEliminatedPopupByToxic=function(){var e=this;_.default.inst.baseScore=S.default.localPlayer.getKillsScore()+S.default.localPlayer.getDevouredScore(),_.default.inst.runTime=c.default.Game.inst.getLocalGameClockSec().toString(),_.default.inst.deathPosition="("+S.default.localPlayer.getWorldPosition().x.toString()+", "+S.default.localPlayer.getWorldPosition().y.toString()+")",this.dieByToxicPopup.getComponent("DieByOpponent").setRank(),this._showEndGameFlowBlankBackground(function(){e.dieByToxicPopup.getComponent("DieByOpponent").playAnimation(e.deathPopUpTopContainerScale,e.deathPopUpTopContainerFadeInDuration,e.deathPopUpBottomContainerScale,e.deathPopUpBottomContainerFadeInDuration,e.deathPopUpFadeOutDuration,e.deathPopUpDelayBeforeResult)}),this.showEndGameHud()},t.prototype._showEndGameFlowBlankBackground=function(e){this.endGameFlowBackground.opacity=0,this.endGameFlowBackground.active=!0,cc.tween(this.endGameFlowBackground).to(this.endGameFlowBackgroundFadeInDuration,{opacity:this._endGameFlowBackgroundOriginalOpacity}).call(function(){e&&e()}).start()},t.prototype.updateToxicWarningEffect=function(e){this.toxicWarningEffect.nodeOpacity=e>0?255*e:cc.misc.lerp(this.toxicWarningEffect.nodeOpacity,0,.1)},t.prototype.showWinnerFeedback=function(){this._startWinnerFeedbackAnimation(),_.default.inst.baseScore=S.default.localPlayer.getKillsScore()+S.default.localPlayer.getDevouredScore(),_.default.inst.runTime=c.default.Game.inst.getLocalGameClockSec().toString()},t.prototype._startWinnerFeedbackAnimation=function(){var e=this;this.winnerFeedback.active=!0,this.winnerFeedback.scale=this.winnerFeedbackScaleUpValue,this.winnerFeedback.opacity=0,cc.tween(this.winnerFeedback).to(this.winnerFeedbackTransitionDuration,{opacity:255,scale:this.winnerFeedbackScaleDownValue}).call(function(){e.confettiLeft.getComponentsInChildren(cc.ParticleSystem).forEach(function(e){return e.resetSystem()}),e.confettiRight.getComponentsInChildren(cc.ParticleSystem).forEach(function(e){return e.resetSystem()})}).to(this.winnerFeedbackTransitionDuration,{scale:1}).delay(this.winnerFeedbackDelayBeforeResult).to(this.winnerFeedbackTransitionDuration,{opacity:0,scale:this.winnerFeedbackScaleUpValue}).call(function(){e.winnerFeedback.active=!1,e._showEndGameFlowBlankBackground(function(){cc.systemEvent.emit("gameOver")})}).start()},t.inst=null,i([R(cc.Node)],t.prototype,"countDownNode",void 0),i([R(w.default)],t.prototype,"tutorial",void 0),i([R(cc.Node)],t.prototype,"powerTimerContainer",void 0),i([R(cc.Node)],t.prototype,"inGame_Leaderboard",void 0),i([R(cc.Node)],t.prototype,"toxicCountdown",void 0),i([R(N.default)],t.prototype,"deathZone_Notice",void 0),i([R(P.default)],t.prototype,"redWarning",void 0),i([R(cc.Node)],t.prototype,"dieByOpponentPopup",void 0),i([R(cc.Node)],t.prototype,"dieByToxicPopup",void 0),i([R(cc.Node)],t.prototype,"winnerFeedback",void 0),i([R(C.default)],t.prototype,"toxicWarningEffect",void 0),i([R(cc.Node)],t.prototype,"rankingParentNode",void 0),i([R(cc.Node)],t.prototype,"endGameRewardParentNode",void 0),i([R(cc.Node)],t.prototype,"spectatorNode",void 0),i([R(cc.Node)],t.prototype,"emotesNode",void 0),i([R(cc.Node)],t.prototype,"cheatNode",void 0),i([R(cc.Node)],t.prototype,"endGameFlowBackground",void 0),i([R(cc.Node)],t.prototype,"confettiLeft",void 0),i([R(cc.Node)],t.prototype,"confettiRight",void 0),i([R(cc.Float)],t.prototype,"endGameFlowBackgroundFadeInDuration",void 0),i([R(cc.Float)],t.prototype,"winnerFeedbackScaleUpValue",void 0),i([R(cc.Float)],t.prototype,"winnerFeedbackTransitionDuration",void 0),i([R(cc.Float)],t.prototype,"winnerFeedbackScaleDownValue",void 0),i([R(cc.Float)],t.prototype,"winnerFeedbackDelayBeforeResult",void 0),i([R(cc.Float)],t.prototype,"deathPopUpDelayBeforeResult",void 0),i([R(cc.Float)],t.prototype,"deathPopUpTopContainerFadeInDuration",void 0),i([R(cc.Float)],t.prototype,"deathPopUpTopContainerScale",void 0),i([R(cc.Float)],t.prototype,"deathPopUpBottomContainerFadeInDuration",void 0),i([R(cc.Float)],t.prototype,"deathPopUpBottomContainerScale",void 0),i([R(cc.Float)],t.prototype,"deathPopUpFadeOutDuration",void 0),o=i([I],t)}(cc.Component);o.default=O,c.default.GameUI=O,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/NgcRevive":"NgcRevive","../../NanoGameCore/GameFramework/Scripts/Ads/AdsManager_impl":"AdsManager_impl","../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../NanoGameCore/Services/Ads/Ads":"Ads","../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../../globals":"globals","../Game":"Game","../GameTrackingDataHelper":"GameTrackingDataHelper","../Localized/HSALocalizedManager":"HSALocalizedManager","../Player/PlayerController":"PlayerController","../SoundManager":"SoundManager","./DeathZone_Notice":"DeathZone_Notice","./RedWarning":"RedWarning","./ToxicWarning":"ToxicWarning","./Tutorial":"Tutorial"}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"415f1QowFlHdJVJprdZ4hUK","Game");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ReviveAdsStatus=o.FPS=void 0;var a,s,c=e("../NanoGameCore/Core/Utils"),l=e("../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager"),u=e("../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/NgcRevive"),p=e("../NanoGameCore/CrossFeatures/EndGameFlow/Reward/RewardUI"),d=e("../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/NgcSpectatorManager"),f=e("../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),h=e("../NanoGameCore/GameFramework/Scripts/Ads/AdsManager_impl"),g=e("../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),y=e("../NanoGameCore/GameFramework/Scripts/BuildConfig"),m=e("../NanoGameCore/GameFramework/Scripts/NgcGame"),_=e("../NanoGameCore/GameFramework/Scripts/NgcMain"),v=e("../NanoGameCore/GameFramework/Scripts/Screens/NgcStartMain"),S=e("../NanoGameCore/Services/Ads/Ads"),b=e("../NanoGameCore/Services/Telemetry/Telemetry"),N=e("../Shared/Defines"),P=e("../Shared/protobuf/hsaprotobuf"),C=e("./../globals"),w=e("./DeathZoneManager"),T=e("./Enemy/PelicanManager"),I=e("./FakeNamesManager"),R=e("./Flocking/FlockManager"),O=e("./GameCamera"),E=e("./GameCameraTarget"),k=e("./GameEnums"),A=e("./GameObject"),B=e("./GameTrackingDataHelper"),D=e("./GameTrackingDataSupporter"),M=e("./HSAUtils"),L=e("./Main"),F=e("./Maps/MapController"),G=e("./Network/HSANetUtils"),U=e("./Network/ImprovedNetClient"),j=e("./Network/NetClient"),x=e("./Player/PlayerController"),z=e("./SceneManager"),H=e("./ScreenManager"),W=e("./Screens/PartyRoomScreen/PartyRoomManager"),V=e("./StartPoint"),Y=e("./TuningData"),K=e("./UI/GameUI"),q=e("./UserInfo"),X=e("./Utils/ConstConfig"),J=cc._decorator,Q=J.ccclass,Z=J.property;(function(e){e[e.MIN=0]="MIN",e[e.MAX=1]="MAX",e[e.AVERAGE=2]="AVERAGE",e[e.CURRENT=3]="CURRENT"})(a=o.FPS||(o.FPS={})),function(e){e[e.Skipped=0]="Skipped",e[e.Watched=1]="Watched",e[e.NotAccepted=2]="NotAccepted",e[e.NotOffered=3]="NotOffered"}(s=o.ReviveAdsStatus||(o.ReviveAdsStatus={}));var $=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.localPlayerPrefab=null,t.botPlayerPrefab=null,t.remotePlayerPrefab=null,t.helicopterPrefab=null,t.goldBlendMaterial=null,t.redBlendMaterial=null,t.parentForEmojis=null,t.parentForBubble=null,t.bloodEffect=null,t.waitingForRespawnEffect=null,t.matchMakingPopUp=null,t.sizeNameList=[],t.gameFrameRate=60,t.frameCounter=0,t.currentFPS=60,t.minFPS=60,t.maxFPS=0,t.averageFPS=0,t.totalFrame=0,t.totalTime=0,t.startCountFPSTimer=0,t.isFPSCounterStart=!1,t.isSBBoosterActivated=!1,t.isReviveAdsWatched=s.NotOffered,t.curGameState=N.GameState.GameOver,t.gameParam=null,t.lastGameNetID="",t.timeInCurrentStateSec=0,t.isPolygonDebugMode=!1,t.automaticGoToParty=!1,t.isShowingLeaderBoard=!1,t.isEndTime=!1,t._useFacebook=!0,t.gameMusicPlaying=!1,t.numPlayerAdded=0,t.totalPlayers=20,t.startPointList=[],t._trackingFirstGameStart=0,t.gotoPartyTimeOut=null,t}var o;return r(t,e),o=t,t.prototype.getAllPlayer=function(){return z.default.inst.getAllPlayers()},t.prototype.getLocalPlayerNetID=function(){return z.default.inst.localHumanPlayer.getNetID()},t.prototype._findPlayerByNetID=function(e){return z.default.inst._findPlayerByNetID(e)},t.prototype._findPlayerLead=function(){return z.default.inst._findPlayerLead()},t.prototype.setMandatoryCallbacks=function(){u.default.inst.setReviveFunctions(this.canApplyRevive.bind(this),this.acceptReviveOffer.bind(this),this.refuseReviveOffer.bind(this)),p.NgcEndGameRewardDialog.setSkipRewardScreenCondition(this.skipRewardCondition.bind(this)),p.NgcEndGameRewardDialog.setRetryFlowCondition(this.retryFlowCondition.bind(this)),p.NgcEndGameRewardDialog.setRetryFlowCallback(this.onRetryFlowFinish.bind(this)),p.NgcEndGameRewardDialog.setNormalFlowCallback(this.onNormalFlowFinish.bind(this))},t.prototype.skipRewardCondition=function(){return x.default.localPlayer.getCurrentScore()<=0},t.prototype.retryFlowCondition=function(){return!1},t.prototype.onRetryFlowFinish=function(){_.NgcMain.inst.reset(),setTimeout(function(){v.default.inst.enterGame()},500)},t.prototype.onNormalFlowFinish=function(){this.scheduleOnce(function(){_.NgcMain.inst.reset()},.5)},t.prototype.canApplyRevive=function(){return x.default.localPlayer.canRevive()},t.prototype.acceptReviveOffer=function(){K.default.inst.inGame_Leaderboard.opacity=255,K.default.inst.toxicCountdown.opacity=255,w.default.inst.deathZoneNode.active||(K.default.inst.deathZone_Notice.node.opacity=255),x.default.localPlayer.doBehaviorRevive()},t.prototype.refuseReviveOffer=function(){x.default.localPlayer.doBehaviorRejectRevive()},t.prototype.showRevive=function(){K.default.inst.inGame_Leaderboard.opacity=0,K.default.inst.toxicCountdown.opacity=0,K.default.inst.deathZone_Notice.node.opacity=0,!u.default.inst.isReviveDialogShowing()&&u.default.inst.showReviveDialog()},t.prototype.addScoresToResultScreen=function(e){var t=x.default.localPlayer.getDevouredScore(),o=x.default.localPlayer.getKillsScore(),n=x.default.localPlayer.curRank,r=M.default.rankBonusScore(n),i=q.UserInfo.curScoreMultiplierValue,a=t+o+r,s=a*i;e.addScoreItem("HSA_SCORE_DEVOURED",t,!1),e.addScoreItem("HSA_SCORE_KILLS",o,!1),e.addScoreItem("HSA_SCORE_RANK_BONUS",r,!1),e.addTotalScoreItem("RESULT_TOTAL_SCORE",Math.floor(a),Math.floor(s),!1),e.setScoreMultiplierValue(i),e.addCrown(n)},t.prototype.setEndGameRewards=function(){var e=q.UserInfo.curScoreMultiplierValue*(x.default.localPlayer.getDevouredScore()+x.default.localPlayer.getKillsScore()+M.default.rankBonusScore(x.default.localPlayer.curRank)),t=Math.ceil(e/100);p.NgcEndGameRewardDialog.setRewards([{itemID:"coin",count:t}])},t.prototype.getSpectatorParrent=function(){return this.node.parent.getChildByName("SpectatorParrent")},t.prototype.uploadBestScore=function(){var e=_.NgcMain.inst.getLocalPlayer(),t=Math.floor(e.getTotalScore());_.NgcMain.inst.uploadBestScore(t)},t.prototype._gameOver=function(){z.default.inst.getAllPlayers().forEach(function(e){e.isPlayerDie()&&d.NgcSpectatorManager.inst.removeSpectatorNetID(e.netID)}),L.Main.setAppContext(L.AppContext.EndOfActionPhase),f.default.inst.onGameplayOver(),B.default.inst.send_gameRoundOver()},t.prototype._onBeforeGameQueueStart=function(){b.NgcTelemetry.inst.setGameQueueStartExtraParam({NGC:!0}),B.default.inst.setQueueStart_ExtraParam(),B.default.inst.send_onboarding_gameQueueStart()},t.prototype._onBeforeGameRoundStart=function(){b.NgcTelemetry.inst.setGameRoundStartExtraParam({NGC:!0}),B.default.inst.setRoundStart_ExtraParam(),B.default.inst.send_onboarding_gameRoundStart()},t.prototype.onLoad=function(){null==o.inst?(o.inst=this,cc.systemEvent.on("gameOver",this.gameOver.bind(this)),e.prototype.onLoad.call(this)):console.error("More than one Game inst created")},t.prototype.isEnableFacebook=function(){return this._useFacebook},t.prototype.areGameResoucesLoaded=function(){return F.default.inst.isLoaded&&Y.default.inst.isLoaded()},t.prototype.changeSpectatorTargetCallback=function(t){e.prototype.changeSpectatorTargetCallback.call(this,t),z.default.inst.findPlayerByNetID(t).RecalScreenWhenSizeUp()},t.prototype.onStartSpectator=function(){K.default.inst.endGameFlowBackground.active=!1},t.prototype.onStopSpectator=function(){K.default.inst.endGameFlowBackground.active=!0},t.prototype.updateGameStartStatus=function(e){cc.log("New initial state for game "+e.gameId+" - players: "+e.playerList);for(var t=[],o=C.default.SceneManager.inst.getAllPlayersAsTableByID(),n=JSON.parse(e.playerList),r=n.length,i=0;i<r;i++){var a=n[i];C.default.SceneManager.inst.findPlayerByNetID(a.netID)?o[a.netID]&&delete o[a.netID]:t.push(a)}for(var s in o){var c=o[s];C.default.SceneManager.inst.destroyPlayerByID(c.netID)}t.forEach(function(e){var t=C.default.SceneManager.inst.createPlayer(e);t.isLocalHuman()&&(C.default.NetClient.inst.startGameMode(),C.default.GameCamera.inst.setTarget(t.node.getComponent(E.default)),C.default.GameCamera.inst.forceToTarget(t.node.getComponent(E.default),Y.default.inst.getGameParameters().camera.helicopter.start_state_camera_zoom))}),this.curGameNetID=e.gameId},t.prototype.start=function(){var e=this;Y.default.inst&&Y.default.inst.getGameParameters()&&(this.gameParam=Y.default.inst.getGameParameters().GameControl),this.node.on("changeSpectatorTarget",function(e){cc.log("get emit changeSpecatorTarget"),this.spectatorTargetNetID=e,this.updateCameraTarget()}.bind(this)),this.node.on("gameStartingStatus",function(t){e.updateGameStartStatus(t)},this),this.matchMakingPopUp.active=!0,this.isReviveAdsWatched=s.NotOffered,this.isSBBoosterActivated=!1,l.NgcEmotesManager.inst.extendEmotesUI(!0),f.default.inst.setForceGameDisconnect(function(){H.default.inst.goToStartScreen()})},t.prototype.pause=function(){},t.prototype.updateCameraTarget=function(){var e=z.default.inst.findPlayerByNetID(this.spectatorTargetNetID);if(e){var t=Y.default.inst.getGameParameters().camera.scaling.camera_zoomout_per_size[e.getComponent(x.default).getCurrentSize()];C.default.GameCamera.inst.setTarget(e.node.getComponent(E.default),t);var o={offsetX:0,offsetY:0,changeOffsetSpeed:6,zoomRatio:t,zoomSpeed:.5};O.default.inst.changeCameraState(O.CameraState.playerFixed,o)}},t.prototype.begin=function(){var e=this;this.gameMusicPlaying=!1,I.default.inst.resetNameAllocation();var t="";W.NgcPartyRoomManager.inst&&W.NgcPartyRoomManager.inst.isGameStartedFromRoom()&&(t=W.NgcPartyRoomManager.inst.getGameID()),y.NgcBuildConfig.useNgcServer?U.default.inst&&U.default.inst.isConnected()&&U.default.inst.joinGame():C.default.NetClient.inst.requestToJoinGame(t),l.NgcEmotesManager.inst.allowScrollView(!0),this.reset(),this.scheduleOnce(function(){e.onGameQueueStart()},1);var o={getPlayerEmojiPosByID:this.getPosEmojiForPlayerById.bind(this),checkPlayerIsDeadByID:C.default.SceneManager.inst.isPlayerDeadByID.bind(C.default.SceneManager.inst),parentForBubble:this.parentForBubble,parentForEmojis:this.parentForEmojis};l.NgcEmotesManager.inst.init(o),l.NgcEmotesManager.inst.allowScrollView(!0),l.NgcEmotesManager.inst.extendEmotesUI(!0)},t.prototype.startCountingTime=function(){l.NgcEmotesManager.inst.extendEmotesUI(!1),V.default.collapseAll(),K.default.inst.showCountDownScreen()},t.prototype.update=function(e){switch(this.timeInCurrentStateSec+=e,this.curGameState){case N.GameState.AddingPlayers:y.NgcBuildConfig.offlineMode&&this._workState_AddingPlayers(),f.default.inst&&this.timeInCurrentStateSec>f.default.MATCHMAKING_TIME_OUT&&this.setState(N.GameState.TimeOut);break;case N.GameState.Playing:}if(L.Main.getAppContext()===L.AppContext.Spectator){var t=[];z.default.inst.getAllPlayers().forEach(function(e){e.isPlayerDie()||t.push(e)}),t.sort(function(e,t){return e.getCurrentScore()<t.getCurrentScore()?1:-1})}this.caculateFPS(e)},t.prototype._workState_AddingPlayers=function(){if(0==this.numPlayerAdded){j.default.inst.localPlayerNetID="akvi",this.startPointList=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19];var e=j.default.inst.localPlayerNetID,t=C.default.Main.inst.localUserName;t&&""!=t||(t=C.default.Main.inst.createFakeName());var o=t+"|vn",n=C.default.Main.inst.localUserSkin,r=q.UserInfo.startBiggerSize;q.UserInfo.startBiggerSize=0;var i=c.Utils.randomFromTo(0,this.startPointList.length-1),a=this.startPointList[i];this.startPointList.splice(i,1);var s={name:o,netID:e,skin:n,startPointIndex:a,startingSize:r},l=C.default.SceneManager.inst.createPlayer(s);l.isLocalHuman()&&(C.default.NetClient.inst.startGameMode(),C.default.GameCamera.inst.setTarget(l.node.getComponent(E.default)),C.default.GameCamera.inst.forceToTarget(l.node.getComponent(E.default),Y.default.inst.getGameParameters().camera.helicopter.start_state_camera_zoom))}else{var u=j.default.inst.localPlayerNetID+":"+G.default.generateRandomUUID();C.default.SceneManager.inst.addBotID(u);var p=I.default.inst.allocRandomPerson();o=p.name+"|"+p.countryCode,i=c.Utils.randomFromTo(0,this.startPointList.length-1),a=this.startPointList[i],this.startPointList.splice(i,1),s={name:o,netID:u,skin:X.ConstConfig.SHARK_DATABASE[c.Utils.randomFromTo(0,X.ConstConfig.SHARK_DATABASE.length-1)].name,startPointIndex:a,startingSize:0},C.default.SceneManager.inst.createPlayer(s)}if(this.numPlayerAdded++,this.numPlayerAdded==this.totalPlayers){this.curGameNetID="8aim6sfrd9td1vjf4upovc";var d={gameClock:0,gameId:this.curGameNetID,gameState:N.GameState.Playing,gameStateMsgID:0,msgType:P.MessageType.SERVER_FULLGAMESTATE,playerStates:[]};this.updateStateFromServer(d)}},t.prototype.activeGoldBlendEffect=function(){this.goldBlendMaterial.setProperty("goldRatio",1),this.goldBlendMaterial.setProperty("goldColor",[1,.82,0,1])},t.prototype.disableGoldBlenEffect=function(){this.goldBlendMaterial.setProperty("goldRatio",0),this.goldBlendMaterial.setProperty("goldColor",[1,1,1,1])},t.prototype.activeRedBlendEffect=function(){this.redBlendMaterial.setProperty("redRatio",1),this.redBlendMaterial.setProperty("redColor",[1,.4,.4,1])},t.prototype.disableRedBlenEffect=function(){this.redBlendMaterial.setProperty("redRatio",0),this.redBlendMaterial.setProperty("redColor",[1,1,1,1])},t.prototype.matchMakingComplete=function(){this.matchMakingPopUp.active=!1,this.setState(N.GameState.Countdown);var e=C.default.SceneManager.inst.getMainPlayer();B.default.inst.setTotalPlayersInGame(z.default.inst.getAllPlayers().length);var t=z.default.inst.getAllPlayers().filter(function(e){return!e.netID.includes(":")}).length;B.default.inst.setHumanPlayersInGame(t),O.default.inst.setTarget(e.node.getComponent(E.default));var o={offsetY:Y.default.inst.getGameParameters().camera.helicopter.matchMaking_state_top_screen_offset,changeOffsetSpeed:Y.default.inst.getGameParameters().camera.helicopter.matchMaking_state_top_screen_offset_speed,zoomRatio:Y.default.inst.getGameParameters().camera.helicopter.matchMaking_state_camera_zoom,zoomSpeed:Y.default.inst.getGameParameters().camera.helicopter.matchMaking_state_camera_zoom_speed};O.default.inst.changeCameraState(O.CameraState.showBottom,o),this.scheduleOnce(function(){C.default.Game.inst.startCountingTime()},1)},t.prototype.startGamePlay=function(){this.setState(N.GameState.Playing),"GameDistribution"===y.NgcBuildConfig.buildPlatform&&0==this._trackingFirstGameStart&&(B.default.inst.sendGDTracking(D.GameDistributionTrackingType.FirstGameStarted),this._trackingFirstGameStart++),o.inst.onGamePlayStart(),this.startSpectatorView(),K.default.inst.showWiggleToDropTutorial(),L.Main.setAppContext(L.AppContext.Gameplay),b.NgcTelemetry.inst.LogEvent_GamePlayStart(),this.scheduleOnce(function(){K.default.inst.startDeathZone_Notice()},Y.default.inst.getGameParameters().death_zone.time_start-10),this.scheduleOnce(function(){w.default.inst.activeDeathZone()},Y.default.inst.getGameParameters().death_zone.time_start),this.scheduleOnce(function(){z.default.inst.getAllPlayers().forEach(function(e){e.removeShield()})},Y.default.inst.getGameParameters().GameControl.immortal_shield_duration_since_countdown),K.default.inst.showInGame_Leaderboard(),q.UserInfo.needCheckStartBiggerSize=!0},t.prototype.updateStateFromServer=function(e){if(e.gameId==this.curGameNetID){cc.log("@@@updateStateFromServer",e);var t=e.gameClock;e.gameState==N.GameState.Playing&&(this.curGameState!=N.GameState.GameOver&&this.curGameState!=N.GameState.Playing&&this.curGameState!=N.GameState.Countdown&&(this.timeInCurrentStateSec=t,this.matchMakingComplete()),e.playerStates.forEach(function(e){var t=C.default.SceneManager.inst.findPlayerByNetID(e.netID);t?t.updateFromNetStateData(e):console.warn("Got data for a player I don't recognize")}),C.default.SceneManager.inst.getNumPlayerAlive()<=1&&this.goToPartyRoom())}else console.warn("Got irrelevant (previous game?) session data")},t.prototype.goToPartyRoom=function(){if(W.NgcPartyRoomManager.inst&&W.NgcPartyRoomManager.inst.isGameStartedFromRoom()&&0==this.automaticGoToParty){this.automaticGoToParty=!0;var e=Date.now();cc.log("#Call timeout funciton"),L.Main.inst.inBackground?e-L.Main.inst._appHiddenTime>5e3&&W.NgcPartyRoomManager.inst.closeUI(!0):this.gotoPartyTimeOut=setTimeout(function(){cc.log("#Howlong",Date.now()-e)},1e3*(W.NgcPartyRoomManager.TIME_OUT_FOR_SCREEN_DISAPPEAR+3))}},t.prototype.getLocalGameClockSec=function(){return this.timeInCurrentStateSec},t.prototype.setState=function(e){switch(e){case N.GameState.GameOver:break;case N.GameState.AddingPlayers:this.numPlayerAdded=0,B.default.inst.setQueueStarTimeStamp(),this.timeInCurrentStateSec=0;break;case N.GameState.Playing:z.default.inst.updateNumPlayerAlive();break;case N.GameState.GameOver:this.lastGameNetID=this.curGameNetID;break;case N.GameState.TimeOut:}this.curGameState=e},t.prototype.playerKilled=function(e){e.isLocallyControlledBot()||e.isRemote()?(e.directionArrow.active=!1,e.isLocallyControlledBot()&&(y.NgcBuildConfig.offlineMode?e.setState(k.PlayerState.Dead):e.sendBroadcastMessagePlayerDead(e.netID))):e.isLocalHuman()&&(u.default.inst&&u.default.inst.canRevive(z.default.inst.getNumPlayerAlive(),100)?(e.sendBroadcastMessagePlayerKill(e.netID),this.showRevive()):(e.sendBroadcastMessagePlayerDead(e.netID),y.NgcBuildConfig.offlineMode&&e.setState(k.PlayerState.Dead)))},t.prototype.playerDead=function(e){if(y.NgcBuildConfig.offlineMode&&!e.isLocalHuman()&&z.default.inst.getNumPlayerAlive()<=1&&x.default.localPlayer.isAlive())return x.default.localPlayer.curRank=1,x.default.localPlayer.setState(k.PlayerState.Win),void this.showRankingPopup();e.isLocallyControlledBot()||e.isRemote()?e.directionArrow.active=!1:e.isLocalHuman()&&this.showRankingPopup()},t.prototype.playerWin=function(){},t.prototype.showRankingPopup=function(){var e=x.default.localPlayer;h.default.inst.hasAds(S.AdsType.Banner)&&h.default.inst.show(g.NgcPointcuts.bannerRewardVideo,S.AdsType.Banner),o.inst.disableRedBlenEffect(),e.curState==k.PlayerState.Win?this.scheduleOnce(function(){K.default.inst.showWinnerFeedback()},2):e.typeOfAttacker==A.GameObjectType.Enemy?(d.NgcSpectatorManager.inst.setFollowNetID(e.attacker.netID),this.scheduleOnce(function(){K.default.inst.showEliminatedPopupByOpponent(e.attacker)},.1)):e.typeOfAttacker==A.GameObjectType.Toxic&&this.scheduleOnce(function(){K.default.inst.showEliminatedPopupByToxic()},.1)},t.prototype.RestartGame=function(){L.Main.inst.reload()},t.prototype.setGameParameters=function(){},t.prototype.reset=function(){this.unscheduleAllCallbacks(),this.getSpectatorParrent().removeAllChildren(),K.default.inst.reset(),O.default.inst.reset(),this.setState(N.GameState.AddingPlayers),R.default.inst.createFlocks(),T.default.inst.initPelican(),this.isShowingLeaderBoard=!1,this.disableGoldBlenEffect(),this.disableRedBlenEffect(),this.isEndTime=!1,d.NgcSpectatorManager.inst&&d.NgcSpectatorManager.inst.reset(),B.default.inst.reset(),w.default.inst.reset(),this.matchMakingPopUp.active=!0,l.NgcEmotesManager.inst.currentEmotesUIInst.node.active=!0,l.NgcEmotesManager.inst.extendEmotesUI(!0),this.automaticGoToParty=!1,this.gotoPartyTimeOut&&clearTimeout(this.gotoPartyTimeOut)},t.prototype.getPosEmojiForPlayerById=function(e){return C.default.SceneManager.inst.getPlayerEmojiWPosByID(e)},t.prototype.resetFPSCounter=function(){this.minFPS=60,this.maxFPS=0,this.averageFPS=0,this.totalFrame=0,this.totalTime=0,this.frameCounter=0,this.currentFPS=60,this.isFPSCounterStart=!1},t.prototype.getFPS=function(e){switch(e){case a.MAX:return this.maxFPS;case a.MIN:return this.minFPS;case a.AVERAGE:return this.averageFPS;case a.CURRENT:return this.currentFPS}},t.prototype.caculateFPS=function(){if(this.isFPSCounterStart&&(this.frameCounter++,Date.now()-this.startCountFPSTimer>=1e3)){this.startCountFPSTimer=Date.now();var e=this.frameCounter;e>60&&(e=60),this.currentFPS=e,this.minFPS=Math.min(this.minFPS,e),this.maxFPS=Math.max(this.maxFPS,e),this.totalFrame+=e,this.totalTime++,this.averageFPS=this.totalFrame/this.totalTime,f.default.inst.setTrackingParams({currentFPS:e,averageFPS:Math.round(this.averageFPS)}),f.default.inst.onMeansureFPS(this.averageFPS),this.frameCounter=0}this.isFPSCounterStart||(this.isFPSCounterStart=!0,this.startCountFPSTimer=Date.now())},t.inst=null,i([Z(cc.Prefab)],t.prototype,"localPlayerPrefab",void 0),i([Z(cc.Prefab)],t.prototype,"botPlayerPrefab",void 0),i([Z(cc.Prefab)],t.prototype,"remotePlayerPrefab",void 0),i([Z(cc.Prefab)],t.prototype,"helicopterPrefab",void 0),i([Z(cc.Material)],t.prototype,"goldBlendMaterial",void 0),i([Z(cc.Material)],t.prototype,"redBlendMaterial",void 0),i([Z(cc.Node)],t.prototype,"parentForEmojis",void 0),i([Z(cc.Node)],t.prototype,"parentForBubble",void 0),i([Z(cc.Prefab)],t.prototype,"bloodEffect",void 0),i([Z(cc.Node)],t.prototype,"waitingForRespawnEffect",void 0),i([Z(cc.Node)],t.prototype,"matchMakingPopUp",void 0),i([Z(cc.SpriteFrame)],t.prototype,"sizeNameList",void 0),o=i([Q],t)}(m.NgcGame);o.default=$,C.default.Game=$,cc._RF.pop()},{"../NanoGameCore/Core/Utils":"Utils","../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/NgcRevive":"NgcRevive","../NanoGameCore/CrossFeatures/EndGameFlow/Reward/RewardUI":"RewardUI","../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/NgcSpectatorManager":"NgcSpectatorManager","../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../NanoGameCore/GameFramework/Scripts/Ads/AdsManager_impl":"AdsManager_impl","../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../NanoGameCore/GameFramework/Scripts/NgcGame":"NgcGame","../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../NanoGameCore/GameFramework/Scripts/Screens/NgcStartMain":"NgcStartMain","../NanoGameCore/Services/Ads/Ads":"Ads","../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../Shared/Defines":"Defines","../Shared/protobuf/hsaprotobuf":"hsaprotobuf","./../globals":"globals","./DeathZoneManager":"DeathZoneManager","./Enemy/PelicanManager":"PelicanManager","./FakeNamesManager":"FakeNamesManager","./Flocking/FlockManager":"FlockManager","./GameCamera":"GameCamera","./GameCameraTarget":"GameCameraTarget","./GameEnums":"GameEnums","./GameObject":"GameObject","./GameTrackingDataHelper":"GameTrackingDataHelper","./GameTrackingDataSupporter":"GameTrackingDataSupporter","./HSAUtils":"HSAUtils","./Main":"Main","./Maps/MapController":"MapController","./Network/HSANetUtils":"HSANetUtils","./Network/ImprovedNetClient":"ImprovedNetClient","./Network/NetClient":"NetClient","./Player/PlayerController":"PlayerController","./SceneManager":"SceneManager","./ScreenManager":"ScreenManager","./Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","./StartPoint":"StartPoint","./TuningData":"TuningData","./UI/GameUI":"GameUI","./UserInfo":"UserInfo","./Utils/ConstConfig":"ConstConfig"}],HSACountryFlagsManager:[function(e,t,o){"use strict";cc._RF.push(t,"c1b7f097GJHBLcDVJoKwgJX","HSACountryFlagsManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),i([c],t)}(a.NgcCountryFlagsManager));o.default=l,cc._RF.pop()},{"./../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager"}],HSAFontsManager:[function(e,t,o){"use strict";cc._RF.push(t,"4e0c6AwZgtClb8UNDIxcHMT","HSAFontsManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../NanoGameCore/GameFramework/Scripts/Localized/FontsManager"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),i([c],t)}(a.NgcFontsManager));o.default=l,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/Localized/FontsManager":"FontsManager"}],HSALabelLocalized:[function(e,t,o){"use strict";cc._RF.push(t,"4d07eVN6HVOxr0TpaUc3dGa","HSALabelLocalized");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),i([c],t)}(a.NgcLabelLocalized));o.default=l,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],HSALocalizedManager:[function(e,t,o){"use strict";cc._RF.push(t,"cf2b5E/eipG6q34/BqiTp96","HSALocalizedManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),i([c],t)}(a.NgcLocalizedManager));o.default=l,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager"}],HSALogo:[function(e,t,o){"use strict";cc._RF.push(t,"df5449rOydOYrjbCzvlMGAM","HSALogo");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.logo=null,t}return r(t,e),t.prototype.start=function(){cc.sys.isNative?this.logo.active=!0:this.logo.active=!1},i([c(cc.Node)],t.prototype,"logo",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],HSANetUtils:[function(e,t,o){"use strict";cc._RF.push(t,"01d57YEfLlEu4BtZV3nBR5E","HSANetUtils");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../NanoGameCore/GameFramework/Scripts/Network/NetUtils"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),i([c],t)}(a.NgcNetUtils));o.default=l,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/Network/NetUtils":"NetUtils"}],HSASpriteLocalized:[function(e,t,o){"use strict";cc._RF.push(t,"3db360s7sRIyZ+T9jpotoTf","HSASpriteLocalized");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../NanoGameCore/GameFramework/Scripts/Localized/SpriteLocalized"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),i([c],t)}(a.NgcSpriteLocalized));o.default=l,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/Localized/SpriteLocalized":"SpriteLocalized"}],HSAUtils:[function(e,t,o){"use strict";cc._RF.push(t,"4164azfxGpCH4T1XxcVRf2Q","HSAUtils");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i=e("../NanoGameCore/Core/Utils"),a=e("./TuningData"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.enumToString=function(e,t){for(var o in e)if(e[o]==t)return o;return null},t.polarToCartesian=function(e){var t=[e.x,e.y],o=t[0],n=t[1];return cc.v2(o*Math.cos(n),o*Math.sin(n))},t.cartesianToPolar=function(e){var t=[e.x,e.y],o=t[0],n=t[1],r=Math.atan2(n,o);return cc.v2(e.len(),r)},t.findPointOnRect=function(e,t){var o,n;"number"==typeof t?(n=t,o=this.polarToCartesian(cc.v2(1,t))):(o=t,n=this.cartesianToPolar(cc.v2(t.x,t.y)).y);var r,i,a=this.cartesianToPolar(cc.v2(-e.width/2,e.height/2)).y,s=this.cartesianToPolar(cc.v2(e.width/2,e.height/2)).y,c=this.cartesianToPolar(cc.v2(-e.width/2,-e.height/2)).y,l=this.cartesianToPolar(cc.v2(e.width/2,-e.height/2)).y,u=0,p=0;return n<=a&&n>=s?(u=e.height/2,p=o.angle(cc.Vec2.UP)):n<=l&&n>=c?(u=e.height/2,p=o.angle(cc.v2(0,-1))):n<s&&n>l?(u=e.width/2,p=o.angle(cc.v2(1,0))):(u=e.width/2,p=o.angle(cc.v2(-1,0))),i=u/Math.cos(p),r=o.normalize().mul(i),cc.v2(e.x,e.y).add(r)},t.showPopup=function(e,t,o,n,r){void 0===t&&(t=null),void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=null);var i=o||1,a=n||.015,s=r||.08,c=cc.sequence(cc.scaleTo(s,i+a),cc.scaleTo(s,i-a),cc.scaleTo(s,i));e.scale=i,e.runAction(c)},t.rankBonusScore=function(e){if(e>0){var t=6;return e<=3?t=e-1:e<=5?t=3:e<=10?t=4:e<=15&&(t=5),a.default.inst.getGameParameters().reward.ranking_bonus_per_position[t]}return 0},t.formatNumber=function(e,t,o){return void 0===t&&(t="en-US"),e.toLocaleString(t,o)},t.abbrNum=function(e,t){t=Math.pow(10,t);for(var o=["k","m","b","t"],n=o.length-1;n>=0;n--){var r=Math.pow(10,3*(n+1));if(r<=e)return 1e3==(e=Math.round(e*t/r)/t)&&n<o.length-1&&(e=1,n++),e+o[n]}return e.toString()},t.round=function(e,t){var o=Math.pow(10,t||0);return Math.round(e*o)/o},t}(i.Utils);o.default=s,cc._RF.pop()},{"../NanoGameCore/Core/Utils":"Utils","./TuningData":"TuningData"}],HelicopterAnim:[function(e,t,o){"use strict";cc._RF.push(t,"55b88S1hE1M/o8dKtLMIn0Z","HelicopterAnim");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../BlendAnimBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},i([c],t)}(a.default));o.default=l,cc._RF.pop()},{"../BlendAnimBase":"BlendAnimBase"}],HelicopterController:[function(e,t,o){"use strict";cc._RF.push(t,"b9139Q7d/JBkqX/Jc/DIAyB","HelicopterController");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./HelicopterAnim"),s=e("../../globals"),c=e("../StartPoint"),l=e("../Network/NetClient"),u=e("../../Scripts/HSAUtils"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.smallNet=null,t.bigNet=null,t.animation=null,t.HelicopterNetID=null,t}var o;return r(t,e),o=t,t.prototype.getAnimation=function(){return this.animation?this.animation:(this.animation=this.node.getComponent(a.default),this.animation)},t.prototype.onLoad=function(){this.getAnimation()},t.prototype.setNetSize=function(e){0==e?(this.smallNet.active=!0,this.bigNet.active=!1):(this.smallNet.active=!1,this.bigNet.active=!0)},t.createHelicopter=function(e){var t=e.netID==l.default.inst.localPlayerNetID,n=s.default.Game.inst.helicopterPrefab,r=cc.instantiate(n);t||(r.opacity=50);var i=r.getComponent(o);r.parent=s.default.SceneManager.inst.helicoptersNode,i.HelicopterNetID=e.netID;var a=c.default.allPlayerStartPoints[e.startPointIndex];return i.setWorldPosition(u.default.getWorldPos(a.node)),i.setNetSize(e.startingSize),i},t.prototype.move=function(e,t,o){var n=this.getWorldPosition();n.addSelf(cc.v2(t.x,t.y).multiplyScalar(o*e)),this.setWorldPosition(n)},t.prototype.removeHelicopter=function(e){var t=this;this.scheduleOnce(function(){s.default.SceneManager.inst.destroyHelicopterByID(e),t.node.destroy()},1.5)},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},i([f(cc.Node)],t.prototype,"smallNet",void 0),i([f(cc.Node)],t.prototype,"bigNet",void 0),o=i([d],t)}(cc.Component);o.default=h,s.default.HelicopterController=h,cc._RF.pop()},{"../../Scripts/HSAUtils":"HSAUtils","../../globals":"globals","../Network/NetClient":"NetClient","../StartPoint":"StartPoint","./HelicopterAnim":"HelicopterAnim"}],HumanDiver:[function(e,t,o){"use strict";cc._RF.push(t,"26e83k1w25Di74ual8Pq6dF","HumanDiver");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.State_Diving=o.State_RunAway=void 0;var a=e("../Enemy/EnemyControllerBase"),s=e("../Network/HSANetUtils"),c=cc._decorator,l=c.ccclass;c.property,o.State_RunAway="RunAway",o.State_Diving="Diving";var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._AreaMovement=null,t._targetPos=cc.v2(0,0),t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.start=function(){e.prototype.start.call(this),this.setState(o.State_Diving)},t.prototype.setRectMovement=function(e){this._AreaMovement=e},t.prototype.update=function(e){this.work(e)},t.prototype.work=function(t){if(!e.prototype.work.call(this,t))return!1;switch(this.curState){case o.State_Diving:this._work_state_diving(t),this._workstate_MagnetEffect(t)}},t.prototype.setState=function(t){t===a.State_Swim&&(this._curSpeed=this.startSpeed,t=o.State_Diving),e.prototype.setState.call(this,t)},t.prototype._work_state_diving=function(e){var t=cc.Vec2.distance(this.getWorldPosition(),this._targetPos);!this.guidedDirection||t<=this.node.width/2?(this.findnewPos(),this.guidedDirection=this._targetPos.sub(this.getWorldPosition()).normalize()):(this.navigateFollowGuidedDirection(e,this.guidedDirection),this.applyMovement(e,this.guidedDirection))},t.prototype.findnewPos=function(){var e=s.default.RandomRange(0,this._AreaMovement.width,!0),t=s.default.RandomRange(0,this._AreaMovement.height,!0);return this._targetPos=cc.v2(this._AreaMovement.x+e,this._AreaMovement.y+t)},i([l],t)}(a.default);o.default=u,cc._RF.pop()},{"../Enemy/EnemyControllerBase":"EnemyControllerBase","../Network/HSANetUtils":"HSANetUtils"}],HumanManager:[function(e,t,o){"use strict";cc._RF.push(t,"0b9f65AgVxHkK5LBPMdrMy5","HumanManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Maps/MapController"),s=e("../TuningData"),c=e("../Network/HSANetUtils"),l=e("./HumanDiver"),u=e("../Game"),p=e("../../Scripts/HSAUtils"),d=e("./HumanSwimmer"),f=e("../WaterSurface/WaterSurfaceManager"),h=e("../../Shared/Defines"),g=cc._decorator,y=g.ccclass,m=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.DiverPefab=null,t.SwimmerPefab=null,t.DiverContainer=null,t.SwimmerContainer=null,t.maxDiverOnMap=0,t.maxSwimmerOnMap=0,t._deltatime=0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){if(s.default.inst&&s.default.inst.getGameParameters()){var e=s.default.inst.getGameParameters().PreyControl.Map1;this.maxDiverOnMap=e.num_of_diver_on_map,this.maxSwimmerOnMap=e.num_of_swimmer_on_map}},t.prototype.createRandomHuman=function(){c.default.RandomRange(0,10,!0)%2==0?this.createDiver():this.createSwimmer()},t.prototype.createDiver=function(){if(!(this.DiverContainer.childrenCount>=this.maxDiverOnMap)){var e=cc.instantiate(this.DiverPefab);e.parent=this.DiverContainer;var t=this.randomDiverSpawnWPos(e.getComponent(l.default));p.default.setWorldPos(e,t)}},t.prototype.randomDiverSpawnWPos=function(e){var t=a.default.inst.humanDiverSpawnRects,o=t[c.default.RandomRange(0,t.length-1,!0)];e.setRectMovement(o);var n=c.default.RandomRange(0,o.width,!0),r=c.default.RandomRange(0,o.height,!0);return cc.v2(o.x+n,o.y+r)},t.prototype.createSwimmer=function(){if(!(this.SwimmerContainer.childrenCount>=this.maxSwimmerOnMap)){var e=cc.instantiate(this.SwimmerPefab);e.parent=this.SwimmerContainer;var t=this.randomSwimmerSpawnWPos(e.getComponent(d.default));p.default.setWorldPos(e,t)}},t.prototype.randomSwimmerSpawnWPos=function(e){var t=a.default.inst.humanSwimmerSpawnRects,o=t[c.default.RandomRange(0,t.length-1,!0)];e.setRectMovement(o);var n=c.default.RandomRange(0,o.width,!0),r=a.default.inst.surface.getComponent(f.default).getWorldPosition().y;return cc.v2(o.x+n,r+e.node.height/2)},t.prototype.update=function(e){u.default.inst.curGameState!=h.GameState.GameOver&&(this._deltatime+=e,this._deltatime>=2&&(this.createRandomHuman(),this._deltatime=0))},i([m(cc.Prefab)],t.prototype,"DiverPefab",void 0),i([m(cc.Prefab)],t.prototype,"SwimmerPefab",void 0),i([m(cc.Node)],t.prototype,"DiverContainer",void 0),i([m(cc.Node)],t.prototype,"SwimmerContainer",void 0),o=i([y],t)}(cc.Component);o.default=_,cc._RF.pop()},{"../../Scripts/HSAUtils":"HSAUtils","../../Shared/Defines":"Defines","../Game":"Game","../Maps/MapController":"MapController","../Network/HSANetUtils":"HSANetUtils","../TuningData":"TuningData","../WaterSurface/WaterSurfaceManager":"WaterSurfaceManager","./HumanDiver":"HumanDiver","./HumanSwimmer":"HumanSwimmer"}],HumanSwimmer:[function(e,t,o){"use strict";cc._RF.push(t,"2c340gyNTBEKqoNU4AxSowV","HumanSwimmer");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.State_Swim_on_surface=void 0;var a=e("../Enemy/EnemyControllerBase"),s=e("../Network/HSANetUtils"),c=e("../Maps/MapController"),l=e("../WaterSurface/WaterSurfaceManager"),u=e("../../globals"),p=e("../../Scripts/HSAUtils"),d=cc._decorator,f=d.ccclass;d.property,o.State_Swim_on_surface="Swim_on_surface";var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._AreaMovement=null,t._targetPos=cc.v2(0,0),t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.start=function(){e.prototype.start.call(this),this.setState(o.State_Swim_on_surface)},t.prototype.setRectMovement=function(e){this._AreaMovement=e},t.prototype.update=function(e){this.work(e)},t.prototype.work=function(t){if(!e.prototype.work.call(this,t))return!1;switch(this.curState){case o.State_Swim_on_surface:this._workstate_Swim_on_surface(t)}},t.prototype.setState=function(t){t===a.State_Swim&&(this._curSpeed=this.startSpeed,this.curState=o.State_Swim_on_surface),e.prototype.setState.call(this,t)},t.prototype.updateFlipYFollowingAngle=function(){var e=this.node.angle%360;e>90&&e<270||e<-90&&e>-270?this.node.scaleY>0&&(this.node.scaleY=-this.node.scaleY):this.node.scaleY<0&&(this.node.scaleY=-this.node.scaleY)},t.prototype._workstate_Swim_on_surface=function(e){var t=cc.Vec2.distance(this.getWorldPosition(),this._targetPos);if(!this.guidedDirection||t<=this.node.width/2?(this.findnewPos(),this.guidedDirection=this._targetPos.sub(this.getWorldPosition()).normalize()):(this.navigateFollowGuidedDirection(e,this.guidedDirection),this.applyMovement(e,this.guidedDirection)),u.default.PlayerController&&u.default.PlayerController.localPlayer&&u.default.PlayerController.localPlayer.node){var o=p.default.getWorldPos(u.default.PlayerController.localPlayer.node),n=cc.Vec2.distance(o,this.getWorldPosition());this._curSpeed=n<=300?2*this.startSpeed:this.startSpeed}},t.prototype.findnewPos=function(){var e=s.default.RandomRange(0,this._AreaMovement.width,!0),t=c.default.inst.surface.getComponent(l.default).getWorldPosition().y;return this._targetPos=cc.v2(this._AreaMovement.x+e,t+this.node.height/2)},i([f],t)}(a.default);o.default=h,cc._RF.pop()},{"../../Scripts/HSAUtils":"HSAUtils","../../globals":"globals","../Enemy/EnemyControllerBase":"EnemyControllerBase","../Maps/MapController":"MapController","../Network/HSANetUtils":"HSANetUtils","../WaterSurface/WaterSurfaceManager":"WaterSurfaceManager"}],ImprovedNetClient:[function(e,t,o){"use strict";cc._RF.push(t,"59b8fBZ5hxPtIqVvYN6hC2S","ImprovedNetClient");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),s=e("../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClientRefactor"),c=e("../../NanoGameCore/GameFramework/Scripts/NgcMain"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?cc.error("More than one NetClient!!"):(o.inst=this,o.GAME_UPDATE_TIME_MS=200,e.prototype.onLoad.call(this))},t.prototype.joinGame=function(){var e=c.NgcMain.inst.localUserName+"|"+(null==a.NgcCountryFlagsManager.localCountry?"us":a.NgcCountryFlagsManager.localCountry.toLowerCase());this.sendJoinGameMessage("rwr_gameroom",{name:e,skin:"default"},{})},t.inst=null,o=i([u],t)}(s.NgcNetClientRefactor));o.default=p,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain"}],InGame_Leaderboard:[function(e,t,o){"use strict";cc._RF.push(t,"c3961OcC6hMLY5cWvYVJres","InGame_Leaderboard");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../SceneManager"),s=e("../Player/PlayerController"),c=e("../Main"),l=e("../HSAUtils"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lbMyRank=null,t.lbCurAlive=null,t.lbCurAliveEffect=null,t.lbMyScore=null,t.rankNode=[],t._curAlive=0,t}return r(t,e),t.prototype.update=function(){c.Main.getAppContext()===c.AppContext.Gameplay&&(this.lbMyScore.string=""+l.default.formatNumber(s.default.localPlayer.getCurrentScore()),this.changeNumberAlive(a.default.inst.getNumPlayerAlive()))},t.prototype.changeNumberAlive=function(e){e!=this._curAlive&&0!=e&&(this._curAlive=e,this.lbCurAlive.string=""+e,this.lbCurAliveEffect.string=""+this._curAlive,e<this._curAlive&&this.playAnimationChangeNumber())},t.prototype.playAnimationChangeNumber=function(){var e=this;this.lbCurAliveEffect.node.setPosition(this.lbCurAlive.node.getPosition()),this.lbCurAliveEffect.node.active=!1,this.lbCurAliveEffect.node.opacity=255,this.lbCurAliveEffect.node.scale=1.4,this.lbCurAlive.node.active=!0,this.lbCurAlive.node.opacity=255,this.lbCurAlive.node.scale=1,cc.Tween.stopAllByTag(0),cc.Tween.stopAllByTag(1),cc.tween(this.lbCurAlive.node).tag(0).parallel(cc.tween().to(.18,{scale:2.1}),cc.tween().to(.18,{opacity:100})).parallel(cc.tween().to(.15,{scale:2.5}),cc.tween().to(.15,{opacity:20})).to(.06,{opacity:0}).call(function(){e.lbCurAlive.node.scale=1,e.lbCurAlive.node.opacity=255,e.lbCurAlive.node.active=!1}).start(),cc.tween(this.lbCurAliveEffect.node).tag(1).delay(.12).call(function(){e.lbCurAliveEffect.node.scale=1.4,e.lbCurAliveEffect.node.active=!0}).to(.21,{scale:1.55}).to(.21,{scale:1}).delay(.33).call(function(){e.lbCurAliveEffect.node.active=!1,e.lbCurAlive.node.opacity=255,e.lbCurAlive.node.active=!0}).to(.03,{opacity:0}).start()},i([d(cc.RichText)],t.prototype,"lbMyRank",void 0),i([d(cc.Label)],t.prototype,"lbCurAlive",void 0),i([d(cc.Label)],t.prototype,"lbCurAliveEffect",void 0),i([d(cc.Label)],t.prototype,"lbMyScore",void 0),i([d({type:[cc.Node]})],t.prototype,"rankNode",void 0),i([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../HSAUtils":"HSAUtils","../Main":"Main","../Player/PlayerController":"PlayerController","../SceneManager":"SceneManager"}],InfoType_Popup:[function(e,t,o){"use strict";cc._RF.push(t,"2c7deCla0BP4bjzn+qOkNxm","InfoType_Popup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Screens/MainScreen"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sharkStats=null,t.statSpeedImgList=[],t.statRangeImgList=[],t.statRateImgList=[],t}return r(t,e),t.prototype.start=function(){},t.prototype.changeSharkType=function(e){this.updateSharkStats(e)},t.prototype.updateSharkStats=function(e){var t=this;this.sharkStats.children.forEach(function(o,n){switch(n){case a.StatIndex.Speed:o.getChildByName("img").getComponent(cc.Sprite).spriteFrame=t.statSpeedImgList[e];break;case a.StatIndex.DashRange:o.getChildByName("img").getComponent(cc.Sprite).spriteFrame=t.statRangeImgList[e];break;case a.StatIndex.DashRate:o.getChildByName("img").getComponent(cc.Sprite).spriteFrame=t.statRateImgList[e]}})},i([l(cc.Node)],t.prototype,"sharkStats",void 0),i([l([cc.SpriteFrame])],t.prototype,"statSpeedImgList",void 0),i([l([cc.SpriteFrame])],t.prototype,"statRangeImgList",void 0),i([l([cc.SpriteFrame])],t.prototype,"statRateImgList",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Screens/MainScreen":"MainScreen"}],InteractionButtonAsset:[function(e,t,o){"use strict";cc._RF.push(t,"88cd9BbMlpPMpk6KR5mg947","InteractionButtonAsset");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionButtonAsset=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundDefault=null,t.backgroundDisable=null,t.backgroundAds=null,t}return r(t,e),i([c(cc.SpriteFrame)],t.prototype,"backgroundDefault",void 0),i([c(cc.SpriteFrame)],t.prototype,"backgroundDisable",void 0),i([c(cc.SpriteFrame)],t.prototype,"backgroundAds",void 0),i([s],t)}(cc.Component);o.NgcInteractionButtonAsset=l,cc._RF.pop()},{}],InteractionButton:[function(e,t,o){"use strict";cc._RF.push(t,"5a647qrmBlKJJ8sU2sq2U/h","InteractionButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionButton=void 0;var a=e("../../../Core/ResizableComponent"),s=e("../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("../../../GameFramework/Scripts/NgcShopManager"),l=e("./AssetComponent/InteractionButtonAsset"),u=e("./IteractionContent/InteractionContent"),p=e("../../EdgeExclusive/Script/EdgeExclusiveManager"),d=e("../../../Core/Utils"),f=cc._decorator,h=f.ccclass,g=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.adsFlashAnimation=null,t.contentListNode=null,t._interactionButtonAsset=null,t._button=null,t._item=null,t._contentList=[],t._currentContent=null,t._showHideAnimQueue=[],t._isPlayingAnim=!1,t}return r(t,e),t.prototype.onLoad=function(){this._interactionButtonAsset=this.node.getComponent(l.NgcInteractionButtonAsset),this._button=this.node.getComponent(cc.Button),this.initContentList()},t.prototype.initContentList=function(){var e=this;this.contentListNode.children.forEach(function(t){t.active=!1,e._contentList.push(t.getComponent(u.NgcInteractionContent))}),this._contentList.sort(function(e,t){return e.getType()-t.getType()})},Object.defineProperty(t.prototype,"Visible",{set:function(e){this._showHideAnimQueue.push(e),this.checkAnimationQueue()},enumerable:!1,configurable:!0}),t.prototype.resize=function(){a.ResizableComponent.resizeNodeByHeight(this.node,.7*this.node.parent.height)},t.prototype.updateItemInfo=function(e){this._item=e||this._item,this._item&&(this.updateContent(this._item),this.determineBackground(this._item.itemStatusType),this._button.interactable=this._currentContent.Interactive,this.resize())},t.prototype.updateContent=function(e){this._currentContent&&(this._currentContent.node.active=!1);var t=this._contentList[e.itemStatusType];t.updateInfo(e),t.node.active=!0,this._currentContent=t},t.prototype.determineBackground=function(e){if(e===s.NgcItemStatusType.WatchAds)return this.background.spriteFrame=this._interactionButtonAsset.backgroundAds,void(this.EnableAdsFlash=!0);this.background.spriteFrame=this._currentContent.Interactive?this._interactionButtonAsset.backgroundDefault:null,this.EnableAdsFlash=!1},t.prototype.checkAnimationQueue=function(){!this._isPlayingAnim&&this._showHideAnimQueue.length>0&&(this._showHideAnimQueue.shift()?this.playShowAnimation():this.playHideAnimation())},t.prototype.playHideAnimation=function(){var e=this;this._isPlayingAnim=!0;var t=this.node.parent;cc.tween(t).to(.15,{y:-t.height},{easing:"backOut"}).call(function(){e._isPlayingAnim=!1,e.checkAnimationQueue()}).start()},t.prototype.playShowAnimation=function(){var e=this;this.node.parent.opacity=255,this._isPlayingAnim=!0;var t=this.node.parent;cc.tween(t).to(.15,{y:0},{easing:"backOut"}).call(function(){e._isPlayingAnim=!1,e.checkAnimationQueue()}).start()},Object.defineProperty(t.prototype,"EnableAdsFlash",{set:function(e){this.adsFlashAnimation.node.active=e,e?this.adsFlashAnimation.play():this.adsFlashAnimation.stop()},enumerable:!1,configurable:!0}),t.prototype.buyItem=function(){c.NgcShopManager.getInstance().buyItem(this._item)},t.prototype.watchAds=function(){c.NgcShopManager.getInstance().watchAds(this._item)},t.prototype.equipItem=function(){c.NgcShopManager.getInstance().equipItem(this._item.itemID)},t.prototype.edgeClaim=function(){if(d.Utils.getBrowserType()===d.BROWSER_TYPE.EDGE){if(this._item instanceof s.NgcSingleItemInfo){var e=this._item;p.default.getInstance().claimReward(e.itemID).then(function(){c.NgcShopManager.getInstance().equipItem(e.itemID)})}}else p.default.getInstance().openEdgeRedirection("item shop")},t.prototype.onClicked=function(){switch(this._item.itemStatusType){case s.NgcItemStatusType.Currency:case s.NgcItemStatusType.Bundle:case s.NgcItemStatusType.Achievement:this.buyItem();break;case s.NgcItemStatusType.WatchAds:this.watchAds();break;case s.NgcItemStatusType.EdgeExclusive:this.edgeClaim();break;case s.NgcItemStatusType.Unlock:this.equipItem()}},i([g(cc.Sprite)],t.prototype,"background",void 0),i([g(cc.Animation)],t.prototype,"adsFlashAnimation",void 0),i([g(cc.Node)],t.prototype,"contentListNode",void 0),i([h],t)}(cc.Component);o.NgcInteractionButton=y,cc._RF.pop()},{"../../../Core/ResizableComponent":"ResizableComponent","../../../Core/Utils":"Utils","../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../EdgeExclusive/Script/EdgeExclusiveManager":"EdgeExclusiveManager","./AssetComponent/InteractionButtonAsset":"InteractionButtonAsset","./IteractionContent/InteractionContent":"InteractionContent"}],InteractionContentBundle:[function(e,t,o){"use strict";cc._RF.push(t,"8daa2HoYftJ7LckwISt4hRy","InteractionContentBundle");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentBundle=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("../../../../GameFramework/Scripts/NgcShopManager"),c=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.price=null,t.coinIcon=null,t.startIcon=null,t}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.Bundle},t.prototype.updateInfo=function(e){this.price.string=e.price.value.toString();var t=this.isEnable(e);this.price.node.opacity=t?255:100,this.coinIcon.active="coin"===e.price.currency,this.startIcon.active="star"===e.price.currency,this._interactive=t},t.prototype.isEnable=function(e){return s.NgcShopManager.getInstance().getCurrencyCountByID(e.price.currency)>=e.price.value},i([p(cc.Label)],t.prototype,"price",void 0),i([p(cc.Node)],t.prototype,"coinIcon",void 0),i([p(cc.Node)],t.prototype,"startIcon",void 0),i([u],t)}(c.NgcInteractionContent);o.NgcInteractionContentBundle=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","./InteractionContent":"InteractionContent"}],InteractionContentEquipped:[function(e,t,o){"use strict";cc._RF.push(t,"8b7191mfeBKZIiOtdD06dyX","InteractionContentEquipped");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentEquipped=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.Equipped},t.prototype.updateInfo=function(){this._interactive=!1},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(c.NgcInteractionContent);o.NgcInteractionContentEquipped=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseAchievement:[function(e,t,o){"use strict";cc._RF.push(t,"88d61oIeV5JqJ+Vp28OjOVT","InteractionContentPurchaseAchievement");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseAchievement=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/Localized/LocalizedManager"),c=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),l=e("../../../../Services/Inventory/Inventory"),u=e("./InteractionContent"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return c.NgcItemStatusType.Achievement},t.prototype.updateInfo=function(e){var t=this;l.NgcInventory.inst.getItemCount(e.price.currency,function(o,n){if(!o&&n){var r=e.price.value,i=n.count<r?n.count:r;r==i?(s.NgcLocalizedManager.setTextKey(t.title,"ITS_BUTTON_CLAIM"),t._interactive=!0):(t.title.string=i+"/"+r+" m",t._interactive=!1)}})},i([f(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([d],t)}(u.NgcInteractionContent);o.NgcInteractionContentPurchaseAchievement=h,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../Services/Inventory/Inventory":"Inventory","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseComingSoon:[function(e,t,o){"use strict";cc._RF.push(t,"4c1bcNoO6dMgJqp5RzRfOJi","InteractionContentPurchaseComingSoon");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseComingSoon=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.ComingSoon},t.prototype.updateInfo=function(){this._interactive=!1},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(c.NgcInteractionContent);o.NgcInteractionContentPurchaseComingSoon=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseCrownRoad:[function(e,t,o){"use strict";cc._RF.push(t,"20c70D2gnNFbZccOE/MA5nU","InteractionContentPurchaseCrownRoad");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseCrownRoad=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.CrownRoad},t.prototype.updateInfo=function(){this._interactive=!1},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(c.NgcInteractionContent);o.NgcInteractionContentPurchaseCrownRoad=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseCurrency:[function(e,t,o){"use strict";cc._RF.push(t,"40d67q9LGhKUJaG0YrrtSCL","InteractionContentPurchaseCurrency");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseCurrency=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("../../../../GameFramework/Scripts/NgcShopManager"),c=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.price=null,t.coinIcon=null,t.startIcon=null,t}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.Currency},t.prototype.updateInfo=function(e){this.price.string=e.price.value.toString();var t=s.NgcShopManager.getInstance().getCurrencyCountByID(e.price.currency);this.price.node.opacity=t<e.price.value?100:255,this.coinIcon.active="coin"===e.price.currency,this.startIcon.active="star"===e.price.currency,this._interactive=t>=e.price.value},i([p(cc.Label)],t.prototype,"price",void 0),i([p(cc.Node)],t.prototype,"coinIcon",void 0),i([p(cc.Node)],t.prototype,"startIcon",void 0),i([u],t)}(c.NgcInteractionContent);o.NgcInteractionContentPurchaseCurrency=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseDailyReward:[function(e,t,o){"use strict";cc._RF.push(t,"4a4f3UOmAdJNYYWxvuqlIdT","InteractionContentPurchaseDailyReward");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseDailyReward=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.DailyReward},t.prototype.updateInfo=function(){this._interactive=!1},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(c.NgcInteractionContent);o.NgcInteractionContentPurchaseDailyReward=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseEdgeExclusive:[function(e,t,o){"use strict";cc._RF.push(t,"1d195hlQiRLm66SReOE9bs4","InteractionContentPurchaseEdgeExclusive");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentEdgeExclusive=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./InteractionContent"),l=e("../../../EdgeExclusive/Script/EdgeExclusiveManager"),u=e("../../../../Core/Utils"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.edgeIcon=null,t.title=null,t.claim=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.EdgeExclusive},t.prototype.updateInfo=function(e){if(u.Utils.getBrowserType()!==u.BROWSER_TYPE.EDGE)this.claim.getComponent(cc.Label).node.active=!1,this.title.setLocalizedText("EES_PLAY_ON_EDGE "),this._interactive=!0;else{for(var t=null,o=0,n=l.default.getInstance().getRewardsEdgeExclusive();o<n.length;o++){var r=n[o];if(e.itemID===r.itemId){t=r;break}}if(t.isAvailable)this.claim.getComponent(cc.Label).node.active=!0,this.edgeIcon.getComponent(cc.Sprite).node.active=!1,this.title.getComponent(cc.Label).node.active=!1,this._interactive=!0;else{var i=t.startDate.split("-").reverse().join("-").replace(/-/g,"/");this.title.subText=" "+i,this.title.setLocalizedText("EES_COMING_ON"),this.title.getComponent(cc.Label).node.active=!0,this.claim.getComponent(cc.Label).node.active=!1,this._interactive=!1}}},i([f(cc.Sprite)],t.prototype,"edgeIcon",void 0),i([f(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([f(a.NgcLabelLocalized)],t.prototype,"claim",void 0),i([d],t)}(c.NgcInteractionContent);o.NgcInteractionContentEdgeExclusive=h,cc._RF.pop()},{"../../../../Core/Utils":"Utils","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../EdgeExclusive/Script/EdgeExclusiveManager":"EdgeExclusiveManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseIAP:[function(e,t,o){"use strict";cc._RF.push(t,"67c0a57SBFNbrHiRCWnHMlE","InteractionContentPurchaseIAP");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseIAP=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./InteractionContent"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.price=null,t}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.IAP},t.prototype.updateInfo=function(){this.price.string="200$"},i([u(cc.Label)],t.prototype,"price",void 0),i([l],t)}(s.NgcInteractionContent);o.NgcInteractionContentPurchaseIAP=p,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseLoginSocial:[function(e,t,o){"use strict";cc._RF.push(t,"9a2d5aGXB1LIaDOm9BqzjWy","InteractionContentPurchaseLoginSocial");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseLoginSocial=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./InteractionContent"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.LikeSocial},t.prototype.updateInfo=function(){},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(c.NgcInteractionContent);o.NgcInteractionContentPurchaseLoginSocial=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentPurchaseWatchAds:[function(e,t,o){"use strict";cc._RF.push(t,"e3130ZG9pRMJoiNaioLQuDy","InteractionContentPurchaseWatchAds");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentPurchaseWatchAds=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./InteractionContent"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.steps=null,t}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.WatchAds},t.prototype.updateInfo=function(){},i([u(cc.Label)],t.prototype,"steps",void 0),i([l],t)}(s.NgcInteractionContent);o.NgcInteractionContentPurchaseWatchAds=p,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContentUnlock:[function(e,t,o){"use strict";cc._RF.push(t,"8b10eZATGNAkYSAk/lQLQol","InteractionContentUnlock");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContentUnlock=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./InteractionContent"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.Unlock},t.prototype.updateInfo=function(){},i([l],t)}(s.NgcInteractionContent));o.NgcInteractionContentUnlock=u,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./InteractionContent":"InteractionContent"}],InteractionContent:[function(e,t,o){"use strict";cc._RF.push(t,"c3854EqAgBFBKH7l5drKr/0","InteractionContent");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInteractionContent=void 0;var a=cc._decorator.ccclass,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._interactive=!0,t}return r(t,e),Object.defineProperty(t.prototype,"Interactive",{get:function(){return this._interactive},enumerable:!1,configurable:!0}),i([a],t)}(cc.Component);o.NgcInteractionContent=s,cc._RF.pop()},{}],Inventory_impl_NanoSrv:[function(e,t,o){"use strict";cc._RF.push(t,"6aa4aup/kROIpq/daM7rQkj","Inventory_impl_NanoSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../Core/Utils"),u=e("../../CrossFeatures/OfflineMode/OfflineMode"),p=e("../../GameFramework/Scripts/BuildConfig"),d=e("../../GameFramework/Scripts/NgcUserInfo"),f=e("../../SDK/Nano/NanoSrv"),h=e("../Platform/Platform"),g=e("./Inventory"),y=cc._decorator,m=y.ccclass,_=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ITEM_TABLE_PATH="Text/itemTable.csv",t.needToRefetch=!0,t}return r(t,e),t.prototype._preInit=function(){return Promise.resolve("Inventory_impl_Nanosrv pre-initialized")},t.prototype._init=function(){return Promise.resolve("Inventory_impl_Nanosrv initialized")},t.prototype.keymangle=function(e){return e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)},t.prototype.onLogin=function(e){return s(this,void 0,void 0,function(){var t,o,n,r,i=this;return c(this,function(a){switch(a.label){case 0:if(this.itemTable)return[2,e(null,"OK")];if(p.NgcBuildConfig.offlineMode)return[3,6];a.label=1;case 1:return a.trys.push([1,4,,5]),t=f.default.inst.getCurGameInfo().itemTableURL,[4,fetch(t)];case 2:return(o=a.sent()).ok?[4,o.text()]:[2,e("[NgcInventory] Cannot load item table from Nano Services | HTTP_ERROR_STATUS: "+o.status,null)];case 3:return n=a.sent(),this.initItemTableFromCSV(n)?(this._fetchInventory(function(t){if(t)return e(t,null);e(null,"OK")}),[3,5]):[2,e("[NgcInventory] Failed parsing item table from CSV | result: "+n,null)];case 4:return r=a.sent(),console.error(r),[2,e("[NgcInventory] Cannot fetch item table due to network failure or unknown issues",null)];case 5:return[3,7];case 6:l.LoadAsset("offline:text/item-table").then(function(t){i.initItemTableFromCSV(t.text),i._fetchInventory(function(){e(null,"OK")})}),a.label=7;case 7:return[2]}})})},t.prototype._fetchInventory=function(e){var t=this;h.NgcPlatform.isOfflineMode()?(this.needToRefetch=!1,this.ownedItems=u.OfflineMode.GetInventory(),e(null,this.ownedItems)):f.default.inst.serviceGet("/player/getinventory",null,function(o,n){o?e(o,null):(t.ownedItems=JSON.parse(n).data,t.needToRefetch=!1,e(null,t.ownedItems))})},t.prototype.getItemCountFromLocalData=function(e){var t;return(null===(t=this.ownedItems)||void 0===t?void 0:t.hasOwnProperty(e))?i({itemID:e},this.ownedItems[e]):{itemID:e,count:0}},t.prototype._getItemCount=function(e,t){var o=this;this.needToRefetch?this._fetchInventory(function(n){n?t(n,null):t(null,o.getItemCountFromLocalData(e))}):t(null,this.getItemCountFromLocalData(e))},t.prototype._addItem=function(e,t,o){var n=this;if(h.NgcPlatform.isOfflineMode()){u.OfflineMode.UpdateItem(e,t),this.ownedItems=u.OfflineMode.GetInventory();var r={data:this.ownedItems[e]};this.needToRefetch=!1,o(null,JSON.stringify(r))}else{var i={itemList:[{itemID:e,count:t}]},a=JSON.stringify(i);f.default.inst.servicePost("/player/addInventory",a,function(e,t){e?o(e,null):(n.ownedItems=JSON.parse(t).data,n.needToRefetch=!1,o(null,t))})}},t.prototype._addItemList=function(e,t){var o=this;if(h.NgcPlatform.isOfflineMode())e.forEach(function(e){o._addItem(e.itemID,e.count,function(e,n){e?t(e,null):(o.needToRefetch=!1,t(null,n))})});else{var n={itemList:e},r=JSON.stringify(n);f.default.inst.servicePost("/player/addInventory",r,function(e,n){e?t(e,null):(o.ownedItems=JSON.parse(n).data,o.needToRefetch=!1,t(null,n))})}},t.prototype._consumeItem=function(e,t,o){this._addItem(e,-t,o)},t.prototype._readInventoryFromStorage=function(e){if(!h.NgcPlatform.isOfflineMode())throw new Error("Method not implemented.");var t=d.default.offlineInventory;this.ownedItems=t||{},e(null,this.ownedItems)},t.prototype._writeInventoryToStorage=function(e){if(!h.NgcPlatform.isOfflineMode())throw new Error("Method not implemented.");d.default.offlineInventory=this.ownedItems,e(null,this.ownedItems)},t.prototype._forceFetchInventory=function(e){return s(this,void 0,void 0,function(){var t=this;return c(this,function(o){switch(o.label){case 0:return[4,new Promise(function(o){t._fetchInventory(function(t,n){o(),"function"==typeof e&&e(t,n)})})];case 1:return o.sent(),[2]}})})},a([m],t)}(g.NgcInventory));o.default=_,cc._RF.pop()},{"../../Core/Utils":"Utils","../../CrossFeatures/OfflineMode/OfflineMode":"OfflineMode","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../SDK/Nano/NanoSrv":"NanoSrv","../Platform/Platform":"Platform","./Inventory":"Inventory"}],Inventory:[function(e,t,o){"use strict";cc._RF.push(t,"a28c2hRNU9EXKBOvwJI0or9","Inventory");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcInventory=o.InventoryCurrencyType=o.InventoryItemType=void 0;var c=e("../../Core/nCSV"),l=e("../Service"),u=cc._decorator,p=u.ccclass;u.property,function(e){e[e.Currency=0]="Currency",e[e.Consumable=1]="Consumable",e[e.Equipable=2]="Equipable"}(o.InventoryItemType||(o.InventoryItemType={})),function(e){e[e.soft_currency=0]="soft_currency",e[e.ads_currency=1]="ads_currency",e[e.achievement_currency=2]="achievement_currency",e[e.like_social_currency=3]="like_social_currency",e[e.iap_currency=4]="iap_currency",e[e.daily_login_currency=5]="daily_login_currency",e[e.crown_road_currency=6]="crown_road_currency",e[e.edge_exclusive_currency=7]="edge_exclusive_currency",e[e.coming_soon_currency=8]="coming_soon_currency"}(o.InventoryCurrencyType||(o.InventoryCurrencyType={}));var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getName=function(){return"NgcInventory"},t.prototype.isValidItemID=function(e){if(!this.itemTable)throw new Error("[NgcInventory] this.itemTable is not loaded. Try to use 'this.loadItemTable()' first.");return this.itemTable.hasOwnProperty(e)},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){return this._init(e)},t.prototype.getItemCount=function(e,t){this._getItemCount(e,t)},t.prototype.addItem=function(e,t,o){this._addItem(e,t,function(e,t){o(e,t)})},t.prototype.addItemList=function(e,t){this._addItemList(e,function(e,o){t(e,o)})},t.prototype.consumeItem=function(e,t,o){this._consumeItem(e,t,function(e,t){o(e,t)})},t.prototype.readInventoryFromStorage=function(e){this._readInventoryFromStorage(function(t,o){e(t,o)})},t.prototype.forceFetchInventory=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this._forceFetchInventory(e)];case 1:return t.sent(),[2]}})})},t.prototype.writeInventoryToStorage=function(e){this._writeInventoryToStorage(function(t,o){e(t,o)})},t.prototype.initItemTableFromCSV=function(e){var t=c.nCSV.parseTable(e);if(!t)return!1;var o={};return t.forEach(function(e){var t=e.itemID;o.hasOwnProperty(t)||(o[t]=e)}),this.itemTable=o,!0},t.srvInstances=[],i([p],t)}(l.NgcService);o.NgcInventory=d,cc._RF.pop()},{"../../Core/nCSV":"nCSV","../Service":"Service"}],ItemCategory:[function(e,t,o){"use strict";cc._RF.push(t,"37ec4Hh559EzYbrYbfTROs3","ItemCategory");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ItemCategory=void 0;var a=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cateName=null,t}return r(t,e),t.prototype.updateNameByKey=function(e){this.cateName.setLocalizedText(e)},i([l(a.NgcLabelLocalized)],t.prototype,"cateName",void 0),i([c],t)}(cc.Component);o.ItemCategory=u,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],ItemContainer:[function(e,t,o){"use strict";cc._RF.push(t,"76051ZLlU1L36MNK1lN1mpc","ItemContainer");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ItemContainer=void 0;var a,s=e("../../../Core/ResizableComponent"),c=e("../../../GameFramework/Scripts/NgcItemInfoManager"),l=e("../../../GameFramework/Scripts/NgcShopManager"),u=e("../../EdgeExclusive/Script/EdgeExclusiveManager"),p=e("./InteractionButton"),d=e("./ItemCategory"),f=e("./ItemPool"),h=e("./ItemShop/Bundle"),g=e("./ItemShop/ItemShop"),y=e("./ItemShop/SingleItem"),m=e("./ItemTab"),_=cc._decorator,v=_.ccclass,S=_.property;(function(e){e[e.None=0]="None",e[e.GenerateUpcomingItemInfo=1]="GenerateUpcomingItemInfo",e[e.AddItem=2]="AddItem",e[e.RemoveOldItem=3]="RemoveOldItem",e[e.AddSpaceNode=4]="AddSpaceNode",e[e.End=5]="End"})(a||(a={}));var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tabContainerWidget=null,t.tabContent=null,t.container=null,t.scrollView=null,t.loadingOverlay=null,t.loadingIcon=null,t.content=null,t.interactionButtonContainer=null,t.interactionButtonPrefab=null,t.itemTabPrefab=null,t.singleItemPrefab=[],t.bundlePrefab=null,t.purchaseMethodPrefab=[],t.category=null,t.leftArrow=null,t.rightArrow=null,t.leftLimit=null,t.rightLimit=null,t._itemStructure=null,t._selectedTabNameKey="",t._tabList=[],t._selectedBundleIdInTab={},t._selectedItem=null,t._displayingItemShop=[],t._upcomingItemInfoOfNewTab=[],t._currentFindItemID=0,t._updateTabContentState=a.None,t._interactionButton=null,t._numberOfItemInRow=4,t._tabScrollView=null,t}return r(t,e),Object.defineProperty(t.prototype,"numberOfItemInRow",{set:function(e){this._numberOfItemInRow=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){(new f.NgcItemPool).init(this.singleItemPrefab,this.bundlePrefab,this.purchaseMethodPrefab,this.category),this.tabContainerWidget.left=this.tabContainerWidget.right=0,cc.view.on("canvas-resize",this.resize.bind(this)),this.interactionButtonContainer.opacity=0,this.leftArrow.opacity=0,this.rightArrow.opacity=0,this.leftArrow.getComponent(cc.Button).interactable=!1,this.rightArrow.getComponent(cc.Button).interactable=!1,cc.sys.isMobile?(this.leftArrow.active=!1,this.rightArrow.active=!1):(this.leftLimit.active=!0,this.rightLimit.active=!0),this._tabScrollView=this.tabContainerWidget.getComponent(cc.ScrollView)},t.prototype.update=function(){switch(this._updateTabContentState){case a.None:break;case a.GenerateUpcomingItemInfo:this.setUpNewTabContent();break;case a.RemoveOldItem:this.removeItemOfOldTab();break;case a.AddItem:this.addItem();break;case a.AddSpaceNode:this.addSpaceNode();break;case a.End:this.endUpdateTab()}},t.prototype.init=function(e){this._itemStructure=e,this.initInteractionButton(),this.initTabScroll(),this.resize()},t.prototype.updateItemStructure=function(e){this._itemStructure=e,e.tabs.length<this._tabList.length?(this.initTabScroll(),this.resize()):this.updateItemInSelectedTab()},Object.defineProperty(t.prototype,"ContentWidth",{get:function(){return this.container.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ContentHeight",{get:function(){return this.container.height-this.interactionButtonContainer.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsLoading",{set:function(e){this.loadingOverlay.active=e,this.scrollView.opacity=e?0:255,this.scrollView.getComponent(cc.ScrollView).verticalScrollBar.node.active=!e,e?this.loadingIcon.play():this.loadingIcon.stop()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"SelectedTab",{get:function(){return this._selectedTabNameKey},set:function(e){var t=this.getTabByNameKey(this._selectedTabNameKey);t&&(t.Selected=!1);var o=this.getTabByNameKey(e);o||(o=this._tabList[0],e=this._tabList[0].TabNameKey),o.Selected=!0,this._selectedTabNameKey=e,this.updateItemInSelectedTab(),this.scrollToTab(this._tabList.indexOf(o))},enumerable:!1,configurable:!0}),t.prototype.reselectCurrentTab=function(){this.SelectedTab=this._selectedTabNameKey},t.prototype.selectEdgeTab=function(){this.SelectedTab=u.EDGE_CATEGORY},Object.defineProperty(t.prototype,"SelectedItem",{get:function(){return this._selectedItem},set:function(e){this._selectedItem&&(this._selectedItem.Selected=!1,this._interactionButton.Visible=!1),this._selectedItem=e,this._selectedItem&&(this._selectedItem.Selected=!0,this._interactionButton.updateItemInfo(e.ItemInfo),this._interactionButton.Visible=!0,this._selectedBundleIdInTab[this._selectedTabNameKey]=this.SelectedItem.ItemInfo.bundleID,e instanceof y.SingleItem&&l.NgcShopManager.getInstance().previewItem(e.ItemInfo.itemID))},enumerable:!1,configurable:!0}),t.prototype.getTabByNameKey=function(e){return this._tabList.find(function(t){return t.TabNameKey===e})},t.prototype.getTabInfoByNameKey=function(e){return this._itemStructure.tabs.find(function(t){return t.tabNameKey===e})},t.prototype.determineSelectedItemInNewTab=function(){for(var e=this._displayingItemShop[0],t=0;t<this._displayingItemShop.length;t++){var o=this._displayingItemShop[t];if(o.ItemInfo.itemStatusType===c.NgcItemStatusType.Equipped&&(e=o),o.ItemInfo.bundleID===this._selectedBundleIdInTab[this._selectedTabNameKey]){e=o;break}}return e},t.prototype.setNumberOfItemInRow=function(e){this._numberOfItemInRow=e,this.resize()},t.prototype.onTabClicked=function(e){this.SelectedTab=e},t.prototype.onItemClick=function(e){this.SelectedItem=e},t.prototype.onArrowButtonClick=function(e,t){var o=this._tabList.indexOf(this.getTabByNameKey(this.SelectedTab));switch(t){case"right":o=o===this._tabList.length-1?0:o+1,this.SelectedTab=this._tabList[o].TabNameKey;break;case"left":o=0===o?this._tabList.length-1:o-1,this.SelectedTab=this._tabList[o].TabNameKey}this.scrollToTab(o,.1)},t.prototype.canScrollTab=function(){return this._itemStructure.tabs.length>=4},t.prototype.scrollToTab=function(e,t){if(void 0===t&&(t=.25),e===this._tabList.length-1?this.rightArrow.getComponent(cc.Button).interactable&&(this.rightArrow.getComponent(cc.Button).interactable=!1,cc.tween(this.rightArrow).to(t,{opacity:0}).start()):0==this.rightArrow.getComponent(cc.Button).interactable&&(this.rightArrow.getComponent(cc.Button).interactable=!0,cc.tween(this.rightArrow).to(t,{opacity:255}).start()),0===e?this.leftArrow.getComponent(cc.Button).interactable&&(this.leftArrow.getComponent(cc.Button).interactable=!1,cc.tween(this.leftArrow).to(t,{opacity:0}).start()):0==this.leftArrow.getComponent(cc.Button).interactable&&(this.leftArrow.getComponent(cc.Button).interactable=!0,cc.tween(this.leftArrow).to(t,{opacity:255}).start()),this.canScrollTab()){var o=this._tabList[e].node;this._tabScrollView.scrollTo(cc.v2(o.x,o.y),t)}},t.prototype.refresh=function(){this.refeshDisplayingItems(),this.refreshTab()},t.prototype.refeshDisplayingItems=function(){this._displayingItemShop.forEach(function(e){e.updateInfo()}),this.resizeItemContainer(),this._interactionButton.updateItemInfo()},t.prototype.refreshTab=function(){for(var e=0;e<this._tabList.length;e++)this._tabList[e].HasBrandNewItem=this._itemStructure.tabs[e].hasBrandNewItem},t.prototype.initInteractionButton=function(){if(!this._interactionButton){var e=cc.instantiate(this.interactionButtonPrefab);this.interactionButtonContainer.addChild(e),this._interactionButton=e.getComponent(p.NgcInteractionButton)}},t.prototype.initTabScroll=function(){var e=this;this.tabContent.children.length>0&&(this._tabList=[],this.tabContent.children.forEach(function(e){return e.destroy()})),this._itemStructure.tabs.length<4&&(this.leftArrow.active=!1,this.rightArrow.active=!1),this._itemStructure.tabs.forEach(function(t,o){var n=cc.instantiate(e.itemTabPrefab);e.tabContent.addChild(n);var r=n.getComponent(m.NgcItemTab);r.init(t.tabNameKey,o,t.hasBrandNewItem,e),e._tabList.push(r)}),this.SelectedTab=this._selectedTabNameKey,this._interactionButton.Visible=!1},t.prototype.updateItemInSelectedTab=function(){this._updateTabContentState=a.GenerateUpcomingItemInfo},t.prototype.setUpNewTabContent=function(){var e=this;this.IsLoading=!0,this.SelectedItem=null;var t=this.getTabInfoByNameKey(this._selectedTabNameKey);this._upcomingItemInfoOfNewTab=[],t.categories.forEach(function(t){if(t.cateNameKey===u.EDGE_CATEGORY){for(var o=[],n=void 0,r=0,i=u.default.getInstance().getRewardsEdgeExclusive();r<i.length;r++)for(var a=i[r],s=0,c=t.items;s<c.length;s++)(n=c[s]).itemID===a.itemId&&o.push(n);t.items=o}e._upcomingItemInfoOfNewTab.push(t),t.items.forEach(function(t){return e._upcomingItemInfoOfNewTab.push(t)})}),this._currentFindItemID=0,this._displayingItemShop=[],this._updateTabContentState=a.RemoveOldItem},t.prototype.removeItemOfOldTab=function(){this.content.children.forEach(function(e){return f.NgcItemPool.inst.putShopItem(e)});var e=this.content.children.pop();e&&e.destroy(),this.content.removeAllChildren(),this._updateTabContentState=a.AddItem},t.prototype.addItem=function(){if(this._upcomingItemInfoOfNewTab[this._currentFindItemID]instanceof l.NgcItemCategoryInfo){var e=this._upcomingItemInfoOfNewTab[this._currentFindItemID];if(e.shouldDisplay){var t=f.NgcItemPool.inst.getShopItem(d.ItemCategory);this.pushUINode(t),t.getComponent(d.ItemCategory).updateNameByKey(e.cateNameKey)}}else if(this._upcomingItemInfoOfNewTab[this._currentFindItemID]instanceof c.NgcItemInfo){var o=this._upcomingItemInfoOfNewTab[this._currentFindItemID],n=f.NgcItemPool.inst.getShopItem(o.isBundle?h.Bundle:y.SingleItem,o.displayType);this.pushUINode(n);var r=n.getComponent(g.ItemShop);r.Interactable=!0,r.updateInfo(o),r.setItemContainer(this),this._displayingItemShop.push(r)}this._currentFindItemID++,this._currentFindItemID==this._upcomingItemInfoOfNewTab.length&&(this._updateTabContentState=a.AddSpaceNode)},t.prototype.pushUINode=function(e){this.content.addChild(e),s.ResizableComponent.getResizableComponent(e)},t.prototype.addSpaceNode=function(){var e=new cc.Node;e.width=this.container.width,e.height=.15*this.container.height,this.pushUINode(e),this._updateTabContentState=a.End},t.prototype.endUpdateTab=function(){this.resizeItemContainer(),this.IsLoading=!1,this.SelectedItem=this.determineSelectedItemInNewTab(),this._updateTabContentState=a.None},t.prototype.resizeTabContainer=function(){if(0!=this.tabContent.children.length){var e=this.tabContent.getComponent(cc.Widget),t=this.tabContent.getComponent(cc.Layout),o=this._itemStructure.tabs.length;this.tabContent.children[0].width*o+t.spacingX*(o-1)<=this.ContentWidth-0?(e.isAlignHorizontalCenter=!0,e.isAlignLeft=!1,this.leftLimit.active=!1,this.rightLimit.active=!1):(e.isAlignHorizontalCenter=!1,e.isAlignLeft=!0,e.left=0,this.tabContainerWidget.getComponent(cc.ScrollView).scrollToLeft(.1)),this.leftLimit.x=this.tabContainerWidget.node.x-this.tabContainerWidget.node.width/2,this.rightLimit.x=this.tabContainerWidget.node.x+this.tabContainerWidget.node.width/2,e.updateAlignment()}},t.prototype.onTabSlide=function(){},t.prototype.lateUpdate=function(){this.checkForLimitVisibility()},t.prototype.checkForLimitVisibility=function(){var e=this._tabScrollView.getScrollOffset(),t=this._tabScrollView.getMaxScrollOffset();this.leftLimit.opacity=Math.round(e.x)<0?255:0,this.rightLimit.opacity=Math.round(-e.x)<t.x-0?255:0},t.prototype.resizeItemContainer=function(){var e=this.ContentWidth,t=this.content.getComponent(cc.Layout),o=e-t.paddingLeft-t.paddingRight,n=(e-t.paddingLeft-t.paddingRight-(this._numberOfItemInRow-1)*t.spacingX)/this._numberOfItemInRow;this.content.children.forEach(function(r){var i=r.getComponent(y.SingleItem),a=r.getComponent(h.Bundle);i?i.resizeBaseOnWidth(n):a?a.resize(e-t.paddingLeft-t.paddingRight):r.width=o})},t.prototype.resizeInteractionButton=function(){this._interactionButton&&this._interactionButton.resize()},t.prototype.resizeContent=function(){this.resizeTabContainer(),this.resizeItemContainer()},t.prototype.resize=function(){var e=this;setTimeout(function(){e.resizeContent()},50)},i([S(cc.Widget)],t.prototype,"tabContainerWidget",void 0),i([S(cc.Node)],t.prototype,"tabContent",void 0),i([S(cc.Node)],t.prototype,"container",void 0),i([S(cc.Node)],t.prototype,"scrollView",void 0),i([S(cc.Node)],t.prototype,"loadingOverlay",void 0),i([S(cc.Animation)],t.prototype,"loadingIcon",void 0),i([S(cc.Node)],t.prototype,"content",void 0),i([S(cc.Node)],t.prototype,"interactionButtonContainer",void 0),i([S(cc.Prefab)],t.prototype,"interactionButtonPrefab",void 0),i([S(cc.Prefab)],t.prototype,"itemTabPrefab",void 0),i([S(cc.Prefab)],t.prototype,"singleItemPrefab",void 0),i([S(cc.Prefab)],t.prototype,"bundlePrefab",void 0),i([S(cc.Prefab)],t.prototype,"purchaseMethodPrefab",void 0),i([S(cc.Prefab)],t.prototype,"category",void 0),i([S(cc.Node)],t.prototype,"leftArrow",void 0),i([S(cc.Node)],t.prototype,"rightArrow",void 0),i([S(cc.Node)],t.prototype,"leftLimit",void 0),i([S(cc.Node)],t.prototype,"rightLimit",void 0),i([v],t)}(cc.Component);o.ItemContainer=b,cc._RF.pop()},{"../../../Core/ResizableComponent":"ResizableComponent","../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../EdgeExclusive/Script/EdgeExclusiveManager":"EdgeExclusiveManager","./InteractionButton":"InteractionButton","./ItemCategory":"ItemCategory","./ItemPool":"ItemPool","./ItemShop/Bundle":"Bundle","./ItemShop/ItemShop":"ItemShop","./ItemShop/SingleItem":"SingleItem","./ItemTab":"ItemTab"}],ItemPool:[function(e,t,o){"use strict";cc._RF.push(t,"28257Mw7ClODIcf6yaiRs7z","ItemPool"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemPool=void 0;var n=e("./ItemCategory"),r=e("./ItemShop/Bundle"),i=e("./ItemShop/SingleItem"),a=e("./ItemStatus/ItemStatus"),s=function(){function e(){this._singleItemPool={},this._purchaseMethodPool={},this._singleItemPrefab={},this._purchaseMethodPrefab={},this._singleItemDefaultType=null,e.inst=this}return e.prototype.init=function(e,t,o,n){var r=this;e.forEach(function(e){var t=cc.instantiate(e),o=t.getComponent(i.SingleItem).getDisplayType();r._singleItemPool[o]=new cc.NodePool,r._singleItemPool[o].put(t),r._singleItemPrefab[o]=e,null==r._singleItemDefaultType&&(r._singleItemDefaultType=o)}),this._bundlePrefab=t,this._bundlePool=new cc.NodePool,o.forEach(function(e){var t=cc.instantiate(e),o=t.getComponent(a.NgcItemStatus).getType().toString();r._purchaseMethodPool[o]=new cc.NodePool,r._purchaseMethodPool[o].put(t),r._purchaseMethodPrefab[o]=e}),this._catePrefab=n,this._catePool=new cc.NodePool},e.prototype.getSingleItem=function(e){this._singleItemPool[e]||(e=this._singleItemDefaultType);var t=this._singleItemPool[e].get();return t||(t=cc.instantiate(this._singleItemPrefab[e])),t},e.prototype.putSingleItem=function(e){var t=e.getComponent(i.SingleItem).getDisplayType();this._singleItemPool[t].put(e)},e.prototype.getBundle=function(){var e=this._bundlePool.get();return e||(e=cc.instantiate(this._bundlePrefab)),e},e.prototype.putBundle=function(e){this._bundlePool.put(e)},e.prototype.getItemStatus=function(e){var t=e.toString(),o=this._purchaseMethodPool[t].get();return o||(o=cc.instantiate(this._purchaseMethodPrefab[t])),o},e.prototype.putItemStatus=function(e){var t=e.getComponent(a.NgcItemStatus).getType();this._purchaseMethodPool[t].put(e)},e.prototype.getCate=function(){var e=this._catePool.get();return e||(e=cc.instantiate(this._catePrefab)),e},e.prototype.putCate=function(e){this._catePool.put(e)},e.prototype.putShopItem=function(e){e.getComponent(i.SingleItem)?this.putSingleItem(e):e.getComponent(r.Bundle)?this.putBundle(e):e.getComponent(n.ItemCategory)&&this.putCate(e)},e.prototype.getShopItem=function(e,t){switch(e){case i.SingleItem:return this.getSingleItem(t);case r.Bundle:return this.getBundle();case n.ItemCategory:return this.getCate()}},e.inst=null,e}();o.NgcItemPool=s,cc._RF.pop()},{"./ItemCategory":"ItemCategory","./ItemShop/Bundle":"Bundle","./ItemShop/SingleItem":"SingleItem","./ItemStatus/ItemStatus":"ItemStatus"}],ItemSelectLanguage:[function(e,t,o){"use strict";cc._RF.push(t,"8b87fyON8tIYaTUVf90nI+y","ItemSelectLanguage");var n,r,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemSelectLanguage=void 0,function(e){e[e.Hat=0]="Hat",e[e.Glasses=1]="Glasses",e[e.Dress=2]="Dress"}(r||(r={}));var s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameItem="",t.codeItem="",t.boder=null,t.Icon=null,t.languageLb=null,t.callBackFn=null,t}return i(t,e),Object.defineProperty(t.prototype,"isSelected",{get:function(){return this._isSelected},set:function(e){this._isSelected=e,this.boder.node.active=e},enumerable:!1,configurable:!0}),t.prototype.start=function(){},t.prototype.setInfo=function(e,t,o,n,r){var i=this;cc.loader.loadRes(e,cc.SpriteFrame,function(e,t){e||(i.Icon.spriteFrame=t)}),this.nameItem=t,this.languageLb.string=t,this.codeItem=o,this.isSelected=n,this.callBackFn=r},t.prototype.onClick=function(){this.isSelected||(this.isSelected=!0,this.callBackFn&&this.callBackFn(this.codeItem))},a([l],t.prototype,"nameItem",void 0),a([l],t.prototype,"codeItem",void 0),a([l(cc.Sprite)],t.prototype,"boder",void 0),a([l(cc.Sprite)],t.prototype,"Icon",void 0),a([l(cc.Label)],t.prototype,"languageLb",void 0),a([c],t)}(cc.Component);o.NgcItemSelectLanguage=u,cc._RF.pop()},{}],ItemShop:[function(e,t,o){"use strict";cc._RF.push(t,"95c2bsHVOhDWZFCRqCNAfnH","ItemShop");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ItemShop=void 0;var a=e("../../../../Core/ResizableComponent"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("../../../../GameFramework/Scripts/NgcShopManager"),l=e("../../../../Services/Telemetry/Telemetry"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._itemContainer=null,t._button=null,t._isSelected=!1,t._itemInfo=null,t}return r(t,e),t.prototype.onLoad=function(){this.setupButton()},t.prototype.setupButton=function(){this._button=this.addComponent(cc.Button),this._button.interactable=!0,this._button.transition=cc.Button.Transition.NONE;var e=new cc.Component.EventHandler;e.target=this.node,e.component="ItemShop",e.handler="onClicked",this._button.clickEvents.push(e)},t.prototype.updateInfo=function(e){e&&(this._itemInfo=e),this.childUpdateInfo()},t.prototype.setItemContainer=function(e){this._itemContainer=e},Object.defineProperty(t.prototype,"Interactable",{set:function(e){this._button.interactable=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Selected",{get:function(){return this._isSelected},set:function(e){this._isSelected=e,this.childSelect()},enumerable:!1,configurable:!0}),t.prototype.trackItemClick=function(){var e=this._itemInfo instanceof s.NgcSingleItemInfo?this._itemInfo.itemID:this._itemInfo.bundleID,t=c.NgcShopManager.getInstance().increaseItemClickCounter(e);l.NgcTelemetry.inst.LogEvent_ShopItemViewed({itemID:e,checker:t,itemType:this._itemInfo.category})},t.prototype.resizeBaseOnWidth=function(e){e=Math.floor(e),a.ResizableComponent.resizeNodeByWidth(this.node,e)},t.prototype.onClicked=function(){this.Selected||(this._itemContainer.onItemClick(this),this.trackItemClick())},i([p],t)}(cc.Component));o.ItemShop=d,cc._RF.pop()},{"../../../../Core/ResizableComponent":"ResizableComponent","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../../Services/Telemetry/Telemetry":"Telemetry"}],ItemStatusEquipped:[function(e,t,o){"use strict";cc._RF.push(t,"bf958GiHCpNpYZ9RbWwLowE","ItemStatusEquipped");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemStatusEquipped=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.Equipped},t.prototype.updateInfo=function(){},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(c.NgcItemStatus);o.NgcItemStatusEquipped=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],ItemStatusUnlock:[function(e,t,o){"use strict";cc._RF.push(t,"7389fSzjzlNzLQExIUlQ5WM","ItemStatusUnlock");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemStatusUnlock=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("../../../EdgeExclusive/Script/EdgeExclusiveManager"),c=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.edgeIcon=null,t}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.Unlock},t.prototype.updateInfo=function(e){e.category===s.EDGE_CATEGORY?this.edgeIcon.active=!0:this.edgeIcon.active=!1},i([p(cc.Node)],t.prototype,"edgeIcon",void 0),i([u],t)}(c.NgcItemStatus);o.NgcItemStatusUnlock=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../EdgeExclusive/Script/EdgeExclusiveManager":"EdgeExclusiveManager","./ItemStatus":"ItemStatus"}],ItemStatus:[function(e,t,o){"use strict";cc._RF.push(t,"9b1d6JG7jZJca5whIILJXLK","ItemStatus");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemStatus=void 0;var a=e("../ItemPool"),s=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.updateItemStatusForNode=function(e,t){var n=t.itemStatusType;0==e.children.length&&o.addItemStatus(e,n);var r=e.children[0],i=r.getComponent(o);i.getType()!=n&&(r.removeFromParent(),a.NgcItemPool.inst.putItemStatus(r),i=o.addItemStatus(e,n)),i.updateInfo(t)},t.addItemStatus=function(e,t){var n=a.NgcItemPool.inst.getItemStatus(t);return e.addChild(n),n.getComponent(o)},o=i([s],t)}(cc.Component);o.NgcItemStatus=c,cc._RF.pop()},{"../ItemPool":"ItemPool"}],ItemTabAsset:[function(e,t,o){"use strict";cc._RF.push(t,"58331YkpD5FBLzw5GHKBkHp","ItemTabAsset");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemTabAsset=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundSelected=null,t.backgroundUnselected=null,t.backgroundBrandNewItemSelected=null,t.backgroundBrandNewItemUnselected=null,t.tabImageList=[],t.flashAnimation=null,t}return r(t,e),Object.defineProperty(t.prototype,"EnableFlash",{set:function(e){this.flashAnimation.node.active=e,e?this.flashAnimation.play():this.flashAnimation.stop()},enumerable:!1,configurable:!0}),i([c(cc.SpriteFrame)],t.prototype,"backgroundSelected",void 0),i([c(cc.SpriteFrame)],t.prototype,"backgroundUnselected",void 0),i([c(cc.SpriteFrame)],t.prototype,"backgroundBrandNewItemSelected",void 0),i([c(cc.SpriteFrame)],t.prototype,"backgroundBrandNewItemUnselected",void 0),i([c(cc.SpriteFrame)],t.prototype,"tabImageList",void 0),i([c(cc.Animation)],t.prototype,"flashAnimation",void 0),i([s],t)}(cc.Component);o.NgcItemTabAsset=l,cc._RF.pop()},{}],ItemTab:[function(e,t,o){"use strict";cc._RF.push(t,"2d221Zo6eJKQ7IBVMXIuRFj","ItemTab");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemTab=o.NgcTabType=void 0;var a,s=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../EdgeExclusive/Script/EdgeExclusiveManager"),l=e("./AssetComponent/ItemTabAsset");(function(e){e[e.BOTH_IMAGE_AND_NAME=0]="BOTH_IMAGE_AND_NAME",e[e.IMAGE=1]="IMAGE",e[e.NAME=2]="NAME"})(a=o.NgcTabType||(o.NgcTabType={}));var u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.tabImage=null,t.tabName=null,t._itemTabAsset=null,t._isSelected=!1,t._hasBrandNewItem=!1,t}return r(t,e),t.prototype.init=function(e,t,o,n,r){void 0===r&&(r=a.BOTH_IMAGE_AND_NAME),this.tabName.getComponent(s.NgcLabelLocalized).setLocalizedText(e),this._tabNameKey=e,this._tabId=t,this._hasBrandNewItem=o,this._itemContainer=n,this._itemTabAsset=this.node.getComponent(l.NgcItemTabAsset),this.updateBackground(),this.updateImage()},Object.defineProperty(t.prototype,"TabNameKey",{get:function(){return this._tabNameKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Selected",{get:function(){return this._isSelected},set:function(e){this._isSelected=e,this.updateBackground()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"HasBrandNewItem",{set:function(e){this._hasBrandNewItem=e,this.updateBackground()},enumerable:!1,configurable:!0}),t.prototype.setTabType=function(e){this.tabImage.active=e==a.IMAGE||e==a.BOTH_IMAGE_AND_NAME,this.tabName.active=e==a.NAME||e==a.BOTH_IMAGE_AND_NAME},t.prototype.updateBackground=function(){this.updateNormalBackground(),this.updateBrandNewBackground()},t.prototype.updateNormalBackground=function(){this.background.spriteFrame=this._isSelected?this._itemTabAsset.backgroundSelected:this._itemTabAsset.backgroundUnselected},t.prototype.updateBrandNewBackground=function(){this._hasBrandNewItem&&(this.background.spriteFrame=this._isSelected?this._itemTabAsset.backgroundBrandNewItemSelected:this._itemTabAsset.backgroundBrandNewItemUnselected),this._itemTabAsset.EnableFlash=this._hasBrandNewItem},t.prototype.updateImage=function(){this._tabNameKey!==c.EDGE_CATEGORY?this.tabImage.getComponent(cc.Sprite).spriteFrame=this._itemTabAsset.tabImageList[this._tabId]:this.tabImage.getComponent(cc.Sprite).spriteFrame=this._itemTabAsset.tabImageList[this._itemTabAsset.tabImageList.length-1]},t.prototype.onTabClicked=function(){this._itemContainer.onTabClicked(this._tabNameKey)},i([d(cc.Sprite)],t.prototype,"background",void 0),i([d(cc.Node)],t.prototype,"tabImage",void 0),i([d(cc.Node)],t.prototype,"tabName",void 0),i([p],t)}(cc.Component);o.NgcItemTab=f,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../EdgeExclusive/Script/EdgeExclusiveManager":"EdgeExclusiveManager","./AssetComponent/ItemTabAsset":"ItemTabAsset"}],LB_UserInfo:[function(e,t,o){"use strict";cc._RF.push(t,"62201MiZEJNgYR0t8ucKFBI","LB_UserInfo");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLB_UserInfo=void 0;var a=e("../../../Services/Platform/Platform"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankNumber=null,t.avatar=null,t.avatarUrl=null,t.flag=null,t.userName=null,t.userScore=null,t.mobileIcon=null,t.desktopIcon=null,t.bg2=null,t.needToSaveNode=null,t.userNameNeedToSave=null,t.isLocalUser=!1,t}return r(t,e),t.prototype.start=function(){},t.prototype.setNeedToSave=function(e){if(this.needToSaveNode&&this.userNameNeedToSave&&(!a.NgcPlatform.inst||a.NgcPlatform.inst.getPlatformID()!==a.PlatformID.Poki)){a.NgcPlatform.inst&&a.NgcPlatform.inst.getPlatformID()===a.PlatformID.GameDistribution&&(e=!1);var t=this.needToSaveNode.getChildByName("hint");t&&(t.width=cc.sys.isMobile?220:460),this.needToSaveNode.active=e,this.userName.node.active=!e,e&&(this.userNameNeedToSave.string=this.userName.string)}},i([l(cc.Label)],t.prototype,"rankNumber",void 0),i([l(cc.Sprite)],t.prototype,"avatar",void 0),i([l(cc.Sprite)],t.prototype,"flag",void 0),i([l(cc.Label)],t.prototype,"userName",void 0),i([l(cc.Label)],t.prototype,"userScore",void 0),i([l(cc.Node)],t.prototype,"mobileIcon",void 0),i([l(cc.Node)],t.prototype,"desktopIcon",void 0),i([l(cc.Node)],t.prototype,"bg2",void 0),i([l(cc.Node)],t.prototype,"needToSaveNode",void 0),i([l(cc.Label)],t.prototype,"userNameNeedToSave",void 0),i([c],t)}(cc.Component);o.NgcLB_UserInfo=u,cc._RF.pop()},{"../../../Services/Platform/Platform":"Platform"}],LZW:[function(e,t,o){"use strict";cc._RF.push(t,"5cab8dReeBFuaCLXz0Dd68F","LZW"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.decode=function(e,t){var o=1<<t,n=o+1,r=t+1,i=[],a=0;function s(){var e;for(i=[],r=t+1,e=0;e<o;e++)i[e]=[e];i[o]=[],i[n]=null}function c(t){var o,n=0;for(o=0;o<t;o++)e[a>>3]&1<<(7&a)&&(n|=1<<o),a++;return n}return function(){for(var e,t,a=[];;)if(t=e,(e=c(r))!=o){if(e==n)break;if(e<i.length)t!==o&&i.push(i[t].concat(i[e][0]));else{if(e!==i.length)throw new Error("LZW\u89e3\u6790\u51fa\u9519");i.push(i[t].concat(i[t][0]))}a.push.apply(a,i[e]),i.length===1<<r&&r<12&&r++}else s();return a}()},e}();o.default=n,cc._RF.pop()},{}],LabelLocalized:[function(e,t,o){"use strict";cc._RF.push(t,"2c05eDz1T9GTKFZFdcH0OUu","LabelLocalized");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLabelLocalized=void 0;var a=e("./LocalizedManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=s.menu,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textKey="",t.extraParamComponents=[],t.extraParams=null,t.defaultFont=null,t.subText="",t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),a.NgcLocalizedManager.labelLocalizeds.push(this)},t.prototype.start=function(){this.updateString()},t.prototype.setExtraParams=function(e){this.extraParams=e},t.prototype.setExtraComponents=function(e){this.extraParamComponents=e},t.prototype.applyExtraParams=function(){if(this.extraParams&&0!==this.extraParamComponents.length)for(var e=0;e<this.extraParamComponents.length;e++){var t=this.extraParams[e],o=this.extraParamComponents[e];this.string=this.string.replace(o,t)}},t.prototype.updateString=function(){if(this.textKey){var e=a.NgcLocalizedManager.t(this.textKey);""!=e.text&&(this.string=e.text,this.applyExtraParams(),this.subText&&(this.string+=this.subText))}},t.prototype.setLocalizedText=function(e){this.textKey=e,this.updateString()},i([l],t.prototype,"textKey",void 0),i([l({type:[cc.String]})],t.prototype,"extraParamComponents",void 0),i([l(cc.Font)],t.prototype,"defaultFont",void 0),i([c,u("NGC/LocalizedLabel")],t)}(cc.Label);o.NgcLabelLocalized=p,cc._RF.pop()},{"./LocalizedManager":"LocalizedManager"}],LeaderBoardManager:[function(e,t,o){"use strict";cc._RF.push(t,"489f4n7v/pBUoO+IjSuk509","LeaderBoardManager");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLeaderboardManager=o.LeaderboardInitStatus=void 0;var i,a=e("../../../../Scripts/Screens/LeaderBoardScreen/LeaderBoardUI"),s=e("../../../GameFramework/Scripts/Ads/NgcAdsManager"),c=e("../../../GameFramework/Scripts/CountryFlagsManager"),l=e("../../../GameFramework/Scripts/NgcMain"),u=e("../../../GameFramework/Scripts/NgcUserInfo"),p=e("../../../SDK/Nano/NanoSrv"),d=e("../../../Services/Ads/Ads"),f=e("../../../Services/Leaderboard/Leaderboard"),h=e("../../../Services/Leaderboard/Leaderboard_impl_NanoSrv"),g=e("../../../Services/Platform/Platform");(function(e){e[e.NotInitialized=0]="NotInitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(i=o.LeaderboardInitStatus||(o.LeaderboardInitStatus={}));var y=function(){function e(){this.leaderBoardUIPrefab=null,this.leaderBoardUINode=null,this.baseUserData=null,this.initStatus=i.NotInitialized,this.allTimeBestScore=null,this.spriteFramesUrlCache=[],this.sortOrder=f.SORT_ORDER.DESC}return Object.defineProperty(e,"inst",{get:function(){return null!==e.inst_&&void 0!==e.inst_||(e.inst_=new e),l.NgcMain.inst.setCrossFeatureInst(l.CrossFeature.NgcLeaderboardManager,e.inst_),e.inst_},enumerable:!1,configurable:!0}),e.prototype.setOrder=function(e){this.sortOrder=e},e.prototype.init=function(t){return n(this,void 0,void 0,function(){return r(this,function(){return e.inst.isInitalized()?[2]:(this.leaderBoardUINode=t.node,e.inst.initStatus=i.Initialized,cc.systemEvent.on("refreshLDB",this.onNanoSrvResetCallback.bind(this)),[2])})})},e.prototype.showLB=function(){e.inst.getLeaderBoardUIComponent().updateContent()&&(e.inst.getLeaderBoardUIComponent().show(),l.NgcMain.setAppContext(l.AppContext.Leaderboard))},e.prototype.checkShowBanner=function(){var e,t;s.default.inst.isAdsPoincutAvailable(s.NgcPointcuts.bannerLeaderboard,d.AdsType.Banner)?null===(e=s.default.inst)||void 0===e||e.showBanner(s.NgcPointcuts.bannerLeaderboard):null===(t=s.default.inst)||void 0===t||t.hide()},e.prototype.hideLB=function(){e.inst.leaderBoardUINode.active=!1},e.prototype.getLeaderBoardUIComponent=function(){return e.inst.leaderBoardUINode?e.inst.leaderBoardUINode.getComponent(a.NgcLeaderboardUI):null},e.prototype.getTop50=function(t,o){return n(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,e.inst.getLeaderBoarData(0,50,t,o)];case 1:return[2,n.sent()]}})})},e.prototype.getTop100=function(t,o){return n(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,e.inst.getLeaderBoarData(0,100,t,o)];case 1:return[2,n.sent()]}})})},e.prototype.getLocalPlayerRank=function(e,t){return n(this,void 0,void 0,function(){var o,n;return r(this,function(r){switch(r.label){case 0:return g.NgcPlatform.isOfflineMode()?[2,null]:[4,f.NgcLeaderboard.inst.getLocalPlayerRank(e,t,this.sortOrder)];case 1:return(o=r.sent())&&1==o.status?((n=o.data).country&&(n.country=n.country.toUpperCase()),[2,n]):[2,null]}})})},e.prototype.getLeaderBoarData=function(e,t,o,i){var a;return n(this,void 0,void 0,function(){var n,s;return r(this,function(r){switch(r.label){case 0:return(n=new f.RequestLeaderboard).numRecords=t,n.populationFilter=i,n.timeFilter=o,n.position=e,n.order=this.sortOrder,[4,null===(a=f.NgcLeaderboard.inst)||void 0===a?void 0:a.loadData(n)];case 1:return(s=r.sent())&&1==s.status?[2,s.data]:[2,null]}})})},e.prototype.getNearLocalPlayer=function(e,t,o,i){return void 0===i&&(i=f.SORT_ORDER.DESC),n(this,void 0,void 0,function(){var n;return r(this,function(r){switch(r.label){case 0:return g.NgcPlatform.isOfflineMode()?[2,null]:[4,f.NgcLeaderboard.inst.getNearLocalPlayer(e,t,i,o)];case 1:return(n=r.sent())&&1==n.status?[2,n.data]:[2,null]}})})},e.prototype.getLocalUserData=function(){return n(this,void 0,Promise,function(){var e,t;return r(this,function(o){switch(o.label){case 0:return g.NgcPlatform.isOfflineMode()?[2,null]:(e={},t={},[4,new Promise(function(o,n){p.default.inst.servicePost("/user/login",JSON.stringify(e),function(e,r){if(e)n();else{var i=JSON.parse(r);i?(t.avatar=i.avatar,t.country=i.country?i.country.toUpperCase():null,t.devicetype=i.deviceType,t.name=i.name,t.playerId=i.id,t.socialId=i.socialId,o()):n()}})})]);case 1:return o.sent(),[2,t]}})})},e.prototype.isInitalized=function(){return e.inst.initStatus===i.Initialized},e.prototype.isInitalizing=function(){return e.inst.initStatus===i.Initializing},e.prototype.checkOldBestScore=function(){return n(this,void 0,void 0,function(){var t,o,n,i;return r(this,function(r){switch(r.label){case 0:return g.NgcPlatform.isOfflineMode()?[2]:[4,e.inst.getAllTimeBestScore()];case 1:if(t=r.sent(),o=l.NgcMain.inst.getBestScore(),t){if(t===o)return[2];l.NgcMain.inst.setBestScore(t)}return n={score:l.NgcMain.inst.getBestScore(),country:c.NgcCountryFlagsManager.localCountry,deviceType:cc.sys.isMobile?h.DeviceType.MOBILE:h.DeviceType.PC,time:"alltime"},p.default.inst.servicePost("/leaderboard/updatescore",JSON.stringify(n),function(){}),i={_bestScore:l.NgcMain.inst.getBestScore()},p.default.inst.servicePost("/playerdata/",JSON.stringify(i),function(e){e||console.log("update old _best score success")}),[2]}})})},e.prototype.getAllTimeLocalData=function(){return n(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,e.inst.getLocalPlayerRank(f.TimeFilterType.AllTime,f.PopulationFilterType.Worldwide).catch(function(){})];case 1:return[2,t.sent()]}})})},e.prototype.getAllTimeBestScore=function(){return n(this,void 0,void 0,function(){var e;return r(this,function(t){switch(t.label){case 0:return g.NgcPlatform.isOfflineMode()?[2,null]:[4,this.getAllTimeLocalData()];case 1:return(e=t.sent())&&e.hasOwnProperty("score")?[2,parseInt(e.score)]:[2,null]}})})},e.prototype.getPercentOfBeatPlayers=function(){return n(this,void 0,void 0,function(){var e,t,o;return r(this,function(n){switch(n.label){case 0:return[4,this.getAllTimeLocalData()];case 1:return(e=n.sent())&&e.hasOwnProperty("rank")&&e.hasOwnProperty("minRank")?null===e.rank||null===e.minRank?[2,null]:(t=parseInt(e.rank),o=parseInt(e.minRank),[2,Math.round((o-t)/o*100)]):[2,null]}})})},e.prototype.loadSpriteFrameFromURL=function(t){return new Promise(function(o,n){if(t){var r=e.inst.spriteFramesUrlCache.find(function(e){return e.url===t});r?o(r.spriteFrame):cc.loader.load({url:t,type:"jpg"},function(i,a){if(i)n(i);else{var s=new cc.SpriteFrame(a);r={url:t,spriteFrame:s},e.inst.spriteFramesUrlCache.push(r),o(s)}})}else n("[Util] `loadSpriteFrameFromURL` urlJPG = "+t)})},e.prototype.onNanoSrvResetCallback=function(){var t;f.NgcLeaderboard.inst.clearCacheRequestData(),(null===(t=e.inst)||void 0===t?void 0:t.getLeaderBoardUIComponent())&&(e.inst.getLeaderBoardUIComponent().reloadFilter(),e.inst.getLeaderBoardUIComponent().setLoginStatus(u.default.isUserLogined()))},e.inst_=null,e}();o.NgcLeaderboardManager=y,cc._RF.pop()},{"../../../../Scripts/Screens/LeaderBoardScreen/LeaderBoardUI":"LeaderBoardUI","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads","../../../Services/Leaderboard/Leaderboard":"Leaderboard","../../../Services/Leaderboard/Leaderboard_impl_NanoSrv":"Leaderboard_impl_NanoSrv","../../../Services/Platform/Platform":"Platform"}],LeaderBoardUI:[function(e,t,o){"use strict";cc._RF.push(t,"309begZN9xPZJLdrsJQ9cVK","LeaderBoardUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLeaderboardUI=void 0;var c,l,u,p,d=e("../../../NanoGameCore/Core/Utils"),f=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog"),h=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),g=e("../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LB_UserInfo"),y=e("../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager"),m=e("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),_=e("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarShareDialog"),v=e("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),S=e("../../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),b=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),N=e("../../../NanoGameCore/GameFramework/Scripts/NgcMain"),P=e("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),C=e("../../../NanoGameCore/GameFramework/Scripts/NgcScreenManager"),w=e("../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),T=e("../../../NanoGameCore/SDK/Nano/NanoSrv"),I=e("../../../NanoGameCore/Services/Leaderboard/Leaderboard"),R=e("../../../NanoGameCore/Services/Leaderboard/Leaderboard_impl_NanoSrv"),O=e("../../../NanoGameCore/Services/Platform/Platform"),E=e("../../../NanoGameCore/Services/Social/Social"),k=e("../../../NanoGameCore/Services/Telemetry/Telemetry"),A=e("../../HSAUtils"),B=e("../../ScreenManager"),D=cc._decorator,M=D.ccclass,L=D.property;(function(e){e[e.TopEdge=0]="TopEdge",e[e.Middle=1]="Middle",e[e.BottomEdge=2]="BottomEdge"})(c||(c={})),function(e){e[e.vertical=0]="vertical",e[e.horizontal=1]="horizontal",e[e.none=2]="none"}(l||(l={})),function(e){e[e.none=0]="none",e[e.left=1]="left",e[e.right=2]="right"}(u||(u={})),function(e){e[e.AboveTop=0]="AboveTop",e[e.InBoard=1]="InBoard",e[e.BelowBottom=2]="BelowBottom"}(p||(p={}));var F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeFilterTogglerContainer=null,t.dailyButtonChecked=null,t.dailyButtonUnchecked=null,t.weeklyButtonChecked=null,t.weeklyButtonUnchecked=null,t.allTimeButtonChecked=null,t.allTimeButtonUnchecked=null,t.friendsButtonChecked=null,t.friendsButtonUnchecked=null,t.countryButtonChecked=null,t.countryButtonUnchecked=null,t.worldwideButtonChecked=null,t.worldwideButtonUnchecked=null,t.firstRank=null,t.firstRankHighlight=null,t.secondRank=null,t.secondRankHighlight=null,t.thirdRank=null,t.thirdRankHighlight=null,t.scrollView=null,t.scrollContent=null,t.topKeeper=null,t.bottomKeeper=null,t.top3Container=null,t.lb_userInfoPrefab=null,t.lb_infoBoardPrefab=null,t.lb_loadingBoardPrefab=null,t.mouseEventSensorNode=null,t.mouseEventSensorCheckSwipeNode=null,t.adsBannerNode=null,t.backToTopBtnNode=null,t.loginNode=null,t.inviteNode=null,t.arrowPointingNode=null,t.profile_background_1st=null,t.profile_background_2nd=null,t.profile_background_3rd=null,t.profile_background_blank_top=null,t.profile_background_blank=null,t.blockInput=null,t.loadingTop=null,t.backBtn=null,t.topKeeper_PC=null,t.botKeeper_PC=null,t.middleKeeper_PC=null,t.playerRankingNode=null,t.lb_infoBoardNode=null,t.lb_loadingBoardNode=null,t.listTopData=null,t.localUserData=null,t.localUserInfo=null,t.posOfLocalItem=null,t.isMouseDown=!1,t.isScrollContentOnTop=!1,t.scrollViewSizeStatus=c.BottomEdge,t.rankTheEndOfContent=0,t.touchStartPos=null,t.touchStartOnTop3Pos=null,t.currentScale=1,t.curTimeFilter=I.TimeFilterType.AllTime,t.curPopulationFilter=I.PopulationFilterType.Worldwide,t.hasMoreEntryToAdd=!0,t.scrollContentKeepPos=null,t.isAdsBannersEnabled=!1,t.typeSwipe=l.none,t.isLocalUserAlreadyLogin=!1,t.shareDialog=null,t.isMouseDragDown=!1,t.DISTANCE_NEXT=700,t.DEFAULT_SCREEN_SIZE=cc.v2(640,960),t.scrollViewTouched=!1,t.mustRefresh=!1,t.SCROLL_VIEW_BOTTOM_EDGE=463,t.SCROLL_VIEW_TOP_EDGE=200,t.NUMBER_MORE_ENTRY=50,t.BG_LOCAL_USER_HEX_COLER="#92CBFF",t.MAX_NAME_LENGTH=12,t.SWIPE_MIN_LENGHT=100,t.DISTANCE_TO_SHOW_BACK_TO_TOP_BUTTON=100,t.needRefreshLeaderboard=!0,t._isRefreshing=!1,t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.DISTANCE_NEXT=cc.sys.isMobile?700:902,this.DEFAULT_SCREEN_SIZE=cc.sys.isMobile?cc.v2(640,960):cc.v2(1920,1080),this.initLeaderboardManager(),this.scrollView.on(cc.Node.EventType.MOUSE_DOWN,this.onScrollViewTouched,this),this.scrollView.on(cc.Node.EventType.TOUCH_START,this.onScrollViewTouched,this),this.scrollView.on(cc.Node.EventType.MOUSE_UP,this.onScrollViewUntouched,this),this.scrollView.on(cc.Node.EventType.TOUCH_END,this.onScrollViewUntouched,this),this.scrollView.on(cc.Node.EventType.MOUSE_MOVE,this.onScrollViewMove,this),this.scrollView.on(cc.Node.EventType.TOUCH_MOVE,this.onScrollViewMove,this)},t.prototype.onScrollViewTouched=function(){this.scrollViewTouched=!0},t.prototype.onScrollViewUntouched=function(){this.scrollViewTouched=!1,this.mustRefresh&&(this.refreshFilter(),this.mustRefresh=!1)},t.prototype.onScrollViewMove=function(e){this.mustRefresh=this.scrollViewTouched&&this.reachTopOrEndLeaderboard()&&0!=e.getDelta().y},t.prototype.onActivate=function(){k.NgcTelemetry.inst.LogEvent_EnterScreen("Leaderboard")},t.prototype.onResume=function(){k.NgcTelemetry.inst.LogEvent_EnterScreen("Leaderboard")},t.prototype.start=function(){this.mouseEventSensorNode.active=!1,this.scrollViewSizeStatus=c.BottomEdge,this.backToTopBtnNode.active=!1,this.topKeeper.getComponent(g.NgcLB_UserInfo).isLocalUser=!0,this.bottomKeeper.getComponent(g.NgcLB_UserInfo).isLocalUser=!0,cc.sys.isMobile||(this.topKeeper_PC.active=this.topKeeper.active,this.topKeeper_PC.opacity=0,this.botKeeper_PC.active=this.bottomKeeper.active,this.botKeeper_PC.opacity=0,this.middleKeeper_PC.active=!0,this.middleKeeper_PC.opacity=0),this.setLoginStatus(w.default.isUserLogined()),E.NgcSocial.inst||(this.loginNode.active=!1),w.default.facebookAccessToken;var e=T.default.inst.getCurSocialInfo(),t=E.SocialType.None,o=!1;e&&("uplay"===e.platform||"ubiconnect"===e.platform?t=E.SocialType.Uplay:"facebook"===e.platform&&(t=E.SocialType.Facebook),t!=E.SocialType.None&&(E.NgcSocial.inst=E.NgcSocial.getSrvInstance(t),o=!0,console.log("Already Logged with ",e.platform))),o&&this.isLocalUserAlreadyLogin&&E.NgcSocial.inst&&E.NgcSocial.inst.fetchInfoWithAccessToken(w.default.socialId).then(function(){E.NgcSocial.inst.sendFriendListToServer(),w.default.localUserName!=E.NgcSocial.inst.getFormatName()&&(w.default.localUserName=N.NgcMain.inst.localUserName=E.NgcSocial.inst.getFormatName(),E.NgcSocial.inst.sendNameToServer()),w.default.avatarUrl!=E.NgcSocial.inst.getProfilePictureUrl()&&(w.default.avatarUrl=E.NgcSocial.inst.getProfilePictureUrl(),E.NgcSocial.inst.sendAvatarToServer())},function(){E.NgcSocial.inst.reLogin()}),this.backBtn.node.active=!C.default.inst.tabBarIsActive,this.scrollView.originX=this.scrollView.x,this.top3Container.originX=this.top3Container.x,this.topKeeper.originX=this.topKeeper.x,this.bottomKeeper.originX=this.bottomKeeper.x,this.firstRankHighlight.opacity=0,this.secondRankHighlight.opacity=0,this.thirdRankHighlight.opacity=0,O.NgcPlatform.inst&&(this.loginNode.parent.active=O.NgcPlatform.inst.getPlatformID()!==O.PlatformID.Poki,O.NgcPlatform.inst.getPlatformID()===O.PlatformID.GameDistribution&&(this.friendsButtonChecked.parent.active=!1,this.loginNode.parent.active=!1))},t.prototype.update=function(){this.checkLocalPosition(),this.isScrollContentOnTop=this.scrollContent.y<=1e-4,cc.sys.isMobile||this.updateKeeperPC()},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},t.prototype.initLeaderboardManager=function(){y.NgcLeaderboardManager.inst.initStatus=y.LeaderboardInitStatus.Initializing,y.NgcLeaderboardManager.inst.init(this).catch(function(e){console.warn(e),y.NgcLeaderboardManager.inst.initStatus=y.LeaderboardInitStatus.NotInitialized}).finally(function(){y.NgcLeaderboardManager.inst.isInitalized()?y.NgcLeaderboardManager.inst.showLB():y.NgcLeaderboardManager.inst.initStatus=y.LeaderboardInitStatus.NotInitialized})},t.prototype.switchTimeBased=function(){var e=this.dailyButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.dailyButtonChecked.active=e,this.dailyButtonUnchecked.active=!e;var t=this.weeklyButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.weeklyButtonChecked.active=t,this.weeklyButtonUnchecked.active=!t;var o=this.allTimeButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.allTimeButtonChecked.active=o,this.allTimeButtonUnchecked.active=!o,e?this.curTimeFilter=I.TimeFilterType.Daily:t?this.curTimeFilter=I.TimeFilterType.Weekly:o&&(this.curTimeFilter=I.TimeFilterType.AllTime),this.reloadFilter()},t.prototype.switchPopulationBased=function(){var e=this.friendsButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.friendsButtonChecked.active=e,this.friendsButtonUnchecked.active=!e;var t=this.countryButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.countryButtonChecked.active=t,this.countryButtonUnchecked.active=!t;var o=this.worldwideButtonChecked.parent.getComponent(cc.Toggle).isChecked;this.worldwideButtonChecked.active=o,this.worldwideButtonUnchecked.active=!o,e?this.curPopulationFilter=I.PopulationFilterType.Friends:t?this.curPopulationFilter=I.PopulationFilterType.Country:o&&(this.curPopulationFilter=I.PopulationFilterType.Worldwide),this.reloadFilter()},t.prototype.scrollEvents=function(){this.scrollView.getComponent(cc.ScrollView).inertia=this.scrollViewSizeStatus!==c.Middle&&this.typeSwipe!==l.horizontal,this.updateItemRenderInScrollView(),this.setBackToTopButtonEnable(this.scrollContent.y>=this.DISTANCE_TO_SHOW_BACK_TO_TOP_BUTTON)},t.prototype.show=function(){var e=this;this.node.active=!0,this.reScale(),cc.view.setResizeCallback(function(){e.reScale()}),this.scheduleOnce(function(){e.reScale()},.5)},t.prototype.checkLocalPosition=function(){if(!this.isWithoutContentData()){if(this.isLocalUserInTop3())return this.topKeeper.opacity=this.scrollViewSizeStatus===c.TopEdge?255:0,void(this.bottomKeeper.opacity=0);if(!this.isLocalUserInContent())return this.bottomKeeper.opacity=255,void(this.topKeeper.opacity=0);d.Utils.getWorldPos(this.localUserInfo).y>d.Utils.getWorldPos(this.topKeeper).y?this.posOfLocalItem=p.AboveTop:d.Utils.getWorldPos(this.localUserInfo).y<d.Utils.getWorldPos(this.bottomKeeper).y?this.posOfLocalItem=p.BelowBottom:this.posOfLocalItem=p.InBoard,this.topKeeper.opacity=this.posOfLocalItem===p.AboveTop?255:0,this.bottomKeeper.opacity=this.posOfLocalItem===p.BelowBottom?255:0}},t.prototype.updateScrollViewSize=function(e){if(this.typeSwipe!=l.horizontal&&0!==e&&(!(e>0)||this.isScrollContentOnTop||this.scrollViewSizeStatus!==c.TopEdge)&&!(this.scrollViewSizeStatus===c.BottomEdge&&e>0||this.scrollViewSizeStatus===c.TopEdge&&e<0)){var t=this.playerRankingNode.getComponent(cc.Widget);t.top+=e,t.top=cc.misc.clampf(this.SCROLL_VIEW_TOP_EDGE,this.SCROLL_VIEW_BOTTOM_EDGE,t.top),this.playerRankingNode.getComponentsInChildren(cc.Widget).forEach(function(e){return e.updateAlignment()}),this.updateScrollViewSizeStatus(),e>0&&this.isScrollContentOnTop?this.scrollView.getComponent(cc.ScrollView).scrollToTop(0):this.scrollView.getComponent(cc.ScrollView).setContentPosition(this.scrollContentKeepPos)}},t.prototype.updateTopAndBotKeeper=function(){var e=this.topKeeper.getComponent(g.NgcLB_UserInfo);e.userName.string=this.localUserData.name?this.localUserData.name:"Guest",e.rankNumber.string=this.localUserData.rank?""+this.localUserData.rank:"---";var t=S.NgcCountryFlagsManager.inst.getFlagSpriteFrame(this.localUserData.country);if(null!=t&&(e.flag.spriteFrame=t),e.userScore.string=this.localUserData.score?A.default.formatNumber(this.localUserData.score):"---",e.desktopIcon.active=this.localUserData.devicetype===R.DeviceType.PC,e.mobileIcon.active=this.localUserData.devicetype===R.DeviceType.MOBILE,!this.isLocalUserInTop3()){var o=this.bottomKeeper.getComponent(g.NgcLB_UserInfo);null!=t&&(o.flag.spriteFrame=t),o.userName.string=this.localUserData.name?this.localUserData.name:"Guest",o.rankNumber.string=this.localUserData.rank?""+this.localUserData.rank:"---",o.userScore.string=this.localUserData.score?A.default.formatNumber(this.localUserData.score):"---",o.desktopIcon.active=this.localUserData.devicetype===R.DeviceType.PC,o.mobileIcon.active=this.localUserData.devicetype===R.DeviceType.MOBILE,o.avatarUrl=this.localUserData.avatar,o.avatarUrl?y.NgcLeaderboardManager.inst.loadSpriteFrameFromURL(o.avatarUrl).then(function(e){o.avatar.spriteFrame=e},function(e){console.log(e)}):o.avatar.spriteFrame=this.profile_background_blank}e.avatarUrl=this.localUserData.avatar,e.avatarUrl?y.NgcLeaderboardManager.inst.loadSpriteFrameFromURL(e.avatarUrl).then(function(t){e.avatar.spriteFrame=t},function(e){console.log(e)}):e.avatar.spriteFrame=this.profile_background_blank},t.prototype.changeViewSizeByMouse=function(e){if(this.isMouseDown){var t=Math.abs(e.getDeltaY())<2*Math.abs(e.getDeltaX())/3;if(this.typeSwipe==l.none&&(this.typeSwipe=t?l.horizontal:l.vertical),this.typeSwipe==l.horizontal);else if(this.typeSwipe==l.vertical){var o=e.getDeltaY();this.updateScrollViewSize(-o),o<0&&(this.isMouseDragDown=!0)}}},t.prototype.reachTopOrEndLeaderboard=function(){if(this.scrollContent.childrenCount<=1)return!0;var e=this.scrollContent.children[0],t=this.scrollContent.children[this.scrollContent.childrenCount-1],o=d.Utils.getWorldPos(e),n=d.Utils.getWorldPos(t),r=d.Utils.getWorldPos(this.scrollView),i=n.y-t.height*t.anchorY,a=r.y+this.scrollView.height*this.scrollView.anchorY,s=r.y-this.scrollView.height*this.scrollView.anchorY;return Math.round(o.y)<=Math.round(a)||Math.round(i)>=Math.round(s)},t.prototype.isItemInCurrentView=function(e){var t=d.Utils.getWorldPos(e),o=d.Utils.getWorldPos(this.scrollView),n=t.y+e.height*(1-e.anchorY),r=t.y-e.height*e.anchorY,i=o.y+this.scrollView.height*(1-this.scrollView.anchorY);return!(n<o.y-this.scrollView.height*this.scrollView.anchorY||r>i)},t.prototype.updateContent=function(){return a(this,void 0,Promise,function(){var e,t,o,n,r,i,a;return s(this,function(){if(!this.listTopData)return[2,!1];if(!this.localUserData)return[2,!1];if(e=d.Utils.enumToString(I.TimeFilterType,this.curTimeFilter),t=d.Utils.enumToString(I.PopulationFilterType,this.curPopulationFilter),k.NgcTelemetry.inst.LogEvent_InfoLeaderboard({rankBalance:this.localUserData.rank,leaderboardContext:e,leaderboardCategory:t}),this.lb_loadingBoardNode&&this.removeLoadingBoard(),this.lb_infoBoardNode=null,this.resetAvatarTop3(),this.checkArrowPointLoginIconDisplay(),this.isWithoutContentData())return this.updateContentWithoutData(),this.scrollContent.removeAllChildren(),this.addInviteInfoBoard(),[2,!0];for(null==this.localUserData.score&&(this.localUserData.rank=null),this.scrollContent.removeAllChildren(),this.localUserInfo=null,o=this.listTopData,this.secondRank.opacity=0,this.thirdRank.opacity=0,n=0,r=o;n<r.length;n++)null!==(i=r[n]).rank&&(a=null,1===i.rank?a=this.firstRank:2===i.rank?(this.secondRank.opacity=255,a=this.secondRank):3===i.rank?(this.thirdRank.opacity=255,a=this.thirdRank):(a=cc.instantiate(this.lb_userInfoPrefab)).parent=this.scrollContent,this.applyUserDataToNode(i,a));return console.log("@@ Local user rank ",this.localUserData.rank),o.length>3&&(this.localUserData.rank>99||!this.localUserData.rank)&&(cc.instantiate(this.lb_userInfoPrefab).parent=this.scrollContent),this.rankTheEndOfContent<this.NUMBER_MORE_ENTRY&&this.addInviteInfoBoard(),this.firstRankHighlight.active=1===this.localUserData.rank,this.secondRankHighlight.active=2===this.localUserData.rank,this.thirdRankHighlight.active=3===this.localUserData.rank,this.updateTopAndBotKeeper(),this.checkLocalPosition(),this.updateItemRenderInScrollView(),this.backToTopBtnNode.active=!1,this.updateLocalUserLoginInfo(this.isLocalUserAlreadyLogin),[2,!0]})})},t.prototype.updateContentWithoutData=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(){return 0==this.listTopData.length&&(this.secondRank.opacity=0,this.thirdRank.opacity=0,this.bottomKeeper.opacity=0,(e=this.firstRank.getComponent(g.NgcLB_UserInfo)).userName.string=this.localUserData.name?this.localUserData.name:"Guest",e.userScore.string=this.localUserData.score?A.default.formatNumber(this.localUserData.score):"---",null!=(t=S.NgcCountryFlagsManager.inst.getFlagSpriteFrame(this.localUserData.country))&&(e.flag.spriteFrame=t),e.avatarUrl=this.localUserData.avatar,e.isLocalUser=!0,this.firstRankHighlight.active=!0,this.topKeeper.opacity=0,this.bottomKeeper.opacity=0),[2]})})},t.prototype.reloadFilter=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return this.setBlockInput(!0),this.scrollView.getComponent(cc.ScrollView).stopAutoScroll(),this.localUserInfo=null,this.hasMoreEntryToAdd=!0,this.rankTheEndOfContent=0,e=this,[4,y.NgcLeaderboardManager.inst.getTop100(this.curTimeFilter,this.curPopulationFilter)];case 1:return e.listTopData=o.sent(),t=this,[4,y.NgcLeaderboardManager.inst.getLocalPlayerRank(this.curTimeFilter,this.curPopulationFilter)];case 2:return t.localUserData=o.sent(),this.updateContent(),[4,this.loadTop3UserAvatar()];case 3:return o.sent(),this.setBlockInput(!1),[2]}})})},t.prototype.refreshFilter=function(){var e;return a(this,void 0,void 0,function(){var t,o;return s(this,function(n){switch(n.label){case 0:return this._isRefreshing?[2]:(this._isRefreshing=!0,null===(e=I.NgcLeaderboard.inst)||void 0===e||e.clearCacheRequestData(),this.setBlockInput(!0),this.localUserInfo=null,this.hasMoreEntryToAdd=!0,this.rankTheEndOfContent=0,t=this,[4,y.NgcLeaderboardManager.inst.getTop100(this.curTimeFilter,this.curPopulationFilter)]);case 1:return t.listTopData=n.sent(),o=this,[4,y.NgcLeaderboardManager.inst.getLocalPlayerRank(this.curTimeFilter,this.curPopulationFilter)];case 2:return o.localUserData=n.sent(),this.updateContent(),[4,this.loadTop3UserAvatar()];case 3:return n.sent(),this.setBlockInput(!1),this._isRefreshing=!1,[2]}})})},t.prototype.isWithoutContentData=function(){return null===this.listTopData||0==this.listTopData.length},t.prototype.addInviteInfoBoard=function(){if(null===this.lb_loadingBoardNode){switch(this.lb_infoBoardNode=cc.instantiate(this.lb_infoBoardPrefab),v.NgcBuildConfig.buildPlatform){case"POKI":case"GameDistribution":this.lb_infoBoardNode.active=!1;break;default:var e=this.isLocalUserAlreadyLogin?"LDB_INVITE_BOARD_INFO":"LDB_LOGIN_BOARD_INFO";this.lb_infoBoardNode.getComponentInChildren(b.NgcLabelLocalized).setLocalizedText(e)}this.lb_infoBoardNode.parent=this.scrollContent}},t.prototype.addLoadingBoard=function(){this.lb_loadingBoardNode=cc.instantiate(this.lb_loadingBoardPrefab),this.lb_loadingBoardNode.parent=this.scrollContent},t.prototype.removeLoadingBoard=function(){var e=this;if(this.scrollContent.childrenCount>0){var t=this.scrollContent.children.findIndex(function(t){return t===e.lb_loadingBoardNode});t>0&&(this.scrollContent.children.splice(t,1),this.lb_loadingBoardNode=null)}},t.prototype.applyUserDataToNode=function(e,t){return a(this,void 0,void 0,function(){var o,n,r;return s(this,function(){return null===(o=t.getComponent(g.NgcLB_UserInfo))?[2]:(o.rankNumber&&(o.rankNumber.string=""+e.rank),o.userName.string=e.name?e.name:"Guest",e.socialId||e.avatar?o.userName.string=w.default.correctNameFormat(o.userName.string):o.userName.string=this.reduceNameLenght(o.userName.string),o.userScore.string=A.default.formatNumber(e.score),null!=(n=S.NgcCountryFlagsManager.inst.getFlagSpriteFrame(e.country))&&(o.flag.spriteFrame=n),o.isLocalUser=e.rank===this.localUserData.rank,e.rank===this.localUserData.rank&&(this.localUserInfo=t,o.bg2&&(o.bg2.color=o.bg2.color.fromHEX(this.BG_LOCAL_USER_HEX_COLER)),o.userName.string=this.localUserData.name?this.localUserData.name:"Guest",r=S.NgcCountryFlagsManager.inst.getFlagSpriteFrame(this.localUserData.country),o.flag.node.active=null!=r,null!=r&&(o.flag.spriteFrame=r),o.setNeedToSave(!this.isLocalUserAlreadyLogin),cc.sys.isMobile||this.middleKeeper_PC.getComponent(g.NgcLB_UserInfo).setNeedToSave(!this.isLocalUserAlreadyLogin)),o.avatarUrl=e.avatar,o.avatarUrl&&y.NgcLeaderboardManager.inst.loadSpriteFrameFromURL(o.avatarUrl).then(function(e){o.avatar.spriteFrame=e},function(e){console.log(e)}),o.desktopIcon&&o.mobileIcon&&(o.desktopIcon.active=e.devicetype===R.DeviceType.PC,o.mobileIcon.active=e.devicetype===R.DeviceType.MOBILE),this.rankTheEndOfContent=Math.max(e.rank,this.rankTheEndOfContent),[2])})})},t.prototype.isLocalUserInTop3=function(){return!(!this.localUserData||!this.localUserData.rank)&&this.localUserData.rank<=3},t.prototype.isLocalUserHasNotRank=function(){return null===this.localUserData.rank},t.prototype.isLocalUserInContent=function(){return null!=this.localUserInfo},t.prototype.reduceNameLenght=function(e){return e.length>this.MAX_NAME_LENGTH&&(e=e.slice(0,this.MAX_NAME_LENGTH-3)+"..."),e},t.prototype.reScale=function(){try{var e=Math.min(1,cc.winSize.width/cc.winSize.height*this.DEFAULT_SCREEN_SIZE.y/this.DEFAULT_SCREEN_SIZE.x);this.node.scale*=e/this.currentScale,this.currentScale=e,this.resizeContent()}catch(t){cc.warn(t)}},t.prototype.isLocalUserExisted=function(){return null!==this.localUserInfo},t.prototype.onButtonTopKeeperClicked=function(){this.isMouseDown=!1,null!==this.localUserData.rank&&void 0!==this.localUserData&&(this.scrollView.getComponent(cc.ScrollView).stopAutoScroll(),this.scrollView.getComponent(cc.ScrollView).setContentPosition(cc.v2(this.localUserInfo.x,-this.localUserInfo.y)))},t.prototype.updateScrollViewSizeStatus=function(){var e=this.playerRankingNode.getComponent(cc.Widget);e.top===this.SCROLL_VIEW_BOTTOM_EDGE?this.scrollViewSizeStatus=c.BottomEdge:e.top===this.SCROLL_VIEW_TOP_EDGE?this.scrollViewSizeStatus=c.TopEdge:this.scrollViewSizeStatus=c.Middle},t.prototype.updateItemRenderInScrollView=function(){var e=this;this.scrollContent.getComponent(cc.Layout).updateLayout(),this.scrollContent.children.forEach(function(t){t.opacity=e.isItemInCurrentView(t)?255:0})},t.prototype.onInviteButtonOnClick=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return this.shareDialog&&this.shareDialog.isValid?[2]:O.NgcPlatform.isRunFromApp()?(e=v.NgcBuildConfig.services.NavBar.shareUrl+"&origin=native",O.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_SHARE:{type:"native",link:e}}),"*"),w.default.sharedGame_NavBar=!0,[2]):[4,h.NgcDialogManager.create(_.NgcNavBarShareDialog)];case 1:return t=o.sent(),this.shareDialog=t.node,t.show(),[2]}})})},t.prototype.onLoginButtonOnClick=function(e){var t;return a(this,void 0,void 0,function(){var o,n;return s(this,function(r){switch(r.label){case 0:return"Poki"!==(null===(t=O.NgcPlatform.inst)||void 0===t?void 0:t.getName())?[3,2]:[4,h.NgcDialogManager.create(f.NgcMessageDialog)];case 1:return(o=r.sent()).init("NGG_NOT_AVAILABLE_ON_THIS_WEB"),n=cc.sys.isMobile?20:null,o.show(null,e.target,null,n,.6),[2];case 2:return m.NgcNavBarManager.inst&&m.NgcNavBarManager.inst.logInOnClick(),[2]}})})},t.prototype.onButtonBackClick=function(){B.default.inst.goToStartScreen()},t.prototype.onButtonBackToTopClick=function(){this.scrollView.getComponent(cc.ScrollView).scrollToTop(.3),this.updateScrollViewSizeStatus()},t.prototype.setBackToTopButtonEnable=function(e){var t=this;!0===e&&!0===this.backToTopBtnNode.active||(!0===e&&!1===this.backToTopBtnNode.active&&(this.backToTopBtnNode.active=e,cc.Tween.stopAllByTarget(this.backToTopBtnNode),cc.tween(this.backToTopBtnNode).to(.3,{opacity:255}).start()),!1===e&&!0===this.backToTopBtnNode.active&&255===this.backToTopBtnNode.opacity&&(cc.Tween.stopAllByTarget(this.backToTopBtnNode),cc.tween(this.backToTopBtnNode).to(.3,{opacity:0}).call(function(){t.backToTopBtnNode.active=!1}).start()))},t.prototype.updateLocalUserLoginInfo=function(e){this.topKeeper.getComponent(g.NgcLB_UserInfo).setNeedToSave(!e),this.bottomKeeper.getComponent(g.NgcLB_UserInfo).setNeedToSave(!e),cc.sys.isMobile||(this.topKeeper_PC.getComponent(g.NgcLB_UserInfo).setNeedToSave(!e),this.botKeeper_PC.getComponent(g.NgcLB_UserInfo).setNeedToSave(!e),this.middleKeeper_PC.getComponent(g.NgcLB_UserInfo).setNeedToSave(!e))},t.prototype.updateContentFacebookProfile=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(){return E.NgcSocial.inst?(e=this.mouseEventSensorNode.parent,t=this.localUserData.avatar=E.NgcSocial.inst.getProfilePictureUrl(),y.NgcLeaderboardManager.inst.loadSpriteFrameFromURL(t).then(function(t){e.getComponentsInChildren(g.NgcLB_UserInfo).forEach(function(e){e.isLocalUser&&(e.avatar.spriteFrame=t,e.userName.string=w.default.localUserName)})},function(e){console.log(e)}),[2]):[2]})})},t.prototype.resetAvatarTop3=function(){this.firstRank.getComponent(g.NgcLB_UserInfo).avatar.spriteFrame=this.profile_background_blank_top,this.secondRank.getComponent(g.NgcLB_UserInfo).avatar.spriteFrame=this.profile_background_blank_top,this.thirdRank.getComponent(g.NgcLB_UserInfo).avatar.spriteFrame=this.profile_background_blank_top},t.prototype.setLoginStatus=function(e){if(O.NgcPlatform.isRunFromApp()){if(this.arrowPointingNode.opacity=0,!w.default.isUserLogined())return this.isLocalUserAlreadyLogin=!1,this.loginNode.active=!1,this.inviteNode.active=!1,void this.updateLocalUserLoginInfo(this.isLocalUserAlreadyLogin);e=!0}this.isLocalUserAlreadyLogin=e,this.loginNode.active=!this.isLocalUserAlreadyLogin,this.inviteNode.active=this.isLocalUserAlreadyLogin,this.updateLocalUserLoginInfo(this.isLocalUserAlreadyLogin)},t.prototype.setBlockInput=function(e){this.blockInput.active=e,this.loadingTop.active=e},t.prototype.loadTop3UserAvatar=function(){return a(this,void 0,void 0,function(){var e,t,o,n,r;return s(this,function(i){switch(i.label){case 0:e=[this.firstRank.getComponent(g.NgcLB_UserInfo),this.secondRank.getComponent(g.NgcLB_UserInfo),this.thirdRank.getComponent(g.NgcLB_UserInfo)],t=function(e){return s(this,function(t){switch(t.label){case 0:return e.avatarUrl?[4,new Promise(function(t){y.NgcLeaderboardManager.inst.loadSpriteFrameFromURL(e.avatarUrl).then(function(t){e.avatar.spriteFrame=t},function(e){console.log(e)}).finally(function(){t()})})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},o=0,n=e,i.label=1;case 1:return o<n.length?(r=n[o],[5,t(r)]):[3,4];case 2:i.sent(),i.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.checkArrowPointLoginIconDisplay=function(){this.isLocalUserAlreadyLogin?this.arrowPointingNode.active=!1:this.arrowPointingNode.active=this.isWithoutContentData()||1===this.listTopData.length&&1===this.localUserData.rank},t.prototype.updateKeeperPC=function(){function e(e,t){e.rankNumber&&t.rankNumber.string!==e.rankNumber.string&&(t.rankNumber.string=e.rankNumber.string),t.avatar.spriteFrame!==e.avatar.spriteFrame&&(t.avatar.spriteFrame=e.avatar.spriteFrame),t.flag.spriteFrame!==e.flag.spriteFrame&&(t.flag.spriteFrame=e.flag.spriteFrame),t.userName.string!==e.userName.string&&(t.userName.string=e.userName.string,t.userNameNeedToSave.string=t.userName.string),t.userScore.string!==e.userScore.string&&(t.userScore.string=e.userScore.string),t.desktopIcon.active!==e.desktopIcon.active&&(t.desktopIcon.active=e.desktopIcon.active),t.mobileIcon.active!==e.mobileIcon.active&&(t.mobileIcon.active=e.mobileIcon.active)}this.topKeeper_PC.opacity!==this.topKeeper.opacity&&(this.topKeeper_PC.opacity=this.topKeeper.opacity),this.topKeeper_PC.opacity>0&&(e(this.topKeeper.getComponent(g.NgcLB_UserInfo),this.topKeeper_PC.getComponent(g.NgcLB_UserInfo)),d.Utils.setWorldPos(this.topKeeper_PC,d.Utils.getWorldPos(this.topKeeper))),this.botKeeper_PC.opacity!==this.bottomKeeper.opacity&&(this.botKeeper_PC.opacity=this.bottomKeeper.opacity),this.botKeeper_PC.opacity>0&&(e(this.bottomKeeper.getComponent(g.NgcLB_UserInfo),this.botKeeper_PC.getComponent(g.NgcLB_UserInfo)),d.Utils.setWorldPos(this.botKeeper_PC,d.Utils.getWorldPos(this.bottomKeeper))),0!==this.topKeeper.opacity||0!==this.bottomKeeper.opacity||this.isLocalUserInTop3()||this.isWithoutContentData()?this.middleKeeper_PC.opacity=0:this.middleKeeper_PC.opacity=255,this.middleKeeper_PC.opacity>0&&this.localUserInfo&&(e(this.localUserInfo.getComponent(g.NgcLB_UserInfo),this.middleKeeper_PC.getComponent(g.NgcLB_UserInfo)),d.Utils.setWorldPos(this.middleKeeper_PC,d.Utils.getWorldPos(this.localUserInfo)))},t.prototype.resizeContent=function(){},i([L(cc.ToggleContainer)],t.prototype,"timeFilterTogglerContainer",void 0),i([L(cc.Node)],t.prototype,"dailyButtonChecked",void 0),i([L(cc.Node)],t.prototype,"dailyButtonUnchecked",void 0),i([L(cc.Node)],t.prototype,"weeklyButtonChecked",void 0),i([L(cc.Node)],t.prototype,"weeklyButtonUnchecked",void 0),i([L(cc.Node)],t.prototype,"allTimeButtonChecked",void 0),i([L(cc.Node)],t.prototype,"allTimeButtonUnchecked",void 0),i([L(cc.Node)],t.prototype,"friendsButtonChecked",void 0),i([L(cc.Node)],t.prototype,"friendsButtonUnchecked",void 0),i([L(cc.Node)],t.prototype,"countryButtonChecked",void 0),i([L(cc.Node)],t.prototype,"countryButtonUnchecked",void 0),i([L(cc.Node)],t.prototype,"worldwideButtonChecked",void 0),i([L(cc.Node)],t.prototype,"worldwideButtonUnchecked",void 0),i([L(cc.Node)],t.prototype,"firstRank",void 0),i([L(cc.Node)],t.prototype,"firstRankHighlight",void 0),i([L(cc.Node)],t.prototype,"secondRank",void 0),i([L(cc.Node)],t.prototype,"secondRankHighlight",void 0),i([L(cc.Node)],t.prototype,"thirdRank",void 0),i([L(cc.Node)],t.prototype,"thirdRankHighlight",void 0),i([L(cc.Node)],t.prototype,"scrollView",void 0),i([L(cc.Node)],t.prototype,"scrollContent",void 0),i([L(cc.Node)],t.prototype,"topKeeper",void 0),i([L(cc.Node)],t.prototype,"bottomKeeper",void 0),i([L(cc.Node)],t.prototype,"top3Container",void 0),i([L(cc.Prefab)],t.prototype,"lb_userInfoPrefab",void 0),i([L(cc.Prefab)],t.prototype,"lb_infoBoardPrefab",void 0),i([L(cc.Prefab)],t.prototype,"lb_loadingBoardPrefab",void 0),i([L(cc.Node)],t.prototype,"mouseEventSensorNode",void 0),i([L(cc.Node)],t.prototype,"mouseEventSensorCheckSwipeNode",void 0),i([L(cc.Node)],t.prototype,"adsBannerNode",void 0),i([L(cc.Node)],t.prototype,"backToTopBtnNode",void 0),i([L(cc.Node)],t.prototype,"loginNode",void 0),i([L(cc.Node)],t.prototype,"inviteNode",void 0),i([L(cc.Node)],t.prototype,"arrowPointingNode",void 0),i([L(cc.SpriteFrame)],t.prototype,"profile_background_1st",void 0),i([L(cc.SpriteFrame)],t.prototype,"profile_background_2nd",void 0),i([L(cc.SpriteFrame)],t.prototype,"profile_background_3rd",void 0),i([L(cc.SpriteFrame)],t.prototype,"profile_background_blank_top",void 0),i([L(cc.SpriteFrame)],t.prototype,"profile_background_blank",void 0),i([L(cc.Node)],t.prototype,"blockInput",void 0),i([L(cc.Node)],t.prototype,"loadingTop",void 0),i([L(cc.Widget)],t.prototype,"backBtn",void 0),i([L(cc.Node)],t.prototype,"topKeeper_PC",void 0),i([L(cc.Node)],t.prototype,"botKeeper_PC",void 0),i([L(cc.Node)],t.prototype,"middleKeeper_PC",void 0),i([L(cc.Node)],t.prototype,"playerRankingNode",void 0),i([M],t)}(P.default);o.NgcLeaderboardUI=F,cc._RF.pop()},{"../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LB_UserInfo":"LB_UserInfo","../../../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager":"LeaderBoardManager","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarShareDialog":"NavBarShareDialog","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../../../NanoGameCore/GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../../../NanoGameCore/Services/Leaderboard/Leaderboard":"Leaderboard","../../../NanoGameCore/Services/Leaderboard/Leaderboard_impl_NanoSrv":"Leaderboard_impl_NanoSrv","../../../NanoGameCore/Services/Platform/Platform":"Platform","../../../NanoGameCore/Services/Social/Social":"Social","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../../HSAUtils":"HSAUtils","../../ScreenManager":"ScreenManager"}],Leaderboard_impl_NanoSrv:[function(e,t,o){"use strict";cc._RF.push(t,"04673YLQ9BNtKRQUoslSPMB","Leaderboard_impl_NanoSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.DeviceType=void 0;var c=e("../../GameFramework/Scripts/BuildConfig"),l=e("../../GameFramework/Scripts/CountryFlagsManager"),u=e("../../SDK/Nano/NanoSrv"),p=e("./Leaderboard"),d=cc._decorator,f=d.ccclass;d.property,o.DeviceType={MOBILE:"Mobile",PC:"PC"};var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLogin=function(e){e(null,"OK")},t.prototype._preInit=function(){return new Promise(function(e){e("Leaderboard_impl_Nanosrv pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("Leaderboard_impl_Nanosrv initialized")})},t.prototype._preCacheData=function(e){this._loadData(e)},t.prototype._getLocalPlayerRank=function(e){return a(this,void 0,void 0,function(){var t,o,n=this;return s(this,function(r){switch(r.label){case 0:return t={time:e.timeFilter,population:e.populationFilter,reverseOrder:e.order==p.SORT_ORDER.DESC,country:l.NgcCountryFlagsManager.localCountry},o=null,e.timeSent=Date.now(),e.status=p.RequestStatus.Waiting,[4,new Promise(function(e,n){u.default.inst.serviceGet("/leaderboard/info",t,function(t,r){if(t)return o=t,void n();o=JSON.parse(r),e()})}).then(function(){e.status=p.RequestStatus.Responded,e.timeGotData=Date.now(),e.rank=o}).catch(function(){cc.js.array.remove(n.requestLocalRanks,e)})];case 1:return r.sent(),o&&1==o.status?[2,e.rank]:[2,null]}})})},t.prototype._getPlayerRank=function(e,t){return a(this,void 0,void 0,function(){var o,n,r;return s(this,function(i){switch(i.label){case 0:return o="/leaderboard/"+c.NgcBuildConfig.platformGameID+"/"+e+"/info",n={time:t.timeFilter,population:t.populationFilter,country:l.NgcCountryFlagsManager.localCountry},r=null,t.timeSent=Date.now(),t.status=p.RequestStatus.Waiting,[4,new Promise(function(e,t){u.default.inst.serviceGet(o,n,function(o,n){if(o)return r=o,void t();r=JSON.parse(n),e()})}).then(function(){t.status=p.RequestStatus.Responded,t.timeGotData=Date.now(),t.rank=r.data}).catch(function(){})];case 1:return i.sent(),r&&1==r.status?[2,t.rank]:[2,null]}})})},t.prototype._loadData=function(e){return a(this,void 0,void 0,function(){var t,o,n=this;return s(this,function(r){switch(r.label){case 0:return t={offset:e.position,count:e.numRecords,time:e.timeFilter,population:e.populationFilter,reverseOrder:e.order==p.SORT_ORDER.DESC,country:l.NgcCountryFlagsManager.localCountry,playerid:u.default.inst.userID},o=null,e.timeSent=Date.now(),e.status=p.RequestStatus.Waiting,[4,new Promise(function(e,n){u.default.inst.serviceGet("/leaderboard/top",t,function(t,r){if(t)return o=t,void n();o=JSON.parse(r),e()})}).then(function(){e.status=p.RequestStatus.Responded,e.timeGotData=Date.now(),e.result=o}).catch(function(){cc.js.array.remove(n.requestLeaderboards,e)})];case 1:return r.sent(),[2,e.result]}})})},t.prototype._uploadScore=function(e,t){return void 0===e&&(e=0),void 0===t&&(t="GT"),a(this,void 0,void 0,function(){var n,r;return s(this,function(i){switch(i.label){case 0:return n={score:e,option:t,country:l.NgcCountryFlagsManager.localCountry,deviceType:cc.sys.isMobile?o.DeviceType.MOBILE:o.DeviceType.PC},r=null,[4,new Promise(function(e,t){u.default.inst.servicePost("/leaderboard/updatescore",JSON.stringify(n),function(o,n){if(o)return r=o,void t();r=JSON.parse(n),e()})})];case 1:return i.sent(),[2,r]}})})},t.prototype._uploadLeaugeScore=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n="GT"),a(this,void 0,void 0,function(){var r,i;return s(this,function(a){switch(a.label){case 0:return r={score:t,name:e,option:n,deviceType:cc.sys.isMobile?o.DeviceType.MOBILE:o.DeviceType.PC},i=null,[4,new Promise(function(e,t){u.default.inst.servicePost("/leaderboard/updateleaguescore",JSON.stringify(r),function(o,n){if(o)return i=o,void t();i=JSON.parse(n),e()})})];case 1:return a.sent(),[2,i]}})})},t.prototype._groupAPIRequest=function(e){return a(this,void 0,void 0,function(){var t,o;return s(this,function(n){switch(n.label){case 0:return t={listApi:e},o=null,[4,new Promise(function(e,n){u.default.inst.servicePost("/transact",JSON.stringify(t),function(t,r){if(t)return o=t,void n();o=JSON.parse(r),e()})})];case 1:return n.sent(),[2,o]}})})},t.prototype.update=function(){},i([f],t)}(p.NgcLeaderboard);o.default=h,cc._RF.pop()},{"../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../SDK/Nano/NanoSrv":"NanoSrv","./Leaderboard":"Leaderboard"}],Leaderboard:[function(e,t,o){"use strict";cc._RF.push(t,"dea9dYR8rpAvIFZN/AVg3LE","Leaderboard");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLeaderboard=o.RequestLocalRank=o.RequestLeaderboard=o.SORT_ORDER=o.UpdateMode=o.RequestStatus=o.PopulationFilterType=o.TimeFilterType=void 0;var s,c,l=e("../Service"),u=cc._decorator;u.ccclass,u.property,o.TimeFilterType={Daily:"daily",Weekly:"weekly",Monthly:"monthly",AllTime:"alltime"},o.PopulationFilterType={Friends:"friends",Country:"country",Worldwide:"worldwide"},function(e){e[e.Waiting=0]="Waiting",e[e.Responded=1]="Responded"}(s=o.RequestStatus||(o.RequestStatus={})),function(e){e[e.CHANGE=0]="CHANGE",e[e.LT=1]="LT",e[e.GT=2]="GT"}(o.UpdateMode||(o.UpdateMode={})),function(e){e[e.ASC=0]="ASC",e[e.DESC=1]="DESC"}(c=o.SORT_ORDER||(o.SORT_ORDER={}));var p=function(e,t,n,r,i){void 0===e&&(e=o.TimeFilterType.Daily),void 0===t&&(t=o.PopulationFilterType.Friends),void 0===n&&(n=1),void 0===r&&(r=20),void 0===i&&(i=c.DESC),this.timeFilter=o.TimeFilterType.Daily,this.populationFilter=o.PopulationFilterType.Friends,this.position=null,this.numRecords=20,this.timeSent=0,this.timeGotData=0,this.result=null,this.status=null,this.order=c.DESC,this.timeFilter=e,this.populationFilter=t,this.position=n,this.numRecords=r,this.order=i};o.RequestLeaderboard=p;var d=function(e,t,n){void 0===e&&(e=o.TimeFilterType.Daily),void 0===t&&(t=o.PopulationFilterType.Friends),void 0===n&&(n=c.DESC),this.timeFilter=o.TimeFilterType.Daily,this.populationFilter=o.PopulationFilterType.Friends,this.rank=null,this.timeSent=0,this.timeGotData=0,this.status=null,this.order=c.DESC,this.timeFilter=e,this.populationFilter=t,this.order=n};o.RequestLocalRank=d;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.requestLeaderboards=[],t.maxTimeForValidCacheData=60,t.timeTimeOut=10,t.requestLocalRanks=[],t.timeUpdateLocalRank=0,t.defaultTimeFilter=o.TimeFilterType.Daily,t.defaultPopulationFilter=o.PopulationFilterType.Friends,t.defaultPosition=1,t.defaultNumRecords=20,t}return r(t,e),t.prototype.getName=function(){return"Leaderboard"},t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){return this._init(e)},t.prototype.preCacheData=function(e){void 0===e&&(e=new p),this.requestLbIsAlreadyExist(e)||(this.requestLeaderboards.push(e),this._preCacheData(e),this.getLocalPlayerRank(e.timeFilter,e.populationFilter,e.order))},t.prototype.preCacheAfterGotRespone=function(e){var t=new p;t.numRecords=e.numRecords,t.populationFilter=e.populationFilter,t.timeFilter=e.timeFilter,t.position=e.position+e.numRecords,t.order=e.order,this.preCacheData(t);var o=new p;o.numRecords=e.numRecords,o.populationFilter=e.populationFilter,o.timeFilter=e.timeFilter,o.position=e.position-e.numRecords,o.order=e.order,o.position>=0&&this.preCacheData(o)},t.prototype.loadData=function(e){return void 0===e&&(e=new p),i(this,void 0,void 0,function(){var t,o;return a(this,function(n){switch(n.label){case 0:return(t=this.requestLbIsAlreadyExist(e))?t.status!=s.Responded?[3,1]:(this.preCacheAfterGotRespone(t),[2,t.result]):[3,4];case 1:return[4,this.timeout(100)];case 2:return n.sent(),[4,this.loadData(e)];case 3:return[2,n.sent()];case 4:return this.requestLeaderboards.push(e),[4,this._loadData(e)];case 5:return o=n.sent(),this.preCacheAfterGotRespone(e),[2,o]}})})},t.prototype.getLocalPlayerRank=function(e,t,o){return void 0===o&&(o=c.DESC),i(this,void 0,void 0,function(){var n;return a(this,function(r){switch(r.label){case 0:return n=new d(e,t,o),this.requestlocalRankIsAlreadyExist(n)?(n=this.requestlocalRankIsAlreadyExist(n)).status!=s.Responded?[3,1]:[2,n.rank]:[3,4];case 1:return[4,this.timeout(100)];case 2:return r.sent(),[4,this.getLocalPlayerRank(e,t,o)];case 3:return[2,r.sent()];case 4:return this.requestLocalRanks.push(n),[4,this._getLocalPlayerRank(n)];case 5:return[2,r.sent()]}})})},t.prototype.getPlayerRank=function(e,t,o,n){return void 0===n&&(n=c.DESC),i(this,void 0,void 0,function(){var r;return a(this,function(i){switch(i.label){case 0:return r=new d(t,o,n),[4,this._getPlayerRank(e,r)];case 1:return[2,i.sent()]}})})},t.prototype.uploadScore=function(e,t){return void 0===e&&(e=0),void 0===t&&(t="GT"),i(this,void 0,void 0,function(){return a(this,function(o){switch(o.label){case 0:return this.clearCacheRequestData(),[4,this._uploadScore(e,t)];case 1:return[2,o.sent()]}})})},t.prototype.uploadLeaugeScore=function(e,t,o){return void 0===o&&(o="GT"),i(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return this.clearCacheRequestData(),[4,this._uploadLeaugeScore(e,t,o)];case 1:return[2,n.sent()]}})})},t.prototype.groupAPIRequest=function(e){return i(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.clearCacheRequestData(),[4,this._groupAPIRequest(e)];case 1:return[2,t.sent()]}})})},t.prototype.requestLbIsAlreadyExist=function(e){var t=this;void 0===e&&(e=new p);var o=null;return this.requestLeaderboards.forEach(function(n){n.timeFilter!=e.timeFilter||n.populationFilter!=e.populationFilter||n.position!=e.position||n.order!=e.order||n.numRecords!=e.numRecords||(n.status==s.Responded&&Date.now()-n.timeGotData>1e3*t.maxTimeForValidCacheData?cc.js.array.remove(t.requestLeaderboards,n):o=n)}),o},t.prototype.requestlocalRankIsAlreadyExist=function(e){var t=this,o=null;return this.requestLocalRanks.forEach(function(n){n.timeFilter!=e.timeFilter||n.populationFilter!=e.populationFilter||(n.status==s.Responded&&Date.now()-n.timeGotData>1e3*t.maxTimeForValidCacheData?cc.js.array.remove(t.requestLocalRanks,n):o=n)}),o},t.prototype.timeout=function(e){return new Promise(function(t){return setTimeout(t,e)})},t.prototype.start=function(){this.preCacheData()},t.prototype.getTopLeaderboard=function(e,t,n,r){return void 0===e&&(e=o.TimeFilterType.Daily),void 0===t&&(t=o.PopulationFilterType.Friends),void 0===r&&(r=20),i(this,void 0,void 0,function(){var o;return a(this,function(i){switch(i.label){case 0:return this.cacheTopLeaderboardAllFilter(r,n),o=new p(e,t,0,r,n),[4,this.loadData(o)];case 1:return[2,i.sent()]}})})},t.prototype.getNearLocalPlayer=function(e,t,n,r){return void 0===e&&(e=o.TimeFilterType.Daily),void 0===t&&(t=o.PopulationFilterType.Friends),void 0===r&&(r=10),i(this,void 0,void 0,function(){var o,i;return a(this,function(a){switch(a.label){case 0:return[4,this.getLocalPlayerRank(e,t,n)];case 1:return o=a.sent(),i=new p(e,t,Math.max(1,o-r),2*r,n),[4,this.loadData(i)];case 2:return[2,a.sent()]}})})},t.prototype.cacheTopLeaderboardAllFilter=function(e,t){for(var n in void 0===t&&(t=c.DESC),o.TimeFilterType)for(var r in o.PopulationFilterType){var i=new p(o.TimeFilterType[n],o.PopulationFilterType[r],0,e,t);this.loadData(i)}},t.prototype.clearCacheRequestData=function(){this.requestLeaderboards=[],this.requestLocalRanks=[]},t.srvInstances=[],t.inst=null,t}(l.NgcService);o.NgcLeaderboard=f,cc._RF.pop()},{"../Service":"Service"}],LevelGridLine:[function(e,t,o){"use strict";cc._RF.push(t,"a9f44F7byRAtbQtCetdjKiK","LevelGridLine");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),s=e("../GameCamera"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.coordinateLabel=null,t.lineSprite=null,t.isVertical=!1,t}return r(t,e),t.prototype.start=function(){},t.prototype.init=function(e,t){this.coordinateLabel.string=e.toString(),this.isVertical=t,t?this.node.setPosition(e,0,0):(this.node.setPosition(0,e,0),this.lineSprite.node.setRotation(90))},t.prototype.update=function(){if(a.NgcBuildConfig.enabledDebugMode){if(!s.default.inst)return;var e=s.default.inst.getWorldPosition();this.isVertical?this.coordinateLabel.node.setPosition(0,e.y,0):this.coordinateLabel.node.setPosition(e.x,0,0)}},i([u(cc.Label)],t.prototype,"coordinateLabel",void 0),i([u(cc.Sprite)],t.prototype,"lineSprite",void 0),i([u(cc.Sprite)],t.prototype,"isVertical",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../GameCamera":"GameCamera"}],LevelGrid:[function(e,t,o){"use strict";cc._RF.push(t,"a1cbeO/YWJC1IqnJ93npiPy","LevelGrid");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./LevelGridLine"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numOfLine=100,t.lineDistance=100,t.linePrefab=null,t}return r(t,e),t.prototype.start=function(){},t.prototype.init=function(){if(null!==this.linePrefab)for(var e=0;e<this.numOfLine;e++){var t=cc.instantiate(this.linePrefab);t.parent=this.node;var o=t.getComponent(a.default);o&&o.init(e*this.lineDistance,!0);var n=cc.instantiate(this.linePrefab);n.parent=this.node;var r=n.getComponent(a.default);r&&r.init(e*this.lineDistance,!1)}},i([l],t.prototype,"numOfLine",void 0),i([l],t.prototype,"lineDistance",void 0),i([l(cc.Prefab)],t.prototype,"linePrefab",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./LevelGridLine":"LevelGridLine"}],LiveReskin:[function(e,t,o){"use strict";cc._RF.push(t,"e6c76GxRuRIZYlazvlAvN3R","LiveReskin");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Services/Platform/Platform"),s=e("./NgcLiveReskin"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){a.NgcPlatform.isOfflineMode()||this.applyReskinImages()},t.prototype.applyReskinImages=function(){this.node.getComponentsInChildren(cc.Sprite).forEach(function(e){var t=s.default.getReskinSpriteFrame(e.spriteFrame);t&&(e.spriteFrame=t)})},t.prototype.applyReskinSpines=function(){this.node.getComponentsInChildren(sp.Skeleton).forEach(function(e){var t,o=null===(t=e.skeletonData)||void 0===t?void 0:t._uuid;o&&s.default.getAssetByUUID(o)})},i([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../../Services/Platform/Platform":"Platform","./NgcLiveReskin":"NgcLiveReskin"}],LoadingAdDialog:[function(e,t,o){"use strict";cc._RF.push(t,"08b95MTzqZPf5kTYZp14c6R","LoadingAdDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLoadingAdDialog=void 0;var a=e("../DialogBase"),s=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.init=function(){this.node.zIndex=cc.macro.MAX_ZINDEX},t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.hide=function(){e.prototype.hide.call(this)},t.dialogType="NgcLoadingAdDialog",t.urlPrefab="LoadingAdDialog",t.bundleName="02_dialog",i([s],t)}(a.NgcDialogBase);o.NgcLoadingAdDialog=c,cc._RF.pop()},{"../DialogBase":"DialogBase"}],LoadingScene:[function(e,t,o){"use strict";cc._RF.push(t,"94075lgEzJGna0vW5bEqDpv","LoadingScene");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../NanoGameCore/CrossFeatures/CrownRoad/Script/CrownRoadManager"),l=e("../../NanoGameCore/GameFramework/Scripts/Screens/NgcLoadingScene"),u=e("../TrackingManager"),p=e("../TuningData"),d=e("../Performance/PerformanceMonitor"),f=e("../Performance/OffFrameTasksMgr"),h=e("../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessageNetworkDisconnect"),g=e("../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),y=cc._decorator,m=y.ccclass,_=(y.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.initOptionalCrossFeatures=function(){c.default.init()},t.prototype.initMandatoryCrossFeatures=function(){},t.prototype.basicDialogs=function(){return[{type:h.default.dialogType,url:h.default.urlPrefab,bundle:h.default.bundleName}]},t.prototype.start=function(){return a(this,void 0,void 0,function(){return s(this,function(){return e.prototype.start.call(this),g.NgcDialogManager.preloadBundle(["02_dialog"]),p.default.inst,u.default.getInst(),[2]})})},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.scheduleOnce(function(){d.default.inst.setTargetFPS(60),f.default.inst})},t.prototype.preloadCustomAssets=function(){},i([m],t)}(l.default));o.default=_,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/CrownRoad/Script/CrownRoadManager":"CrownRoadManager","../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessageNetworkDisconnect":"TechMessageNetworkDisconnect","../../NanoGameCore/GameFramework/Scripts/Screens/NgcLoadingScene":"NgcLoadingScene","../Performance/OffFrameTasksMgr":"OffFrameTasksMgr","../Performance/PerformanceMonitor":"PerformanceMonitor","../TrackingManager":"TrackingManager","../TuningData":"TuningData"}],LocalizationDebugPanel:[function(e,t,o){"use strict";cc._RF.push(t,"73441fPH+dLfqLiRNePy89d","LocalizationDebugPanel");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./LocalizedManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isShowTextKey=!1,t._currentLangIndex=0,t.showKeyCheckMark=null,t}return r(t,e),t.prototype.start=function(){},t.prototype.onShowTextKey=function(){a.NgcLocalizedManager.isShowTextKey=this.showKeyCheckMark.isChecked},t.prototype.onNextLang=function(){cc.log("onNextLang")},t.prototype.onPrevLang=function(){cc.log("onPrevLang")},i([l(cc.Toggle)],t.prototype,"showKeyCheckMark",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./LocalizedManager":"LocalizedManager"}],LocalizedManager:[function(e,t,o){"use strict";cc._RF.push(t,"c829a7UEexHPbreFD0pnlXS","LocalizedManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLocalizedManager=void 0;var a=e("../../../../globals"),s=e("../BuildConfig"),c=e("../CONSTANTS"),l=e("../NgcLocalStorage"),u=e("../NgcUserInfo"),p=e("./LabelLocalized"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.languageConfig=null,t.ngcLocalizationText=null,t.gameLocalizationText=null,t.showDebugLoc=!1,t.debugPanel=null,t}var o;return r(t,e),o=t,Object.defineProperty(t,"isShowTextKey",{set:function(e){o._isShowTextKey!==e&&(o._isShowTextKey=e,this.updateLanguage())},enumerable:!1,configurable:!0}),t.prototype.getNativeLang=function(){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getNativeLang","()V")},t.prototype.receivedNativeLang=function(e){o.nativeLang=e,this.initGameLang(),this.updateFromText(this.ngcLocalizationText),this.updateFromText(this.gameLocalizationText),o.setLanguage(o.curLang)},t.prototype.initGameLang=function(){var e=o.nativeLang||u.default.curLanguage,t=!1;o.langList.forEach(function(n){n.enabled&&(n.code===e||n.extra_code&&-1!=n.extra_code.indexOf(e))&&(o.curLang=n.code,t=!0)}),t||(o.curLang=o.defaultLang)},t.prototype.onLoad=function(){o.defaultLang=s.NgcBuildConfig.defaultLanguage||c.NGC_CONSTANTS.LOCALIZATION_LANG.ENGLISH,this.isAPK=!cc.sys.isBrowser&&cc.sys.os===cc.sys.OS_ANDROID,o.inst&&console.error("More than one NgcLocalizedManager instance"),o.inst=this,o.jsonData=this.languageConfig.json.language_list,o.langList=this.languageConfig.json.language_list,this.isAPK?this.getNativeLang():(this.initGameLang(),this.updateFromText(this.ngcLocalizationText),this.updateFromText(this.gameLocalizationText),o.setLanguage(o.curLang)),this.showDebugLoc&&(cc.instantiate(this.debugPanel).parent=cc.find("Canvas"))},t.setLanguage=function(e){0===e.length||e==o.curLang&&!this.firstTimeInit||(this.firstTimeInit=!1,o.curLang=e,this.curLangDefaultFont=this.curData.default_font,l.default.setKey("GAME_LANGUAGE",e,!1),this.updateLanguage())},t.t=function(e){var t={key:e,text:""};if(this._isShowTextKey)return t.text=e,t;var n=o.tableText[e]||{},r=n[o.curLang]||n[this.defaultLang]||e;return r=r.replace(/\\n/gi,"\n"),t.text=r,t},t.getSpriteFrame=function(e){return this.polymorphic[e]},t.updateLanguage=function(){var e=[];this.labelLocalizeds.forEach(function(t){null!==t.node&&(e.push(t),t.textKey&&t.updateString())}),this.labelLocalizeds=e,this.spriteLocalizeds.forEach(function(e){e.spriteFrameKey&&(e.spriteFrameKey=e.spriteFrameKey)})},t.prototype.updateFromText=function(e){if(!e)return!1;for(var t=e.json,n=0,r=Object.entries(t);n<r.length;n++){var i=r[n],a=i[0],s=i[1];o.tableText[a]=s}},t.setTextKey=function(e,t,o,n){void 0===o&&(o=null),void 0===n&&(n=null);var r=e.node.getComponent(p.NgcLabelLocalized);r&&(r.textKey=t,n&&Array.isArray(n)&&r.setExtraComponents(n),o&&Array.isArray(o)&&r.setExtraParams(o),r.updateString())},t.curLang=c.NGC_CONSTANTS.LOCALIZATION_LANG.ENGLISH,t.defaultLang=c.NGC_CONSTANTS.LOCALIZATION_LANG.ENGLISH,t.polymorphic={},t.jsonData=[],t.langList=[],t.curData={},t.curLangDefaultFont=null,t.tableText={},t.nativeLang="",t.inst=null,t._isShowTextKey=!1,t.firstTimeInit=!0,t.labelLocalizeds=[],t.spriteLocalizeds=[],i([h(cc.JsonAsset)],t.prototype,"languageConfig",void 0),i([h(cc.JsonAsset)],t.prototype,"ngcLocalizationText",void 0),i([h(cc.JsonAsset)],t.prototype,"gameLocalizationText",void 0),i([h],t.prototype,"showDebugLoc",void 0),i([h(cc.Prefab)],t.prototype,"debugPanel",void 0),o=i([f],t)}(cc.Component);o.NgcLocalizedManager=g,a.default.NgcLocalizedManager=g,cc._RF.pop()},{"../../../../globals":"globals","../BuildConfig":"BuildConfig","../CONSTANTS":"CONSTANTS","../NgcLocalStorage":"NgcLocalStorage","../NgcUserInfo":"NgcUserInfo","./LabelLocalized":"LabelLocalized"}],LocalizedRichText:[function(e,t,o){"use strict";cc._RF.push(t,"73b89Fk4ENCgLWoqUUiJwBX","LocalizedRichText");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../GameFramework/Scripts/Localized/LocalizedManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=s.menu,p=function(){function e(){this.extraIdentifier="",this.extraParam="",this.extraKey="",this.color=null,this.fontSize=0,this.bold=!1,this.italic=!1,this.underlined=!1,this.img=""}return i([l(cc.String)],e.prototype,"extraIdentifier",void 0),i([l(cc.String)],e.prototype,"extraParam",void 0),i([l(cc.String)],e.prototype,"extraKey",void 0),i([l(cc.Color)],e.prototype,"color",void 0),i([l(cc.Integer)],e.prototype,"fontSize",void 0),i([l(cc.Boolean)],e.prototype,"bold",void 0),i([l(cc.Boolean)],e.prototype,"italic",void 0),i([l(cc.Boolean)],e.prototype,"underlined",void 0),i([l(cc.String)],e.prototype,"img",void 0),i([c("RichTextCustomStlyeParam")],e)}(),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textKey="",t.extraParamStyles=[],t}return r(t,e),t.prototype.onLoad=function(){a.NgcLocalizedManager.labelLocalizeds.push(this)},t.prototype.start=function(){this.updateString()},t.prototype.applyExtraParams=function(){var e=this;this.extraParamStyles&&this.extraParamStyles.forEach(function(t){var o=t.extraIdentifier,n=a.NgcLocalizedManager.t(t.extraKey).text||t.extraParam||"";n&&t&&(t.color&&(n="<color=#"+t.color.toHEX("#rrggbb")+">"+n+"</color>"),t.bold&&(n="<b>"+n+"</b>"),t.italic&&(n="<i>"+n+"</i>"),t.underlined&&(n="<u>"+n+"</u>"),t.fontSize&&(n="<size="+t.fontSize+">"+n+"</size>"),t.img&&(n="<img='"+t.img+"'>"+n+"</img>"),e.string=e.string.replace(o,n))})},t.prototype.updateString=function(){if(this.textKey){var e=a.NgcLocalizedManager.t(this.textKey);""!=e.text&&(this.string=e.text,this.applyExtraParams())}},t.prototype.setLocalizedText=function(e,t){this.textKey=e,this.extraParamStyles=t,this.updateString()},i([l],t.prototype,"textKey",void 0),i([l({type:[p]})],t.prototype,"extraParamStyles",void 0),i([c,u("NGC/LocalizedRichText")],t)}(cc.RichText);o.default=d,cc._RF.pop()},{"../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager"}],MainMenuBG:[function(e,t,o){"use strict";cc._RF.push(t,"00c5aTsDC9Nfrc/S38ExR1b","MainMenuBG");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftBGNode=null,t.rightBGNode=null,t.leftBGPCNode=null,t.rightBGPCNode=null,t}return r(t,e),t.prototype.onLoad=function(){cc.view.on("canvas-resize",this.onResized.bind(this))},t.prototype.start=function(){this.onResized()},t.prototype.onResized=function(){cc.view.getCanvasSize().width/cc.view.getCanvasSize().height>1.7?this.leftBGNode.active&&(cc.log("MainMenuBG - show for PC!"),this.leftBGPCNode.active=!0,this.rightBGPCNode.active=!0,this.leftBGNode.active=!1,this.rightBGNode.active=!1):this.leftBGPCNode.active&&(cc.log("MainMenuBG - show for mobile!"),this.leftBGPCNode.active=!1,this.rightBGPCNode.active=!1,this.leftBGNode.active=!0,this.rightBGNode.active=!0)},i([c(cc.Node)],t.prototype,"leftBGNode",void 0),i([c(cc.Node)],t.prototype,"rightBGNode",void 0),i([c(cc.Node)],t.prototype,"leftBGPCNode",void 0),i([c(cc.Node)],t.prototype,"rightBGPCNode",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],MainScreen:[function(e,t,o){"use strict";cc._RF.push(t,"50698joY65CypX0rEc3S0a5","MainScreen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.StatIndex=void 0;var a,s=e("../../globals"),c=e("../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),l=e("../Main"),u=e("../Performance/OffFrameTasksMgr"),p=e("../ScreenBase"),d=e("../Sound/SoundResource"),f=e("../SoundManager"),h=e("../UserInfo"),g=e("../Utils/ConstConfig"),y=cc._decorator,m=y.ccclass,_=y.property;(function(e){e[e.Speed=0]="Speed",e[e.DashRange=1]="DashRange",e[e.DashRate=2]="DashRate"})(a=o.StatIndex||(o.StatIndex={}));var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainSharkNode=null,t.sharkName=null,t.sharkNameBG=null,t.sharkIconType=null,t.infoType=null,t.sharkStats=null,t.nameBGList=[],t.nameIconList=[],t.statSpeedImgList=[],t.statRangeImgList=[],t.statRateImgList=[],t.sharkSkeleton=null,t.currentSharkSkinIdx=0,t.defaultSharkSkin=g.ConstConfig.SHARK_DEFAULT_ID,t._posTouchpad=null,t.isUnlockingShark=!1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),o.inst=this,this.sharkSkeleton=this.mainSharkNode.getComponent(sp.Skeleton);var n=document.getElementById("splash");n&&(n.style.display="none"),u.default.inst.addTask(function(){cc.resources.load("Skeletons/Shark/Sharks",sp.SkeletonData,function(e,o){e?cc.error(e):(t.sharkSkeleton.skeletonData=o,t.changeShark())})},this,[],"[LazyLoad] Sharks",!0)},t.prototype.start=function(){var t=this;e.prototype.start.call(this);var o=h.UserInfo.localSkinName;if(o&&""!==o)this.currentSharkSkinIdx=g.ConstConfig.SHARK_DATABASE.findIndex(function(e){return e.name===o});else{var n=g.ConstConfig.SHARK_DATABASE.findIndex(function(e){return e.id==t.defaultSharkSkin});this.currentSharkSkinIdx=n||0,n&&(o=g.ConstConfig.SHARK_DATABASE[this.currentSharkSkinIdx].name)}this.changeShark(),this.resetSharkSize()},t.prototype.onTouchStart=function(){},t.prototype.onTouchMove=function(){},t.prototype.onTouchEnd=function(){},t.prototype.playerClickedUnlockShark=function(){h.UserInfo.unlockSkin(g.ConstConfig.SHARK_DATABASE[this.currentSharkSkinIdx].id),this.changeShark()},t.prototype.playerClickedSelectShark=function(e,t){s.default.StartMain.inst.showInfoTypePopup(!1),"next"===t?this.currentSharkSkinIdx++:this.currentSharkSkinIdx--,this.currentSharkSkinIdx>=g.ConstConfig.SHARK_DATABASE.length&&(this.currentSharkSkinIdx=0),this.currentSharkSkinIdx<0&&(this.currentSharkSkinIdx=g.ConstConfig.SHARK_DATABASE.length-1),d.default.inst&&f.default.inst.playSFX(d.default.inst.SharkSlides),this.changeShark()},t.getSharkInfoArrIdBySkinName=function(e){for(var t=0;t<g.ConstConfig.SHARK_DATABASE.length;t++)if(g.ConstConfig.SHARK_DATABASE[t].id===e)return t;return-1},t.prototype.equipSkin=function(e){this.currentSharkSkinIdx=g.ConstConfig.SHARK_DATABASE.findIndex(function(t){return t.id===e}),this.changeShark()},t.prototype.changeShark=function(e){if(void 0===e&&(e=this.currentSharkSkinIdx),!(this.isUnlockingShark||e>g.ConstConfig.SHARK_DATABASE.length-1)){e!=this.currentSharkSkinIdx&&(this.currentSharkSkinIdx=e);var t=g.ConstConfig.SHARK_DATABASE[e].name,n=g.ConstConfig.SHARK_DATABASE[e].type,r="Brawler"===n?0:"Charger"===n?1:2;this.sharkSkeleton.setSkin(t),this.sharkSkeleton.setAnimation(0,"Shark_idle",!0),l.Main.inst.userChangedSkin(t,!0),this.sharkName.setLocalizedText("HSA_SHARK_NAME"+(e+1)),this.infoType.setLocalizedText("HSA_SHARK_TYPE"+(r+1)),this.infoType.node.color=o.sharkTypeColors[r],this.sharkNameBG.spriteFrame=this.nameBGList[r],this.sharkIconType.spriteFrame=this.nameIconList[r],this.updateSharkStats(r)}},t.prototype.sharkUpSizeAnim=function(){var e=this;d.default.inst&&f.default.inst.playSFX(d.default.inst.StartBigger,.2),this.sharkSkeleton.setAnimation(0,"Shark_sizeup",!1),this.sharkSkeleton.setCompleteListener(function(){e.sharkSkeleton.setAnimation(0,"Shark_idle",!0)}),this.scheduleOnce(function(){cc.sys.isMobile?e.sharkSkeleton.node.scale=1.5:e.sharkSkeleton.node.scale=1.6},.5)},t.prototype.resetSharkSize=function(){cc.sys.isMobile?this.sharkSkeleton.node.scale=.9:this.sharkSkeleton.node.scale=1.1},t.prototype.updateSharkStats=function(e){var t=this;this.sharkStats.children.forEach(function(o,n){switch(n){case a.Speed:o.getChildByName("img").getComponent(cc.Sprite).spriteFrame=t.statSpeedImgList[e];break;case a.DashRange:o.getChildByName("img").getComponent(cc.Sprite).spriteFrame=t.statRangeImgList[e];break;case a.DashRate:o.getChildByName("img").getComponent(cc.Sprite).spriteFrame=t.statRateImgList[e]}})},t.sharkTypeColors=[cc.color(249,91,121),cc.color(89,235,141),cc.color(255,184,58)],t.inst=null,i([_(cc.Node)],t.prototype,"mainSharkNode",void 0),i([_(c.NgcLabelLocalized)],t.prototype,"sharkName",void 0),i([_(cc.Sprite)],t.prototype,"sharkNameBG",void 0),i([_(cc.Sprite)],t.prototype,"sharkIconType",void 0),i([_(c.NgcLabelLocalized)],t.prototype,"infoType",void 0),i([_(cc.Node)],t.prototype,"sharkStats",void 0),i([_([cc.SpriteFrame])],t.prototype,"nameBGList",void 0),i([_([cc.SpriteFrame])],t.prototype,"nameIconList",void 0),i([_([cc.SpriteFrame])],t.prototype,"statSpeedImgList",void 0),i([_([cc.SpriteFrame])],t.prototype,"statRangeImgList",void 0),i([_([cc.SpriteFrame])],t.prototype,"statRateImgList",void 0),o=i([m],t)}(p.default);o.default=v,s.default.MainScreen=v,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../globals":"globals","../Main":"Main","../Performance/OffFrameTasksMgr":"OffFrameTasksMgr","../ScreenBase":"ScreenBase","../Sound/SoundResource":"SoundResource","../SoundManager":"SoundManager","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig"}],Main:[function(e,t,o){"use strict";cc._RF.push(t,"09d31zgRCBOGr2GG+VEcOFs","Main");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.Main=o.DeviceType=o.ScreenOrientation=o.AppContext=o.AppState=void 0;var c,l,u,p=e("../globals"),d=e("../NanoGameCore/Core/Utils"),f=e("../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog"),h=e("../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),g=e("../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager"),y=e("../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),m=e("../NanoGameCore/GameFramework/Scripts/BuildConfig"),_=e("../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),v=e("../NanoGameCore/GameFramework/Scripts/Network/NetUtils"),S=e("../NanoGameCore/GameFramework/Scripts/Network/NgcNetClient"),b=e("../NanoGameCore/GameFramework/Scripts/NgcMain"),N=e("../NanoGameCore/GameFramework/Scripts/NgcScreenManager"),P=e("../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),C=e("../NanoGameCore/GameFramework/Scripts/ProfanityCheck"),w=e("../NanoGameCore/GameFramework/Scripts/Screens/NgcStartMain"),T=e("../NanoGameCore/SDK/Nano/NanoSrv"),I=e("../NanoGameCore/SDK/SDK"),R=e("../NanoGameCore/Services/Inventory/Inventory"),O=e("../NanoGameCore/Services/Leaderboard/Leaderboard"),E=e("../NanoGameCore/Services/Platform/Platform"),k=e("../NanoGameCore/Services/ServicesMgr"),A=e("../NanoGameCore/Services/Social/Social"),B=e("./AppEventsCenter"),D=e("./Network/ImprovedNetClient"),M=e("./Performance/OffFrameTasksMgr"),L=e("./ScreenManager"),F=e("./Screens/PartyRoomScreen/PartyRoomManager"),G=e("./Screens/ScreenResourceLoader"),U=e("./Sound/SoundResource"),j=e("./TuningData"),x=e("./UserInfo"),z=e("./Utils/ConstConfig"),H=cc._decorator,W=H.ccclass,V=H.property;(function(e){e[e.InitSettle=0]="InitSettle",e[e.StartScreen=1]="StartScreen",e[e.ShopScreen=2]="ShopScreen",e[e.Game=3]="Game",e[e.PartyScreen=4]="PartyScreen"})(c=o.AppState||(o.AppState={})),function(e){e[e.NOT_SET=0]="NOT_SET",e[e.Options=1]="Options",e[e.MainMenu=2]="MainMenu",e[e.Matchmaking=3]="Matchmaking",e[e.Gameplay=4]="Gameplay",e[e.Results=5]="Results",e[e.Rewards=6]="Rewards",e[e.Spectator=7]="Spectator",e[e.Leaderboard=8]="Leaderboard",e[e.PartyRoom=9]="PartyRoom",e[e.ItemsShopScreen=10]="ItemsShopScreen",e[e.EndOfActionPhase=11]="EndOfActionPhase",e[e.Revive=12]="Revive"}(l=o.AppContext||(o.AppContext={})),function(e){e[e.Portrait=0]="Portrait",e[e.Landscape=1]="Landscape"}(u=o.ScreenOrientation||(o.ScreenOrientation={})),o.DeviceType={MOBILE:"Mobile",PC:"PC"};var Y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainCanvas=null,t.mainCamera=null,t.gameSceneBackground=null,t.debugTextLabel=null,t.timeSinceLoad=0,t.timeInCurrentState=0,t.enabledDebugParams=!1,t.platformGameID="",t.buildVersion="",t.inBackground=!1,t.frameCounter=0,t.intervalMainLoop=null,t.configInfo={},t.didStartScreen=!1,t.localUserName="",t.localUserSkin=z.ConstConfig.DEFAULT_SHARK_NAME,t._appHiddenTime=0,t.hasDoneStartScreen=!1,t}var o;return r(t,e),o=t,t.prototype.onClaimBooster=function(){x.UserInfo.updateInventoryWithPlatform(),w.default.inst.applyBooster()},t.prototype.getWorldPosOfMainCharacter=function(){return w.default.inst.previewCharacterWolrdPosition()},t.prototype._reset=function(){E.NgcPlatform.isOfflineMode()||(m.NgcBuildConfig.useNgcServer?D.default.inst.exitGame():p.default.NetClient.inst.exitGame()),p.default.SceneManager.inst.clean(),p.default.GameUI.inst.node.opacity=255,this.setState(c.InitSettle)},t.prototype.updatePurchaseAchievementInfo=function(e){var t={textKey:"",extraParams:[],extraParamComponents:[],purchasable:!1};return R.NgcInventory.inst.getItemCount(e.price.currency,function(o,n){if(!o&&n){var r=e.price.value,i=n.count<r?n.count:r;t.textKey="RWR_RUN_METERS",t.extraParams=[i+"/"+r],t.extraParamComponents=["X/Y"],t.purchasable=r===i}}),t},t.prototype.reload=function(){this.reset()},t.prototype.IsInGame=function(){return this.appState==c.Game},t.prototype.getLocalPlayer=function(){return p.default.PlayerController.localPlayer||null},t.prototype.uploadBestScore=function(e){if(!(e<=x.UserInfo.bestScore)){this.setBestScore(e);var t={_powerScore:e};T.default.inst.servicePost("/playerdata/",JSON.stringify(t),function(){}),O.NgcLeaderboard.inst&&O.NgcLeaderboard.inst.uploadScore(e)}},t.getAppContext=function(){return 0==o.appContextStack.length?l.NOT_SET:this.appContextStack[this.appContextStack.length-1]},t.getAppContextName=function(){var e=this.getAppContext();return d.Utils.enumToString(l,e)},t.setAppContext=function(e){0!=o.appContextStack.length?this.appContextStack[this.appContextStack.length-1]=e:o.pushAppContext(e)},t.pushAppContext=function(e){o.appContextStack.push(e)},t.prototype.getLocalPlayerNode=function(){return null},t.prototype.userChangedName=function(e){return a(this,void 0,void 0,function(){var t,o;return s(this,function(n){switch(n.label){case 0:return[4,C.NgcProfanityCheck.check(e.string)];case 1:return n.sent().status?[3,3]:(e.string="",[4,h.NgcDialogManager.createDialog(f.NgcMessageDialog.dialogType,f.NgcMessageDialog.urlPrefab,f.NgcMessageDialog.bundleName)]);case 2:return t=n.sent(),(o=t.getComponent(f.NgcMessageDialog)).init("NGG_PROFANITY_NAME_NOTICE"),o.show(null,e.node,null,null),[2];case 3:return P.default.localUserName=this.localUserName=e.string,this.updateNameToNanosrv(),[2]}})})},t.prototype.userChangedSkin=function(e,t){this.localUserSkin=e,t&&(x.UserInfo.localSkinName=e)},t.prototype.updateUserConflictInfo=function(e,t){return a(this,void 0,void 0,function(){var o,n,r,i,a,c,l,u;return s(this,function(s){switch(s.label){case 0:return e.lbScore.string=x.UserInfo.bestScore,R.NgcInventory.inst.getItemCount("coin",function(t,o){t||(e.coins.string=""+o.count)}),R.NgcInventory.inst.getItemCount("star",function(t,o){t||(e.stars.string=""+o.count)}),o=I.NgcSDK.getCurTime(),n=new Date(o),e.time.string=n.getUTCDate()+"/"+(n.getUTCMonth()+1)+"/"+n.getUTCFullYear()+" "+n.getUTCHours()+":"+n.getUTCMinutes()+":"+n.getUTCSeconds(),(r=A.NgcSocial.inst.getConflictedData()).hasOwnProperty("playerData")?((i=r.playerData).hasOwnProperty("modified")&&(a=parseInt(i.modified),c=new Date(a),t.time.string=c.getUTCDate()+"/"+(c.getUTCMonth()+1)+"/"+c.getUTCFullYear()+" "+c.getUTCHours()+":"+c.getUTCMinutes()+":"+c.getUTCSeconds()),i.hasOwnProperty("_bestScore")?(t.lbScore.string=i._bestScore,[3,3]):[3,1]):[3,4];case 1:return[4,O.NgcLeaderboard.inst.getPlayerRank(r.id,O.TimeFilterType.AllTime,O.PopulationFilterType.Worldwide)];case 2:(l=s.sent())&&l.hasOwnProperty("score")&&null!==l.score?(t.lbScore.string=l.score,i._bestScore=l.score):t.lbScore.string="0",s.label=3;case 3:return i.hasOwnProperty("inventory")&&((u=i.inventory).hasOwnProperty("star")&&(t.stars.string=u.star.count),u.hasOwnProperty("coin")&&(t.coins.string=u.coin.count)),[3,4];case 4:return[2]}})})},t.isDesktopBrowser=function(){return cc.sys.os!==cc.sys.OS_IOS&&cc.sys.platform===cc.sys.DESKTOP_BROWSER},t.prototype.createFakeName=function(){return P.default.localUserName?this.localUserName=P.default.localUserName:P.default.localUserName=this.localUserName="Guest"+v.NgcNetUtils.RandomRange(1,9999,!0).toString(),k.NgcServicesMgr.isInitialized&&this.updateNameToNanosrv(),this.localUserName},t.prototype.getTimeSinceLoad=function(){return this.timeSinceLoad},t.prototype.onLoad=function(){var t=this,n=document.getElementById("splash");n&&(n.style.display="none"),o.inst=this,e.prototype.onLoad.call(this),P.default.totalSessions++,this.localUserName=P.default.localUserName,this.configInfo=m.NgcBuildConfig,this.enabledDebugParams=m.NgcBuildConfig.enabledDebugMode,this.platformGameID=m.NgcBuildConfig.platformGameID,this.buildVersion=m.NgcBuildConfig.buildVersionName,M.default.inst.addTask(this._loadGameParameters,this,[],"_loadGameParameters",!0),!_.NgcCountryFlagsManager.inst&&M.default.inst.addTask(this._loadCountryFlagsManager,this,[],"[LazyLoad] _loadCountryFlagsManager",!0),!g.NgcEmotesManager.inst&&M.default.inst.addTask(this._loadEmotes,this,[],"[LazyLoad] _loadEmotes"),M.default.inst.addTask(function(){var e=G.default.inst;e.on(G.EScrResLoaderEvents.SCREEN_PREFAB_LOADED,function(e,o){return t._onScreenPrefabLoaded(e,o)}),e.on(G.EScrResLoaderEvents.LOADING_SEQUENCE_FINISHED,function(){return t._onAllScreensLoaded()}),e.startLoadScreensInSequence()},this,[],"[LazyLoad] pageview screens")},t.prototype._loadCountryFlagsManager=function(){var e=this;cc.resources.load(z.ConstConfig.PREFAB_URLS.CountryFlagsManagerDriver,function(t,o){t?cc.error(t):(cc.log("[LazyLoad] CountryFlagsManagerDriver loaded"),cc.instantiate(o).parent=e.node)})},t.prototype._loadEmotes=function(){var e=this;cc.resources.load(z.ConstConfig.PREFAB_URLS.EmotesDriver,function(t,o){t?cc.error(t):(cc.log("[LazyLoad] EmotesDriver loaded"),cc.instantiate(o).parent=e.node,B.default.inst.emit(B.default.events.EMOTES_ASSET_READY))})},t.prototype._loadGameParameters=function(){var e=this,t="";if(!m.NgcBuildConfig.offlineMode&&"DEV"!=m.NgcBuildConfig.deploymentEnvironment.toUpperCase()){var o=T.default.inst&&T.default.inst.loginData&&T.default.inst.getCurGameInfo();if(!o)return void this.scheduleOnce(function(){e._loadGameParameters()},.1);o._custom&&o._custom.GameParameters&&(t=o._custom.GameParameters)}j.default.inst.loadJsonData(t,function(){B.default.inst.emit(B.default.events.GAME_PARAMETERS_READY)})},t.prototype._onScreenPrefabLoaded=function(e,t){var o=this;if(e!==L.default.screenIDs.LeaderBoardScreen&&e!==L.default.screenIDs.LeaderBoardScreenPC||_.NgcCountryFlagsManager.inst){cc.log("[LazyLoad] Screen id "+e+" loaded"),N.default.inst.screenPrefabs[e]=t;var n=cc.instantiate(t);N.default.inst.replaceScreen(n,e)}else this.scheduleOnce(function(){return o._onScreenPrefabLoaded(e,t)})},t.prototype._onAllScreensLoaded=function(){var e=this;cc.log("[LazyLoad] Start loading sound resource"),cc.resources.load(U.default.PREFAB_PATH,cc.Prefab,function(t,o){t?cc.error("[LazyLoad] "+t):(cc.log("[LazyLoad] SoundResource loaded"),cc.instantiate(o).parent=e.node,G.default.inst.load(L.default.screenIDs.GameScreen,function(e,t){N.default.inst.screenPrefabs[L.default.screenIDs.GameScreen]=t,B.default.inst.emit(B.default.events.GAMESCREEN_ASSET_READY)}))})},t.prototype.onAppVisible=function(){this.inBackground=!1},t.prototype.onAppHidden=function(){this.inBackground=!0,this._appHiddenTime=(new Date).getTime(),this.appState===c.Game&&o.getAppContext()===l.Gameplay&&(S.NgcNetClient.inst.exitGame(),p.default.Main.inst.reload())},t.prototype.registerEventHandlers=function(){var e=this;document.addEventListener("visibilitychange",function(){"visible"==document.visibilityState?e.onAppVisible():"hidden"==document.visibilityState&&e.onAppHidden()}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(t){var o=e.getLocalPlayerNode();o&&o.emit("keyDown",t)},this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,function(t){var o=e.getLocalPlayerNode();o&&o.emit("keyUp",t),y.default.inst.onPlayerInput()},this),this.node.on(cc.Node.EventType.TOUCH_START,function(e){L.default.inst.node.emit("tapDown",e)},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){L.default.inst.node.emit("tapUp",e)},this)},t.prototype.getUrlParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},t.prototype.start=function(){this.registerEventHandlers(),this.setState(c.InitSettle)},t.prototype.workState_InitSettle=function(){var e;if(this.timeInCurrentState>.15){if(!E.NgcPlatform.isOfflineMode())if(m.NgcBuildConfig.useNgcServer)!D.default.inst.isConnected()&&D.default.inst.connect();else if(!p.default.NetClient.inst.isConnected()){var t="";F.NgcPartyRoomManager.mustGoToPartyRoom()&&(t=F.NgcPartyRoomManager.getServerFromInviteLink()),p.default.NetClient.inst.startConnectCycle(t)}0!=x.UserInfo.bestScore||x.UserInfo.isHardResetData||this.createFakeName(),(null===(e=F.NgcPartyRoomManager.inst)||void 0===e?void 0:e.isGameStartedFromRoom())?this.setState(c.PartyScreen):this.setState(c.StartScreen)}},t.prototype.setState=function(e){if(e!=this.appState){switch(this.appState=e,e){case c.StartScreen:L.default.inst.goToStartScreen();break;case c.Game:L.default.inst.goToGameScreen();break;case c.ShopScreen:L.default.inst.goToShopScreen();break;case c.PartyScreen:L.default.inst.goToPartyScreen()}this.timeInCurrentState=0}},t.prototype.update=function(e){switch(this.timeSinceLoad+=e,this.timeInCurrentState+=e,this.frameCounter++,this.appState){case c.InitSettle:this.workState_InitSettle(e)}},t.getScreenOrientation=function(){return cc.winSize.width<cc.winSize.height?u.Portrait:u.Landscape},t.prototype.processDataConflict=function(t){e.prototype.processDataConflict.call(this,t),t.playerData.hasOwnProperty("_bestScore")?x.UserInfo.bestScore=t.playerData._bestScore:x.UserInfo.bestScore=0},t.prototype.resetPrivateDataForGame=function(){x.UserInfo.resetPrivateData()},t.prototype.updateInventoryWithPlatformForGame=function(){x.UserInfo.updateInventoryWithPlatform()},t.prototype.updateUserInfo=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,w.default.inst.updateUserInfo()];case 1:return e.sent(),[2]}})})},t.prototype.setBestScore=function(e){x.UserInfo.setBestScore(e)},t.prototype.getBestScore=function(){return x.UserInfo.bestScore},t.prototype.resumeGameLogic=function(){cc.director.resume()},t.prototype.pauseGameLogic=function(){cc.director.pause()},t.prototype.resetData=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!0),x.UserInfo.resetPrivateData(),x.UserInfo.isHardResetData=t,x.UserInfo.totalSessions=1,w.default.inst&&(w.default.inst.onPlatformStartCompleted(),w.default.inst.updateNameBox()),e&&e()},t.prototype.showControlDialog=function(){cc.log("Show Custom Control here")},t.inst=null,i([V(cc.Canvas)],t.prototype,"mainCanvas",void 0),i([V(cc.Camera)],t.prototype,"mainCamera",void 0),i([V(cc.Node)],t.prototype,"gameSceneBackground",void 0),i([V(cc.Label)],t.prototype,"debugTextLabel",void 0),o=i([W],t)}(b.NgcMain);o.Main=Y,p.default.Main=Y,p.default.AppState=c,cc._RF.pop()},{"../NanoGameCore/Core/Utils":"Utils","../NanoGameCore/CrossFeatures/Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../NanoGameCore/GameFramework/Scripts/Network/NetUtils":"NetUtils","../NanoGameCore/GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../NanoGameCore/GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../NanoGameCore/GameFramework/Scripts/ProfanityCheck":"ProfanityCheck","../NanoGameCore/GameFramework/Scripts/Screens/NgcStartMain":"NgcStartMain","../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../NanoGameCore/SDK/SDK":"SDK","../NanoGameCore/Services/Inventory/Inventory":"Inventory","../NanoGameCore/Services/Leaderboard/Leaderboard":"Leaderboard","../NanoGameCore/Services/Platform/Platform":"Platform","../NanoGameCore/Services/ServicesMgr":"ServicesMgr","../NanoGameCore/Services/Social/Social":"Social","../globals":"globals","./AppEventsCenter":"AppEventsCenter","./Network/ImprovedNetClient":"ImprovedNetClient","./Performance/OffFrameTasksMgr":"OffFrameTasksMgr","./ScreenManager":"ScreenManager","./Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","./Screens/ScreenResourceLoader":"ScreenResourceLoader","./Sound/SoundResource":"SoundResource","./TuningData":"TuningData","./UserInfo":"UserInfo","./Utils/ConstConfig":"ConstConfig"}],MapController:[function(e,t,o){"use strict";cc._RF.push(t,"6edc9TBYZRBEK4+RWCMXzB4","MapController");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../Scripts/HSAUtils"),l=e("../Network/HSANetUtils"),u=e("../../globals"),p=e("../Obstacle/BlockObject"),d=e("../WaterSurface/WaterSurfaceManager"),f=e("../PlatformGameObject"),h=e("../LevelGrid/LevelGrid"),g=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),y=cc._decorator,m=y.ccclass,_=y.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleMap=null,t.ObstacleNode=null,t.playerStartPointsNode=null,t.gameplayNode=null,t.nodeBGLayer=null,t.nodeDecorationsLayer=null,t.nodeBGFaded=null,t.backgroundNode=null,t.fadedBackgroundNode=null,t.surface=null,t.background_deep=null,t.PipeNode=null,t.borderNode=null,t.playerStartPointPrefab=null,t.bombPrefab=null,t.blockObjectPrefab=null,t.MapPrefabs=[],t.BGRockMaterial=null,t.BGFadedMaterial=null,t.TileFlag=cc.Enum({HORIZONTAL:2147483648,VERTICAL:1073741824,DIAGONAL:536870912,FLIPPED_ALL:4026531840,FLIPPED_MASK:268435455}),t.isLoaded=!1,t._mapSize={width:0,height:0},t.clownFishSpawnRects=[],t.tunaSpawnRects=[],t.mahiSpawnRects=[],t.pelicanMovementRects=[],t.humanDiverSpawnRects=[],t.humanSwimmerSpawnRects=[],t._toxicEndZones=[],t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst&&cc.error("There are more than 1 MapController instance!!!"),o.inst=this,this.onLoadTileMap("Map_00")},t.prototype.onLoadTileMap=function(e){return a(this,void 0,void 0,function(){var t,o=this;return s(this,function(n){switch(n.label){case 0:return(t=new cc.Node).setAnchorPoint(cc.v2(0,0)),t.setPosition(cc.v2(0,0)),[4,new Promise(function(n){var r="Map/"+e;o.titleMap=t.addComponent(cc.TiledMap),cc.resources.load(r,cc.TiledMapAsset,function(e,r){if(e)cc.error(e);else{o.titleMap.tmxAsset=r,o.setMapSize(o.titleMap.getMapSize().width*o.titleMap.getTileSize().width,o.titleMap.getMapSize().height*o.titleMap.getTileSize().height),o.DrawPipeMap(),o.initPhysicBorder(),o.initObstacles(),o.initStartPointPlayer(),o.loadClowFishSpawnRects(),o.loadTunaSpawnRects(),o.loadMahiSpawnRects(),o.loadPelicanMovementRects(),o.loadHumanMovementRect(),o.loadToxicEndZones(),o.initBlockObjects();var i=o.getRectWaterSwim();o.backgroundNode.setScale(i.width/o.backgroundNode.width),o.backgroundNode.setPosition(i.center.x,0),o.backgroundNode.active=!0,o.fadedBackgroundNode.setScale(i.width/o.fadedBackgroundNode.width),o.fadedBackgroundNode.setPosition(i.center.x,0),o.fadedBackgroundNode.active=!0,g.NgcBuildConfig.enabledDebugMode&&o.initLevelGird(),o.titleMap.destroy(),t.destroy(),n(null),o.isLoaded=!0}})})];case 1:return n.sent(),[2]}})})},t.prototype.setMapSize=function(e,t){this._mapSize={width:e,height:t}},t.prototype.getMapSize=function(){return this._mapSize},t.prototype.initLevelGird=function(){var e=this.node.getChildByName("LevelGrid");if(e){var t=e.getComponent(h.default);t&&t.init()}},t.prototype.initSurface=function(){var e=this.titleMap.getObjectGroup("surface").getObjects();this.surface.setPosition(e[0].x,e[0].y)},t.prototype.DrawPipeMap=function(){var e=this.titleMap.getObjectGroup("BorderDecoration");this.drawPrefab(e.getObjects());var t=this.titleMap.getObjectGroup("CaveRoom");this.drawPrefab(t.getObjects());var o=this.titleMap.getObjectGroup("CaveInterior");this.drawPrefab(o.getObjects());var n=this.titleMap.getObjectGroup("Pipes");this.drawPrefab(n.getObjects())},t.prototype.drawPrefab=function(e){var t=this;e.forEach(function(e){var o=e.gid,n=(o&t.TileFlag.FLIPPED_MASK)>>>0,r=t.findPrefabNameByID(n),i=e.rotation,a=e.visible;if(null!=r&&""!=r){var s=t.findPerfabByName(r);if(s){var c=cc.instantiate(s);c.parent=t.PipeNode,c.active=a,c.setPosition(e.x,e.y),c.angle=-i,c.setAnchorPoint(0,0),(o&t.TileFlag.HORIZONTAL)>>>0&&t.setFlipX(c,i),(o&t.TileFlag.VERTICAL)>>>0&&t.setFlipY(c,i)}else cc.log("Missing Prefab Name in Prefab folder="+r)}})},t.prototype.findPrefabNameByID=function(e){var t;return(t=this.titleMap.getPropertiesForGID(e))&&t.prefabName?t.prefabName:null},t.prototype.findPerfabByName=function(e){for(var t=0;t<this.MapPrefabs.length;t++){var o=this.MapPrefabs[t];if(null!=o&&o.name.toLocaleLowerCase()==e.toLocaleLowerCase())return o}return null},t.prototype.setFlipX=function(e,t){e.setScale(cc.v2(-1,1)),cc.log(e),270==t||-90==t?e.y+=e.width:180==t||-180==t?e.x-=e.width:90==t||-270==t?e.y-=e.width:0!=t&&360!=t||(e.x+=e.width)},t.prototype.setFlipY=function(e,t){e.setScale(cc.v2(1,-1)),270==t||-90==t?e.x-=e.height:180==t||-180==t?e.y-=e.height:90==t||-270==t?e.x+=e.height:0!=t&&360!=t||(e.y+=e.height)},t.prototype._initBGLayer=function(e){for(var t=e.getChildByName("Background"),o=t.children.length,n=0;n<o;n++){var r=t.children[0];r.getComponent(cc.Sprite).setMaterial(0,this.BGRockMaterial),r.parent=this.nodeBGLayer,r.setPosition(r.x+this.getMapSize().width/2,r.y+this.getMapSize().height/2);var i=r.addComponent("OffscreenDisableRender");i&&(i.renderComponent=r.getComponent(cc.RenderComponent))}},t.prototype._initDecorationLayer=function(e){for(var t=e.getChildByName("Decoration"),o=t.children.length,n=0;n<o;n++){var r=t.children[0];r.parent=this.nodeDecorationsLayer,r.setPosition(r.x+this.getMapSize().width/2,r.y+this.getMapSize().height/2),r.addComponent("OffscreenDisableRender").renderComponent=r.getComponent(cc.RenderComponent)}},t.prototype._initbgFadeLayer=function(e){for(var t=e.getChildByName("FadedBackground"),o=t.children.length,n=0;n<o;n++){var r=t.children[0];r.getComponent(cc.Sprite).setMaterial(0,this.BGFadedMaterial),r.parent=this.nodeBGFaded,r.setPosition(r.x+this.getMapSize().width/2,r.y+this.getMapSize().height/2),r.addComponent("OffscreenDisableRender").renderComponent=r.getComponent(cc.RenderComponent)}},t.prototype.initPhysicBorder=function(){var e=this;this.titleMap.getObjectGroup("LevelBorder").getObjects().forEach(function(t){var o=new cc.Node;if(o.parent=e.borderNode,o.group="Platform",o.setPosition(t.x,t.y),o.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static,t.points){var n=[];t.points.forEach(function(e){n.push(cc.v2(e.x,e.y))});var r=o.addComponent(cc.PhysicsPolygonCollider);r.points=n,r.apply()}else{var i=o.addComponent(cc.PhysicsBoxCollider);i.size.width=t.width,i.size.height=t.height,i.offset.x=t.width/2,i.offset.y=-t.height/2,i.apply()}o.addComponent(f.default)})},t.prototype.update=function(){f.default.correctPosition()},t.prototype.initObstacles=function(){var e=this;this.titleMap.getObjectGroup("Obstacle").getObjects().forEach(function(t){var o=cc.instantiate(e.bombPrefab);o.parent=e.ObstacleNode,o.setPosition(t.x+t.width/2,t.y+t.height/2)})},t.prototype.initStartPointPlayer=function(){var e=this;this.titleMap.getObjectGroup("StartPoint").getObjects().forEach(function(t){var o=cc.instantiate(e.playerStartPointPrefab);o.parent=e.playerStartPointsNode,o.setPosition(t.x,t.y)})},t.prototype.loadPelicanMovementRects=function(){var e=this,t=c.default.getWorldPos(this.borderNode);this.titleMap.getObjectGroup("PelicanMovenmentRect").getObjects().forEach(function(o){e.pelicanMovementRects.push(cc.rect(o.x+t.x,o.y+t.y-o.height/2,o.width,o.height))})},t.prototype.loadClowFishSpawnRects=function(){var e=this,t=c.default.getWorldPos(this.borderNode);this.titleMap.getObjectGroup("ClownFishSpawnRects").getObjects().forEach(function(o){e.clownFishSpawnRects.push(cc.rect(o.x+t.x,o.y+t.y-o.height/2,o.width,o.height))})},t.prototype.loadTunaSpawnRects=function(){var e=this,t=c.default.getWorldPos(this.borderNode);this.titleMap.getObjectGroup("TunaSpawnRect").getObjects().forEach(function(o){e.tunaSpawnRects.push(cc.rect(o.x+t.x,o.y+t.y-o.height/2,o.width,o.height))})},t.prototype.loadMahiSpawnRects=function(){var e=this,t=c.default.getWorldPos(this.borderNode);this.titleMap.getObjectGroup("MahiSpawnRect").getObjects().forEach(function(o){e.mahiSpawnRects.push(cc.rect(o.x+t.x,o.y+t.y-o.height/2,o.width,o.height))})},t.prototype.randomClowFishSpawnWPos=function(){var e=l.default.RandomRange(0,this.clownFishSpawnRects.length-1,!0),t=this.clownFishSpawnRects[e],o=l.default.RandomRange(0,t.width,!0),n=l.default.RandomRange(0,t.height,!0);return cc.v2(t.x+o,t.y+n)},t.prototype.randomTunaSpawnWPos=function(){var e=l.default.RandomRange(0,this.tunaSpawnRects.length-1,!0),t=this.tunaSpawnRects[e],o=l.default.RandomRange(0,t.width,!0),n=l.default.RandomRange(0,t.height,!0);return cc.v2(t.x+o,t.y+n)},t.prototype.randomMahiSpawnWPos=function(){var e=l.default.RandomRange(0,this.mahiSpawnRects.length-1,!0),t=this.mahiSpawnRects[e],o=l.default.RandomRange(0,t.width,!0),n=l.default.RandomRange(0,t.height,!0);return cc.v2(t.x+o,t.y+n)},t.prototype.loadHumanMovementRect=function(){var e=this,t=c.default.getWorldPos(this.borderNode);this.titleMap.getObjectGroup("HumanDiverRect").getObjects().forEach(function(o){e.humanDiverSpawnRects.push(cc.rect(o.x+t.x,o.y+t.y-o.height/2,o.width,o.height))}),this.titleMap.getObjectGroup("HumanSwimRect").getObjects().forEach(function(o){e.humanSwimmerSpawnRects.push(cc.rect(o.x+t.x,o.y+t.y-o.height/2,o.width,o.height))})},t.prototype.reset=function(){},t.prototype.initBlockObjects=function(){var e=this,t=c.default.getWorldPos(this.borderNode),o=this.titleMap.getObjectGroup("SizeBlockObject");o&&o.getObjects().forEach(function(o){var n=cc.instantiate(e.blockObjectPrefab);n.parent=e.gameplayNode,c.default.setWorldPos(n,cc.v2(o.x+t.x+o.width/2,o.y+t.y-o.height/2));var r=n.getComponent(p.default);r.limitedSize=o.size,r.setObjectSize(cc.size(o.width,o.height)),u.default.SceneManager.inst.addBlockObject(r)})},t.prototype.getRectWaterSwim=function(){return cc.rect(0,0,this.getMapSize().width,this.surface.getComponent(d.default).getWorldPosition().y)},t.prototype.loadToxicEndZones=function(){var e=this,t=c.default.getWorldPos(this.borderNode);this.titleMap.getObjectGroup("ToxicEndZone").getObjects().forEach(function(o){e._toxicEndZones.push(cc.rect(o.x+t.x,o.y+t.y-o.height/2,o.width,o.height))})},t.prototype.getRandomEndZones=function(){return this._toxicEndZones[0]},t.inst=null,i([_(cc.TiledMap)],t.prototype,"titleMap",void 0),i([_(cc.Node)],t.prototype,"ObstacleNode",void 0),i([_(cc.Node)],t.prototype,"playerStartPointsNode",void 0),i([_(cc.Node)],t.prototype,"gameplayNode",void 0),i([_(cc.Node)],t.prototype,"nodeBGLayer",void 0),i([_(cc.Node)],t.prototype,"nodeDecorationsLayer",void 0),i([_(cc.Node)],t.prototype,"nodeBGFaded",void 0),i([_(cc.Node)],t.prototype,"backgroundNode",void 0),i([_(cc.Node)],t.prototype,"fadedBackgroundNode",void 0),i([_(cc.Node)],t.prototype,"surface",void 0),i([_(cc.Node)],t.prototype,"background_deep",void 0),i([_(cc.Node)],t.prototype,"PipeNode",void 0),i([_(cc.Node)],t.prototype,"borderNode",void 0),i([_(cc.Prefab)],t.prototype,"playerStartPointPrefab",void 0),i([_(cc.Prefab)],t.prototype,"bombPrefab",void 0),i([_(cc.Prefab)],t.prototype,"blockObjectPrefab",void 0),i([_(cc.Prefab)],t.prototype,"MapPrefabs",void 0),i([_(cc.Material)],t.prototype,"BGRockMaterial",void 0),i([_(cc.Material)],t.prototype,"BGFadedMaterial",void 0),o=i([m],t)}(cc.Component);o.default=v,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../Scripts/HSAUtils":"HSAUtils","../../globals":"globals","../LevelGrid/LevelGrid":"LevelGrid","../Network/HSANetUtils":"HSANetUtils","../Obstacle/BlockObject":"BlockObject","../PlatformGameObject":"PlatformGameObject","../WaterSurface/WaterSurfaceManager":"WaterSurfaceManager"}],MatchMaking:[function(e,t,o){"use strict";cc._RF.push(t,"89637FBsMFIoJC3n4VBIVOc","MatchMaking");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),s=e("../SceneManager"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.numPlayerJoined=null,t._numberToKickOut=0,t}return r(t,e),t.prototype.onEnable=function(){this.reset()},t.prototype.onDisable=function(){},t.prototype.onLoad=function(){},t.prototype.update=function(){cc.log("Players joined = "+s.default.inst.getAllPlayers().length),this.numPlayerJoined.string=""+s.default.inst.getAllPlayers().length,s.default.inst.getAllPlayers().length<=0&&(this._numberToKickOut>500&&a.default.showNetworkDisconnect(),this._numberToKickOut++)},t.prototype.reset=function(){this.numPlayerJoined.string="1",this._numberToKickOut=0},i([u(cc.Label)],t.prototype,"numPlayerJoined",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../SceneManager":"SceneManager"}],MessageBuilder:[function(e,t,o){"use strict";var n;cc._RF.push(t,"68a772G6VJJUbJR2SYOFoCr","MessageBuilder"),Object.defineProperty(o,"__esModule",{value:!0}),o.MessageBuilder=void 0;var r=e("./Protocol"),i=e("./MessageDefines"),a=e("long");o.MessageBuilder=((n={})[r.Protocol.SERVER_INIT]=function(e){var t=i.Server_Init.create();return t.msgType=r.Protocol.SERVER_INIT,t.clientID=e,i.Server_Init.encode(t).finish()},n[r.Protocol.JOIN_ROOM]=function(e,t,o){void 0===t&&(t={}),void 0===o&&(o={});var n=i.Client_JoinRoom.create();return n.msgType=r.Protocol.JOIN_ROOM,n.roomType=e,n.params=JSON.stringify(t),n.options=JSON.stringify(o),i.Client_JoinRoom.encode(n).finish()},n[r.Protocol.LEAVE_ROOM]=function(){var e=i.Client_LeaveRoom.create();return e.msgType=r.Protocol.LEAVE_ROOM,i.Client_LeaveRoom.encode(e).finish()},n[r.Protocol.PING]=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var o=i.Ping.create();return o.msgType=r.Protocol.PING,o.reqTime=a.fromValue(e),o.resTime=a.fromValue(t),i.Ping.encode(o).finish()},n[r.Protocol.NGC_BROADCAST]=function(e,t,o,n){var a=i.NGC_Broadcast.create();return a.msgType=r.Protocol.NGC_BROADCAST,a.type=e,a.fromID=t,a.payload=JSON.stringify(o),a.timestamp=n,i.NGC_Broadcast.encode(a).finish()},n),cc._RF.pop()},{"./MessageDefines":"MessageDefines","./Protocol":"Protocol",long:57}],MessageDefines:[function(e,t){"use strict";var o;cc._RF.push(t,"21664NSlX9Hs54StsQ6KbXx","MessageDefines"),o=function(e){var t=e.Reader,o=e.Writer,n=e.util,r=e.roots.default||(e.roots.default={});return r.Server_Init=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.msgType=0,e.prototype.clientID="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).uint32(e.msgType),null!=e.clientID&&Object.hasOwnProperty.call(e,"clientID")&&t.uint32(18).string(e.clientID),t},e.decode=function(e,o){e instanceof t||(e=t.create(e));for(var n=void 0===o?e.len:e.pos+o,i=new r.Server_Init;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:i.msgType=e.uint32();break;case 2:i.clientID=e.string();break;default:e.skipType(7&a)}}return i},e}(),r.Client_JoinRoom=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.msgType=0,e.prototype.roomType="",e.prototype.params="",e.prototype.options="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).uint32(e.msgType),null!=e.roomType&&Object.hasOwnProperty.call(e,"roomType")&&t.uint32(18).string(e.roomType),null!=e.params&&Object.hasOwnProperty.call(e,"params")&&t.uint32(26).string(e.params),null!=e.options&&Object.hasOwnProperty.call(e,"options")&&t.uint32(34).string(e.options),t},e.decode=function(e,o){e instanceof t||(e=t.create(e));for(var n=void 0===o?e.len:e.pos+o,i=new r.Client_JoinRoom;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:i.msgType=e.uint32();break;case 2:i.roomType=e.string();break;case 3:i.params=e.string();break;case 4:i.options=e.string();break;default:e.skipType(7&a)}}return i},e}(),r.Client_LeaveRoom=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.msgType=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).uint32(e.msgType),t},e.decode=function(e,o){e instanceof t||(e=t.create(e));for(var n=void 0===o?e.len:e.pos+o,i=new r.Client_LeaveRoom;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:i.msgType=e.uint32();break;default:e.skipType(7&a)}}return i},e}(),r.Ping=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.msgType=0,e.prototype.reqTime=n.Long?n.Long.fromBits(0,0,!0):0,e.prototype.resTime=n.Long?n.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).uint32(e.msgType),null!=e.reqTime&&Object.hasOwnProperty.call(e,"reqTime")&&t.uint32(16).uint64(e.reqTime),null!=e.resTime&&Object.hasOwnProperty.call(e,"resTime")&&t.uint32(24).uint64(e.resTime),t},e.decode=function(e,o){e instanceof t||(e=t.create(e));for(var n=void 0===o?e.len:e.pos+o,i=new r.Ping;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:i.msgType=e.uint32();break;case 2:i.reqTime=e.uint64();break;case 3:i.resTime=e.uint64();break;default:e.skipType(7&a)}}return i},e}(),r.NGC_Broadcast=function(){function e(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.msgType=0,e.prototype.type="",e.prototype.fromID="",e.prototype.payload="",e.prototype.timestamp=n.Long?n.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=o.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).uint32(e.msgType),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(18).string(e.type),null!=e.fromID&&Object.hasOwnProperty.call(e,"fromID")&&t.uint32(26).string(e.fromID),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(34).string(e.payload),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(40).uint64(e.timestamp),t},e.decode=function(e,o){e instanceof t||(e=t.create(e));for(var n=void 0===o?e.len:e.pos+o,i=new r.NGC_Broadcast;e.pos<n;){var a=e.uint32();switch(a>>>3){case 1:i.msgType=e.uint32();break;case 2:i.type=e.string();break;case 3:i.fromID=e.string();break;case 4:i.payload=e.string();break;case 5:i.timestamp=e.uint64();break;default:e.skipType(7&a)}}return i},e}(),r},"function"==typeof define&&define.amd?define(["protobufjs/minimal"],o):"function"==typeof e&&"object"==typeof t&&t&&t.exports&&(t.exports=o(e("protobufjs/minimal"))),cc._RF.pop()},{"protobufjs/minimal":58}],MessageDialog:[function(e,t,o){"use strict";cc._RF.push(t,"0f009wFhwFLSbriVV856/2W","MessageDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcMessageDialog=void 0;var a=e("../../../../Core/Utils"),s=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../DialogBase"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelLocalized=null,t.background=null,t}return r(t,e),t.prototype.init=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),this.labelLocalized.setLocalizedText(e),this.background&&(this.background.active=t)},t.prototype.show=function(e,t,o,n,r){var i=this;e||(e=cc.find("Canvas"));var s=this.node.getComponent(cc.Widget);o&&(s.isAlignLeft=!0,s.left=o),n&&(s.isAlignRight=!0,s.right=n),this.node.parent=e,r&&(this.node.scale=r);var c=a.Utils.getWorldPos(t);a.Utils.setWorldPos(this.node,c),s.updateAlignment(),this.node.active=!0,this.node.opacity=1,this.node.y=this.node.y+t.height/2+30,cc.tween(this.node).delay(.1).to(0,{opacity:255}).to(1.5,{opacity:0,y:this.node.y+20}).call(function(){return i.hide()}).start()},t.dialogType="NgcMessageDialog",t.urlPrefab="MessageDialog",t.bundleName="02_dialog",i([p(s.NgcLabelLocalized)],t.prototype,"labelLocalized",void 0),i([p(cc.Node)],t.prototype,"background",void 0),i([u],t)}(c.NgcDialogBase);o.NgcMessageDialog=d,cc._RF.pop()},{"../../../../Core/Utils":"Utils","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../DialogBase":"DialogBase"}],MessageUtils:[function(e,t,o){"use strict";cc._RF.push(t,"45fefZrBBtGtpog/SMIzh8U","MessageUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.getMessageType=o.buildMessageTimeSyncResponse=o.buildMessageTimeSyncRequest=o.buildMessagePong=o.buildMessagePing=o.buildMessageJoinGameRequest=o.buildMessageInitialGameState=o.buildMessageFullGameSessionState=o.buildMessageCommandDrag=o.buildMessageCommandDash=o.buildMessageBotCreationRequest=o.buildMessageAttackResult=o.buildMessagePlayerKill=o.buildMessagePlayerDeath=o.buildPartyStatus=o.buildMessagePlayerState=o.buildMessageBotReassignmentRequest=void 0;var n=e("./protobuf/hsaprotobuf"),r=e("protobufjs/minimal");o.buildMessageBotReassignmentRequest=function(e,t){var o=n.BotReassignmentRequest.create();return o.msgType=n.MessageType.BOT_REASSIGNMENT_REQUEST,o.gameId=e,o.playerId=t,n.BotReassignmentRequest.encode(o).finish()},o.buildMessagePlayerState=function(e,t,o,r,i,a,s,c,l,u){var p=n.PlayerState.create();return p.netID=e,p.lastPositionX=t,p.lastPositionY=o,p.stateMsgID=-1,p.lastSpeed=r,p.lastState=i,p.curSize=a,p.lastDirX=s,p.lastDirY=c,p.lastGuidedDirX=l,p.lastGuidedDirY=u,p},o.buildPartyStatus=function(e,t,o){return{message:"ServerMessage_PartyStatus",partyID:e,partyParameters:o,playerList:t,serverTime:Date.now()}},o.buildMessagePlayerDeath=function(e,t,o,r){var i=n.PlayerDeath.create();return i.msgType=n.MessageType.PLAYER_DEATH,i.gameId=e,i.playerId=t,i.time=o,i.rank=r,i},o.buildMessagePlayerKill=function(e,t,o){var r=n.PlayerKill.create();return r.msgType=n.MessageType.PLAYER_KILL,r.gameId=e,r.playerId=t,r.time=o,r},o.buildMessageAttackResult=function(e,t,o,r){var i=n.Server_AttackResult.create();return i.msgType=n.MessageType.SERVER_ATTACKRESULT,i.gameId=e,i.victimPlayerId=o,i.killerPlayerId=t,i.damage=r,i.isValidated=!0,i.isResolved=!0,i},o.buildMessageBotCreationRequest=function(e){var t=n.BotCreationRequest.create();return t.msgType=n.MessageType.BOT_CREATION_REQUEST,t.gameId=e,t},o.buildMessageCommandDash=function(e,t,o,r,i,a,s){var c=n.CommandDash.create();return c.msgType=n.MessageType.COMMAND_DASH,c.commandTime=e,c.gameId=t,c.playerId=o,c.posX=r,c.posY=i,c.direction=a,c.energy=s,c},o.buildMessageCommandDrag=function(e,t,o,r,i,a){var s=n.CommandDrag.create();return s.msgType=n.MessageType.COMMAND_DRAG,s.commandTime=e,s.gameId=t,s.playerId=o,s.direction=r,s.posX=i,s.posY=a,s},o.buildMessageFullGameSessionState=function(e,t,o,r){var i=n.Server_FullGameState.create();return i.msgType=n.MessageType.SERVER_FULLGAMESTATE,i.gameId=e,i.gameState=t,i.gameClock=o,i.gameStateMsgID=r,i},o.buildMessageInitialGameState=function(e,t,o){var r=n.InitialGameState.create();return r.msgType=n.MessageType.INITIAL_GAME_STATE,r.gameId=e,r.gameParameters=o,r.playerList=t,r},o.buildMessageJoinGameRequest=function(e,t,o,r,i,a,s){var c=n.JoinGameRequest.create();return c.msgType=n.MessageType.JOIN_GAME_REQUEST,c.requestTime=e,c.playerId=t,c.playerName=o,c.isBot=r,c.sharkSkin=i,c.sharkSize=a,c.gameId=s,c},o.buildMessagePing=function(e){var t=n.Ping.create();return t.msgType=n.MessageType.PING,t.requesterTime=e,t},o.buildMessagePong=function(e,t){var o=n.Pong.create();return o.msgType=n.MessageType.PONG,o.requesterTime=e,o.responderTime=t,o},o.buildMessageTimeSyncRequest=function(e){var t=n.TimeSyncRequest.create();return t.msgType=n.MessageType.TIME_SYNC_REQUEST,t.requesterTime=e,t},o.buildMessageTimeSyncResponse=function(e,t){var o=n.TimeSyncResponse.create();return o.msgType=n.MessageType.TIME_SYNC_RESPONSE,o.requesterTime=e,o.responderTime=t,o},o.getMessageType=function(e){var t=r.Reader.create(e);return t.uint32()>>>3==1?t.int32():n.MessageType.NONE},cc._RF.pop()},{"./protobuf/hsaprotobuf":"hsaprotobuf","protobufjs/minimal":58}],Messages:[function(e,t,o){"use strict";cc._RF.push(t,"41aa2j7dCVOgaqBuWH6/prl","Messages"),Object.defineProperty(o,"__esModule",{value:!0}),o.BuildPlayerStateData=o.ClientMessage_PlayerDead=o.ClientMessage_PlayerDash=o.ClientMessage_PlayerAttackCommand=o.ClientMessage_PlayerStateData_Multi=o.ClientMessage_PlayerStateData=o.ClientMessage_PlayerExitGame=o.ClientMessage_BroadcastMessage=o.ClientMessage_RequestJoinGame=o.MessageType=void 0;var n=e("../../Shared/protobuf/hsaprotobuf");function r(e){if(e instanceof n.PlayerState)return e;var t=n.PlayerState.create();return t.stateMsgID=e.stateMsgID,t.netID=e.netID,t.lastPositionX=e.lastPosition.x,t.lastPositionY=e.lastPosition.y,t.lastState=e.lastState,t.score=e.score,t.hp=e.hp,e.lastDir&&(t.lastDirX=e.lastDir.x,t.lastDirY=e.lastDir.y),e.lastGuidedDir&&(t.lastGuidedDirX=e.lastGuidedDir.x,t.lastGuidedDirY=e.lastGuidedDir.y),t.curSize=e.curSize,t.lastSpeed=e.lastSpeed,t}o.MessageType={ClientRequestJoinGame:"ClientMsg_RequestJoinGame",ClientPing:"ClientMsg_Ping",ClientPlayerStateData:"ClientMsg_PlayerStateData",ClientPlayerStateData_Multi:"ClientMsg_PlayerStateData_Multi",ClientPlayerExitGame:"ClientMsg_ExitGame",ClientBroadcastMessage:"ClientMsg_BroadcastMessage",ServerGameStartingStatus:"ServerMsg_GameStartingStatus",ServerPing:"ServerMsg_Ping",ServerFullGameState:"ServerMsg_FullGameState",ServerOrderCreateBot:"ServerMsg_OrderCreateBot",ServerBroadcastMessage:"ServerMsg_BroadcastMessage",ServerBroadcastTechMessage:"ServerMsg_TechMessage"},o.ClientMessage_RequestJoinGame=function(e,t,o,r,i,a){void 0===a&&(a=0);var s=n.Client_RequestJoinGame.create();return s.msgType=n.MessageType.CLIENT_REQUESTJOINGAME,s.gameID=e,s.netID=o,s.playerName=t,s.skin=r,i&&(s.botOwnerNetID=i),s.startingSize=a,s},o.ClientMessage_BroadcastMessage=function(e,t,o,r,i){var a=n.BroadcastMessage.create();return a.msgType=n.MessageType.BROADCAST_MESSAGE,a.gameId=r,a.playerId=e,a.type=t,a.payload=o,a.timestamp=i,a},o.ClientMessage_PlayerExitGame=function(e,t){var o=n.ExitGame.create();return o.msgType=n.MessageType.EXIT_GAME,o.gameId=t,o},o.ClientMessage_PlayerStateData=function(e,t,o,i){var a=n.Client_PlayerStateData.create();return a.msgType=n.MessageType.CLIENT_PLAYERSTATEDATA,a.gameId=o,a.time=i,a.playerStates.push(r(e)),a},o.ClientMessage_PlayerStateData_Multi=function(e,t,o){var r=n.Client_PlayerStateData.create();return r.msgType=n.MessageType.CLIENT_PLAYERSTATEDATA_MULTI,r.gameId=t,r.time=o,r.playerStates=e,r},o.ClientMessage_PlayerAttackCommand=function(e,t,o){var i=n.Client_PlayerAttackCommand.create();return i.msgType=n.MessageType.CLIENT_PLAYERATTACKCOMMAND,i.gameID=o,i.sender=e.sender,i.attacker=e.attacker,i.target=e.target,i.damage=e.damage,i.playerState=r(t),i},o.ClientMessage_PlayerDash=function(e,t,o){var r=n.Client_PlayerDash.create();return r.msgType=n.MessageType.CLIENT_PLAYERDASH,r.gameID=t,r.netID=o,r.direction=e.direction,r.time=e.time,r.startPosX=e.startPos.x,r.startPosY=e.startPos.y,r.distanceRatio=e.distanceRatio,r},o.ClientMessage_PlayerDead=function(e,t,o,r){var i=n.PlayerDeath.create();return i.msgType=n.MessageType.PLAYER_DEATH,i.gameId=e,i.playerId=t,i.time=r,i.rank=o,i},o.BuildPlayerStateData=r,cc._RF.pop()},{"../../Shared/protobuf/hsaprotobuf":"hsaprotobuf"}],ModeButton:[function(e,t,o){"use strict";cc._RF.push(t,"85addauUUFO4LeKX2CqxScm","ModeButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcModeButton=void 0;var a=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),c=e("../../../GameFramework/Scripts/Localized/TimerLabelLocalized"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.infoButton=null,t.buttonNameLabel=null,t.progressBar=null,t.progressBarFill=null,t.highlight=null,t.lockedContents=null,t.unlockedContents=null,t.modeNameLabel=null,t.timerLabel=null,t.numbers=null,t.loadingIcon=null,t.crownIcon=null,t.crownIconProgressScale=.025,t.numberProgressScale=.18,t.numberProgressColor=cc.color(255,234,77),t.leftNumberLabel=null,t.rightNumberLabel=null,t}return r(t,e),t.prototype.onLoad=function(){this.leftNumberLabel=this.numbers.getChildByName("Left").getComponent(a.NgcLabelLocalized),this.rightNumberLabel=this.numbers.getChildByName("Right").getComponent(a.NgcLabelLocalized),this.crownIcon.active=!1},t.prototype.playLoadingAnimation=function(){this.loadingIcon.active=!0},t.prototype.update=function(e){this.loadingIcon.active&&(this.loadingIcon.angle-=550*e)},t.prototype.isLoading=function(){return this.loadingIcon.active},t.prototype.stopLoadingAnimation=function(){var e=this;this.loadingIcon.active&&cc.tween(this.loadingIcon).to(.25,{opacity:0},{easing:"cubicOut"}).call(function(){e.loadingIcon.active=!1}).start()},t.prototype.updateProgressNumber=function(e,t){null!=e&&(this.leftNumberLabel.string=e.toString()),null!=t&&(this.rightNumberLabel.string="/"+t.toString())},t.prototype.refreshContents=function(e,t,o){-1!==t?(this.timerLabel.node.parent.active=!0,this.timerLabel.startCount(t),o&&this.timerLabel.setTimerExpiredCallback(o)):this.timerLabel.node.parent.active=!1,s.NgcLocalizedManager.setTextKey(this.modeNameLabel.getComponent(a.NgcLabelLocalized),e)},i([p(cc.Node)],t.prototype,"background",void 0),i([p(cc.Node)],t.prototype,"infoButton",void 0),i([p(cc.Node)],t.prototype,"buttonNameLabel",void 0),i([p(cc.Node)],t.prototype,"progressBar",void 0),i([p(cc.Node)],t.prototype,"progressBarFill",void 0),i([p(cc.Node)],t.prototype,"highlight",void 0),i([p(cc.Node)],t.prototype,"lockedContents",void 0),i([p(cc.Node)],t.prototype,"unlockedContents",void 0),i([p(cc.Node)],t.prototype,"modeNameLabel",void 0),i([p(c.NgcTimerLabelLocalized)],t.prototype,"timerLabel",void 0),i([p(cc.Node)],t.prototype,"numbers",void 0),i([p(cc.Node)],t.prototype,"loadingIcon",void 0),i([p(cc.Node)],t.prototype,"crownIcon",void 0),i([p()],t.prototype,"crownIconProgressScale",void 0),i([p()],t.prototype,"numberProgressScale",void 0),i([p(cc.Color)],t.prototype,"numberProgressColor",void 0),i([u],t)}(cc.Component);o.NgcModeButton=d,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/Localized/TimerLabelLocalized":"TimerLabelLocalized"}],NameBar:[function(e,t,o){"use strict";cc._RF.push(t,"45dd5R/ymBG/KDFmNtyPuJb","NameBar");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sharkNameBG=null,t.nameBGList=[],t.sharkName=null,t.nameIconList=[],t.sharkIconType=null,t}return r(t,e),t.prototype.start=function(){},t.prototype.UpdateName=function(){},t.prototype.UpdateNameBar=function(e,t){this.sharkNameBG.spriteFrame=this.nameBGList[t],this.sharkName.setLocalizedText("HSA_SHARK_NAME"+(e+1)),this.sharkIconType.spriteFrame=this.nameIconList[t]},i([l(cc.Sprite)],t.prototype,"sharkNameBG",void 0),i([l([cc.SpriteFrame])],t.prototype,"nameBGList",void 0),i([l(a.NgcLabelLocalized)],t.prototype,"sharkName",void 0),i([l([cc.SpriteFrame])],t.prototype,"nameIconList",void 0),i([l(cc.Sprite)],t.prototype,"sharkIconType",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],NanoSrv:[function(e,t,o){"use strict";cc._RF.push(t,"e220aNZ3D5MpozjzQwW3nX/","NanoSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("crypto-js"),l=e("../../Core/helpers"),u=e("../../Core/Utils"),p=e("../../GameFramework/Scripts/BuildConfig"),d=e("../../GameFramework/Scripts/CountryFlagsManager"),f=e("../../GameFramework/Scripts/Network/NetUtils"),h=e("../../GameFramework/Scripts/NgcUserInfo"),g=e("../../Services/Platform/Platform"),y=e("../SDK"),m=l.createDebug();window.Debug=m;var _=function(e){function t(){var o=e.call(this)||this;return o.userID=null,o.gameID=null,o.initialized=!1,o.loggedIn=!1,o.devTimeOffsetMinutes=0,o.serviceURL="",o.loginAuthority="",o.uplayInfo={},o.loginData={},o.accessToken=null,o.randomNameDisabled=!1,t.inst&&cc.error("There are multiple places constructing NanoSrv!"),t.inst=o,o}return r(t,e),t.prototype._preInit=function(){var e=this;return new Promise(function(t){e.preInitialized=!0,t("NanoSrv pre-initialized")})},t.prototype._init=function(e){var t=this;return d.NgcCountryFlagsManager.getLocalCountry(),this.serviceURL=e.SDK.NanoSrv.url,this.gameID=e.platformGameID,0==this.serviceURL.length?new Promise(function(e,t){t('"Service url not set (Platform.env init data serviceURL field)"')}):this._readUserID()?(console.log("userID = "+this.userID),new Promise(function(e){t.initialized=!0,e("NanoSrv initialized")})):new Promise(function(e,t){t("NanoSrv Unable to determine or create new user ID")})},t.prototype._login=function(){var e=this;return new Promise(function(t,o){e.getAccessToken().catch(o).then(function(n){e.accessToken=n;var r=l.getTrackingParams({type:l.TrackType.Launching,from:"game",gameId:e.gameID},{encodeURLs:!0});e.sendTracking(r);var i=JSON.stringify(e.uplayInfo);e.serviceGet("/profile",i,function(n,r){if(n)return o(n);e.loginData=JSON.parse(r).data,t(r)})})})},t.prototype._getUsername=function(){return"uplay"==this.loginAuthority?this.uplayInfo.name:"Guest"},t.prototype._getCohort=function(){if(null==this.loginData)return"";var e=this.getCurGameData();return e?e.cohort:""},t.prototype.getCurGameData=function(){return null==this.loginData?null:this.loginData.playerData},t.prototype.getCurSocialInfo=function(){return null==this.loginData?null:this.loginData.socialInfo},t.prototype._getTotalSessions=function(){return h.default.totalSessions},t.prototype.isLoggedIn=function(){return!1},t.prototype.getUserID=function(){return""},t.prototype.getName=function(){return"Nano"},t.prototype._createFakeUserID=function(){return"~"+f.NgcNetUtils.generateRandomUUID()},t.prototype._readUserID=function(){return this.userID=h.default.userIdKey,!0},t.setAccessTokenOutOfDateCallback=function(e){t._accessTokenOutOfDateCallback=e},Object.defineProperty(t.prototype,"encrypt",{get:function(){return"Live"===p.NgcBuildConfig.deploymentEnvironment||!m.API},enumerable:!1,configurable:!0}),t.prototype.serviceGet=function(e,o,n){var r=this;u.Utils.getHttp(this.serviceURL+e,o,function(e,o){if(e){console.log("[NanoSrv] serviceGet > err = ",e);var i=JSON.parse(e);return"Outofdate"===(null==i?void 0:i.message)&&t._accessTokenOutOfDateCallback(),void n(e,null)}if(r.encrypt){var a=c.SHA256(h.default.secretKey).toString(c.enc.Base64),s=c.AES.decrypt(o,a).toString(c.enc.Utf8);n(null,s)}else n(null,o)},this.accessToken)},t.prototype.servicePost=function(e,o,n){var r=this;if(!g.NgcPlatform.isOfflineMode()){var i,a=c.SHA256(h.default.secretKey).toString(c.enc.Base64);if(this.encrypt){var s=JSON.parse(o);s&&(s.modified=Date.now());var l=c.AES.encrypt(JSON.stringify(s),a).toString();i=JSON.stringify({enc:l})}else i=o;var p=u.Utils.postHttp(this.serviceURL+e,i,"application/json",this.accessToken);p.then(function(e){if(r.encrypt){var t=c.AES.decrypt(e,a).toString(c.enc.Utf8);n(null,t)}else n(null,e)}),p.catch(function(e){e&&"Outofdate"===e.message&&t._accessTokenOutOfDateCallback(),n(e,null)})}},t.prototype.servicePostAsync=function(e,t){return a(this,void 0,Promise,function(){var o=this;return s(this,function(){return[2,new Promise(function(n,r){o.servicePost(e,t,function(e,t){e?r(e):n(t)})})]})})},t.prototype.getCurGameInfo=function(){return this.loginData.gameInfo},t.prototype.getAccessToken=function(){var e=this,o={playerId:this.userID,gameVersion:p.NgcBuildConfig.buildVersionName,secretKey:h.default.secretKey,gameId:this.gameID,platform:u.Utils.getUrlParameter("platform")||p.NgcBuildConfig.buildPlatform,referrerUrl:g.NgcPlatform.isRunFromApp()?"":l.getPageURL(),enc:this.encrypt},n=h.default.userAppId;return n&&(o.appUserId=n),console.log("@@@@@@@@@@@@ appUserId From NANO APP",n),new Promise(function(n,r){var i=e.serviceURL+"/auth/gettoken";u.Utils.postHttp(i,JSON.stringify(o)).catch(r).then(function(e){var o=JSON.parse(e);if(o){var i=o.data;if("BL"===i)return r(t.sitelockMsg);n(i.accessToken)}})})},t.prototype.sendTracking=function(e){if(this.accessToken){var t=JSON.stringify(e);this.servicePostAsync("/tdata",t)}else{var o=i(i({},e),{gameId:p.NgcBuildConfig.platformGameID,playerId:this.userID});t=JSON.stringify(o),u.Utils.postHttp(this.serviceURL+"/tdata_public",t,"application/json")}},t.prototype.refreshAccessToken=function(){return a(this,void 0,void 0,function(){var e=this;return s(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t,o){e.getAccessToken().then(function(o){e.accessToken=o,t()},function(e){o(e)})})];case 1:return t.sent(),[2]}})})},t.prototype.serviceGetAsync=function(e,t){var o=this;return void 0===t&&(t=null),new Promise(function(n,r){o.serviceGet(e,t,function(e,t){if(e)return r(e);n(t)})})},t.prototype._logout=function(){return new Promise(function(e){e()})},t.prototype.resetUserID=function(){var e=this;h.default.resetNgcData();var t=null;return window.accountLinked?(window.blockGameLoading=!0,this.randomNameDisabled=!0,t=new Promise(function(t,o){var n=setTimeout(function(){window.accountLinked&&(h.default.getNanoUserInfoFromLocalstorage(),clearInterval(n),e._init(p.NgcBuildConfig).then(function(){e._login().then(function(){e._onResetCompleted(),t()}).catch(function(){e._onResetFailed(),o()})}).catch(function(){e._onResetFailed(),o()}))},1e3)})):t=new Promise(function(t,o){e._init(p.NgcBuildConfig).then(function(){e._login().then(function(){e._onResetCompleted(),t()}).catch(function(){e._onResetFailed(),o()})}).catch(function(){e._onResetFailed(),o()})}),t},t.prototype._onResetCompleted=function(){t._onResetCompletedCallbacks.forEach(function(e){e&&e()})},t.prototype._onResetFailed=function(){console.error("[NanoSrv] onResetFailed")},t.setOnResetCallback=function(e){t._onResetCompletedCallbacks.includes(e)||t._onResetCompletedCallbacks.push(e)},t.removeOnResetCallback=function(e){cc.js.array.remove(t._onResetCompletedCallbacks,e)},t.inst=null,t.sitelockMsg="Black Listed",t._onResetCompletedCallbacks=[],t.LOCAL_STORAGE_USERID_KEY="_linseb",t}(y.NgcSDK);o.default=_,cc._RF.pop()},{"../../Core/Utils":"Utils","../../Core/helpers":"helpers","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../GameFramework/Scripts/Network/NetUtils":"NetUtils","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../Services/Platform/Platform":"Platform","../SDK":"SDK","crypto-js":28}],NavBarA2HSInstalledNotice:[function(e,t,o){"use strict";cc._RF.push(t,"43d9er40j5DDL0s7yQ6/tg8","NavBarA2HSInstalledNotice");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarA2HSInstalledNotice=void 0;var a=e("./NavBarDialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.show=function(){var e=this,t=cc.find("Canvas");this.node.parent=t,this.node.active=!0,this.node.setPosition(cc.v2(0,0)),this.node.opacity=0,cc.tween(this.node).to(.5,{opacity:255}).delay(1).to(.5,{opacity:0}).call(function(){e.hide()}).start()},t.prototype.hide=function(){this.node.active=!1,this.node.destroy()},t.urlPrefab="NavBarA2HSInstaledNotice",t.dialogType="NgcNavBarA2HSInstalledNotice",i([c],t)}(a.NgcNavBarDialogBase));o.NgcNavBarA2HSInstalledNotice=l,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarA2HSNotSupportTotally_Mobile:[function(e,t,o){"use strict";cc._RF.push(t,"dc05fYoAz1IgqolbDoGhHpW","NavBarA2HSNotSupportTotally_Mobile");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NavBarA2HSNotSupportTotally_Mobile=void 0;var a=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),s=e("./NavBarA2HSNoticeDialog"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pcBrowser=null,t}return r(t,e),t.prototype.onLoad=function(){this.pcBrowser.string="\u2022 Chrome\n\u2022 Firefox\n\u2022 Internet Explorer\n\u2022 Safari\n"+a.NgcLocalizedManager.t("AHS_CHROMIUM_BASED").text},t.dialogType="NavBarA2HSNotSupportTotally_Mobile",t.urlPrefab="NavBarA2HSNotSupportTotally_Mobile",i([u(cc.Label)],t.prototype,"pcBrowser",void 0),i([l],t)}(s.NgcNavBarA2HSNoticeDialog);o.NavBarA2HSNotSupportTotally_Mobile=p,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","./NavBarA2HSNoticeDialog":"NavBarA2HSNoticeDialog"}],NavBarA2HSNotSupport_Mobile:[function(e,t,o){"use strict";cc._RF.push(t,"30083oXbRRDR4ew4mHKFzZ5","NavBarA2HSNotSupport_Mobile");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NavBarA2HSNotSupport_Mobile=void 0;var a=e("./NavBarA2HSNoticeDialog"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.dialogType="NavBarA2HSNotSupport_Mobile",t.urlPrefab="NavBarA2HSNotSupport_Mobile",i([c],t)}(a.NgcNavBarA2HSNoticeDialog));o.NavBarA2HSNotSupport_Mobile=l,cc._RF.pop()},{"./NavBarA2HSNoticeDialog":"NavBarA2HSNoticeDialog"}],NavBarA2HSNotSupport_PC:[function(e,t,o){"use strict";cc._RF.push(t,"df6e5eb8tdNKa9nt2E3rhac","NavBarA2HSNotSupport_PC");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NavBarA2HSNotSupport_PC=void 0;var a=e("./NavBarA2HSNoticeDialog"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.dialogType="NavBarA2HSNotSupport_PC",t.urlPrefab="NavBarA2HSNotSupport_PC",i([c],t)}(a.NgcNavBarA2HSNoticeDialog));o.NavBarA2HSNotSupport_PC=l,cc._RF.pop()},{"./NavBarA2HSNoticeDialog":"NavBarA2HSNoticeDialog"}],NavBarA2HSNoticeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"c237dGk8rVLK5Kd+dy465i/","NavBarA2HSNoticeDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarA2HSNoticeDialog=void 0;var a=e("./NavBarDialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.safariNode=null,t.FFnode=null,t.edgeNode=null,t.pcNode=null,t.macNode=null,t}return r(t,e),t.prototype.start=function(){if(cc.sys.isMobile)this.safariNode&&this.FFnode&&this.edgeNode&&(this.safariNode.active=cc.sys.browserType===cc.sys.BROWSER_TYPE_SAFARI,this.FFnode.active=cc.sys.browserType===cc.sys.BROWSER_TYPE_FIREFOX,this.edgeNode.active=cc.sys.browserType===cc.sys.BROWSER_TYPE_EDGE);else if(this.pcNode&&this.macNode){var e=cc.sys.browserType===cc.sys.BROWSER_TYPE_SAFARI;this.pcNode.active=cc.sys.os!==cc.sys.OS_OSX||cc.sys.os===cc.sys.OS_OSX&&!e,this.macNode.active=cc.sys.os===cc.sys.OS_OSX&&e}},t.prototype.hide=function(){e.prototype.hide.call(this)},t.dialogType="NgcNavBarA2HSNoticeDialog",t.urlPrefab="NavBarA2HSInstaledNotice",i([l(cc.Node)],t.prototype,"safariNode",void 0),i([l(cc.Node)],t.prototype,"FFnode",void 0),i([l(cc.Node)],t.prototype,"edgeNode",void 0),i([l(cc.Node)],t.prototype,"pcNode",void 0),i([l(cc.Node)],t.prototype,"macNode",void 0),i([c],t)}(a.NgcNavBarDialogBase);o.NgcNavBarA2HSNoticeDialog=u,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarAboutDialog:[function(e,t,o){"use strict";cc._RF.push(t,"90482k8tLZBJa7twH0G37fj","NavBarAboutDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarAboutDialog=void 0;var a=e("../../../Core/Utils"),s=e("../../../GameFramework/Scripts/BuildConfig"),c=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),l=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),u=e("../../../GameFramework/Scripts/NgcUserInfo"),p=e("../../../NgcVersion"),d=e("../../../SDK/Nano/NanoSrv"),f=e("../../../Services/Platform/Platform"),h=e("./NavBarDialogBase"),g=cc._decorator,y=g.ccclass,m=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.versionLabel=null,t.mainLayout=null,t.supportCode=null,t.PRIVACY_POLICY_URL="https://legal.ubi.com/privacypolicy/",t.TERMS_AND_CONDITIONS_URL="https://legal.ubi.com/termsofuse",t.SUPPORT_CODE_DURATION=25056e5,t}return r(t,e),t.prototype.start=function(){var e="",t=this.mainLayout.node.getChildByName("privacy_policy_button"),o=this.mainLayout.node.getChildByName("terms_and_conditions");f.NgcPlatform.inst&&f.NgcPlatform.inst.getName()==a.Utils.enumToString(f.PlatformID,f.PlatformID.Poki)&&(t.active=!1,o.active=!1),f.NgcPlatform.inst&&f.NgcPlatform.inst.getName()==a.Utils.enumToString(f.PlatformID,f.PlatformID.GameDistribution)&&(e="Game Distribution ",t.active=!1,o.active=!1),f.NgcPlatform.inst&&f.NgcPlatform.inst.getName()==a.Utils.enumToString(f.PlatformID,f.PlatformID.HUZ)&&(t.active=!1,o.active=!1),s.NgcBuildConfig.offlineMode&&(t.active=!1,o.active=!1),f.NgcPlatform.isRunFromApp()&&(t.active=!1,o.active=!1),this.versionLabel.string=s.NgcBuildConfig.buildVersionName+"\n"+e+p.NgcVersionConfig.buildNgcVersion,this.mainLayout.updateLayout(),this.getSupportCode()},t.prototype.getSupportCode=function(){var e=this;if(f.NgcPlatform.isOfflineMode())this.supportCode.opacity=0;else{var t=this.supportCode.getChildByName("left"),o=this.supportCode.getChildByName("right"),n=null,r=null,i=Date.now();if(u.default.supportCode.length>0&&(n=u.default.supportCode.split("|")[0],r=parseInt(u.default.supportCode.split("|")[1])),r&&i-r>=this.SUPPORT_CODE_DURATION&&(n=null),n)return l.NgcLocalizedManager.setTextKey(t.getComponent(c.NgcLabelLocalized),"NGG_SUPPORT_CODE"),void(o.getComponent(c.NgcLabelLocalized).string=n);this.supportCode.opacity=0,d.default.inst.serviceGet("/supportcode",null,function(n,r){if(r){var a=JSON.parse(r).data;u.default.supportCode=a+"|"+i,l.NgcLocalizedManager.setTextKey(t.getComponent(c.NgcLabelLocalized),"NGG_SUPPORT_CODE"),o.getComponent(c.NgcLabelLocalized).string=a,cc.tween(e.supportCode).to(.25,{opacity:255}).start()}})}},t.prototype.onButtonCloseClick=function(){this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onButtonPrivacyClick=function(){cc.sys.openURL(this.PRIVACY_POLICY_URL)},t.prototype.onButtonTermsAndConditionsClick=function(){cc.sys.openURL(this.TERMS_AND_CONDITIONS_URL)},t.urlPrefab="NavBarAboutDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarAboutDialog",t.savedSupportCode=null,i([m(cc.Label)],t.prototype,"versionLabel",void 0),i([m(cc.Layout)],t.prototype,"mainLayout",void 0),i([m(cc.Node)],t.prototype,"supportCode",void 0),i([y],t)}(h.NgcNavBarDialogBase);o.NgcNavBarAboutDialog=_,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../NgcVersion":"NgcVersion","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Platform/Platform":"Platform","./NavBarDialogBase":"NavBarDialogBase"}],NavBarConfirmDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d4076QxIzBParflV+seqF4+","NavBarConfirmDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarConfirmDialog=void 0;var a=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("./NavBarDialogBase"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.messageLabel=null,t.headerNode=null,t._callBackOk=null,t._callBackClose=null,t}return r(t,e),t.prototype.init=function(e,t,o,n,r){void 0===r&&(r=!0),this._callBackOk=o,this._callBackClose=n,this.titleLabel.setLocalizedText(e),this.messageLabel.setLocalizedText(t),this.headerNode.active=r},t.prototype.okOnClick=function(){this._callBackOk,"function"==typeof this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.closeOnClick=function(){"function"==typeof this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.dialogType="NgcNavBarConfirmDialog",t.urlPrefab="NavBarConfirmDialog",i([u(a.NgcLabelLocalized)],t.prototype,"titleLabel",void 0),i([u(a.NgcLabelLocalized)],t.prototype,"messageLabel",void 0),i([u(cc.Node)],t.prototype,"headerNode",void 0),i([l],t)}(s.NgcNavBarDialogBase);o.NgcNavBarConfirmDialog=p,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","./NavBarDialogBase":"NavBarDialogBase"}],NavBarConflictDialog:[function(e,t,o){"use strict";cc._RF.push(t,"7b658de4NVEm5XFbT4JMqze","NavBarConflictDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NavBarConflicttDialog=void 0;var c=e("../../../GameFramework/Scripts/NgcMain"),l=e("./NavBarDialogBase"),u=e("./NavBarUserConflictInfo"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackOk=null,t.localSave=null,t.cloudSave=null,t}var o;return r(t,e),o=t,t.prototype.init=function(e){this._callBackOk=e,this.updateUserConflictInfo(),o.instancesQueue.push(this),this.resizeWidget(!0,.75,!0)},t.prototype.localSaveOnClick=function(){this._callBackOk&&this._callBackOk(!0),this.hideNode()},t.prototype.cloudSaveOnClick=function(){this._callBackOk&&this._callBackOk(!1),this.hideNode()},t.prototype.hideNode=function(){cc.js.array.remove(o.instancesQueue,this),this.hide()},t.prototype.updateUserConflictInfo=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(){return(e=c.NgcMain.inst.getCrossFeatureInst(c.CrossFeature.NavBarManager)).updateUserConflictInfoCallback&&e.updateUserConflictInfoCallback(this.localSave,this.cloudSave),[2]})})},t.staticHide=function(){o.instancesQueue.forEach(function(e){e.node&&e.hide()}),o.instancesQueue=[]},t.urlPrefab="NanoImplementation/CrossFeatures/NavBar/Prefab/NavBarConflictDialog",t.bundleName=null,t.dialogType="NavBarConflicttDialog",t.instancesQueue=[],i([f(u.NgcNavBarUserConflictInfo)],t.prototype,"localSave",void 0),i([f(u.NgcNavBarUserConflictInfo)],t.prototype,"cloudSave",void 0),o=i([d],t)}(l.NgcNavBarDialogBase);o.NavBarConflicttDialog=h,cc._RF.pop()},{"../../../GameFramework/Scripts/NgcMain":"NgcMain","./NavBarDialogBase":"NavBarDialogBase","./NavBarUserConflictInfo":"NavBarUserConflictInfo"}],NavBarDialogBase:[function(e,t,o){"use strict";cc._RF.push(t,"db17c5fcRlEA6QEbmErHOrw","NavBarDialogBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarDialogBase=void 0;var a=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.show=function(t){e.prototype.show.call(this,t),o.enqueStack.push(this)},t.prototype.hide=function(){var t=this;e.prototype.hide.call(this,function(){cc.js.array.remove(o.enqueStack,t)})},t.bundleName="02_dialog_navbar",t.enqueStack=[],o=i([c],t)}(a.NgcDialogBase));o.NgcNavBarDialogBase=l,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],NavBarEditNameDialog:[function(e,t,o){"use strict";cc._RF.push(t,"32eb8KY1HROqbXo4cM23GoR","NavBarEditNameDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarEditNameDialog=void 0;var c=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),l=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),u=e("../../../GameFramework/Scripts/NgcMain"),p=e("../../../GameFramework/Scripts/NgcUserInfo"),d=e("../../../GameFramework/Scripts/ProfanityCheck"),f=e("../../../Services/Telemetry/Telemetry"),h=e("./NavBarDialogBase"),g=e("../../../GameFramework/Scripts/Screens/NgcStartMain"),y=e("../../../Services/Platform/Platform"),m=cc._decorator,_=m.ccclass,v=m.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.grayBGSF=null,t.redBGSF=null,t.nameNotAllowNode=null,t.editBox=null,t.okButton=null,t.loadingNode=null,t.renameSuccessNode=null,t.editBoxAnim=null,t.wrongNameAnimName=null,t.showSuccessName=null,t.hideSuccessName=null,t.isHiding=!1,t.MAX_NAME_LENGTH=12,t.WRONG_PROFANITY_NAME="NAV_NAME_NOT_ALLOW",t.MAX_CHARACTER_REACHED="NAV_MAX_CHARACTER_REACHED",t.NAME_IS_EMPTY="NAV_NAME_IS_EMPTY",t}return r(t,e),t.prototype.start=function(){this.editBox.string=p.default.localUserName,this.nameNotAllowNode.active=!1,this.okButton.interactable=!0,this.editBoxAnim=this.editBox.getComponent(cc.Animation),this.wrongNameAnimName=this.editBoxAnim.defaultClip.name,this.showSuccessName=cc.tween().to(.1,{y:10}).to(.1,{y:20}),this.hideSuccessName=cc.tween().to(.1,{y:10}).to(.1,{y:-120}),this.editBox.maxLength=-1,this.editBox.textLabel.node.color=cc.Color.BLACK,this.editBox.textLabel.enableBold=!1},t.prototype.onEditBoxBegan=function(){var e=this.editBox.placeholderLabel.getComponent(c.NgcLabelLocalized);l.NgcLocalizedManager.setTextKey(e,"NAV_ENTER_NAME_HERE"),cc.sys.isMobile&&cc.view.resizeWithBrowserSize(!1)},t.prototype.onEditBoxEnd=function(){cc.sys.isMobile&&cc.view.resizeWithBrowserSize(!0)},t.prototype.onEditReturn=function(){this.onOkButtonClick()},t.prototype.onTextChanged=function(){this.renameSuccessNode.active=!1,this.editBox.string.length>this.MAX_NAME_LENGTH?(this.editBox.textLabel.string=this.editBox.string=this.editBox.string.substr(0,this.MAX_NAME_LENGTH),this.nameNotAllowNode.getComponent(c.NgcLabelLocalized).setLocalizedText(this.MAX_CHARACTER_REACHED),this.nameNotAllowNode.active=!0,this.editBox.blur()):this.nameNotAllowNode.active=!1,0===this.editBox.string.length?this.okButton.interactable=!1:this.okButton.interactable=!0},t.prototype.onOkButtonClick=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return this.loadingNode.active=!0,[4,d.NgcProfanityCheck.check(this.editBox.string)];case 1:return e=t.sent(),this.nameNotAllowNode.active=!e.status,this.loadingNode.active=!1,this.okButton.interactable=!1,e.status?0==this.editBox.string.length?(this.nameNotAllowNode.getComponent(c.NgcLabelLocalized).setLocalizedText(this.NAME_IS_EMPTY),this.editBox.backgroundImage=this.redBGSF,this.editBoxAnim.play(this.wrongNameAnimName),[2]):(this.editBox.backgroundImage=this.grayBGSF,p.default.localUserName=u.NgcMain.inst.localUserName=this.editBox.string,p.default.changedName=!0,u.NgcMain.inst.updateNameToNanosrv(function(){g.default.inst.updateNameBox()}),this._callback&&this._callback(p.default.localUserName),f.NgcTelemetry.inst.LogEvent_NameEvent(this.editBox.string),y.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_CHANGENAME:!0}),"*"),this.hide(),[2]):(this.nameNotAllowNode.getComponent(c.NgcLabelLocalized).setLocalizedText(this.WRONG_PROFANITY_NAME),this.editBox.backgroundImage=this.redBGSF,this.editBoxAnim.play(this.wrongNameAnimName),[2])}})})},t.prototype.onChangeNameCB=function(e){this._callback=e},t.prototype.hide=function(){e.prototype.hide.call(this),p.default.changeNameLocation=""},t.prototype.showSuccessText=function(){this.renameSuccessNode.active=!0,this.renameSuccessNode.opacity=0,cc.tween(this.renameSuccessNode).to(.2,{opacity:255}).start()},t.urlPrefab="NavBarEditNameDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarEditNameDialog",i([v(cc.SpriteFrame)],t.prototype,"grayBGSF",void 0),i([v(cc.SpriteFrame)],t.prototype,"redBGSF",void 0),i([v(cc.Node)],t.prototype,"nameNotAllowNode",void 0),i([v(cc.EditBox)],t.prototype,"editBox",void 0),i([v(cc.Button)],t.prototype,"okButton",void 0),i([v(cc.Node)],t.prototype,"loadingNode",void 0),i([v(cc.Node)],t.prototype,"renameSuccessNode",void 0),i([_],t)}(h.NgcNavBarDialogBase);o.NgcNavBarEditNameDialog=S,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../GameFramework/Scripts/ProfanityCheck":"ProfanityCheck","../../../GameFramework/Scripts/Screens/NgcStartMain":"NgcStartMain","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","./NavBarDialogBase":"NavBarDialogBase"}],NavBarFBBrowserDialog:[function(e,t,o){"use strict";cc._RF.push(t,"45d5bls0C1HbKpwLhaMd7n7","NavBarFBBrowserDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./NavBarDialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackClose=null,t}return r(t,e),t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.dialogType="NgcNavBarFBBrowserDialog",t.urlPrefab="NavBarFBBrowserDialog",i([c],t)}(a.NgcNavBarDialogBase));o.default=l,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarFBPagePluginDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d9f2eogqodM5K3wR22A1T4o","NavBarFBPagePluginDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarFBPagePluginDialog=void 0;var a=e("./NavBarDialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fbPage=null,t.FACEBOOK_PAGE_IFRAME_SRC="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2FUbisoft-Nano-106342894560936&tabs=timeline&width=340&height=500&small_header=false&adapt_container_width=true&hide_cover=false&show_facepile=true&appId",t}return r(t,e),t.prototype.start=function(){this.fbPage=document.getElementsByClassName("fb-container")[0];var e=document.getElementById("fbPage-iframe");this.fbPage&&(e.src=this.FACEBOOK_PAGE_IFRAME_SRC,this.fbPage.style.position="absolute",this.fbPage.style.top="50%",this.fbPage.style.left="50%",this.fbPage.style.transform="translate(-50%, -50%)",this.fbPage.style.zIndex="1")},t.prototype.hide=function(){e.prototype.hide.call(this),this.fbPage&&(this.fbPage.style.zIndex="-1")},t.dialogType="NgcNavBarFBPagePluginDialog",t.urlPrefab="NavBarFBPagePluginDialog",i([c],t)}(a.NgcNavBarDialogBase));o.NgcNavBarFBPagePluginDialog=l,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarGDPRDialog:[function(e,t,o){"use strict";cc._RF.push(t,"4e4c0xCwCJEDIKS+7vH0bh3","NavBarGDPRDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.GDPR_STEPS=void 0;var a,s=e("./NavBarDialogBase"),c=cc._decorator,l=c.ccclass,u=c.property;(function(e){e[e.ASK_COOKIES=0]="ASK_COOKIES",e[e.SET_COOKES=1]="SET_COOKES"})(a=o.GDPR_STEPS||(o.GDPR_STEPS={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackOk=null,t._callBackClose=null,t.stepsCookies=[],t.refuseNode=null,t.emoteActions=[],t.imgSprite=null,t}return r(t,e),t.prototype.registryListener=function(){cc.sys.isMobile?(this.refuseNode.on(cc.Node.EventType.TOUCH_START,this.targetRefuse.bind(this)),this.refuseNode.on(cc.Node.EventType.TOUCH_CANCEL,this.unTargetRefuse.bind(this))):(this.refuseNode.on(cc.Node.EventType.MOUSE_MOVE,this.targetRefuse.bind(this)),this.refuseNode.on(cc.Node.EventType.MOUSE_LEAVE,this.unTargetRefuse.bind(this)))},t.prototype.start=function(){this.registryListener()},t.prototype.destroyListener=function(){},t.prototype.targetRefuse=function(){this.onHoldRefuseBtn(!0)},t.prototype.unTargetRefuse=function(){this.onHoldRefuseBtn(!1)},t.prototype.onHoldRefuseBtn=function(e){this.imgSprite.spriteFrame=e?this.emoteActions[1]:this.emoteActions[0]},t.prototype.moveToStep=function(e){this.stepsCookies.forEach(function(e){e.active=!1}),this.stepsCookies[e].active=!0},t.prototype.init=function(e,t){void 0===t&&(t=null),this._callBackOk=e,this._callBackClose=t,this.moveToStep(a.ASK_COOKIES)},t.prototype.okOnClick=function(){this.hide()},t.prototype.refuseOnClick=function(){this.hide()},t.prototype.acceptOnClick=function(){this.hide()},t.prototype.settingOnClick=function(){this.moveToStep(a.SET_COOKES)},t.prototype.backOnClick=function(){this.moveToStep(a.ASK_COOKIES)},t.prototype.hide=function(){this.destroyListener(),e.prototype.hide.call(this)},t.NavBarGDPR_Mobile="NavBarGPDR_Mobile",t.NavBarGDPR_PC="NavBarGPDR_PC",t.dialogType="NgcNavBarGDPRDialog",i([u(cc.Node)],t.prototype,"stepsCookies",void 0),i([u(cc.Node)],t.prototype,"refuseNode",void 0),i([u(cc.SpriteFrame)],t.prototype,"emoteActions",void 0),i([u(cc.Sprite)],t.prototype,"imgSprite",void 0),i([l],t)}(s.NgcNavBarDialogBase);o.default=p,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarHowToPlayDialog:[function(e,t,o){"use strict";cc._RF.push(t,"e6bb2EoDBtE2oIQtEltGAzR","NavBarHowToPlayDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarHowToPlayDialog=void 0;var a=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),s=e("../../Tips/Script/TipManager"),c=e("./NavBarDialogBase"),l=e("./NavBarTipItem"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipItem=null,t.scrollView=null,t.tips=[],t}return r(t,e),t.prototype.start=function(){var e=this;this.tips=s.NgcTipManager.getLoadingHints();var t=s.NgcTipManager.getLocalizationTexts();this.tips.forEach(function(o){var n,r=cc.instantiate(e.tipItem),i=r.getComponent(l.NgcNavBarTipItem);i.tipLabel.string=s.NgcTipManager.isUsingRemoteConfig?(n=t[o.textKey][a.NgcLocalizedManager.curLang])?n.replace(/\\n/gi,"\n"):"":a.NgcLocalizedManager.t(o.textKey).text,i.tipImg.spriteFrame=o.spriteFrame,r.parent=e.scrollView.content})},t.prototype.onButtonCloseClick=function(){this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.dialogType="NgcNavBarHowToPlayDialog",t.urlPrefab="NavBarHowToPlayDialog",i([d(cc.Prefab)],t.prototype,"tipItem",void 0),i([d(cc.ScrollView)],t.prototype,"scrollView",void 0),i([p],t)}(c.NgcNavBarDialogBase);o.NgcNavBarHowToPlayDialog=f,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../Tips/Script/TipManager":"TipManager","./NavBarDialogBase":"NavBarDialogBase","./NavBarTipItem":"NavBarTipItem"}],NavBarItemSelectLanguage:[function(e,t,o){"use strict";cc._RF.push(t,"98ef35kBepPoIfUalI8lXq+","NavBarItemSelectLanguage");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarItemSelectLanguage=void 0;var a=e("./NavBarDialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameItem="",t.languageCode="",t.iconCheckSprite=null,t.languageLb=null,t.backGroundNode=null,t.iconChecked=null,t.iconUnchecked=null,t.callBackFn=null,t.COLOR_UNCHECKED="#FFFFFF",t.COLOR_CHECKED="#B4CDE3",t}return r(t,e),Object.defineProperty(t.prototype,"isSelected",{get:function(){return this._isSelected},set:function(e){this._isSelected=e,this._isSelected?(this.iconCheckSprite.spriteFrame=this.iconChecked,this.backGroundNode.color=this.backGroundNode.color.fromHEX(this.COLOR_CHECKED)):(this.iconCheckSprite.spriteFrame=this.iconUnchecked,this.backGroundNode.color=this.backGroundNode.color.fromHEX(this.COLOR_UNCHECKED))},enumerable:!1,configurable:!0}),t.prototype.setInfo=function(e,t,o,n,r){this.nameItem=t,this.languageLb.string=t,this.languageCode=o,this.isSelected=n,this.callBackFn=r},t.prototype.onClick=function(){this.isSelected||(this.isSelected=!0,this.callBackFn&&this.callBackFn(this.languageCode))},t.dialogType="NgcNavBarItemSelectLanguage",t.urlPrefab="NavBarItemSelectLanguage",i([l],t.prototype,"nameItem",void 0),i([l],t.prototype,"languageCode",void 0),i([l(cc.Sprite)],t.prototype,"iconCheckSprite",void 0),i([l(cc.Label)],t.prototype,"languageLb",void 0),i([l(cc.Node)],t.prototype,"backGroundNode",void 0),i([l(cc.SpriteFrame)],t.prototype,"iconChecked",void 0),i([l(cc.SpriteFrame)],t.prototype,"iconUnchecked",void 0),i([c],t)}(a.NgcNavBarDialogBase);o.NgcNavBarItemSelectLanguage=u,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarLeaveGameDialog:[function(e,t,o){"use strict";cc._RF.push(t,"2e7f5iSO01Ou7FOix0uwSOa","NavBarLeaveGameDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./NavBarDialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callLeave=null,t}var o;return r(t,e),o=t,t.prototype.show=function(){e.prototype.show.call(this),o.isOpening=!0},t.prototype.start=function(){},t.prototype.init=function(e,t){void 0===t&&(t=null),this._callLeave=e},t.prototype.onClickLeaveBtn=function(){window.allowBack=!0,history.back(),this.hide()},t.prototype.onClickCancelBtn=function(){this.hide()},t.prototype.hide=function(){o.isOpening=!1,e.prototype.hide.call(this)},t.dialogType="NgcNavBarLeaveGameDialog",t.urlPrefab=cc.sys.isMobile?"NavBarConfirmLeave_Mobile":"NavBarConfirmLeave_PC",t.isOpening=!1,o=i([c],t)}(a.NgcNavBarDialogBase));o.default=l,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarLoginSocialDialog:[function(e,t,o){"use strict";cc._RF.push(t,"02bb3l5unNA1JLDDrLH60/p","NavBarLoginSocialDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarLoginSocialDialog=void 0;var c=e("../../../GameFramework/Scripts/BuildConfig"),l=e("../../../GameFramework/Scripts/NgcMain"),u=e("../../../Services/Leaderboard/Leaderboard"),p=e("../../../Services/Platform/Platform"),d=e("../../../Services/Social/Social"),f=e("../../../Services/Telemetry/Telemetry"),h=e("../../TechMessage/Script/TechMessages"),g=e("./NavBarDialogBase"),y=e("./NavBarManager"),m=cc._decorator,_=m.ccclass,v=m.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fbLogin=null,t.uplayLogin=null,t}return r(t,e),t.prototype.init=function(e){this.onSocialLoginCallBack=e},t.prototype.show=function(){1!==d.NgcSocial.srvInstances.length?e.prototype.show.call(this):this.onLoginButtonClick(d.NgcSocial.inst.getSocialType())},t.prototype.onFacebookLoginClick=function(){h.default.showWarningLoginWithWebview()||this.onLoginButtonClick(d.SocialType.Facebook)},t.prototype.onUplayLoginClick=function(){h.default.showWarningLoginWithWebview()||this.onLoginButtonClick(d.SocialType.Uplay)},t.prototype.onLoginButtonClick=function(e){return a(this,void 0,void 0,function(){var t,o,n,r;return s(this,function(i){switch(i.label){case 0:return t=!1,c.NgcBuildConfig.serverSplitting?[4,p.NgcPlatform.inst.isWebLoginPopupOpen()]:[3,2];case 1:o=i.sent(),t=d.NgcSocial.inst&&d.NgcSocial.inst.isLoginPopUpOpen()||o,this.fbLogin.interactable=this.uplayLogin.interactable=!t,i.label=2;case 2:if(!t){if(n=this.onSocialLoginCallBack,p.NgcPlatform.inst.isCallbackFromHost=!1,f.NgcTelemetry.inst.LogEvent_LoginAttempt(d.NgcSocial.inst.getName()),d.NgcSocial.inst=d.NgcSocial.getSrvInstance(e),r=this,n&&n(null,"onPreLogin"),d.NgcSocial.inst.login(function(e,t){e?n&&n(e,null):("Conflict"===t?l.NgcMain.inst.resolveSocialConflict(function(e,t){n&&n(e,t),r.onLoginSuccess()}):(n&&n(null,"login"),r.onLoginSuccess()),f.NgcTelemetry.inst.LogEvent_LoginSuccess("fb:"+d.NgcSocial.inst.getSocialID(),{Name:d.NgcSocial.inst.getFormatName(),AvatarUrl:d.NgcSocial.inst.getProfilePictureUrl(),FriendList:d.NgcSocial.inst.getFriendsData()}))}),n)return this.node.active=!1,[2];this.hide()}return[2]}})})},t.prototype.onButtonCloseClick=function(){"function"==typeof this.onSocialLoginCallBack&&this.onSocialLoginCallBack(null,"close"),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this),this.fbLogin.interactable=this.uplayLogin.interactable=!0},t.prototype.onLoginSuccess=function(){y.NgcNavBarManager.inst.updateListEffectBtn(),y.NgcNavBarManager.inst.setNavBarInfo(),u.NgcLeaderboard.inst.clearCacheRequestData(),p.NgcPlatform.inst.onSocialLogInFromGame()},t.urlPrefab="NavBarLoginSocialDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarLoginSocialDialog",t.uplayLoginWindow=null,i([v(cc.Button)],t.prototype,"fbLogin",void 0),i([v(cc.Button)],t.prototype,"uplayLogin",void 0),i([_],t)}(g.NgcNavBarDialogBase);o.NgcNavBarLoginSocialDialog=S,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../Services/Leaderboard/Leaderboard":"Leaderboard","../../../Services/Platform/Platform":"Platform","../../../Services/Social/Social":"Social","../../../Services/Telemetry/Telemetry":"Telemetry","../../TechMessage/Script/TechMessages":"TechMessages","./NavBarDialogBase":"NavBarDialogBase","./NavBarManager":"NavBarManager"}],NavBarManager:[function(e,t,o){"use strict";cc._RF.push(t,"b2e69kLRItBnZ59jZWRHkuQ","NavBarManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},l=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,r++)n[r]=i[a];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarManager=o.BottomButton=o.ScrollViewButton=o.NavBarState=void 0;var u,p,d,f=e("../../../Core/Utils"),h=e("../../../GameFramework/Scripts/Ads/NgcAdsManager"),g=e("../../../GameFramework/Scripts/BuildConfig"),y=e("../../../GameFramework/Scripts/CountryFlagsManager"),m=e("../../../GameFramework/Scripts/NgcMain"),_=e("../../../GameFramework/Scripts/NgcScreenManager"),v=e("../../../GameFramework/Scripts/NgcUserInfo"),S=e("../../../SDK/Nano/NanoSrv"),b=e("../../../Services/Inventory/Inventory"),N=e("../../../Services/Platform/Platform"),P=e("../../../Services/Social/Social"),C=e("../../../Services/Telemetry/Telemetry"),w=e("../../DailyReward/Script/DailyRewardManager"),T=e("../../Dialogs/Script/MessageDialog/MessageDialog"),I=e("../../Dialogs/Script/NgcDialogManager"),R=e("../../EdgeExclusive/Script/EdgeExclusiveManager"),O=e("../../GameMode/Script/NgcGameModeManager"),E=e("./NavBarA2HSInstalledNotice"),k=e("./NavBarA2HSNotSupportTotally_Mobile"),A=e("./NavBarA2HSNotSupport_Mobile"),B=e("./NavBarA2HSNotSupport_PC"),D=e("./NavBarAboutDialog"),M=e("./NavBarConfirmDialog"),L=e("./NavBarDialogBase"),F=e("./NavBarEditNameDialog"),G=e("./NavBarFBBrowserDialog"),U=e("./NavBarFBPagePluginDialog"),j=e("./NavBarHowToPlayDialog"),x=e("./NavBarLoginSocialDialog"),z=e("./NavBarNoticeDialog"),H=e("./NavBarSettingsDialog"),W=e("./NavBarShareDialog"),V=e("./NgcA2HSManager.ts"),Y=cc._decorator,K=Y.ccclass,q=Y.property;(function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide"})(u=o.NavBarState||(o.NavBarState={})),function(e){e.Login="Login",e.AddToHome="AddToHome",e.Share="Share",e.HowToPlay="HowToPlay",e.OriginalGames="RabbidsGames",e.LikeUs="LikeUs",e.MoreGames="MoreGame"}(p=o.ScrollViewButton||(o.ScrollViewButton={})),function(e){e.Setting="Setting",e.About="Info",e.LogOut="logOut"}(d=o.BottomButton||(o.BottomButton={}));var X,J=i(i({},p),d);(function(e){e[e.Support=0]="Support",e[e.Alternative=1]="Alternative",e[e.NotSupport=2]="NotSupport"})(X||(X={}));var Q=cc.sys.openURL;cc.sys.openURL=function(e){N.NgcPlatform.isRunFromApp()?N.NgcPlatform.inst&&N.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_OPENURL:e}),"*"):Q.call(this,e)};var Z=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.mainContent=null,t.colorBand=null,t.colorAnim=null,t.editNode=null,t.logedInTxtNode=null,t.scrollViewLayOutNode=null,t.bottomLayoutNode=null,t.profileNode=null,t.userAvatarSprite=null,t.countryFlagSprite=null,t.playerNameLabel=null,t.socialName=null,t.defaultAvatar=null,t.addToHomeIcon=null,t.addToHomeSF_Moblie=null,t.addToHomeSF_PC=null,t.addToHomeMobiletxt=null,t.addToHomePCtxt=null,t.effectMainBtn=null,t.effectA2HSBtn=null,t.effectShareGameBtn=null,t.effectLoginBtn=null,t.moreGameSprite=null,t.flashAnims=[],t.navOnOFFButton=null,t.backToAppButton=null,t.buttons=null,t.NANO_FB_PAGE="https://www.facebook.com/UbisoftMobile",t.LOG_OUT_TITTLE="NAV_LOG_OUT",t.LOG_OUT_MSG="SNS_LOG_OUT_MSG",t._sendHideAdsTrackerInNavBar=null,t._navBarConfig=null,t.onNavBarClose=null,t.onNavBarShow=null,t.updateUserConflictInfoCallback=null,t._isFirstTimeCheckA2HS=!0,t._curState=null,t._isMoving=!1,t._xPosMainHide=0,t._xPosMainShow=0,t._xPosButtonsHide=0,t._xPosButtonShow=0,t.listNoticeButtons=[],t._navBtnMoving=!1,t._touchStartTimer=0,t.playerRankSpriteNode=null,t.onSocialCallBack=null,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"navBarConfig",{get:function(){return this._navBarConfig},set:function(e){this._navBarConfig=e},enumerable:!1,configurable:!0}),t.prototype.getNavBarConfig=function(){if(null===this.navBarConfig)if(N.NgcPlatform.isOfflineMode()){var e=g.NgcBuildConfig.services.NavBar;this.navBarConfig={loginButton:e.loginButton,installAppButton:e.addToHomeButton,shareGameButton:e.shareButton,howToPlayButton:e.howtoPlayButton,moreGamesButton:e.moreGamesButton,shareUrl:e.shareUrl,originalGameButton:e.currentGamesButton,likeUsButton:e.likeUsButton,settingsButton:e.settingButton,aboutButton:e.abountButton}}else{var t=S.default.inst&&S.default.inst.getCurGameInfo()&&S.default.inst.getCurGameInfo().gameParams||{};this.navBarConfig=t&&t.navbar||{}}return this.navBarConfig},t.prototype.setOnNavBarCloseCallback=function(e){this.onNavBarClose=e},t.prototype.setOnNavBarShowCallback=function(e){this.onNavBarShow=e},t.prototype.setUpdateConflictInfoCallBack=function(e){this.updateUserConflictInfoCallback=e},t.prototype.setHideAdsTracker=function(e){this._sendHideAdsTrackerInNavBar=e},Object.defineProperty(t.prototype,"curState",{get:function(){return this._curState},set:function(e){var t=this;if(this._curState!=e){this._isMoving=!0;var o=this._xPosMainHide,n=this._xPosButtonsHide,r=0,i=0,a=0,s=[];switch(this.scrollViewLayOutNode.children.forEach(function(e){e.active&&s.push(e)}),e){case u.Hide:o=this._xPosMainHide,n=this._xPosButtonsHide,r=500,i=0,a=.03*s.length,this.effectMainBtn.active=!0;break;case u.Show:this.onNavBarShow&&this.onNavBarShow(),h.default.inst.hide(),o=this._xPosMainShow,n=this._xPosButtonShow,r=480,i=120,this.effectMainBtn.active=!1}cc.tween(this.mainContent).delay(a).to(.2,{x:o}).call(function(){t._isMoving=!1,e==u.Hide&&t.onNavBarClose&&t.onNavBarClose()}).start(),cc.tween(this.profileNode).to(.25,{x:n}).start(),s.forEach(function(e,t){cc.tween(e).to(.3+.05*t,{x:n}).start()}),this.background.active=!0,cc.tween(this.background).to(.2,{opacity:i}).call(function(){t.background.active=e==u.Show}).start(),this._curState=e,cc.tween(this.effectMainBtn.parent).parallel(cc.tween().to(.1,{scaleX:1.6}).to(.1,{scaleX:1}),cc.tween().to(.3,{x:520}).delay(.2).to(.2,{x:r})).start(),cc.tween(this.colorBand).to(.3,{scaleX:3}).delay(.2).to(.2,{scaleX:1}).start(),this.updateListEffectBtn()}},enumerable:!1,configurable:!0}),t.prototype.isPopUpShowing=function(){return 0!=L.NgcNavBarDialogBase.enqueStack.length},t.prototype.getShowingPopUp=function(){return L.NgcNavBarDialogBase.enqueStack},t.prototype.onLoad=function(){o.inst=this,this.buttons=new Map,this.initButtons(),this.getNavBarConfig()||console.error("Navigation bar configuration from Nano service is unavailable"),m.NgcMain.inst.setCrossFeatureInst(m.CrossFeature.NavBarManager,this),this.setUpdateConflictInfoCallBack(m.NgcMain.inst.updateUserConflictInfo.bind(this))},t.prototype.initButtons=function(){for(var e=0,t=Object.keys(p);e<t.length;e++){var o=t[e],n=p[o];this.buttons.set(n,this.scrollViewLayOutNode.getChildByName(n))}for(var r=0,i=Object.keys(d);r<i.length;r++)o=i[r],n=d[o],this.buttons.set(n,this.bottomLayoutNode.getChildByName(n));_.default.inst.setNavBarIconNode(this.navOnOFFButton)},t.prototype.start=function(){this.navOnOFFButton||(this.navOnOFFButton=this.mainContent.getChildByName("ButtonOnOffNavBar")),this.navOnOFFButton.on("touchstart",this.onTouchStart.bind(this)),this.navOnOFFButton.on("touchmove",this.onTouchMove.bind(this)),this.navOnOFFButton.on("touchend",this.onTouchEnd.bind(this)),cc.sys.isMobile?window.addEventListener("resize",this.updateOnOffButtonPos.bind(this)):cc.view.on("canvas-resize",this.updateOnOffButtonPos.bind(this),this),this.init(),this.node.active=!1,N.NgcPlatform.isOfflineMode()&&f.findNode(this,/scrollview>view>layout$/).children.forEach(function(e){e.active="HowToPlay"==e.name})},t.prototype.onTouchStart=function(){this._navBtnMoving=!1,this._touchStartTimer=Date.now()},t.prototype.onTouchMove=function(e){if(this._curState!==u.Show){var t=this.mainContent.getChildByName("LimitBottom"),o=cc.view.getDesignResolutionSize().height-g.NgcBuildConfig.services.Ads.bannerHeight-this.navOnOFFButton.height,n=f.Utils.getWorldPos(t).y,r=e.getLocationY();if(!(r>o||r<n||Date.now()-this._touchStartTimer<100)){var i=this.navOnOFFButton.getComponent(cc.Widget);this._navBtnMoving=!0,i.enabled=!1;var a=f.Utils.getWorldPos(this.navOnOFFButton);f.Utils.setWorldPos(this.navOnOFFButton,cc.v2(a.x,r))}}},t.prototype.onTouchEnd=function(){if(this._navBtnMoving){var e=this.navOnOFFButton.getComponent(cc.Widget);if(e){var t=f.Utils.getWorldPos(this.navOnOFFButton).y,o=cc.find("Canvas");e.top=o.height-(t+this.navOnOFFButton.height/2),e.enabled=!0}}(Date.now()-this._touchStartTimer<100||!this._navBtnMoving)&&this.mainBtnOnClick(),this._navBtnMoving=!1},t.prototype.updateOnOffButtonPos=function(){var e=this.navOnOFFButton.getComponent(cc.Widget);e.target=cc.find("Canvas");var t=g.NgcBuildConfig.services.Ads.bannerHeight*cc.view.getDesignResolutionSize().height/cc.view.getFrameSize().height;e.top=t+this.navOnOFFButton.height,e.updateAlignment()},t.prototype.init=function(){var e=this;this.updateOnOffButtonPos(),this.background.opacity=0,this.background.active=!1,this._xPosMainShow=0,this._xPosButtonShow=20,this._xPosMainHide=-this.mainContent.width-this.colorBand.width,this._xPosButtonsHide=this._xPosMainHide,this.mainContent.x=this._xPosMainHide,this._curState=u.Hide,this.scrollViewLayOutNode.children.forEach(function(t){t.x=e._xPosMainHide}),this.colorAnim.scaleY=this.colorBand.height/840,this.applyPlatformType(),this.updateListEffectBtn(),S.default.setOnResetCallback(this.onNanoSrvResetCallback),this.checkAndShowA2HSOnStart(),this.backToAppButton.active=N.NgcPlatform.isRunFromApp(),this.backToAppButton.getComponent(cc.Widget).alignMode=cc.Widget.AlignMode.ALWAYS},t.prototype.onBackToAppButtonClick=function(){return s(this,void 0,void 0,function(){return c(this,function(){return this.curState=u.Hide,this.onBackToAppOK(),[2]})})},t.prototype.onQuitGame=function(){return s(this,void 0,void 0,function(){var e,t;return c(this,function(o){switch(o.label){case 0:return this.curState=u.Hide,[4,I.NgcDialogManager.createDialog(M.NgcNavBarConfirmDialog.dialogType,M.NgcNavBarConfirmDialog.urlPrefab,M.NgcNavBarConfirmDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(M.NgcNavBarConfirmDialog)).init("","NAV_QUIT_CONFIRM",function(){cc.game.end()},null,!1),t.dialogNode.height=410,t.show(),[2]}})})},t.prototype.onBackToAppOK=function(){N.NgcPlatform.inst&&N.NgcPlatform.inst.onPostMessage(JSON.stringify({CALL_BACK_TO_APP_BUTTON:!0}),"*")},t.prototype.updateRemote=function(){var e=this;this.navBarConfig&&this.navBarConfig.moreGameImageURL&&cc.assetManager.loadRemote(this.navBarConfig.moreGameImageURL,cc.SpriteFrame,function(t,o){t&&console.error(t),e.moreGameSprite.spriteFrame=new cc.SpriteFrame(o)})},t.prototype.mainBtnOnClick=function(){this._isMoving||_.default.inst.isSwitching||(this.curState==u.Show?this.curState=u.Hide:this.curState==u.Hide&&(this.setNavBarInfo(),this.curState=u.Show),this.updateListEffectBtn())},t.prototype.setNavBarInfo=function(){var e=this;this.navBarConfig.loginButton&&P.NgcSocial.inst?(this.buttons.get(J.Login).active=this.editNode.active=!v.default.isUserLogined(),this.buttons.get(J.LogOut).active=this.logedInTxtNode.active=v.default.isUserLogined()):this.buttons.get(J.Login).active=this.buttons.get(J.LogOut).active=this.logedInTxtNode.active=!1,g.NgcBuildConfig.offlineMode&&(this.buttons.get(J.Login).active=!1),N.NgcPlatform.isRunFromApp()&&(this.buttons.get(J.Login).active=!1,this.buttons.get(J.LogOut).active=!1),P.NgcSocial.inst&&v.default.isUserLogined()?(v.default.avatarUrl&&f.Utils.loadSpriteFrameFromURL(v.default.avatarUrl).then(function(t){e.userAvatarSprite.spriteFrame=t}).catch(function(){v.default.avatarUrl,e.userAvatarSprite.spriteFrame=e.defaultAvatar}),this.socialName.string="Uplay"===P.NgcSocial.inst.getName()?"Ubisoft":P.NgcSocial.inst.getName()):this.userAvatarSprite.spriteFrame=this.defaultAvatar,this.playerNameLabel.string=v.default.localUserName,this._checkUpdateFlagSprite(),this.addToHomeIcon.spriteFrame=cc.sys.isMobile?this.addToHomeSF_Moblie:this.addToHomeSF_PC,this.addToHomeMobiletxt.active=cc.sys.isMobile,this.addToHomePCtxt.active=!this.addToHomeMobiletxt.active},t.prototype._checkUpdateFlagSprite=function(){var e=this;y.NgcCountryFlagsManager.inst?this.countryFlagSprite.spriteFrame=y.NgcCountryFlagsManager.inst.getFlagSpriteFrame(y.NgcCountryFlagsManager.localCountry):this.scheduleOnce(function(){return e._checkUpdateFlagSprite()})},t.prototype.updatePlayerRank=function(e){this.playerRankSpriteNode||(this.playerRankSpriteNode=new cc.Node("PlayerRank"),this.playerRankSpriteNode.parent=this.playerNameLabel.node.parent,this.playerRankSpriteNode.x=this.playerNameLabel.node.x+this.playerNameLabel.node.width+45,this.playerRankSpriteNode.y=this.playerNameLabel.node.y,this.playerRankSpriteNode.addComponent(cc.Sprite),this.playerRankSpriteNode.scale=.35);var t=this.playerRankSpriteNode.getComponent(cc.Sprite);t.sizeMode=cc.Sprite.SizeMode.TRIMMED,t.trim=!0,t.spriteFrame=e},t.prototype.setChangeNameCallBack=function(e){this.onChangeNameCallBack=e},t.prototype.setLoginSocialCallBack=function(e){this.onSocialCallBack=e},t.prototype.invokeOnSocialCallBack=function(e,t){null!=this.onSocialCallBack&&this.onSocialCallBack(e,t),this.onSocialInteraction(e,t),o.inst.updateListEffectBtn()},t.prototype.onSocialInteraction=function(e,t){return s(this,void 0,void 0,function(){return c(this,function(){return"login"!==t&&"logout"!==t||(b.NgcInventory.inst.forceFetchInventory().then(function(){O.NgcGameModeManager.inst.refresh()}),R.default.getInstance().forceFetchEdgeExclusive(),v.default.supportCode="",cc.systemEvent.emit("refreshShop",e,t),cc.systemEvent.emit("refreshCrownRoad",e,t),cc.systemEvent.emit("refreshLDB",e,t),cc.systemEvent.emit("refreshNameBox",e,t)),"login"===t&&w.NgcDailyRewardManager.inst.checkReward(),[2]})})},t.prototype.editOnClick=function(){return s(this,void 0,void 0,function(){var e,t;return c(this,function(o){switch(o.label){case 0:return v.default.changeNameLocation="SideBar",this.curState=u.Hide,[4,I.NgcDialogManager.createDialog(F.NgcNavBarEditNameDialog.dialogType,F.NgcNavBarEditNameDialog.urlPrefab,F.NgcNavBarEditNameDialog.bundleName)];case 1:return e=o.sent(),t=e.getComponent(F.NgcNavBarEditNameDialog),this.onChangeNameCallBack&&t.onChangeNameCB(this.onChangeNameCallBack),t.show(),[2]}})})},t.prototype.logInOnClick=function(){return s(this,void 0,void 0,function(){var e,t,o=this;return c(this,function(n){switch(n.label){case 0:return this.curState=u.Hide,[4,I.NgcDialogManager.createDialog(x.NgcNavBarLoginSocialDialog.dialogType,x.NgcNavBarLoginSocialDialog.urlPrefab,x.NgcNavBarLoginSocialDialog.bundleName)];case 1:return e=n.sent(),(t=e.getComponent(x.NgcNavBarLoginSocialDialog)).init(function(e,n){o.invokeOnSocialCallBack(e,n),null!=n&&"onPreLogin"!=n&&t.hide()}),t.show(),[2]}})})},t.prototype.checkA2HSResult=function(e){switch(e){case"accepted":console.log("User accepted the A2HS prompt"),C.NgcTelemetry.inst.LogEvent_AddToHomeComplete("NavigationBar"),window.deferredPrompt=null,v.default.added_A2HS=!0;break;case"denied":console.log("User dismissed the A2HS prompt");break;case"installed":cc.screen.fullScreen()&&this.showInstalledA2HS()}},t.prototype.showInstalledA2HS=function(){return s(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,I.NgcDialogManager.createDialog(E.NgcNavBarA2HSInstalledNotice.dialogType,E.NgcNavBarA2HSInstalledNotice.urlPrefab,E.NgcNavBarA2HSInstalledNotice.bundleName)];case 1:return e.sent().getComponent(E.NgcNavBarA2HSInstalledNotice).show(),[2]}})})},t.prototype.addToHomeOnClick=function(){return s(this,void 0,void 0,function(){var e,t,o,n,r,i=this;return c(this,function(a){switch(a.label){case 0:return f.Utils.isRunningWithFacebookApp()?[4,I.NgcDialogManager.createDialog(G.default.dialogType,G.default.urlPrefab,G.default.bundleName)]:[3,2];case 1:return(r=a.sent()).getComponent(G.default).show(),[2];case 2:if(e=function(){return s(i,void 0,void 0,function(){var e,t=this;return c(this,function(o){switch(o.label){case 0:return e=function(e){var o="accepted"===e.outcome?"accepted":"denied";t.checkA2HSResult(o)},window.deferredPrompt?(window.deferredPrompt.prompt(),window.deferredPrompt.userChoice.then(e),[3,3]):[3,1];case 1:return[4,I.NgcDialogManager.createDialog(E.NgcNavBarA2HSInstalledNotice.dialogType,E.NgcNavBarA2HSInstalledNotice.urlPrefab,E.NgcNavBarA2HSInstalledNotice.bundleName)];case 2:o.sent().getComponent(E.NgcNavBarA2HSInstalledNotice).show(),o.label=3;case 3:return[2]}})})},this.curState=u.Hide,C.NgcTelemetry.inst.LogEvent_AddToHomeInit("NavigationBar"),t=function(){return s(i,void 0,void 0,function(){return c(this,function(){return N.NgcPlatform.inst.onPostMessage(JSON.stringify({CALL_WEB_A2HS_BUTTON_FUNCTION:!0}),"*"),[2]})})},o=null,n=this.checkA2HSSupport(cc.sys.os,cc.sys.browserType),!cc.sys.isMobile)return[3,9];switch(n){case X.Support:return[3,3];case X.Alternative:return[3,4];case X.NotSupport:return[3,6]}return[3,6];case 3:return e(),[2];case 4:return[4,I.NgcDialogManager.createDialog(A.NavBarA2HSNotSupport_Mobile.dialogType,A.NavBarA2HSNotSupport_Mobile.urlPrefab,A.NavBarA2HSNotSupport_Mobile.bundleName)];case 5:return r=a.sent(),o=r.getComponent(A.NavBarA2HSNotSupport_Mobile),[3,8];case 6:return[4,I.NgcDialogManager.createDialog(k.NavBarA2HSNotSupportTotally_Mobile.dialogType,k.NavBarA2HSNotSupportTotally_Mobile.urlPrefab,k.NavBarA2HSNotSupportTotally_Mobile.bundleName)];case 7:return r=a.sent(),o=r.getComponent(k.NavBarA2HSNotSupportTotally_Mobile),[3,8];case 8:return[3,13];case 9:switch(n){case X.Support:return[3,10];case X.Alternative:case X.NotSupport:return[3,11]}return[3,11];case 10:return N.NgcPlatform.isRunAsIframeOnNano()?t():e(),[2];case 11:return[4,I.NgcDialogManager.createDialog(B.NavBarA2HSNotSupport_PC.dialogType,B.NavBarA2HSNotSupport_PC.urlPrefab,B.NavBarA2HSNotSupport_PC.bundleName)];case 12:return r=a.sent(),o=r.getComponent(B.NavBarA2HSNotSupport_PC),[3,13];case 13:return o.show(),[2]}})})},t.prototype.showNotSupportA2HSPlatformDialog=function(){return s(this,void 0,void 0,function(){var e,t;return c(this,function(o){switch(o.label){case 0:return[4,I.NgcDialogManager.createDialog(z.default.dialogType,z.default.urlPrefab,z.default.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(z.default)).init(function(){V.default.gotoNano()}),t.show(),[2]}})})},t.prototype.shareOnClick=function(){return s(this,void 0,void 0,function(){var e,t,o;return c(this,function(n){switch(n.label){case 0:return this.curState=u.Hide,N.NgcPlatform.isRunFromApp()?(e=this.navBarConfig.shareUrl+"&origin=native",N.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_SHARE:{type:"native",link:e}}),"*"),v.default.sharedGame_NavBar=!0,[3,3]):[3,1];case 1:return[4,I.NgcDialogManager.createDialog(W.NgcNavBarShareDialog.dialogType,W.NgcNavBarShareDialog.urlPrefab,W.NgcNavBarShareDialog.bundleName)];case 2:t=n.sent(),(o=t.getComponent(W.NgcNavBarShareDialog)).init("NavigationBar"),o.show(),n.label=3;case 3:return[2]}})})},t.prototype.settingOnClick=function(){return s(this,void 0,void 0,function(){var e,t;return c(this,function(o){switch(o.label){case 0:return this.curState=u.Hide,[4,I.NgcDialogManager.createDialog(H.NgcNavBarSettingsDialog.dialogType,H.NgcNavBarSettingsDialog.urlPrefab,H.NgcNavBarSettingsDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(H.NgcNavBarSettingsDialog)).init(),t.show(),[2]}})})},t.prototype.aboutOnClick=function(e){return void 0===e&&(e=null),s(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return this.curState=u.Hide,[4,I.NgcDialogManager.createDialog(D.NgcNavBarAboutDialog.dialogType,D.NgcNavBarAboutDialog.urlPrefab,D.NgcNavBarAboutDialog.bundleName)];case 1:return e.sent().getComponent(D.NgcNavBarAboutDialog).show(),[2]}})})},t.prototype.howToPlayOnClick=function(e){return void 0===e&&(e=null),s(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return this.curState=u.Hide,[4,I.NgcDialogManager.createDialog(j.NgcNavBarHowToPlayDialog.dialogType,j.NgcNavBarHowToPlayDialog.urlPrefab,j.NgcNavBarHowToPlayDialog.bundleName)];case 1:return e.sent().getComponent(j.NgcNavBarHowToPlayDialog).show(),[2]}})})},t.prototype.currentGamesOnClick=function(e){this.navBarConfig.originalGameURL?(this.curState=u.Hide,C.NgcTelemetry.inst.LogEvent_BrandGameInit("NavigationBar"),cc.sys.openURL(this.navBarConfig.originalGameURL)):this.showNotice(e.target,"ORIGINAL_GAME_UNAVAILABLE")},t.prototype.logOutOnClick=function(){return s(this,void 0,void 0,function(){var e,t,o=this;return c(this,function(n){switch(n.label){case 0:return this.curState=u.Hide,[4,I.NgcDialogManager.createDialog(M.NgcNavBarConfirmDialog.dialogType,M.NgcNavBarConfirmDialog.urlPrefab,M.NgcNavBarConfirmDialog.bundleName)];case 1:return e=n.sent(),(t=e.getComponent(M.NgcNavBarConfirmDialog)).init(this.LOG_OUT_TITTLE,this.LOG_OUT_MSG,function(){N.NgcPlatform.inst.isCallbackFromHost=!1,P.NgcSocial.inst.checkLoginStatus().finally(function(){N.NgcPlatform.inst.onSocialLogOutFromGame(),S.default.inst.resetUserID().finally(function(){m.NgcMain.inst.createFakeName(),v.default.setAccountLinkData(),N.NgcPlatform.inst.isLogoutFromGame=!0;try{P.NgcSocial.inst.logout()}catch(e){console.warn(e)}P.NgcSocial.inst.onLogoutSuccessCallback&&P.NgcSocial.inst.onLogoutSuccessCallback(),o.invokeOnSocialCallBack(null,"logout")})})},null),t.show(),[2]}})})},t.prototype.moreGamesOnClick=function(e){this.navBarConfig.moreGameURL?(this.curState=u.Hide,C.NgcTelemetry.inst.LogEvent_MoreGameInit("NavigationBar"),cc.sys.openURL(this.navBarConfig.moreGameURL)):this.showNotice(e.target,"MORE_GAMES_UNAVAILABLE")},t.prototype.likeUsOnClick=function(){return s(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return this.curState=u.Hide,N.NgcPlatform.isRunFromApp()?(cc.sys.openURL("https://www.facebook.com/ubisoftnano/"),[2]):(C.NgcTelemetry.inst.LogEvent_LikeUsInit("NavigationBar"),[4,I.NgcDialogManager.createDialog(U.NgcNavBarFBPagePluginDialog.dialogType,U.NgcNavBarFBPagePluginDialog.urlPrefab,U.NgcNavBarFBPagePluginDialog.bundleName)]);case 1:return e.sent().getComponent(U.NgcNavBarFBPagePluginDialog).show(),[2]}})})},t.prototype.hideNavBarOnClick=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.curState=u.Hide,this.updateListEffectBtn()},t.prototype.updateListEffectBtn=function(){this.effectA2HSBtn.active=this.buttons.get(J.AddToHome).active&&!v.default.added_A2HS,this.effectShareGameBtn.active=this.buttons.get(J.Share).active&&!v.default.sharedGame_NavBar;var e=this.buttons.get(J.Login).active&&!v.default.isUserLogined();this.effectMainBtn.active=this.effectA2HSBtn.active||this.effectShareGameBtn.active||e,this.flashAnims.forEach(function(e){e.play("flash")})},t.prototype.update=function(){var e=this.colorBand.height/840;this.colorAnim.scaleY!=e&&(this.colorAnim.scaleY=e)},t.prototype.checkA2HSSupport=function(e,t){var o={},n=[cc.sys.OS_WINDOWS,cc.sys.OS_ANDROID,cc.sys.OS_IOS,cc.sys.OS_OSX],r=[cc.sys.BROWSER_TYPE_CHROME,cc.sys.BROWSER_TYPE_FIREFOX,cc.sys.BROWSER_TYPE_EDGE,cc.sys.BROWSER_TYPE_IE,cc.sys.BROWSER_TYPE_OPERA,cc.sys.BROWSER_TYPE_ANDROID];return o=[cc.sys.OS_WINDOWS,cc.sys.OS_ANDROID,cc.sys.OS_IOS,cc.sys.OS_OSX],n.forEach(function(e){return o[e]=l(r)}),o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_CHROME]=X.Support,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_FIREFOX]=X.Alternative,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_SAFARI]=X.Alternative,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_EDGE]=X.Support,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_IE]=X.Alternative,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_OPERA]=X.NotSupport,o[cc.sys.OS_WINDOWS][cc.sys.BROWSER_TYPE_ANDROID]=X.NotSupport,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_CHROME]=X.Support,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_FIREFOX]=X.Alternative,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_SAFARI]=X.NotSupport,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_EDGE]=X.Alternative,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_IE]=X.NotSupport,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_OPERA]=X.NotSupport,o[cc.sys.OS_ANDROID][cc.sys.BROWSER_TYPE_ANDROID]=X.Alternative,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_CHROME]=X.NotSupport,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_FIREFOX]=X.NotSupport,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_SAFARI]=X.Alternative,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_EDGE]=X.NotSupport,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_IE]=X.NotSupport,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_OPERA]=X.NotSupport,o[cc.sys.OS_IOS][cc.sys.BROWSER_TYPE_ANDROID]=X.NotSupport,o[cc.sys.OS_OSX][cc.sys.BROWSER_TYPE_CHROME]=X.NotSupport,o[cc.sys.OS_OSX][cc.sys.BROWSER_TYPE_FIREFOX]=X.NotSupport,(cc.sys.OS_IOS!==e&&cc.sys.OS_OSX!==e||!["FxiOS","EdgiOS","CriOS"].some(function(e){return navigator.userAgent.includes(e),navigator.userAgent.includes(e)}))&&o.hasOwnProperty(e)&&o[e].hasOwnProperty(t)?o[e][t]:X.NotSupport},t.prototype.showNotice=function(e,t){return s(this,void 0,void 0,function(){var o,n;return c(this,function(r){switch(r.label){case 0:return[4,I.NgcDialogManager.createDialog(T.NgcMessageDialog.dialogType,T.NgcMessageDialog.urlPrefab,T.NgcMessageDialog.bundleName)];case 1:return o=r.sent(),(n=o.getComponent(T.NgcMessageDialog)).init(t),n.show(null,e,20,null,.6),[2]}})})},t.prototype.checkAndShowA2HSOnStart=function(){V.default.shouldA2HS()&&V.default.isValidOrigin()&&this._isFirstTimeCheckA2HS&&(this.showA2HSDialog(),this._isFirstTimeCheckA2HS=!1)},t.prototype.showA2HSDialog=function(){return s(this,void 0,void 0,function(){var e,t,o,n,r=this;return c(this,function(i){switch(i.label){case 0:return[4,I.NgcDialogManager.createDialog(z.default.dialogType,z.default.urlPrefab,z.default.bundleName)];case 1:return e=i.sent(),t=e.getComponent(z.default),o=function(){r.addToHomeOnClick(null),V.default.removeA2HSParameter()},n=function(){V.default.removeA2HSParameter()},t.init(o.bind(this),n),t.show(),[2]}})})},t.prototype.showAllNavBar=function(e){this.node.active=e},t.prototype.applyPlatformType=function(){null===g.NgcBuildConfig.buildPlatform&&void 0===g.NgcBuildConfig.buildPlatform||(this.buttons.get(J.Login).active=!N.NgcPlatform.isRunFromApp()&&this.navBarConfig.loginButton&&!!P.NgcSocial.inst,this.buttons.get(J.AddToHome).active=this.navBarConfig.installAppButton&&!N.NgcPlatform.isRunFromApp(),this.buttons.get(J.Share).active=this.navBarConfig.shareGameButton,this.buttons.get(J.HowToPlay).active=this.navBarConfig.howToPlayButton,this.buttons.get(J.MoreGames).active=this.navBarConfig.moreGamesButton,this.buttons.get(J.OriginalGames).active=this.navBarConfig.originalGameButton,this.buttons.get(J.LikeUs).active=this.navBarConfig.likeUsButton,this.buttons.get(J.Setting).active=this.navBarConfig.settingsButton,this.buttons.get(J.About).active=this.navBarConfig.aboutButton)},t.prototype.onNanoSrvResetCallback=function(){o.inst.setNavBarInfo()},t.inst=null,a([q(cc.Node)],t.prototype,"background",void 0),a([q(cc.Node)],t.prototype,"mainContent",void 0),a([q(cc.Node)],t.prototype,"colorBand",void 0),a([q(cc.Node)],t.prototype,"colorAnim",void 0),a([q(cc.Node)],t.prototype,"editNode",void 0),a([q(cc.Node)],t.prototype,"logedInTxtNode",void 0),a([q(cc.Node)],t.prototype,"scrollViewLayOutNode",void 0),a([q(cc.Node)],t.prototype,"bottomLayoutNode",void 0),a([q(cc.Node)],t.prototype,"profileNode",void 0),a([q(cc.Sprite)],t.prototype,"userAvatarSprite",void 0),a([q(cc.Sprite)],t.prototype,"countryFlagSprite",void 0),a([q(cc.Label)],t.prototype,"playerNameLabel",void 0),a([q(cc.Label)],t.prototype,"socialName",void 0),a([q(cc.SpriteFrame)],t.prototype,"defaultAvatar",void 0),a([q(cc.Sprite)],t.prototype,"addToHomeIcon",void 0),a([q(cc.SpriteFrame)],t.prototype,"addToHomeSF_Moblie",void 0),a([q(cc.SpriteFrame)],t.prototype,"addToHomeSF_PC",void 0),a([q(cc.Node)],t.prototype,"addToHomeMobiletxt",void 0),a([q(cc.Node)],t.prototype,"addToHomePCtxt",void 0),a([q(cc.Node)],t.prototype,"effectMainBtn",void 0),a([q(cc.Node)],t.prototype,"effectA2HSBtn",void 0),a([q(cc.Node)],t.prototype,"effectShareGameBtn",void 0),a([q(cc.Node)],t.prototype,"effectLoginBtn",void 0),a([q(cc.Sprite)],t.prototype,"moreGameSprite",void 0),a([q(cc.Animation)],t.prototype,"flashAnims",void 0),a([q(cc.Node)],t.prototype,"navOnOFFButton",void 0),a([q(cc.Node)],t.prototype,"backToAppButton",void 0),o=a([K],t)}(cc.Component);o.NgcNavBarManager=Z,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Platform/Platform":"Platform","../../../Services/Social/Social":"Social","../../../Services/Telemetry/Telemetry":"Telemetry","../../DailyReward/Script/DailyRewardManager":"DailyRewardManager","../../Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../EdgeExclusive/Script/EdgeExclusiveManager":"EdgeExclusiveManager","../../GameMode/Script/NgcGameModeManager":"NgcGameModeManager","./NavBarA2HSInstalledNotice":"NavBarA2HSInstalledNotice","./NavBarA2HSNotSupportTotally_Mobile":"NavBarA2HSNotSupportTotally_Mobile","./NavBarA2HSNotSupport_Mobile":"NavBarA2HSNotSupport_Mobile","./NavBarA2HSNotSupport_PC":"NavBarA2HSNotSupport_PC","./NavBarAboutDialog":"NavBarAboutDialog","./NavBarConfirmDialog":"NavBarConfirmDialog","./NavBarDialogBase":"NavBarDialogBase","./NavBarEditNameDialog":"NavBarEditNameDialog","./NavBarFBBrowserDialog":"NavBarFBBrowserDialog","./NavBarFBPagePluginDialog":"NavBarFBPagePluginDialog","./NavBarHowToPlayDialog":"NavBarHowToPlayDialog","./NavBarLoginSocialDialog":"NavBarLoginSocialDialog","./NavBarNoticeDialog":"NavBarNoticeDialog","./NavBarSettingsDialog":"NavBarSettingsDialog","./NavBarShareDialog":"NavBarShareDialog","./NgcA2HSManager.ts":"NgcA2HSManager.ts"}],NavBarNoticeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"e1ae6EiznRJEbPkw8P5sFJp","NavBarNoticeDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./NavBarDialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackOk=null,t._callBackClose=null,t}return r(t,e),t.prototype.init=function(e,t){void 0===t&&(t=null),this._callBackOk=e,this._callBackClose=t},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.okOnClick=function(){this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.dialogType="NgcNavBarNoticeDialog",t.urlPrefab=cc.sys.isMobile?"NavBarA2HSNoticeDialog_Mobile":"NavBarA2HSNoticeDialog_PC",t.A2HSRedirectDialogPrefabName=cc.sys.isMobile?"NavBarA2HSRedirectDialog_Mobile":"NavBarA2HSRedirectDialog_PC",i([c],t)}(a.NgcNavBarDialogBase));o.default=l,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarSelectLanguageDialog:[function(e,t,o){"use strict";cc._RF.push(t,"02a4d2U3WNEWocgmMDsdhaY","NavBarSelectLanguageDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarSelectLanguageDialog=void 0;var a=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),s=e("../../../GameFramework/Scripts/NgcUserInfo"),c=e("../../../Services/Platform/Platform"),l=e("../../../Services/Telemetry/Telemetry"),u=e("./NavBarDialogBase"),p=e("./NavBarItemSelectLanguage"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackOk=null,t.selectedLang="",t.itemPrefab=null,t.content=null,t.items=[],t}return r(t,e),t.prototype.init=function(e){var t=this;this._callBackOk=e;var o=a.NgcLocalizedManager.jsonData;o.sort(function(e,t){return e.name>t.name?1:t.name>e.name?-1:0}),this.selectedLang=a.NgcLocalizedManager.curLang,o.forEach(function(e){if(e.enabled){var o=cc.instantiate(t.itemPrefab);o.parent=t.content;var n=o.getComponent(p.NgcNavBarItemSelectLanguage);n.setInfo(e.flag_url,e.name,e.code,e.code===a.NgcLocalizedManager.curLang||e.extra_code&&-1!=e.extra_code.indexOf(a.NgcLocalizedManager.curLang),function(o){t.selectedLang=o,t.items.forEach(function(t){t.isSelected=t.languageCode==e.code||e.extra_code&&-1!=e.extra_code.indexOf(t.languageCode)})}),t.items.push(n)}})},t.prototype.OkOnClick=function(){this.selectedLang!==s.default.curLanguage&&this.changeLanguageOnClick(this.selectedLang),this.closeOnClick()},t.prototype.closeOnClick=function(){this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.changeLanguageOnClick=function(e){s.default.curLanguage=e,a.NgcLocalizedManager.setLanguage(e),l.NgcTelemetry.inst.LogEvent_LanguageChanged({languageCode:e});var t={GAME_LANGUAGE_CODE:e};if(window.location!==window.parent.location){var o=JSON.stringify(t);console.log("@@@@@ changeLanguageOnClick msg ",o),c.NgcPlatform.inst&&c.NgcPlatform.inst.onPostMessage(o,"*")}},t.prototype.show=function(){e.prototype.show.call(this),l.NgcTelemetry.inst.LogEvent_EnterScreen("LanguageSelectScreen")},t.prototype.hide=function(){e.prototype.hide.call(this),l.NgcTelemetry.inst.LogEvent_ExitScreen("LanguageSelectScreen")},t.urlPrefab="NavBarSelectLanguageDialog",t.dialogType="NgcNavBarSelectLanguageDialog",i([h(cc.Prefab)],t.prototype,"itemPrefab",void 0),i([h(cc.Node)],t.prototype,"content",void 0),i([f],t)}(u.NgcNavBarDialogBase);o.NgcNavBarSelectLanguageDialog=g,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","./NavBarDialogBase":"NavBarDialogBase","./NavBarItemSelectLanguage":"NavBarItemSelectLanguage"}],NavBarSettingsDialog:[function(e,t,o){"use strict";cc._RF.push(t,"c58635gSO1LnKS1leAZUO0T","NavBarSettingsDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarSettingsDialog=void 0;var c=e("../../../GameFramework/Scripts/BuildConfig"),l=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),u=e("../../../GameFramework/Scripts/NgcMain"),p=e("../../../GameFramework/Scripts/NgcSoundManager"),d=e("../../../GameFramework/Scripts/NgcUserInfo"),f=e("../../../Services/Platform/Platform"),h=e("../../../Services/Telemetry/Telemetry"),g=e("../../Dialogs/Script/NgcDialogManager"),y=e("./NavBarDialogBase"),m=e("./NavBarSelectLanguageDialog"),_=cc._decorator,v=_.ccclass,S=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.soundSFs=[],t.musicSFs=[],t.soundSprite=null,t.musicSprite=null,t.musicON_OFFLabel=null,t.soundON_OFFLabel=null,t.languageButton=null,t.gdprButton=null,t.controlButton=null,t.forWebNode=null,t}return r(t,e),t.prototype.init=function(){this.musicSprite.spriteFrame=d.default.musicOff?this.musicSFs[1]:this.musicSFs[0],l.NgcLocalizedManager.setTextKey(this.musicON_OFFLabel,d.default.musicOff?"NGG_OFF":"NGG_ON"),this.soundSprite.spriteFrame=d.default.soundOff?this.soundSFs[1]:this.soundSFs[0],l.NgcLocalizedManager.setTextKey(this.soundON_OFFLabel,d.default.soundOff?"NGG_OFF":"NGG_ON"),this.languageButton.active=c.NgcBuildConfig.services.NavBar.languageButton,this.controlButton.active=c.NgcBuildConfig.services.NavBar.controlButton&&cc.sys.isMobile,this.gdprButton.active=c.NgcBuildConfig.services.NavBar.cookieButton,f.NgcPlatform.isRunFromApp()&&(this.forWebNode.active=!1)},t.prototype.soundOnClick=function(){d.default.soundOff=!d.default.soundOff,this.soundSprite.spriteFrame=d.default.soundOff?this.soundSFs[1]:this.soundSFs[0],l.NgcLocalizedManager.setTextKey(this.soundON_OFFLabel,d.default.soundOff?"NGG_OFF":"NGG_ON"),h.NgcTelemetry.inst.LogEvent_SettingInformation({settingID:"soundOff",settingValue:d.default.soundOff})},t.prototype.musicOnClick=function(){d.default.musicOff=!d.default.musicOff,this.musicSprite.spriteFrame=d.default.musicOff?this.musicSFs[1]:this.musicSFs[0],l.NgcLocalizedManager.setTextKey(this.musicON_OFFLabel,d.default.musicOff?"NGG_OFF":"NGG_ON"),p.NgcSoundManager.inst.resumeLastPlayedMusic()||p.NgcSoundManager.inst.playStartScreenMusic(),h.NgcTelemetry.inst.LogEvent_SettingInformation({settingID:"MusicOff",settingValue:d.default.musicOff})},t.prototype.onChangeLanguageButtonClick=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return[4,g.NgcDialogManager.create(m.NgcNavBarSelectLanguageDialog)];case 1:return(e=t.sent()).init(),e.show(),[2]}})})},t.prototype.onChangeControlButtonClick=function(){return a(this,void 0,void 0,function(){return s(this,function(){return u.NgcMain.inst.showControlDialog(),[2]})})},t.prototype.onButtonCloseClick=function(){this.hide()},t.prototype.hide=function(){h.NgcTelemetry.inst.LogEvent_ExitScreen("OptionsScreen"),e.prototype.hide.call(this)},t.prototype.show=function(){h.NgcTelemetry.inst.LogEvent_EnterScreen("OptionsScreen"),e.prototype.show.call(this)},t.prototype.onSetCookiesBtnClick=function(){setTimeout(function(){window.showCookiesPop()},250),this.hide()},t.dialogType="NgcNavBarSettingsDialog",t.urlPrefab="NavBarSettingsDialog",i([S(cc.SpriteFrame)],t.prototype,"soundSFs",void 0),i([S(cc.SpriteFrame)],t.prototype,"musicSFs",void 0),i([S(cc.Sprite)],t.prototype,"soundSprite",void 0),i([S(cc.Sprite)],t.prototype,"musicSprite",void 0),i([S(cc.Label)],t.prototype,"musicON_OFFLabel",void 0),i([S(cc.Label)],t.prototype,"soundON_OFFLabel",void 0),i([S(cc.Node)],t.prototype,"languageButton",void 0),i([S(cc.Node)],t.prototype,"gdprButton",void 0),i([S(cc.Node)],t.prototype,"controlButton",void 0),i([S(cc.Node)],t.prototype,"forWebNode",void 0),i([v],t)}(y.NgcNavBarDialogBase);o.NgcNavBarSettingsDialog=b,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcSoundManager":"NgcSoundManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","./NavBarDialogBase":"NavBarDialogBase","./NavBarSelectLanguageDialog":"NavBarSelectLanguageDialog"}],NavBarShareDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d87968eNOlMhJWnzy9T0m6d","NavBarShareDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarShareDialog=void 0;var a,s=e("../../../Core/Utils"),c=e("../../../GameFramework/Scripts/BuildConfig"),l=e("../../../GameFramework/Scripts/NgcUserInfo"),u=e("../../../Services/Platform/Platform"),p=e("../../../Services/Telemetry/Telemetry"),d=e("./NavBarDialogBase"),f=cc._decorator,h=f.ccclass,g=f.property;(function(e){e[e.Native=0]="Native",e[e.Facebook=1]="Facebook",e[e.Email=2]="Email",e[e.Twitter=3]="Twitter"})(a||(a={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alertTextNode=null,t.shareContainer=null,t.context=null,t.DEFAULT_SCREEN_SIZE=cc.v2(640,960),t}return r(t,e),t.prototype.onLoad=function(){this.shareContainer.getChildByName("facebook").active=this.checkShareConfig("facebook"),this.shareContainer.getChildByName("twitter").active=this.checkShareConfig("twitter"),this.shareContainer.getChildByName("email").active=this.checkShareConfig("email")},t.prototype.checkShareConfig=function(e){return!c.NgcBuildConfig.services.ShareMe.hasOwnProperty(e)||c.NgcBuildConfig.services.ShareMe[e]},t.prototype.onButtonFaceBookClick=function(){var e=this,t=c.NgcBuildConfig.services.NavBar.shareUrl+"&origin=facebook",o=encodeURIComponent(t);if(u.NgcPlatform.isRunFromApp())this.postShareMessage("FB",o),p.NgcTelemetry.inst.LogEvent_ShareClick(this.context,s.Utils.enumToString(a,a.Facebook)),l.default.sharedGame_NavBar=!0;else if("undefined"!=typeof FB)p.NgcTelemetry.inst.LogEvent_ShareClick(this.context,s.Utils.enumToString(a,a.Facebook)),FB.ui({method:"share",href:t,display:cc.sys.isMobile?"iframe":"popup"},function(t){t&&(console.log("Share success: post_id = "+t.post_id),p.NgcTelemetry.inst.LogEvent_ShareComplete(e.context,s.Utils.enumToString(a,a.Facebook)),l.default.sharedGame_NavBar=!0)});else{var n="https://www.facebook.com/sharer/sharer.php?u=";n+=o,cc.sys.openURL(n),p.NgcTelemetry.inst.LogEvent_ShareClick(this.context,s.Utils.enumToString(a,a.Facebook)),l.default.sharedGame_NavBar=!0}},t.prototype.onButtonTwitterClick=function(){var e=c.NgcBuildConfig.services.NavBar.shareUrl+"&origin=twitter",t="https://twitter.com/intent/tweet?url="+encodeURIComponent(e)+"&text="+c.NgcBuildConfig.services.NavBar.shareDescription;u.NgcPlatform.isRunFromApp()?this.postShareMessage("TWITTER",t):cc.sys.openURL(t),p.NgcTelemetry.inst.LogEvent_ShareClick(this.context,s.Utils.enumToString(a,a.Twitter)),l.default.sharedGame_NavBar=!0},t.prototype.onButtonEmailClick=function(){var e=c.NgcBuildConfig.services.NavBar.shareUrl+"&origin=mail",t=encodeURIComponent(e),o="mailto:example@website.com?subject=";o+=c.NgcBuildConfig.services.NavBar.shareGameName+"&body=",o+=c.NgcBuildConfig.services.NavBar.shareDescription+" "+t,u.NgcPlatform.isRunFromApp()?this.postShareMessage("EMAIL",o):cc.sys.browserType===cc.sys.BROWSER_TYPE_FIREFOX?cc.sys.openURL(o):window.location.href=o,p.NgcTelemetry.inst.LogEvent_ShareClick(this.context,s.Utils.enumToString(a,a.Email)),l.default.sharedGame_NavBar=!0},t.prototype.onButtonCopyClick=function(){var e=c.NgcBuildConfig.services.NavBar.shareUrl+"&origin=copylink";u.NgcPlatform.isRunFromApp()?this.postShareMessage("COPY_LINK",e):s.Utils.copyToClipboard(e),this.flashAlertNode()},t.prototype.postShareMessage=function(e,t){u.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_SHARE:{type:e,link:t}}),"*")},t.prototype.flashAlertNode=function(){cc.tween(this.alertTextNode).to(.25,{opacity:255}).delay(1.5).to(.25,{opacity:0}).start()},t.prototype.shareNative=function(){var e=c.NgcBuildConfig.services.NavBar.shareUrl+"&origin=native";s.Utils.shareNative(e,function(){l.default.sharedGame_NavBar=!0})},t.prototype.show=function(){p.NgcTelemetry.inst.LogEvent_ShareInit(this.context),1!=u.NgcPlatform.inst.useOwnSharingMethod()?cc.sys.isMobile&&navigator.share?(this.shareNative(),this.hide()):(navigator.clipboard.writeText(c.NgcBuildConfig.services.NavBar.shareUrl),this.alertTextNode.opacity=255,this.flashAlertNode(),e.prototype.show.call(this)):this.hide()},t.prototype.init=function(e){void 0===e&&(e=null),this.context=e},t.dialogType="NgcNavBarShareDialog",t.urlPrefab="NavBarShareDialog",i([g(cc.Node)],t.prototype,"alertTextNode",void 0),i([g(cc.Node)],t.prototype,"shareContainer",void 0),i([h],t)}(d.NgcNavBarDialogBase);o.NgcNavBarShareDialog=y,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","./NavBarDialogBase":"NavBarDialogBase"}],NavBarTipItem:[function(e,t,o){"use strict";cc._RF.push(t,"b857fF7aWVD+ZWXyWtqVD1z","NavBarTipItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarTipItem=void 0;var a=e("./NavBarDialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipLabel=null,t.tipImg=null,t}return r(t,e),t.dialogType="NgcNavBarTipItem",t.urlPrefab="NavBarTipItem",i([l(cc.Label)],t.prototype,"tipLabel",void 0),i([l(cc.Sprite)],t.prototype,"tipImg",void 0),i([c],t)}(a.NgcNavBarDialogBase);o.NgcNavBarTipItem=u,cc._RF.pop()},{"./NavBarDialogBase":"NavBarDialogBase"}],NavBarUserConflictInfo:[function(e,t,o){"use strict";cc._RF.push(t,"e662dsdldhArbVHw/hSYA54","NavBarUserConflictInfo");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNavBarUserConflictInfo=void 0;var a=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastSave=null,t.time=null,t.lbScore=null,t.coins=null,t.stars=null,t}return r(t,e),t.prototype.start=function(){},t.urlPrefab="NavBarShareDialog",t.bundleName="02_dialog_navbar",t.dialogType="NgcNavBarShareDialog",i([l(a.NgcLabelLocalized)],t.prototype,"lastSave",void 0),i([l(a.NgcLabelLocalized)],t.prototype,"time",void 0),i([l(cc.Label)],t.prototype,"lbScore",void 0),i([l(cc.Label)],t.prototype,"coins",void 0),i([l(cc.Label)],t.prototype,"stars",void 0),i([c],t)}(cc.Component);o.NgcNavBarUserConflictInfo=u,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],NetClient:[function(e,t,o){"use strict";cc._RF.push(t,"857ba7vBrZJ4a03hZHRjr82","NetClient");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.FPS=void 0;var c,l=e("../../globals"),u=e("../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),p=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),d=e("../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),f=e("../../NanoGameCore/GameFramework/Scripts/Network/NetworkInterface"),h=e("../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClient"),g=e("../../NanoGameCore/Services/PartyRoom/PartyRoom"),y=e("../../NanoGameCore/Services/Platform/Platform"),m=e("../../Shared/MessageUtils"),_=e("../../Shared/protobuf/hsaprotobuf"),v=e("../FakeNamesManager"),S=e("../Player/PlayerAnim"),b=e("../Screens/PartyRoomScreen/PartyRoomManager"),N=e("../UserInfo"),P=e("./HSANetUtils"),C=e("../HSANetwork/Messages");(function(e){e[e.MIN=0]="MIN",e[e.MAX=1]="MAX",e[e.AVERAGE=2]="AVERAGE",e[e.CURRENT=3]="CURRENT"})(c=o.FPS||(o.FPS={}));var w=cc._decorator,T=w.ccclass,I=w.property,R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconNetworkErr=null,t.broadcastMessageRoutingTable={},t.partyId=null,t.isEnterPartyRoom=!1,t.TIMESYNC_NUM_PHASE=10,t.TIMESYNC_NUM_TURN=5,t.TIMESYNC_PHASE_DELAY=3,t.TIMESYNC_RECHECK_DELAY=15,t.currentPhase=1,t.currentTurn=1,t.lastPhaseTime=0,t.deltaClockRecordsNum=0,t.deltaClock=0,t.phaseRecords=[],t.connectRetryCount=0,t.connectCycleRunning=!1,t.lastMsgTime=-1,t._enableOutputSendLocalPlayerAndBotsGameState=!1,t._enableOutputServerFullGameState=!1,t}var o;return r(t,e),o=t,t.prototype._handleMessageBotCreationRequest=function(){throw new Error("Method not implemented.")},t.prototype._handleMessage_ServerGameStartingStatus=function(){throw new Error("Method not implemented.")},t.prototype.onLoad=function(){o.inst?console.error("More than one NetClient!!"):(o.inst=this,e.prototype.onLoad.call(this))},t.prototype.handleMessageInitialGameState=function(e){l.default.Game.inst.node.emit("gameStartingStatus",e),l.default.Game.inst.setGameParameters(JSON.parse(e.gameParameters))},t.prototype.handleMessageBotCreationRequest=function(e){cc.log("Got message to create bot for game "+e.gameId);var t=v.default.inst.allocRandomPerson(),o=t.name+"|"+t.countryCode;this.requestToHostBot(e.gameId,o,S.default.chooseRandomSkin())},t.prototype.handleMessagePong=function(e){var t=Date.now()-e.requesterTime;this.noteLatency(t)},t.prototype.sendMessage=function(e){this.webSocket.readyState==WebSocket.OPEN&&this.webSocket.send(e)},t.prototype.sendMessageCommandDrag=function(e,t,o,n,r,i){var a=m.buildMessageCommandDrag(e,t,o,n,r,i);this.sendMessage(_.CommandDrag.encode(a).finish())},t.prototype.sendMessageCommandDash=function(e,t,o,n,r,i,a){var s=m.buildMessageCommandDash(e,t,o,n,r,i,a);this.sendMessage(_.CommandDash.encode(s).finish())},t.prototype._sendMessageJoinGameRequest=function(e){if(void 0===e&&(e=""),this.connected){var t=this.localPlayerNetID,o=l.default.Main.inst.localUserName+"|"+d.NgcCountryFlagsManager.localCountry,n=l.default.Main.inst.localUserSkin,r=N.UserInfo.startBiggerSize;N.UserInfo.startBiggerSize=0;var i=Date.now(),a=m.buildMessageJoinGameRequest(i,t,o,!1,n,r,e);this.sendMessage(_.JoinGameRequest.encode(a).finish())}},t.prototype._sendMessagePing=function(){if(this.connected){var e=Date.now(),t=m.buildMessagePing(e);this.sendMessage(_.Ping.encode(t).finish())}},t.prototype.sendTimeSyncMessage=function(){if(this.currentPhase<=this.TIMESYNC_NUM_PHASE){var e=Date.now(),t=m.buildMessageTimeSyncRequest(e);this.sendMessage(_.TimeSyncRequest.encode(t).finish())}},t.prototype.startGameMode=function(){this.gameMode||(this.gameMode=!0,cc.log("Scheduling send player state"),this.unschedule(this.sendLocalPlayerAndBotsGameState),this.schedule(this.sendLocalPlayerAndBotsGameState,o.GAME_UPDATE_TIME_MS/1e3))},t.prototype.stopGameMode=function(){this.gameMode=!1,this.unschedule(this.sendLocalPlayerAndBotsGameState)},t.prototype.registerForBroadcastMessageType=function(e,t){var o=[];(o=this.broadcastMessageRoutingTable.hasOwnProperty(e)?this.broadcastMessageRoutingTable[e]:[]).indexOf(t)>=0||(o.push(t),this.broadcastMessageRoutingTable[e]=o)},t.prototype.localTimeToServer=function(e){return e},t.prototype._startUpdateLoop=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.gameMode?[4,this.timeout(o.GAME_UPDATE_TIME_MS)]:[3,2];case 1:return e.sent(),this.sendLocalPlayerAndBotsGameState(),[3,0];case 2:return[2]}})})},t.prototype._sendLocalPlayerGameState=function(){if(this.isConnected()){var e=l.default.PlayerController.localPlayer,t=e.getCurStateData(),o=C.ClientMessage_PlayerStateData(t,e.netID,l.default.Game.inst.curGameNetID,this.getServerTime());this.sendMessage(_.Client_PlayerStateData.encode(o).finish())}},t.prototype.sendLocalPlayerAndBotsGameState=function(){var e=this;if(this.isConnected()){var t=l.default.SceneManager.inst.getAllLocallyControlledPlayers(),o=[];t.forEach(function(t){var n=t.getCurStateData();o.push(C.BuildPlayerStateData(n)),e._enableOutputSendLocalPlayerAndBotsGameState&&cc.log(" HOANG >>> send "+t.getPlayerName(),n)}),this._enableOutputSendLocalPlayerAndBotsGameState=!1;var n=C.ClientMessage_PlayerStateData_Multi(o,l.default.Game.inst.curGameNetID,this.getServerTime());this.sendMessage(_.Client_PlayerStateData.encode(n).finish())}},t.prototype._exitGame=function(){cc.log("** EXITING GAME *** ");var e=l.default.PlayerController.localPlayer;if(e&&this.isConnected()){var t=C.ClientMessage_PlayerExitGame(e.netID,l.default.Game.inst.curGameNetID);this.sendMessage(_.ExitGame.encode(t).finish())}this.stopGameMode()},t.prototype.sendAttackCommand=function(e,t,o,n){if(this.isConnected()){var r={sender:e,attacker:t,target:o,damage:n},i=l.default.SceneManager.inst.getMainPlayer().getCurStateData(),a=C.ClientMessage_PlayerAttackCommand(r,i,l.default.Game.inst.curGameNetID);this.sendMessage(_.Client_PlayerAttackCommand.encode(a).finish())}},t.prototype.sendDashMessage=function(e,t){this.sendMessageCommandDash(e.time,l.default.Game.inst.curGameNetID,t,e.startPos.x,e.startPos.y,e.direction,e.distanceRatio)},t.prototype.sendMessageCommandDead=function(e,t){var o=m.buildMessagePlayerDeath(l.default.Game.inst.curGameNetID,e,this.getServerTime(),t);this.sendMessage(_.PlayerDeath.encode(o).finish())},t.prototype.sendMessageCommandKill=function(e){var t=m.buildMessagePlayerKill(l.default.Game.inst.curGameNetID,e,this.getServerTime());this.sendMessage(_.PlayerKill.encode(t).finish())},t.prototype._broadcastMessage=function(e,t,o){this.broadcastMessage(e,t,o)},t.prototype.broadcastMessage=function(e,t,o){cc.log("broadcastMessage",e,t,o);var n=C.ClientMessage_BroadcastMessage(this.localPlayerNetID,e,JSON.stringify(t),o,this.getServerTime());this.sendMessage(_.BroadcastMessage.encode(n).finish())},t.prototype.handleMessageTimeSyncResponse=function(e){var t=this,o=Date.now(),n=o+(o-e.requesterTime)/2-e.responderTime;if(this.phaseRecords.push(n),this.currentTurn++,this.currentTurn>this.TIMESYNC_NUM_TURN){this.phaseRecords.sort(function(e,t){return e-t});var r=this.phaseRecords[Math.round(this.TIMESYNC_NUM_TURN/2)];this.deltaClock=(this.deltaClock*this.deltaClockRecordsNum+r)/++this.deltaClockRecordsNum,this.phaseRecords.length=0,this.currentTurn=1,this.currentPhase++;var i=0;this.currentPhase<=this.TIMESYNC_NUM_PHASE?i=1e3*this.TIMESYNC_PHASE_DELAY:(this.currentPhase=1,i=1e3*this.TIMESYNC_RECHECK_DELAY),setTimeout(function(){t.sendTimeSyncMessage()},i)}else this.sendTimeSyncMessage()},t.prototype.handleMessageBroadcast=function(e){var t=e.type;e.payload=JSON.parse(e.payload);var o=this.broadcastMessageRoutingTable[t];o?o.forEach(function(t){t(e)}):console.warn("Received unrecognized broadcast message of type "+t)},t.prototype.handleMessage_ServerBroadcastMessage_Json=function(e){var t=e.type,o=this.broadcastMessageRoutingTable[t];o?o.forEach(function(t){t(e)}):console.warn("Received unrecognized broadcast message of type "+t)},t.prototype._handleMessage_ServerFullGameState=function(e){cc.log("STATE UPDATE DELAY",this.getServerTime()-e.clientTime,this.getServerTime()-e.serverTime,Math.round(l.default.Game.inst.getFPS(c.CURRENT))),l.default.Game.inst.updateStateFromServer(e)},t.prototype.handleMessageAttackResult=function(e){var t=l.default.PlayerController.localPlayer;t&&t.processAttackResult(e)},t.prototype.handleMessage_ServerPlayerDash=function(e){var t=l.default.SceneManager.inst.findPlayerByNetID(e.netID);t&&t.handleBroadcastMessagePlayerDash(e)},t.prototype.handleMessageCommandDash=function(e){var t=l.default.SceneManager.inst.findPlayerByNetID(e.playerId);t&&t.handleMessageCommandDash(e)},t.prototype.handleMessage_ServerPlayerKill=function(e){var t=l.default.PlayerController.localPlayer;t&&t.handleBroadcastMessagePlayerKill(e)},t.prototype.handleMessage_ServerPlayerDeath=function(e){var t=l.default.PlayerController.localPlayer;t&&t.handleBroadcastMessagePlayerDead(e)},t.prototype.handleMessageBotReassignmentRequest=function(e){l.default.SceneManager.inst.getAllPlayers().forEach(function(t){t.netID===e.playerId&&(console.log("Bot reassignment request received for player "+t.netID),t.switchToLocalBot())}),this._enableOutputSendLocalPlayerAndBotsGameState=!0},t.prototype.handleMessage_ServerNotification=function(e){switch(e.notificationType){case _.NotificationType.PLAYER_DISCONNECTED:break;case _.NotificationType.NONE:}},t.prototype._requestToHostBot=function(e,t,o){if(this.connected){cc.log("Requesting to host a bot for the game...");var n=this.localPlayerNetID+":"+P.default.generateRandomUUID();l.default.SceneManager.inst.addBotID(n);var r=Date.now(),i=m.buildMessageJoinGameRequest(r,n,t,!0,o,0,e);this.sendMessage(_.JoinGameRequest.encode(i).finish())}},t.prototype.cancelConnectCycle=function(){this.connectCycleRunning&&(this.unschedule(this.connectCycleFunc),this.connectCycleRunning=!1)},t.prototype.connectCycleFunc=function(){if(this.connected)return cc.log("Connected to server!"),void this.cancelConnectCycle();this.connectRetryCount++,this.connectRetryCount>=u.default.CONNECT_RETRY_MAX_COUNT?this.cancelConnectCycle():this.tryConnectToServer()},t.prototype.startConnectCycle=function(e){void 0===e&&(e=""),this.isConnected()||this.connectCycleRunning||p.NgcBuildConfig.useNgcServer||(console.log("Start connect cycle"),b.NgcPartyRoomManager.mustGoToPartyRoom()&&(e=b.NgcPartyRoomManager.getServerFromInviteLink()),this.cancelConnectCycle(),this.connectRetryCount=0,this.tryConnectToServer(e),this.schedule(this.connectCycleFunc,o.CONNECT_RETRY_TIME_SEC),this.connectCycleRunning=!0)},t.prototype._onDisconnect=function(){return a(this,void 0,void 0,function(){return s(this,function(){return cc.log("Disconnected from server"),this.connected=!1,this.unschedule(this.sendPing),l.default.Game.inst&&l.default.Game.inst.pause(!0),u.default.showNetworkDisconnect(),[2]})})},t.prototype._onError=function(){return a(this,void 0,void 0,function(){return s(this,function(){return console.log("Disconnected from server"),this.connected=!1,this.unschedule(this.sendPing),l.default.Game.inst.pause(!0),u.default.showNetworkDisconnect(),[2]})})},t.prototype._onConnect=function(){var e=this;this.localPlayerNetID=P.default.generateRandomUUID(),console.log("Connected! my random netID is "+this.localPlayerNetID),this.connected=!0,this.schedule(this.sendPing,o.PING_TIME_MS/1e3),setTimeout(function(){e.sendTimeSyncMessage()},0),this.setOnDisconnectedListener(function(t){return a(e,void 0,void 0,function(){return s(this,function(){switch(t){case f.DisconnectReason.Server:u.default.showNetworkDisconnect();break;case f.DisconnectReason.ForcedByClient:}return[2]})})});var t=this;this.webSocket.onmessage=function(e){var o=t;if(t.messagesRecd++,e.data instanceof Blob){var n=new FileReader;n.onload=function(){var e=this.result;t.handleMessage(e)},n.readAsArrayBuffer(e.data)}else if(e.data instanceof ArrayBuffer)t.handleMessage(e.data);else if("string"==typeof e.data){var r=JSON.parse(e.data);switch(console.log("OnMessage: "+e.data),r.message){case C.MessageType.ServerBroadcastTechMessage:o.handleMessage_ServerBroadcastMessage_Json(r)}g.NgcPartyRoom.inst&&g.NgcPartyRoom.inst.updateMessage(JSON.parse(e.data))}},t.webSocket.onclose=function(e){t.onDisconnect(e)},t.webSocket.onerror=function(e){t.onError(e)}},t.prototype.handleMessage=function(e){var t=new Uint8Array(e),o=m.getMessageType(t);switch(this.lastMsgTime=Date.now(),o){case _.MessageType.BROADCAST_MESSAGE:this.handleMessageBroadcast(_.BroadcastMessage.decode(t));break;case _.MessageType.SERVER_ATTACKRESULT:this.handleMessageAttackResult(_.Server_AttackResult.decode(t));break;case _.MessageType.COMMAND_DASH:this.handleMessageCommandDash(_.CommandDash.decode(t));break;case _.MessageType.PLAYER_KILL:this.handleMessage_ServerPlayerKill(_.PlayerKill.decode(t));break;case _.MessageType.PLAYER_DEATH:this.handleMessage_ServerPlayerDeath(_.PlayerDeath.decode(t));break;case _.MessageType.BOT_REASSIGNMENT_REQUEST:this.handleMessageBotReassignmentRequest(_.BotReassignmentRequest.decode(t));break;case _.MessageType.PONG:this.handleMessagePong(_.Pong.decode(t));break;case _.MessageType.TIME_SYNC_RESPONSE:this.handleMessageTimeSyncResponse(_.TimeSyncResponse.decode(t));break;case _.MessageType.INITIAL_GAME_STATE:this.handleMessageInitialGameState(_.InitialGameState.decode(t));break;case _.MessageType.BOT_CREATION_REQUEST:this.handleMessageBotCreationRequest(_.BotCreationRequest.decode(t));break;case _.MessageType.SERVER_FULLGAMESTATE:this.handleMessage_ServerFullGameState(_.Server_FullGameState.decode(t));break;case _.MessageType.CLIENT_PLAYERSTATEDATA_MULTI:case _.MessageType.CLIENT_PLAYERSTATEDATA:this.handleMessage_ClientPlayerStateDataMulti(_.Client_PlayerStateData.decode(t));break;default:console.log("Unknown message type: "+o)}},t.prototype.handleMessage_ClientPlayerStateDataMulti=function(e){cc.log(Date.now()-e.time+"ms"),l.default.Game.inst.updateStateFromServer(e)},t.prototype._tryConnectToServer=function(e,t){void 0===e&&(e=null);var o=this.serverAddress;null!=e&&""!=e&&(o=e),y.NgcPlatform.inst&&y.NgcPlatform.inst.getPlatformID()==y.PlatformID.Android?this.webSocket=new WebSocket(o,[],this.wssCacert.nativeUrl):this.webSocket=new WebSocket(o,[]),cc.log("Trying to connect to server @ "+o);var n=this;this.webSocket.onopen=function(){n.onConnect(),t&&t()},this.webSocket.onerror=function(e){console.log("ConnectError: ",JSON.stringify(e))},n.webSocket.onclose=function(e){console.log("ConnectClose: ",JSON.stringify(e))}},t.prototype.start=function(){p.NgcBuildConfig.enabledDebugMode&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},t.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.r:this._enableOutputServerFullGameState=!0;break;case cc.macro.KEY.s:this._enableOutputSendLocalPlayerAndBotsGameState=!0}},t.prototype.update=function(){this.timeSinceLastMsg=Date.now()-this.lastMsgTime,this.timeSinceLastPong=Date.now()-this.lastPongTime},t.PING_TIME_MS=1e3,t.GAME_UPDATE_TIME_MS=100,t.inst=null,t.CONNECT_RETRY_TIME_SEC=3,t.CONNECT_RETRY_MAX_COUNT=15,i([I(cc.SpriteFrame)],t.prototype,"iconNetworkErr",void 0),o=i([T],t)}(h.NgcNetClient);o.default=R,l.default.NetClient=R,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../NanoGameCore/GameFramework/Scripts/Network/NetworkInterface":"NetworkInterface","../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../NanoGameCore/Services/PartyRoom/PartyRoom":"PartyRoom","../../NanoGameCore/Services/Platform/Platform":"Platform","../../Shared/MessageUtils":"MessageUtils","../../Shared/protobuf/hsaprotobuf":"hsaprotobuf","../../globals":"globals","../FakeNamesManager":"FakeNamesManager","../HSANetwork/Messages":"Messages","../Player/PlayerAnim":"PlayerAnim","../Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../UserInfo":"UserInfo","./HSANetUtils":"HSANetUtils"}],NetStatsTracker:[function(e,t,o){"use strict";cc._RF.push(t,"d6847EbSKRHWJB78F33hRkq","NetStatsTracker");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNetStatsTracker=void 0;var a=e("../../../Services/Telemetry/Telemetry"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sessionStarted=!1,t.timeBetweenRemoteUpdates_Total=0,t.timeBetweenRemoteUpdates_NumSamples=0,t.oldRemoteDataReceived=0,t.pingRoundTrip_TotalTime=0,t.pingRoundTrip_NumSamples=0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.warn("Already a netstats tracker!"):o.inst=this},t.prototype.resetAll=function(){this.timeBetweenRemoteUpdates_Total=0,this.timeBetweenRemoteUpdates_NumSamples=0,this.oldRemoteDataReceived=0,this.pingRoundTrip_TotalTime=0,this.pingRoundTrip_NumSamples=0},t.prototype.reportPingRoundtripTime=function(e){this.pingRoundTrip_TotalTime+=e,this.pingRoundTrip_NumSamples++},t.prototype.reportOldRemoteDataReceived=function(){this.oldRemoteDataReceived++},t.prototype.reportTimeBetweenRemoteUpdates=function(e){this.timeBetweenRemoteUpdates_NumSamples++,this.timeBetweenRemoteUpdates_Total+=e},t.prototype.beginSession=function(){this.sessionStarted&&console.warn("NetStatsTrackers: beginSession() called without first seeing endSession()"),this.resetAll(),this.sessionStarted=!0},t.prototype.endSession=function(){var e={averageTimeBetweenRemoteUpdatesMS:this.timeBetweenRemoteUpdates_Total/(this.timeBetweenRemoteUpdates_NumSamples+1),avergePingRoundTripTimeMS:this.pingRoundTrip_TotalTime/(this.pingRoundTrip_NumSamples+1),oldRemoteDataReceived:this.oldRemoteDataReceived};a.NgcTelemetry.inst.LogEvent_ReportNetStats(e),this.sessionStarted=!1},t.prototype.start=function(){},t.inst=null,o=i([c],t)}(cc.Component));o.NgcNetStatsTracker=l,cc._RF.pop()},{"../../../Services/Telemetry/Telemetry":"Telemetry"}],NetUtils:[function(e,t,o){"use strict";cc._RF.push(t,"a9a03K+BxBM/LvKMOa7Ew/2","NetUtils"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNetUtils=void 0;var n=function(){function e(){}return e.SetRandomSeed=function(t){e.randomSeed=t},e.generateRandomUUID=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},e.RandomRange=function(e,t,o){void 0===o&&(o=!1);var n=t-e,r=e+Math.random()*n;return o&&(r=Math.round(r)),r},e.randomSeed=305419896,e}();o.NgcNetUtils=n,cc._RF.pop()},{}],NetworkInterface:[function(e,t,o){"use strict";cc._RF.push(t,"e82f8eFuq9JRLlZLxj0h+iz","NetworkInterface"),Object.defineProperty(o,"__esModule",{value:!0}),o.DisconnectReason=void 0,function(e){e[e.Server=0]="Server",e[e.ForcedByClient=1]="ForcedByClient",e[e.OpenNewConnection=2]="OpenNewConnection"}(o.DisconnectReason||(o.DisconnectReason={})),cc._RF.pop()},{}],"NgcA2HSManager.ts":[function(e,t,o){"use strict";cc._RF.push(t,"742d86H7tBPP4YC24ldmC+L","NgcA2HSManager.ts");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../GameFramework/Scripts/BuildConfig"),i=e("../../../Services/Platform/Platform"),a=cc._decorator,s=a.ccclass,c=(a.property,function(){function e(){}var t;return t=e,e.isValidOrigin=function(){try{return!!window.top.location.href}catch(e){return!1}},e.gotoNano=function(){var e=r.NgcBuildConfig.gameClientURL;-1==r.NgcBuildConfig.gameClientURL.indexOf("?")?e+="?A2HS=true":e+="&A2HS=true",cc.sys.openURL(e)},e.getGameUrl=function(){var e=i.NgcPlatform.inst.getPartyLinkBase();return e.replace(/#\w*/g,"")},e.getURLParameter=function(e){var o=t.getGameUrl(),n=new URL(o).search;if(null==n||""==n){var r=o.indexOf("?");r>=0&&(n=o.substring(r,o.length))}return cc.log("queryString",n),new URLSearchParams(n).get(e)},e.shouldA2HS=function(){var e;return(null===(e=i.NgcPlatform.inst)||void 0===e?void 0:e.getPlatformID())!=i.PlatformID.Android&&"true"==t.getURLParameter("A2HS")},e.removeA2HSParameter=function(){if(t.isValidOrigin())try{var e=t.getGameUrl();e.indexOf("&A2HS=true")>=0?e=e.replace("&A2HS=true",""):e.indexOf("A2HS=true")>=0&&(e=e.replace("A2HS=true","")),window.history.pushState({},document.title,e)}catch(o){cc.warn(o)}},t=n([s],e)}());o.default=c,cc._RF.pop()},{"../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../Services/Platform/Platform":"Platform"}],NgcAchievementHelper:[function(e,t,o){"use strict";cc._RF.push(t,"16b429Q5XROo7TybJ+bLR88","NgcAchievementHelper"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcAchievementHelper=void 0;var n=e("../../../Services/Inventory/Inventory"),r=function(){function e(){this._achievementMaxValueList={},this._addAchievementRequestQueue=[],this._isAddingAchievement=!1}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.updateAchievementMaxValue=function(e,t){this._achievementMaxValueList[e]=t},e.prototype.addTo=function(e,t){var o=this;this._achievementMaxValueList[e]&&n.NgcInventory.inst.getItemCount(e,function(n,r){if(!n&&r){var i=Math.min(t,o._achievementMaxValueList[e])-r.count;i>0&&o.addItem(e,i)}})},e.prototype.addMore=function(e,t){var o=this;this._achievementMaxValueList[e]&&n.NgcInventory.inst.getItemCount(e,function(n,r){if(!n&&r){var i=o._achievementMaxValueList[e]-r.count,a=Math.min(t,i);a>0&&o.addItem(e,a)}})},e.prototype.addItem=function(e,t){var o={itemID:e,count:t};this._addAchievementRequestQueue.push(o),this.checkToSendAddItem()},e.prototype.checkToSendAddItem=function(){var e=this;if(0==this._isAddingAchievement&&this._addAchievementRequestQueue.length>0){this._isAddingAchievement=!0;var t=[];this._addAchievementRequestQueue.forEach(function(e){return t.push(e)}),this._addAchievementRequestQueue=[],n.NgcInventory.inst.addItemList(t,function(){e._isAddingAchievement=!1,e.checkToSendAddItem()})}},e._instance=null,e}();o.NgcAchievementHelper=r,cc._RF.pop()},{"../../../Services/Inventory/Inventory":"Inventory"}],NgcAdsManager:[function(e,t,o){"use strict";cc._RF.push(t,"7b4a4QYLitORLDTHDie5ot/","NgcAdsManager");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPointcuts=void 0;var r=e("../../../SDK/Nano/NanoSrv"),i=e("../../../Services/Ads/Ads"),a=e("../BuildConfig"),s=e("../CONSTANTS"),c=cc._decorator.ccclass;(function(e){e.bannerLeaderboard="banner_leaderboard",e.bannerPartyRoom="banner_partyroom",e.bannerRewardVideo="banner_reward_video",e.bannerMainMenu="banner_mainmenu",e.bannerLoading="banner_loading",e.bannerShop="banner_shop",e.bannerRealPrize="banner_realPrize",e.bannerRevive="banner_revive",e.bannerResult="banner_result",e.bannerSpectator="banner_spectator",e.videoDaily="video_daily2x",e.videoShopReward="video_shop",e.videoRewardDialog="video_reward_dialog",e.videoScoreMultiplier="Video_score_multiplier",e.videoCurrencyPack="video_currency_pack",e.videoStartBigger="video_start_bigger",e.videoMainmenuReward="video_mainmenu_reward",e.videoReviveDialog="video_revive_dialog",e.videoLuckybooster="video_luckybooster",e.interstitialMenu="interstitial_menu",e.interPreGame="inter_pregame",e.interPostGame="inter_postgame",e.videoXInOneBundle="video_Xin1offer"})(o.NgcPointcuts||(o.NgcPointcuts={}));var l=function(){function e(){this.allowedPointcuts=[],this._lastPoincut="",this._interstitialCooldownTime=0,this._maxLoadingAdMessageDuration=s.NGC_CONSTANTS.MAX_LOADING_AD_MESSAGE_DURATION,this.isReceivedAdsConfig=!1}var t;return t=e,Object.defineProperty(e,"inst",{get:function(){return t._inst||cc.error("YOU SHOULD NEW INSTACE OF NgcAdsManager WHEN SERVICE IS INITED"),t._inst},set:function(e){t._inst=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastPoincutID",{get:function(){return this._lastPoincut},set:function(e){this._lastPoincut=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"interstitialCooldownTime",{get:function(){return this._interstitialCooldownTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLoadingAdMessageDuration",{get:function(){return this._maxLoadingAdMessageDuration},enumerable:!1,configurable:!0}),e.prototype.getAllowedPointcut=function(){return a.NgcBuildConfig.offlineMode||this.isReceivedAdsConfig?this.allowedPointcuts||[]:this._getAdsConfig()},e.prototype.isAdsPoincutAvailable=function(e,t){var o,n=this.getAllowedPointcut();return!!n&&-1!==n.indexOf(e)&&(null===(o=i.NgcAds.inst)||void 0===o?void 0:o.adsIsAvailable(t))},e.prototype._getAdsConfig=function(){var e,t=this,o=null===(e=r.default.inst.getCurGameInfo())||void 0===e?void 0:e.adsPointcut;if(!o)return[];var n=function(e){Object.keys(e).forEach(function(o){e[o]&&t.allowedPointcuts.push(o)})},i=o.banner_poincut||{},a=o.video_poincut||{},s=o.interstitial_poincut||{};n(i),n(a),n(s);var c=o.interstitial_Config||{},l=function(e){return/^-?[\d.]+(?:e-?\d+)?$/.test(e)&&e>0};if(0!==Object.keys(c).length){var u=c.interstitial_cooldown_time,p=c.loading_Ad_Message_Duration;l(u)&&(this._interstitialCooldownTime=u),l(p)&&(this._maxLoadingAdMessageDuration=p)}return this.isReceivedAdsConfig=!0,this.allowedPointcuts||[]},e.prototype.showBanner=function(e,t,o){this.show(e,i.AdsType.Banner,null,null,t,o)},e.prototype.showInterstitial=function(e,t,o){this.show(e,i.AdsType.Interstitial,null,null,t,o)},e.prototype.showRewardVideo=function(e,t,o,n,r){this.show(e,i.AdsType.VideoReward,t,o,n,r)},e.showBannerTimeStamp=0,t=n([c],e)}();o.default=l,cc._RF.pop()},{"../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads","../BuildConfig":"BuildConfig","../CONSTANTS":"CONSTANTS"}],NgcBoosterItem:[function(e,t,o){"use strict";cc._RF.push(t,"2285aWUi7xKKYcxny+b2ue3","NgcBoosterItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Core/ResizableComponent"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.image=null,t._index=0,t._boosterItemList=[],t}return r(t,e),t.prototype.onLoad=function(){var e=a.ResizableComponent.getResizableComponent(this.image.node);e.baseSize&&(e.baseSize.designWidth=this.image.node.width,e.baseSize.designHeight=this.image.node.height)},t.prototype.setBoosterItemList=function(e){this._boosterItemList=e},Object.defineProperty(t.prototype,"Index",{get:function(){return this._index},set:function(e){this._index=e,this.ImageSprite=this._boosterItemList[this._index%this._boosterItemList.length].spriteFrame},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ImageSprite",{set:function(e){this.image.spriteFrame=e;var t=a.ResizableComponent.getResizableComponent(this.image.node);t.baseSize&&(t.baseSize.width=this.image.node.width,t.baseSize.height=this.image.node.height),a.ResizableComponent.resizeNodeByWidth(this.image.node,this.image.node.width)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.node.y},set:function(e){this.node.y=e},enumerable:!1,configurable:!0}),i([l(cc.Sprite)],t.prototype,"image",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../Core/ResizableComponent":"ResizableComponent"}],NgcBoosterScroll:[function(e,t,o){"use strict";cc._RF.push(t,"efcd2ug45JEg5Km+/9hBmQn","NgcBoosterScroll");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBoosterScroll=o.SpinDirection=void 0;var a,s=e("./NgcBoosterItem"),c=cc._decorator,l=c.ccclass,u=c.property;(function(e){e[e.UP=1]="UP",e[e.DOWN=-1]="DOWN"})(a=o.SpinDirection||(o.SpinDirection={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item1=null,t.item2=null,t._boosterItemList=[],t._spinDirection=a.DOWN,t._isInitalized=!1,t._isRunningNormal=!1,t._onSpinFinishCallback=null,t._duration=3,t._moveSpeed=100,t._spinFast=!1,t}return r(t,e),t.prototype.update=function(e){this._boosterItemList.length<=0||(this._isRunningNormal?this.move(100*e*this._spinDirection):this._spinFast&&this.move(e*this._moveSpeed*this._spinDirection))},Object.defineProperty(t.prototype,"spinFast",{set:function(e){this._spinFast=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"RunNormal",{set:function(e){this._isRunningNormal=e},enumerable:!1,configurable:!0}),t.prototype.init=function(e,t){void 0===t&&(t=a.DOWN),this._boosterItemList=e,this._spinDirection=t,this._boosterItemList.length>0&&(this.item1.node.width=this.node.width,this.item1.node.height=this.node.height,this.item1.y=0,this.item1.setBoosterItemList(this._boosterItemList),this.item1.Index=0,this.item2.node.width=this.node.width,this.item2.node.height=this.node.height,this.item2.y=this.node.height,this.item2.setBoosterItemList(this._boosterItemList),this.item2.Index=1),this._isInitalized=!0},t.prototype.displaySpinAnimation=function(e,t,o,n){var r=this._boosterItemList.findIndex(function(t){return t.itemID==e});this._duration=o,this._onSpinFinishCallback=n;var i=this._boosterItemList.length*this.node.height,s=this.item1.y+this.node.height*(r-this.item1.Index),c=(this._spinDirection==a.DOWN?s>=0?-s:-(i+s):s<=0?-s:i-s)+t*i*this._spinDirection;this.startSpinning(c)},t.prototype.startSpinning=function(e){this._lastY=0,cc.tween({y:0}).to(this._duration,{y:e},{progress:this.spinUpdate.bind(this),easing:"cubicOut"}).call(this.onSpinFinish.bind(this)).start()},t.prototype.onSpinFinish=function(){this._onSpinFinishCallback&&(this._onSpinFinishCallback(),this._onSpinFinishCallback=null)},t.prototype.spinUpdate=function(e,t,o,n){var r=e+(t-e)*n,i=r-this._lastY;this._lastY=r,this.move(i)},t.prototype.move=function(e){if(0!=this._isInitalized){var t=Math.floor(Math.abs(e/(2*this.node.height)));t>0&&(this.item1.Index=e>0?this.getPreviousIndexOfItem(this.item1.Index,t):this.getNextIndexOfItem(this.item1.Index,t),this.item2.Index=e>0?this.getPreviousIndexOfItem(this.item2.Index,t):this.getNextIndexOfItem(this.item2.Index,t)),e%=2*this.node.height,this.moveItem(this.item1,e),this.moveItem(this.item2,e)}},t.prototype.moveItem=function(e,t){if(e.y+=t,e.y>=this.node.height){var o=e.y-this.node.height;e.y=-this.node.height+o,e.Index=this.getPreviousIndexOfItem(e.Index,1)}e.y<=-this.node.height&&(o=e.y+this.node.height,e.y=this.node.height+o,e.Index=this.getNextIndexOfItem(e.Index,1))},t.prototype.getNextIndexOfItem=function(e,t){return(e+2*t)%this._boosterItemList.length},t.prototype.getPreviousIndexOfItem=function(e,t){var o=(e-2*t)%this._boosterItemList.length;return o>=0?o:this._boosterItemList.length+o},i([u(s.default)],t.prototype,"item1",void 0),i([u(s.default)],t.prototype,"item2",void 0),i([l],t)}(cc.Component);o.NgcBoosterScroll=p,cc._RF.pop()},{"./NgcBoosterItem":"NgcBoosterItem"}],NgcBoosterTypeHelper:[function(e,t,o){"use strict";cc._RF.push(t,"9cc4ahhoK1IrKOC/ZbgTf6r","NgcBoosterTypeHelper"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBoosterTypeHelper=o.BoosterUseType=void 0,function(e){e[e.IN_GAME=0]="IN_GAME",e[e.IN_MAIN_MENU=1]="IN_MAIN_MENU"}(o.BoosterUseType||(o.BoosterUseType={}));o.NgcBoosterTypeHelper=function(e){this.luckyBoosterManager=null,this.luckyBoosterManager=e},cc._RF.pop()},{}],NgcBoosterTypeInGameHelper:[function(e,t,o){"use strict";cc._RF.push(t,"cbb0dwKBQhJK6kwroi41S0T","NgcBoosterTypeInGameHelper");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBoosterTypeInGameHelper=void 0;var i=e("./NgcBoosterTypeHelper"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return i.BoosterUseType.IN_GAME},t.prototype.canRunNormal=function(){return""===this.luckyBoosterManager.AvailableBooster},t.prototype.checkShowBooster=function(){this.luckyBoosterManager.LuckyBoosterInfo.enable&&this.luckyBoosterManager.DailyBoosterUI.show()},t.prototype.checkDisplayUseBoosterInGame=function(){""!=this.luckyBoosterManager.AvailableBooster?this.luckyBoosterManager.enableUseBoosterInGame(!0):this.luckyBoosterManager.enableUseBoosterInGame(!1)},t.prototype.checkPlayAnimationMoveBoosterToCharacter=function(e,t){t&&t()},t}(i.NgcBoosterTypeHelper);o.NgcBoosterTypeInGameHelper=a,cc._RF.pop()},{"./NgcBoosterTypeHelper":"NgcBoosterTypeHelper"}],NgcBoosterTypeInMainMenuHelper:[function(e,t,o){"use strict";cc._RF.push(t,"83d59IEbuNMqp3rFFn+5h/t","NgcBoosterTypeInMainMenuHelper");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.NgcBoosterTypeInMainMenuHelper=void 0;var i=e("../../../../../Scripts/UserInfo"),a=e("../../../../GameFramework/Scripts/BuildConfig"),s=e("../../../../GameFramework/Scripts/NgcUserInfo"),c=e("../../../OfflineMode/OfflineMode"),l=e("../NgcLuckyBoosterManager"),u=e("./NgcBoosterTypeHelper"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getType=function(){return u.BoosterUseType.IN_MAIN_MENU},t.prototype.canRunNormal=function(){return!0},t.prototype.checkShowBooster=function(){var e,t=this.luckyBoosterManager.LuckyBoosterInfo,o=(a.NgcBuildConfig.offlineMode?c.OfflineMode.GetTotalRoundCount():s.default.totalRoundCount)>=(null!==(e=t.displayCondition)&&void 0!==e?e:l.DEFAULT_DISPLAY_CONDITION);t.enable&&""==this.luckyBoosterManager.AvailableBooster&&this.extraBoosterShowCondition()&&o?this.luckyBoosterManager.DailyBoosterUI.show():this.luckyBoosterManager.DailyBoosterUI.hide()},t.prototype.extraBoosterShowCondition=function(){return!i.UserInfo.curBooster},t.prototype.checkDisplayUseBoosterInGame=function(){this.luckyBoosterManager.enableUseBoosterInGame(!1)},t.prototype.checkPlayAnimationMoveBoosterToCharacter=function(e,t){this.luckyBoosterManager.DailyBoosterUI.moveBoosterToCharacter(e,t)},t}(u.NgcBoosterTypeHelper);o.NgcBoosterTypeInMainMenuHelper=p,cc._RF.pop()},{"../../../../../Scripts/UserInfo":"UserInfo","../../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../OfflineMode/OfflineMode":"OfflineMode","../NgcLuckyBoosterManager":"NgcLuckyBoosterManager","./NgcBoosterTypeHelper":"NgcBoosterTypeHelper"}],NgcCrownRoadItem:[function(e,t,o){"use strict";cc._RF.push(t,"77a5cENDa1AtKmt0D8ymdXn","NgcCrownRoadItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcCrownRoadItem=void 0;var a=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../Services/Inventory/Inventory"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardIcon=null,t.rewardNumberLabel=null,t.checkIconNode=null,t.defaultItemSpriteFrame=null,t.dimColor=new cc.Color(150,150,150),t.glowNode=null,t.rewardItemID=null,t.rankNumber=null,t}return r(t,e),t.prototype.start=function(){this.checkIconNode.active=!1},t.prototype.setDimStatus=function(e){void 0===e&&(e=!0),e=!this.rankNumber&&e,this.rewardIcon.color=e?this.dimColor:cc.color(255,255,255),this.rewardNumberLabel.node.color=e?this.dimColor:cc.color(255,255,255),this.checkIconNode.active=e},t.prototype.setRewardItem=function(e,t,o,n,r){var i=this;void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=!1);var a=null;try{a=s.NgcInventory.inst.itemTable[e].picture,cc.loader.loadRes(a,cc.SpriteFrame,function(e,t){i.rewardIcon.getComponent(cc.Sprite).spriteFrame=e?i.defaultItemSpriteFrame:t})}catch(c){this.rewardIcon.getComponent(cc.Sprite).spriteFrame=this.defaultItemSpriteFrame}null!==o&&(this.rewardIcon.scale=o),null!==t&&t>1?(this.rewardNumberLabel.node.opacity=r?0:255,this.setRewardNumber(t)):this.rewardNumberLabel.node.opacity=0,this.rewardItemID=e,this.rankNumber=n},t.prototype.emptyNextReward=function(){this.rewardIcon.getComponent(cc.Sprite).spriteFrame=null,this.rewardNumberLabel.node.opacity=0,this.rewardItemID=null,this.rankNumber=null},t.prototype.setRewardNumber=function(e){this.rewardNumberLabel.string="x"+e},i([u(cc.Node)],t.prototype,"rewardIcon",void 0),i([u(a.NgcLabelLocalized)],t.prototype,"rewardNumberLabel",void 0),i([u(cc.Node)],t.prototype,"checkIconNode",void 0),i([u(cc.SpriteFrame)],t.prototype,"defaultItemSpriteFrame",void 0),i([u(cc.Color)],t.prototype,"dimColor",void 0),i([u(cc.Node)],t.prototype,"glowNode",void 0),i([l],t)}(cc.Component);o.NgcCrownRoadItem=p,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../Services/Inventory/Inventory":"Inventory"}],NgcCrownRoadMilestoneItem:[function(e,t,o){"use strict";cc._RF.push(t,"626f1r7Y81OWKtuSU7XmhSE","NgcCrownRoadMilestoneItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcMilestoneItem=void 0;var a=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankBG=null,t.rankPointLabel=null,t.rewardBG=null,t.rewardIcon=null,t.rewardNumberLabel=null,t.rewardNameLabel=null,t.checkIconNode=null,t.dimColor=new cc.Color(150,150,150),t.defaultItemSpriteFrame=null,t}return r(t,e),t.prototype.setObtainStatus=function(e){void 0===e&&(e=!0),this.rewardIcon.color=e?this.dimColor:cc.color(255,255,255),this.rewardNumberLabel.node.color=e?this.dimColor:cc.color(255,255,255),this.checkIconNode.active=e},t.prototype.setRewardNumber=function(e){var t="";e>1&&(t="x"+e),this.rewardNumberLabel.string=t},t.prototype.setRewardName=function(e){e?s.NgcLocalizedManager.setTextKey(this.rewardNumberLabel,e):this.rewardNumberLabel.node.active=!1},i([u(cc.Node)],t.prototype,"rankBG",void 0),i([u(a.NgcLabelLocalized)],t.prototype,"rankPointLabel",void 0),i([u(cc.Node)],t.prototype,"rewardBG",void 0),i([u(cc.Node)],t.prototype,"rewardIcon",void 0),i([u(a.NgcLabelLocalized)],t.prototype,"rewardNumberLabel",void 0),i([u(a.NgcLabelLocalized)],t.prototype,"rewardNameLabel",void 0),i([u(cc.Node)],t.prototype,"checkIconNode",void 0),i([u(cc.Color)],t.prototype,"dimColor",void 0),i([u(cc.SpriteFrame)],t.prototype,"defaultItemSpriteFrame",void 0),i([l],t)}(cc.Component);o.NgcMilestoneItem=p,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager"}],NgcCrownRoadProgressionDialog:[function(e,t,o){"use strict";cc._RF.push(t,"e440bVUc6hCLaVtL6hCrwX5","NgcCrownRoadProgressionDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcCrownRoadProgressionDialog=void 0;var a=e("../../../Core/Utils"),s=e("../../../GameFramework/Scripts/Ads/NgcAdsManager"),c=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),l=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),u=e("../../../Services/Inventory/Inventory"),p=e("../../Dialogs/Script/DialogBase"),d=e("./CrownRoadManager"),f=e("./NgcCrownRoadMilestoneItem"),h=e("./NgcCrownRoadUI"),g=cc._decorator,y=g.ccclass,m=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.NO_RANK_TITLE_KEY="CRD_NORANK",t.milestoneItem=null,t.scrollView=null,t.progressBarBG=null,t.progressBar=null,t.backProgressBar=null,t.currentMarker=null,t.currentRankLabel=null,t.currentRankSprite=null,t.normalItemScale=1,t.rankItemScale=.75,t.customScaleTable=[],t.markerPointLabel=null,t.scaleHashTable=null,t.isLoading=!1,t.filesNeedToBeLoaded=0,t}return r(t,e),t.prototype.onLoad=function(){this.markerPointLabel=this.currentMarker.getComponentInChildren(c.NgcLabelLocalized),this.milestoneItem.active=!1,this.scaleTableToHashTable()},t.prototype.onButtonCloseClick=function(){this.hide()},t.prototype.scaleTableToHashTable=function(){if(this.scaleHashTable)return this.scaleHashTable;var e={};return this.customScaleTable.forEach(function(t){return e[t.itemID]=t.scale}),this.scaleHashTable=e,e},t.prototype.getUnitLength=function(e){var t=Number.POSITIVE_INFINITY,o=null;for(var n in e){if(null!==o){var r=parseInt(n)-o;r<t&&(t=r)}o=parseInt(n)}return t},t.prototype.calculateContentHeight=function(e,t,o,n,r,i){var a=0,s=null;for(var c in e){if(s)if(parseInt(c)>=r&&i){var l=1.25;l=1,a+=this.milestoneItem.height+t*l,n[c]=l}else l=(parseInt(c)-s)/o,l=1,a+=this.milestoneItem.height+t*l,n[c]=l;else n[c]=1,a+=this.milestoneItem.height;s=c}return a},t.prototype.getMaxRewardMilestonePoint=function(e){var t=Number.NEGATIVE_INFINITY;for(var o in e)parseInt(o)>t&&(t=parseInt(o));return t},t.prototype.update=function(){this.updateLoading()},t.prototype.updateLoading=function(){this.isLoading&&this.filesNeedToBeLoaded<=0&&(this.isLoading=!1,cc.tween(this.scrollView.node).to(.5,{opacity:255}).start())},t.prototype.hide=function(){e.prototype.hide.call(this,this.onHideCB)},t.prototype.init=function(e,t,o,n,r){var i=this;this.onHideCB=r,this.isLoading=!0,this.filesNeedToBeLoaded=0,this.scrollView.node.opacity=0,t<=e&&(t=e,this.backProgressBar.active=!1);var c={};for(var p in d.default.inst.rewardData)c[p]=d.default.inst.rewardData[p];void 0===c[0]&&(c[0]=[null,null,null]);var h=this.getMaxRewardMilestonePoint(c),g=!1;e>h&&(c[e]=[null,null],h=e,g=!0),t>h&&(c[t]=[null,null]);var y=this.getUnitLength(c),m=this.milestoneItem.height/2+30,_={},v=this.calculateContentHeight(c,30,y,_,h,g)+m;this.scrollView.content.height=v;var S,b,N=null,P=null,C=null,w=0,T={},I=u.NgcInventory.inst.itemTable,R=function(o){var r=c[o][0],s=c[o][1],l=c[o][3],u=cc.instantiate(O.milestoneItem),p=u.getComponent(f.NgcMilestoneItem),d=p.rewardBG.parent;if(d.active=!1,p.rankBG.active=!1,p.rewardBG.active=!1,p.checkIconNode.active=!1,T[o]=u,u.active=!0,C?(u.y=C+u.height+30*_[o],C=u.y):(u.y=-v+m,C=u.y),p.rankPointLabel.string=o,null!==r){d.active=!0,0===s?(l=I[r].displayName,p.rankBG.active=!0,p.rewardIcon.getComponent(cc.Widget)):(p.rewardBG.active=!0,p.setObtainStatus(!!n[o])),s>1?p.setRewardNumber(s):p.setRewardName(l);var h=O.scaleHashTable[r]||(0===s?O.rankItemScale:O.normalItemScale);p.rewardIcon.scale=h;var g=null;try{g=I[r].picture,O.filesNeedToBeLoaded+=1,cc.loader.loadRes(g,cc.SpriteFrame,function(e,t){i.filesNeedToBeLoaded-=1,p.rewardIcon.getComponent(cc.Sprite).spriteFrame=e?p.defaultItemSpriteFrame:t})}catch(b){p.rewardIcon.getComponent(cc.Sprite).spriteFrame=p.defaultItemSpriteFrame}}if(O.scrollView.content.addChild(u),!N&&parseInt(o)>=e){var y=(e-w)/(parseInt(o)-w),S=Math.abs(a.Utils.getWorldPos(T[o]).y-a.Utils.getWorldPos(T[w]).y);N=a.Utils.getWorldPos(T[w]).y+y*S}!P&&parseInt(o)>=t&&(y=(t-w)/(parseInt(o)-w),S=Math.abs(a.Utils.getWorldPos(T[o]).y-a.Utils.getWorldPos(T[w]).y),P=a.Utils.getWorldPos(T[w]).y+y*S),w=parseInt(o)},O=this;for(var E in c)R(E);S=a.Utils.getWorldPos(T[0]).y,this.progressBar.height=Math.abs(N-S)+0,this.progressBar.anchorY=0,this.progressBar.y=-this.scrollView.content.height+m-0,this.backProgressBar.height=Math.abs(P-S)+0,this.backProgressBar.anchorY=0,this.backProgressBar.y=-this.scrollView.content.height+m-0,b=a.Utils.getWorldPos(T[w]).y,this.progressBarBG.height=Math.abs(b-S)+0,this.progressBarBG.anchorY=0,this.progressBarBG.y=-this.scrollView.content.height+m-0,this.currentMarker.parent=null,this.currentMarker.parent=this.scrollView.content,this.currentMarker.y=-this.scrollView.content.height+this.progressBar.height-0+m,this.markerPointLabel.string=e.toString();var k=cc.v2(0,-this.currentMarker.y);k.y-=this.scrollView.node.height/2,this.scrollView.scrollToOffset(k,0),o?(l.NgcLocalizedManager.setTextKey(this.currentRankLabel,o.displayName),cc.loader.loadRes(o.picture,cc.SpriteFrame,function(e,t){e||(i.currentRankSprite.spriteFrame=t)})):(this.currentRankSprite.node.active=!1,l.NgcLocalizedManager.setTextKey(this.currentRankLabel,this.NO_RANK_TITLE_KEY)),this.checkResizeWidget(s.NgcPointcuts.bannerMainMenu,!0,.9)},t.urlPrefab="NanoImplementation/CrossFeatures/CrownRoad/Prefab/CrownRoadProgressionDialog",t.bundleName=null,t.dialogType="CrownRoadProgressionDialog",i([m(cc.Node)],t.prototype,"milestoneItem",void 0),i([m(cc.ScrollView)],t.prototype,"scrollView",void 0),i([m(cc.Node)],t.prototype,"progressBarBG",void 0),i([m(cc.Node)],t.prototype,"progressBar",void 0),i([m(cc.Node)],t.prototype,"backProgressBar",void 0),i([m(cc.Node)],t.prototype,"currentMarker",void 0),i([m(c.NgcLabelLocalized)],t.prototype,"currentRankLabel",void 0),i([m(cc.Sprite)],t.prototype,"currentRankSprite",void 0),i([m()],t.prototype,"normalItemScale",void 0),i([m()],t.prototype,"rankItemScale",void 0),i([m([h.CrownRoadItemScalable])],t.prototype,"customScaleTable",void 0),i([y],t)}(p.NgcDialogBase);o.NgcCrownRoadProgressionDialog=_,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../Services/Inventory/Inventory":"Inventory","../../Dialogs/Script/DialogBase":"DialogBase","./CrownRoadManager":"CrownRoadManager","./NgcCrownRoadMilestoneItem":"NgcCrownRoadMilestoneItem","./NgcCrownRoadUI":"NgcCrownRoadUI"}],NgcCrownRoadUI:[function(e,t,o){"use strict";cc._RF.push(t,"3d295jfRUtEeYkG4LqThR3H","NgcCrownRoadUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.CrownRoadItemScalable=void 0;var l=e("../../../../Scripts/UserInfo"),u=e("../../../Core/Utils"),p=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),d=e("../../../GameFramework/Scripts/NgcScreenManager"),f=e("../../../GameFramework/Scripts/NgcShopManager"),h=e("../../../Services/Inventory/Inventory"),g=e("../../../Services/Platform/Platform"),y=e("../../../Services/Telemetry/Telemetry"),m=e("../../DeliveryReward/Script/DeliveryRewardAnimation"),_=e("../../Dialogs/Script/NgcDialogManager"),v=e("../../LuckyBooster/Script/NgcLuckyBoosterManager"),S=e("../../NavBar/Script/NavBarManager"),b=e("./CrownRoadManager"),N=e("./NgcCrownRoadItem"),P=e("./NgcCrownRoadProgressionDialog"),C=cc._decorator,w=C.ccclass,T=C.property,I=function(){function e(){this.itemID="",this.scale=1}return a([T()],e.prototype,"itemID",void 0),a([T()],e.prototype,"scale",void 0),a([w("CrownRoadScalable")],e)}();o.CrownRoadItemScalable=I;var R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t.crownItem=null,t.currentRankNode=null,t.crownNumberLabel=null,t.positiveColor=cc.color(134,227,60),t.negativeColor=cc.color(255,97,97),t.crownIconNode=null,t.crownFlyTargetNode=null,t.normalItemScale=1,t.rankItemScale=.35,t.customScaleTable=[],t.needRefresh=!1,t.downRank=!1,t.scaleHashTable=null,t.canShowUI=!1,t.lastPoint=0,t.currentPoint=0,t.highestPoint=0,t.RANK_UP_TEXT_KEY="CRD_RANK_UP",t.PROGRESS_TWEEN_DURATION=.85,t.devButtons=null,t.lastTouchStatus=void 0,t.currentRankItemID=null,t.unlockAnimationCB=null,t.customRewardAnimationFunc={},t.DELAY_BEFORE_TWEEN=.45,t.lastRankItem=null,t.unlockedMilestones={},t.lastUnlockedMilestones={},t.progressUIClicked=!1,t.afterRewardCallback=null,t.crownDisplayTargetNode=null,t}return r(t,e),t.prototype.onLoad=function(){this.devButtons=this.node.getChildByName("DevButtons")},t.prototype.start=function(){b.default.crownRoadUIInst=this,this.scaleTableToHashTable(),this.node.opacity=0,this.progressBar.progress=0,this.devButtons&&(this.devButtons.active=!1),this.setUpCustomRewardAnimation(),cc.systemEvent.on("refreshCrownRoad",this.onSocialCallBack.bind(this))},t.prototype.setUpCustomRewardAnimation=function(){},t.prototype.onSocialCallBack=function(){var e=this;this.unlockedMilestones={},this.lastUnlockedMilestones={},this.getCurrentPoint(function(){e.lastPoint=e.currentPoint,e.updateUI()})},Object.defineProperty(t.prototype,"currentPointTracking",{get:function(){return this.currentPoint},enumerable:!1,configurable:!0}),t.prototype.lateUpdate=function(){this.checkShowUI()},t.prototype.checkRefreshUI=function(){var e=this;this.needRefresh&&(this.lastTouchStatus=d.default.inst.currentTouchStatus(),d.default.inst.setTouchStatus(!1),this.getCurrentPoint(function(){e.currentPoint>e.lastPoint&&e.playCrownFlyingAnimation(),e.updateUI()}),this.needRefresh=!1)},t.prototype.checkShowUI=function(){var e=this;this.canShowUI||b.default.isInitialized()&&(g.NgcPlatform.isOfflineMode()||(this.getCurrentPoint(function(){cc.tween(e.node).to(.25,{opacity:255}).start(),e.lastPoint=e.currentPoint,e.lastUnlockedMilestones=i({},e.unlockedMilestones),e.updateUI()}),this.canShowUI=!0))},t.prototype.getCurrentRankData=function(){if(this.currentRankItemID){var e=h.NgcInventory.inst.itemTable[this.currentRankItemID];return{picture:e.picture,displayName:e.displayName}}return null},t.prototype.updateUI=function(e){var t=this,o=void 0===e?{}:e,n=o.included,r=void 0!==n&&n,a=o.animate,u=void 0!==a&&a;o.recursive,this.currentPoint<0&&(this.currentPoint=0);var p=this.currentPoint;p<this.lastPoint&&(r=!1),p<this.lastPoint&&(this.lastPoint=p);var d=b.default.inst.getRewardsBaseOnPoint(this.lastPoint,r),g=!1,_=1,S=0,N=0;if(d){S=d[0].point,N=d[1].point,d[0].reward;var P=d[1].reward,C=d[2]?d[2].reward:null;C&&(this.currentRankItemID=C[0],this.setCurrentRank(this.currentRankItemID,u)),_=(p-S)/(N-S);var w=null!==P[2],T=!w&&!!this.lastUnlockedMilestones[N];this.lastUnlockedMilestones[N]=this.unlockedMilestones[N],this.setNextReward(P[0],P[1],T,P[2],u)}else g=!0,this.crownItem.emptyNextReward();if(p===this.lastPoint||g)return this.crownNumberLabel.string=p.toString(),this.progressBar.progress=_,this.onAfterRewardAnimation(),void(this.lastUnlockedMilestones=i({},this.unlockedMilestones));var I=this.DELAY_BEFORE_TWEEN,R=this.PROGRESS_TWEEN_DURATION;if(p<this.lastPoint&&(p<S?this.lastPoint==S?(this.lastPoint-=1,this.scheduleOnce(function(){t.progressBar.progress=1,t.updateUI({included:!1,animate:!0,recursive:!0})},I+.05)):(_=0,this.playProgressBarFillAnimation(_,R,I,function(){t.lastPoint=S,t.progressBar.progress=1,t.updateUI({included:!1,animate:!0,recursive:!0})})):this.playProgressBarFillAnimation(_,R,I,function(){t.lastPoint=p,t.onAfterRewardAnimation()})),p>this.lastPoint)if(p>=N){_=1;var O=function(){t.lastPoint=N,t.updateUI({included:!1,animate:!0,recursive:!0})};this.tweenCrownNumber(this.lastPoint,N),this.playProgressBarFillAnimation(_,R,I,this.playClaimRewardAnimation.bind(this,function(){if(!1===T){y.NgcTelemetry.inst.LogEvent_PlayerCrownRewardCollect({itemRewardID:P[0],itemRewardValue:Math.max(P[1],1)});var e=t.crownItem.glowNode.scale;t.crownItem.glowNode.scale=0,t.crownItem.glowNode.opacity=0,t.crownItem.glowNode.active=!0,t.node.getComponent(cc.Animation).play(),t.unlockAnimationCB=function(){t.scheduleOnce(function(){t.crownItem.glowNode.active=!1,t.crownItem.glowNode.scale=e},1),t.hasCustomRewardAnimation(P[0])?t.playCustomRewardAnimation(P[0],O.bind(t)):cc.tween(t.crownItem.node).to(.25,{opacity:0}).call(function(){var e="equippable"===h.NgcInventory.inst.itemTable[P[0]].type;h.NgcInventory.inst.forceFetchInventory(function(){return s(t,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,l.UserInfo.updateInventoryWithPlatform()];case 1:return t.sent(),m.default.inst.showRewardAnimation({itemID:P[0],count:P[1]},function(){f.NgcShopManager.getInstance().updateBoughtItem(P[0]),v.NgcLuckyBoosterManager.getInstance().applyBooster(),v.NgcLuckyBoosterManager.getInstance().checkBoosterUI(),O()},e,w?this.RANK_UP_TEXT_KEY:null),[2]}})})})}).start()}}else O()}))}else this.tweenCrownNumber(this.lastPoint,p),this.playProgressBarFillAnimation(_,R,I,function(){t.lastPoint=p,t.onAfterRewardAnimation()})},t.prototype.onUnlockAnimationCompleted=function(){this.unlockAnimationCB&&this.unlockAnimationCB()},t.prototype.addCustomRewardAnimation=function(e,t){this.customRewardAnimationFunc[e]=t},t.prototype.hasCustomRewardAnimation=function(e){return!!this.customRewardAnimationFunc[e]},t.prototype.playCustomRewardAnimation=function(e,t){this.customRewardAnimationFunc[e]&&this.customRewardAnimationFunc[e](t)},t.prototype.tweenCrownNumber=function(e,t){var o=this,n=this.DELAY_BEFORE_TWEEN,r=this.PROGRESS_TWEEN_DURATION,i=e<=t?this.positiveColor:this.negativeColor,a=20/Math.abs(t-e)*80;a=Math.max(80,Math.min(a,20)),Math.abs(t-e)<5&&(a=300),cc.tween(this.node).delay(n).call(function(){u.Utils.tweenNumber(e,t,r,function(e,t){o.crownNumberLabel.string=e.toString(),t?(o.crownNumberLabel.node.color=cc.color(255,255,255),cc.tween(o.crownNumberLabel.node).to(.25,{scale:1}).start()):(o.crownNumberLabel.node.color=i,o.crownNumberLabel.node.scale=1+Math.abs(.25*Math.cos(Date.now()/a)))}).start()}).start()},t.prototype.onAfterRewardAnimation=function(){void 0!==this.lastTouchStatus&&(d.default.inst.setTouchStatus(!0),this.lastTouchStatus=void 0),this.afterRewardCallback&&this.afterRewardCallback()},t.prototype.playProgressBarFillAnimation=function(e,t,o,n){cc.tween(this.progressBar).delay(o).to(t,{progress:e},{easing:"cubicInOut"}).call(function(){n&&n()}).start()},t.prototype.playClaimRewardAnimation=function(e){this.progressBar.progress=0,e&&e()},t.prototype.setCurrentRank=function(e,t){if(void 0===t&&(t=!1),this.lastRankItem!==e){this.lastRankItem=e;var o=this.currentRankNode.getComponentInChildren(cc.Sprite),n=h.NgcInventory.inst.itemTable[e].picture;cc.loader.loadRes(n,cc.SpriteFrame,function(e,t){e||(o.spriteFrame=t,S.NgcNavBarManager.inst.updatePlayerRank(o.spriteFrame))});var r=this.scaleHashTable[e]||this.rankItemScale;if(o.node.scale=r,t){var i=o.node.scale;o.node.scale=0,cc.tween(o.node).to(.25,{scale:i}).start()}}},t.prototype.setNextReward=function(e,t,o,n,r){var i,a=this;void 0===r&&(r=!1),r&&(this.crownItem.node.originY=null!==(i=this.crownItem.node.originY)&&void 0!==i?i:this.crownItem.node.y,this.crownItem.node.y-=10,this.crownItem.node.opacity=0,this.crownItem.node.scale=0,this.crownItem.rewardNumberLabel.node.opacity=0,cc.tween(this.crownItem.node).to(.35,{y:this.crownItem.node.originY+10,opacity:255,scale:1.15}).to(.15,{y:this.crownItem.node.originY,scale:.73}).to(.05,{scale:1}).delay(.1).call(function(){t>1&&cc.tween(a.crownItem.rewardNumberLabel.node).to(.2,{opacity:255}).start()}).start());var s=this.scaleHashTable[e]||(null!==n?this.rankItemScale:this.normalItemScale);this.crownItem.setRewardItem(e,t,s,n,r),this.crownItem.setDimStatus(o)},t.prototype.scaleTableToHashTable=function(){if(this.scaleHashTable)return this.scaleHashTable;var e={};return this.customScaleTable.forEach(function(t){return e[t.itemID]=t.scale}),this.scaleHashTable=e,e},t.prototype.onDebugClick=function(e,t){var o,n=this;o="0"===t?1:32,d.default.inst.setTouchStatus(!1),b.default.updateRank(o,function(){n.needRefresh=!0,n.checkRefreshUI()})},t.prototype.getCurrentPoint=function(e){var t=this;b.default.getCrownRoadData(function(o){return s(t,void 0,void 0,function(){var t=this;return c(this,function(){return this.currentPoint=o.crownRank,this.highestPoint=o.highestRank,o.milestone.forEach(function(e){t.unlockedMilestones[e]=!0}),e&&e(this.currentPoint),[2]})})})},t.prototype.onProgressBarClick=function(){return s(this,void 0,void 0,function(){var e,t,o=this;return c(this,function(n){switch(n.label){case 0:return this.canShowUI?this.progressUIClicked?[2]:(this.progressUIClicked=!0,[4,_.NgcDialogManager.create(P.NgcCrownRoadProgressionDialog)]):[2];case 1:return e=n.sent(),t=function(){o.progressUIClicked=!1},e.init(this.currentPoint,this.highestPoint,this.getCurrentRankData(),this.unlockedMilestones,t),e.show(),[2]}})})},t.prototype.setAfterRewardCallback=function(e){this.afterRewardCallback=e},t.prototype.setCrownDisplayTarget=function(e){this.crownDisplayTargetNode=e},t.prototype.playCrownFlyingAnimation=function(){for(var e=this,t=function(){var t=cc.instantiate(o.crownIconNode),r=1+.75*Math.random();t.scale=r,t.parent=o.crownFlyTargetNode,u.Utils.setWorldPos(t,u.Utils.getWorldPos(o.crownDisplayTargetNode));var i=t.position,a=o.crownIconNode.position,s=cc.v2(i.x-100,i.y+15),c=cc.v2(a.x-100,a.y-15);s.x-=Math.floor(50*Math.random()),setTimeout(function(){var o=e.PROGRESS_TWEEN_DURATION;cc.tween(t).to(o/2,{scale:r}).to(o/2,{scale:1}).start(),cc.tween(e.crownIconNode).delay(o-.25).to(.1,{scale:1.65}).to(.1,{scale:1}).start(),u.Utils.tweenNodeToNode(t,e.crownIconNode,cc.v2(0,0),null,o,"quartInOut",!0,s,c).call(function(){t.destroy()}).start()},110*n)},o=this,n=0;n<4;n++)t()},a([T(cc.ProgressBar)],t.prototype,"progressBar",void 0),a([T(N.NgcCrownRoadItem)],t.prototype,"crownItem",void 0),a([T(cc.Node)],t.prototype,"currentRankNode",void 0),a([T(p.NgcLabelLocalized)],t.prototype,"crownNumberLabel",void 0),a([T(cc.Color)],t.prototype,"positiveColor",void 0),a([T(cc.Color)],t.prototype,"negativeColor",void 0),a([T(cc.Node)],t.prototype,"crownIconNode",void 0),a([T(cc.Node)],t.prototype,"crownFlyTargetNode",void 0),a([T()],t.prototype,"normalItemScale",void 0),a([T()],t.prototype,"rankItemScale",void 0),a([T([I])],t.prototype,"customScaleTable",void 0),a([w],t)}(cc.Component);o.default=R,cc._RF.pop()},{"../../../../Scripts/UserInfo":"UserInfo","../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../DeliveryReward/Script/DeliveryRewardAnimation":"DeliveryRewardAnimation","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../LuckyBooster/Script/NgcLuckyBoosterManager":"NgcLuckyBoosterManager","../../NavBar/Script/NavBarManager":"NavBarManager","./CrownRoadManager":"CrownRoadManager","./NgcCrownRoadItem":"NgcCrownRoadItem","./NgcCrownRoadProgressionDialog":"NgcCrownRoadProgressionDialog"}],NgcDay:[function(e,t,o){"use strict";cc._RF.push(t,"c00a4u6jDVC/IBhYpNkB3lk","NgcDay");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcDay=void 0;var a=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.today=null,t.tomorrow=null,t.other=null,t.item=null,t.claimed=null,t.itemIcon=null,t.itemCount=null,t.dayLabel=null,t.timeRemaining=null,t.timeUntilClaim=0,t.curTime=0,t}return r(t,e),i([l(cc.Node)],t.prototype,"today",void 0),i([l(cc.Node)],t.prototype,"tomorrow",void 0),i([l(cc.Node)],t.prototype,"other",void 0),i([l(cc.Node)],t.prototype,"item",void 0),i([l(cc.Node)],t.prototype,"claimed",void 0),i([l(cc.Sprite)],t.prototype,"itemIcon",void 0),i([l(a.NgcLabelLocalized)],t.prototype,"itemCount",void 0),i([l(a.NgcLabelLocalized)],t.prototype,"dayLabel",void 0),i([l(cc.Label)],t.prototype,"timeRemaining",void 0),i([c],t)}(cc.Component);o.NgcDay=u,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],NgcDialogManager:[function(e,t,o){"use strict";cc._RF.push(t,"f6569DlbhZGC4eUKorNVw66","NgcDialogManager");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcDialogManager=void 0;var i=e("../../../Core/Utils"),a=e("./DialogBase"),s=e("./LoadingAdDialog/LoadingAdDialog"),c=e("./MessageDialog/MessageDialog"),l=function(){function e(){}return e.createExistedDialog=function(e,t){return n(this,void 0,void 0,function(){var o;return r(this,function(){return t||(t=cc.find("Canvas")),(o=cc.instantiate(e)).parent=t,[2,o]})})},e.loadDialogPrefab=function(t,o,a){return n(this,void 0,void 0,function(){var s=this;return r(this,function(){return[2,new Promise(function(c,l){return n(s,void 0,void 0,function(){var n;return r(this,function(r){switch(r.label){case 0:return e.loadedPrefabs.has(t)?[2,c()]:a?[4,i.Utils.loadBundle(a)]:[3,2];case 1:return(n=r.sent())&&n.load(o,cc.Prefab,function(o,n){if(o)return l();e.loadedPrefabs.set(t,n),c()}),[3,3];case 2:cc.log("prefabNameOrURL",o),cc.resources.load(o,cc.Prefab,function(o,n){if(o)return cc.error(o.message||o),l();e.loadedPrefabs.set(t,n),c()}),r.label=3;case 3:return[2]}})})})]})})},e.preloadBundle=function(e){var t=this;e.forEach(function(e){return n(t,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,i.Utils.loadBundle(e)];case 1:return t.sent(),[2]}})})})},e.createDialog=function(t,o,i,a){return n(this,void 0,void 0,function(){var n;return r(this,function(r){switch(r.label){case 0:return a||(a=cc.find("Canvas")),e.loadedPrefabs.has(t)?[3,2]:[4,this.loadDialogPrefab(t,o,i)];case 1:r.sent(),r.label=2;case 2:return(n=cc.instantiate(e.loadedPrefabs.get(t))).parent=a,[2,n]}})})},e.create=function(t,o){return n(this,void 0,Promise,function(){var n,i,a,s,c,l,u;return r(this,function(r){switch(r.label){case 0:return o?[3,2]:(n=t.dialogType,i=t.urlPrefab,a=t.bundleName,[4,e.createDialog(n,i,a)]);case 1:return[2,r.sent().getComponent(t)];case 2:return s=o.dialogType||t.dialogType,c=o.prefabNameOrURL||t.urlPrefab,l=o.bundleName||t.bundleName,(u=o.dialogNode)?[3,4]:[4,e.createDialog(s,c,l)];case 3:u=r.sent(),r.label=4;case 4:return[2,u.getComponent(t)]}})})},e.hasDialogShowing=function(){return a.NgcDialogBase.dialogStacks.length>0},e.getShowingDialogs=function(){return a.NgcDialogBase.dialogStacks},e.hideDialog=function(e){var t=a.NgcDialogBase.dialogStacks.find(function(t){return t instanceof e});t&&t.hide()},e.destroyAllDialogs=function(){a.NgcDialogBase.dialogStacks.forEach(function(e){e&&e.hide()})},e.showAdsNotAvailableMsg=function(t){return n(this,void 0,void 0,function(){var o;return r(this,function(n){switch(n.label){case 0:return[4,e.create(c.NgcMessageDialog)];case 1:return(o=n.sent()).init("NGG_ADS_UNAVAILABLE"),o.show(null,t),[2]}})})},e.showAdsReminderMsg=function(t){return n(this,void 0,void 0,function(){var o;return r(this,function(n){switch(n.label){case 0:return[4,e.create(c.NgcMessageDialog)];case 1:return(o=n.sent()).init("ADB_REMINDER"),o.show(null,t),[2]}})})},e.showNotEnoughCurrencyMsg=function(t){return n(this,void 0,void 0,function(){var o;return r(this,function(n){switch(n.label){case 0:return[4,e.create(c.NgcMessageDialog)];case 1:return(o=n.sent()).init("ITS_NOT_ENOUGH_COINS"),o.show(null,t),[2]}})})},e.showLoadingAdMsg=function(){return n(this,void 0,Promise,function(){var t;return r(this,function(o){switch(o.label){case 0:return[4,e.create(s.NgcLoadingAdDialog)];case 1:return(t=o.sent()).init(),t.show(),[2]}})})},e.hideLoadingAdMsg=function(){e.hideDialog(s.NgcLoadingAdDialog)},e.loadedPrefabs=new Map,e.LIST_BUNDLE_NAME_PRELOAD=["02_dialog","02_dialog_navbar","02_dialog_PWF","02_dialog_realprize","03_end_game_flow","02_crown_road"],e}();o.NgcDialogManager=l,cc._RF.pop()},{"../../../Core/Utils":"Utils","./DialogBase":"DialogBase","./LoadingAdDialog/LoadingAdDialog":"LoadingAdDialog","./MessageDialog/MessageDialog":"MessageDialog"}],NgcGDPR:[function(e,t,o){"use strict";cc._RF.push(t,"a729bwpczVNILVPUVfrjfXr","NgcGDPR"),Object.defineProperty(o,"__esModule",{value:!0}),o.COOKIE_CONSENT=void 0;var n=e("../../../Core/helpers"),r=e("../../../Core/Utils"),i=e("../../../SDK/Nano/NanoSrv"),a=e("../../../Services/Ads/Ads"),s=e("../../../Services/Platform/Platform"),c=e("../../../Services/Telemetry/Telemetry");(function(e){e[e.ADS_COOKIE_ENABLE=0]="ADS_COOKIE_ENABLE",e[e.TRACKING_COOKIE_ENABLE=1]="TRACKING_COOKIE_ENABLE"})(o.COOKIE_CONSENT||(o.COOKIE_CONSENT={}));var l=function(){function e(){}return e.getInstance=function(){return e._inst||(e._inst=new e),window.GDPRCallback=e._inst.GDPRCallback.bind(this),e._inst},e.prototype.isShowingGDPR_Popup=function(){return s.NgcPlatform.isRunAsIframeOnNano()?!!window.parent.isShowingGDPR:!!window.isShowingGDPR},e.prototype.parseCookies=function(){var e,t=null===(e=window.parseCookies)||void 0===e?void 0:e.call(window);this.GDPRCallback(!!t.ads,!!t.analytic)},e.prototype.getCookie=function(){},e.prototype.GDPRCallback=function(t,o){var s=setInterval(function(){if(c.NgcTelemetry.inst&&a.NgcAds.inst){if(c.NgcTelemetry.inst.isActive=o,a.NgcAds.inst.targetingPersonalAds(t),window.trackingGDPRNeeded&&!e.trackingSent){e.trackingSent=!0;var l={from:"game",type:n.TrackType.GDPR_Response,response_tracking_cookie:c.NgcTelemetry.inst.isActive,timeZone:r.Utils.getTimeZone()};i.default.inst.sendTracking(l)}clearInterval(s)}},100)},e._inst=null,e.trackingSent=!1,e}();o.default=l,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../Core/helpers":"helpers","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry"}],NgcGameCamera:[function(e,t,o){"use strict";cc._RF.push(t,"e10d4QHwOZEJ5uxK/JBwE2N","NgcGameCamera");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.setTarget=function(e,t,o){void 0===t&&(t=1),void 0===o&&(o=!0)},t.inst=null,o=i([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],NgcGameModeInfoDialog:[function(e,t,o){"use strict";cc._RF.push(t,"2e363x9MFxCarZX2ArZxg/i","NgcGameModeInfoDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcGameModeInfoDialog=void 0;var c=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),l=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),u=e("../../../GameFramework/Scripts/Localized/TimerLabelLocalized"),p=e("../../Dialogs/Script/DialogBase"),d=e("./NgcGameModeManager"),f=cc._decorator,h=f.ccclass,g=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.basicInfo=null,t.extendedInfo=null,t.counterLabel=null,t.modeScrollView=null,t.modeTemplate=null,t}return r(t,e),t.prototype.paddingX=function(){return 280},t.prototype.resizeScale=function(){return.85},t.prototype.initLockedInfoDialog=function(e){return a(this,void 0,void 0,function(){var t,o,n,r,i,a,u,p,f;return s(this,function(){return t=null,e.modes.forEach(function(o){o.modeId===e.activeModeId&&(t=o)}),o=this.basicInfo.getChildByName("Contents"),n=o.getChildByName("Icon"),r=o.getChildByName("Label"),i=o.getChildByName("ProgressBar"),a=d.NgcGameModeManager.inst.getProgressBarInfo(),u=a.currentValue,p=a.maxValue,cc.loader.loadRes(t.picturePath,cc.SpriteFrame,function(e,t){e||(n.getComponent(cc.Sprite).spriteFrame=t)}),i.getComponentInChildren(cc.ProgressBar).progress=u/p,i.getComponentInChildren(c.NgcLabelLocalized).string=u+"/"+p,f=(f=(f=l.NgcLocalizedManager.t("GMD_UNLOCK_CONDITION").text).replace("X",p.toString())).replace("<crown>"," <img src='icon_Crown'/> "),r.getComponent(cc.RichText).string=f,i.active=!1,this.resizeWidget(!0,this.resizeScale(),!0),[2]})})},t.prototype.init=function(e){return a(this,void 0,void 0,function(){var t,o,n,r,i,a,u,p,d=this;return s(this,function(){return t=null,o=[],n=[],r=[],i={},e.modes.forEach(function(e){i[e.modeId]=e}),e.modeList.forEach(function(o){o===e.activeModeId?t=i[o]:t?r.push(i[o]):n.push(i[o])}),o=r.concat(n),t?(a=this.basicInfo.getChildByName("Image"),u=cc.find("Labels/Name",this.basicInfo),p=cc.find("Labels/Description",this.basicInfo),l.NgcLocalizedManager.setTextKey(u.getComponent(c.NgcLabelLocalized),t.modeNameTextKey),l.NgcLocalizedManager.setTextKey(p.getComponent(c.NgcLabelLocalized),t.modeDescTextKey),cc.loader.loadRes(t.picturePath,cc.SpriteFrame,function(e,t){e||(a.getComponent(cc.Sprite).spriteFrame=t)}),e.rotateEnabled&&e.modes.length>1&&(this.counterLabel.startCount(e.timeToNextMode),this.counterLabel.setTimerExpiredCallback(function(){d.hide()}),o.forEach(function(e){var t=cc.instantiate(d.modeTemplate);t.active=!0,t.parent=d.modeScrollView.content,l.NgcLocalizedManager.setTextKey(t.getComponentInChildren(c.NgcLabelLocalized),e.modeNameTextKey),t.x=d.paddingX(),cc.loader.loadRes(e.picturePath,cc.SpriteFrame,function(e,o){e||(t.getChildByName("Image").getComponent(cc.Sprite).spriteFrame=o)})}),this.modeScrollView.scrollToTop(0)),this.resizeWidget(!0,this.resizeScale(),!0),[2]):(console.error("Can't find the active mode!!"),[2])})})},t.prototype.onButtonCloseClick=function(){this.hide()},t.prototype.hide=function(){d.NgcGameModeManager.inst.isShowingDialog=!1,e.prototype.hide.call(this)},t.urlPrefab="NanoImplementation/CrossFeatures/GameMode/Prefab/GameModeInfoExtendedDialog",t.bundleName=null,t.dialogType="GameModeInfoExtendedDialog",i([g(cc.Node)],t.prototype,"basicInfo",void 0),i([g(cc.Node)],t.prototype,"extendedInfo",void 0),i([g(u.NgcTimerLabelLocalized)],t.prototype,"counterLabel",void 0),i([g(cc.ScrollView)],t.prototype,"modeScrollView",void 0),i([g(cc.Node)],t.prototype,"modeTemplate",void 0),i([h],t)}(p.NgcDialogBase);o.NgcGameModeInfoDialog=y,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/Localized/TimerLabelLocalized":"TimerLabelLocalized","../../Dialogs/Script/DialogBase":"DialogBase","./NgcGameModeManager":"NgcGameModeManager"}],NgcGameModeManager:[function(e,t,o){"use strict";cc._RF.push(t,"12666gXhwRN2LD+15sRsbce","NgcGameModeManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcGameModeManager=void 0;var c=e("../../../../Scripts/Screens/StartScreen/StartMain"),l=e("../../../GameFramework/Scripts/BuildConfig"),u=e("../../../SDK/Nano/NanoSrv"),p=e("../../../Services/Inventory/Inventory"),d=e("../../Dialogs/Script/NgcDialogManager"),f=e("./NgcGameModeInfoDialog"),h=e("./ModeButton"),g=cc._decorator,y=g.ccclass,m=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playButton=null,t.modeButton=null,t.modeInfoJson=null,t.selectedModeId=null,t.isShowingDialog=!1,t._isPlayAnimation=!1,t._isUnlocked=!1,t.localGameModeData=null,t._oldPoint=0,t._pointToUnlock=0,t._isReady=!1,t.readyForInit=!1,t.gameModePoint=null,t._gameModeInfo=null,t._playButtonClickCallback=null,t._modeButtonClickCallback=null,t._lockIcon=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst||(o.inst=this,this.modeButton.active=!1,this.localGameModeData=this.modeInfoJson.json,this._oldPoint=0,this._pointToUnlock=this.localGameModeData.pointsToUnlockGameMode,this.readyForInit=!0)},t.prototype.start=function(){this.hideButtonContents(),this.updateGameModeButtonUI()},t.prototype.getPrefabURL=function(e){switch(e){case"info":return"NanoImplementation/CrossFeatures/GameMode/Prefab/GameModeInfoDialog";case"extended":return"NanoImplementation/CrossFeatures/GameMode/Prefab/GameModeInfoExtendedDialog";case"locked":return"NanoImplementation/CrossFeatures/GameMode/Prefab/GameModeLockedInfoDialog"}},t.prototype.hideButtonContents=function(){this.modeButton.getComponent(h.NgcModeButton).lockedContents.opacity=0,this.modeButton.getComponent(h.NgcModeButton).unlockedContents.opacity=0,this.modeButton.getChildByName("Icon_Lock").active=!1,this.modeButton.getComponent(h.NgcModeButton).crownIcon.active=!1,this.modeButton.getComponent(h.NgcModeButton).infoButton.active=!1},t.prototype.updateGameModeButtonUI=function(){var e=this.modeButton.getComponent(h.NgcModeButton),t=e.progressBar.getChildByName("BarBG"),o=e.progressBar.getChildByName("BarFill");t.opacity=0,o.opacity=0,e.numbers.getChildByName("Right").active=!1,e.numbers.getChildByName("Left").scale+=.5},t.prototype.getProgressBarInfo=function(){return{currentValue:this._oldPoint,maxValue:this._pointToUnlock}},t.prototype.updateNumberNode=function(e,t,o){var n=this,r={point:e},i=this.modeButton.getComponent(h.NgcModeButton),a=i.crownIcon.scale;t!==e&&0!==o?cc.tween(r).to(o,{point:t},{progress:function(e,t,o,r){var s=e+(t-e)*r,c=i.numberProgressScale,l=i.crownIconProgressScale;return i.leftNumberLabel.node.color=i.numberProgressColor,i.leftNumberLabel.node.scale=1+c+Math.cos(Date.now()/60)*c,i.crownIcon.scale=a+l+Math.cos(Date.now()/60)*l,i.updateProgressNumber(Math.floor(s),n._pointToUnlock),s}}).delay(.15).call(function(){i.leftNumberLabel.node.color=cc.color(255,255,255),cc.tween(i.leftNumberLabel.node).to(.25,{scale:1}).start(),cc.tween(i.crownIcon).to(.25,{scale:a}).start(),i.updateProgressNumber(t,n._pointToUnlock)}).start():i.updateProgressNumber(t,this._pointToUnlock)},t.prototype.checkForGameModeUnlocking=function(){var e=this;this.modeButton.active&&(this.gameModePoint?this.updateProgressBar(1):this.getGameModePoint(function(){e.updateProgressBar(1)}))},t.prototype.addGameModePoint=function(e){o.inst.getGameModePoint(function(t){o.inst.uploadGameModePoint(t+e,function(){o.inst.checkForGameModeUnlocking()})})},t.prototype.getGameModePoint=function(e){var t=this;void 0===e&&(e=null),u.default.inst.serviceGet("/playerdata",null,function(o,n){o||(t.gameModePoint=Number(JSON.parse(n).data._gameModePoint)||0,e&&e(t.gameModePoint))})},t.prototype.uploadGameModePoint=function(e,t){var o=this;void 0===e&&(e=null),void 0===t&&(t=null);var n={_gameModePoint:e||this.gameModePoint||0};u.default.inst.servicePost("/playerdata",JSON.stringify(n),function(e,r){e||(o.gameModePoint=n._gameModePoint,t&&t(r))})},t.prototype.updateProgressBar=function(e,t){var o=this;if(void 0===t&&(t=!1),!this._isUnlocked){var n=this.modeButton.getComponent(h.NgcModeButton),r=this.gameModePoint;if(n.updateProgressNumber(this._oldPoint,this._pointToUnlock),r!=this._oldPoint||t)if(r>=this._pointToUnlock)r=this._pointToUnlock,this.updateNumberNode(this._oldPoint,r,e),e>0&&this.playUnlockAnimation(e),this._oldPoint=this._pointToUnlock,p.NgcInventory.inst.addItem("game_mode_unlock",1,function(){o._isUnlocked=!0});else{var i=r/this._pointToUnlock,a=e,s=n.progressBar.getChildByName("BarFill");e>0?(this.updateNumberNode(this._oldPoint,r,e),cc.tween(s.getComponent(cc.ProgressBar)).to(a,{progress:i}).start()):(n.updateProgressNumber(0,this._pointToUnlock),s.getComponent(cc.ProgressBar).progress=0),this._oldPoint=r}}},t.prototype.initGameMode=function(){var e=this;this.getCurrentGameModeInfo(),this.checkForGameModeAvailability(),this.checkForGameModeUnlockStatus(function(){e.startUpAnimation()}),this.readyForInit=!1},t.prototype.startUpAnimation=function(){if(this.modeButton.getComponent(h.NgcModeButton).stopLoadingAnimation(),this.modeButton.getComponent(h.NgcModeButton).infoButton.active=!0,this.isGameModeUnlocked()){var e=this.modeButton.getComponent(h.NgcModeButton).progressBar,t=this.modeButton.getComponent(h.NgcModeButton).unlockedContents,o=this.modeButton.getChildByName("Icon_Lock");cc.tween(t).to(.25,{opacity:255},{easing:"cubicOut"}).start(),e.parent.active=!1,o.active=!1,this.modeButton.getComponent(h.NgcModeButton).crownIcon.active=!1}else this.modeButton.getComponent(h.NgcModeButton).crownIcon.active=!0,cc.tween(this.modeButton.getComponent(h.NgcModeButton).lockedContents).to(.25,{opacity:255},{easing:"cubicOut"}).start(),this.modeButton.getChildByName("Icon_Lock").active=!0,this.modeButton.getComponent(h.NgcModeButton).updateProgressNumber(this._pointToUnlock,null);this.updateGameModeContents()},t.prototype.isInitialized=function(){return!!this._gameModeInfo},t.prototype.gameModeData=function(){return this._gameModeInfo},t.prototype.setPlayButtonClickCallback=function(e){this._playButtonClickCallback=e},t.prototype.onClickPlayButton=function(){return a(this,void 0,void 0,function(){return s(this,function(){return this.selectedModeId=null,this._playButtonClickCallback&&this._playButtonClickCallback(),[2]})})},t.prototype.setModeButtonClickCallback=function(e){this._modeButtonClickCallback=e},t.prototype.onClickGameModeButton=function(){return a(this,void 0,void 0,function(){var e,t,o,n;return s(this,function(r){switch(r.label){case 0:return this._isPlayAnimation?[2]:this.isInitialized()?this.isShowingDialog?[2]:this.modeButton.getComponent(h.NgcModeButton).isLoading()?[2]:(e=null,[4,this.getCurrentGameModeInfo()]):[2];case 1:return t=r.sent(),this.isGameModeUnlocked()?(e=t.activeModeId,[3,5]):[3,2];case 2:return this.isShowingDialog=!0,[4,d.NgcDialogManager.createDialog("GameModeLockedInfoDialog",this.getPrefabURL("locked"),null)];case 3:return o=r.sent(),[4,(n=o.getComponent(f.NgcGameModeInfoDialog)).initLockedInfoDialog(t)];case 4:return r.sent(),n.show(),[2];case 5:return this._modeButtonClickCallback&&(this.selectedModeId=e,this._modeButtonClickCallback(e)),cc.log("Game Mode button click!",e),[2]}})})},t.prototype.onClickInfoButton=function(){return a(this,void 0,void 0,function(){var e,t,o,n,r;return s(this,function(i){switch(i.label){case 0:return this._isPlayAnimation?[2]:this.isShowingDialog?[2]:(this.isShowingDialog=!0,[4,this.getCurrentGameModeInfo()]);case 1:return e=i.sent(),t=this.getDialogType(e),o="GameModeInfoExtendedDialog"===t?this.getPrefabURL("extended"):this.getPrefabURL("info"),[4,d.NgcDialogManager.createDialog(t,o,null)];case 2:return n=i.sent(),[4,(r=n.getComponent(f.NgcGameModeInfoDialog)).init(e)];case 3:return i.sent(),r.show(),[2]}})})},t.prototype.refresh=function(){this._isUnlocked=!1,this.setStatus(this._isUnlocked),this.hideButtonContents(),this.readyForInit=!0},t.prototype.setStatus=function(e){var t=this.modeButton.getComponent(h.NgcModeButton).background,o=this.modeButton.getComponent(h.NgcModeButton).infoButton,n=this.modeButton.getComponent(h.NgcModeButton).progressBar,r=this.modeButton.getComponent(h.NgcModeButton).unlockedContents,i=this.modeButton.getChildByName("Icon_Lock"),a=this.modeButton.getChildByName("light_vfx"),s=this.modeButton.getChildByName("Contents"),c=this.modeButton.getComponent(h.NgcModeButton).highlight,l=this.modeButton.getComponent(h.NgcModeButton).crownIcon;e?(i.opacity=0,t.opacity=0,l.opacity=0,l.active=!1,n.parent.active=!1,c.active=!1,a.active=!1,r.opacity=255,s.opacity=255,t.opacity=255,o.opacity=255):(i.scale=1,i.opacity=255,t.opacity=255,l.opacity=255,l.active=!0,n.parent.active=!0,c.opacity=0,c.scale=1,a.opacity=0,a.scale=1,r.opacity=0,s.opacity=255,t.opacity=255,o.opacity=255)},t.prototype.lockIconNode=function(){return this.modeButton.getChildByName("Icon_Lock")},t.prototype.playUnlockAnimation=function(e,t){var o=this;this._isPlayAnimation=!0;var n=e,r=this.modeButton.getComponent(h.NgcModeButton).background,i=this.modeButton.getComponent(h.NgcModeButton).infoButton,a=this.modeButton.getComponent(h.NgcModeButton).progressBar,s=this.modeButton.getComponent(h.NgcModeButton).unlockedContents,c=(this.modeButton.getComponent(h.NgcModeButton).timerLabel,a.getChildByName("BarFill")),l=this.modeButton.getChildByName("Icon_Lock"),u=this.modeButton.getChildByName("light_vfx"),p=this.modeButton.getChildByName("Contents"),d=this.modeButton.getComponent(h.NgcModeButton).highlight,f=this.modeButton.getComponent(h.NgcModeButton).crownIcon;cc.tween(c.getComponent(cc.ProgressBar)).to(n,{progress:1}).call(function(){l.scale=1.25,o._lockIcon=l,o._lockIcon.originalX=l.x,o._lockIcon.originalY=l.y,u.opacity=0,u.active=!0,l.opacity=255,d.active=!0,d.opacity=0,cc.tween(i).delay(1).to(.25,{opacity:0},{easing:"expoInOut"}).start(),cc.tween(d).delay(1).to(.1,{opacity:255,scale:1.35}).delay(.05).to(.5,{opacity:0}).start(),cc.tween(u).delay(1).to(.1,{opacity:255,scale:2.75}).to(.5,{scale:2}).start(),cc.tween(l).to(1,{scale:.5}).to(.1,{scale:3.25}).call(function(){r.opacity=0,p.opacity=0,f.opacity=0,l.x=o._lockIcon.originalX,l.y=o._lockIcon.originalY,o._lockIcon=null,cc.tween(u).to(1.25,{opacity:0},{easing:"expoInOut"}).start(),cc.tween(l).to(1.25,{opacity:0,scale:3.5},{easing:"expoInOut"}).start()}).delay(.75).call(function(){d.active=!1,u.active=!1,o.modeButton.setScale(1.25),o.modeButton.opacity=0,a.parent.active=!1,s.opacity=255,p.opacity=255,r.opacity=255,i.opacity=255,cc.tween(o.modeButton).to(.4,{scale:.75},{easing:"expoInOut"}).to(.9,{scale:1},{easing:"backOut"}).start(),cc.tween(o.modeButton).to(1,{opacity:255}).call(function(){o._isPlayAnimation=!1,t&&t()}).start()}).start()}).start()},t.prototype.isReady=function(){var e=this;return p.NgcInventory.inst&&c.default.inst&&c.default.inst.isPlatformStarted&&p.NgcInventory.inst.getItemCount("game_mode_unlock",function(t,o){!t&&o&&(e._isUnlocked=o.count>0),e._isReady=!0}),this._isReady},t.prototype.update=function(){if(this.readyForInit&&this.hasGameMode()&&this.initGameMode(),this._lockIcon){var e=.5/this._lockIcon.scale*6;this._lockIcon.x=this._lockIcon.originalX-Math.random()*e/2+Math.random()*e,this._lockIcon.y=this._lockIcon.originalY-Math.random()*e/2+Math.random()*e}},t.prototype.updateGameModeContents=function(){return a(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return[4,this.getCurrentGameModeInfo()];case 1:return e=n.sent(),t=e.modes.filter(function(t){return t.modeId==e.activeModeId})[0],o=e.modeList.length>1&&e.rotateEnabled?e.timeToNextMode:-1,this.modeButton.getComponent(h.NgcModeButton).refreshContents(t.modeNameTextKey,o,this.onTimerEnd.bind(this)),[2]}})})},t.prototype.onTimerEnd=function(){this.updateGameModeContents()},t.prototype.checkForGameModeAvailability=function(){this.hasGameMode()&&(this.modeButton.active=!0,this.modeButton.getComponent(h.NgcModeButton).playLoadingAnimation())},t.prototype.hasGameMode=function(){if(l.NgcBuildConfig.offlineMode)return!1;var e=u.default.inst&&u.default.inst.getCurGameInfo()&&u.default.inst.getCurGameInfo().gameParams||{};return this._gameModeInfo=e&&e.gameModesDistribution||!1,this.gameModeData()&&this.gameModeData().gameModeOn},t.prototype.isGameModeUnlocked=function(){return this._isUnlocked},t.prototype.unlock=function(){this._isUnlocked=!0},t.prototype.checkForGameModeUnlockStatus=function(e){var t=this;p.NgcInventory.inst.getItemCount("game_mode_unlock",function(o,n){!o&&n&&(t._isUnlocked=n.count>0,e&&e())})},t.prototype.getDialogType=function(e){return e.modeList.length>1&&e.rotateEnabled?"GameModeInfoExtendedDialog":"GameModeInfoDialog"},t.prototype.getCurrentGameModeInfo=function(){return a(this,void 0,void 0,function(){var e,t,o,n,r,i,a,c,l,u,p;return s(this,function(){return e=this.gameModeData(),t=new Date(e.gameModeRotationStartTime),o=e.gameModeRotationOn,n=Date.now()-t.getTime(),r=36e5*e.gameModeRotationTime,i=Math.floor(n/r),a=t.getTime()+i*r,c=a+r-Date.now(),l=Math.floor(i%e.gameModeList.length),u=e.gameModeList[l],cc.log(t.getTime(),Date.now(),e.gameModeRotationTime,i),o||(u=e.gameModeList[0]),p=this.localGameModeData.modes.filter(function(t){return e.gameModeList.indexOf(t.modeId)>=0}),[2,{activeModeId:u,timeToNextMode:c,modes:p,rotateEnabled:o,modeList:e.gameModeList}]})})},t.inst=null,i([m(cc.Node)],t.prototype,"playButton",void 0),i([m(cc.Node)],t.prototype,"modeButton",void 0),i([m(cc.JsonAsset)],t.prototype,"modeInfoJson",void 0),o=i([y],t)}(cc.Component);o.NgcGameModeManager=_,cc._RF.pop()},{"../../../../Scripts/Screens/StartScreen/StartMain":"StartMain","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Inventory/Inventory":"Inventory","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","./ModeButton":"ModeButton","./NgcGameModeInfoDialog":"NgcGameModeInfoDialog"}],NgcGame:[function(e,t,o){"use strict";cc._RF.push(t,"7b81eCNf0xEy7QBd3egNZU1","NgcGame");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcGame=void 0;var c=e("../../../globals"),l=e("../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager"),u=e("../../CrossFeatures/CrownRoad/Script/CrownRoadManager"),p=e("../../CrossFeatures/Dialogs/Script/NgcDialogManager"),d=e("../../CrossFeatures/Emojis/Script/EmotesManager"),f=e("../../CrossFeatures/EndGameFlow/Result/Script/ResultUI"),h=e("../../CrossFeatures/EndGameFlow/Revive/Script/NgcRevive"),g=e("../../CrossFeatures/EndGameFlow/Reward/RewardUI"),y=e("../../CrossFeatures/EndGameFlow/Spectator/Script/NgcSpectatorManager"),m=e("../../CrossFeatures/LeaderBoard/Script/LeaderBoardManager"),_=e("../../CrossFeatures/TechMessage/Script/TechMessages"),v=e("../../CrossFeatures/XInOneBundle/Script/NgcXInOneDataInterface"),S=e("../../Services/Platform/Platform"),b=e("../../Services/Telemetry/Telemetry"),N=e("./Ads/NgcAdsManager"),P=e("./BuildConfig"),C=e("./Network/NetUtils"),w=e("./NgcGameCamera"),T=e("./NgcMain"),I=e("./NgcScreenManager"),R=e("./NgcUserInfo"),O=cc._decorator,E=O.ccclass,k=O.property,A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resultUIPrefab=null,t.rewardUIPrefab=null,t.spectatorPrefab=null,t.reviveDialogPrefab=null,t.curGameNetID="",t.paused=!1,t.forcedExit=!0,t}var o;return r(t,e),o=t,t.prototype.pause=function(e){this.paused=e},t.prototype.onLoad=function(){null==o.inst?(o.inst=this,this.subscribeEvents(),this.setMandatoryCallbacks()):console.error("More than one Game inst created")},t.prototype.findPlayerByNetID=function(e){return this._findPlayerByNetID(e)},t.prototype.findPlayerLead=function(){return this._findPlayerLead()},t.prototype.onGameQueueStart=function(){var e;this._onBeforeGameQueueStart(),(null===(e=l.NgcPartyRoomManager.inst)||void 0===e?void 0:e.isGameStartedFromRoom())||o.generateRoundID(),b.NgcTelemetry.inst.LogEvent_GameQueueStart()},t.prototype.onGamePlayStart=function(){d.NgcEmotesManager.inst.extendEmotesUI(!1),this._onBeforeGameRoundStart(),b.NgcTelemetry.inst.LogEvent_GameRoundStart(),_.default.inst.onGamePlayStart(),h.default.inst.reset(),this.forcedExit=!0},t.generateRoundID=function(){o.roundID=C.NgcNetUtils.generateRandomUUID()},t.prototype.subscribeEvents=function(){var e=this;this.node.on("changeSpectatorTarget",function(t){return e.changeSpectatorTargetCallback(t)}),this.node.on("startSpectator",this.onStartSpectator.bind(this)),this.node.on("stopSpectator",this.onStopSpectator.bind(this))},t.prototype.changeSpectatorTargetCallback=function(e){var t,o=this.findPlayerByNetID(e);null===(t=w.default.inst)||void 0===t||t.setTarget(o,1,!0)},t.prototype.onStartSpectator=function(){},t.prototype.onStopSpectator=function(){},t.prototype.gameOver=function(){this.forcedExit=!1,g.NgcEndGameRewardDialog.clearRewards(),this.showResult(),P.NgcBuildConfig.offlineMode&&c.default.OfflineMode.CleanLuckyBooster(),this._gameOver()},t.prototype.showResult=function(){return a(this,void 0,void 0,function(){var e,t=this;return s(this,function(){return e=function(){y.NgcSpectatorManager.inst.startSpectator()},p.NgcDialogManager.createExistedDialog(this.resultUIPrefab).then(function(o){var n=o.getComponent(f.NgcResultUI);t.addScoresToResultScreen(n),n.init(function(){var o,n;(null===(o=h.default.inst)||void 0===o?void 0:o.isOfferAccepted())&&!(null===(n=h.default.inst)||void 0===n?void 0:n.tookFreeOffered)?N.default.inst.showRewardVideo(N.NgcPointcuts.videoReviveDialog,null,null,null,function(o){return a(t,void 0,void 0,function(){return s(this,function(){return h.default.inst.reviveAdsStatus=o,e(),[2]})})}):(h.default.inst.tookFreeOffered=!1,e())}),n.show()}),[2]})})},t.prototype.startSpectatorView=function(){var e=this;p.NgcDialogManager.createExistedDialog(this.spectatorPrefab).then(function(){y.NgcSpectatorManager.inst.show(e.getSpectatorParrent()),y.NgcSpectatorManager.inst.startView()})},t.prototype.saveAllProgression=function(e){S.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_FINISHGAMEPLAY:!0}),"*"),this.wrongAdsLogic()||(this.saveProgressLogic(),g.NgcEndGameRewardDialog.claimRewards(e),R.default.uploadTotalRoundCount(),m.NgcLeaderboardManager.inst.getLeaderBoardUIComponent().needRefreshLeaderboard=!0,cc.systemEvent.emit(v.XInOneBundleEvent.UpdatePromo,{roundCount:1}))},t.prototype.saveProgressLogic=function(){this.uploadBestScore()},t.prototype.canSkipToPartyRoom=function(){for(var e=0,t=this.getAllPlayer();e<t.length;e++){var o=t[e];if(o.isRealHuman()&&!o.isFinishGameplay())return!1}return!0},t.prototype.wrongAdsLogic=function(){return!h.default.inst.tookFreeOffer&&h.default.inst.isOfferAccepted()&&!h.default.inst.reviveAdsStatus},t.prototype.onSkipRewardScreen=function(){var e=function(){T.NgcMain.inst.reset(),setTimeout(function(){I.default.inst.startFadeIn(.25)},250)};this.saveAllProgression(function(){I.default.inst.startFadeOut(.25,function(){u.default.isInitialized()?u.default.updateRank(u.default.playerRank,function(){e()}):e()})})},t.prototype.showRewardScreen=function(){var e=this,t=function(){e.saveAllProgression(function(){u.default.isInitialized()&&u.default.updateRank(u.default.playerRank)})};if(g.NgcEndGameRewardDialog.canSkipRewardScreen()||this.wrongAdsLogic())this.onSkipRewardScreen();else{this.setEndGameRewards();var o=function(){p.NgcDialogManager.createExistedDialog(e.rewardUIPrefab).then(function(e){var o=e.getComponent(g.NgcEndGameRewardDialog);o.init(t),o.show()})};P.NgcBuildConfig.offlineMode?o():g.NgcEndGameRewardDialog.getRewardMultiplierValue(o)}},t.inst=null,t.roundID=null,i([k(cc.Prefab)],t.prototype,"resultUIPrefab",void 0),i([k(cc.Prefab)],t.prototype,"rewardUIPrefab",void 0),i([k(cc.Prefab)],t.prototype,"spectatorPrefab",void 0),i([k(cc.Prefab)],t.prototype,"reviveDialogPrefab",void 0),o=i([E],t)}(cc.Component);o.NgcGame=A,cc._RF.pop()},{"../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../../../globals":"globals","../../CrossFeatures/CrownRoad/Script/CrownRoadManager":"CrownRoadManager","../../CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../../CrossFeatures/EndGameFlow/Result/Script/ResultUI":"ResultUI","../../CrossFeatures/EndGameFlow/Revive/Script/NgcRevive":"NgcRevive","../../CrossFeatures/EndGameFlow/Reward/RewardUI":"RewardUI","../../CrossFeatures/EndGameFlow/Spectator/Script/NgcSpectatorManager":"NgcSpectatorManager","../../CrossFeatures/LeaderBoard/Script/LeaderBoardManager":"LeaderBoardManager","../../CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../CrossFeatures/XInOneBundle/Script/NgcXInOneDataInterface":"NgcXInOneDataInterface","../../Services/Platform/Platform":"Platform","../../Services/Telemetry/Telemetry":"Telemetry","./Ads/NgcAdsManager":"NgcAdsManager","./BuildConfig":"BuildConfig","./Network/NetUtils":"NetUtils","./NgcGameCamera":"NgcGameCamera","./NgcMain":"NgcMain","./NgcScreenManager":"NgcScreenManager","./NgcUserInfo":"NgcUserInfo"}],NgcItemInfoManager:[function(e,t,o){"use strict";cc._RF.push(t,"5a628yMIEFGcKe3yJoOn0Kc","NgcItemInfoManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.NgcItemInfoManager=o.NgcBundleInfo=o.NgcSingleItemInfo=o.NgcItemInfo=o.NgcItemStatusType=void 0;var i,a=e("../../Core/Delegate"),s=e("../../Core/Utils"),c=e("../../CrossFeatures/EdgeExclusive/Script/EdgeExclusiveManager"),l=e("../../CrossFeatures/ItemShop/Script/NgcAchievementHelper"),u=e("../../SDK/Nano/NanoSrv"),p=e("../../Services/GameShop/GameShop"),d=e("../../Services/Inventory/Inventory"),f=e("../../Services/Platform/Platform"),h=e("./BuildConfig"),g=e("./NgcLocalStorage"),y=e("./NgcShopManager");(function(e){e[e.Currency=0]="Currency",e[e.IAP=1]="IAP",e[e.Achievement=2]="Achievement",e[e.WatchAds=3]="WatchAds",e[e.DailyReward=4]="DailyReward",e[e.LikeSocial=5]="LikeSocial",e[e.Unlock=6]="Unlock",e[e.Equipped=7]="Equipped",e[e.Bundle=8]="Bundle",e[e.CrownRoad=9]="CrownRoad",e[e.EdgeExclusive=10]="EdgeExclusive",e[e.ComingSoon=11]="ComingSoon",e[e.None=12]="None"})(i=o.NgcItemStatusType||(o.NgcItemStatusType={}));var m=function(){};o.NgcItemInfo=m;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(m);o.NgcSingleItemInfo=_;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(m);o.NgcBundleInfo=v;var S=function(){function e(){this._tableItemList=null,this._bundelDataList=null,this._itemSpriteFrameList=null,this._itemInfoList=[],this._singleItemInfoList=[],this._boughtItemIDs=[],this._isStartedLoading=!1,this._finishLoadingCallbackList=new a.default}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},Object.defineProperty(e.prototype,"isStartedLoading",{set:function(e){this._isStartedLoading=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"IsFinishLoading",{get:function(){return!!this._tableItemList&&!!this._bundelDataList&&!!this._itemSpriteFrameList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ItemInfoList",{get:function(){return this._itemInfoList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ItemSpriteFrameList",{get:function(){return this._itemSpriteFrameList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BoughtItemIDs",{get:function(){return this._boughtItemIDs},enumerable:!1,configurable:!0}),e.prototype.registerFinishLoadingCallback=function(e){this._finishLoadingCallbackList.add(e)},e.prototype.deleteFinishLoadingCallback=function(e){this._finishLoadingCallbackList.del(e)},e.prototype.updateEquippedItem=function(e){var t=this.getSingleItemInfo(e);return t&&(t.itemStatusType=i.Equipped,this.saveEquippedItemInfoList()),t},e.prototype.updateUnequippedItem=function(e){var t=this.getSingleItemInfo(e);return t&&(t.itemStatusType=i.Unlock,this.saveEquippedItemInfoList()),t},e.prototype.updateEquippedItemList=function(e){e=e.filter(function(e){return null!=e}),this._singleItemInfoList.forEach(function(t){e.find(function(e){return e===t.itemID})&&t.isBought?t.itemStatusType=i.Equipped:t.itemStatusType=t.itemStatusType===i.Equipped?i.Unlock:t.itemStatusType}),this.saveEquippedItemInfoList()},e.prototype.updateBoughtItem=function(e){var t=this.getSingleItemInfo(e);return t&&(t.isBought=!0,t.itemStatusType=i.Unlock,this._boughtItemIDs.push(t.itemID)),t},e.prototype.updateBrandNewItem=function(e,t){var o=this.getSingleItemInfo(e);o&&(o.isBrandNew=t,this.saveBrandNewItemInfoList())},e.prototype.isThereEliminatedBundle=function(){var e=this._itemInfoList.length;return this.removeEliminatedBundle(),e>this._itemInfoList.length},e.prototype.includeSingleItem=function(e){return this._singleItemInfoList.findIndex(function(t){return t.itemID===e})>-1},e.prototype.getSingleItemInfo=function(e){return this._singleItemInfoList.find(function(t){return t.itemID===e})},e.prototype.getItemSpriteFrame=function(e){var t=e.split("/").pop().replace(".png","");return this._itemSpriteFrameList[t]},e.prototype.saveEquippedItemInfoList=function(){var t=this._singleItemInfoList.filter(function(e){return e.itemStatusType===i.Equipped}).map(function(e){return e.itemID});g.default.setKey(e.EQUIPPED_ITEM_LIST,t)},e.prototype.saveBrandNewItemInfoList=function(){var e=this._singleItemInfoList.filter(function(e){return!0===e.isBrandNew}).map(function(e){return e.itemID});this.uploadBrandNewItemInfoList(e)},e.prototype.uploadBrandNewItemInfoList=function(e,t){var o={_brandNewIDs:e};u.default.inst.servicePost("/playerdata",JSON.stringify(o),function(e,o){e||t&&t(o)})},e.prototype.getBrandNewItemInfoList=function(e){u.default.inst.serviceGet("/playerdata",null,function(t,o){if(!t){var n=JSON.parse(o).data._brandNewIDs||[];e&&e(n)}})},e.prototype.removeEliminatedBundle=function(){var e=this;this._itemInfoList=this._itemInfoList.filter(function(t){if(!t.isBundle)return!0;var o=t;return!e.isBundleExprited(o.timer)&&!e.isBundleContainBoughtItem(o)})},e.prototype.isBundleExprited=function(e){return Date.parse(e)-(new Date).getTime()<0},e.prototype.isBundleContainBoughtItem=function(e){for(var t=0,o=e.itemIDs;t<o.length;t++){var n=o[t];if(this._boughtItemIDs.includes(n))return!0}return!1},e.prototype.getItemInfoByBundleID=function(e){return this._itemInfoList.find(function(t){return t.bundleID===e})},e.prototype.loadData=function(e){var t=this;this._isStartedLoading||(this._itemInfoList=[],this._isStartedLoading=!0,this._tableItemList=null,this._bundelDataList=null,this._itemSpriteFrameList=e?null:{},this._singleItemInfoList=[],d.NgcInventory.inst&&d.NgcInventory.inst.onLogin(function(e,o){!e&&o&&(t._tableItemList=d.NgcInventory.inst.itemTable,t.checkAllItemInfoIsReady())}),p.NgcGameShop.inst&&p.NgcGameShop.inst.onLogin(function(e,o){!e&&o&&(t._bundelDataList=p.NgcGameShop.inst.shopTable,t.checkAllItemInfoIsReady())}),cc.loader.loadResDir("Texture/shop_items",cc.SpriteFrame,function(e,o){o.length>0&&(t._itemSpriteFrameList={},o.forEach(function(e){return t._itemSpriteFrameList[e.name]=e}),t.checkAllItemInfoIsReady())}),s.LoadAsset("Texture/shop_items/star",cc.SpriteFrame).then(function(e){t.defaultItemSpriteFrame=e}))},e.prototype.checkAllItemInfoIsReady=function(){this.IsFinishLoading&&(this.generateItemList(),this.getSaveEquippedItemList(),this.getBrandNewItemList(),this.getBoughtItemIDs(),this.removeEliminatedBundle(),this._finishLoadingCallbackList.call())},e.prototype.getSaveEquippedItemList=function(){var t=this;g.default.getKey(e.EQUIPPED_ITEM_LIST,[]).forEach(function(e){var o=t._singleItemInfoList.find(function(t){return t.itemID===e});o&&(o.itemStatusType=i.Equipped)})},e.prototype.clearSaveEquippedItemList=function(){g.default.setKey(e.EQUIPPED_ITEM_LIST,[])},e.prototype.getBrandNewItemList=function(){var e=this,t=function(t){t.forEach(function(t){var o=e._singleItemInfoList.find(function(e){return e.itemID===t});o&&(o.isBrandNew=!0)})};h.NgcBuildConfig.offlineMode||this.getBrandNewItemInfoList(function(e){t(e),y.NgcShopManager.getInstance().checkHasBrandNewItem()})},e.prototype.getBoughtItemIDs=function(){return this._boughtItemIDs=this._singleItemInfoList.filter(function(e){return e.isBought}).map(function(e){return e.itemID})},e.prototype.generateEdgeItemList=function(e,t){var o;if(!f.NgcPlatform.isRunFromApp()&&!f.NgcPlatform.isOfflineMode()&&(o=c.default.getInstance().getRewardsEdgeExclusive())&&o.length>0)for(var n=0,r=Object.entries(o);n<r.length;n++){var i=r[n];if(i[0],i[1].itemId===e[0].itemID)return void this.addItemInfo(e,t)}},e.prototype.generateItemList=function(){for(var e in this._bundelDataList){var t=p.NgcGameShop.inst.getItems(e);(null==t?void 0:t.length)>=1&&(this._bundelDataList[e].category===c.EDGE_CATEGORY?this.generateEdgeItemList(t,e):this.addItemInfo(t,e))}},e.prototype.addItemInfo=function(e,t){var o=this,n=e.map(function(e){return o._tableItemList[e.itemID]}).filter(function(e){return null!=e&&null!=e});if(0!=n.length){var r=n.map(function(e){return o.getItemSpriteFrame(e.picture)}),a=this._bundelDataList[t],s=1!=n.length,c=this.getItemInfoByBundleID(t);if(null==c&&(s?c=new v:(c=new _,this._singleItemInfoList.push(c)),this._itemInfoList.push(c)),c.bundleID=t,c.isBundle=s,c.price=0!==a.price?p.NgcGameShop.inst.getPrices(a.bundleID)[0]:null,c.category=a.category,c.subCategory=0!=a.sub_category?a.sub_category:"UNNAME_CATEGORY",0==s){var l=c;l.itemID=e[0].itemID,l.itemName=a.name,l.spriteFrame=r[0],l.isBought=this.isItemBought(e[0].itemID),l.isBrandNew=!1,l.isEquipped=!1,l.itemStatusType=this.determineItemStatus(l),l.displayType=s?null:a.displayType?a.displayType:"type1",l.isShowName=!!a.isShowName&&1===a.isShowName}else{var u=c;u.itemIDs=e.map(function(e){return e.itemID}),u.itemNames=e.map(function(e){return e.itemID}),u.spriteFrames=r,u.fullCost=0!==a.fullCost?p.NgcGameShop.inst.getFullCost(a.bundleID)[0]:null,u.bundleName=a.name,u.itemStatusType=i.Bundle,u.promoTag=a.promoTag,u.xValue=a.xValue,u.timer=a.timer}}},e.prototype.determineItemStatus=function(e){var t;if(e.isBought)return e.category===c.EDGE_CATEGORY&&s.Utils.getBrowserType()!==s.BROWSER_TYPE.EDGE?i.EdgeExclusive:i.Unlock;if(null!=e.price){var o=null===(t=d.NgcInventory.inst.itemTable[e.price.currency])||void 0===t?void 0:t.category;if(!o)return i.None;if(o===s.Utils.enumToString(d.InventoryCurrencyType,d.InventoryCurrencyType.soft_currency))return i.Currency;if(o===s.Utils.enumToString(d.InventoryCurrencyType,d.InventoryCurrencyType.achievement_currency))return l.NgcAchievementHelper.getInstance().updateAchievementMaxValue(e.price.currency,e.price.value),i.Achievement;if(o===s.Utils.enumToString(d.InventoryCurrencyType,d.InventoryCurrencyType.ads_currency))return i.WatchAds;if(o===s.Utils.enumToString(d.InventoryCurrencyType,d.InventoryCurrencyType.daily_login_currency))return i.DailyReward;if(o===s.Utils.enumToString(d.InventoryCurrencyType,d.InventoryCurrencyType.crown_road_currency))return i.CrownRoad;if(o===s.Utils.enumToString(d.InventoryCurrencyType,d.InventoryCurrencyType.edge_exclusive_currency))return i.EdgeExclusive;if(o===s.Utils.enumToString(d.InventoryCurrencyType,d.InventoryCurrencyType.coming_soon_currency))return i.ComingSoon;if(o===s.Utils.enumToString(d.InventoryCurrencyType,d.InventoryCurrencyType.like_social_currency))return i.LikeSocial;if(o===s.Utils.enumToString(d.InventoryCurrencyType,d.InventoryCurrencyType.iap_currency))return i.IAP}return i.None},e.prototype.isItemBought=function(e){return!!d.NgcInventory.inst.ownedItems[e]},e._instance=null,e.EQUIPPED_ITEM_LIST="EQUIPPED_ITEM_LIST",e.BRAND_NEW_ITEM_LIST="BRAND_NEW_ITEM_LIST",e}();o.NgcItemInfoManager=S,cc._RF.pop()},{"../../Core/Delegate":"Delegate","../../Core/Utils":"Utils","../../CrossFeatures/EdgeExclusive/Script/EdgeExclusiveManager":"EdgeExclusiveManager","../../CrossFeatures/ItemShop/Script/NgcAchievementHelper":"NgcAchievementHelper","../../SDK/Nano/NanoSrv":"NanoSrv","../../Services/GameShop/GameShop":"GameShop","../../Services/Inventory/Inventory":"Inventory","../../Services/Platform/Platform":"Platform","./BuildConfig":"BuildConfig","./NgcLocalStorage":"NgcLocalStorage","./NgcShopManager":"NgcShopManager"}],NgcLiveReskin:[function(e,t,o){"use strict";cc._RF.push(t,"4cb7b9Kmk1Fa60nmBjDxfaF","NgcLiveReskin");var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../GameFramework/Scripts/BuildConfig"),s=e("../../Services/Platform/Platform"),c=function(){function e(){}return e.getAssetByID=function(e){return this.assetPoolByIDs.get(e)},e.getAssetByUUID=function(e){return this.assetPoolByUUIDs.get(e)},e.getReskinSpriteFrame=function(t){var o,n=null===(o=t)||void 0===o?void 0:o._uuid;if(!n)return t;var r=e.getAssetByUUID(n);return r?new cc.SpriteFrame(r):t},e.getRemoteConfig=function(){var e;return r(this,void 0,Promise,function(){var t,o,n,r,s,c,l;return i(this,function(i){switch(i.label){case 0:t=a.NgcBuildConfig.platformGameID,o=a.NgcBuildConfig.buildVersionName,n=a.NgcBuildConfig.SDK.NanoSrv,r=n.url+"/public/game/"+t+"/?version="+o,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(r)];case 2:if(!(s=i.sent()).ok)throw new Error("[Live Reskin] Cannot get remote config from Nano Services | HTTP_ERROR_STATUS: "+s.status);return[4,s.json()];case 3:return c=i.sent(),[2,null===(e=c.data)||void 0===e?void 0:e.liveReskin];case 4:return l=i.sent(),console.error(l),[2];case 5:return[2]}})})},e.loadAllRemoteAssets=function(){return r(this,void 0,Promise,function(){var e,t,o,n,r,a,c,l=this;return i(this,function(i){switch(i.label){case 0:return s.NgcPlatform.isOfflineMode()?[2]:[4,this.getRemoteConfig()];case 1:return(e=i.sent())&&""!==e.name?(t=e.skinName,o=e.baseURL,n=e.images,r=e.audios,a=e.spines,c=o+"/"+t,n.forEach(function(e){return l.loadRemoteAsset(e,c+"/images").catch(console.error)}),r.forEach(function(e){return l.loadRemoteAsset(e,c+"/audios").catch(console.error)}),a.forEach(function(e){return l.loadRemoteSpine(e,c+"/spines").catch(console.error)}),[2]):[2]}})})},e.loadRemoteAsset=function(e,t){return r(this,void 0,Promise,function(){var o=this;return i(this,function(){return[2,new Promise(function(n,r){if(!e.url)return r(new Error('[Live Reskin] Remote asset (id: "'+e.id+'") is missing a valid URL'));cc.assetManager.loadRemote(t+"/"+e.url,o.downloaderOptions,function(t,i){return t?r(t):(o.assetPoolByIDs.set(e.id,i),o.assetPoolByUUIDs.set(e.uuid,i),n(i))})})]})})},e.loadRemoteSpine=function(e,t){return r(this,void 0,Promise,function(){var o=this;return i(this,function(){return[2,new Promise(function(n,r){if(!e.url&&!e.atlasURL||!e.skelURL)return r(new Error('[Live Reskin] Remote spine (id: "'+e.id+'") is missing a valid URL'));var i=e.skelURL.endsWith(".skel"),a=[{url:t+"/"+e.atlasURL,ext:".txt"},{url:t+"/"+e.skelURL,ext:i?".bin":".txt"}];cc.assetManager.loadAny(a,o.downloaderOptions,function(a,s){if(a)return r(a);cc.assetManager.loadRemote(t+"/"+e.url,o.downloaderOptions,function(t,a){if(t)return r(t);var c=new sp.SkeletonData;return c.atlasText=s[0],i?c._nativeAsset=s[1]:c.skeletonJson=s[1],a.name=e.url,c.textures=[a],c.textureNames=[e.url],o.assetPoolByIDs.set(e.id,c),o.assetPoolByUUIDs.set(e.uuid,c),n(c)})})})]})})},e.assetPoolByIDs=new Map,e.assetPoolByUUIDs=new Map,e.downloaderOptions=n(n({},cc.assetManager.presets.bundle),{maxRetryCount:1,retryInterval:3e3}),e}();o.default=c,cc._RF.pop()},{"../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../Services/Platform/Platform":"Platform"}],NgcLoadingScene:[function(e,t,o){"use strict";cc._RF.push(t,"09fe7+d0S1PsrBw92M4dgpy","NgcLoadingScene");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../../Scripts/GameTrackingDataHelper"),l=e("../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager"),u=e("../../../../Scripts/UserInfo"),p=e("../../../../Scripts/Utils/ConstConfig"),d=e("../../../Core/Utils"),f=e("../../../CrossFeatures/Dialogs/Script/NgcDialogManager"),h=e("../../../CrossFeatures/GPDR/Script/NgcGDPR"),g=e("../../../CrossFeatures/LiveReskin/NgcLiveReskin"),y=e("../../../CrossFeatures/OfflineMode/OfflineMode"),m=e("../../../CrossFeatures/TechMessage/Script/TechMessageNetworkDisconnect"),_=e("../../../CrossFeatures/TechMessage/Script/TechMessages"),v=e("../../../CrossFeatures/Tips/Script/TipManager"),S=e("../../../SDK/Nano/NanoSrv"),b=e("../../../Services/Ads/Ads"),N=e("../../../Services/Inventory/Inventory"),P=e("../../../Services/PartyRoom/PartyRoom"),C=e("../../../Services/Platform/Platform"),w=e("../../../Services/ServicesMgr"),T=e("../../../Services/Telemetry/Telemetry"),I=e("../Ads/AdsManager_impl"),R=e("../Ads/NgcAdsManager"),O=e("../BuildConfig"),E=e("../Localized/LocalizedManager"),k=e("../Network/NetUtils"),A=e("../NgcLocalStorage"),B=e("../NgcUserInfo"),D=cc._decorator,M=D.ccclass,L=D.property,F=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressLoading=null,t.percentLb=null,t._fakeLoadedProgress=0,t.rateForLoadSubpackage=0,t.speedLoadBar=.75,t.gameSceneLoaded=!1,t.loadSubpackagesStartTime=-1,t.loadGameSceneStartTime=-1,t.edgeTrackingParams=null,t._alreadyParseCookie=!1,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"loadedPercent",{get:function(){return this._loadedPercent},set:function(e){e=this._fakeLoadedProgress+e*(1-this._fakeLoadedProgress),C.NgcPlatform.inst&&(e>=1&&this._loadedPercent<1?C.NgcPlatform.inst.onPostMessage({GameScenePercentLoaded:100},"*"):e>=.75&&this._loadedPercent<.75?C.NgcPlatform.inst.onPostMessage({GameScenePercentLoaded:75},"*"):e>=.5&&this._loadedPercent<.5?C.NgcPlatform.inst.onPostMessage({GameScenePercentLoaded:50},"*"):e>=.25&&this._loadedPercent<.25&&C.NgcPlatform.inst.onPostMessage({GameScenePercentLoaded:25},"*")),this._loadedPercent=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadedSubpackage",{get:function(){return this._loadedSubpackage},set:function(e){if(this._loadedSubpackage=e,this._loadedSubpackage==Object.keys(p.ConstConfig.SUBPACKAGE_NAME).length){var t={};window.funnel&&(t={totalSec:Date.now()-window.funnel.startTime,clientTimestamp:Date.now(),checker:window.funnel.checker});var o={name:"loading_subpackageLoaded",param:t};window.trackingFunnelEvents.push(o),this.loadGameScene()}},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e;cc.sys.isBrowser?null===(e=window.firebaseInfo)||void 0===e||e.firebaseAnalytics.logEvent("first_scene_load_end",{clientTimestamp:Date.now()}):C.NgcPlatform.isOfflineMode()||(sdkbox.firebase.Analytics.init(),sdkbox.firebase.Analytics.setAnalyticsCollectionEnabled(!0),sdkbox.firebase.Analytics.logEvent("first_scene_load_end",{clientTimestamp:Date.now()}),sdkbox.firebase.Analytics.logEvent("game_start",{acquisitionChannel:"Android",gameVersion:O.NgcBuildConfig.buildVersionName,deploymentEnvironment:O.NgcBuildConfig.deploymentEnvironment,clientTimestamp:Date.now()})),window.trackingFunnelEvents||(window.trackingFunnelEvents=[])},t.prototype.start=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return window.loadingGame=!0,T.NgcTelemetry.setGameImportantInfos("coin",["skin"]),o.inst=this,[4,this.initCrossFeatures()];case 1:return t.sent(),[4,this.startupPlatform()];case 2:return t.sent(),[4,this.waitForInitStuff()];case 3:return t.sent(),this.sendEdgeTrackingParams(),B.default.sessionKey=k.NgcNetUtils.generateRandomUUID()+Date.now().toString(),B.default.sessionKey&&(B.default.gameRunningSession=B.default.sessionKey,e=JSON.stringify({GAME_FIREBASE_SESSION_TOKEN:B.default.sessionKey}),C.NgcPlatform.inst&&C.NgcPlatform.inst.onPostMessage(e,"*")),l.NgcPartyRoomManager.mustGoToPartyRoom()&&P.NgcPartyRoom.sendIamComingStatus(),this.preloadAllBasicDialogs(),this.preloadCustomAssets(),[2]}})})},t.prototype.sendEdgeTrackingParams=function(){this.edgeTrackingParams&&T.NgcTelemetry.inst.LogEvent_EdgePopupResponse(this.edgeTrackingParams)},t.prototype.initOptionalCrossFeatures=function(){},t.prototype.initMandatoryCrossFeatures=function(){},t.prototype.initCrossFeatures=function(){var e=this;this.initOptionalCrossFeatures(),this.initMandatoryCrossFeatures();var t=function(e){e&&(B.default.curLanguage=e,E.NgcLocalizedManager.setLanguage(e))};return new Promise(function(o){if(C.NgcPlatform.isRunAsIframeOnNano()){if(B.default.getNanoUserInfoFromLocalstorage()){window.accountLinked=!0;var n=A.default.getKey("NANO_LANGUAGE",null,!1);t(n)}o("OK")}else{var r=C.NgcPlatform.getLoginDataFromURL();if(r){var i=r.userId||r.playerId;if(r.redirectEdge&&(cc.sys.localStorage.clear(),d.Utils.getBrowserType()===d.BROWSER_TYPE.EDGE)){var a={context:r.context,browser:r.browser};e.edgeTrackingParams=a}B.default.nanoLoginData=r,B.default.userIdKey=i,B.default.secretKey=r.secretKey,B.default.changedName=!1,B.default.localUserName=r.name,B.default.socialId=r.socialId||"",console.log("Linked successfully using URL",r),window.accountURLLinked=!0,t(r.language)}o("OK")}})},t.prototype.waitForInitStuff=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return e=[],t=new Promise(function(e){N.NgcInventory.inst.onLogin(function(){e()})}),e.push(t),O.NgcBuildConfig.offlineMode?[4,y.OfflineMode.Init()]:[3,2];case 1:o.sent(),o.label=2;case 2:return[4,Promise.all(e)];case 3:return[2,o.sent()]}})})},t.prototype.loadSubpackage=function(){var e=this;for(var t in this.loadSubpackagesStartTime=(new Date).getTime(),window.funnel&&(Date.now(),window.funnel.startTime,window.funnel.checker),p.ConstConfig.SUBPACKAGE_NAME)cc.loader.downloader.loadSubpackage(p.ConstConfig.SUBPACKAGE_NAME[t],function(t){if(t)return console.error(t);e.loadedSubpackage+=1,e.loadedPercent=e.loadedSubpackage/Object.keys(p.ConstConfig.SUBPACKAGE_NAME).length*e.rateForLoadSubpackage})},t.prototype.loadGameScene=function(){var e=this;this.loadGameSceneStartTime=(new Date).getTime(),window.funnel&&(Date.now(),window.funnel.startTime,window.funnel.checker),C.NgcPlatform.inst&&C.NgcPlatform.inst.onGameLoadingStart(),cc.director.preloadScene(p.ConstConfig.SCENE.GAME_SCENE,function(t,o){e.loadedPercent=e.rateForLoadSubpackage+t/o*(1-e.rateForLoadSubpackage)},function(){cc.sys.isBrowser&&window.parent.postMessage({GameSceneLoaded:!0},"*"),e.gameSceneLoaded=!0})},t.prototype.update=function(e){var t=!0;cc.sys.isBrowser&&(t=0==window.standOnLoadingScreen||null==window.standOnLoadingScreen);var o=h.default.getInstance().isShowingGDPR_Popup();if(!o&&!this._alreadyParseCookie){try{h.default.getInstance().parseCookies()}catch(s){console.warn("Parse cookie error",s)}this._alreadyParseCookie=!0}if(t=t&&!o,0===this.loadedPercent&&t&&(this._fakeLoadedProgress=Math.min(.5,this._fakeLoadedProgress+Math.min(e,.02)*this.speedLoadBar/3),this._updateLoadingProgress(this._fakeLoadedProgress)),this.progressLoading.progress<this.loadedPercent&&t){var n=Math.min(this.progressLoading.progress+e*this.speedLoadBar,this.loadedPercent);this._updateLoadingProgress(n)}if(t&&w.NgcServicesMgr.isLoggedIn&&this.gameSceneLoaded&&100==Math.round(100*this.progressLoading.progress)){var r={};window.funnel&&(r={totalSec:Date.now()-window.funnel.startTime,clientTimestamp:Date.now(),checker:window.funnel.checker});var i={name:"loading_startsceneLoaded",param:r};if(window.trackingFunnelEvents.push(i),!_.default.checkAndShowUnSupportedBrowser()){var a=document.getElementById("splash");return void(a&&(a.style.display="none"))}T.NgcTelemetry.inst.sendFunnelEvents(),c.default.inst.timer_loading_startsceneLoaded=Date.now(),cc.director.loadScene(p.ConstConfig.SCENE.GAME_SCENE),C.NgcPlatform.inst&&C.NgcPlatform.inst.onGameLoadingFinish(),window.loadingGame=!1,this.gameSceneLoaded=!this.gameSceneLoaded}},t.prototype._updateLoadingProgress=function(e){this.progressLoading.progress=e,this.percentLb.string=Math.round(100*this.progressLoading.progress)+"%"},t.prototype.nextTip=function(){v.NgcTipManager.inst.nextTip()},t.prototype.onSitelock=function(){return a(this,void 0,Promise,function(){return s(this,function(){return[2,new Promise(function(e,t){cc.assetManager.loadBundle("Sitelock",function(o,n){if(o)return t(o);n.load("Prefab/NgcSitelockDialog",cc.Prefab,function(o,n){if(o)return t(o);var r=cc.instantiate(n);cc.find("Canvas").getComponent(cc.Canvas).node.addChild(r),e()})})})]})})},t.prototype.startupPlatform=function(){var e=this;return new Promise(function(t,o){w.NgcServicesMgr.preInit(O.NgcBuildConfig).then(function(){var n=w.NgcServicesMgr.initServices(O.NgcBuildConfig);n.then(function(){return a(e,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return w.NgcServicesMgr.isInitialized=!0,B.default.totalRoundCount,O.NgcBuildConfig.offlineMode?[3,3]:b.NgcAds.inst.isLazyLoad?[4,b.NgcAds.inst.lazyInit().catch(function(e){cc.error("err :"+e),cc.warn("Maybe SDK is blocked by AdBlock")})]:[3,2];case 1:e.sent(),e.label=2;case 2:R.default.inst=new I.default,I.default.inst.hasAds(b.AdsType.Banner)&&I.default.inst.show(R.NgcPointcuts.bannerLoading,b.AdsType.Banner),e.label=3;case 3:return this.startLoadResource(),t(),[2]}})})}),n.catch(function(t){return a(e,void 0,void 0,function(){return s(this,function(){if(!C.NgcPlatform.isOfflineMode()){if(cc.error("Failed to startup platform services: ",t),t&&t.toString().includes(S.default.sitelockMsg))return this.onSitelock().catch(console.error),[2,o("Site locked!")];t&&t.toString().includes("not match")&&u.UserInfo.resetPrivateData(),_.default.showNetworkDisconnect(),o()}return[2]})})})})})},t.prototype.startLoadResource=function(){this.loadedPercent=0,this.progressLoading.progress=0,C.NgcPlatform.isOfflineMode()||g.default.loadAllRemoteAssets(),this.loadedSubpackage=0,this.loadSubpackage()},t.prototype.basicDialogs=function(){return[{type:m.default.dialogType,url:m.default.urlPrefab,bundle:m.default.bundleName}]},t.prototype.preloadCustomAssets=function(){},t.prototype.preloadAllBasicDialogs=function(){this.basicDialogs().forEach(function(e){f.NgcDialogManager.loadDialogPrefab(e.type,e.url,e.bundle)})},t.prototype.hideAds=function(){I.default.inst.hasAds(b.AdsType.Banner)&&I.default.inst.hide(R.NgcPointcuts.bannerLoading)},t.inst=null,i([L(cc.ProgressBar)],t.prototype,"progressLoading",void 0),i([L(cc.Label)],t.prototype,"percentLb",void 0),o=i([M],t)}(cc.Component);o.default=F,cc._RF.pop()},{"../../../../Scripts/GameTrackingDataHelper":"GameTrackingDataHelper","../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../../../../Scripts/UserInfo":"UserInfo","../../../../Scripts/Utils/ConstConfig":"ConstConfig","../../../Core/Utils":"Utils","../../../CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../CrossFeatures/GPDR/Script/NgcGDPR":"NgcGDPR","../../../CrossFeatures/LiveReskin/NgcLiveReskin":"NgcLiveReskin","../../../CrossFeatures/OfflineMode/OfflineMode":"OfflineMode","../../../CrossFeatures/TechMessage/Script/TechMessageNetworkDisconnect":"TechMessageNetworkDisconnect","../../../CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../../CrossFeatures/Tips/Script/TipManager":"TipManager","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads","../../../Services/Inventory/Inventory":"Inventory","../../../Services/PartyRoom/PartyRoom":"PartyRoom","../../../Services/Platform/Platform":"Platform","../../../Services/ServicesMgr":"ServicesMgr","../../../Services/Telemetry/Telemetry":"Telemetry","../Ads/AdsManager_impl":"AdsManager_impl","../Ads/NgcAdsManager":"NgcAdsManager","../BuildConfig":"BuildConfig","../Localized/LocalizedManager":"LocalizedManager","../Network/NetUtils":"NetUtils","../NgcLocalStorage":"NgcLocalStorage","../NgcUserInfo":"NgcUserInfo"}],NgcLocalStorage:[function(e,t,o){"use strict";cc._RF.push(t,"87e6amhpJRBVKyOf23BaoGr","NgcLocalStorage"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("simple-crypto-js"),r=e("./BuildConfig"),i=function(){function e(){}return e.getCryptr=function(){return this.cryptr||(this.cryptr=new n.default(e.ENDCRYPT_KEY)),this.cryptr},e.keymangle=function(e,t){return(e+=t?r.NgcBuildConfig.platformGameID:"").split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0).toString()},e.setKey=function(t,o,n){void 0===n&&(n=!0);var r=this.getCryptr();cc.sys.localStorage.setItem(e.keymangle(t,n),r.encrypt(o))},e.getKey=function(e,t,o){var n;void 0===o&&(o=!0);try{n=this.getCryptr().decrypt(cc.sys.localStorage.getItem(this.keymangle(e,o)))}catch(r){n=t}return""!==n&&null!=n||(n=t),n},e.ENDCRYPT_KEY="123321",e.cryptr=null,e}();o.default=i,cc._RF.pop()},{"./BuildConfig":"BuildConfig","simple-crypto-js":96}],NgcLuckyBoosterManager:[function(e,t,o){"use strict";cc._RF.push(t,"7c3a8ip6NpDPI+9HeFJQaOG","NgcLuckyBoosterManager");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcLuckyBoosterManager=o.DEFAULT_DISPLAY_CONDITION=o.NO_ADS_SPIN_CURRENCY_NUMBER=o.NO_ADS_SPIN_CURRENCY=o.LuckyItem=o.LuckyBoosterInfo=void 0;var i=e("../../../Core/Utils"),a=e("../../../GameFramework/Scripts/Ads/NgcAdsManager"),s=e("../../../GameFramework/Scripts/BuildConfig"),c=e("../../../GameFramework/Scripts/NgcItemInfoManager"),l=e("../../../GameFramework/Scripts/NgcLocalStorage"),u=e("../../../GameFramework/Scripts/NgcMain"),p=e("../../../GameFramework/Scripts/NgcShopManager"),d=e("../../../SDK/Nano/NanoSrv"),f=e("../../../Services/Ads/Ads"),h=e("../../../Services/Inventory/Inventory"),g=e("../../../Services/Telemetry/Telemetry"),y=e("../../DeliveryReward/Script/DeliveryRewardAnimation"),m=e("../../OfflineMode/OfflineMode"),_=e("./BoosterUseTypeHelper/NgcBoosterTypeHelper"),v=e("./BoosterUseTypeHelper/NgcBoosterTypeInGameHelper"),S=e("./BoosterUseTypeHelper/NgcBoosterTypeInMainMenuHelper"),b=e("./NgcBoosterScroll");o.LuckyBoosterInfo=function(){};o.LuckyItem=function(){},o.NO_ADS_SPIN_CURRENCY="coin",o.NO_ADS_SPIN_CURRENCY_NUMBER=999,o.DEFAULT_DISPLAY_CONDITION=1;var N=function(){function e(){this._luckyBoosterInfo={},this._dailyBoosterUI=null,this._boosterUseType=_.BoosterUseType.IN_MAIN_MENU,this._boosterTypeHelperList=[],this.applyBoosterCallback=null,this._pressedSpinButton=!1}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),u.NgcMain.inst.setCrossFeatureInst(u.CrossFeature.NgcLuckyBoosterManager,this._instance),this._instance},Object.defineProperty(e.prototype,"BoosterUseType",{get:function(){return this._boosterUseType},set:function(e){this._boosterUseType=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AvailableBooster",{get:function(){return l.default.getKey("availableBooster","")},set:function(e){l.default.setKey("availableBooster",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"BoosterTypeHelper",{get:function(){return this._boosterTypeHelperList[this._boosterUseType]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LuckyBoosterInfo",{get:function(){return this._luckyBoosterInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DailyBoosterUI",{get:function(){return this._dailyBoosterUI},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"NumberOfRound",{get:function(){return l.default.getKey("numberOfRound",0)},set:function(e){l.default.setKey("numberOfRound",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"EnableLuckyBooster",{set:function(e){this._dailyBoosterUI.spinButton.interactable=e,this._dailyBoosterUI.spinButton.enableAutoGrayEffect=!e,this._dailyBoosterUI.boosterScroll.RunNormal=e&&this.BoosterTypeHelper.canRunNormal()},enumerable:!1,configurable:!0}),e.prototype.initBoosterTypeHelper=function(){this._boosterTypeHelperList.push(new v.NgcBoosterTypeInGameHelper(this)),this._boosterTypeHelperList.push(new S.NgcBoosterTypeInMainMenuHelper(this))},e.prototype.init=function(e){var t=this;this._dailyBoosterUI=e,this.initBoosterTypeHelper(),this._dailyBoosterUI.hide();var o=function(){t.onFinishLoadingItem(),c.NgcItemInfoManager.getInstance().deleteFinishLoadingCallback(o)};c.NgcItemInfoManager.getInstance().registerFinishLoadingCallback(o)},e.prototype.setApplyBoosterCallback=function(e){this.applyBoosterCallback=e},e.prototype.applyBooster=function(){this.applyBoosterCallback&&this.applyBoosterCallback()},e.prototype.consumeBooster=function(){this.AvailableBooster="",this.EnableLuckyBooster=!0,this.checkBoosterUI()},e.prototype.enableUseBoosterInGame=function(e){this._dailyBoosterUI.enableInGameText(e),e&&this._dailyBoosterUI.boosterScroll.displaySpinAnimation(this.AvailableBooster,0,.7,null)},e.prototype.checkBoosterUI=function(){this.BoosterTypeHelper.checkShowBooster(),this.BoosterTypeHelper.checkDisplayUseBoosterInGame()},e.prototype.onFinishLoadingItem=function(){this._luckyBoosterInfo=d.default.inst.getCurGameInfo().luckyBooster,this.EnableLuckyBooster=!0,this.getBoosterItemList(),this.checkBoosterUI()},e.prototype.getBoosterItemList=function(){var e,t=h.NgcInventory.inst.itemTable;null===(e=this._luckyBoosterInfo.luckyTable)||void 0===e||e.forEach(function(e){e&&(e.spriteFrame=c.NgcItemInfoManager.getInstance().getItemSpriteFrame(t[e.itemID].picture))}),this._dailyBoosterUI.boosterScroll.init(this._luckyBoosterInfo.luckyTable,b.SpinDirection.DOWN)},e.prototype.handleNanoServiceError=function(e){"adDailyLimit"===JSON.parse(e).res&&this.onAdDailyLimit()},e.prototype.onAdDailyLimit=function(){this._dailyBoosterUI.showLuckyBoosterMessage("LKB_DAILYSPINLIMIT"),g.NgcTelemetry.inst.LogEvent_LuckyboosterClicked(1)},e.prototype.onSpinNotEnoughCurrency=function(){this._dailyBoosterUI.showLuckyBoosterMessage("ITS_NOT_ENOUGH_COINS"),g.NgcTelemetry.inst.LogEvent_LuckyboosterClicked(1)},e.prototype.trackClaimBooster=function(e){var t=this.NumberOfRound+1;g.NgcTelemetry.inst.LogEvent_LuckyboosterCollected(e.itemID,e.quantity,t),this.NumberOfRound=t},e.prototype.canClaimBooster=function(){return n(this,void 0,Promise,function(){return r(this,function(){return[2,new Promise(function(e,t){if(s.NgcBuildConfig.offlineMode||f.NgcAds.inst&&f.NgcAds.inst.isFakeAdsPlatform())return h.NgcInventory.inst.getItemCount(o.NO_ADS_SPIN_CURRENCY,function(n,r){!n&&r&&r.count>=o.NO_ADS_SPIN_CURRENCY_NUMBER&&e(!0),t("notEnoughCurrency")}),void e(!0);d.default.inst.serviceGet("/luckybooster/canclaim",null,function(o,n){o&&t("adDailyLimit"),!o&&n&&(JSON.parse(n),e(!0))})})]})})},e.prototype.onSpinButtonClick=function(){return n(this,void 0,void 0,function(){var e,t,o=this;return r(this,function(n){switch(n.label){case 0:if(this._pressedSpinButton)return[2];this._pressedSpinButton=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.canClaimBooster()];case 2:return n.sent()?(g.NgcTelemetry.inst.LogEvent_LuckyboosterClicked(0),this.EnableLuckyBooster=!1,this._dailyBoosterUI.boosterScroll.spinFast=!0,this._dailyBoosterUI.boosterScroll._moveSpeed=100,cc.tween(this._dailyBoosterUI.boosterScroll).to(2,{_moveSpeed:800},{easing:"cubicIn"}).start(),e=function(e,t){e?o.getLuckyBoosterWinItem():(cc.tween(o._dailyBoosterUI.boosterScroll).to(2,{_moveSpeed:100},{easing:"cubicOut"}).call(function(){o._dailyBoosterUI.boosterScroll.spinFast=!1,o.EnableLuckyBooster=!0}).start(),t<=0&&o._dailyBoosterUI.showLuckyBoosterMessage("NGG_ADS_UNAVAILABLE")),o._pressedSpinButton=!1},f.NgcAds.inst&&f.NgcAds.inst.isFakeAdsPlatform()?e(!0,0):a.default.inst.showRewardVideo(a.NgcPointcuts.videoLuckybooster,null,null,null,e),[3,4]):[2];case 3:return t=n.sent(),this.onDailyError(t),this._pressedSpinButton=!1,[3,4];case 4:return[2]}})})},e.prototype.onDailyError=function(e){switch(e){case"adDailyLimit":this.onAdDailyLimit();break;case"notEnoughCurrency":this.onSpinNotEnoughCurrency()}},e.prototype.getLuckyBoosterWinItem=function(){var e=this;(function(){if(s.NgcBuildConfig.offlineMode){var t=i.Utils.randomArr(e._luckyBoosterInfo.luckyTable).itemID;e.displaySpinAnimation(t)}else d.default.inst.servicePost("/luckybooster/claim",JSON.stringify({}),function(t,o){if(t)return e.handleNanoServiceError(t),void(e.EnableLuckyBooster=!0);if(!t&&o){var n=JSON.parse(o);e.displaySpinAnimation(n.data.itemID)}})})()},e.prototype.displaySpinAnimation=function(e){var t=this,o=i.Utils.randomFromTo(this._luckyBoosterInfo.minFullSpins,this._luckyBoosterInfo.maxFullSpins);this._dailyBoosterUI.boosterScroll.spinFast=!1,this._dailyBoosterUI.boosterScroll.displaySpinAnimation(e,o,3,function(){return t.showItemClaimAnimation(e)})},e.prototype.showItemClaimAnimation=function(e){var t=this,o=this._luckyBoosterInfo.luckyTable.find(function(t){return t.itemID===e}),n={itemID:o.itemID,count:o.quantity};y.default.inst.showRewardAnimation(n,function(){return t.checkUseBooster(o)},!0),this.trackClaimBooster(o)},e.prototype.checkUseBooster=function(e){var t=this;this.BoosterTypeHelper.checkPlayAnimationMoveBoosterToCharacter(e.spriteFrame,function(){return t.onClaimBooster(e.itemID)})},e.prototype.onClaimBooster=function(e){var t,n,r=this;if(s.NgcBuildConfig.offlineMode||f.NgcAds.inst&&f.NgcAds.inst.isFakeAdsPlatform()){var i=["",0],a=i[0],c=i[1];s.NgcBuildConfig.offlineMode?(a=(t=[m.OfflineMode.Config.DailyBoosterType,m.OfflineMode.Config.DailyBoosterPrice])[0],c=t[1]):(a=(n=[o.NO_ADS_SPIN_CURRENCY,o.NO_ADS_SPIN_CURRENCY_NUMBER])[0],c=n[1]),h.NgcInventory.inst.consumeItem(a,c,function(){})}s.NgcBuildConfig.offlineMode&&(m.OfflineMode.UpdateItem(e,1),m.OfflineMode.MarkClaimLuckyBooster(e)),h.NgcInventory.inst.forceFetchInventory(function(){u.NgcMain.inst.onClaimBooster(e),p.NgcShopManager.getInstance().updateBoughtItem(e),r.AvailableBooster=e,r.EnableLuckyBooster=!0,r.checkBoosterUI()})},e._instance=null,e}();o.NgcLuckyBoosterManager=N,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../GameFramework/Scripts/NgcLocalStorage":"NgcLocalStorage","../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Telemetry/Telemetry":"Telemetry","../../DeliveryReward/Script/DeliveryRewardAnimation":"DeliveryRewardAnimation","../../OfflineMode/OfflineMode":"OfflineMode","./BoosterUseTypeHelper/NgcBoosterTypeHelper":"NgcBoosterTypeHelper","./BoosterUseTypeHelper/NgcBoosterTypeInGameHelper":"NgcBoosterTypeInGameHelper","./BoosterUseTypeHelper/NgcBoosterTypeInMainMenuHelper":"NgcBoosterTypeInMainMenuHelper","./NgcBoosterScroll":"NgcBoosterScroll"}],NgcMain:[function(e,t,o){"use strict";cc._RF.push(t,"20518EDME9IH7pdIlp3ji+5","NgcMain");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcMain=o.AppContext=o.AppState=o.CrossFeature=void 0;var c,l,u,p=e("../../Core/Utils"),d=e("../../CrossFeatures/Dialogs/Script/NgcDialogManager"),f=e("../../CrossFeatures/NavBar/Script/NavBarConflictDialog"),h=e("../../CrossFeatures/NavBar/Script/NavBarLeaveGameDialog"),g=e("../../SDK/Nano/NanoSrv"),y=e("../../Services/Inventory/Inventory"),m=e("../../Services/Leaderboard/Leaderboard"),_=e("../../Services/Leaderboard/Leaderboard_impl_NanoSrv"),v=e("../../Services/Social/Social"),S=e("./Ads/AdsManager_impl"),b=e("./Ads/NgcAdsManager"),N=e("./BuildConfig"),P=e("./CountryFlagsManager"),C=e("./Network/NetUtils"),w=e("./NgcUserInfo"),T=cc._decorator,I=T.ccclass;T.property,function(e){e[e.NavBarManager=0]="NavBarManager",e[e.NgcLuckyBoosterManager=1]="NgcLuckyBoosterManager",e[e.NgcEdgeExclusiveManager=2]="NgcEdgeExclusiveManager",e[e.NgcLeaderboardManager=3]="NgcLeaderboardManager",e[e.NgcStartMain=4]="NgcStartMain",e[e.NgcDailyRewardManager=5]="NgcDailyRewardManager"}(c=o.CrossFeature||(o.CrossFeature={})),function(e){e[e.InitSettle=0]="InitSettle",e[e.StartScreen=1]="StartScreen",e[e.ShopScreen=2]="ShopScreen",e[e.Game=3]="Game",e[e.PartyScreen=4]="PartyScreen"}(l=o.AppState||(o.AppState={})),function(e){e[e.NOT_SET=0]="NOT_SET",e[e.Options=1]="Options",e[e.MainMenu=2]="MainMenu",e[e.Matchmaking=3]="Matchmaking",e[e.Gameplay=4]="Gameplay",e[e.Results=5]="Results",e[e.Rewards=6]="Rewards",e[e.Spectator=7]="Spectator",e[e.Leaderboard=8]="Leaderboard",e[e.PartyRoom=9]="PartyRoom",e[e.ItemsShopScreen=10]="ItemsShopScreen",e[e.EndOfActionPhase=11]="EndOfActionPhase",e[e.Revive=12]="Revive"}(u=o.AppContext||(o.AppContext={}));var R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curGameNetID="",t.localUserName="",t.appState=l.StartScreen,t.crossFeatureInstances={},t}var o;return r(t,e),o=t,t.prototype.setCrossFeatureInst=function(e,t){this.crossFeatureInstances[e]=t},t.prototype.getCrossFeatureInst=function(e){return this.crossFeatureInstances[e]},t.prototype.onLoad=function(){null==o.inst?(window.warningBack=this.showWarningPopup.bind(this),o.inst=this,this.createInstanceOfAdsManager()):console.error("More than one Game inst created")},t.prototype.createInstanceOfAdsManager=function(){b.default.inst||(b.default.inst=new S.default)},t.setAppContext=function(e){0!=o.appContextStack.length?this.appContextStack[this.appContextStack.length-1]=e:o.pushAppContext(e)},t.pushAppContext=function(e){o.appContextStack.push(e)},t.getAppContext=function(){return 0==o.appContextStack.length?u.NOT_SET:this.appContextStack[this.appContextStack.length-1]},t.getAppContextName=function(){var e=this.getAppContext();return p.Utils.enumToString(u,e)},t.prototype.updateNameToNanosrv=function(e){var t=this;if(!N.NgcBuildConfig.offlineMode){var o="";P.NgcCountryFlagsManager.localCountry&&(o=P.NgcCountryFlagsManager.localCountry.toLowerCase());var n=function(){console.log("### country = "+o);var e={name:t.localUserName,devicetype:cc.sys.isMobile?_.DeviceType.MOBILE:_.DeviceType.PC,country:o};g.default.inst.servicePost("/profile/",JSON.stringify(e),function(e){e||console.log("update info success")})};o?n():P.NgcCountryFlagsManager.callBack=function(){o=P.NgcCountryFlagsManager.localCountry.toLowerCase(),n()}}e&&e()},t.prototype.showWarningPopup=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return h.default.isOpening?[2]:[4,d.NgcDialogManager.create(h.default)];case 1:return e.sent().show(),[2]}})})},t.popAppContext=function(){0!=o.appContextStack.length&&this.appContextStack.pop()},t.prototype.setState=function(){},t.prototype.processDataConflict=function(e){e.playerData.hasOwnProperty("_isAlreadyFirstShow")&&(this.getCrossFeatureInst(c.NgcDailyRewardManager).isDailyRewardAlreadyShow=e.playerData._isAlreadyFirstShow)},t.prototype.resolveSocialConflict=function(e){return a(this,void 0,void 0,function(){var t,o,n,r=this;return s(this,function(i){switch(i.label){case 0:return t=this.getCrossFeatureInst(c.NgcStartMain),[4,d.NgcDialogManager.createDialog(f.NavBarConflicttDialog.dialogType,f.NavBarConflicttDialog.urlPrefab,f.NavBarConflicttDialog.bundleName)];case 1:return o=i.sent(),(n=o.getComponent(f.NavBarConflicttDialog)).init(function(o){return a(r,void 0,void 0,function(){var n,r=this;return s(this,function(i){switch(i.label){case 0:return t.loadingNode.active=!0,[4,v.NgcSocial.inst.forceLinkInfoToServer(o)];case 1:return i.sent(),o?(w.default.localUserName=this.localUserName=v.NgcSocial.inst.getFormatName(),w.default.avatarUrl=v.NgcSocial.inst.getProfilePictureUrl(),[3,4]):[3,2];case 2:return this.resetPrivateDataForGame(),n=v.NgcSocial.inst.getConflictedData(),g.default.inst.userID=n.id,w.default.userIdKey=n.id,w.default.localUserName=this.localUserName=w.default.correctNameFormat(n.name),w.default.avatarUrl=n.avatar,n.hasOwnProperty("playerData")&&this.processDataConflict(n),[4,g.default.inst.refreshAccessToken()];case 3:i.sent(),i.label=4;case 4:return w.default.socialId=v.NgcSocial.inst.getSocialID(),v.NgcSocial.inst.checkLoginStatus().then(function(){return a(r,void 0,void 0,function(){var n,r,i,a,l,u,p,d,f;return s(this,function(s){switch(s.label){case 0:return n=this.getCrossFeatureInst(c.NgcLeaderboardManager),r=v.NgcSocial.inst.isConnected(),i=n?n.getLeaderBoardUIComponent():null,[4,n.getLocalPlayerRank(i.curTimeFilter,i.curPopulationFilter)];case 1:return a=s.sent(),i.localUserData=a,i.updateContentFacebookProfile(),i&&i.setLoginStatus(r),[4,n.getAllTimeBestScore()];case 2:return(l=s.sent())&&this.setBestScore(l),o?[3,4]:[4,y.NgcInventory.inst.forceFetchInventory()];case 3:s.sent(),this.updateInventoryWithPlatformForGame(),t.applyBooster(),s.label=4;case 4:return v.NgcSocial.inst.isConnected()&&v.NgcSocial.inst.sendFriendListToServer(),e&&e(null,"login"),m.NgcLeaderboard.inst.clearCacheRequestData(),null===(u=this.getCrossFeatureInst(c.NavBarManager))||void 0===u||u.updateListEffectBtn(),null===(p=this.getCrossFeatureInst(c.NavBarManager))||void 0===p||p.setNavBarInfo(),null===(d=this.getCrossFeatureInst(c.NgcLuckyBoosterManager))||void 0===d||d.checkBoosterUI(),null===(f=this.getCrossFeatureInst(c.NgcEdgeExclusiveManager))||void 0===f||f.forceFetchEdgeExclusive(),[2]}})})}).finally(function(){t.loadingNode.active=!1,r.onAfterResolveConflict()}),t.updateNameBox(),[2]}})})}),n.show(),[2]}})})},t.prototype.onAfterResolveConflict=function(){},t.prototype.createFakeName=function(){return g.default.inst.randomNameDisabled||(w.default.localUserName=this.localUserName="Guest"+C.NgcNetUtils.RandomRange(1,9999,!0).toString()),this.updateNameToNanosrv(),this.localUserName},t.prototype.reset=function(){this._reset()},t.prototype.userNameIsValid=function(){var e=!0;return""!=this.localUserName&&this.localUserName||(e=!1),e},t.inst=null,t.appContextStack=[],o=i([I],t)}(cc.Component);o.NgcMain=R,cc._RF.pop()},{"../../Core/Utils":"Utils","../../CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../CrossFeatures/NavBar/Script/NavBarConflictDialog":"NavBarConflictDialog","../../CrossFeatures/NavBar/Script/NavBarLeaveGameDialog":"NavBarLeaveGameDialog","../../SDK/Nano/NanoSrv":"NanoSrv","../../Services/Inventory/Inventory":"Inventory","../../Services/Leaderboard/Leaderboard":"Leaderboard","../../Services/Leaderboard/Leaderboard_impl_NanoSrv":"Leaderboard_impl_NanoSrv","../../Services/Social/Social":"Social","./Ads/AdsManager_impl":"AdsManager_impl","./Ads/NgcAdsManager":"NgcAdsManager","./BuildConfig":"BuildConfig","./CountryFlagsManager":"CountryFlagsManager","./Network/NetUtils":"NetUtils","./NgcUserInfo":"NgcUserInfo"}],NgcNetClientRefactor:[function(e,t,o){"use strict";cc._RF.push(t,"2080dMH2odOAZQ+BuSQLHLH","NgcNetClientRefactor");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNetClientRefactor=o.WS_CLOSE_FOR_NEW_CONNECTION_CODE=void 0;var c=e("../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager"),l=e("../BuildConfig"),u=e("./Messaging/MessageBuilder"),p=e("./Messaging/Protocol"),d=e("./Messaging/MessageDefines"),f=e("./NetStatsTracker"),h=e("long"),g=e("../../../Services/PartyRoom/PartyRoom"),y=e("../../../CrossFeatures/TechMessage/Script/TechMessages"),m=e("./NetworkInterface"),_=e("../../../SDK/Nano/NanoSrv"),v=e("../../../Services/Platform/Platform"),S=cc._decorator,b=S.ccclass;S.property,o.WS_CLOSE_FOR_NEW_CONNECTION_CODE=4e3;var N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onDisconnectedCB=null,t.websocket=null,t.serverAddress="ws://localhost:1337",t.connected=!1,t.LATENCY_HISTORY_MAX_ENTRIES=10,t.onMessageHandlers={},t.connectRetryCount=0,t.connectCycleRunning=!1,t.messagesRecd=0,t.lastMsgTime=-1,t.serverDelta=0,t.lowestPing=0,t.recentPing=0,t.lastPongTime=0,t.timeSinceLastMsg=0,t.timeSinceLastPong=0,t.calculatedDelta=!1,t.latencyMovingHistory=[],t.averageLatencyMS=0,t.serverClockOffsetMS=0,t.clientID="",t.localPlayerID="",t.broadcastMessageRoutingTable={},t._clientIDInit=!1,t.pingTimeout=null,t}var n;return r(t,e),n=t,Object.defineProperty(t.prototype,"clientIDInit",{get:function(){return this._clientIDInit},set:function(e){this._clientIDInit=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){if(n.inst)cc.error("More than one NetClient!!");else{n.inst=this;var e=_.default.inst&&_.default.inst.getCurGameInfo()&&_.default.inst.getCurGameInfo().gameServerURL||"";this.serverAddress=e||l.NgcBuildConfig.gameServerURL}},t.prototype.connect=function(e,t,r){return void 0===e&&(e=""),void 0===t&&(t=n.CONNECTION_TIMEOUT),void 0===r&&(r=n.MAX_RETRY),a(this,void 0,Promise,function(){var n,i,a,c,l=this;return s(this,function(){return n=r,i=this.serverAddress,""!=e&&(i=e),a=e!==this.serverAddress,c=function(e,o){n<=0?o():l.websocket&&l.websocket.readyState===WebSocket.OPEN?e(l.websocket):l.connect(i,t,n-1).then(e,o)},[2,new Promise(function(n,s){setTimeout(function(){c(n,s)},t),a&&l.websocket&&l.websocket.close(o.WS_CLOSE_FOR_NEW_CONNECTION_CODE,"Open new connection"),l.websocket&&l.websocket.readyState==WebSocket.OPEN?n(l.websocket):(l.websocket&&l.websocket.close(o.WS_CLOSE_FOR_NEW_CONNECTION_CODE,"Open new connection"),l.websocket=new WebSocket(i,[]),cc.log("[NGC_NetClient] Trying to connect to server @ "+i),l.websocket.onopen=function(e){l.serverAddress=i,l.websocket.binaryType="arraybuffer",l._onOpen(e),n(l.websocket)},l.websocket.onmessage=function(e){l._onMessage(e)},l.websocket.onerror=function(e){l._onError(e)},l.websocket.onclose=function(o){v.NgcPlatform.isRunFromApp()?l.connect(e,t,r):l._onClose(o)})})]})})},t.prototype._onOpen=function(e){cc.log("[NGC_NetClient] Connection is opened!"),this.connected=!0,this.schedule(this._sendPing,n.PING_TIME_MS/1e3),this.onOpen&&this.onOpen(e)},t.prototype._onMessage=function(e){if(this.messagesRecd++,this.lastMsgTime=Date.now(),e.data instanceof ArrayBuffer){var t=new Uint8Array(e.data),o=p.GetMessageType(t);o>p.Protocol.OP_END?this.onRoomMessage(o,t):this.resolveSystemMessage(o,t)}else"string"==typeof e.data&&this.checkJsonMessageData(e.data);this.onMessageFromServer&&this.onMessageFromServer(e)},t.prototype.onMessage=function(e,t){this.onMessageHandlers[e]=t},t.prototype.onRoomMessage=function(e,t){this.onMessageHandlers[e]&&this.onMessageHandlers[e](t)},t.prototype._onError=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return cc.log("[NGC_NetClient] ConnectError: ",JSON.stringify(e)),this.connected=!1,this.unschedule(this._sendPing),this.onError?[4,this.onError(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype._onClose=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return cc.log("[NGC_NetClient] ConnectClose: ",JSON.stringify(e)),this.connected=!1,this.unschedule(this._sendPing),t=e.code===o.WS_CLOSE_FOR_NEW_CONNECTION_CODE?m.DisconnectReason.OpenNewConnection:m.DisconnectReason.Server,this._onDisconnectedCB&&this._onDisconnectedCB(t),this.onClose?[4,this.onClose(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype._sendPing=function(){this.send(u.MessageBuilder[p.Protocol.PING](Date.now(),0))},t.prototype.startConnectionCycle=function(e){void 0===e&&(e=""),this.isConnected()||this.connectCycleRunning||(cc.log("[NGC_NetClient] Start connection cycle"),c.NgcPartyRoomManager.mustGoToPartyRoom()&&(e=c.NgcPartyRoomManager.getServerFromInviteLink()),this.cancelConnectCycle(),this.connectRetryCount=0,this.connect(e),this.schedule(this.connectCycleFunc,n.CONNECT_RETRY_TIME_SEC),this.connectCycleRunning=!0)},t.prototype.connectCycleFunc=function(){this.connected?this.cancelConnectCycle():(this.connectRetryCount++,this.connect())},t.prototype.cancelConnectCycle=function(){this.connectCycleRunning&&(this.unschedule(this.connectCycleFunc),this.connectCycleRunning=!1)},t.prototype.setServerTime=function(e){this.serverClockOffsetMS=Date.now()-e},t.prototype.isConnected=function(){return this.connected},t.prototype._onServerInit=function(e){var t=d.Server_Init.decode(e);this.clientID=t.clientID,this.onServerInit&&this.onServerInit(t),this.clientIDInit=!0,cc.log("[NGC_NetClient] Server init",t)},t.prototype.registerForBroadcastMessageType=function(e,t){var o=[];(o=this.broadcastMessageRoutingTable.hasOwnProperty(e)?this.broadcastMessageRoutingTable[e]:[]).indexOf(t)>=0||(o.push(t),this.broadcastMessageRoutingTable[e]=o)},t.prototype.removeBroadcastMessageType=function(e){this.broadcastMessageRoutingTable.hasOwnProperty(e)&&(this.broadcastMessageRoutingTable[e]=[])},t.prototype.handleNGCBroadcast=function(e){var t=d.NGC_Broadcast.decode(e),o=t.type,n=this.broadcastMessageRoutingTable[o];n?n.forEach(function(e){e(t)}):console.warn("Received unrecognized broadcast message of type "+o)},t.prototype.sendNgcBroadcast=function(e,t){this.send(u.MessageBuilder[p.Protocol.NGC_BROADCAST](e,this.getCombinedNetID(),t,Date.now()))},t.prototype.noteLatency=function(e){f.NgcNetStatsTracker.inst.reportPingRoundtripTime(e),this.latencyMovingHistory.push(e),this.latencyMovingHistory.length>=this.LATENCY_HISTORY_MAX_ENTRIES&&this.latencyMovingHistory.splice(0);for(var t=0,o=0;o<this.latencyMovingHistory.length;o++)t+=this.latencyMovingHistory[o];this.latencyMovingHistory.length>0&&(this.averageLatencyMS=t/this.latencyMovingHistory.length),y.default.inst.setTrackingParams({averagePing:Math.round(this.averageLatencyMS),currentPing:e}),y.default.inst.onMeasureLatency(this.averageLatencyMS)},t.prototype._onServerPing=function(e){var t=d.Ping.decode(e),o=h.fromValue(t.reqTime).toNumber(),n=h.fromValue(t.resTime).toNumber();if(0!==n){var r=Date.now();this.lastPongTime=r,this.recentPing=r-o,(this.recentPing<this.lowestPing||!this.calculatedDelta)&&(this.calculatedDelta=!0,this.lowestPing=this.recentPing,this.serverDelta=n-this.recentPing-o),this.noteLatency(this.recentPing),this.onServerPing&&this.onServerPing(t)}else this.send(u.MessageBuilder[p.Protocol.PING](t.reqTime,Date.now()))},t.prototype.exitGame=function(){this._onPreExitGame&&this._onPreExitGame(),this.sendLeaveGameMessage(),this._onPostExitGame&&this._onPostExitGame()},t.prototype.resolveSystemMessage=function(e,t){switch(e){case p.Protocol.SERVER_INIT:this._onServerInit(t);break;case p.Protocol.PING:this._onServerPing(t);break;case p.Protocol.NGC_BROADCAST:this.handleNGCBroadcast(t)}},t.prototype.checkJsonMessageData=function(e){var t=JSON.parse(e);g.NgcPartyRoom.inst&&g.NgcPartyRoom.inst.updateMessage(t)},t.prototype.update=function(){this.timeSinceLastMsg=Date.now()-this.lastMsgTime,this.timeSinceLastPong=Date.now()-this.lastPongTime},t.prototype.send=function(e){var t;null===(t=this.websocket)||void 0===t||t.send(e)},t.prototype.sendJoinGameMessage=function(e,t,o){void 0===t&&(t={}),void 0===o&&(o={});var n=u.MessageBuilder[p.Protocol.JOIN_ROOM](e,t,o);this.send(n)},t.prototype.sendLeaveGameMessage=function(){var e=u.MessageBuilder[p.Protocol.LEAVE_ROOM]();this.send(e)},t.prototype.isClientID=function(e){return n.DetachClientID(e)===this.clientID},t.prototype.isLocalPlayerID=function(e){return n.DetachPlayerID(e)===this.localPlayerID},t.prototype.getCombinedNetID=function(){return this.clientID+":"+this.localPlayerID},t.DetachClientID=function(e){return e.split(":").shift()},t.DetachPlayerID=function(e){return e.split(":").pop()},t.prototype.forceDisconnect=function(e){void 0===e&&(e=m.DisconnectReason.ForcedByClient),this.connected=!1,this.unschedule(this._sendPing),this.websocket.close(),this._onDisconnectedCB&&this._onDisconnectedCB(e)},t.prototype.setOnDisconnectedListener=function(e){e&&(this._onDisconnectedCB=e)},t.inst=null,t.PING_TIME_MS=1e3,t.CONNECT_RETRY_TIME_SEC=3,t.CONNECT_RETRY_MAX_COUNT=15,t.GAME_UPDATE_TIME_MS=200,t.CONNECTION_TIMEOUT=5e3,t.MAX_RETRY=5,n=i([b],t)}(cc.Component);o.NgcNetClientRefactor=N,cc._RF.pop()},{"../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../../../CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/PartyRoom/PartyRoom":"PartyRoom","../../../Services/Platform/Platform":"Platform","../BuildConfig":"BuildConfig","./Messaging/MessageBuilder":"MessageBuilder","./Messaging/MessageDefines":"MessageDefines","./Messaging/Protocol":"Protocol","./NetStatsTracker":"NetStatsTracker","./NetworkInterface":"NetworkInterface",long:57}],NgcNetClient:[function(e,t,o){"use strict";cc._RF.push(t,"9d867cIF1ZEn5Yj8ZZ31l+x","NgcNetClient");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNetClient=void 0;var c=e("../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager"),l=e("../../../Core/Utils"),u=e("../../../CrossFeatures/TechMessage/Script/TechMessages"),p=e("../../../SDK/Nano/NanoSrv"),d=e("../../../Services/Platform/Platform"),f=e("../BuildConfig"),h=e("./NetStatsTracker"),g=e("./NetworkInterface"),y=cc._decorator,m=y.ccclass,_=y.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onDisconnectedCB=null,t.broadcastMessageRoutingTable={},t.GAME_UPDATE_TIME_MS=200,t.serverAddress="ws://localhost:1337",t.wssCacert=null,t.localPlayerNetID="",t.connected=!1,t.webSocket=null,t.averageLatencyMS=0,t.latencyPingSampleCount=0,t.latencyMovingHistory=[],t.latencyHistroyNextIndexNumber=0,t.lastPongTime=0,t.timeSinceLastMsg=0,t.timeSinceLastPong=0,t.pingsSent=0,t.pongsRecd=0,t.messagesRecd=0,t.serverClockOffsetMS=0,t.LATENCY_HISTORY_MAX_ENTRIES=30,t.pingLog={},t.pongLog={},t.gameMode=!1,t.connectRetryCount=0,t.connectCycleRunning=!1,t.lastMsgTime=-1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){if(o.inst)console.error("More than one NetClient!!");else{o.inst=this;var e=p.default.inst&&p.default.inst.getCurGameInfo()&&p.default.inst.getCurGameInfo().gameServerURL||"";this.serverAddress=e||f.NgcBuildConfig.gameServerURL}},t.prototype.timeout=function(e){return new Promise(function(t){return setTimeout(t,e)})},t.prototype.isConnected=function(){return this.connected},t.prototype.startGameMode=function(){this.gameMode||(this.gameMode=!0,console.log("Scheduling send player state"),this.schedule(this.sendLocalPlayerGameState,this.GAME_UPDATE_TIME_MS/1e3))},t.prototype.getServerTime=function(){return Date.now()-this.serverClockOffsetMS},t.prototype.setServerTime=function(e){this.serverClockOffsetMS=Date.now()-e},t.prototype.stopGameMode=function(){this.gameMode=!1,this.unschedule(this.sendLocalPlayerGameState)},t.prototype.registerForBroadcastMessageType=function(e,t){var o=[];(o=this.broadcastMessageRoutingTable.hasOwnProperty(e)?this.broadcastMessageRoutingTable[e]:[]).indexOf(t)>=0||(o.push(t),this.broadcastMessageRoutingTable[e]=o)},t.prototype.removeBroadcastMessageType=function(e){this.broadcastMessageRoutingTable.hasOwnProperty(e)&&(this.broadcastMessageRoutingTable[e]=[])},t.prototype.localTimeToServer=function(e){return e},t.prototype._startUpdateLoop=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.gameMode?[4,this.timeout(this.GAME_UPDATE_TIME_MS)]:[3,2];case 1:return e.sent(),this.sendLocalPlayerGameState(),[3,0];case 2:return[2]}})})},t.prototype._sendWebsocketMessage=function(e){e instanceof Uint8Array&&d.NgcPlatform.inst.isSocketMessageUsingArrayBuffer()&&(e=l.Utils.convertUint8ArrayToArrayBuffer(e)),this.webSocket.send(e)},t.prototype.sendLocalPlayerGameState=function(){this._sendLocalPlayerGameState()},t.prototype.exitGame=function(){this._exitGame()},t.prototype.sendPing=function(){this._sendMessagePing()},t.prototype.broadcastMessage=function(e,t,o){this._broadcastMessage(e,t,o)},t.prototype.noteLatency=function(e){h.NgcNetStatsTracker.inst.reportPingRoundtripTime(e),this.latencyMovingHistory.push(e),this.latencyMovingHistory.length>=this.LATENCY_HISTORY_MAX_ENTRIES&&this.latencyMovingHistory.splice(0);for(var t=0,o=0;o<this.latencyMovingHistory.length;o++)t+=this.latencyMovingHistory[o];this.latencyMovingHistory.length>0&&(this.averageLatencyMS=t/this.latencyMovingHistory.length),u.default.inst.setTrackingParams({averagePing:this.averageLatencyMS,currentPing:e}),u.default.inst.onMeasureLatency(this.averageLatencyMS)},t.prototype.handleMessageBroadcast=function(e){var t=e.type,o=this.broadcastMessageRoutingTable[t];o?o.forEach(function(t){t(e)}):console.warn("Received unrecognized broadcast message of type "+t)},t.prototype.handleMessage_ServerFullGameState=function(e){this._handleMessage_ServerFullGameState(e)},t.prototype.handleMessage_ServerGameStartingStatus=function(e){this._handleMessage_ServerGameStartingStatus(e)},t.prototype.handleMessage_ServerOrderCreateBot=function(e){this._handleMessageBotCreationRequest(e)},t.prototype.requestToHostBot=function(e,t,o){this._requestToHostBot(e,t,o)},t.prototype.requestToJoinGame=function(e,t){void 0===e&&(e="-1"),void 0===t&&(t=""),this._sendMessageJoinGameRequest(e,t)},t.prototype.cancelConnectCycle=function(){this.connectCycleRunning&&(this.unschedule(this.connectCycleFunc),this.connectCycleRunning=!1)},t.prototype.connectCycleFunc=function(){if(this.connected)return console.log("Connected to server!"),void this.cancelConnectCycle();this.connectRetryCount++,this.tryConnectToServer()},t.prototype.startConnectCycle=function(e){void 0===e&&(e=""),console.log("Start connect cycle"),c.NgcPartyRoomManager.mustGoToPartyRoom()&&(e=c.NgcPartyRoomManager.getServerFromInviteLink()),this.cancelConnectCycle(),this.connectRetryCount=0,this.tryConnectToServer(e),this.schedule(this.connectCycleFunc,o.CONNECT_RETRY_TIME_SEC),this.connectCycleRunning=!0},t.prototype.onDisconnect=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this._onDisconnectedCB&&this._onDisconnectedCB(g.DisconnectReason.Server),[4,this._onDisconnect(e)];case 1:return t.sent(),[2]}})})},t.prototype.onError=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this._onError(e)];case 1:return t.sent(),[2]}})})},t.prototype.onConnect=function(){this._onConnect()},t.prototype.tryConnectToServer=function(e,t){void 0===e&&(e=null),void 0===t&&(t=function(){}),this._tryConnectToServer(e,t)},t.prototype.start=function(){},t.prototype.update=function(){this.timeSinceLastMsg=Date.now()-this.lastMsgTime,this.timeSinceLastPong=Date.now()-this.lastPongTime},t.prototype.forceDisconnect=function(e){void 0===e&&(e=g.DisconnectReason.ForcedByClient),console.log("Disconnected from server"),this.connected=!1,this.unschedule(this.sendPing),this.webSocket.close(),this._onDisconnectedCB&&this._onDisconnectedCB(e)},t.prototype.setOnDisconnectedListener=function(e){e&&(this._onDisconnectedCB=e)},t.PING_TIME_MS=1e3,t.inst=null,t.CONNECT_RETRY_TIME_SEC=3,t.CONNECT_RETRY_MAX_COUNT=15,i([_({type:cc.Asset})],t.prototype,"wssCacert",void 0),o=i([m],t)}(cc.Component);o.NgcNetClient=v,cc._RF.pop()},{"../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../../../Core/Utils":"Utils","../../../CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Platform/Platform":"Platform","../BuildConfig":"BuildConfig","./NetStatsTracker":"NetStatsTracker","./NetworkInterface":"NetworkInterface"}],NgcPlayer:[function(e,t,o){"use strict";cc._RF.push(t,"80e1e3AwJZAF5WJdELFOJzn","NgcPlayer"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],NgcRealPrizeManager:[function(e,t,o){"use strict";cc._RF.push(t,"b6982P22BdAs5+XCh0J3TSc","NgcRealPrizeManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../../../SDK/Nano/NanoSrv"),r=e("./RealPrizeDefines"),i=function(){function e(){if(this._isReceivedEventList=!1,this._eventList=[],this._eventState=r.PRIZE_STATE.NONE,e._instance)throw new Error("Error: Instantiation failed: Use NgcRealPrizeManager.getInstance() instead of new.");e._instance=this}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.getEventList=function(e){void 0===e&&(e=function(){}),console.log("@@@@@ getEventLisst "),this._isReceivedEventList=!1,this._eventList=[];var t=this;n.default.inst.serviceGet("/event/list",null,function(o,n){console.log("@@@ getEventList res ",n),console.log("@@@ getEventList err ",o),o||(t._isReceivedEventList=!0,t._handleEventInfo(n.data),e&&e())})},e.prototype._handleEventInfo=function(e){this._eventList=e,this._eventList=[],this._eventList.length,console.log("@@@ _handleEventInfo res "),this.setEventState(r.PRIZE_STATE.COMING_SOON)},e.prototype.isReceivedEventsInfo=function(){return this._isReceivedEventList},e.prototype.setEventState=function(e){console.log("@@@@@ setEventState ",e),this._eventState=e},e.prototype.getEventState=function(){return console.log("@@@@@ getEventState ",this._eventState),this._eventState},e._instance=new e,e}();o.default=i,cc._RF.pop()},{"../../../SDK/Nano/NanoSrv":"NanoSrv","./RealPrizeDefines":"RealPrizeDefines"}],NgcRedirectionDialog:[function(e,t,o){"use strict";cc._RF.push(t,"c7677p77IVG+5C1+QmpOQsE","NgcRedirectionDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Core/helpers"),s=e("../../../GameFramework/Scripts/BuildConfig"),c=e("../../../Services/Platform/Platform"),l=e("../../Dialogs/Script/DialogBase"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.qrCodeGroup=null,t.appStoreNode=null,t.ggpNode=null,t.qrSprite=null,t.closeBtnNode=null,t.nanoIcon=null,t}return r(t,e),t.prototype.start=function(){cc.sys.isMobile?window.addEventListener("resize",this.updateDialogPosition.bind(this)):cc.view.on("canvas-resize",this.updateDialogPosition.bind(this),this)},t.prototype.init=function(e){var t=this;if(void 0===e&&(e={}),this._redirectInfo=e,this.qrCodeGroup.active=!!e.qr_code,this.closeBtnNode.active=!!e.close_button,this.ggpNode.active=!!e.ggp_button,this.appStoreNode.active=!!e.appstore_button,e.qr_code){this._QRCodeShortenLink=e.qr_code_url;var o=this;c.NgcPlatform.inst.genQRCode(this._QRCodeShortenLink,function(e){o.createQRCode(e)})}e.app_logo&&(this._nanoLogoURL=e.app_logo,cc.assetManager.loadRemote(this._nanoLogoURL,function(e,o){if(e)throw new Error("[App Logo] Remote asset app logo is missing a valid URL");t.nanoIcon.spriteFrame=new cc.SpriteFrame(o)})),this.show(),this.updateDialogPosition()},t.prototype.updateDialogPosition=function(){var e=this.node.getComponent(cc.Widget);e.target=cc.find("Canvas"),e.top=s.NgcBuildConfig.services.Ads.bannerHeight*cc.view.getDesignResolutionSize().height/cc.view.getFrameSize().height,e.updateAlignment()},t.prototype.createQRCode=function(e){this.qrSprite.spriteFrame=e,console.log("@@@@ createQRCode ",e)},t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.closeOnClick=function(){this.hide()},t.prototype.openExternalLink=function(e){window.originalOpen?window.originalOpen(e):window.open(e)},t.prototype.onGGPBtnClick=function(){this._redirectInfo.ggp_page&&(this.openExternalLink(this._redirectInfo.ggp_page),a.sendTracking({type:a.TrackType.Vignette_Interaction,interaction_type:"click_GGP"}))},t.prototype.onAppStorePBtnClick=function(){this._redirectInfo.appstore_page&&(this.openExternalLink(this._redirectInfo.appstore_page),a.sendTracking({type:a.TrackType.Vignette_Interaction,interaction_type:"click_AppStore"}))},t.prototype.hide=function(){e.prototype.hide.call(this)},t.dialogType="NgcRedirectionDialog",t.urlPrefab="NgcRedirectionDialog",t.bundleName="02_techmessage_dialog",i([d(cc.Node)],t.prototype,"qrCodeGroup",void 0),i([d(cc.Node)],t.prototype,"appStoreNode",void 0),i([d(cc.Node)],t.prototype,"ggpNode",void 0),i([d(cc.Sprite)],t.prototype,"qrSprite",void 0),i([d(cc.Node)],t.prototype,"closeBtnNode",void 0),i([d(cc.Sprite)],t.prototype,"nanoIcon",void 0),i([p],t)}(l.NgcDialogBase);o.default=f,cc._RF.pop()},{"../../../Core/helpers":"helpers","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../Services/Platform/Platform":"Platform","../../Dialogs/Script/DialogBase":"DialogBase"}],NgcRedirection:[function(e,t,o){"use strict";cc._RF.push(t,"b99a3YDegxGToTxrbteKgbD","NgcRedirection");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.RedirectionType=void 0;var c,l=e("../../../../Scripts/Performance/OffFrameTasksMgr"),u=e("../../../Core/helpers"),p=e("../../../Core/Utils"),d=e("../../../GameFramework/Scripts/NgcUserInfo"),f=e("../../../SDK/Nano/NanoSrv"),h=e("../../../Services/Platform/Platform"),g=e("../../Dialogs/Script/NgcDialogManager"),y=e("../../GIF/CCGIF"),m=e("./NgcRedirectionDialog"),_=cc._decorator,v=_.ccclass,S=_.property;(function(e){e.Deactive="deactivated",e.Redirection_Popup="redirection_popup",e.Direct_Access="direct_access"})(c=o.RedirectionType||(o.RedirectionType={}));var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gifSp=null,t.response={main_menu_vignette:{desktop:{},mobile_browser:{},mobile_app:{},mobile_webview:{}},general:{ggp_page:"",appstore_page:"",vignette_thumbnail:"",qr_link:"",app_logo:""}},t._redirectionType=c.Deactive,t}return r(t,e),t.prototype.onLoad=function(){var e=this;cc.sys.isMobile||(this.node.getComponent(cc.Widget).right=.03),this.node.opacity=0,this.node.getComponent(cc.Button).interactable=!1,h.NgcPlatform.isOfflineMode()?this.node.active=!1:l.default.inst.addTask(function(){f.default.inst.serviceGet("/redirections",null,function(t,o){l.default.inst.addTask(function(t,o){if(t)e.node.active=!1;else{var n=JSON.parse(o);if(n.status){if(e.parseConfig(n.data||{}),!e.isSupportVignette())return void(e.node.active=!1);"/"===e.response.general.qr_link.charAt(e.response.general.qr_link.length-1)&&(e.response.general.qr_link=e.response.general.qr_link.slice(0,e.response.general.qr_link.length-1)),console.log("@@@@Redirection Response ",e.response);var r=n.data.general.vignette_thumbnail;e.node.addComponent(y.default).loadUrl(e.gifSp,r,function(){cc.tween(e.node).delay(1).to(.75,{opacity:255},{easing:"backOut"}).call(function(){e.node.getComponent(cc.Button).interactable=!0}).start()})}}},e,[t,o],"[LazyLoad] handle Redirection GIF")})},this,[],"[LazyLoad] load Redirection GIF")},t.prototype.parseConfig=function(e){this.response=e,h.NgcPlatform.isRunFromApp()?this.vignetteConfig=this.response&&this.response.main_menu_vignette&&this.response.main_menu_vignette.mobile_app||{}:cc.sys.isMobile?p.Utils.isRunningWithFacebookApp&&(this.vignetteConfig=this.response&&this.response.main_menu_vignette&&this.response.main_menu_vignette.mobile_browser||{}):this.vignetteConfig=this.response&&this.response.main_menu_vignette&&this.response.main_menu_vignette.desktop||{},this._redirectionType=this.vignetteConfig&&this.vignetteConfig.redirection||c.Deactive},t.prototype.isSupportVignette=function(){return this._redirectionType!==c.Deactive},t.prototype.onClickInstallBtn=function(){if(f.default.inst.sendTracking({type:u.TrackType.Install_App_Click}),cc.sys.isMobile){var e=p.Utils.getOSType()===p.OS_TYPE.ANDROID?this.response.general.ggp_page:this.response.general.appstore_page;cc.sys.openURL(e)}else{var t=u.getTrackingParams({type:u.TrackType.Vignette_Interaction,interaction_type:"qr",playerId:d.default.userIdKey}),o=new URLSearchParams(t).toString(),n=this.response.main_menu_vignette.desktop.redirection_popup||{},r={ggp_button:n.ggp_button,appstore_button:n.appstore_button,install_app:n.install_app,add_to_home_screen:n.add_to_home_screen,continue_to_browser:n.continue_to_browser,qr_code:n.qr_code,close_button:n.close_button,appstore_page:this.response.general.appstore_page,ggp_page:this.response.general.ggp_page,qr_code_url:""+f.default.inst.serviceURL+this.response.general.qr_link+"?"+o,app_logo:""+this.response.general.app_logo};a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,g.NgcDialogManager.create(m.default)];case 1:return e.sent().init(r),[2]}})})}},t.prototype.start=function(){},i([S(cc.Sprite)],t.prototype,"gifSp",void 0),i([v],t)}(cc.Component);o.default=b,cc._RF.pop()},{"../../../../Scripts/Performance/OffFrameTasksMgr":"OffFrameTasksMgr","../../../Core/Utils":"Utils","../../../Core/helpers":"helpers","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Platform/Platform":"Platform","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../GIF/CCGIF":"CCGIF","./NgcRedirectionDialog":"NgcRedirectionDialog"}],NgcRevive:[function(e,t,o){"use strict";cc._RF.push(t,"76644hQL+xH66s6O+MhbYN/","NgcRevive");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.REVIVE_NO_ADS_CURRENCY_NUMBER=o.REVIVE_NO_ADS_CURRENCY=o.NgcReviveData=o.REVIVE_ACTION=void 0;var c,l=e("../../../../../globals"),u=e("../../../../../Scripts/GameTrackingDataSupporter"),p=e("../../../../GameFramework/Scripts/Ads/NgcAdsManager"),d=e("../../../../GameFramework/Scripts/BuildConfig"),f=e("../../../../GameFramework/Scripts/NgcGame"),h=e("../../../../GameFramework/Scripts/NgcMain"),g=e("../../../../SDK/Nano/NanoSrv"),y=e("../../../../Services/Ads/Ads"),m=e("../../../Dialogs/Script/NgcDialogManager"),_=e("./ReviveDialog"),v=cc._decorator,S=v.ccclass,b=v.property;(function(e){e[e.NONE=-1]="NONE",e[e.NON_OFFER=0]="NON_OFFER",e[e.WATCHED=1]="WATCHED",e[e.REFUSE_OFFER=2]="REFUSE_OFFER"})(c=o.REVIVE_ACTION||(o.REVIVE_ACTION={}));o.NgcReviveData=function(){},o.REVIVE_NO_ADS_CURRENCY="coin",o.REVIVE_NO_ADS_CURRENCY_NUMBER=100;var N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.customRevivePrefab=null,t.reviveAdsStatus=null,t._canReviveFunc=null,t._acceptOfferFunc=null,t._refuseOfferFunc=null,t._offerCountDown=5,t._reviveDialogShowing=!1,t._offerAccepted=!1,t._checker="First",t._reviveAction=c.NON_OFFER,t._reviveData=null,t._freeOfferStatus=!0,t.tookFreeOffered=!1,t._trackingReviveShownTime=0,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"checker",{get:function(){return this._checker},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offerCountDown",{get:function(){return this._offerCountDown},enumerable:!1,configurable:!0}),t.prototype.setReviveAction=function(e){this._reviveAction=e},t.prototype.getReviveAction=function(){return this._reviveAction},t.prototype.getReviveData=function(){var e=g.default.inst&&g.default.inst.getCurGameInfo()&&g.default.inst.getCurGameInfo().gameParams||{};return this._reviveData=e&&e.revive||{},this._reviveData},t.prototype.onLoad=function(){o.inst?console.log("Duplicate NgcRevive Inst"):o.inst=this},t.prototype.isFreeOfferAvailable=function(){return this._freeOfferStatus},t.prototype.start=function(){},t.prototype.notUsingAdToRevive=function(){return!!(y.NgcAds.inst&&y.NgcAds.inst.isFakeAdsPlatform()||d.NgcBuildConfig.offlineMode)},t.prototype.getFreeOfferStatus=function(e){var t=this;if(void 0===e&&(e=null),d.NgcBuildConfig.alwaysOfferFreeRevive)e&&e(!0);else{if(d.NgcBuildConfig.offlineMode)return this._freeOfferStatus=l.default.OfflineMode.GetFreeOffer(),void(e&&e(l.default.OfflineMode.GetFreeOffer()));g.default.inst.serviceGet("/playerdata",null,function(o,n){o||(t._freeOfferStatus=JSON.parse(n).data._reviveFreeOfferStatus,null==t._freeOfferStatus&&(t._freeOfferStatus=!0),e&&e(t._freeOfferStatus))})}},t.prototype.tookFreeOffer=function(e){var t=this;if(void 0===e&&(e=null),d.NgcBuildConfig.alwaysOfferFreeRevive)e&&e();else{if(d.NgcBuildConfig.offlineMode)return l.default.OfflineMode.SetFreeOffer(!1),this.tookFreeOffered=!0,this._freeOfferStatus=!1,void(e&&e());g.default.inst.servicePost("/playerdata",JSON.stringify({_reviveFreeOfferStatus:!1}),function(o,n){o||(t._freeOfferStatus=!1,t.tookFreeOffered=!0,e&&e(n))})}},t.prototype.setReviveFunctions=function(e,t,o){this._canReviveFunc=e,this._acceptOfferFunc=t,this._refuseOfferFunc=o},t.prototype.useDefaultReviveCondition=function(){return!0},t.prototype.canRevive=function(e,t){var n=p.default.inst&&p.default.inst.isAdsPoincutAvailable(p.NgcPointcuts.videoReviveDialog,y.AdsType.VideoReward);if((d.NgcBuildConfig.offlineMode||y.NgcAds.inst&&y.NgcAds.inst.isFakeAdsPlatform()||n)&&!o.inst.isOfferAccepted()){if(this.useDefaultReviveCondition()){var r=this.getReviveData();return e<=r.maxRemainingPlayers&&e>=r.minRemainingPlayers&&t>=r.minScore}return this._canReviveFunc&&this._canReviveFunc()}return!1},t.prototype.acceptOffer=function(){this._checker="Repeat",this._offerAccepted=!0,this._reviveDialogShowing=!1,this._acceptOfferFunc&&this._acceptOfferFunc(),this.setReviveAction(c.WATCHED),this.isFreeOfferAvailable()&&o.inst.tookFreeOffer()},t.prototype.refuseOffer=function(){this.setReviveAction(c.REFUSE_OFFER),this._reviveDialogShowing=!1,this._refuseOfferFunc&&this._refuseOfferFunc()},t.prototype.showReviveDialog=function(){return a(this,void 0,void 0,function(){var e,t=this;return s(this,function(){return this._reviveDialogShowing=!0,e=function(){return a(t,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return this.customRevivePrefab?(e=cc.instantiate(this.customRevivePrefab),t=cc.find("Canvas"),e.parent=t,[3,3]):[3,1];case 1:return[4,m.NgcDialogManager.createExistedDialog(f.NgcGame.inst.reviveDialogPrefab)];case 2:e=n.sent(),n.label=3;case 3:return o=e.getComponent(_.default),this._offerCountDown=this.getReviveData().offerCountDown,o.init(this.acceptOffer.bind(this),this.refuseOffer.bind(this),this._offerCountDown),this._reviveDialogShowing=!0,h.NgcMain.setAppContext(h.AppContext.Revive),[2]}})})},"GameDistribution"===d.NgcBuildConfig.buildPlatform&&"First"===this.checker&&0==this._trackingReviveShownTime&&(u.default.inst.setSendTrackingGDReviveShown=!0,this._trackingReviveShownTime++),this._offerAccepted||this.getFreeOfferStatus(e),[2]})})},t.prototype.isReviveDialogShowing=function(){return this._reviveDialogShowing},t.prototype.isOfferAccepted=function(){return this._offerAccepted},t.prototype.reset=function(){this._checker="First",this._reviveDialogShowing=!1,this._offerAccepted=!1,this._reviveAction=c.NON_OFFER},t.inst=null,i([b(cc.Prefab)],t.prototype,"customRevivePrefab",void 0),o=i([S],t)}(cc.Component);o.default=N,cc._RF.pop()},{"../../../../../Scripts/GameTrackingDataSupporter":"GameTrackingDataSupporter","../../../../../globals":"globals","../../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../../GameFramework/Scripts/NgcGame":"NgcGame","../../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../../SDK/Nano/NanoSrv":"NanoSrv","../../../../Services/Ads/Ads":"Ads","../../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","./ReviveDialog":"ReviveDialog"}],NgcScreenBase:[function(e,t,o){"use strict";cc._RF.push(t,"8f06fH1qeVKHIcy0IL29h/h","NgcScreenBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../CrossFeatures/LiveReskin/NgcLiveReskin"),s=e("../../Services/Platform/Platform"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.screenIndex=0,t.poolID=0,t.rescaleNodes=[],t.backgroundWidget=null,t.lastScreenID=-1,t.currentScale=1,t.topBarHeight=0,t}return r(t,e),t.prototype.onLoad=function(){s.NgcPlatform.isOfflineMode()||this.applyReskinImages()},t.prototype.applyReskinImages=function(){this.node.getComponentsInChildren(cc.Sprite).forEach(function(e){var t=a.default.getReskinSpriteFrame(e.spriteFrame);t&&(e.spriteFrame=t)})},t.prototype.onActivate=function(){},t.prototype.onDeactivate=function(){this.backgroundWidget.target=null},t.prototype.reScale=function(){var e=this,t=Math.min(1,cc.winSize.width/cc.winSize.height*cc.view.getDesignResolutionSize().height/cc.view.getDesignResolutionSize().width);this.rescaleNodes.forEach(function(o){o&&(o.scale*=t/e.currentScale)}),this.currentScale=t},t.prototype.init=function(){},t.prototype.onPause=function(){},t.prototype.onResume=function(){},t.prototype.onTapDown=function(){},t.prototype.onTapUp=function(){},t.prototype.onKeyDown=function(){},t.prototype.onKeyUp=function(){},t.prototype.activate=function(e,t){void 0===t&&(t=null),this.node.active=e,e?(this.onActivate(),this.setTargetForBackgroundWidget(t),this.reScale()):this.onDeactivate()},t.prototype.setTargetForBackgroundWidget=function(e){this.backgroundWidget&&(this.backgroundWidget.target=e,this.backgroundWidget.isAlignLeft=!0,this.backgroundWidget.isAlignRight=!0,this.backgroundWidget.left=0,this.backgroundWidget.right=0,this.backgroundWidget.top=-this.topBarHeight,this.backgroundWidget.updateAlignment())},t.allScreens=[],i([u],t.prototype,"screenIndex",void 0),i([u],t.prototype,"poolID",void 0),i([u([cc.Node])],t.prototype,"rescaleNodes",void 0),i([u(cc.Widget)],t.prototype,"backgroundWidget",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../CrossFeatures/LiveReskin/NgcLiveReskin":"NgcLiveReskin","../../Services/Platform/Platform":"Platform"}],NgcScreenManager:[function(e,t,o){"use strict";cc._RF.push(t,"91c7cuwTHxAL5H0rx4XEo0j","NgcScreenManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.TransitionType=void 0;var a,s=e("../../Core/Utils"),c=e("../../CrossFeatures/Dialogs/Script/DialogBase"),l=e("../../SDK/Nano/NanoSrv"),u=e("../../Services/Ads/Ads"),p=e("../../Services/Platform/Platform"),d=e("../Scripts/Ads/NgcAdsManager"),f=e("../Scripts/BuildConfig"),h=e("../Scripts/NgcScreenBase"),g=cc._decorator,y=g.ccclass,m=g.property;(function(e){e[e.Slide=0]="Slide",e[e.Immediately=1]="Immediately",e[e.FadeIn=2]="FadeIn"})(a=o.TransitionType||(o.TransitionType={}));var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MainScreenWidget=null,t.TopBannerWidget=null,t.TabBarWidget=null,t.NavBarWidget=null,t.SystemNoticeWidget=null,t.loadingNode=null,t.curScreenContainer=null,t.nextScreenContainer=null,t.transitionNode=null,t.navBarPrefab=null,t.tabBarPrefab=null,t.canvas=null,t.screenPrefabs=[],t.defaultScreenPrefab=null,t.screenPools=[],t.menuPageview=null,t.gameplayContainer=null,t._isSwitching=!1,t._topBannerIsActive=!1,t._tabBarIsActive=!1,t._disableAlignment=!1,t.currentScreen=null,t.liveOpsTabOrder=null,t.tabBarNode=null,t.navBarNode=null,t.navBarIconNode=null,t.blockInputComp=null,t._tabBarInitState=!1,t._menuNodePool={},t.needLoadPointcutData=!1,t.allowPoincuts=[],t._disablePageEvent=!1,t._pageTurningCallback=null,t._disableTabSwipe=!1,t.lastPageIndex=-1,t._bannerActiveBefore=!1,t._pageViewScrolling=!1,t._tabBar=null,t._scrollToPageDisabled=!1,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"isSwitching",{get:function(){return this._isSwitching},set:function(e){this._isSwitching=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"topBannerIsActive",{get:function(){return this._topBannerIsActive},set:function(e){this._topBannerIsActive=e,this.TopBannerWidget.node.active=e,this.resizeBannerContainer(),this.updateAlignment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tabBarIsActive",{get:function(){return this._tabBarIsActive},set:function(e){this._tabBarIsActive!==e&&(this._disableAlignment||(this._tabBarIsActive=e,this.TabBarWidget.node.active=e,this.updateAlignment()))},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){if(o.inst)console.error("More than one NgcScreenManager instance");else{o.inst=this,cc.view.on("canvas-resize",this.updateAlignmentOnResize.bind(this),this),this.createBlockInputLayer(),cc.sys.isNative&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this);var e=!p.NgcPlatform.isOfflineMode()&&l.default.inst&&l.default.inst.getCurGameInfo()&&l.default.inst.getCurGameInfo().gameParams||null;e?this.liveOpsTabOrder=e.tabBar.tabOrder:cc.error("LiveOps Tab Bar Config Not Found!"),this.createImportantObjects()}},t.prototype.createImportantObjects=function(){this.createNavBar(),this.createTabBar()},t.prototype.createTabBar=function(){this.tabBarNode=cc.instantiate(this.tabBarPrefab);var e=this.node.getChildByName("TabBar"),t=e.getSiblingIndex();this.node.insertChild(this.tabBarNode,t),this.TabBarWidget=this.tabBarNode.getComponent(cc.Widget),e.destroy()},t.prototype.setNavBarIconNode=function(e){this.navBarIconNode=e},t.prototype.createNavBar=function(){this.navBarNode=cc.instantiate(this.navBarPrefab);var e=this.node.getChildByName("NavBar"),t=e.getSiblingIndex();this.node.insertChild(this.navBarNode,t),this.NavBarWidget=this.navBarNode.getComponent(cc.Widget),e.destroy()},t.prototype.customBundleNameList=function(){return[]},t.prototype.onKeyDown=function(e){cc.log("[NGCscreenmanager]onkeydown ",e.keyCode),(e.keyCode==cc.macro.KEY.back||cc.macro.KEY.backspace)&&c.NgcDialogBase.hasDialogShowing||this.currentScreen&&this.currentScreen.onKeyDown(e)},t.prototype.createBlockInputLayer=function(){this.blockInputComp=this.transitionNode.addComponent(cc.BlockInputEvents),this.blockInputComp.enabled=!1},t.prototype.setTouchStatus=function(e){this.blockInputComp.enabled=!e},t.prototype.currentTouchStatus=function(){return this.blockInputComp.enabled},Object.defineProperty(t.prototype,"tabBarInitState",{get:function(){return this._tabBarInitState},enumerable:!1,configurable:!0}),t.prototype.init=function(e,t){for(var o in void 0===e&&(e=!1),void 0===t&&(t=!1),this.screenPrefabs)this.screenPools.push(new cc.NodePool);this.topBannerIsActive=e,this.tabBarIsActive=t,this._tabBarInitState=t,this.updateAlignment(),this.initPageViewScreens()},t.prototype.onBeforeInitPageview=function(){},t.prototype.pageOrder=function(){return null},t.prototype.defaultPageOrder=function(){return null},t.prototype.gamePlayScreens=function(){return null},t.prototype.screenPointcuts=function(){return[d.NgcPointcuts.bannerShop,d.NgcPointcuts.bannerLeaderboard,d.NgcPointcuts.bannerMainMenu,d.NgcPointcuts.bannerPartyRoom,d.NgcPointcuts.bannerRealPrize]},t.prototype.initPageViewScreens=function(){var e=this;this.onBeforeInitPageview();try{this.allowPoincuts=d.default.inst.getAllowedPointcut()||[]}catch(s){this.allowPoincuts=[],this.needLoadPointcutData=!0,console.warn("Cant load pointcut data here.")}this.topBannerIsActive=!1,this.TopBannerWidget.node.opacity=0,this.menuPageview.node.on("page-turning",this.onPageTurning,this),this.menuPageview.node.on("scroll-began",this.onPageScrollingBegin,this),this.menuPageview.node.on("scroll-ended",this.onPageScrollEnd,this);var t=this.menuPageview.content,o=this.MainScreenWidget;o.top=0,o.bottom=this.TabBarWidget.node.height,o.updateAlignment();var n=new cc.Node("TemporaryNode");n.addComponent(cc.BlockInputEvents),this.menuPageview.node.parent.addChild(n,-1,"Temporary node"),n.opacity=0,this.defaultPageOrder().forEach(function(t){var o=e.getScreen(t);o.node.parent=n,e._menuNodePool[o.poolID]=o.node});for(var r=this.pageOrder().length,i=0;i<5-r;i++){var a=this.menuPageview.content.children[0];this.menuPageview.content.removeChild(a,!0)}this.pageOrder().forEach(function(n,r){var i,a=e.getScreen(n);e._menuNodePool[a.poolID]=a.node,a.node.screenIndex=r;var s=t.children[r];s.width=o.node.width,s.height=o.node.height;var c=s.getComponent(cc.Widget),l=e.screenPointcuts()[r];-1!==(null===(i=e.allowPoincuts)||void 0===i?void 0:i.indexOf(l))&&(c.top=e.getTopBarHeight(),c.updateAlignment()),a.node.parent=s,a.node.getComponent(cc.Widget).updateAlignment(),a.pageNode=s,a.needActivate=!0,a.topBarHeight=e.getTopBarHeight(),a.reScale(),s.opacity=0}),this.menuPageview.content.getComponent(cc.Layout).updateLayout(),this.MainScreenWidget.enabled=!1,this.onAfterInitPageview()},t.prototype.updateAlignmentOnResize=function(){this.updateAlignment(),this.resizePageView(),this.checkResizeNavBarWidget(this.currentScreen,!1)},t.prototype.resizePageView=function(){var e=this.MainScreenWidget;for(var t in e.updateAlignment(),this.menuPageview.getComponent(cc.Widget).updateAlignment(),this._menuNodePool){var o=this._menuNodePool[t],n=o.parent;n.width=e.node.width,n.height=e.node.height;var r=n.getComponent(cc.Widget),i=o.screenIndex,a=this.screenPointcuts()[i];-1!==this.allowPoincuts.indexOf(a)&&(r.top=this.getTopBarHeight(),r.updateAlignment()),o.parent=n,o.getComponent(cc.Widget).updateAlignment();var s=o.getComponent(h.default);s.topBarHeight=this.getTopBarHeight(),s.setTargetForBackgroundWidget(n),s.reScale()}this.menuPageview.content.getComponent(cc.Layout).updateLayout(),this.menuPageview.scrollToPage(this.menuPageview.getCurrentPageIndex(),.01),this._tabBar.updateTabButtons(!1)},t.prototype.disablePageviewSwipe=function(){this.menuPageview.enabled=!1},t.prototype.enablePageviewSwipe=function(){this.menuPageview.enabled=!0},t.prototype.onAfterInitPageview=function(){},t.prototype.canSwitchToOtherScreen=function(){return!this.menuPageview.isAutoScrolling()},t.prototype.getScreenByPageId=function(e){var t=this.menuPageview.content.children[e];return t.children[0]?t.children[0].getComponent(h.default):null},t.prototype.hideAllScreens=function(e){if(!this._pageViewScrolling){var t=this.menuPageview.content;e.opacity=255,t.children.forEach(function(t){e!==t&&(t.opacity=0)})}},t.prototype.showAllScreens=function(){this.menuPageview.content.children.forEach(function(e){e.opacity=255})},t.prototype.clearPageTurningCallback=function(){this._pageTurningCallback&&(this.unschedule(this._pageTurningCallback),this._pageTurningCallback=null)},t.prototype.onPageTurning=function(e,t){var o=this;void 0===t&&(t=!0),e||(e=this.menuPageview),this.clearPageTurningCallback();var n=this.getScreenByPageId(e.getCurrentPageIndex());n&&(this._scrollToPageDisabled=!0,t&&!this._disableTabSwipe&&(this._tabBar.forceSwitchTab(),this._tabBar.selectTabByIndex(e.getCurrentPageIndex())),this._disableTabSwipe=!1,this._pageTurningCallback=function(){o.hideAllScreens(n.node.parent),o._scrollToPageDisabled=!1},this._tabBar.node.opacity=255,this.scheduleOnce(this._pageTurningCallback,.5),this._pageViewScrolling=!1)},t.prototype.onPageScrollingBegin=function(e){var t;if(this._pageViewScrolling)return this.showAllScreens(),this._tabBar.forceSwitchTab(),void this._tabBar.selectTabByIndex(e.getCurrentPageIndex());e||(e=this.menuPageview),this.lastPageIndex=this.menuPageview.getCurrentPageIndex(),this.clearPageTurningCallback(),null===(t=this._tabBar)||void 0===t||t.clearAfterSwitchCallback();var o=this.menuPageview.content,n=e.getCurrentPageIndex(),r=(o.children[n],o.children[n-1]),i=o.children[n+1];r&&(r.opacity=255),i&&(i.opacity=255),this._pageViewScrolling=!0},t.prototype.onPageScrollEnd=function(e){this.lastPageIndex===e.getCurrentPageIndex()&&this.hideAllScreens(this.currentScreen.node.parent)},t.prototype.getPageIndexByScreenID=function(e){return this.pageOrder().indexOf(e)},t.prototype.getTopBarHeight=function(){return f.NgcBuildConfig.services.Ads.bannerHeight*cc.view.getDesignResolutionSize().height/cc.view.getFrameSize().height},t.prototype.resizeBannerContainer=function(){if(this.topBannerIsActive){var e=f.NgcBuildConfig.services.Ads.bannerHeight*cc.view.getDesignResolutionSize().height/cc.view.getFrameSize().height;this.TopBannerWidget.node.height!=e&&(this.TopBannerWidget.node.height=e,this.updateAlignment())}},t.prototype.getScreen=function(e){if(this._menuNodePool[e])return this._menuNodePool[e].getComponent(h.default);var t=this.screenPools[e].get();if(!t){var o=this.screenPrefabs[e]?this.screenPrefabs[e]:this.defaultScreenPrefab;t=cc.instantiate(o)}return t.getComponent(h.default).poolID=e,t.getComponent(h.default)},t.prototype.replaceScreen=function(e,t){var o,n=this.pageOrder().findIndex(function(e){return e===t});e.getComponent(h.default).poolID=t;var r=e.getComponent(h.default);this._menuNodePool[r.poolID]=r.node,r.node.screenIndex=n;var i=this.menuPageview.content,a=this.MainScreenWidget,s=i.children[n];if(s){s.removeAllChildren(!0),s.width=a.node.width,s.height=a.node.height;var c=s.getComponent(cc.Widget),l=this.screenPointcuts()[n];-1!==(null===(o=this.allowPoincuts)||void 0===o?void 0:o.indexOf(l))&&(c.top=this.getTopBarHeight(),c.updateAlignment()),r.node.parent=s,r.node.getComponent(cc.Widget).updateAlignment(),r.pageNode=s,r.needActivate=!0,r.topBarHeight=this.getTopBarHeight(),r.reScale()}},t.prototype.setTabBar=function(e){this._tabBar=e},t.prototype.takeScreenshot=function(e){var t=new cc.Node("Screenshot"),o=t.addComponent(cc.Sprite),n=s.Utils.getScreenshotTexture(e),r=new cc.SpriteFrame(n);return o.spriteFrame=r,t.scaleY=-1,t},t.prototype.isNonPageviewScreen=function(e){return-1===this.pageOrder().indexOf(e)},t.prototype.switchScreen=function(e,t,o){var n,r=this;void 0===t&&(t=a.FadeIn);var i=this.getScreen(e),s=this.currentScreen;if(d.default.inst?d.default.inst.hide():this.hideBanner(),this.isSwitching=!0,i.lastScreenID=s?s.poolID:-1,this.isNonPageviewScreen(e))s&&this.isNonPageviewScreen(s.poolID)?(s.activate(!1),i.node.parent=this.gameplayContainer,i.node.opacity=0,cc.tween(s.node).to(.25,{opacity:0}).call(function(){r.screenPools[s.poolID].put(s.node),cc.tween(i.node).to(.25,{opacity:255}).call(function(){i.activate(!0,r.canvas.node),r.isSwitching=!1,o&&o()}).start()}).start()):(this.gameplayContainer.active=!0,i.node.parent=this.gameplayContainer,i.node.opacity=0,cc.tween(this._tabBar.node).to(.25,{opacity:0}).start(),cc.tween(this.menuPageview.node).to(.25,{opacity:0}).call(function(){r.menuPageview.node.active=!1,s&&s.onPause(),cc.tween(i.node).to(.25,{opacity:255}).call(function(){i.activate(!0,r.canvas.node),r.isSwitching=!1,o&&o()}).start()}).start());else if(s&&this.isNonPageviewScreen(s.poolID))s.activate(!1),cc.tween(s.node).to(.25,{opacity:0}).call(function(){var t;r.screenPools[s.poolID].put(s.node),r.gameplayContainer.active=!1,r.menuPageview.node.active=!0,i.needActivate?(i.activate(!0,i.pageNode),i.needActivate=!1):i.onResume(),null===(t=r._tabBar)||void 0===t||t.updateTabPlacementByScreenID(e,!1),r.menuPageview.node.opacity=0,cc.tween(r._tabBar.node).to(.25,{opacity:255}).start(),cc.tween(r.menuPageview.node).to(.25,{opacity:255}).call(function(){r.isSwitching=!1,o&&o(),r.menuPageview.scrollToPage(r.getPageIndexByScreenID(e),.1)}).start()}).start();else{cc.tween(this._tabBar.node).to(.25,{opacity:255}).start(),i.node.parent.opacity=255,null==s||s.onPause();var c=a.Immediately?0:.5;this._tabBar&&(c=this._tabBar.tweenDuration+.15),null===(n=this._tabBar)||void 0===n||n.updateTabPlacementByScreenID(e,!0),this._scrollToPageDisabled?c=.15:this.menuPageview.scrollToPage(this.getPageIndexByScreenID(e),c),this._scrollToPageDisabled=!1,setTimeout(function(){r.isSwitching=!1,i.needActivate?(i.activate(!0,i.pageNode),i.needActivate=!1):i.onResume(),o&&o()},1e3*c)}this.checkResizeNavBarWidget(i),this.currentScreen=i},t.prototype.checkResizeNavBarWidget=function(e,t){var o;if(void 0===t&&(t=!1),e&&e.node&&e.node.screenIndex){var n=e.node.screenIndex;if(t){var r=this.screenPointcuts()[n];-1!==(null===(o=this.allowPoincuts)||void 0===o?void 0:o.indexOf(r))?this.NavBarWidget.top=this.getTopBarHeight():this.NavBarWidget.top=0}else this.NavBarWidget.top=u.NgcAds.inst&&u.NgcAds.inst.isBannerShowing?this.getTopBarHeight():0;this.NavBarWidget.bottom=this.MainScreenWidget.bottom,this.NavBarWidget.node.getComponentsInChildren(cc.Widget).forEach(function(e){e.enabled&&e.updateAlignment()})}},t.prototype.updateAlignment=function(){this.MainScreenWidget.top=0,this.MainScreenWidget.bottom=this.tabBarIsActive?this.TabBarWidget.node.height:0,this.MainScreenWidget.node.getComponentsInChildren(cc.Widget).forEach(function(e){e.enabled&&e.updateAlignment()}),this.NavBarWidget.top=this.MainScreenWidget.top,this.NavBarWidget.bottom=this.MainScreenWidget.bottom,this.curScreenContainer.width=this.nextScreenContainer.width=this.MainScreenWidget.node.width,this.curScreenContainer.height=this.nextScreenContainer.height=this.MainScreenWidget.node.height},t.prototype.showTabBar=function(){this.tabBarIsActive=!0},t.prototype.hideTabBar=function(){this.tabBarIsActive=!1},t.prototype.showBanner=function(){this.topBannerIsActive=!0},t.prototype.hideBanner=function(){this.topBannerIsActive=!1},t.prototype.startFadeOut=function(e,t){void 0===e&&(e=.5),cc.tween(this.MainScreenWidget.node).to(e,{opacity:0}).call(function(){t&&t()}).start()},t.prototype.startFadeIn=function(e,t){void 0===e&&(e=.5),cc.tween(this.MainScreenWidget.node).to(e,{opacity:255}).call(function(){t&&t()}).start()},t.prototype.update=function(){this.resizeBannerContainer(),this.updateLoadBannerPointcuts()},t.prototype.updateLoadBannerPointcuts=function(){if(this.needLoadPointcutData){try{this.allowPoincuts=d.default.inst.getAllowedPointcut()||[]}catch(e){console.warn("Fail to load pointcut data.",e)}this.allowPoincuts&&0!==this.allowPoincuts.length&&(this.updateAlignmentOnResize(),this.needLoadPointcutData=!1)}},t.inst=null,i([m(cc.Widget)],t.prototype,"MainScreenWidget",void 0),i([m(cc.Widget)],t.prototype,"TopBannerWidget",void 0),i([m(cc.Widget)],t.prototype,"TabBarWidget",void 0),i([m(cc.Widget)],t.prototype,"NavBarWidget",void 0),i([m(cc.Widget)],t.prototype,"SystemNoticeWidget",void 0),i([m(cc.Node)],t.prototype,"loadingNode",void 0),i([m(cc.Node)],t.prototype,"curScreenContainer",void 0),i([m(cc.Node)],t.prototype,"nextScreenContainer",void 0),i([m(cc.Node)],t.prototype,"transitionNode",void 0),i([m(cc.Prefab)],t.prototype,"navBarPrefab",void 0),i([m(cc.Prefab)],t.prototype,"tabBarPrefab",void 0),i([m(cc.Canvas)],t.prototype,"canvas",void 0),i([m(cc.Prefab)],t.prototype,"screenPrefabs",void 0),i([m(cc.Prefab)],t.prototype,"defaultScreenPrefab",void 0),i([m(cc.PageView)],t.prototype,"menuPageview",void 0),i([m(cc.Node)],t.prototype,"gameplayContainer",void 0),o=i([y],t)}(cc.Component);o.default=_,cc._RF.pop()},{"../../Core/Utils":"Utils","../../CrossFeatures/Dialogs/Script/DialogBase":"DialogBase","../../SDK/Nano/NanoSrv":"NanoSrv","../../Services/Ads/Ads":"Ads","../../Services/Platform/Platform":"Platform","../Scripts/Ads/NgcAdsManager":"NgcAdsManager","../Scripts/BuildConfig":"BuildConfig","../Scripts/NgcScreenBase":"NgcScreenBase"}],NgcShopManager:[function(e,t,o){"use strict";cc._RF.push(t,"f353c0Msm1KariDzKDPduO5","NgcShopManager");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcShopManager=o.NgcItemCategoryInfo=o.NgcItemTabInfo=o.NgcItemShopStructure=void 0;var i=e("../../Core/Delegate"),a=e("../../CrossFeatures/DeliveryReward/Script/DeliveryRewardAnimation"),s=e("../../CrossFeatures/Dialogs/Script/NgcDialogManager"),c=e("../../CrossFeatures/EdgeExclusive/Script/EdgeExclusiveManager"),l=e("../../CrossFeatures/ItemShop/Script/NgcAchievementHelper"),u=e("../../CrossFeatures/TabBar/Script/NgcTabBarManager"),p=e("../../Services/GameShop/GameShop"),d=e("../../Services/Inventory/Inventory"),f=e("../../Services/Telemetry/Telemetry"),h=e("./Ads/NgcAdsManager"),g=e("./NgcItemInfoManager");o.NgcItemShopStructure=function(){};var y=function(){};o.NgcItemTabInfo=y;var m=function(){};o.NgcItemCategoryInfo=m;var _=function(){function e(){this._itemShopStructure={tabs:[]},this._itemPreviewCallback=new i.default,this._itemEquipCallback=new i.default,this._currencyIDList=[],this._currencyUpdateCallback=new i.default,this._currencyList=[],this._hasBrandNewItem=!1,this._displayAnimItemQueue=[],this._counter={},this.buyingItem=!1}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.resetItemClickCounter=function(){this._counter={}},e.prototype.increaseItemClickCounter=function(e){return this._counter[e]=this._counter[e]||0,this._counter[e]+=1,this._counter[e]},Object.defineProperty(e.prototype,"HasBrandNewItem",{get:function(){return this._hasBrandNewItem},enumerable:!1,configurable:!0}),e.prototype.loadData=function(e,t){var o=this,n=function(){o.generateItemShopStructure(),o.checkInit(),t&&t(),g.NgcItemInfoManager.getInstance().deleteFinishLoadingCallback(n)};g.NgcItemInfoManager.getInstance().isStartedLoading=!1,g.NgcItemInfoManager.getInstance().loadData(e),g.NgcItemInfoManager.getInstance().registerFinishLoadingCallback(n)},e.prototype.setUI=function(e){this._itemContainer=e,this.checkInit()},e.prototype.setNumberOfItemInRow=function(e){this._itemContainer.setNumberOfItemInRow(e)},e.prototype.registerCurrencyUpdate=function(e,t){this._currencyIDList=e,this._currencyUpdateCallback.add(t)},e.prototype.registerItemPreviewCallback=function(e){this._itemPreviewCallback.add(e)},e.prototype.registerItemEquipCallback=function(e){this._itemEquipCallback.add(e)},e.prototype.getCurrencyCountByID=function(e){var t=this._currencyList.find(function(t){return t.itemID===e});return null==t?0:t.count},Object.defineProperty(e.prototype,"IsInitialized",{get:function(){return this.IsGeneratedItemShopStructure&&null!=this._itemContainer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"IsGeneratedItemShopStructure",{get:function(){return this._itemShopStructure.tabs.length>0},enumerable:!1,configurable:!0}),e.prototype.checkInit=function(){this.IsInitialized&&(this._itemContainer.init(this._itemShopStructure),this.updateCurrency())},e.prototype.generateItemShopStructure=function(){var e=this;this._itemShopStructure={tabs:[]},g.NgcItemInfoManager.getInstance().ItemInfoList.forEach(function(t){return t.itemStatusType!=g.NgcItemStatusType.None&&e.addToItemStructure(t)});var t=["bundle",c.EDGE_CATEGORY];this.setTabsPriority(t),this.checkHasBrandNewItem()},e.prototype.addToItemStructure=function(e,t){var o=this.findTab(t||e.category,this._itemShopStructure.tabs),n=this.findCategory(e.subCategory,o.categories);0==n.items.includes(e)&&n.items.push(e),1==o.categories.length&&"UNNAME_CATEGORY"==o.categories[0].cateNameKey?o.categories[0].shouldDisplay=!1:o.categories.forEach(function(e){return e.shouldDisplay=!0})},e.prototype.findTab=function(e,t){var o=t.find(function(t){return t.tabNameKey===e});return o||((o=new y).tabNameKey=e,o.categories=[],t.push(o)),o},e.prototype.findCategory=function(e,t){var o=t.find(function(t){return t.cateNameKey===e});return o||((o=new m).cateNameKey=e,o.items=[],t.push(o)),o},e.prototype.setTabsPriority=function(e){for(var t=function(e){var t=o._itemShopStructure.tabs.findIndex(function(t){return t.tabNameKey===e});if(t>-1){var n=o._itemShopStructure.tabs.splice(t,1)[0];o._itemShopStructure.tabs.unshift(n)}},o=this,n=0,r=e;n<r.length;n++)t(r[n])},e.prototype.checkHasBrandNewItem=function(){this.checkTabHasBrandNewItem(),this.checkShopHasBrandNewItem()},e.prototype.checkTabHasBrandNewItem=function(){this._itemShopStructure.tabs.forEach(function(e){var t=!1;e.categories.forEach(function(e){return e.items.forEach(function(e){!e.isBundle&&e.isBrandNew&&(t=!0)})}),e.hasBrandNewItem=t})},e.prototype.checkShopHasBrandNewItem=function(){var e=this;this._hasBrandNewItem=!1,this._itemShopStructure.tabs.forEach(function(t){t.hasBrandNewItem&&(e._hasBrandNewItem=!0)}),u.NgcTabBarManager.inst&&u.NgcTabBarManager.inst.updateTabButtons(!1)},e.prototype.updateCurrency=function(e){var t=this;this._currencyList=[],this._currencyIDList.forEach(function(o){d.NgcInventory.inst.getItemCount(o,function(n,r){if(!n&&r){var i={itemID:o,count:r.count};t._currencyList.push(i),t._currencyList.length===t._currencyIDList.length&&(t._currencyUpdateCallback.call(t._currencyList),e&&e())}})})},e.prototype.includeItem=function(e){return g.NgcItemInfoManager.getInstance().includeSingleItem(e)},e.prototype.previewItem=function(e){this._itemPreviewCallback.call(e)},e.prototype.equipItem=function(e){g.NgcItemInfoManager.getInstance().updateEquippedItem(e),this._itemContainer.refresh(),this._itemEquipCallback.call(e)},e.prototype.updateBoughtItem=function(e){g.NgcItemInfoManager.getInstance().updateBoughtItem(e),g.NgcItemInfoManager.getInstance().updateBrandNewItem(e,!0),this.checkHasBrandNewItem(),this._itemContainer.refresh()},e.prototype.removeBrandItem=function(e){g.NgcItemInfoManager.getInstance().updateBrandNewItem(e,!1),this.checkHasBrandNewItem(),this._itemContainer.refresh()},e.prototype.unequipItem=function(e){g.NgcItemInfoManager.getInstance().updateUnequippedItem(e),this._itemContainer.refresh()},e.prototype.updateEquippedItemList=function(e){g.NgcItemInfoManager.getInstance().updateEquippedItemList(e),this._itemContainer.refresh()},e.prototype.achievementAddTo=function(e,t){l.NgcAchievementHelper.getInstance().addTo(e,t)},e.prototype.achievementAddMore=function(e,t){l.NgcAchievementHelper.getInstance().addMore(e,t)},e.prototype.checkRemoveEliminatedBundle=function(){g.NgcItemInfoManager.getInstance().isThereEliminatedBundle()&&(this.generateItemShopStructure(),this._itemContainer.updateItemStructure(this._itemShopStructure))},e.prototype.showItemBoughtAnim=function(e){var t=this,o=this._displayAnimItemQueue.shift();o&&(a.default.inst.showRewardAnimation(o,null,!1),setTimeout(function(){t._displayAnimItemQueue.length>0?t.showItemBoughtAnim(e):e&&e()},1200))},e.prototype.onItemBought=function(e){this.updateBoughtItem(e);var t=g.NgcItemInfoManager.getInstance().getSingleItemInfo(e),o=p.NgcGameShop.inst.getItems(t.bundleID);this._displayAnimItemQueue.push(o[0])},e.prototype.getTrackingModeOfPayment=function(e){switch(e){case g.NgcItemStatusType.IAP:return"IAP";case g.NgcItemStatusType.WatchAds:return"Ads";case g.NgcItemStatusType.Achievement:return"Achievement";case g.NgcItemStatusType.LikeSocial:return"Follow";case g.NgcItemStatusType.Currency:return"Currency";case g.NgcItemStatusType.EdgeExclusive:return"EdgeExclusive";default:return"Others"}},e.prototype.onPlayerPurchaseItemTrackEvent=function(e,t){void 0===t&&(t=1);var o={itemPurchaseID:"",itemPurchaseValue:t,itemSpentID:e.price.currency,modeOfPayment:"",itemSpentValue:e.price.value};e instanceof g.NgcSingleItemInfo?o.itemPurchaseID=e.itemID:o.itemPurchaseID=e.bundleID,o.modeOfPayment=this.getTrackingModeOfPayment(e.itemStatusType),f.NgcTelemetry.inst.LogEvent_PurchaseItem(o)},e.prototype.onPlayerPurchaseCollectItemTrackEvent=function(e,t,o,n){void 0===n&&(n=1);var r={itemPurchaseID:e,itemPurchaseValue:n,modeOfPayment:"",bundleID:t};r.modeOfPayment=this.getTrackingModeOfPayment(o),f.NgcTelemetry.inst.LogEvent_CollectPurchaseItem(r)},e.prototype.buyItem=function(e){var t=this;this.buyingItem||(this.buyingItem=!0,p.NgcGameShop.inst.buyBundle(e.bundleID,function(o,n){!o&&n?d.NgcInventory.inst.forceFetchInventory().then(function(){t.onPlayerPurchaseItemTrackEvent(e);var o=null;if(e instanceof g.NgcSingleItemInfo){var n=e;t.onPlayerPurchaseCollectItemTrackEvent(n.itemID,"null",n.itemStatusType,1),t.onItemBought(n.itemID),o=n.itemID}else{var r=e;e.itemIDs.forEach(function(e){t.onPlayerPurchaseCollectItemTrackEvent(e,r.bundleID,r.itemStatusType,1),t.onItemBought(e)})}t.updateShop(),t.showItemBoughtAnim(function(){t.checkRemoveEliminatedBundle(),o&&t.equipItem(o),t.buyingItem=!1})}):t.buyingItem=!1}))},e.prototype.watchAds=function(e){var t=this,o=function(o,n){!o&&n&&d.NgcInventory.inst.getItemCount(e.price.currency,function(o,n){!o&&n&&(n.count>=e.price.value?t.buyItem(e):(t.onPlayerPurchaseItemTrackEvent(e),t.updateShop()))})};h.default.inst.showRewardVideo(h.NgcPointcuts.videoShopReward,e.price.currency,1,null,function(i){return n(t,void 0,void 0,function(){var t;return r(this,function(){return i?d.NgcInventory.inst.addItem(e.price.currency,1,o):(t=this._itemContainer._interactionButton.node,s.NgcDialogManager.showAdsNotAvailableMsg(t)),[2]})})})},e.prototype.updateShop=function(){var e=this;this.updateCurrency(function(){e._itemContainer.refresh()})},e._instance=null,e}();o.NgcShopManager=_,cc._RF.pop()},{"../../Core/Delegate":"Delegate","../../CrossFeatures/DeliveryReward/Script/DeliveryRewardAnimation":"DeliveryRewardAnimation","../../CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../CrossFeatures/EdgeExclusive/Script/EdgeExclusiveManager":"EdgeExclusiveManager","../../CrossFeatures/ItemShop/Script/NgcAchievementHelper":"NgcAchievementHelper","../../CrossFeatures/TabBar/Script/NgcTabBarManager":"NgcTabBarManager","../../Services/GameShop/GameShop":"GameShop","../../Services/Inventory/Inventory":"Inventory","../../Services/Telemetry/Telemetry":"Telemetry","./Ads/NgcAdsManager":"NgcAdsManager","./NgcItemInfoManager":"NgcItemInfoManager"}],NgcShopScreen:[function(e,t,o){"use strict";cc._RF.push(t,"6c06asEhTBLjr6R92gTrPpI","NgcShopScreen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcShopScreen=void 0;var c=e("../../../CrossFeatures/ItemShop/Script/ItemContainer"),l=e("../../../CrossFeatures/NavBar/Script/NavBarManager"),u=e("../../../Services/Ads/Ads"),p=e("../../../Services/Telemetry/Telemetry"),d=e("../Ads/NgcAdsManager"),f=e("../NgcItemInfoManager"),h=e("../NgcScreenBase"),g=e("../NgcShopManager"),y=cc._decorator,m=y.ccclass,_=y.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemContainerPrefab=null,t.itemContainerParent=null,t.editBox=null,t.previewObject=null,t.numberOfItemInRow=4,t._itemContainer=null,t._shopManager=null,t}return r(t,e),t.prototype.onLoad=function(){var e=cc.instantiate(this.itemContainerPrefab);this.itemContainerParent.addChild(e),this._itemContainer=e.getComponent(c.ItemContainer),this._itemContainer.numberOfItemInRow=this.numberOfItemInRow,this._shopManager=g.NgcShopManager.getInstance(),this._shopManager.setUI(this._itemContainer),this.setSocialLoginCallback(),this.setEdgeClaimCallback()},t.prototype.setEdgeClaimCallback=function(){cc.systemEvent.on("edgeClaim",this.onEdgeCallback.bind(this))},t.prototype.onEdgeCallback=function(){this._itemContainer.selectEdgeTab()},t.prototype.getShopManager=function(){return this._shopManager},t.prototype.setSocialLoginCallback=function(){cc.systemEvent.on("refreshShop",this.onSocialCallBack.bind(this))},t.prototype.onSocialCallBack=function(e,t){return a(this,void 0,void 0,function(){var e=this;return s(this,function(){return"close"===t?[2]:(f.NgcItemInfoManager.getInstance().clearSaveEquippedItemList(),this._shopManager.IsInitialized&&this._shopManager.loadData(!0,function(){e.onAfterReloadShopDataAfterSocialCallback()}),[2])})})},t.prototype.onAfterReloadShopDataAfterSocialCallback=function(){},t.prototype.onActivate=function(){p.NgcTelemetry.inst.LogEvent_EnterScreen("ItemShop"),this._shopManager.IsInitialized&&this._shopManager.updateShop(),this.checkShowBanner(),this._itemContainer.resizeContent()},t.prototype.onResume=function(){var e;p.NgcTelemetry.inst.LogEvent_EnterScreen("ItemShop"),this._shopManager.IsInitialized&&this._shopManager.updateShop(),null===(e=this._shopManager)||void 0===e||e.resetItemClickCounter(),this.checkShowBanner(),this._itemContainer.resizeContent()},t.prototype.onEditBoxChanged=function(){var e=parseInt(this.editBox.string);isNaN(e)||this._shopManager.setNumberOfItemInRow(e)},t.prototype.checkShowBanner=function(){var e,t;d.default.inst.isAdsPoincutAvailable(d.NgcPointcuts.bannerShop,u.AdsType.Banner)?null===(e=d.default.inst)||void 0===e||e.showBanner(d.NgcPointcuts.bannerShop):null===(t=d.default.inst)||void 0===t||t.hide()},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.backspace:case cc.macro.KEY.back:this.handleBackKey()}},t.prototype.handleBackKey=function(){l.NgcNavBarManager.inst&&l.NgcNavBarManager.inst.onQuitGame()},i([_(cc.Prefab)],t.prototype,"itemContainerPrefab",void 0),i([_(cc.Node)],t.prototype,"itemContainerParent",void 0),i([_(cc.EditBox)],t.prototype,"editBox",void 0),i([_(cc.Node)],t.prototype,"previewObject",void 0),i([_],t.prototype,"numberOfItemInRow",void 0),i([m],t)}(h.default);o.NgcShopScreen=v,cc._RF.pop()},{"../../../CrossFeatures/ItemShop/Script/ItemContainer":"ItemContainer","../../../CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../../Services/Ads/Ads":"Ads","../../../Services/Telemetry/Telemetry":"Telemetry","../Ads/NgcAdsManager":"NgcAdsManager","../NgcItemInfoManager":"NgcItemInfoManager","../NgcScreenBase":"NgcScreenBase","../NgcShopManager":"NgcShopManager"}],NgcSoundManager:[function(e,t,o){"use strict";cc._RF.push(t,"edf08O5qdJBeoFGkiEn77Bl","NgcSoundManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSoundManager=void 0;var a=e("../../Core/Utils"),s=e("../../CrossFeatures/LiveReskin/NgcLiveReskin"),c=e("./NgcUserInfo"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.startScreenMusicClip=null,t.AudioClips=cc.Enum({}),t.lastMusicClip=null,t.lastMusicLoop=!0,t.lastMusicVolume=0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.error("Too many Sound Managers"):o.inst=this},t.prototype.isSoundPlaying=function(e){return cc.audioEngine.getState(e)===cc.audioEngine.AudioState.PLAYING},t.prototype.stopMusic=function(){cc.audioEngine.stopMusic()},t.prototype._playSFX=function(e,t,o){var n,r=null;if(!c.default.soundOff&&e){var i=e._uuid,a=null!==(n=s.default.getAssetByUUID(i))&&void 0!==n?n:e;r=cc.audioEngine.playEffect(a,o||!1),cc.audioEngine.setVolume(r,t)}return r},t.prototype.playSound=function(e,t,o){(!t||t>1)&&(t=1),t<0&&(t=0);var n=this[a.Utils.enumToString(this.AudioClips,e)];return Array.isArray(n)&&(n=a.Utils.randomArr(n)),this._playSFX(n,t,o)},t.prototype.stopSound=function(e){cc.audioEngine.stopEffect(e)},t.prototype.setVolume=function(e,t){t<0&&(t=0),cc.audioEngine.setVolume(e,t)},t.prototype.playStartScreenMusic=function(){this.playMusic(this.startScreenMusicClip,!0)},t.prototype.playMusic=function(e,t,o){var n;if(void 0===t&&(t=!0),void 0===o&&(o=1),e){var r=e._uuid,i=null!==(n=s.default.getAssetByUUID(r))&&void 0!==n?n:e;this.stopMusic(),c.default.musicOff||(cc.audioEngine.playMusic(i,t),cc.audioEngine.setMusicVolume(o),this.lastMusicClip=i,this.lastMusicLoop=t,this.lastMusicVolume=o)}},t.prototype.resumeLastPlayedMusic=function(){return!!this.lastMusicClip&&(this.playMusic(this.lastMusicClip,this.lastMusicLoop,this.lastMusicVolume),!0)},t.prototype.playSoundWithClip=function(e,t,o){return(!t||t>1)&&(t=1),t<0&&(t=0),this._playSFX(e,t,o)},t.inst=null,i([p({type:cc.AudioClip})],t.prototype,"startScreenMusicClip",void 0),o=i([u],t)}(cc.Component);o.NgcSoundManager=d,cc._RF.pop()},{"../../Core/Utils":"Utils","../../CrossFeatures/LiveReskin/NgcLiveReskin":"NgcLiveReskin","./NgcUserInfo":"NgcUserInfo"}],NgcSpectatorManager:[function(e,t,o){"use strict";cc._RF.push(t,"d1f5aojw+5NWLYykC/GWpQp","NgcSpectatorManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSpectatorManager=void 0;var a=e("../../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager"),s=e("../../../../GameFramework/Scripts/Ads/NgcAdsManager"),c=e("../../../../GameFramework/Scripts/BuildConfig"),l=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),u=e("../../../../GameFramework/Scripts/Localized/LocalizedManager"),p=e("../../../../GameFramework/Scripts/Network/NgcNetClient"),d=e("../../../../GameFramework/Scripts/Network/NgcNetClientRefactor"),f=e("../../../../GameFramework/Scripts/NgcGame"),h=e("../../../../GameFramework/Scripts/NgcMain"),g=e("../../../../Services/Telemetry/Telemetry"),y=e("../../../Dialogs/Script/DialogBase"),m=e("../../../Emojis/Script/EmotesManager"),_=e("./SpectatorItem"),v=cc._decorator,S=v.ccclass,b=v.property,N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreBackKey=!0,t.pTag=null,t.pName=null,t.overlay=null,t.totalViewers=null,t.totalViewingYou=null,t.pFlag=null,t.leadCrown=null,t.hideSpectator=null,t.showSpectator=null,t.disabledSpectator=null,t.spectatedYou=null,t.emojiParent=null,t.bubbleParent=null,t.hudUIs=[],t.eliminated=null,t.swipeTutorial=null,t.swipeLabel=null,t.iconSwipe=null,t.icon_hand=null,t.arrowKeys=null,t.nextButtonNode=null,t.nextButtonMoveDistance=120,t.targetStillAlive=!0,t.nViewers=0,t.youViewers=0,t.currDisplayIdx=0,t.listViewer={},t.SPECTATOR_BROADCAST_MESSAGE_TYPE="send_spectator",t._followNetId="",t.spectatorStarted=!1,t.forceLeaveSpectator=!1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this,this.spectatorList=[],this.listViewer={},this.initSwipeGesture()},t.prototype.onDestroy=function(){c.NgcBuildConfig.useNgcServer?d.NgcNetClientRefactor.inst.removeBroadcastMessageType(this.SPECTATOR_BROADCAST_MESSAGE_TYPE):p.NgcNetClient.inst.removeBroadcastMessageType(this.SPECTATOR_BROADCAST_MESSAGE_TYPE)},t.prototype.setFollowNetID=function(e){void 0===e&&(e=""),this._followNetId=e},t.prototype.getFollowNetID=function(){return this._followNetId},t.prototype.initSwipeGesture=function(){this.overlay.on(cc.Node.EventType.TOUCH_END,this.detectSwipeGesture,this),this.overlay.active=!1},t.prototype.detectSwipeGesture=function(e){e.stopPropagation();var t=e.getStartLocation(),o=e.getLocation().x-t.x;o<0?this.swipeLeft():o>0&&this.swipeRight()},t.prototype.swipeLeft=function(){this.prevView()},t.prototype.swipeRight=function(){this.nextView()},t.prototype.reset=function(){this.spectatorList=[],this.listViewer={},c.NgcBuildConfig.useNgcServer?d.NgcNetClientRefactor.inst.removeBroadcastMessageType(this.SPECTATOR_BROADCAST_MESSAGE_TYPE):p.NgcNetClient.inst.removeBroadcastMessageType(this.SPECTATOR_BROADCAST_MESSAGE_TYPE),o.inst=null,cc.log("reset Spectator Mode")},t.prototype.getIndexFromNetID=function(e){return this.spectatorList?this.spectatorList.findIndex(function(t){return t._netID==e}):-1},t.prototype.getSpecatorFromNetID=function(e){var t=this.getIndexFromNetID(e);return-1==t?null:this.spectatorList[t]},t.prototype.hideAllSpectatorUI=function(){this.showSpectator.active=!1,this.hideSpectator.active=!1,this.spectatedYou.active=!1,this.disabledSpectator.active=!1,this.swipeTutorial.active=!1},t.prototype.enabledSpectator=function(){cc.log("enabledSpectator"),this.hideSpectator.active=this.isAvailable(),this.showSpectator.active=!1,this.spectatedYou.active=!1,this.targetStillAlive=!1,this.disabledSpectator.active=!this.isAvailable()&&h.NgcMain.getAppContext()!=h.AppContext.Gameplay},t.prototype.onKeyDown=function(e){if(this.spectatorStarted)switch(e.keyCode){case cc.macro.KEY.a:this.prevView();break;case cc.macro.KEY.d:this.nextView();break;case cc.macro.KEY.left:this.prevView();break;case cc.macro.KEY.right:this.nextView()}},t.prototype.stopSpectator=function(){this.spectatorStarted=!1,cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown.bind(this),this),cc.log("stopSpectator"),this.disabledSpectator.active=!this.isAvailable()&&h.NgcMain.getAppContext()!=h.AppContext.Gameplay,this.showHudUI(!0),this.sendSpectator(!1),m.NgcEmotesManager.inst.allowScrollView(!1),g.NgcTelemetry.inst.LogEvent_ExitScreen("SpectatorScreen"),g.NgcTelemetry.inst.LogEvent_OnboardingGameSpectatorEnd({}),h.NgcMain.popAppContext(),this.reset(),f.NgcGame.inst.node.emit("stopSpectator"),this.hide(function(){f.NgcGame.inst.showRewardScreen()})},t.prototype.showHudUI=function(e){null!=this.hudUIs&&this.hudUIs.forEach(function(t){t&&(t.active=e)})},t.prototype.isOnMobile=function(){return cc.sys.isMobile},t.prototype.playSwipeTutorialAnimation=function(){var e=this;this.swipeTutorial.opacity=0,this.isOnMobile()?u.NgcLocalizedManager.setTextKey(this.swipeLabel,"SPM_SWITCH_TARGET_MOBILE"):(this.arrowKeys.active=!0,this.icon_hand.active=!1,this.iconSwipe.active=!1,u.NgcLocalizedManager.setTextKey(this.swipeLabel,"SPM_SWITCH_TARGET_DESKTOP")),cc.tween(this.swipeTutorial).to(.5,{opacity:255}).call(function(){if(e.isOnMobile())e.swipeTutorial.getComponent(cc.Animation).play();else{var t=e.arrowKeys.getChildByName("icon1"),o=e.arrowKeys.getChildByName("icon2");cc.tween(t).repeat(4,cc.tween().delay(.5).call(function(){t.opacity=0,o.opacity=255}).delay(.5).call(function(){o.opacity=0,t.opacity=255})).start()}e.scheduleOnce(function(){cc.tween(e.swipeTutorial).to(.5,{opacity:0}).start()},2)}).start()},t.prototype.startSpectator=function(){var e;if(this.isAvailable()){if((null===(e=a.NgcPartyRoomManager.inst)||void 0===e?void 0:e.isGameStartedFromRoom())&&f.NgcGame.inst.canSkipToPartyRoom())return f.NgcGame.inst.forcedExit=!0,void this.stopSpectator();this.checkShowBanner(s.NgcPointcuts.bannerSpectator),this.sortPriority(),this.currDisplayIdx=0,this.lastDisplayNetID="",this.currDisplayNetID=this.spectatorList[this.currDisplayIdx]._netID,this.updateNewSpectator(),cc.log("startSpectator"),this.overlay.active=!0,this.overlay.opacity=0,this.hideSpectator.active=!1,this.showSpectator.active=!0,this.spectatedYou.active=!1,this.swipeTutorial.active=!0,this.playSwipeTutorialAnimation(),this.showHudUI(!1),m.NgcEmotesManager.inst.allowScrollView(!0),g.NgcTelemetry.inst.LogEvent_EnterScreen("SpectatorScreen"),h.NgcMain.pushAppContext(h.AppContext.Spectator),f.NgcGame.inst.node.emit("startSpectator"),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown.bind(this),this),this.spectatorStarted=!0}else this.stopSpectator()},t.prototype.getIndexSpecatorLeaderTag=function(){return this.spectatorList.findIndex(function(e){return e._tag==_.SpectatorTag.LEADER})},t.prototype.addSpectatorList=function(){var e=this;f.NgcGame.inst.getAllPlayer().forEach(function(t){t._canBeSpectated&&e.addSpectatorItem(!1,t.getNetID(),t.getName(),t.getCountryFlag()),t._isLeader&&e.setSpectatorLeader(t.getNetID()),e.addSetterForPlayer(t)})},t.prototype.addSpectatorItem=function(e,t,o,n){console.error("Add spectator",{name:o,netID:t});var r=e?_.SpectatorTag.FRIEND:_.SpectatorTag.NONE;if(!this.spectatorList.find(function(e){return e._netID===t})){var i=new _.NgcSpectatorItem(t,r,o,n);this.spectatorList.push(i)}},t.prototype.setSpectatorLeader=function(e){this.updateSpectatorTag(e,_.SpectatorTag.LEADER),this.lastLeaderNetID!=e&&(this.removeLeaderByNetID(this.lastLeaderNetID),this.currDisplayNetID==e&&this.updateSpectatorUI(),this.lastLeaderNetID=e)},t.prototype.removeLeaderByNetID=function(e){if(e==this.lastLeaderNetID&&null!=this.lastLeaderNetID){var t=this.getSpecatorFromNetID(e);t&&(t._tag=_.SpectatorTag.NONE,this.currDisplayNetID==this.lastLeaderNetID&&this.updateSpectatorUI(),this.lastLeaderNetID=null)}},t.prototype.addSetterForPlayer=function(e){var t=this,o=e;o.__defineSetter__("_canBeSpectated",function(n){0==n?t.removeSpectatorNetID(e.getNetID()):t.addSpectatorItem(!1,e.getNetID(),e.getName(),e.getCountryFlag()),o._canBeSpectatedValue=n}),o.__defineGetter__("_canBeSpectated",function(){return o._canBeSpectatedValue}),o.__defineSetter__("_isLeader",function(n){n?t.setSpectatorLeader(e.getNetID()):t.removeLeaderByNetID(e.getNetID()),o._isLeaderValue=n}),o.__defineGetter__("_isLeader",function(){return o._isLeaderValue})},t.prototype.setSpectatorEliminated=function(e){this.updateSpectatorTag(e,_.SpectatorTag.ELIMINATED)},t.prototype.updateSpectatorTag=function(e,t){var o=this.getSpecatorFromNetID(e);o&&(o._tag=t)},t.prototype.removeSpectatorNetID=function(e){var t,o=this;if(!this.forceLeaveSpectator){var n=this.getIndexFromNetID(e);if(console.error("Remove spectator",n),-1!=n){if(this.spectatorStarted&&(null===(t=a.NgcPartyRoomManager.inst)||void 0===t?void 0:t.isGameStartedFromRoom())&&f.NgcGame.inst.canSkipToPartyRoom())return f.NgcGame.inst.forcedExit=!0,this.scheduleOnce(function(){o.stopSpectator()},5),void(this.forceLeaveSpectator=!0);this.spectatorList.splice(n,1),0==this.spectatorList.length?this.forceLeaveSpectator||this.scheduleOnce(function(){o.stopSpectator()},1):this.currDisplayNetID==e&&(this.sortPriority(),this.currDisplayIdx=0,this.lastDisplayNetID="",this.currDisplayNetID=this.spectatorList[this.currDisplayIdx]._netID,this.updateNewSpectator())}}},t.prototype.isAvailable=function(){return this.spectatorList&&this.spectatorList.length>0},t.prototype.sortPriority=function(){this.spectatorList=this.spectatorList.sort(function(e,t){return t._tag-e._tag})},t.prototype.startView=function(){this.addSpectatorList()},t.prototype.prevView=function(){this.currDisplayIdx--,this.currDisplayIdx<0&&(this.currDisplayIdx=this.spectatorList.length-1),this.updateNewSpectator()},t.prototype.nextView=function(){this.currDisplayIdx++,this.currDisplayIdx>=this.spectatorList.length&&(this.currDisplayIdx=0),this.updateNewSpectator()},t.prototype.updateNewSpectator=function(){this.isAvailable()&&(this.currDisplayNetID=this.spectatorList[this.currDisplayIdx]._netID,f.NgcGame.inst.node.emit("changeSpectatorTarget",this.currDisplayNetID),this.lastDisplayNetID!=this.currDisplayNetID&&(this.sendSpectator(!0),this.lastDisplayNetID=this.currDisplayNetID,this.updateSpectatorUI()))},t.prototype.getLabelFromTag=function(e){var t="";switch(e){case _.SpectatorTag.NONE:t="NORMAL PLAYER";break;case _.SpectatorTag.FRIEND:t="YOUR FRIEND";break;case _.SpectatorTag.ELIMINATED:t="ELIMINATED YOU";break;case _.SpectatorTag.LEADER:t="LEAD PLAYER"}return t},t.prototype.updateSpectatorUI=function(){var e=this.getSpecatorFromNetID(this.currDisplayNetID);e&&(cc.log("Update UI for "+e._pName),this.pName.string=e._pName,this.pFlag.spriteFrame=e._pFlag,this.leadCrown.node.active=e._tag==_.SpectatorTag.LEADER)},t.prototype.updateTotalViewers=function(){this.totalViewers.string=this.nViewers.toString()},t.prototype.sendSpectator=function(e){if(!c.NgcBuildConfig.offlineMode){var t;t=c.NgcBuildConfig.useNgcServer?d.NgcNetClientRefactor.inst.getCombinedNetID():p.NgcNetClient.inst.localPlayerNetID,e&&(cc.log("netID :",t),cc.log("this.currDisplayNetID :",this.currDisplayNetID),cc.log(" "));var o={isJoin:e,playerNetID:t,spectatingNetID:this.currDisplayNetID,time:(new Date).getTime()};c.NgcBuildConfig.useNgcServer?d.NgcNetClientRefactor.inst.sendNgcBroadcast(this.SPECTATOR_BROADCAST_MESSAGE_TYPE,o,""):p.NgcNetClient.inst.broadcastMessage(this.SPECTATOR_BROADCAST_MESSAGE_TYPE,o,f.NgcGame.inst.curGameNetID)}},t.prototype.handleBroadcastMessageSpectator=function(e){var t=p.NgcNetClient.inst.localPlayerNetID,o=e.payload;cc.log(o),o.isJoin?this.listViewer[o.playerNetID]=o.spectatingNetID:delete this.listViewer[o.playerNetID];var n=Object.keys(this.listViewer).length;this.nViewers!=n&&n>0&&(this.nViewers=n,this.updateTotalViewers());for(var r=Object.keys(this.listViewer),i=0,a=0;a<r.length;a++){var s=r[a];this.listViewer[s]==t&&i++}i!=this.youViewers&&(this.disabledSpectator.active=this.spectatedYou.active=0!=i&&this.targetStillAlive,this.youViewers=i,this.totalViewingYou.string=""+i)},t.prototype.handleBroadcastMessageSpectator_Refactor=function(e){var t=d.NgcNetClientRefactor.inst.localPlayerID,o=JSON.parse(e.payload);cc.log(o),o.isJoin?this.listViewer[d.NgcNetClientRefactor.DetachClientID(o.playerNetID)]=d.NgcNetClientRefactor.DetachPlayerID(o.spectatingNetID):delete this.listViewer[d.NgcNetClientRefactor.DetachClientID(o.playerNetID)];var n=Object.keys(this.listViewer).length;this.nViewers!=n&&n>0&&(this.nViewers=n,this.updateTotalViewers());for(var r=Object.keys(this.listViewer),i=0,a=0;a<r.length;a++){var s=r[a];this.listViewer[s]==t&&i++}i!=this.youViewers&&(this.disabledSpectator.active=this.spectatedYou.active=0!=i&&this.targetStillAlive,this.youViewers=i,this.totalViewingYou.string=""+i)},t.prototype.start=function(){this.hideAllSpectatorUI(),c.NgcBuildConfig.useNgcServer?d.NgcNetClientRefactor.inst.registerForBroadcastMessageType(this.SPECTATOR_BROADCAST_MESSAGE_TYPE,this.handleBroadcastMessageSpectator_Refactor.bind(this)):p.NgcNetClient.inst.registerForBroadcastMessageType(this.SPECTATOR_BROADCAST_MESSAGE_TYPE,this.handleBroadcastMessageSpectator.bind(this))},t.prototype.onNextButtonClicked=function(){this.stopSpectator(),m.NgcEmotesManager.inst.currentEmotesUIInst.isShowUp&&m.NgcEmotesManager.inst.currentEmotesUIInst.mainButtonClicked()},t.prototype.updateMoveNextButton=function(){if(cc.sys.isMobile)if(m.NgcEmotesManager.inst.currentEmotesUIInst.isShowUp){if(!this.nextButtonNode.hideByEmoji){var e=this.nextButtonMoveDistance||120;this.nextButtonNode.hideByEmoji=!0,this.nextButtonNode.originalY=this.nextButtonNode.originalY||this.nextButtonNode.y,this.nextButtonNode.getComponent(cc.Widget).enabled=!1,cc.tween(this.nextButtonNode).to(.15,{y:this.nextButtonNode.originalY+e,opacity:0}).start()}}else this.nextButtonNode.hideByEmoji&&(this.nextButtonNode.hideByEmoji=!1,this.nextButtonNode.originalY=this.nextButtonNode.originalY||this.nextButtonNode.y,this.nextButtonNode.getComponent(cc.Widget).enabled=!1,cc.tween(this.nextButtonNode).to(.15,{y:this.nextButtonNode.originalY,opacity:255}).start())},t.prototype.update=function(){this.updateMoveNextButton()},t.urlPrefab="Spectator",t.bundleName="03_end_game_flow",t.dialogType="NgcSpectatorManager",t.inst=null,i([b(cc.Label)],t.prototype,"pTag",void 0),i([b(l.NgcLabelLocalized)],t.prototype,"pName",void 0),i([b(cc.Node)],t.prototype,"overlay",void 0),i([b(cc.Label)],t.prototype,"totalViewers",void 0),i([b(cc.Label)],t.prototype,"totalViewingYou",void 0),i([b(cc.Sprite)],t.prototype,"pFlag",void 0),i([b(cc.Sprite)],t.prototype,"leadCrown",void 0),i([b(cc.Node)],t.prototype,"hideSpectator",void 0),i([b(cc.Node)],t.prototype,"showSpectator",void 0),i([b(cc.Node)],t.prototype,"disabledSpectator",void 0),i([b(cc.Node)],t.prototype,"spectatedYou",void 0),i([b(cc.Node)],t.prototype,"emojiParent",void 0),i([b(cc.Node)],t.prototype,"bubbleParent",void 0),i([b({type:[cc.Node]})],t.prototype,"hudUIs",void 0),i([b(cc.Node)],t.prototype,"eliminated",void 0),i([b(cc.Node)],t.prototype,"swipeTutorial",void 0),i([b(l.NgcLabelLocalized)],t.prototype,"swipeLabel",void 0),i([b(cc.Node)],t.prototype,"iconSwipe",void 0),i([b(cc.Node)],t.prototype,"icon_hand",void 0),i([b(cc.Node)],t.prototype,"arrowKeys",void 0),i([b(cc.Node)],t.prototype,"nextButtonNode",void 0),i([b()],t.prototype,"nextButtonMoveDistance",void 0),o=i([S],t)}(y.NgcDialogBase);o.NgcSpectatorManager=N,cc._RF.pop()},{"../../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../../GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../../../GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../../../../GameFramework/Scripts/NgcGame":"NgcGame","../../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../../Services/Telemetry/Telemetry":"Telemetry","../../../Dialogs/Script/DialogBase":"DialogBase","../../../Emojis/Script/EmotesManager":"EmotesManager","./SpectatorItem":"SpectatorItem"}],NgcStartMain:[function(e,t,o){"use strict";cc._RF.push(t,"57020AZ2MJLOIugNvOkuwQw","NgcStartMain");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../../Scripts/GameTrackingDataHelper"),l=e("../../../../Scripts/GameTrackingDataSupporter"),u=e("../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager"),p=e("../../../../Scripts/UserInfo"),d=e("../../../Core/Utils"),f=e("../../../CrossFeatures/CrownRoad/Script/CrownRoadManager"),h=e("../../../CrossFeatures/DailyReward/Script/DailyRewardManager"),g=e("../../../CrossFeatures/Dialogs/Script/DialogBase"),y=e("../../../CrossFeatures/Dialogs/Script/NgcDialogManager"),m=e("../../../CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog"),_=e("../../../CrossFeatures/EdgeExclusive/Script/EdgeExclusiveManager"),v=e("../../../CrossFeatures/GameMode/Script/NgcGameModeManager"),S=e("../../../CrossFeatures/LeaderBoard/Script/LeaderBoardManager"),b=e("../../../CrossFeatures/LuckyBooster/Script/NgcLuckyBoosterManager"),N=e("../../../CrossFeatures/NavBar/Script/NavBarEditNameDialog"),P=e("../../../CrossFeatures/NavBar/Script/NavBarManager"),C=e("../../../CrossFeatures/RealPrize/Script/NgcRealPrizeManager"),w=e("../../../CrossFeatures/TabBar/Script/NgcTabBarManager"),T=e("../../../CrossFeatures/TechMessage/Script/TechMessages"),I=e("../../../CrossFeatures/XInOneBundle/Script/NgcXInOneDataInterface"),R=e("../../../SDK/Nano/NanoSrv"),O=e("../../../Services/Ads/Ads"),E=e("../../../Services/DailyReward/DailyReward"),k=e("../../../Services/Inventory/Inventory"),A=e("../../../Services/Platform/Platform"),B=e("../../../Services/Social/Social"),D=e("../../../Services/Telemetry/Telemetry"),M=e("../Ads/NgcAdsManager"),L=e("../BuildConfig"),F=e("../CountryFlagsManager"),G=e("../Localized/LabelLocalized"),U=e("../Localized/LocalizedManager"),j=e("../Network/NgcNetClient"),x=e("../Network/NgcNetClientRefactor"),z=e("../NgcMain"),H=e("../NgcScreenBase"),W=e("../NgcScreenManager"),V=e("../NgcShopManager"),Y=e("../NgcSoundManager"),K=e("../NgcUserInfo"),q=cc._decorator,X=q.ccclass,J=q.property,Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerNameBox=null,t.connectingToNetwork=null,t.loadingNode=null,t.logoutSpriteFrame=null,t.luckyboosterParent=null,t.luckyBoosterPrefab=null,t.gameModeParent=null,t.gameModePrefab=null,t.crownRoadUIParent=null,t.crownRoadUIPrefab=null,t.isPlatformStarted=!1,t.canPressSpace=!1,t.shouldGoToPartyRoom=!1,t._sendGDTrackingFirstGameTime=0,t.clickedStartGame=!1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){null==o.inst?(o.inst=this,z.NgcMain.inst.setCrossFeatureInst(z.CrossFeature.NgcStartMain,this),this.createLuckyBooster(),this.createGameMode(),this.createCrownRoad(),A.NgcPlatform.isOfflineMode()||_.default.getInstance()):console.error("More than one StartMain inst created")},t.prototype.start=function(){return a(this,void 0,Promise,function(){return s(this,function(){return this.connectingToNetwork.node.active=!0,R.default.setAccessTokenOutOfDateCallback(this.displayLogoutNoticeDialog.bind(this)),this.canPressSpace=!0,[2]})})},t.prototype.onResume=function(){this.loadingNode.active=!1,this.scheduleOnce(function(){Y.NgcSoundManager.inst.playStartScreenMusic()},.5),L.NgcBuildConfig.offlineMode||(L.NgcBuildConfig.useNgcServer?x.NgcNetClientRefactor.inst.isConnected()||x.NgcNetClientRefactor.inst.connect():j.NgcNetClient.inst.isConnected()||j.NgcNetClient.inst.startConnectCycle()),A.NgcPlatform.inst&&A.NgcPlatform.inst.onPostMessage({EnterMainMenu:!0},"*"),k.NgcInventory.inst&&k.NgcInventory.inst.forceFetchInventory(),D.NgcTelemetry.inst.LogEvent_EnterScreen("MainMenu"),this.showBannerAds(),this.setResizeCallback(),cc.sys.isMobile||"POKI"!=L.NgcBuildConfig.buildPlatform||(this.canPressSpace=!0),this.resizeContent(),L.NgcBuildConfig.offlineMode||C.default.getInstance().getEventList(),u.NgcPartyRoomManager.mustGoToPartyRoom()||(f.default.checkRefreshUI(),h.NgcDailyRewardManager.inst.checkReward()),A.NgcPlatform.inst.requestWebLoginButtonStatus(!0),this.refreshCurrency(),this.updateCharacterPreview(),A.NgcPlatform.isRunFromApp()||A.NgcPlatform.isOfflineMode()||_.default.getInstance().checkReward(),cc.systemEvent.emit(I.XInOneBundleEvent.FetchData)},t.prototype.onActivate=function(){u.NgcPartyRoomManager.mustGoToPartyRoom()&&(this.shouldGoToPartyRoom=!0,this.loadingNode.active=!0,W.default.inst.setTouchStatus(!1)),this.scheduleOnce(function(){Y.NgcSoundManager.inst.playStartScreenMusic()},.5),this.refreshCurrency(),A.NgcPlatform.inst&&A.NgcPlatform.inst.onPostMessage({EnterMainMenu:!0},"*"),D.NgcTelemetry.inst.LogEvent_EnterScreen("MainMenu"),this.showBannerAds(),this.setResizeCallback(),cc.sys.isMobile||"POKI"!=L.NgcBuildConfig.buildPlatform||(this.canPressSpace=!0),this.resizeContent(),v.NgcGameModeManager.inst.setPlayButtonClickCallback(this.playerClickedStart.bind(this)),v.NgcGameModeManager.inst.setModeButtonClickCallback(this.playerClickedGameMode.bind(this)),f.default.setAfterRewardCallback(this.refreshCurrency.bind(this)),L.NgcBuildConfig.offlineMode||C.default.getInstance().getEventList(),b.NgcLuckyBoosterManager.getInstance().setApplyBoosterCallback(this.applyBooster.bind(this)),cc.systemEvent.on("refreshNameBox",this.updateNameBox,this),this.onPlatformStartCompleted(),this.updateCharacterPreview(),A.NgcPlatform.isRunFromApp()||A.NgcPlatform.isOfflineMode()||_.default.getInstance().checkReward(),cc.systemEvent.emit(I.XInOneBundleEvent.FetchData)},t.prototype.onDeactivate=function(){M.default.inst&&M.default.inst.hide(M.NgcPointcuts.bannerMainMenu)},t.prototype.showBannerAds=function(){var e,t;M.default.inst&&M.default.inst.isAdsPoincutAvailable(M.NgcPointcuts.bannerMainMenu,O.AdsType.Banner)?null===(e=M.default.inst)||void 0===e||e.showBanner(M.NgcPointcuts.bannerMainMenu):null===(t=M.default.inst)||void 0===t||t.hide()},t.prototype.refreshCurrency=function(){},t.prototype.applyBooster=function(){},t.prototype.playerClickedGameMode=function(){this.playerClickedStart()},t.prototype.setResizeCallback=function(){var e=this;cc.view.setResizeCallback(function(){e.resizeContent()})},t.prototype.resizeContent=function(){},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.backspace:case cc.macro.KEY.back:this.handleBackKey();break;case cc.macro.KEY.space:this.canPressSpace&&!g.NgcDialogBase.hasDialogShowing&&this.playerClickedStart()}},t.prototype.handleBackKey=function(){P.NgcNavBarManager.inst&&P.NgcNavBarManager.inst.onQuitGame()},t.prototype.createLuckyBooster=function(){this.luckyboosterParent.addChild(cc.instantiate(this.luckyBoosterPrefab))},t.prototype.createGameMode=function(){this.gameModeParent.addChild(cc.instantiate(this.gameModePrefab))},t.prototype.createCrownRoad=function(){f.default.isInitialized()&&this.crownRoadUIParent.addChild(cc.instantiate(this.crownRoadUIPrefab))},t.prototype.isBlockStartGame=function(){return!w.NgcTabBarManager.inst||w.NgcTabBarManager.inst.selectedTab()!==w.TAB.MainMenu},t.prototype.playerClickedStart=function(){var e=this;"GameDistribution"===L.NgcBuildConfig.buildPlatform&&this._sendGDTrackingFirstGameTime<1&&(c.default.inst.sendGDTracking(l.GameDistributionTrackingType.FirstGameClicked),l.default.inst.isStarted=!0,this._sendGDTrackingFirstGameTime++),v.NgcGameModeManager.inst.isShowingDialog||this.clickedStartGame||this.isBlockStartGame()||(z.NgcMain.inst.userNameIsValid()?(A.NgcPlatform.inst&&A.NgcPlatform.inst.onPostMessage({playerClickedStartSuccess:!0},"*"),this.clickedStartGame=!0,M.default.inst.isAdsPoincutAvailable(M.NgcPointcuts.interPreGame,O.AdsType.Interstitial)?M.default.inst.showInterstitial(M.NgcPointcuts.interPreGame,null,function(){e.enterGame()}):this.enterGame()):this.showEditNameDialog())},t.prototype.enterGame=function(){var e,t=this;if(A.NgcPlatform.inst.requestWebLoginButtonStatus(!1),K.default.updateAdsInfo(),0==K.default.isFirstTimeClicked){K.default.isFirstTimeClicked=!0;var o=!1;cc.sys.isMobile||(o=!0),A.NgcPlatform.inst&&A.NgcPlatform.inst.getName()==d.Utils.enumToString(A.PlatformID,A.PlatformID.Poki)&&(o=!1),o&&cc.screen.requestFullScreen()}this.canPressSpace=!1,null===(e=M.default.inst)||void 0===e||e.hide(M.NgcPointcuts.bannerMainMenu),k.NgcInventory.inst&&k.NgcInventory.inst.forceFetchInventory(),D.NgcTelemetry.inst.LogEvent_BeginTimer("RoomFillingTime"),D.NgcTelemetry.inst.LogEvent_StartGame(),this.goToGameScreen(),window.parent.postMessage&&window.parent.postMessage({playerClickedStartSuccess:!0},"*"),setTimeout(function(){t.clickedStartGame=!1},1e3)},t.prototype.goToGameScreen=function(){z.NgcMain.inst.setState(z.AppState.Game)},t.prototype.workStartButtonNetworkConnect=function(){A.NgcPlatform.isOfflineMode()?this.connectingToNetwork.node.active=!1:L.NgcBuildConfig.useNgcServer&&x.NgcNetClientRefactor.inst.isConnected()?this.connectingToNetwork.node.active=!1:this.connectingToNetwork.node.active||(this.connectingToNetwork.node.active=!0)},t.prototype.enablePlayButton=function(e){e?this.connectingToNetwork.node.active&&(this.connectingToNetwork.node.active=!1):this.connectingToNetwork.node.active||(this.connectingToNetwork.node.active=!0)},t.prototype.update=function(e){var t=this;this.workStartButtonNetworkConnect(e);var n=L.NgcBuildConfig.useNgcServer&&x.NgcNetClientRefactor.inst.isConnected();!L.NgcBuildConfig.offlineMode&&n&&o.inst.isPlatformStarted&&this.shouldGoToPartyRoom&&U.NgcLocalizedManager.jsonData.length>0&&null!=F.NgcCountryFlagsManager.localCountry&&(this.shouldGoToPartyRoom=!1,this.loadingNode.active=!0,this.scheduleOnce(function(){t.scheduleOnce(function(){W.default.inst.setTouchStatus(!0)},1),t.loadingNode.active=!1,t.goToPartyScreen()},3))},t.prototype.goToPartyScreen=function(){z.NgcMain.inst.setState(z.AppState.PartyScreen)},t.prototype.updateUserInfo=function(){return a(this,void 0,Promise,function(){var e;return s(this,function(){return(e=R.default.inst.getCurGameData())&&e.hasOwnProperty("_isAlreadyFirstShow")&&(h.NgcDailyRewardManager.inst.isDailyRewardAlreadyShow=e._isAlreadyFirstShow),p.UserInfo.updateInventoryWithPlatform(),[2]})})},t.prototype.redirectToShop=function(){w.NgcTabBarManager.inst.selectTabByIndex(0)},t.prototype.shouldLoadShopItemsIcon=function(){return!0},t.prototype.onFinishLoadingShopItem=function(){},t.prototype.onPlatformStartCompleted=function(){var e=this;if(!T.default.inst||!T.default.inst.checkServerMaintenanceAndShowPopup()){V.NgcShopManager.getInstance().loadData(this.shouldLoadShopItemsIcon(),function(){e.onFinishLoadingShopItem()}),R.default.inst&&(!R.default.inst.loginData.country||""==R.default.inst.loginData.country||R.default.inst.loginData.country&&R.default.inst.loginData.country!==F.NgcCountryFlagsManager.localCountry.toLowerCase())&&(A.NgcPlatform.isOfflineMode()||z.NgcMain.inst.updateNameToNanosrv()),A.NgcPlatform.isOfflineMode()||P.NgcNavBarManager.inst.updateRemote(),P.NgcNavBarManager.inst.checkAndShowA2HSOnStart(),this.updateUserInfo(),E.NgcDailyReward.inst&&E.NgcDailyReward.inst.onLogin(function(e){e&&console.error("login DailyReward fail!"),u.NgcPartyRoomManager.mustGoToPartyRoom()||h.NgcDailyRewardManager.inst.checkReward()}),this.loadingNode.active=!1,this.isPlatformStarted||A.NgcPlatform.isOfflineMode()||(this.updateOldVersionContent(),B.NgcSocial.srvInstances.forEach(function(e){e.setOnLogoutSuccessCallback(z.NgcMain.inst.resetData.bind(z.NgcMain.inst))})),this.updateNameBox(),A.NgcPlatform.inst.checkLoginData();var t=R.default.inst.getCurSocialInfo();t&&("uplay"===t.platform||"ubiconnect"===t.platform?B.NgcSocial.inst=B.NgcSocial.getSrvInstance(B.SocialType.Uplay):"facebook"===t.platform&&(B.NgcSocial.inst=B.NgcSocial.getSrvInstance(B.SocialType.Facebook))),this.isPlatformStarted=!0}},t.prototype.displayLogoutNoticeDialog=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,y.NgcDialogManager.createDialog(m.NgcNoticeDialog.dialogType,m.NgcNoticeDialog.urlPrefab,m.NgcNoticeDialog.bundleName)];case 1:return e.sent().getComponent(m.NgcNoticeDialog).init(U.NgcLocalizedManager.t("NTM_ERROR").text,U.NgcLocalizedManager.t("SNS_LOG_OUT_ERROR_NOTICE").text,function(){K.default.resetWhenLoggedInFromAnotherPlace(function(){p.UserInfo.resetPrivateData()})},this.logoutSpriteFrame),[2]}})})},t.prototype.updateOldVersionContent=function(){S.NgcLeaderboardManager.inst.checkOldBestScore(),!K.default.socialId&&K.default.facebookId&&(K.default.socialId=K.default.facebookId);var e=R.default.inst.getCurSocialInfo();K.default.socialId&&K.default.socialId!==e.id?R.default.inst.resetUserID().finally(function(){z.NgcMain.inst.resetData()}):K.default.socialId&&!K.default.isNameCorrectFormat(K.default.localUserName)&&(K.default.localUserName=z.NgcMain.inst.localUserName=K.default.correctNameFormat(K.default.localUserName),z.NgcMain.inst.updateNameToNanosrv())},t.prototype.fullScreenButtonOnClick=function(){cc.screen.fullScreen()?cc.screen.exitFullScreen():cc.screen.requestFullScreen()},t.prototype.onNameBoxClick=function(){this.showEditNameDialog()},t.prototype.showEditNameDialog=function(){return a(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return e=N.NgcNavBarEditNameDialog.dialogType,t=N.NgcNavBarEditNameDialog.urlPrefab,o=N.NgcNavBarEditNameDialog.bundleName,[4,y.NgcDialogManager.createDialog(e,t,o)];case 1:return n.sent().getComponent(N.NgcNavBarEditNameDialog).show(),[2]}})})},t.prototype.updateNameBox=function(){K.default.isUserLogined()?this.playerNameBox.active=!1:this.playerNameBox.active=!K.default.changedName,this.playerNameBox.active&&(this.playerNameBox.getComponentInChildren(cc.Label).string=K.default.localUserName),P.NgcNavBarManager.inst.setNavBarInfo()},t.prototype.updateCharacterPreview=function(){},t.prototype.previewCharacterWolrdPosition=function(){return cc.v2(0,0)},t.inst=null,i([J(cc.Node)],t.prototype,"playerNameBox",void 0),i([J(G.NgcLabelLocalized)],t.prototype,"connectingToNetwork",void 0),i([J(cc.Node)],t.prototype,"loadingNode",void 0),i([J(cc.SpriteFrame)],t.prototype,"logoutSpriteFrame",void 0),i([J(cc.Node)],t.prototype,"luckyboosterParent",void 0),i([J(cc.Prefab)],t.prototype,"luckyBoosterPrefab",void 0),i([J(cc.Node)],t.prototype,"gameModeParent",void 0),i([J(cc.Prefab)],t.prototype,"gameModePrefab",void 0),i([J(cc.Node)],t.prototype,"crownRoadUIParent",void 0),i([J(cc.Prefab)],t.prototype,"crownRoadUIPrefab",void 0),o=i([X],t)}(H.default);o.default=Q,cc._RF.pop()},{"../../../../Scripts/GameTrackingDataHelper":"GameTrackingDataHelper","../../../../Scripts/GameTrackingDataSupporter":"GameTrackingDataSupporter","../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../../../../Scripts/UserInfo":"UserInfo","../../../Core/Utils":"Utils","../../../CrossFeatures/CrownRoad/Script/CrownRoadManager":"CrownRoadManager","../../../CrossFeatures/DailyReward/Script/DailyRewardManager":"DailyRewardManager","../../../CrossFeatures/Dialogs/Script/DialogBase":"DialogBase","../../../CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../CrossFeatures/Dialogs/Script/NoticeDialog/NoticeDialog":"NoticeDialog","../../../CrossFeatures/EdgeExclusive/Script/EdgeExclusiveManager":"EdgeExclusiveManager","../../../CrossFeatures/GameMode/Script/NgcGameModeManager":"NgcGameModeManager","../../../CrossFeatures/LeaderBoard/Script/LeaderBoardManager":"LeaderBoardManager","../../../CrossFeatures/LuckyBooster/Script/NgcLuckyBoosterManager":"NgcLuckyBoosterManager","../../../CrossFeatures/NavBar/Script/NavBarEditNameDialog":"NavBarEditNameDialog","../../../CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../../CrossFeatures/RealPrize/Script/NgcRealPrizeManager":"NgcRealPrizeManager","../../../CrossFeatures/TabBar/Script/NgcTabBarManager":"NgcTabBarManager","../../../CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../../CrossFeatures/XInOneBundle/Script/NgcXInOneDataInterface":"NgcXInOneDataInterface","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads","../../../Services/DailyReward/DailyReward":"DailyReward","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Platform/Platform":"Platform","../../../Services/Social/Social":"Social","../../../Services/Telemetry/Telemetry":"Telemetry","../Ads/NgcAdsManager":"NgcAdsManager","../BuildConfig":"BuildConfig","../CountryFlagsManager":"CountryFlagsManager","../Localized/LabelLocalized":"LabelLocalized","../Localized/LocalizedManager":"LocalizedManager","../Network/NgcNetClient":"NgcNetClient","../Network/NgcNetClientRefactor":"NgcNetClientRefactor","../NgcMain":"NgcMain","../NgcScreenBase":"NgcScreenBase","../NgcScreenManager":"NgcScreenManager","../NgcShopManager":"NgcShopManager","../NgcSoundManager":"NgcSoundManager","../NgcUserInfo":"NgcUserInfo"}],NgcTabBarManager:[function(e,t,o){"use strict";cc._RF.push(t,"43716ESBrtOA7pzntOirmAu","NgcTabBarManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcTabBarManager=o.TAB=o.SWIPE_MODE=void 0;var a,s,c=cc._decorator,l=c.ccclass,u=c.property,p=e("../../../Core/Utils"),d=e("../../../GameFramework/Scripts/BuildConfig"),f=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),h=e("../../../GameFramework/Scripts/Network/NgcNetClient"),g=e("../../../GameFramework/Scripts/Network/NgcNetClientRefactor"),y=e("../../../GameFramework/Scripts/NgcScreenManager"),m=e("../../../SDK/Nano/NanoSrv"),_=e("../../../Services/Platform/Platform"),v=e("../../Dialogs/Script/MessageDialog/MessageDialog"),S=e("../../Dialogs/Script/NgcDialogManager"),b=e("../../NavBar/Script/NavBarManager"),N=e("./TabButton");(function(e){e[e.TAB_BAR=0]="TAB_BAR",e[e.SWIPE_SCREEN=1]="SWIPE_SCREEN"})(a=o.SWIPE_MODE||(o.SWIPE_MODE={})),function(e){e.Shop="Shop",e.Leaderboard="Leaderboard",e.MainMenu="MainMenu",e.PartyWithFriends="PWF",e.RealPrize="Prize"}(s=o.TAB||(o.TAB={}));var P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tabs=[],t.selectedBG=null,t.selectedHighlightBG=null,t.selectedIconYOffset=6,t.defaultIconScale=.7,t.selectedIconScale=1,t.tweenDuration=.1,t.loadingNode=null,t.delayTimeForLoadingAnimation=.5,t._selectedIndex=0,t.selectedWidth=0,t.tabByName={},t.liveOpsTabOrder=null,t._childSwipe=!1,t._forceSwitchTab=!1,t._tabButtonDisabled=!1,t.swipeMode=null,t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._selectedIndex},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e=this,t=!_.NgcPlatform.isOfflineMode()&&m.default.inst&&m.default.inst.getCurGameInfo()&&m.default.inst.getCurGameInfo().gameParams||null;t?this.liveOpsTabOrder=t.tabBar.tabOrder:cc.error("LiveOps Tab Bar Config Not Found!"),o.inst=this,y.default.inst.setTabBar(this),this.tabs.forEach(function(t){e.tabByName[t.name]=t;var o=t.getComponent(N.NgcTabButton).tabIcon;o.originalY=o.y,t.oldParent=t.parent,t.parent=null}),this.applyPlatformCheck(),this.selectedWidth=this.selectedBG.width,this.node.opacity=0},t.prototype.applyPlatformCheck=function(){var e=this,t=[s.Shop,s.Leaderboard,s.MainMenu,s.PartyWithFriends,s.RealPrize];return d.NgcBuildConfig.buildPlatform===p.Utils.enumToString(_.PlatformID,_.PlatformID.GameDistribution)&&(t=[s.Shop,s.MainMenu,s.Leaderboard]),"POKI"===d.NgcBuildConfig.buildPlatform&&(t=[s.Shop,s.MainMenu,s.Leaderboard]),d.NgcBuildConfig.buildPlatform===p.Utils.enumToString(_.PlatformID,_.PlatformID.HUZ)&&(t=[s.Shop,s.MainMenu]),d.NgcBuildConfig.buildPlatform===p.Utils.enumToString(_.PlatformID,_.PlatformID.GameDistribution)&&(t=[s.Shop,s.MainMenu,s.Leaderboard]),d.NgcBuildConfig.offlineMode&&(t=[s.MainMenu,s.Shop]),this.liveOpsTabOrder&&(t=this.liveOpsTabOrder,cc.log("Apply live ops tab bar config!")),this.tabs=[],t.forEach(function(t){var o=e.tabByName[t];o.parent=o.oldParent,e.tabs.push(o)}),this.tabs},t.prototype.initSwipe=function(){var e=y.default.inst.MainScreenWidget.node,t=new cc.Node("Swipe Layer");t.width=e.width,t.height=e.height,t.parent=e,t.on(cc.Node.EventType.TOUCH_END,this.detectSwipeGestureEnd,this,!0),t._touchListener.swallowTouches=!1},t.prototype.swipeDeadZone=function(){return cc.sys.isMobile?100:250},t.prototype.swipeDelayTime=function(){return 50},t.prototype.setChildSwipe=function(){this._childSwipe=!0},t.prototype.detectSwipeGestureEnd=function(e){var t=this;this._childSwipe=!1,setTimeout(function(){if(!t._childSwipe){var o=e.getStartLocation(),n=e.getLocation(),r=n.x-o.x,i=n.y-o.y;if(!(Math.abs(i)>Math.abs(r))){var a=t.swipeDeadZone();r<-a?(e.stopPropagation(),t.swipeRight()):r>a&&(e.stopPropagation(),t.swipeLeft())}}},this.swipeDelayTime())},t.prototype.swipeLeft=function(){this.moveLeft()},t.prototype.swipeRight=function(){this.moveRight()},t.prototype.start=function(){this.init()},t.prototype.init=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown.bind(this),this)},t.prototype.updatePlacement=function(e,t){var o=this;void 0===e&&(e=0),void 0===t&&(t=!1);var n=Math.min(cc.winSize.width,768),r=n/(this.tabs.length-1+1.5),i=1.5*r;this.selectedBG.width=i,this.selectedHighlightBG.active=!0,this.selectedHighlightBG.width=i,this.selectedBG.active=!0,this.selectedHighlightBG.active=!1,this.tabs.forEach(function(a,s){var c=a.getComponent(N.NgcTabButton),l=a.getComponent(N.NgcTabButton).tabIcon,u=a.getComponent(N.NgcTabButton).tabLabel,p=c.isHighLight();u.getComponent(f.NgcLabelLocalized).enableWrapText=!1,u.getComponent(f.NgcLabelLocalized).verticalAlign=cc.Label.VerticalAlign.CENTER,u.y=-20;var d=s*r+i/2-n/2;s!==e?(p&&setTimeout(function(){c.tabHighlight.active=!0,c.tabHighlight.width=r,c.tabHighlight.opacity=255},55),t?(cc.tween(a).to(o.tweenDuration,{width:r}).start(),cc.tween(l).to(o.tweenDuration,{y:l.originalY,scale:o.defaultIconScale}).start(),cc.tween(u).to(o.tweenDuration,{opacity:0}).start()):(u.opacity=0,a.width=r,l.y=l.originalY,l.scale=o.defaultIconScale,c.tabHighlight.width=r)):t?(p?(o.selectedHighlightBG.active=!0,o.selectedHighlightBG.opacity=0,cc.tween(o.selectedBG).to(o.tweenDuration,{x:d,opacity:0},{easing:"cubicInOut"}).start(),cc.tween(o.selectedHighlightBG).to(o.tweenDuration,{x:d},{easing:"cubicInOut"}).call(function(){o.selectedHighlightBG.opacity=255,o.selectedBG.active=!1,cc.tween(c.tabHighlight).to(o.tweenDuration,{opacity:0}).start()}).start()):(o.selectedBG.active=!0,o.selectedBG.opacity=255,o.selectedHighlightBG.x=d,cc.tween(o.selectedBG).to(o.tweenDuration,{x:d},{easing:"cubicInOut"}).call(function(){o.selectedBG.active=!0,cc.tween(c.tabHighlight).to(o.tweenDuration,{opacity:0}).start(),cc.tween(o.selectedHighlightBG).to(o.tweenDuration,{opacity:255}).start()}).start()),cc.tween(a).to(o.tweenDuration,{width:i}).start(),cc.tween(l).to(o.tweenDuration,{y:l.originalY+o.selectedIconYOffset,scale:o.selectedIconScale}).start(),cc.tween(u).delay(.05).to(o.tweenDuration,{x:0,opacity:255},{easing:"cubicInOut"}).start(),cc.tween(o.selectedBG).to(o.tweenDuration,{x:d},{easing:"cubicInOut"}).start()):(u.opacity=255,l.y=l.originalY+o.selectedIconYOffset,l.scale=o.selectedIconScale,a.width=i,a.getComponent(N.NgcTabButton).tabIcon.getComponent(cc.Widget).updateAlignment(),o.selectedBG.x=d,o.selectedHighlightBG.x=d,o.selectedBG.opacity=255,p?(o.selectedHighlightBG.active=!0,o.selectedHighlightBG.opacity=255,c.tabHighlight.opacity=0,o.selectedBG.active=!1):(o.selectedHighlightBG.active=!1,o.selectedHighlightBG.opacity=0,o.selectedBG.active=!0))}),this._selectedIndex=e},t.prototype.selectedTab=function(){return this.tabs[this._selectedIndex].name},t.prototype.isLoadingAnimationRequired=function(e){return e>=this.delayTimeForLoadingAnimation},t.prototype.updateTabButtons=function(e){void 0===e&&(e=!1),this.updatePlacement(this._selectedIndex,e)},t.prototype.forceSwitchTab=function(){this._forceSwitchTab=!0},t.prototype.disableTabButtons=function(){this._tabButtonDisabled=!0,y.default.inst.disablePageviewSwipe()},t.prototype.enableTabButtons=function(){this._tabButtonDisabled=!1,y.default.inst.enablePageviewSwipe()},t.prototype.canSwitchToOtherTab=function(e){if(e.name===s.PartyWithFriends&&!_.NgcPlatform.isOfflineMode())if(d.NgcBuildConfig.useNgcServer){if(!g.NgcNetClientRefactor.inst.clientIDInit)return}else if(!h.NgcNetClient.inst.isConnected())return;return!this._tabButtonDisabled&&(!!this._forceSwitchTab||!!y.default.inst.tabBarIsActive&&!y.default.inst.isSwitching&&y.default.inst.canSwitchToOtherScreen()&&!e.getComponent(N.NgcTabButton).disabled)},t.prototype.isComingSoon=function(e){return e.getComponent(N.NgcTabButton).disabled},t.prototype.onKeyDown=function(e){if(!S.NgcDialogManager.hasDialogShowing())switch(e.keyCode){case cc.macro.KEY.a:this.moveLeft();break;case cc.macro.KEY.d:this.moveRight();break;case cc.macro.KEY.left:this.moveLeft();break;case cc.macro.KEY.right:this.moveRight()}},t.prototype.moveLeft=function(){var e=Math.max(this._selectedIndex-1,0);this._selectedIndex!==e&&this.selectTab(this.tabs[e])},t.prototype.moveRight=function(){var e=Math.min(this._selectedIndex+1,this.tabs.length-1);this._selectedIndex!==e&&this.selectTab(this.tabs[e])},t.prototype.onSelectTab=function(e){this.selectTab(e.target)},t.prototype.selectTabByIndex=function(e){var t=this.tabs[e];this.selectTab(t)},t.prototype.selectTab=function(e){var t=this;e&&(b.NgcNavBarManager.inst.curState===b.NavBarState.Show?(b.NgcNavBarManager.inst.curState=b.NavBarState.Hide,this.scheduleOnce(function(){t.processSwitchTab(e)},.65)):this.processSwitchTab(e))},t.prototype.clearAfterSwitchCallback=function(){this._onAfterSwitchCallback&&(this.unschedule(this._onAfterSwitchCallback),this._onAfterSwitchCallback=null)},t.prototype.processSwitchTab=function(e){var t=this;if(this.canSwitchToOtherTab(e)){y.default.inst.enablePageviewSwipe(),this.node.opacity=255,this.clearAfterSwitchCallback();var o=this._forceSwitchTab;if(this.swipeMode=this._forceSwitchTab?a.SWIPE_SCREEN:a.TAB_BAR,o||(y.default.inst._scrollToPageDisabled=!1,y.default.inst.clearPageTurningCallback()),this._forceSwitchTab=!1,this.tabs.indexOf(e)!==this._selectedIndex){var n=this.tabs[this._selectedIndex].getComponent(N.NgcTabButton),r=e.getComponent(N.NgcTabButton),i=r.onBeforeSwitchEvent,s=r.onAfterSwitchEvent,c=r.activeScreenID();this._switchScreen=function(){i&&i.emit([]),-1!==c&&(y.default.inst.showAllScreens(),y.default.inst.switchScreen(c,t.transitionType(),function(){s&&(t._onAfterSwitchCallback=function(){s.emit([])},t.scheduleOnce(t._onAfterSwitchCallback,.15)),o||y.default.inst.onPageTurning(null,!1)})),t.swipeMode=null},n&&n.onLeaveEvent&&n.onLeaveEvent.handler&&n.onLeaveEvent.emit([]),n&&n.exitPromptRequire||this._switchScreen()}}else if(this.isComingSoon(e)){var l=this;this.messageDialog&&this.messageDialog.isValid&&this.messageDialog.destroy(),S.NgcDialogManager.createDialog(v.NgcMessageDialog.dialogType,v.NgcMessageDialog.urlPrefab,v.NgcMessageDialog.bundleName).then(function(e){var t=e.getComponent(v.NgcMessageDialog);t.init("NGG_Coming_Soon"),l.messageDialog=t.node})}},t.prototype.transitionType=function(){return y.TransitionType.Slide},t.prototype.processSwitchToNextScreen=function(){this._switchScreen&&this._switchScreen()},t.prototype.updateTabPlacementByScreenID=function(e,t){void 0===t&&(t=!1);var o=this.getTabButtonIndexByScreenID(e);this.updatePlacement(o,t)},t.prototype.switchScreenDelayByScreenID=function(e){var t=this.getTabButtonIndexByScreenID(e);return this.tabs[t].getComponent(N.NgcTabButton).switchScreenDelay},t.prototype.getSlideDirection=function(e){if(-1===this._selectedIndex)return-1;var t=this.tabs[this._selectedIndex].getComponent(N.NgcTabButton).activeScreenID(),o=this.getTabButtonIndexByScreenID(t);return this.getTabButtonIndexByScreenID(e)>o?1:-1},t.prototype.getTabButtonIndexByScreenID=function(e){return this.tabs.map(function(e){return e.getComponent(N.NgcTabButton).activeScreenID()}).indexOf(e)},t.inst=null,i([u({type:[cc.Node]})],t.prototype,"tabs",void 0),i([u(cc.Node)],t.prototype,"selectedBG",void 0),i([u(cc.Node)],t.prototype,"selectedHighlightBG",void 0),i([u],t.prototype,"selectedIconYOffset",void 0),i([u],t.prototype,"defaultIconScale",void 0),i([u],t.prototype,"selectedIconScale",void 0),i([u],t.prototype,"tweenDuration",void 0),i([u(cc.Node)],t.prototype,"loadingNode",void 0),i([u],t.prototype,"delayTimeForLoadingAnimation",void 0),o=i([l],t)}(cc.Component);o.NgcTabBarManager=P,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../../GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Platform/Platform":"Platform","../../Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../NavBar/Script/NavBarManager":"NavBarManager","./TabButton":"TabButton"}],NgcTechMessageUpdateIOS:[function(e,t,o){"use strict";cc._RF.push(t,"a0bf5ZlLy5J5Zs6ByeIHdLu","NgcTechMessageUpdateIOS");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.dialogType="NgcTechMessageUpdateIOS",t.urlPrefab="NgcTechMessageUpdateIOS",t.bundleName="02_techmessage_dialog",i([c],t)}(a.NgcDialogBase));o.default=l,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],NgcTrackingManager:[function(e,t,o){"use strict";cc._RF.push(t,"41c9019Gh9FFqHRcdT5n9gO","NgcTrackingManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Services/Telemetry/Telemetry"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst&&cc.log("Duplicate NgcTrackingManager"),o.inst=this},t.prototype.LogCustomEvent=function(e,t){a.NgcTelemetry.inst.LogCustomEvent(e,t)},t.inst=null,o=i([c],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../../Services/Telemetry/Telemetry":"Telemetry"}],NgcUserInfo:[function(e,t,o){"use strict";cc._RF.push(t,"5f8be7WVZZC9aUsTUD15Rz5","NgcUserInfo"),Object.defineProperty(o,"__esModule",{value:!0}),o.convertToBoolean=o.convertToNum=void 0;var n=e("uuidv4"),r=e("../../../globals"),i=e("../../Core/Utils"),a=e("../../SDK/Nano/NanoSrv"),s=e("../../Services/Platform/Platform"),c=e("./BuildConfig"),l=e("./Network/NetUtils"),u=e("./NgcLocalStorage");function p(e){try{var t=parseFloat(e);return"number"!=typeof t||isNaN(t)?0:t}catch(o){return 0}}function d(e){return"true"==e||1==e}o.convertToNum=p,o.convertToBoolean=d;var f=function(){function e(){this.LOCALIZATION_LANG={ARABIC:cc.sys.LANGUAGE_ARABIC,BULGARIAN:cc.sys.LANGUAGE_BULGARIAN,CHINESE:cc.sys.LANGUAGE_CHINESE,DUTCH:cc.sys.LANGUAGE_DUTCH,ENGLISH:cc.sys.LANGUAGE_ENGLISH,FRENCH:cc.sys.LANGUAGE_FRENCH,GERMAN:cc.sys.LANGUAGE_GERMAN,HUNGARIAN:cc.sys.LANGUAGE_HUNGARIAN,ITALIAN:cc.sys.LANGUAGE_ITALIAN,JAPANESE:cc.sys.LANGUAGE_JAPANESE,KOREAN:cc.sys.LANGUAGE_KOREAN,NORWEGIAN:cc.sys.LANGUAGE_NORWEGIAN,POLISH:cc.sys.LANGUAGE_POLISH,PORTUGUESE:cc.sys.LANGUAGE_PORTUGUESE,ROMANIAN:cc.sys.LANGUAGE_ROMANIAN,RUSSIAN:cc.sys.LANGUAGE_RUSSIAN,SPANISH:cc.sys.LANGUAGE_SPANISH,TURKISH:cc.sys.LANGUAGE_TURKISH,UKRAINIAN:cc.sys.LANGUAGE_UKRAINIAN,UNKNOWN:cc.sys.LANGUAGE_UNKNOWN,VIETNAM:"vn"}}return Object.defineProperty(e,"soundOff",{get:function(){return void 0===this._soundOff&&(this._soundOff=d(u.default.getKey(this.SOUND_OFF,!1))),this._soundOff},set:function(e){this._soundOff=e,u.default.setKey(this.SOUND_OFF,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"musicOff",{get:function(){return void 0===this._musicOff&&(this._musicOff=d(u.default.getKey(this.MUSIC_OFF,!1))),this._musicOff},set:function(e){this._musicOff=e,u.default.setKey(this.MUSIC_OFF,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"offlineDailyReward",{get:function(){return u.default.getKey(this.OFFLINE_DAILY_REWARD,null)},set:function(e){u.default.setKey(this.OFFLINE_DAILY_REWARD,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"offlineInventory",{get:function(){return u.default.getKey(this.OFFLINE_INVENTORY,null)},set:function(e){u.default.setKey(this.OFFLINE_INVENTORY,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"curLanguage",{get:function(){return this.lang_selected?u.default.getKey(this.CUR_LOCALIZATION_LANG,cc.sys.language):["zh-cn","zh-sg"].includes(cc.sys.languageCode)?"zh":["zh-tw","zh-mo","zh-hk"].includes(cc.sys.languageCode)?"cn":cc.sys.language},set:function(e){this.lang_selected=!0,u.default.setKey(this.CUR_LOCALIZATION_LANG,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"localUserName",{get:function(){return u.default.getKey(this.USER_NAME_LOCAL,this._localUserName)},set:function(e){u.default.setKey(this.USER_NAME_LOCAL,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"facebookId",{get:function(){return u.default.getKey(this.CUR_FACEBOOK_ID,this._facebookId,!1)},set:function(e){u.default.setKey(this.CUR_FACEBOOK_ID,e,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"avatarUrl",{get:function(){return u.default.getKey(this.CUR_AVATAR_URL,this._avatarUrl,!1)},set:function(e){u.default.setKey(this.CUR_AVATAR_URL,e,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"secretKey",{get:function(){if(null!=this._secretKey&&""!=this._secretKey)return this._secretKey;var e="";try{e=n.uuid()}catch(o){e=l.NgcNetUtils.generateRandomUUID()}var t=u.default.getKey(this.SECRET_KEY,e);return t===e&&(this.secretKey=e),t},set:function(e){u.default.setKey(this.SECRET_KEY,e),this._secretKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"userIdKey",{get:function(){if(null!=this._userIdKey&&""!=this._userIdKey)return this._userIdKey;var e="";try{e=n.uuid()}catch(o){e=l.NgcNetUtils.generateRandomUUID()}var t=u.default.getKey(this.USERID_KEY,e);return t===e?this.userIdKey=e:this._userIdKey=t,t},set:function(e){u.default.setKey(this.USERID_KEY,e),this._userIdKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"userAppId",{get:function(){return null!=this._userAppId&&""!=this._userAppId?this._userAppId:u.default.getKey(this.APP_USER_ID_KEY,this._userAppId)},set:function(e){u.default.setKey(this.APP_USER_ID_KEY,e),this._userAppId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"facebookAccessToken",{get:function(){return u.default.getKey(this.FACEBOOK_ACCESS_TOKEN,null,!1)},set:function(e){u.default.setKey(this.FACEBOOK_ACCESS_TOKEN,e,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"gameRunningSession",{get:function(){return u.default.getKey(this.GAME_RUNNING_SESSION,"")},set:function(e){u.default.setKey(this.GAME_RUNNING_SESSION,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"totalRoundCount",{get:function(){var e=this;if(c.NgcBuildConfig.offlineMode)return this._totalRoundCount=r.default.OfflineMode.GetTotalRoundCount();if(null==this._totalRoundCount){if(this.readTotalRoundCount)return this._totalRoundCount;this.readTotalRoundCount=!0,a.default.inst.serviceGet("/playerdata",null,function(t,o){t||(e._totalRoundCount=Number(JSON.parse(o).data._totalRoundCount)||0)})}return this._totalRoundCount},enumerable:!1,configurable:!0}),e.uploadTotalRoundCount=function(){if(c.NgcBuildConfig.offlineMode)r.default.OfflineMode.IncTotalRoundCount();else{var t={_totalRoundCount:(e._totalRoundCount||0)+1};e._totalRoundCount+=1,a.default.inst.servicePost("/playerdata",JSON.stringify(t),function(){})}},Object.defineProperty(e,"onboardingEventFlags",{get:function(){var e=u.default.getKey("onboarding_events",null);if(e)try{this._onboardingEventFlags=JSON.parse(e)}catch(t){this._onboardingEventFlags=e}return this._onboardingEventFlags},enumerable:!1,configurable:!0}),e.setOnBoardingEventFlags=function(e){this._onboardingEventFlags[e]=!0,u.default.setKey("onboarding_events",JSON.stringify(this._onboardingEventFlags))},Object.defineProperty(e,"visitedScreens",{get:function(){var e=u.default.getKey("visitedScreens",null);if(e)try{this._visitedScreens=JSON.parse(e)}catch(t){this._visitedScreens=e}return this._visitedScreens},enumerable:!1,configurable:!0}),e.addVisitedScreen=function(e){this._visitedScreens[e]=!0,u.default.setKey("visitedScreens",JSON.stringify(this._visitedScreens))},Object.defineProperty(e,"socialId",{get:function(){var e=u.default.getKey(this.CUR_SOCIAL_ID,null,!1);return null!==e&&e.includes(this.CUR_SOCIAL_ID)&&(e=e.substr(this.CUR_SOCIAL_ID.length)),e},set:function(e){e.includes(this.CUR_SOCIAL_ID)||(e=this.CUR_SOCIAL_ID+e),u.default.setKey(this.CUR_SOCIAL_ID,e,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"totalSessions",{get:function(){return p(u.default.getKey(this.TOTAL_SESSIONS,0))},set:function(e){u.default.setKey(this.TOTAL_SESSIONS,e)},enumerable:!1,configurable:!0}),e.isUserLogined=function(){return null!==e.socialId&&void 0!==e.socialId&&""!==e.socialId},Object.defineProperty(e,"isFirstTimeClicked",{get:function(){return d(u.default.getKey(this.FIRST_TIME_CLICK,!1))},set:function(e){u.default.setKey(this.FIRST_TIME_CLICK,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"added_A2HS",{get:function(){return d(u.default.getKey(this.ADDED_A2HS,!1))},set:function(e){this._added_A2HS=e,u.default.setKey(this.ADDED_A2HS,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"lang_selected",{get:function(){return d(u.default.getKey(this.LANG_SELECTED,!1))},set:function(e){u.default.setKey(this.LANG_SELECTED,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"sharedGame_NavBar",{get:function(){return d(u.default.getKey(this.SHARED_GAME_IN_NAVBAR,!1))},set:function(e){this._sharedGame_NavBar=e,u.default.setKey(this.SHARED_GAME_IN_NAVBAR,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"changedName",{get:function(){return d(u.default.getKey(this.CHANGED_NAME,!1))},set:function(e){this._changedName=e,u.default.setKey(this.CHANGED_NAME,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numberOfAdsWatched",{get:function(){return p(u.default.getKey(this.NUMBER_OF_ADS_WATCHED,0))},set:function(e){u.default.setKey(this.NUMBER_OF_ADS_WATCHED,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"numberAdsSession",{get:function(){return p(u.default.getKey(this.NUMBER_OF_ADS_SESSION,0))},set:function(e){this.isAddedThisSession||(u.default.setKey(this.NUMBER_OF_ADS_SESSION,e),this.isAddedThisSession=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ticketAmount",{get:function(){return p(u.default.getKey(this.TICKET_AMOUNT,0))},set:function(e){u.default.setKey(this.TICKET_AMOUNT,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"gameModePoint",{get:function(){return p(u.default.getKey(this.GAME_MODE_POINT,0))},set:function(e){u.default.setKey(this.GAME_MODE_POINT,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"supportCode",{get:function(){return u.default.getKey(this.SUPPORT_CODE,"")},set:function(e){u.default.setKey(this.SUPPORT_CODE,e)},enumerable:!1,configurable:!0}),e.updateAdsInfo=function(){this.numberOfAdsWatched++,this.numberAdsSession++},e.isNameCorrectFormat=function(e){if(e.length>12)return!1;var t=e.split(" ");return!(t[0].length>9||t.length>1&&(2!==t[1].length||"."!==t[1][1]))},e.correctNameFormat=function(t){if(e.isNameCorrectFormat(t))return t;var o=t.split(" ");if(1!==o.length){var n=o[0];n.length>9&&(n=n.slice(0,e.MAX_FIRST_NAME_LENGHT-3)+"...");var r=o[1];return r.length>0&&(r=r[0]+"."),n+" "+r}return o[0].length>9?o[0].slice(0,e.MAX_FIRST_NAME_LENGHT-3)+"...":t},Object.defineProperty(e,"changeNameLocation",{get:function(){return u.default.getKey(this.CHANGE_NAME_LOCATION,"")},set:function(e){u.default.setKey(this.CHANGE_NAME_LOCATION,e)},enumerable:!1,configurable:!0}),e.setAccountLinkData=function(t){void 0===t&&(t=null),s.NgcPlatform.isRunAsIframeOnNano()||((t=t||{}).playerId=e.userIdKey,t.secretKey=e.secretKey,t.name=e.localUserName,t.hasOwnProperty("platform")&&(t.socialId=e.socialId,t.avatarUrl=e.avatarUrl,t.facebookAccessToken=e.facebookAccessToken),u.default.setKey("NGC_AccountData",JSON.stringify(t),!1),s.NgcPlatform.isRunFromApp()&&s.NgcPlatform.inst.onPostMessage(JSON.stringify({RESET_ACCOUNT_DATA:t}),"*"),console.log("NGC set link account",t))},e.getNanoUserInfoFromLocalstorage=function(t){void 0===t&&(t=!0);var o=u.default.getKey("userInfo",null,!1);if(o){var n=o;return t&&(e.nanoLoginData=n,e.userIdKey=n.userId||n.playerId,e.secretKey=n.secretKey,e.localUserName=n.name,e.socialId=n.socialId||"",console.log("Iframe linked successfully",o)),n}return null},e.generateGuestName=function(){e.localUserName="Guest"+l.NgcNetUtils.RandomRange(1,9999,!0).toString()},e.resetWhenLoggedInFromAnotherPlace=function(t){var o=e.userIdKey;if(this.resetNgcData(),s.NgcPlatform.isRunAsIframeOnNano()){window.parent.postMessage(JSON.stringify({RESET_ACCOUNT_DATA:!0}),"*");var n=setInterval(function(){var r=e.getNanoUserInfoFromLocalstorage(!1);r&&o!==r.playerId&&(clearInterval(n),t&&t(),location.reload())},250)}else e.generateGuestName(),window.accountURLLinked&&e.setAccountLinkData(),t&&t(),location.reload()},Object.defineProperty(e,"realPrizeVisited",{get:function(){return d(u.default.getKey(this.VISITED_REAL_PRIZE,!1))},set:function(e){u.default.setKey(this.VISITED_REAL_PRIZE,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shownXBPEvents",{get:function(){var e=u.default.getKey(this.XBP_EVENT_SHOWN,null);if(e)try{this._shownXBPEvents=JSON.parse(e)}catch(t){this._shownXBPEvents=e}return this._shownXBPEvents},enumerable:!1,configurable:!0}),e.addShownXBPEvent=function(e){this._shownXBPEvents[e]=!0,u.default.setKey(this.XBP_EVENT_SHOWN,JSON.stringify(this._shownXBPEvents))},e.resetNgcData=function(){e.localUserName="",e.totalSessions=0,e.socialId="",e.facebookId="",e.avatarUrl="",e.numberOfAdsWatched=0,e.numberAdsSession=0,e.isAddedThisSession=!1,e.secretKey="",e.userIdKey="",e.gameModePoint=0,e.supportCode="",e.changeNameLocation="",e.changedName=!1,i.Utils.deleteCookie("fblo_"+c.NgcBuildConfig.SDK.FacebookSrv.appID)},e.SOUND_OFF="SOUND_OFF",e.MUSIC_OFF="MUSIC_OFF",e.USER_NAME_LOCAL="USER_NAME_LOCAL",e.CUR_FACEBOOK_ID="CUR_FACEBOOK_ID",e.CUR_SOCIAL_ID="CUR_SOCIAL_ID",e.CUR_AVATAR_URL="CUR_AVATAR_URL",e.CUR_LOCALIZATION_LANG="CUR_LOCALIZATION_LANG",e.FACEBOOK_ACCESS_TOKEN="FACEBOOK_ACCESS_TOKEN",e.SECRET_KEY="secretKey",e.USERID_KEY="userIdKey",e.GAME_RUNNING_SESSION="GAME_RUNNING_SESSION",e.GAME_VERSION="GAME_VERSION",e.TOTAL_SESSIONS="TOTAL_SESSIONS",e.TOTAL_GAME_ROUNDS="TOTAL_GAME_ROUNDS",e.ADDED_A2HS="ADDED_A2HS",e.SHARED_GAME_IN_NAVBAR="SHARED_GAME_IN_NAVBAR",e.CHANGED_NAME="CHANGED_NAME",e.NUMBER_OF_ADS_WATCHED="NUMBER_OF_ADS_WATCHED",e.NUMBER_OF_ADS_SESSION="NUMBER_OF_ADS_SESSION",e.OFFLINE_DAILY_REWARD="DailyReward",e.OFFLINE_INVENTORY="Inventory",e.TICKET_AMOUNT="TICKET_AMOUNT",e.GAME_MODE_POINT="GAME_MODE_POINT",e.SUPPORT_CODE="SUPPORT_CODE",e.LANG_SELECTED="LANG_SELECTED",e.APP_USER_ID_KEY="appUserIdKey",e.CHANGE_NAME_LOCATION="CHANGE_NAME_LOCATION",e.NANO_LOGIN_DATA="NANO_LOGIN_DATA",e.FIRST_TIME_CLICK="FirstTimeClickPlay",e.VISITED_REAL_PRIZE="VISITED_REALPRIZE",e.XBP_EVENT_SHOWN="XBP_EVENT_SHOWN",e._localUserName="",e._facebookId="",e._avatarUrl="",e._secretKey="",e._userIdKey="",e._userAppId="",e._totalRoundCount=null,e.readTotalRoundCount=!1,e._onboardingEventFlags={},e._visitedScreens={},e.sessionKey="",e._added_A2HS=!1,e._sharedGame_NavBar=!1,e._changedName=!1,e.isAddedThisSession=!1,e.MAX_FIRST_NAME_LENGHT=9,e.nanoLoginData=null,e._shownXBPEvents={},e}();o.default=f,cc._RF.pop()},{"../../../globals":"globals","../../Core/Utils":"Utils","../../SDK/Nano/NanoSrv":"NanoSrv","../../Services/Platform/Platform":"Platform","./BuildConfig":"BuildConfig","./Network/NetUtils":"NetUtils","./NgcLocalStorage":"NgcLocalStorage",uuidv4:146}],NgcVersion:[function(e,t,o){"use strict";cc._RF.push(t,"274a1VKRfdOmLLZdoTXx+6A","NgcVersion"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcVersionConfig=void 0,o.NgcVersionConfig={buildNgcVersion:"NGC v4.3.0h"},cc._RF.pop()},{}],NgcWorldPosInterface:[function(e,t,o){"use strict";cc._RF.push(t,"8042fBacs9ChI1ZDgzF6Z2W","NgcWorldPosInterface"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],NgcXInOneBundleDialog:[function(e,t,o){"use strict";cc._RF.push(t,"b5ef8mO9YlJHaN6/o9Ww+hH","NgcXInOneBundleDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,r++)n[r]=i[a];return n};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../../GameFramework/Scripts/Ads/NgcAdsManager"),c=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),l=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),u=e("../../../GameFramework/Scripts/Localized/TimerLabelLocalized"),p=e("../../../GameFramework/Scripts/NgcShopManager"),d=e("../../../Services/Telemetry/Telemetry"),f=e("../../DeliveryReward/Script/DeliveryRewardAnimation"),h=e("../../Dialogs/Script/DialogBase"),g=e("./NgcXInOneBundleManager"),y=e("./NgcXInOneDataInterface"),m=cc._decorator,_=m.ccclass,v=m.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainHeaderLbl=null,t.itemNameLbl=null,t.discountLbl=null,t.posterSprite=null,t.timerLbl=null,t.progressBar=null,t.adCounterLbl=null,t.adIconNode=null,t.blockTouchNode=null,t.configData=null,t.rewardItemsForAnimation=null,t.adButtonClicked=!1,t.firstTime=!1,t.claimedBundle=!1,t}return r(t,e),t.prototype.initBundle=function(e,t){this.configData=e,this.firstTime=t,this.refreshPopup(),this.resizePopupBeforeShow(),this.show()},t.prototype.refreshPopup=function(){var e=this.configData,t=(e.results,e.conditions),o=e.offerEndTime,n=e.title,r=e.valueTag;this.mainHeaderLbl.textKey=n,this.mainHeaderLbl.updateString();var i=o-Date.now();i=i<0?0:i,this.timerLbl.startCount(i),this.timerLbl.setTimerExpiredCallback(this.onTimerExpired.bind(this)),this.posterSprite.spriteFrame=g.default.getInstance().getCachedSpriteFrame("poster");var a=t.get[0];this.updateBaseOnMainCondition(a,this.configData),this.itemNameLbl.string=this.getItemNames().join(", "),this.discountLbl.string=l.NgcLocalizedManager.t("XBP_VALUE_OFF").text.replace("X",r.toString())},t.prototype.onTimerExpired=function(){this.hide()},t.prototype.onAdButtonClick=function(){if(!this.adButtonClicked){this.adButtonClicked=!0;var e=this.configData.conditions.get[0];e&&null!=e.ads?this.onAdFlow():this.onNormalFlow()}},t.prototype.onAdFlow=function(){var e=this,t=this.configData.conditions.get[0],o=this.configData.rewards.map(function(e){return e.itemID}),n=this.configData.rewards.map(function(e){return e.count});s.default.inst.showRewardVideo(s.NgcPointcuts.videoXInOneBundle,o,n,null,function(o){o?g.default.getInstance().submitAd(function(o){o&&(e.configData=o,e.updateBaseOnMainCondition(t,o),o.claimed?e.claimBundle():e.adButtonClicked=!1)}):e.adButtonClicked=!1})},t.prototype.onNormalFlow=function(){var e=this,t=this.configData.conditions.get[0];g.default.getInstance().submitNormal(null,function(o){o&&(e.configData=o,e.updateBaseOnMainCondition(t,o),o.claimed?e.claimBundle():e.adButtonClicked=!1)})},t.prototype.updateBaseOnMainCondition=function(e,t){if(this.progressBar.node.active=!1,e){if(null!=e.ads){var o=t.results.get.find(function(e){return null!=e.ads}).ads,n=e.ads;this.refreshProgressBar(o,n),this.progressBar.node.active=!0,this.adIconNode.active=!0}null!=e.roundCount&&(o=t.results.get.find(function(e){return null!=e.ads}).ads,n=e.ads,this.refreshProgressBar(o,n),this.progressBar.node.active=!0)}},t.prototype.refreshProgressBar=function(e,t){this.adCounterLbl.string=e+"/"+t,this.progressBar.progress=e/t},t.prototype.claimBundle=function(){var e=this;this.claimedBundle=!0,this.blockTouchNode.active=!0,this.timerLbl.setTimerExpiredCallback(null);var t=this.configData.rewards;this.rewardItemsForAnimation=a(t),cc.tween(this.dialogUsingNode).to(.25,{opacity:0}).start(),cc.tween(this.bgUsingNode).to(.25,{opacity:0}).call(function(){e.showRewardAnimation(function(){e.onClaimBundleFinish()})}).start()},t.prototype.onClaimBundleFinish=function(){cc.systemEvent.emit(y.XInOneBundleEvent.BundleClaimed),p.NgcShopManager.getInstance().updateShop(),this.hide()},t.prototype.showRewardAnimation=function(e){var t=this,o=this.rewardItemsForAnimation.shift();o?f.default.inst.showRewardAnimation(o,function(){p.NgcShopManager.getInstance().updateBoughtItem(o.itemID),t.showRewardAnimation(e)},!0):e&&e()},t.prototype.resizePopupBeforeShow=function(){this.resizeWidget(!0,.85,!0)},t.prototype.sendCloseTrackingAtFirstTime=function(){if(!this.claimedBundle&&this.firstTime){var e=this.configData.results.get[0],t=e?Object.values(e)[0]:0;d.NgcTelemetry.inst.LogEvent_XInOneOfferClosed({count:t})}},t.prototype.hide=function(){this.sendCloseTrackingAtFirstTime(),e.prototype.hide.call(this)},i([v(c.NgcLabelLocalized)],t.prototype,"mainHeaderLbl",void 0),i([v(c.NgcLabelLocalized)],t.prototype,"itemNameLbl",void 0),i([v(c.NgcLabelLocalized)],t.prototype,"discountLbl",void 0),i([v(cc.Sprite)],t.prototype,"posterSprite",void 0),i([v(u.NgcTimerLabelLocalized)],t.prototype,"timerLbl",void 0),i([v(cc.ProgressBar)],t.prototype,"progressBar",void 0),i([v(c.NgcLabelLocalized)],t.prototype,"adCounterLbl",void 0),i([v(cc.Node)],t.prototype,"adIconNode",void 0),i([v(cc.Node)],t.prototype,"blockTouchNode",void 0),i([_],t)}(h.NgcDialogBase);o.default=S,cc._RF.pop()},{"../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/Localized/TimerLabelLocalized":"TimerLabelLocalized","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../Services/Telemetry/Telemetry":"Telemetry","../../DeliveryReward/Script/DeliveryRewardAnimation":"DeliveryRewardAnimation","../../Dialogs/Script/DialogBase":"DialogBase","./NgcXInOneBundleManager":"NgcXInOneBundleManager","./NgcXInOneDataInterface":"NgcXInOneDataInterface"}],NgcXInOneBundleManager:[function(e,t,o){"use strict";cc._RF.push(t,"b4929NZs/xDtbnIQVrtmwGU","NgcXInOneBundleManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../GameFramework/Scripts/NgcUserInfo"),l=e("../../../SDK/Nano/NanoSrv"),u=e("../../../Services/Inventory/Inventory"),p=e("../../../Services/Telemetry/Telemetry"),d=e("./NgcXInOneBundleDialog"),f=e("./NgcXInOneBundleUI"),h=e("./NgcXInOneDataInterface"),g=cc._decorator,y=g.ccclass,m=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dialogPrefab=null,t.uiPrefab=null,t.configData=null,t.needToShowUI=!1,t.needToShowPopup=!1,t.bundleUI=null,t.cachedSpriteFrames={},t}var o;return r(t,e),o=t,t.getInstance=function(){return this.inst},t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){cc.systemEvent.on(h.XInOneBundleEvent.FetchData,this.onFetchData,this),cc.systemEvent.on(h.XInOneBundleEvent.CheckShowDialog,this.showPopup,this),cc.systemEvent.on(h.XInOneBundleEvent.CheckShowUI,this.checkShowUI,this),cc.systemEvent.on(h.XInOneBundleEvent.OfferEnded,this.onOfferEnded,this),cc.systemEvent.on(h.XInOneBundleEvent.UpdatePromo,this.onUpdatePromoEvent,this),cc.systemEvent.on(h.XInOneBundleEvent.BundleClaimed,this.onBundleClaimed,this),this.createUI()},t.prototype.createUI=function(){var e=cc.instantiate(this.uiPrefab),t=e.getComponent(f.default),o=this.node;e.parent=o,e.active=!1,this.bundleUI=t},t.prototype.isBundleAvailable=function(){return!!this.configData&&this.configData.available},t.prototype.onOfferEnded=function(){},t.prototype.onBundleClaimed=function(){p.NgcTelemetry.inst.LogEvent_XInOneOfferPurchased()},t.prototype.checkShowUI=function(){this.needToShowUI=!0},t.prototype.checkShowPopup=function(){this.needToShowPopup=!0},t.prototype.showPopup=function(e){null==e&&(e=null==c.default.shownXBPEvents[this.configData.id]);var t=cc.instantiate(this.dialogPrefab),o=t.getComponent(d.default),n=cc.find("Canvas");t.parent=n,o.initBundle(this.configData,e),p.NgcTelemetry.inst.LogEvent_XInOneOfferDisplay(),c.default.addShownXBPEvent(this.configData.id)},t.prototype.update=function(){this.updateShowUI(),this.updateShowPopup()},t.prototype.updateShowUI=function(){this.needToShowUI&&this.isReady()&&this.isBundleAvailable()&&(this.bundleUI.node.active?this.needToShowUI=!1:(this.bundleUI.node.active=!0,this.bundleUI.init(this.configData),this.needToShowUI=!1))},t.prototype.updateShowPopup=function(){this.needToShowPopup&&this.isReady()&&this.isBundleAvailable()&&(c.default.shownXBPEvents[this.configData.id]||(this.showPopup(!0),this.needToShowPopup=!1))},t.prototype.onFetchData=function(){var e=this;this.fetchData().then(function(t){return a(e,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.configData=t,[4,this.preloadSpriteFrames("icon",this.configData.iconUrl)];case 1:return e.sent(),[4,this.preloadSpriteFrames("poster",this.configData.posterUrl)];case 2:return e.sent(),this.checkShowUI(),[2]}})})})},t.prototype.hasLoadedConfig=function(){return!!this.configData},t.prototype.isReady=function(){return this.hasLoadedConfig()&&!!u.NgcInventory.inst.itemTable&&Object.keys(u.NgcInventory.inst.itemTable).length>0},t.prototype.fetchData=function(){return new Promise(function(e,t){l.default.inst.serviceGet("/eventpromo",null,function(o,n){o?t(null):e(JSON.parse(n).data)})})},t.prototype.testUpdate=function(){this.updatePromo({roundCount:1},null)},t.prototype.updatePromo=function(e,t){var o=this;return new Promise(function(n,r){if(o.configData){var i={prompt:e,get:t};l.default.inst.servicePost("/eventpromo/"+o.configData.id,JSON.stringify(i),function(e,t){if(e)r(null);else{var i=JSON.parse(t).data;o.configData=i,n(o.configData)}})}else r(null)})},t.prototype.onUpdatePromoEvent=function(e,t){var o=this;void 0===e&&(e=null),void 0===t&&(t=null),this.updatePromo(e,t).then(function(){o.checkShowPopup()})},t.prototype.submitNormal=function(e,t){this.updatePromo(null,e).then(function(e){t(e)}).catch(function(){t(null)})},t.prototype.submitAd=function(e){this.updatePromo(null,{ads:1}).then(function(t){e(t)}).catch(function(){e(null)})},t.prototype.getCachedSpriteFrame=function(e){return this.cachedSpriteFrames[e]},t.prototype.preloadSpriteFrames=function(e,t){var o=this;return new Promise(function(n,r){o.cachedSpriteFrames[e]&&n(o.cachedSpriteFrames[e]),cc.assetManager.loadRemote(t,cc.SpriteFrame,function(t,i){t?r(null):(o.cachedSpriteFrames[e]=new cc.SpriteFrame(i),n(o.cachedSpriteFrames[e]))})})},t.inst=null,i([m(cc.Prefab)],t.prototype,"dialogPrefab",void 0),i([m(cc.Prefab)],t.prototype,"uiPrefab",void 0),o=i([y],t)}(cc.Component);o.default=_,cc._RF.pop()},{"../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Inventory/Inventory":"Inventory","../../../Services/Telemetry/Telemetry":"Telemetry","./NgcXInOneBundleDialog":"NgcXInOneBundleDialog","./NgcXInOneBundleUI":"NgcXInOneBundleUI","./NgcXInOneDataInterface":"NgcXInOneDataInterface"}],NgcXInOneBundleUI:[function(e,t,o){"use strict";cc._RF.push(t,"2e06dEwhWlGt6C3bJo4nU84","NgcXInOneBundleUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../GameFramework/Scripts/Localized/TimerLabelLocalized"),s=e("./NgcXInOneBundleManager"),c=e("./NgcXInOneDataInterface"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.configData=null,t.giftSprites=[],t.giftIconSprite=null,t.timerLbl=null,t.glowNode=null,t.displayingItems=[],t.displaySwapCount=0,t.isInitialized=!1,t.originalX=0,t.isBtnClickBlocked=!0,t}return r(t,e),t.prototype.onTestBtn=function(){cc.systemEvent.emit(c.XInOneBundleEvent.UpdatePromo,{roundCount:1})},t.prototype.onLoad=function(){this.getComponent(cc.Widget).updateAlignment(),this.node.opacity=0},t.prototype.start=function(){cc.systemEvent.on(c.XInOneBundleEvent.BundleClaimed,this.onBundleClaimed,this)},t.prototype.init=function(e){this.configData=e,this.isInitialized=!0,this.node.opacity=0,this.refreshUI(),this.show()},t.prototype.show=function(){var e=this;cc.tween(this.node).to(.5,{opacity:255}).call(function(){e.isBtnClickBlocked=!1}).start()},t.prototype.hide=function(){var e=this;this.isBtnClickBlocked=!0,this.isInitialized=!1,cc.tween(this.node).to(.5,{opacity:0}).call(function(){e.node.active=!1}).start()},t.prototype.onUIClick=function(){this.isBtnClickBlocked||cc.systemEvent.emit(c.XInOneBundleEvent.CheckShowDialog)},t.prototype.onBundleClaimed=function(){this.hide()},t.prototype.refreshUI=function(){this.giftIconSprite.spriteFrame=s.default.getInstance().getCachedSpriteFrame("icon"),this.refreshTimer()},t.prototype.refreshTimer=function(){var e=this.configData.offerEndTime-Date.now();e=Math.max(0,e),this.timerLbl.startCount(e),this.timerLbl.setTimerExpiredCallback(this.onTimerExpired.bind(this))},t.prototype.onTimerExpired=function(){cc.systemEvent.emit(c.XInOneBundleEvent.OfferEnded),this.hide()},t.prototype.update=function(e){this.updateGlowSpin(e)},t.prototype.updateGlowSpin=function(e){this.glowNode.angle-=60*e},i([p([cc.Sprite])],t.prototype,"giftSprites",void 0),i([p(cc.Sprite)],t.prototype,"giftIconSprite",void 0),i([p(a.NgcTimerLabelLocalized)],t.prototype,"timerLbl",void 0),i([p(cc.Node)],t.prototype,"glowNode",void 0),i([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/TimerLabelLocalized":"TimerLabelLocalized","./NgcXInOneBundleManager":"NgcXInOneBundleManager","./NgcXInOneDataInterface":"NgcXInOneDataInterface"}],NgcXInOneDataInterface:[function(e,t,o){"use strict";cc._RF.push(t,"eb9f1vwzC1IkL8ja5KBnUsv","NgcXInOneDataInterface"),Object.defineProperty(o,"__esModule",{value:!0}),o.XInOneBundleEvent=void 0,function(e){e.FetchData="FetchData",e.CheckShowDialog="ShowDialog",e.BundleClaimed="BundleClaimed",e.CheckShowUI="CheckShowUI",e.OfferEnded="OfferEnded",e.UpdatePromo="UpdatePromo"}(o.XInOneBundleEvent||(o.XInOneBundleEvent={})),cc._RF.pop()},{}],NoticeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"aebf20CLyhKxregCDz1w9HE","NoticeDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNoticeDialog=void 0;var a=e("../DialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.contentLabel=null,t.icon=null,t._callBackOk=null,t}return r(t,e),t.prototype.init=function(e,t,o,n){void 0===o&&(o=null),void 0===n&&(n=null),this._callBackOk=o,this.titleLabel.string=e,this.contentLabel.string=t,n?(this.icon.spriteFrame=n,this.icon.node.active=!0):this.icon.node.active=!1},t.prototype.OkOnClick=function(){this._callBackOk&&this._callBackOk(),this.hide()},t.dialogType="NgcNoticeDialog",t.urlPrefab="NoticeDialog",t.bundleName="02_dialog",i([l(cc.Label)],t.prototype,"titleLabel",void 0),i([l(cc.Label)],t.prototype,"contentLabel",void 0),i([l(cc.Sprite)],t.prototype,"icon",void 0),i([c],t)}(a.NgcDialogBase);o.NgcNoticeDialog=u,cc._RF.pop()},{"../DialogBase":"DialogBase"}],ObstacleControllerBase:[function(e,t,o){"use strict";cc._RF.push(t,"31ac6DcbgVOybqbfYVbuimt","ObstacleControllerBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../GameObject"),s=e("../TuningData"),c=e("../../globals"),l=e("../GameEnums"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){this.obstacleData=s.default.inst.getGameParameters().obstacles,c.default.SceneManager.inst.addObstacle(this)},t.prototype.onCollisionEnter=function(e,t){var o=e.node.getComponent(a.default);if(o.objectType==a.GameObjectType.Player&&e.tag===l.ColliderTag.CanBeAttacked){var n=this.node.getComponent(a.default).objectType;switch(o.node.parent.emit("collideWithObstacle",this),n){case a.GameObjectType.Bomb:t.node.emit("canExplosion",this);break;case a.GameObjectType.Toxic:t.node.emit("canToxicExplosion",this)}}},t.prototype.getDame=function(){return 0},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.onDestroy=function(){c.default.SceneManager.inst.destroyObstacleByuuid(this.node.uuid)},i([p],t)}(cc.Component));o.default=d,cc._RF.pop()},{"../../globals":"globals","../GameEnums":"GameEnums","../GameObject":"GameObject","../TuningData":"TuningData"}],OffFrameTasksMgr:[function(e,t,o){"use strict";cc._RF.push(t,"5d698zL5k5BVqU5drC7cObP","OffFrameTasksMgr");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i,a=e("./PerformanceTask"),s=e("../Utils/CustomEventEmitter"),c=e("./PerformanceMonitor");(function(e){e[e.SINGLE_TASK_FINISHED=0]="SINGLE_TASK_FINISHED",e[e.ALL_TASKS_FINISHED=1]="ALL_TASKS_FINISHED"})(i||(i={}));var l=function(e){function t(){var t=e.call(this)||this;return t._tasks=[],t._urgentTasks=[],t._init(),t}return r(t,e),Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype._init=function(){this._registerOffFrameCb()},t.prototype._registerOffFrameCb=function(){c.default.inst.on(c.default.events.FRAME_FREE_TIME,this._offFrameTriggered,this)},t.prototype._unregisterFreeTimeCb=function(){c.default.inst.off(c.default.events.FRAME_FREE_TIME,this._offFrameTriggered,this)},t.prototype._onCompleted=function(){this._unregisterFreeTimeCb(),this.emit(i.ALL_TASKS_FINISHED)},t.prototype.isCompleted=function(){return this._tasks.length<=0},t.prototype.addTask=function(e,t,o,n,r){void 0===r&&(r=!1),this.isCompleted()&&this._registerOffFrameCb();var i=new a.default(e,t,o,n);r?this._urgentTasks.push(i):this._tasks.push(i)},t.prototype.manuallyUpdate=function(e){this._updateWithTimeBox(e)},t.prototype._offFrameTriggered=function(e){var t=e-Date.now();t>0&&this._updateWithTimeBox(t)},t.prototype._updateWithTimeBox=function(e){for(var o=this._urgentTasks.length+this._tasks.length;e>0&&this._urgentTasks.length>0;)e-=r=(n=this._urgentTasks.shift()).exec(),this.emit(t.events.SINGLE_TASK_FINISHED,n.tag,r);for(;e>0&&this._tasks.length>0;){var n,r;e-=r=(n=this._tasks.shift()).exec(),this.emit(t.events.SINGLE_TASK_FINISHED,n.tag,r)}o>0&&this._urgentTasks.length+this._tasks.length<=0&&this._onCompleted()},t.events=i,t}(s.default);o.default=l,cc._RF.pop()},{"../Utils/CustomEventEmitter":"CustomEventEmitter","./PerformanceMonitor":"PerformanceMonitor","./PerformanceTask":"PerformanceTask"}],OffScreen:[function(e,t,o){"use strict";cc._RF.push(t,"4eeacoywW1E7pyO9GKACFUb","OffScreen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../GameCamera"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.referenceCamera=null,t.myLocalBoundingBox=null,t.cameraHelper=null,t}return r(t,e),t.prototype.start=function(){this.myLocalBoundingBox=this.node.getBoundingBox(),this.myWidth=this.myLocalBoundingBox.width,this.myWidth<50&&(this.myWidth=50),this.myHeight=this.myLocalBoundingBox.height,this.myHeight<50&&(this.myHeight=50)},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.getScreenRect=function(e){var t=e.getBoundingBoxToWorld(),o=cc.v2(0,0),n=cc.v2(0,0),r=this.referenceCamera||a.default.inst.cameraOb;return r.getWorldToScreenPoint(cc.v2(t.xMin,t.yMin),o),r.getWorldToScreenPoint(cc.v2(t.xMax,t.yMax),n),{min:o,max:n}},t.prototype.IsNodeVisible=function(e){if(!a.default.inst||!a.default.inst.worldBound)return!1;var t=a.default.inst.worldBound;if(this.referenceCamera||"DeathZone"===this.node.group||null===t){var o=this.getScreenRect(e);return!(o.max.x<-this.myWidth||o.min.x>a.default.inst.screenWidth+this.myWidth||o.max.y<-this.myHeight||o.min.y>a.default.inst.screenHeight+this.myHeight)}return!(this.node.position.x+this.myWidth+500<t[0]||this.node.position.y+2*this.myHeight<t[1]||this.node.position.x-2*this.myWidth>t[2]||this.node.position.y-2*this.myHeight>t[3])},i([l(cc.Camera)],t.prototype,"referenceCamera",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../GameCamera":"GameCamera"}],OfflineMode:[function(e,t,o){"use strict";cc._RF.push(t,"5e8d1UV/3ND45p0P9vv3EIS","OfflineMode");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.OfflineMode=o.__DEV_DAILY_REWARD__=void 0;var i=e("../../../globals"),a=e("../../../NanoGameCore/Core/Utils"),s=e("../../../NanoGameCore/GameFramework/Scripts/NgcLocalStorage"),c=e("../../../NanoGameCore/Services/Inventory/Inventory"),l=e("../../../Scripts/UserInfo"),u=e("../../SDK/Nano/NanoSrv");o.__DEV_DAILY_REWARD__=!1;var p=function(){function e(){}return e.Init=function(){return n(this,void 0,void 0,function(){var t,o,n,i;return r(this,function(r){switch(r.label){case 0:return t=e,[4,a.LoadAsset("offline:config/offline-config")];case 1:return t.Config=r.sent().json,e.GetInventory()?[3,3]:[4,a.LoadAsset("offline:text/start-inventory")];case 2:o=r.sent(),s.default.setKey("offline-inventory",o.json),r.label=3;case 3:return e.GetDailyRewardState()||s.default.setKey("offline-daily-reward-state",{curStep:"1",curStepStartDate:Date.now()}),[4,a.LoadAsset("offline:text/game-info")];case 4:return n=r.sent(),u.default.inst.loginData.gameInfo=n.json,null==s.default.getKey("offline-free-offer",null)&&s.default.setKey("offline-free-offer",!0),i=this,[4,a.LoadAsset("offline:text/profanity")];case 5:return i.profanityList=r.sent().json,[2]}})})},e.ProfanityCheck=function(e){var t=this,o=!1,n=(e=(e=(e=e.trim().toLocaleLowerCase()).replace(/^[0-9]+/i,"")).replace(/[0-9]+$/i,"")).split(" "),r=n.join("");for(var i in this.profanityList)this.profanityList[i].includes(e)&&(o=!0),n.forEach(function(e){t.profanityList[i].includes(e)&&(o=!0)}),this.profanityList[i].filter(function(e){return r.includes(e)}).length>1&&(o=!0);return!o},e.GetInventory=function(){return s.default.getKey("offline-inventory",null)},e.UpdateItem=function(e,t){var o=this.GetInventory();o[e]?o[e].count+=t:o[e]={count:t,itemID:e},s.default.setKey("offline-inventory",o),l.UserInfo.updateInventoryWithPlatform()},e.GetDailyRewardState=function(){return s.default.getKey("offline-daily-reward-state",null)},e.SetDailyRewardState=function(e){s.default.setKey("offline-daily-reward-state",e)},e.GetFreeOffer=function(){return s.default.getKey("offline-free-offer",null)},e.SetFreeOffer=function(e){return s.default.setKey("offline-free-offer",e)},e.MarkClaimLuckyBooster=function(e){s.default.setKey("offline-luckybooster-claimtime",{itemID:e,time:Date.now()})},e.GetMarkedLuckyBooster=function(){return s.default.getKey("offline-luckybooster-claimtime",null)},e.CleanLuckyBooster=function(){return n(this,void 0,void 0,function(){var e;return r(this,function(){return(e=this.GetMarkedLuckyBooster())?(c.NgcInventory.inst.ownedItems[e.itemID].count=0,this.UpdateItem(l.UserInfo.curBooster,-1),l.UserInfo.curBooster="",[2]):[2]})})},e.GetTotalRoundCount=function(){return parseInt(s.default.getKey("offline-total-round-count",0))},e.IncTotalRoundCount=function(){var e=this.GetTotalRoundCount();s.default.setKey("offline-total-round-count",e+1)},e.profanityList={},e}();o.OfflineMode=p,i.default.OfflineMode=p,cc._RF.pop()},{"../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/GameFramework/Scripts/NgcLocalStorage":"NgcLocalStorage","../../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../../Scripts/UserInfo":"UserInfo","../../../globals":"globals","../../SDK/Nano/NanoSrv":"NanoSrv"}],OffscreenDisableAllRenders:[function(e,t,o){"use strict";cc._RF.push(t,"ad4aesMWZdPlqFGwm+TAgnJ","OffscreenDisableAllRenders");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Main"),s=e("./OffScreen"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rootNode=null,t.myGroupID=0,t}var o;return r(t,e),o=t,t.prototype.start=function(){e.prototype.start.call(this),this.myGroupID=15&o.nextID,o.nextID++},t.prototype.update=function(){this.rootNode&&(15&a.Main.inst.frameCounter)==this.myGroupID&&this.rootNode&&(this.IsNodeVisible(this.node)?this.rootNode.getComponentsInChildren(cc.RenderComponent).forEach(function(e){e.enabled=!0}):this.rootNode.getComponentsInChildren(cc.RenderComponent).forEach(function(e){e.enabled=!1}))},t.nextID=0,i([u(cc.Node)],t.prototype,"rootNode",void 0),o=i([l],t)}(s.default);o.default=p,cc._RF.pop()},{"../Main":"Main","./OffScreen":"OffScreen"}],OffscreenDisableCollider:[function(e,t,o){"use strict";cc._RF.push(t,"790c7+JNtlIboeiAMZQpOM9","OffscreenDisableCollider");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./OffScreen"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boxCollider=null,t}return r(t,e),t.prototype.start=function(){e.prototype.start.call(this),this.boxCollider=this.node.getComponent(cc.BoxCollider)},t.prototype.update=function(){this.IsNodeVisible(this.node)?this.boxCollider&&(this.boxCollider.enabled=!0):this.boxCollider&&(this.boxCollider.enabled=!1)},i([c],t)}(a.default));o.default=l,cc._RF.pop()},{"./OffScreen":"OffScreen"}],OffscreenDisableRender:[function(e,t,o){"use strict";cc._RF.push(t,"18ff71NvU1A+7f7tTqIkv5o","OffscreenDisableRender");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Main"),s=e("./OffScreen"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderComponent=null,t.myGroupID=0,t}var o;return r(t,e),o=t,t.prototype.start=function(){e.prototype.start.call(this),this.myGroupID=15&o.nextID,o.nextID++},t.prototype.update=function(){this.renderComponent&&(15&a.Main.inst.frameCounter)==this.myGroupID&&this.renderComponent&&(this.IsNodeVisible(this.node)?this.renderComponent.enabled||(this.renderComponent.enabled=!0):this.renderComponent.enabled&&(this.renderComponent.enabled=!1))},t.nextID=0,i([u(cc.RenderComponent)],t.prototype,"renderComponent",void 0),o=i([l],t)}(s.default);o.default=p,cc._RF.pop()},{"../Main":"Main","./OffScreen":"OffScreen"}],Parallax:[function(e,t,o){"use strict";cc._RF.push(t,"d2c7eeXX3BDVbZbJWarjQl8","Parallax");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./GameCamera"),s=e("./../globals"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainCamera=null,t.parallax_X=!0,t.mainCameraOffsetScaleX=1,t.parallax_Y=!0,t.mainCameraOffsetScaleY=1,t.myStartX=0,t.myStartY=0,t}return r(t,e),t.prototype.onLoad=function(){this.myStartX=this.getWorldPosition().x,this.myStartY=this.getWorldPosition().y},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.start=function(){},t.prototype.update=function(){var e=this.getWorldPosition().x,t=this.getWorldPosition().y;this.parallax_X&&(e=this.myStartX-(this.mainCamera.getWorldPosition().x-this.myStartX)*this.mainCameraOffsetScaleX),this.parallax_Y&&(t=this.myStartY-(this.mainCamera.getWorldPosition().y-this.myStartY)*this.mainCameraOffsetScaleY),this.setWorldPosition(cc.v2(e,t))},i([u(a.default)],t.prototype,"mainCamera",void 0),i([u],t.prototype,"parallax_X",void 0),i([u({visible:function(){return this.parallax_X}})],t.prototype,"mainCameraOffsetScaleX",void 0),i([u],t.prototype,"parallax_Y",void 0),i([u({visible:function(){return this.parallax_Y}})],t.prototype,"mainCameraOffsetScaleY",void 0),i([l],t)}(cc.Component);o.default=p,s.default.Parallax=p,cc._RF.pop()},{"./../globals":"globals","./GameCamera":"GameCamera"}],ParticleFollow:[function(e,t,o){"use strict";cc._RF.push(t,"c1e63GhzeZDwa9gyOhz+RYU","ParticleFollow");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.particleFollow=null,t}return r(t,e),t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.create=function(e,t){var o=cc.instantiate(this.particleFollow);return o.parent=this.node,e&&this.setWorldPosition(cc.v2(e.x,this.getWorldPosition().y)),t&&this.node.setScale(t),o},i([c(cc.Prefab)],t.prototype,"particleFollow",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],PartyAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"1a28acm81dC8rrnoPBqusnZ","PartyAnimation");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyAnimation=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.waitingGroupNode=null,t}return r(t,e),i([c(cc.Node)],t.prototype,"waitingGroupNode",void 0),i([s],t)}(cc.Component);o.NgcPartyAnimation=l,cc._RF.pop()},{}],PartyInfoBuilder:[function(e,t,o){"use strict";cc._RF.push(t,"f2148afUDNJN5iBC1Owq+Mm","PartyInfoBuilder"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyInfoBuilder=void 0;var n=cc._decorator,r=(n.ccclass,n.property,5),i=function(){function e(){this.netID="",this.playerName="",this.skin={},this.minPlayer=2,this.maxPlayer=2,this.country="",this.avatarURL="",this.joinGamePayload={},this.startGamePayload={},this.isPrivate=!0,this.isAllowBot=!0,this.isLoginSocial=!1,this.isNewUser=!1,this.isAutoStartGame=!1,this.map="",this.timeDelayNextGame=r}return e.prototype.setPrivate=function(e){return this.isPrivate=e,this},e.prototype.setAllowBot=function(e){return this.isAllowBot=e,this},e.prototype.setPlayerName=function(e){return this.playerName=e,this},e.prototype.setCountry=function(e){return this.country=e,this},e.prototype.setPlayerNetID=function(e){return this.netID=e,this},e.prototype.setMaxPlayer=function(e){return this.maxPlayer=e,this},e.prototype.setMinPlayer=function(e){return this.minPlayer=e,this},e.prototype.setNewUser=function(e){return this.isNewUser=e,this},e.prototype.setAutoStartGame=function(e){return this.isAutoStartGame=e,this},e.prototype.setSkin=function(e){return this.skin=e,this},e.prototype.setAvatarURL=function(e){return this.avatarURL=e,this},e.prototype.setLoginSocial=function(e){return this.isLoginSocial=e,this},e.prototype.setTimeDelayNextGame=function(e){return this.timeDelayNextGame=e,this},e.prototype.setJoinPayload=function(e){return this.joinGamePayload=e,this},e.prototype.setStartPayload=function(e){return this.startGamePayload=e,this},e.prototype.setStartGameFuncion=function(e){return this.functionStartGame=e,this},e.prototype.setUpdatePayloadFuncion=function(e){return this.functionUpdateStartPayload=e,this},e.prototype.setOnMultiLoginFuntion=function(e){return this.functionOnMutilLogin=e,this},e.prototype.setOnSocialCallBack=function(e){return this.functionOnSocialCallBack=e,this},e.prototype.getJoinPayload=function(){var e=this.joinGamePayload;return e.avatarUrl=this.avatarURL,e.skin=this.skin,e},e.prototype.getStartPayload=function(){this.functionUpdateStartPayload&&this.functionUpdateStartPayload();var e=this.startGamePayload;return e.isPrivate=this.isPrivate,e.allowBot=this.isAllowBot,e},e.prototype.IsPrivate=function(){return this.isPrivate},e.prototype.IsAllowBot=function(){return this.isAllowBot},e}();o.NgcPartyInfoBuilder=i,cc._RF.pop()},{}],PartyPlayerItem:[function(e,t,o){"use strict";cc._RF.push(t,"8b5eccZjZxDp7DVCLbidsN6","PartyPlayerItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyPlayerItem=void 0;var a=e("../../../Core/Utils"),s=e("../../../GameFramework/Scripts/CountryFlagsManager"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLB=null,t.avatarSpr=null,t.defaultAvatar=null,t.flagSpr=null,t.hostNode=null,t.readySpr=null,t.glowEffect=null,t.isHost=!1,t.glowEffectOnce=!1,t._playGlowOnce=!1,t}return r(t,e),t.prototype.setInfo=function(e,t){void 0===t&&(t=!1),this.netID=e.netID,this.isHost=e.isHost;var o=e.playerName.split("|");if(this.nameLB.string=o[0],this.flagSpr.spriteFrame=s.NgcCountryFlagsManager.inst.getFlagSpriteFrame(o[1]),e.payload.avatarUrl){var n=this;a.Utils.loadSpriteFrameFromURL(e.payload.avatarUrl).then(function(e){n.avatarSpr.spriteFrame=e}).catch(function(){})}else this.defaultAvatar&&(this.avatarSpr.spriteFrame=this.defaultAvatar);this.enableEffect(t)},t.prototype.enableEffect=function(e){var t=this;cc.log("#Play effect"),this.node.scale=.2,cc.tween(this.node).to(.2,{scale:1.05}).to(.1,{scale:.95}).to(.1,{scale:1}).call(function(){e&&(t.glowEffect.node.active=!0,t.glowEffect.node.active&&(t.glowEffect.setAnimation(0,"joins",!1),t.glowEffect.setCompleteListener(function(){t.glowEffect.node.active=!1})))}).start()},t.prototype.getWorldPos=function(){return this.node.parent.convertToWorldSpaceAR(this.node.position)},i([u(cc.Label)],t.prototype,"nameLB",void 0),i([u(cc.Sprite)],t.prototype,"avatarSpr",void 0),i([u({type:cc.SpriteFrame})],t.prototype,"defaultAvatar",void 0),i([u(cc.Sprite)],t.prototype,"flagSpr",void 0),i([u(cc.Node)],t.prototype,"hostNode",void 0),i([u(cc.Sprite)],t.prototype,"readySpr",void 0),i([u(sp.Skeleton)],t.prototype,"glowEffect",void 0),i([l],t)}(cc.Component);o.NgcPartyPlayerItem=p,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager"}],PartyRoomConfirmDialog:[function(e,t,o){"use strict";cc._RF.push(t,"19c4c8eYmJABIV6cXYyTynI","PartyRoomConfirmDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyRoomConfirmDialog=void 0;var a=e("./PartyRoomDialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.messageLabel=null,t._callBackOk=null,t._callBackClose=null,t}return r(t,e),t.prototype.init=function(e,t,o,n){this._callBackOk=o,this._callBackClose=n,this.titleLabel.string=e,this.messageLabel.string=t,cc.log(this)},t.prototype.okOnClick=function(){cc.log(this),this._callBackOk,"function"==typeof this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.closeOnClick=function(){"function"==typeof this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.dialogType="NgcPartyRoomConfirmDialog",t.urlPrefab="PartyRoomConfirmDialog",i([l(cc.Label)],t.prototype,"titleLabel",void 0),i([l(cc.Label)],t.prototype,"messageLabel",void 0),i([c],t)}(a.NgcPartyRoomDialogBase);o.NgcPartyRoomConfirmDialog=u,cc._RF.pop()},{"./PartyRoomDialogBase":"PartyRoomDialogBase"}],PartyRoomDialogBase:[function(e,t,o){"use strict";cc._RF.push(t,"3196bhdpJZCEoGebLHKXqNS","PartyRoomDialogBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyRoomDialogBase=void 0;var a=e("../../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.show=function(t){e.prototype.show.call(this,t)},t.prototype.hide=function(){e.prototype.hide.call(this)},t.dialogType="NgcPartyRoomDialogBase",t.bundleName="02_dialog_PWF",i([c],t)}(a.NgcDialogBase));o.NgcPartyRoomDialogBase=l,cc._RF.pop()},{"../../../Dialogs/Script/DialogBase":"DialogBase"}],PartyRoomEnterCodeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"71460+chIVEJa0PtvqreWM5","PartyRoomEnterCodeDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../../Services/PartyRoom/PartyRoom"),l=e("../../../Dialogs/Script/NgcDialogManager"),u=e("../../../TechMessage/Script/NgcTechMessageUpdateIOS"),p=e("./PartyRoomDialogBase"),d=e("./ScanQRCodeDialog"),f=cc._decorator,h=f.ccclass,g=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.grayBGSF=null,t.redBGSF=null,t.warningNode=null,t.editBox=null,t.okButton=null,t.scanButton=null,t.loadingNode=null,t.editBoxAnim=null,t.wrongNameAnimName=null,t.showSuccessName=null,t.hideSuccessName=null,t.isHiding=!1,t.MAX_NAME_LENGTH=4,t.MAX_CHARACTER_REACHED="NAV_MAX_CHARACTER_REACHED",t}return r(t,e),t.prototype.start=function(){var e=this;this.warningNode.active=!1,this.loadingNode.active=!1,this.okButton.interactable=!0,this.editBoxAnim=this.editBox.getComponent(cc.Animation),this.wrongNameAnimName=this.editBoxAnim.defaultClip.name,this.editBox.maxLength=-1,this.editBox.textLabel.node.color=cc.Color.BLACK,this.editBox.inputFlag=cc.EditBox.InputFlag.INITIAL_CAPS_ALL_CHARACTERS,this.scheduleOnce(function(){e.editBox.focus()},.1);var t=this.editBox.node.parent.getChildByName("OR");this.scanButton.node.active=cc.sys.isMobile,t&&(t.active=cc.sys.isMobile)},t.prototype.onEditBoxBegan=function(){!1===this.okButton.interactable&&(this.warningNode.active=!1,this.okButton.interactable=!0),cc.sys.isMobile&&cc.view.resizeWithBrowserSize(!1)},t.prototype.onEditBoxEnd=function(){cc.sys.isMobile&&cc.view.resizeWithBrowserSize(!0)},t.prototype.onEditReturn=function(){this.onOkButtonClick()},t.prototype.onTextChanged=function(){},t.prototype.onQRCodeScannerClick=function(){var e=this;if(navigator.userAgent.match(/iPhone|iPod|iPad/)){var t=(navigator.userAgent.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[""])[0].replace(/_/g,".").split(".");if(parseInt(t[0])<14)return void a(e,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,l.NgcDialogManager.createDialog(u.default.dialogType,u.default.urlPrefab,u.default.bundleName)];case 1:return e.sent().getComponent(u.default).init(),[2]}})})}void 0!==navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(function(t){return a(e,void 0,void 0,function(){var e,o;return s(this,function(n){switch(n.label){case 0:return[4,l.NgcDialogManager.createDialog(d.NgcScanQRCodeDialog.dialogType,d.NgcScanQRCodeDialog.urlPrefab,d.NgcScanQRCodeDialog.bundleName)];case 1:return e=n.sent(),(o=e.getComponent(d.NgcScanQRCodeDialog)).init(t,this.onScanOK.bind(this)),o.show(),[2]}})})}).catch(function(){return a(e,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return[4,l.NgcDialogManager.createDialog(d.NgcScanQRCodeDialog.dialogType,d.NgcScanQRCodeDialog.urlPrefab,d.NgcScanQRCodeDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(d.NgcScanQRCodeDialog)).init(null,this.onScanOK.bind(this)),t.show(),[2]}})})}):alert("Not support!")},t.prototype.onScanOK=function(e){e.match(/id=(.+)/)?(this.warningNode.active=!1,this.editBox.string=RegExp.$1,this.onOkButtonClick()):this.warningNode.active=!0},t.prototype.onOkButtonClick=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return this.loadingNode.active=!0,[4,c.NgcPartyRoom.inst.getRoomCodeInfo(this.editBox.string)];case 1:return e=t.sent(),this.loadingNode.active=!1,this.okButton.interactable=!1,this.editBox.backgroundImage=this.grayBGSF,e&&e.status?(this._callback&&this._callback(e.data),this.hide()):this.warningNode.active=!0,[2]}})})},t.prototype.onGetRoomInfoSuccess=function(e){this._callback=e},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="PartyRoomEnterCode",t.dialogType="NgcPartyRoomEnterCodeDialog",i([g(cc.SpriteFrame)],t.prototype,"grayBGSF",void 0),i([g(cc.SpriteFrame)],t.prototype,"redBGSF",void 0),i([g(cc.Node)],t.prototype,"warningNode",void 0),i([g(cc.EditBox)],t.prototype,"editBox",void 0),i([g(cc.Button)],t.prototype,"okButton",void 0),i([g(cc.Button)],t.prototype,"scanButton",void 0),i([g(cc.Node)],t.prototype,"loadingNode",void 0),i([h],t)}(p.NgcPartyRoomDialogBase);o.default=y,cc._RF.pop()},{"../../../../Services/PartyRoom/PartyRoom":"PartyRoom","../../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../TechMessage/Script/NgcTechMessageUpdateIOS":"NgcTechMessageUpdateIOS","./PartyRoomDialogBase":"PartyRoomDialogBase","./ScanQRCodeDialog":"ScanQRCodeDialog"}],PartyRoomManager:[function(e,t,o){"use strict";cc._RF.push(t,"35a613TXgNJy4xahGrGXEP/","PartyRoomManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyRoomManager=o.PARTY_MENU_SCREEN=void 0;var c,l=e("../../../NanoGameCore/Core/Utils"),u=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),p=e("../../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager"),d=e("../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),f=e("../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomConfirmDialog"),h=e("../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomEnterCodeDialog"),g=e("../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomNoticeDialog"),y=e("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),m=e("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),_=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),v=e("../../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClient"),S=e("../../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClientRefactor"),b=e("../../../NanoGameCore/GameFramework/Scripts/NgcGame"),N=e("../../../NanoGameCore/GameFramework/Scripts/NgcMain"),P=e("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),C=e("../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),w=e("../../../NanoGameCore/SDK/Nano/NanoSrv"),T=e("../../../NanoGameCore/Services/Ads/Ads"),I=e("../../../NanoGameCore/Services/PartyRoom/PartyRoom"),R=e("../../../NanoGameCore/Services/Platform/Platform"),O=e("../../../NanoGameCore/Services/Social/Social"),E=e("../../../NanoGameCore/Services/Telemetry/Telemetry"),k=e("../../UserInfo"),A=e("./PartyRoomUI"),B=cc._decorator,D=B.ccclass,M=B.property;(function(e){e[e.CREATE_GAME_MENU=0]="CREATE_GAME_MENU",e[e.WATING_ROOM_MENU=1]="WATING_ROOM_MENU",e[e.IDLE_MENU=2]="IDLE_MENU"})(c=o.PARTY_MENU_SCREEN||(o.PARTY_MENU_SCREEN={}));var L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.partyRoomUI=null,t.gameTitle="Rabbids Wild Race",t.description="Come join me at this funny Rabbids Wild Race game! ",t.alowPlayerJoin=!0,t._isGameStaredFromRoom=!1,t._isSetupCallback=!1,t._joinByInvited=!1,t._curRoomState=I.PARTY_ROOM_STATE.RECRUITING,t._socialShareURL="",t._isShowingErrorPopup=!1,t._autoStartGameEventCall=!1,t._autoCrash=!0,t._needToCreateGame=!1,t._isAbleCopy=!1,t._QRCodeShortenLink="",t._roomCode="",t._isShowExitPopUp=!1,t.exitDialog=null,t._checkTokenDelayTime=2e3,t._checkTokenCurTime=0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){},t.prototype.timeoutCheckValidToken=function(){var e=this;this.clearTimeOutValidToken(),this.timeOutValidToken=setTimeout(function(){e.checkAuthenticationValid(),e.timeoutCheckValidToken()},5e3)},t.prototype.onResume=function(){this.onActivate()},t.prototype.onPause=function(){p.NgcEmotesManager.inst&&p.NgcEmotesManager.inst.setBroadcastNetID("")},t.prototype.onActivate=function(){var e;this._timeOut&&clearTimeout(this._timeOut),this.timeoutCheckValidToken(),this.setUpCallBackFunctions(),this.partyRoomUI.setLoginStatus(this.builder().isLoginSocial),this.partyRoomUI.showIncomingPlayer(0,!0),this.isGameStartedFromRoom()?(E.NgcTelemetry.inst.LogEvent_ReturnParty(),this.requestReadyToPlay(),p.NgcEmotesManager.inst&&p.NgcEmotesManager.inst.setBroadcastNetID(I.NgcPartyRoom.inst.getPartyID()),this.initEmote()):o.mustGoToPartyRoom()?(cc.log("@You're invited to room"),o.s_enterRoomOnce=!0,this._joinByInvited=!0,this.showUI(),this.switchMenu(c.IDLE_MENU)):(""!=(null===(e=I.NgcPartyRoom.inst)||void 0===e?void 0:e.getPartyID())&&(this.reset(),this.partyRoomUI.setLoginStatus(this.builder().isLoginSocial),this.partyRoomUI.showIncomingPlayer(0,!0)),this.showUI(),this.switchMenu(c.CREATE_GAME_MENU),N.NgcMain.setAppContext(N.AppContext.PartyRoom),E.NgcTelemetry.inst.LogEvent_EnterScreen("PartyRoom")),d.NgcNavBarManager.inst&&(cc.log("@Party init Change Name CallBack"),d.NgcNavBarManager.inst.setChangeNameCallBack(this.onUserChangeName.bind(this)),d.NgcNavBarManager.inst.setLoginSocialCallBack(this.onSocialCallBack.bind(this))),this.checkAuthenticationValid(),this.showBannerAds()},t.prototype.canExitWithoutPrompt=function(){return this._currentMenu!==c.WATING_ROOM_MENU},t.prototype.reset=function(){var e;null===(e=I.NgcPartyRoom.inst)||void 0===e||e.reset(),this.onClose(),this.partyRoomUI.reset(),this._curRoomState=I.PARTY_ROOM_STATE.RECRUITING,this._currentMenu=null},t.prototype.clearTimeOutValidToken=function(){this.timeOutValidToken&&(clearTimeout(this.timeOutValidToken),this.timeOutValidToken=null)},t.prototype.checkPlayerIsDead=function(){return!1},t.prototype.onDeactivate=function(){cc.log("@Hide Party with friends"),p.NgcEmotesManager.inst&&p.NgcEmotesManager.inst.setBroadcastNetID("")},t.prototype.update=function(){var e=m.NgcBuildConfig.useNgcServer&&S.NgcNetClientRefactor.inst.isConnected()||v.NgcNetClient.inst.isConnected();this._joinByInvited&&e&&(this._joinByInvited=!1,this.requestToJoinParty(I.NgcPartyRoom.getURLParameter(I.URL_PARAMETER.PARTY_ID)))},t.prototype.setUpCallBackFunctions=function(){I.NgcPartyRoom.inst&&!this._isSetupCallback&&(I.NgcPartyRoom.inst.setAllPartyCallBack(this.onPartyMessage.bind(this),this.onPlayerJoin.bind(this),this.onPlayerQuit.bind(this)),this._isSetupCallback=!0)},t.init=function(e){o.s_requestInfor=e},t.prototype.showUI=function(){this.partyRoomUI.onShow()},t.prototype.closeUI=function(e){void 0===e&&(e=!1),this.switchMenu(c.CREATE_GAME_MENU),this.partyRoomUI.onClose(),this.onClose(),this.requestLeaveParty(),clearTimeout(this._timeOut),this.clearTimeOutValidToken(),this.hideBannerAds(),e&&N.NgcMain.inst.setState(N.AppState.StartScreen),E.NgcTelemetry.inst.LogEvent_LeaveParty(),cc.log("Close UI")},t.prototype.forceClose=function(){this.isGameStartedFromRoom()&&(this.closeUI(!1),this.reset())},t.prototype.onClickRequestJoinGame=function(){this.builder().isLoginSocial||!I.NgcPartyRoom.isLoginMandatory()?(this.showLoading(),this.partyRoomUI.onCreateButtonClick(),this.requestToJoinParty(this.partyRoomUI.partyIDEditBox.string)):this.showLoginDialog()},t.prototype.onClickRequestJoinGameWithCode=function(){cc.log("CLick on JoinGame btn PWF"),this.requestJoinGameWithCode()},t.prototype.requestJoinGameWithCode=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return[4,u.NgcDialogManager.createDialog(h.default.dialogType,h.default.urlPrefab,h.default.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(h.default)).onGetRoomInfoSuccess(this.requestJoinGameFromCodeCallback.bind(this)),t.show(),[2]}})})},t.prototype.requestJoinGameFromCodeCallback=function(e){var t=this;console.log("requestJoinGameFromCodeCallback ",e),I.NgcPartyRoom.getURLParameter(I.URL_PARAMETER.SERVER_URL,e.url);var o=I.NgcPartyRoom.getURLParameter(I.URL_PARAMETER.PARTY_ID,e.url),n=S.NgcNetClientRefactor.inst.websocket,r=function(){t.builder().setPlayerNetID(S.NgcNetClientRefactor.inst.clientID),t.requestToJoinParty(o)};m.NgcBuildConfig.useNgcServer?S.NgcNetClientRefactor.inst.connect(e.serverURL).then(function(){if(S.NgcNetClientRefactor.inst.websocket!==n){var e=S.NgcNetClientRefactor.inst.clientID;new Promise(function(t,o){var n=15,r=setInterval(function(){if(console.log(S.NgcNetClientRefactor.inst.clientID),S.NgcNetClientRefactor.inst.clientID!==e)return t(),void clearInterval(r);0==(n-=1)&&o("Fail")},100)}).finally(function(){r()})}else r()}):v.NgcNetClient.inst.tryConnectToServer(e.serverURL,r)},t.prototype.getRoomCode=function(){return this._roomCode},t.prototype.requestToJoinParty=function(e,t){void 0===e&&(e=""),void 0===t&&(t="");var n=this;if(this._timeOut=setTimeout(function(){n.partyRoomUI.resetButtonCreateGame()},3e4),this.isValidDataRequest()){var r=o.s_requestInfor.getJoinPayload(),i=this.builder().playerName+"|"+this.builder().country,a=this.builder().netID,s=this.builder().minPlayer,c=this.builder().maxPlayer,l=I.NgcPartyRoom.inst.getClientUrl();I.NgcPartyRoom.inst.requestJoinParty(e,t,i,a,l,s,c,r)}else cc.warn("#Party Room : Need to call setPartyInfor() to setup reqest information"),this.displayReloadNoticeDialog()},t.prototype.requestLeaveParty=function(){I.NgcPartyRoom.inst.requestLeaveParty()},t.prototype.requestStartParty=function(){if(I.NgcPartyRoom.inst.isHost()){var e=I.NgcPartyRoom.inst.getPartyID(),t=this.builder().getStartPayload();I.NgcPartyRoom.inst.requestStartParty(e,t)}},t.prototype.requestReadyToPlay=function(){var e=I.NgcPartyRoom.inst.getPartyID();I.NgcPartyRoom.inst.requestReadyToPlay(e)},t.prototype.requestChangeInfor=function(e){var t=I.NgcPartyRoom.inst.getPartyID();if(t){var o=e+"|"+this.builder().country,n=I.NgcPartyRoom.inst.findPlayerByNet(this.builder().netID);n.payload.avatarUrl=this.builder().avatarURL;var r={playerName:o,payload:n.payload};I.NgcPartyRoom.inst.sendMessageToParty(t,I.PARTY_REQUEST_TYPE.CHANGE_INFOR,r)}},t.prototype.isValidDataRequest=function(){return!!(this.builder().netID&&this.builder().playerName&&this.builder().country&&this.builder().minPlayer&&this.builder().maxPlayer)},t.prototype.onPartyMessage=function(e,t){return a(this,void 0,void 0,function(){var o,n,r,i,a,l,u,p=this;return s(this,function(s){switch(s.label){case 0:switch(this.checkAuthenticationValid(),e){case I.PARTY_ROOM_MESSAGE.ON_ROOM_CREATED:return[3,1];case I.PARTY_ROOM_MESSAGE.ON_ROOM_STATE_CHANGE:return[3,5];case I.PARTY_ROOM_MESSAGE.ON_HOST_CHANGE:return[3,6];case I.PARTY_ROOM_MESSAGE.ON_PLAYER_CHANGE_STATUS:return[3,7];case I.PARTY_ROOM_MESSAGE.ON_PLAYER_CHANGE_INFOR:return[3,8];case I.PARTY_ROOM_MESSAGE.ON_GAME_START:return[3,9];case I.PARTY_ROOM_MESSAGE.ON_PLAYER_COMMING:return[3,10]}return[3,11];case 1:return cc.log("@Party ON_ROOM_CREATED",t),(o=t.partyUrl.indexOf("id="))>0&&(this._roomCode=String(t.partyUrl).substring(o+3),cc.log("roomCode ",this._roomCode)),this.isPC()?[4,this.copyClipboard()]:[3,3];case 2:s.sent(),s.label=3;case 3:return cc.log("this._isAbleCopy",this._isAbleCopy),n=I.NgcPartyRoom.inst.getInviteLink(!1)+"&method="+I.INVITE_METHOD.QR_CODE,[4,I.NgcPartyRoom.inst.shortenURL(n)];case 4:return(r=s.sent())&&(console.log(r),(i=JSON.parse(r))&&i.url?i.url.startsWith("http://")&&i.url.startsWith("https://")?this._QRCodeShortenLink=i.url:this._QRCodeShortenLink="https://"+i.url:this._QRCodeShortenLink=I.NgcPartyRoom.inst.getInviteLink()),this.switchMenu(c.WATING_ROOM_MENU),clearTimeout(this._timeOut),[3,11];case 5:return cc.log("@Party ON_ROOM_STATE_CHANGE",t),this.hideLoading(),this._curRoomState=t,this._curRoomState==I.PARTY_ROOM_STATE.RECRUITING||(this._curRoomState==I.PARTY_ROOM_STATE.FULL?(this.requestLeaveParty(),this.showDialogRoomFull()):this._curRoomState==I.PARTY_ROOM_STATE.PLAYING?this.isGameStartedFromRoom()||(this.requestLeaveParty(),this.showDialogGameRunning()):this._curRoomState==I.PARTY_ROOM_STATE.UNAVAILABLE&&this.showDialogEndGame()),[3,11];case 6:return cc.log("@Party ON_HOST_CHANGE",t),a=t,I.NgcPartyRoom.inst.isHost()&&this._curRoomState==I.PARTY_ROOM_STATE.RECRUITING&&(this.showDialogHostChange(),cc.log("@Party ON_HOST_CHANGE You become new host")),this.partyRoomUI.updateHostInfor(a),[3,11];case 7:return cc.log("@Party ON_PLAYER_CHANGE_STATUS",t),l=t,this.partyRoomUI.updatePlayerInfo(l),this.builder().isAutoStartGame&&this.isGameStartedFromRoom()&&I.NgcPartyRoom.inst.isPlayersReady()&&I.NgcPartyRoom.inst.getAllPlayers().length>=this.builder().minPlayer&&this.scheduleOnce(function(){p.partyRoomUI.showIncomingPlayer(0,!1),p.autoStartNextGame(p.builder().timeDelayNextGame)},.5),[3,11];case 8:return cc.log("@Party ON_PLAYER_CHANGE_INFOR",t),l=t,this.partyRoomUI.updatePlayerInfo(l),[3,11];case 9:return t.gameID,t.gamePass,t.serverUrl,this.startGamePlay(t),cc.log("@Party ON_GAME_START",t),[3,11];case 10:return u=t,this.partyRoomUI.showIncomingPlayer(u),[3,11];case 11:return[2]}})})},t.prototype.onPlayerJoin=function(e){cc.log("@Party onPlayerJoin",e);var t=e.netID==this.builder().netID&&!this.isHost()||this.isHost();this.partyRoomUI.addUser(e,t),this.checkAuthenticationValid()},t.prototype.onPlayerQuit=function(e){cc.log("@Party onPlayerQuit",e),this.partyRoomUI.removeUser(e),this.checkAuthenticationValid()},t.prototype.switchMenu=function(e){if(this._currentMenu!=e)switch(this._currentMenu=e,this.partyRoomUI.switchMenuScreen(this._currentMenu),this._currentMenu){case c.CREATE_GAME_MENU:this.hideLoading();break;case c.WATING_ROOM_MENU:this.onRoomCreate();break;case c.IDLE_MENU:this.showLoading()}},t.prototype.isReadyForNextGame=function(){},t.prototype.startGamePlay=function(e){if(this.exitDialog&&this.exitDialog.closeOnClick(),this._isGameStaredFromRoom=!0,cc.log("@Party PlayGame"),this.isHost()){var t={usersInRoom:I.NgcPartyRoom.inst.getAllPlayers().length,roomID:I.NgcPartyRoom.inst.getPartyID(),autoPlayActivated:this.builder().isAutoStartGame};b.NgcGame.generateRoundID(),E.NgcTelemetry.inst.LogEvent_PlayerClickedStartPartyGame(t),this._autoStartGameEventCall&&(this._autoStartGameEventCall=!1)}this.clearTimeOutValidToken(),this.builder().functionStartGame(e),d.NgcNavBarManager.inst.isPopUpShowing()&&d.NgcNavBarManager.inst.getShowingPopUp().forEach(function(e){e&&e.hide()}),this.hideBannerAds()},t.prototype.onClose=function(){this._isGameStaredFromRoom=!1,this._autoStartGameEventCall=!1,this._currentMenu=null},t.prototype.isGameStartedFromRoom=function(){return this._isGameStaredFromRoom},t.prototype.onRoomCreate=function(){return a(this,void 0,void 0,function(){var e,t,o,n,r,i;return s(this,function(){return cc.log("onRoom Create"),this.isHost()&&(e={allowsRandom:!1,roomID:I.NgcPartyRoom.inst.getPartyID()},E.NgcTelemetry.inst.LogEvent_PlayerClickedCreatePartyRoom(e)),t=this,R.NgcPlatform.inst.genQRCode(this._QRCodeShortenLink,function(e){t.partyRoomUI.addQRCode(e)}),this.hideLoading(),this.initEmote(),o="",(n=I.NgcPartyRoom.getURLParameter(I.URL_PARAMETER.METHOD))?n==I.INVITE_METHOD.QR_CODE?o=I.INVITE_METHOD.QR_CODE:n==I.INVITE_METHOD.SOCIAL?o=I.INVITE_METHOD.SOCIAL:n==I.INVITE_METHOD.IN_GAME&&(o=I.INVITE_METHOD.IN_GAME):o=this.isHost()?I.INVITE_METHOD.HOST:I.INVITE_METHOD.SHARE_LINK,r={joinContext:o,isNewUser:this.builder().isNewUser,roomID:I.NgcPartyRoom.inst.getPartyID()},E.NgcTelemetry.inst.LogEvent_JointRoom(r),this.isHost()||this.builder().isLoginSocial||this.partyRoomUI.visibleEditNameTag(!0),i=I.NgcPartyRoom.inst.getInviteLink()+"&method="+I.INVITE_METHOD.SOCIAL,this.genSocialShareURL(i),[2]})})},t.prototype.allowPlayerJoinCheckBox=function(e){this.alowPlayerJoin=e.isChecked},t.prototype.showLoading=function(){this.partyRoomUI.showLoading(!0)},t.prototype.hideLoading=function(){this.partyRoomUI.showLoading(!1)},t.prototype.getGameID=function(){return I.NgcPartyRoom.inst.getGameID()},t.getURLParameter=function(e){return I.NgcPartyRoom.getURLParameter(e)},t.getServerFromInviteLink=function(){return I.NgcPartyRoom.getURLParameter(I.URL_PARAMETER.SERVER_URL)},t.mustGoToPartyRoom=function(){return I.NgcPartyRoom.isPlayerInvited()&&!o.s_enterRoomOnce},t.prototype.isHost=function(){return I.NgcPartyRoom.inst.isHost()},t.prototype.autoStartNextGame=function(e){var t=this;I.NgcPartyRoom.inst.getAllPlayers().length>=this.builder().minPlayer&&this._curRoomState==I.PARTY_ROOM_STATE.RECRUITING?-1==e?(p.NgcEmotesManager.inst.extendEmotesUI(!1),this._autoStartGameEventCall=!0,this.requestStartParty(),this.partyRoomUI.startGameCountDown(!1,e),this.partyRoomUI.enableStartButton(!1,this.isHost())):(this.partyRoomUI.startGameCountDown(!0,e),this.partyRoomUI.enableStartButton(!1,this.isHost()),this.scheduleOnce(function(){t.autoStartNextGame(e-1)},1)):(this.partyRoomUI.startGameCountDown(!1,e),this.partyRoomUI.enableStartButton(!1,this.isHost()))},t.prototype.onUserChangeName=function(e){this.requestChangeInfor(e)},t.prototype.showDialogRoomFull=function(){return a(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return e=this,[4,u.NgcDialogManager.createDialog(g.NgcPartyRoomNoticeDialog.dialogType,g.NgcPartyRoomNoticeDialog.urlPrefab,g.NgcPartyRoomNoticeDialog.bundleName)];case 1:return t=n.sent(),(o=t.getComponent(g.NgcPartyRoomNoticeDialog)).init(_.NgcLocalizedManager.t("PWF_ROOM_FULL").text,_.NgcLocalizedManager.t("PWF_ROOM_FULL_CONTENT").text,function(){e.closeUI(!0)}),o.show(),[2]}})})},t.prototype.showDialogEndGame=function(){return a(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return e=this,[4,u.NgcDialogManager.createDialog(g.NgcPartyRoomNoticeDialog.dialogType,g.NgcPartyRoomNoticeDialog.urlPrefab,g.NgcPartyRoomNoticeDialog.bundleName)];case 1:return t=n.sent(),(o=t.getComponent(g.NgcPartyRoomNoticeDialog)).init(_.NgcLocalizedManager.t("PWF_GAME_ENDS").text,_.NgcLocalizedManager.t("PWF_GAME_ENDS_CONTENT").text,function(){e.closeUI(!0)}),o.show(),[2]}})})},t.prototype.showDialogGameRunning=function(){return a(this,void 0,void 0,function(){var e,t,o;return s(this,function(n){switch(n.label){case 0:return e=this,[4,u.NgcDialogManager.createDialog(g.NgcPartyRoomNoticeDialog.dialogType,g.NgcPartyRoomNoticeDialog.urlPrefab,g.NgcPartyRoomNoticeDialog.bundleName)];case 1:return t=n.sent(),(o=t.getComponent(g.NgcPartyRoomNoticeDialog)).init(_.NgcLocalizedManager.t("PWF_GAME_STARTED").text,_.NgcLocalizedManager.t("PWF_GAME_STARTED_CONTENT").text,function(){e.closeUI(!0)}),o.show(),[2]}})})},t.prototype.showDialogHostChange=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return[4,u.NgcDialogManager.createDialog(g.NgcPartyRoomNoticeDialog.dialogType,g.NgcPartyRoomNoticeDialog.urlPrefab,g.NgcPartyRoomNoticeDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(g.NgcPartyRoomNoticeDialog)).init(_.NgcLocalizedManager.t("PWF_HOST_CHANGES").text,_.NgcLocalizedManager.t("PWF_HOST_CHANGE_CONTENT").text,function(){}),t.show(),[2]}})})},t.prototype.showExitDialog=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),a(this,void 0,void 0,function(){var o,n,r;return s(this,function(i){switch(i.label){case 0:return this._isShowExitPopUp?[2]:(this._isShowExitPopUp=!0,o=this,[4,u.NgcDialogManager.createDialog(f.NgcPartyRoomConfirmDialog.dialogType,f.NgcPartyRoomConfirmDialog.urlPrefab,f.NgcPartyRoomConfirmDialog.bundleName)]);case 1:return n=i.sent(),(r=n.getComponent(f.NgcPartyRoomConfirmDialog)).init(_.NgcLocalizedManager.t("PWF_LEAVE_PARTY").text,_.NgcLocalizedManager.t("PWF_LEAVE_PARTY_CONTENT").text,function(){o.closeUI(t),o._isShowExitPopUp=!1,o.exitDialog=null,e&&e(!0)},function(){o._isShowExitPopUp=!1,o.exitDialog=null,e&&e(!1)}),r.show(),this.exitDialog=r,[2]}})})},t.prototype.onClickExit=function(){this.showExitDialog(null,!0)},t.prototype.onClickStartGame=function(){this.requestStartParty()},t.prototype.showCommingSoonDialgo=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return[4,u.NgcDialogManager.createDialog(g.NgcPartyRoomNoticeDialog.dialogType,g.NgcPartyRoomNoticeDialog.urlPrefab,g.NgcPartyRoomNoticeDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(g.NgcPartyRoomNoticeDialog)).init(_.NgcLocalizedManager.t("NGG_COMING_SOON").text,_.NgcLocalizedManager.t("NGG_COMING_SOON").text,function(){}),t.show(),[2]}})})},t.prototype.displayLogoutNoticeDialog=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return console.log("displayLogoutNoticeDialog"),[4,u.NgcDialogManager.createDialog(g.NgcPartyRoomNoticeDialog.dialogType,g.NgcPartyRoomNoticeDialog.urlPrefab,g.NgcPartyRoomNoticeDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(g.NgcPartyRoomNoticeDialog)).init(_.NgcLocalizedManager.t("NTM_ERROR").text,_.NgcLocalizedManager.t("SNS_LOG_OUT_ERROR_NOTICE").text,function(){C.default.resetWhenLoggedInFromAnotherPlace(function(){k.UserInfo.resetPrivateData()})}),t.show(),this._isShowingErrorPopup=!0,[2]}})})},t.prototype.displayReloadNoticeDialog=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return console.log("displayReloadNoticeDialog"),[4,u.NgcDialogManager.createDialog(g.NgcPartyRoomNoticeDialog.dialogType,g.NgcPartyRoomNoticeDialog.urlPrefab,g.NgcPartyRoomNoticeDialog.bundleName)];case 1:return e=o.sent(),(t=e.getComponent(g.NgcPartyRoomNoticeDialog)).init(_.NgcLocalizedManager.t("NTM_ERROR").text,_.NgcLocalizedManager.t("SNS_LOG_OUT_ERROR_NOTICE").text,function(){this._joinByInvited=!0,l.Utils.reloadPage(),this._isShowingErrorPopup=!1}),t.show(),this._isShowingErrorPopup=!0,[2]}})})},t.prototype.showLoginDialog=function(){return a(this,void 0,void 0,function(){return s(this,function(){return d.NgcNavBarManager.inst&&"function"==typeof d.NgcNavBarManager.inst.logInOnClick&&(this._needToCreateGame=!0,d.NgcNavBarManager.inst.logInOnClick()),[2]})})},t.prototype.initEmote=function(){if(p.NgcEmotesManager.inst){var e={getPlayerEmojiPosByID:this.getPosEmojiForPlayerById.bind(this),checkPlayerIsDeadByID:this.checkPlayerIsDead,parentForBubble:this.partyRoomUI.parentofBubble,parentForEmojis:this.partyRoomUI.parentofEmoji};cc.log(e),p.NgcEmotesManager.inst.init(e),p.NgcEmotesManager.inst.setBroadcastNetID(I.NgcPartyRoom.inst.getPartyID()),p.NgcEmotesManager.inst.allowScrollView(!1),p.NgcEmotesManager.inst.extendEmotesUI(!1)}else cc.error("Emote doesn't have instance")},t.prototype.getPosEmojiForPlayerById=function(e){return cc.v2(this.partyRoomUI.getPosEmojiForPlayerById(e))},t.prototype.builder=function(){return o.s_requestInfor||cc.error("Need to init set Infor first\n ex :let request = new PartyInfoBuilder()\n request.setPlayerName(NgcUserInfo.localUserName)\n        .setCountry(NgcCountryFlagsManager.localCountry)\n       .setMaxPlayer(32)\n       .setMinPlayer(2)\n       .setPlayerNetID(NetClient.inst.localPlayerNetID)\n       .setSkin(UserInfo.curSkin)\n       .setAvatarURL(NgcUserInfo.avatarUrl)\n        .setTimeDelayNextGame(5)\n       .setAvatarURL(NgcUserInfo.avatarUrl)\n       .setPrivate(true)\n       .setAllowBot(false)\n       .setJoinPayload({})\n       .setStartPayload({})\n       .setStartGameFuncion(()=>{});)'"),o.s_requestInfor},t.prototype.onButtonFaceBookClick=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return e=I.NgcPartyRoom.inst.getInviteLink()+"&method="+I.INVITE_METHOD.SOCIAL,""!=this._socialShareURL?[3,2]:[4,this.genSocialShareURL(e)];case 1:o.sent(),o.label=2;case 2:return E.NgcTelemetry.inst.LogEvent_ShareClick("PartyRoom","Facebook"),"undefined"!=typeof FB?FB.ui({display:"popup",method:"share",mobile_iframe:!0,href:""==this._socialShareURL?e:this._socialShareURL},function(e){e&&(console.log("Share success: post_id = "+e.post_id),E.NgcTelemetry.inst.LogEvent_ShareComplete("PartyRoom","Facebook"))}):(t="https://www.facebook.com/sharer/sharer.php?u=",t+=encodeURIComponent(this._socialShareURL),cc.sys.openURL(t)),[2]}})})},t.prototype.onButtonTwitterClick=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return e=I.NgcPartyRoom.inst.getInviteLink()+"&method="+I.INVITE_METHOD.SOCIAL,""!=this._socialShareURL?[3,2]:[4,this.genSocialShareURL(e)];case 1:o.sent(),o.label=2;case 2:return t="https://twitter.com/intent/tweet?text=",t+=encodeURIComponent(this.description+" "+(""==this._socialShareURL?e:this._socialShareURL)),cc.log("shareURL",t),cc.log("description",this.description),cc.sys.openURL(t),E.NgcTelemetry.inst.LogEvent_ShareClick("PartyRoom","Twitter"),[2]}})})},t.prototype.onButtonEmailClick=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return e=I.NgcPartyRoom.inst.getInviteLink()+"&method="+I.INVITE_METHOD.SOCIAL,""!=this._socialShareURL?[3,2]:[4,this.genSocialShareURL(e)];case 1:o.sent(),o.label=2;case 2:return t="mailto:example@website.com?subject=",t+=encodeURIComponent(this.gameTitle)+"&body=",t+=encodeURIComponent(this.description+" "+(""==this._socialShareURL?e:this._socialShareURL)),cc.log("shareURL",t),window.location.href=t,E.NgcTelemetry.inst.LogEvent_ShareClick("PartyRoom","Email"),[2]}})})},t.prototype.onButtonCopyClick=function(){this.copyClipboard(),this.isPC()||(this.shareNative(),this.partyRoomUI.onQRCodeButtonEvent())},t.prototype.copyClipboard=function(){return a(this,void 0,void 0,function(){var e=this;return s(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){var o=I.NgcPartyRoom.inst.getInviteLink(!0);if(R.NgcPlatform.isRunFromApp()&&R.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_COPYLINK:o}),"*"),null!=o&&""!=o||(o="test"),void 0===navigator.clipboard)console.log("navigator.clipboard"),t();else{var n=navigator.clipboard.writeText(o);n.then(function(){e._isAbleCopy=!0,e.partyRoomUI.showClickCopiedText(),t()}),n.catch(function(){t()})}})];case 1:return t.sent(),[2]}})})},t.prototype.copyLinkToClipboardAlternative=function(){cc.warn("Was not possible to copy te text")},t.prototype.isAbleCopy=function(){return this._isAbleCopy},t.prototype.shareNative=function(){var e=I.NgcPartyRoom.inst.getInviteLink(!0);R.NgcPlatform.isRunFromApp()?R.NgcPlatform.inst.onPostMessage(JSON.stringify({GAME_SHARE:{type:"native",link:e}}),"*"):navigator.share&&navigator.share({url:e}).then(function(){console.log("Share was successful.")}).catch(function(e){console.log("Sharing failed",e)})},t.prototype.isPC=function(){return!cc.sys.isMobile},t.prototype.onSocialCallBack=function(e,t){cc.log(e),cc.log(t),"login"==t?(this.builder().setLoginSocial(!0).setPlayerName(C.default.localUserName).setAvatarURL(C.default.avatarUrl),cc.log("(UserInfo.avatarUrl",C.default.avatarUrl),this.partyRoomUI.setLoginStatus(!0),this.timeoutCheckValidToken(),this._needToCreateGame?this.onClickRequestJoinGame():this.requestChangeInfor(C.default.localUserName),this._needToCreateGame=!1):"logout"==t?(this.isHost()&&I.NgcPartyRoom.isLoginMandatory()?this.closeUI(!0):(cc.log("Party change name",C.default.localUserName),this.builder().setLoginSocial(!1),this.builder().setPlayerName(C.default.localUserName).setAvatarURL(C.default.avatarUrl),this.requestChangeInfor(C.default.localUserName),this.partyRoomUI.setLoginStatus(!1),this.timeoutCheckValidToken()),this._needToCreateGame=!1):"onPreLogin"==t?this.clearTimeOutValidToken():"close"==t&&(this.timeoutCheckValidToken(),this._needToCreateGame=!1)},t.prototype.genSocialShareURL=function(e){return a(this,void 0,void 0,function(){var t,o=this;return s(this,function(){return(t=I.NgcPartyRoom.inst.shortenURL(e)).then(function(e){if(e){var t=JSON.parse(e);t&&t.url&&(o._socialShareURL=t.url,o._socialShareURL.startsWith("https://")||o._socialShareURL.startsWith("http://")||(o._socialShareURL="https://"+o._socialShareURL))}cc.log("#Share URL SOCIAL",e)}),t.catch(function(e){cc.warn(e)}),cc.log("#Share URL SOCIAL",e),[2]})})},t.prototype.checkAuthenticationValid=function(){var e=this;if(Date.now()-this._checkTokenCurTime>this._checkTokenDelayTime){this._checkTokenCurTime=Date.now();var t=this;w.default.inst.serviceGet("/auth/check",null,function(o){o&&(O.NgcSocial.inst.checkLoginStatus().then(function(){O.NgcSocial.inst.isConnected()&&O.NgcSocial.inst.logout(function(){})}),e.builder().isLoginSocial&&t.builder().functionOnMutilLogin&&t.builder().functionOnMutilLogin(),e.clearTimeOutValidToken(),e.closeUI(!0))})}},t.prototype.showBannerAds=function(){var e,t;y.default.inst.isAdsPoincutAvailable(y.NgcPointcuts.bannerPartyRoom,T.AdsType.Banner)?null===(e=y.default.inst)||void 0===e||e.showBanner(y.NgcPointcuts.bannerPartyRoom):null===(t=y.default.inst)||void 0===t||t.hide()},t.prototype.hideBannerAds=function(){var e;null===(e=y.default.inst)||void 0===e||e.hide(y.NgcPointcuts.bannerPartyRoom)},t.s_enterRoomOnce=!1,t.TIME_OUT_FOR_SCREEN_DISAPPEAR=5,i([M(A.NgcPartyRoomUI)],t.prototype,"partyRoomUI",void 0),i([M],t.prototype,"gameTitle",void 0),i([M],t.prototype,"description",void 0),o=i([D],t)}(P.default);o.NgcPartyRoomManager=L,cc._RF.pop()},{"../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../../../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomConfirmDialog":"PartyRoomConfirmDialog","../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomEnterCodeDialog":"PartyRoomEnterCodeDialog","../../../NanoGameCore/CrossFeatures/PartyRoom/Script/Dialog/PartyRoomNoticeDialog":"PartyRoomNoticeDialog","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../../../NanoGameCore/GameFramework/Scripts/NgcGame":"NgcGame","../../../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../../NanoGameCore/Services/PartyRoom/PartyRoom":"PartyRoom","../../../NanoGameCore/Services/Platform/Platform":"Platform","../../../NanoGameCore/Services/Social/Social":"Social","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../../UserInfo":"UserInfo","./PartyRoomUI":"PartyRoomUI"}],PartyRoomNoticeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"891602V7ZdHpYyr5Je5X6NA","PartyRoomNoticeDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyRoomNoticeDialog=void 0;var a=e("./PartyRoomDialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.messageLabel=null,t._callBackOk=null,t._callBackClose=null,t}return r(t,e),t.prototype.init=function(e,t,o){this._callBackOk=o,this.titleLabel.string=e,this.messageLabel.string=t},t.prototype.okOnClick=function(){this._callBackOk,"function"==typeof this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.dialogType="NgcPartyRoomNoticeDialog",t.urlPrefab="PartyRoomNoticeDialog",i([l(cc.Label)],t.prototype,"titleLabel",void 0),i([l(cc.Label)],t.prototype,"messageLabel",void 0),i([c],t)}(a.NgcPartyRoomDialogBase);o.NgcPartyRoomNoticeDialog=u,cc._RF.pop()},{"./PartyRoomDialogBase":"PartyRoomDialogBase"}],PartyRoomUI:[function(e,t,o){"use strict";cc._RF.push(t,"98eed6b+hNH94Hxs79AOP+N","PartyRoomUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyRoomUI=void 0;var a=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),s=e("../../../NanoGameCore/Services/Ads/Ads"),c=e("../../../NanoGameCore/Services/PartyRoom/PartyRoom"),l=e("../../../NanoGameCore/CrossFeatures/PartyRoom/Script/PartyPlayerItem"),u=e("./PartyRoomManager"),p=e("../../../NanoGameCore/GameFramework/Scripts/NgcScreenManager"),d=e("../../../NanoGameCore/Core/Utils"),f=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),h=e("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),g=e("../../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager"),y=cc._decorator,m=y.ccclass,_=y.property,v=cc.v3(50,50),S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerPrefab=null,t.playerPanelNode=null,t.buttonStartNode=null,t.buttonCreateGameNode=null,t.buttonJoinGameNode=null,t.roomCodeNode=null,t.roomCodeLbl=null,t.headerCreateGameNode=null,t.buttonInviteNode=null,t.qrCodeSpriteMobile=null,t.qrCodeSpritePC=null,t.createGameMenuNode=null,t.watingRoomMenuNode=null,t.translationGroupNode=null,t.qrCodeChildNodeMobile=null,t.qrCodeChildNodePC=null,t.qrParentNodePC=null,t.qrParentNodeMobile=null,t.shareContainerPC=null,t.loadingNode=null,t.numberOfPlayerLabel=null,t.commingPlayerLabel=null,t.partyIDEditBox=null,t.nextGameStartLabel=null,t.hostnextGameStartLabel=null,t.loadingIconCreateGame=null,t.loginRequireNode=null,t.createGameGroupLabelNode=null,t.editNameTagNode=null,t.parentofBubble=null,t.parentofEmoji=null,t.settingButtonNode=null,t.headerWaitingNode=null,t.avatarContainerNode=null,t.pcalertTextNode=null,t.sharinglinkLabel=null,t.orNode=null,t.copyButton=null,t.buttonClose=null,t.roomCodeLbls=[],t._isAbleCopy=!1,t._listPlayers=[],t._isShowQRCode=!1,t._timeDT=0,t._loginSocial=!1,t._avatarContainerWidgetTop=0,t._numOfComingPlayer=0,t._curUserEffect="",t}return r(t,e),t.prototype.start=function(){this.updateWidgetTarget(),this._avatarContainerWidgetTop=this.avatarContainerNode.getComponent(cc.Widget).top,u.NgcPartyRoomManager.inst.isPC()?(this.qrCodeChildNode=this.qrCodeChildNodePC,this.qrParentNode=this.qrParentNodePC):(this.qrCodeChildNode=this.qrCodeChildNodeMobile,this.qrParentNode=this.qrParentNodeMobile),this.qrCodeChildNode.active=!0,this.qrParentNode.active=!1,this.buttonClose.node.active=!1,this.applyShareConfig(),s.NgcAds.inst&&s.NgcAds.inst.isBannerShowing&&this.adsBannerAlign(!0),cc.sys.isMobile||cc.view.on("canvas-resize",this.onResized,this)},t.prototype.applyShareConfig=function(){u.NgcPartyRoomManager.inst.isPC()&&(this.shareContainerPC.getChildByName("facebook").active=this.checkShareConfig("facebook"),this.shareContainerPC.getChildByName("twitter").active=this.checkShareConfig("twitter"),this.shareContainerPC.getChildByName("email").active=this.checkShareConfig("email"))},t.prototype.checkShareConfig=function(e){return!h.NgcBuildConfig.services.ShareMe.hasOwnProperty(e)||h.NgcBuildConfig.services.ShareMe[e]},t.prototype.updateWidgetTarget=function(){var e=cc.find("Canvas");if(e){var t=this.avatarContainerNode.getComponent(cc.Widget);cc.sys.isMobile||(this.avatarContainerNode.width=Math.min(.85*e.width,1120)),t.target=e,t.top=h.NgcBuildConfig.services.Ads.bannerHeight*cc.view.getDesignResolutionSize().height/cc.view.getFrameSize().height+20+p.default.inst.navBarIconNode.height,t.updateAlignment();var o=this.loadingNode.getComponent(cc.Widget);o.target=e,o.updateAlignment()}},t.prototype.reset=function(){this._listPlayers.forEach(function(e){e.node.destroy()}),this._listPlayers=[],this.enableStartButton(!1,!1),this.createGameMenuNode.opacity=255,this.nextGameStartLabel.node.active=!1,this._timeDT=0,this.resetButtonCreateGame(),this.visibleEditNameTag(!1)},t.prototype.addUser=function(e,t){var o=cc.instantiate(this.playerPrefab);o.parent=this.playerPanelNode,o.setScale(cc.view.getFrameSize().height/cc.winSize.height);var n=o.getComponent(l.NgcPartyPlayerItem);n&&n.setInfo(e,t),this._listPlayers.push(n);for(var r=0,i=this._listPlayers.length-1;i>0;i--)this._listPlayers[i].node.setSiblingIndex(r),r++;this.updateNumberOfPlayer(this._listPlayers.length),this.updateHostInfor()},t.prototype.removeUser=function(e){for(var t in this._listPlayers){var o=this._listPlayers[t];if(e.netID==o.netID){this._listPlayers[t].node.destroy(),delete this._listPlayers[t],this._listPlayers.splice(parseInt(t),1),this.updateHostInfor();break}}this.updateNumberOfPlayer(this._listPlayers.length),this.showIncomingPlayer(this._numOfComingPlayer,!0)},t.prototype.enableStartButton=function(e,t){t?(this.buttonStartNode.getComponent(cc.Button).enabled=e,this.buttonStartNode.active=!0,this.buttonStartNode.opacity=e?255:125):this.buttonStartNode.active=e},t.prototype.updateHostInfor=function(e){if(u.NgcPartyRoomManager.inst.isHost()){var t=this._listPlayers.length>=u.NgcPartyRoomManager.inst.builder().minPlayer&&c.NgcPartyRoom.inst.isPlayersReady();this.enableStartButton(t,!0),this.nextGameStartLabel.node.active=!1}else this.showWaitingHostLabel(),this.enableStartButton(!1,!1);e&&this.updatePlayerInfo(e)},t.prototype.updatePlayerInfo=function(e){for(var t in this._listPlayers)if(e.netID==this._listPlayers[t].netID){this._listPlayers[t].setInfo(e);break}if(c.NgcPartyRoom.inst.isHost()){var o=this._listPlayers.length>=u.NgcPartyRoomManager.inst.builder().minPlayer&&c.NgcPartyRoom.inst.isPlayersReady();this.enableStartButton(o,!0)}},t.prototype.addQRCode=function(e){u.NgcPartyRoomManager.inst.isPC()?this.qrCodeSpritePC.spriteFrame=e:this.qrCodeSpriteMobile.spriteFrame=e},t.prototype.onClose=function(){this.reset()},t.prototype.onShow=function(){},t.prototype.switchMenuScreen=function(e){switch(this._currentMenuNode?this._currentMenuNode.active=!1:(this.watingRoomMenuNode.active=!1,this.createGameMenuNode.active=!1),e){case u.PARTY_MENU_SCREEN.CREATE_GAME_MENU:this.createGameMenuNode.active=!0,this._currentMenuNode=this.createGameMenuNode,this.visibleLoginRequire(!this._loginSocial);break;case u.PARTY_MENU_SCREEN.WATING_ROOM_MENU:this.visibleLoadingIcon(!1),this.watingRoomMenuNode.active=!0,this._currentMenuNode=this.watingRoomMenuNode,u.NgcPartyRoomManager.inst.isHost()?this.translation():(this.updateQRCodePosition(),this.visibleEditNameTag(!0)),this.updateRoomCode();break;case u.PARTY_MENU_SCREEN.IDLE_MENU:}this._curScreen=e},t.prototype.updateRoomCode=function(){var e=""+u.NgcPartyRoomManager.inst.getRoomCode();this.roomCodeLbls.forEach(function(t){t&&(t.string=e)})},t.prototype.showWaitingHostLabel=function(){u.NgcPartyRoomManager.inst.isHost()||(this.nextGameStartLabel.node.active=!0,this.nextGameStartLabel.string=a.NgcLocalizedManager.t("PWF_WAITING_HOST_START").text)},t.prototype.startGameCountDown=function(e,t){u.NgcPartyRoomManager.inst.isHost()?(this.hostnextGameStartLabel.node.active=e,this.nextGameStartLabel.node.active=!1,e&&(this.hostnextGameStartLabel.string=a.NgcLocalizedManager.t("PWF_START_IN").text+"\n"+t)):(this.nextGameStartLabel.node.active=e,this.hostnextGameStartLabel.node.active=!1,e?this.nextGameStartLabel.string=a.NgcLocalizedManager.t("PWF_START_IN").text+"\n"+t:this.showWaitingHostLabel())},t.prototype.showLoading=function(e){this.loadingNode.active=e},t.prototype.updateNumberOfPlayer=function(e){a.NgcLocalizedManager.setTextKey(this.numberOfPlayerLabel,"PWF_JOINED_PARAM",[e,u.NgcPartyRoomManager.inst.builder().maxPlayer])},t.prototype.translation=function(){var e=this;u.NgcPartyRoomManager.inst.isPC()&&this.setShareUrl(c.NgcPartyRoom.inst.getInviteLink(!0)),this.translationGroupNode.opacity=0,this.buttonInviteNode.opacity=0;var t=this.qrParentNode.height;this.qrParentNode.scaleY=this.buttonCreateGameNode.height/t,this.qrParentNode.active=!0,this.qrParentNode.opacity=255,this.qrParentNode.parent.convertToNodeSpaceAR(this.buttonInviteNode.parent.convertToWorldSpaceAR(this.buttonInviteNode.position)).y,this.qrParentNode.position=this.qrParentNode.parent.convertToNodeSpaceAR(this.buttonCreateGameNode.parent.convertToWorldSpaceAR(this.buttonCreateGameNode.position)),this.qrCodeChildNode.opacity=0,this._isShowQRCode=!0,this.scheduleOnce(function(){var t=e.qrParentNode.parent.convertToNodeSpaceAR(e.buttonInviteNode.parent.convertToWorldSpaceAR(e.buttonInviteNode.position)).y;cc.tween(e.qrParentNode).to(.2,{y:t},{easing:function(e){return e*e}}).start()}),cc.tween(this.qrParentNode).to(.3,{scaleY:1,scaleX:1},{easing:function(e){return e*e}}).call(function(){e.qrCodeChildNode.opacity=150,cc.tween(e.qrCodeChildNode).to(.1,{opacity:255},{easing:"quintIn"}).start();var t=cc.sequence(cc.scaleTo(.08,1.015),cc.scaleTo(.08,.985),cc.scaleTo(.08,1));e.qrCodeChildNode.scale=1,e.qrCodeChildNode.runAction(t),cc.tween()}).start(),cc.tween(this.translationGroupNode).to(.3,{opacity:255},{easing:function(e){return e*e}}).call(function(){e.buttonInviteNode.opacity=255}).start(),this.showClickCopiedText()},t.prototype.onCloseQRCode=function(){this._isShowQRCode&&this.onQRCodeButtonEvent()},t.prototype.onQRCodeButtonEvent=function(){var e=this;if(this.updateQRCodePosition(),this.buttonInviteNode.active=!1,this._isShowQRCode){this._isShowQRCode=!1;var t=this.buttonInviteNode.height,o=this.buttonInviteNode.width,n=t/this.qrParentNode.height,r=o/this.qrParentNode.width;cc.tween(this.qrCodeChildNode).to(.2,{opacity:0},{easing:"quintIn"}).start(),cc.tween(this.qrParentNode).to(.24,{scaleY:n-.01,scaleX:r-.01},{easing:"quintIn"}).to(.08,{scaleY:n+.01,scaleX:r+.01},{easing:"quintIn"}).to(.08,{scaleY:n,scaleX:r},{easing:"quintIn"}).call(function(){e.qrParentNode.active=!1,e.buttonInviteNode.active=!0}).start()}else u.NgcPartyRoomManager.inst.isPC()&&this.setShareUrl(c.NgcPartyRoom.inst.getInviteLink(!0)),u.NgcPartyRoomManager.inst.copyClipboard(),this._isShowQRCode=!0,this.qrParentNode.active=!0,cc.tween(this.qrParentNode).to(.24,{scaleY:1.01,scaleX:1.01},{easing:"quintIn"}).call(function(){e.qrCodeChildNode.opacity=150,cc.tween(e.qrCodeChildNode).to(.1,{opacity:255},{easing:"quintIn"}).start()}).to(.08,{scaleY:.99,scaleX:.99},{easing:"quintIn"}).to(.08,{scaleY:1,scaleX:1},{easing:"quintIn"}).call(function(){}).start(),cc.tween(this.qrParentNode).to(.2,{opacity:255},{easing:"quintIn"}).start()},t.prototype.updateQRCodePosition=function(){this.qrParentNode.position=this.qrParentNode.parent.convertToNodeSpaceAR(this.buttonInviteNode.parent.convertToWorldSpaceAR(this.buttonInviteNode.position))},t.prototype.visibleLoadingIcon=function(e){this.loadingIconCreateGame.active=e,this.createGameGroupLabelNode.active=!e},t.prototype.onCreateButtonClick=function(){this.visibleLoadingIcon(!0),this.buttonCreateGameNode.getComponent(cc.Button).enabled=!1,this.buttonCreateGameNode.opacity=200,cc.tween(this.headerCreateGameNode).to(.2,{opacity:0}).start()},t.prototype.resetButtonCreateGame=function(){this.buttonCreateGameNode.getComponent(cc.Button).enabled=!0,this.buttonCreateGameNode.opacity=255,this.headerCreateGameNode.opacity=255,this.visibleLoadingIcon(!1)},t.prototype.showIncomingPlayer=function(e,t){void 0===t&&(t=!0);var o=this._listPlayers.length<u.NgcPartyRoomManager.inst.builder().maxPlayer;this._numOfComingPlayer=e,t&&o?(this.commingPlayerLabel.node.active=!0,this.commingPlayerLabel.string=0!=e?e+" "+a.NgcLocalizedManager.t("PWF_PLAYER_COMMING").text:a.NgcLocalizedManager.t("PWF_WAITING_FOR_PLAYER").text):this.commingPlayerLabel.node.active=!1},t.prototype.visibleLoginRequire=function(e){this.loginRequireNode.active=e&&c.NgcPartyRoom.isLoginMandatory()},t.prototype.visibleEditNameTag=function(e){var t=this,o=p.default.inst.navBarIconNode;if(e&&o){var n=d.Utils.getWorldPos(o),r=cc.v2(this.editNameTagNode.width/2,n.y-o.height/2-this.editNameTagNode.height/2);d.Utils.setWorldPos(this.editNameTagNode,r),this.editNameTagNode.opacity=0,this.editNameTagNode.active=!0,cc.tween(this.editNameTagNode).to(.3,{opacity:255}).call(function(){t.scheduleOnce(function(){cc.tween(t.editNameTagNode).to(.3,{opacity:0}).call(function(){t.editNameTagNode.active=!1,t.editNameTagNode.opacity=255}).start()},3)}).start()}else this.editNameTagNode.active=e},t.prototype.setLoginStatus=function(e){this._loginSocial=e,this.visibleLoginRequire(!this._loginSocial)},t.prototype.onSettingClick=function(e){this.commingSoonEffect(e.target)},t.prototype.onMicrophoneClick=function(e){cc.log(e.target),this.commingSoonEffect(e.target)},t.prototype.commingSoonEffect=function(e){var t=e.getComponentInChildren(cc.Animation);t&&t.play()},t.prototype.getPosEmojiForPlayerById=function(e){for(var t=cc.v3(0,0),o=0,n=this._listPlayers;o<n.length;o++){var r=n[o];r.netID==e&&(t=r.getWorldPos(),this.updateAvatarEffect(e))}return t.addSelf(v),t},t.prototype.updateAvatarEffect=function(e){if(this._curUserEffect!=e){this._curUserEffect=e;var t=this.findUserByID(e);t&&(t.node.setSiblingIndex(0),t.enableEffect(!1))}},t.prototype.alignWhenHasAds=function(e){if(e?(this.settingButtonNode.getComponent(cc.Widget).top=150,this.headerWaitingNode.getComponent(cc.Widget).top=100,this.buttonClose.getComponent(cc.Widget).top=100):(this.settingButtonNode.getComponent(cc.Widget).top=70,this.headerWaitingNode.getComponent(cc.Widget).top=20,this.buttonClose.getComponent(cc.Widget).top=20),this.settingButtonNode.getComponent(cc.Widget).updateAlignment(),this.headerWaitingNode.getComponent(cc.Widget).updateAlignment(),this.buttonClose.getComponent(cc.Widget).updateAlignment(),!cc.sys.isMobile){if(e)this.avatarContainerNode.getComponent(cc.Widget).top=this._avatarContainerWidgetTop;else{var t=this.avatarContainerNode.getComponent(cc.Widget).top;this.avatarContainerNode.getComponent(cc.Widget).top=t-110}this.avatarContainerNode.getComponent(cc.Widget).updateAlignment()}},t.prototype.adsBannerAlign=function(){this.node.getComponent(cc.Widget).top=0,this.playerPanelNode.getComponent(cc.Layout).paddingTop},t.prototype.findUserIndex=function(e){for(var t=0;t<this._listPlayers.length;t++)if(this._listPlayers[t].netID==e)return t;return 0},t.prototype.findUserByID=function(e){for(var t=0;t<this._listPlayers.length;t++)if(this._listPlayers[t].netID==e)return this._listPlayers[t];return null},t.prototype.update=function(e){this._curScreen==u.PARTY_MENU_SCREEN.WATING_ROOM_MENU&&(this._timeDT+=e),this.updateMovePWFButtons()},t.prototype.updateMovePWFButtons=function(){cc.sys.isMobile&&g.NgcEmotesManager.inst&&g.NgcEmotesManager.inst.currentEmotesUIInst&&(g.NgcEmotesManager.inst.currentEmotesUIInst.isShowUp?this.buttonStartNode.hideByEmoji||(this.buttonStartNode.hideByEmoji=!0,cc.tween(this.buttonStartNode).to(.15,{opacity:0}).start(),cc.tween(this.buttonInviteNode).to(.15,{opacity:0}).start()):this.buttonStartNode.hideByEmoji&&(this.buttonStartNode.hideByEmoji=!1,cc.tween(this.buttonStartNode).to(.15,{opacity:255}).start(),cc.tween(this.buttonInviteNode).to(.15,{opacity:255}).start()))},t.prototype.onEditBoxChange=function(e){cc.log("Text change,te",e),u.NgcPartyRoomManager.inst.isPC()&&this.setShareUrl(c.NgcPartyRoom.inst.getInviteLink(!0))},t.prototype.showClickCopiedText=function(){var e=this;u.NgcPartyRoomManager.inst.isPC()&&(this.copyButton.active=!0,this.pcalertTextNode.opacity=255,this.scheduleOnce(function(){cc.tween(e.pcalertTextNode).to(.3,{opacity:0}).start()},3))},t.prototype.setShareUrl=function(e){if(this.sharinglinkLabel.node.active=!0,this.sharinglinkLabel.node.getComponent(cc.EditBox).string=e,!u.NgcPartyRoomManager.inst.isAbleCopy()){var t=this.sharinglinkLabel.node.getComponent(cc.EditBox);this.scheduleOnce(function(){try{t.focus(),t._impl._elem.select(),cc.log("cp",t)}catch(e){cc.warn(e)}},.5)}},t.prototype.onResized=function(){this.updateWidgetTarget()},i([_(cc.Prefab)],t.prototype,"playerPrefab",void 0),i([_(cc.Node)],t.prototype,"playerPanelNode",void 0),i([_(cc.Node)],t.prototype,"buttonStartNode",void 0),i([_(cc.Node)],t.prototype,"buttonCreateGameNode",void 0),i([_(cc.Node)],t.prototype,"buttonJoinGameNode",void 0),i([_(cc.Node)],t.prototype,"roomCodeNode",void 0),i([_(cc.Label)],t.prototype,"roomCodeLbl",void 0),i([_(cc.Node)],t.prototype,"headerCreateGameNode",void 0),i([_(cc.Node)],t.prototype,"buttonInviteNode",void 0),i([_(cc.Sprite)],t.prototype,"qrCodeSpriteMobile",void 0),i([_(cc.Sprite)],t.prototype,"qrCodeSpritePC",void 0),i([_(cc.Node)],t.prototype,"createGameMenuNode",void 0),i([_(cc.Node)],t.prototype,"watingRoomMenuNode",void 0),i([_(cc.Node)],t.prototype,"translationGroupNode",void 0),i([_(cc.Node)],t.prototype,"qrCodeChildNodeMobile",void 0),i([_(cc.Node)],t.prototype,"qrCodeChildNodePC",void 0),i([_(cc.Node)],t.prototype,"qrParentNodePC",void 0),i([_(cc.Node)],t.prototype,"qrParentNodeMobile",void 0),i([_(cc.Node)],t.prototype,"shareContainerPC",void 0),i([_(cc.Node)],t.prototype,"loadingNode",void 0),i([_(cc.Label)],t.prototype,"numberOfPlayerLabel",void 0),i([_(cc.Label)],t.prototype,"commingPlayerLabel",void 0),i([_(cc.EditBox)],t.prototype,"partyIDEditBox",void 0),i([_(f.NgcLabelLocalized)],t.prototype,"nextGameStartLabel",void 0),i([_(cc.Label)],t.prototype,"hostnextGameStartLabel",void 0),i([_(cc.Node)],t.prototype,"loadingIconCreateGame",void 0),i([_(cc.Node)],t.prototype,"loginRequireNode",void 0),i([_(cc.Node)],t.prototype,"createGameGroupLabelNode",void 0),i([_(cc.Node)],t.prototype,"editNameTagNode",void 0),i([_(cc.Node)],t.prototype,"parentofBubble",void 0),i([_(cc.Node)],t.prototype,"parentofEmoji",void 0),i([_(cc.Node)],t.prototype,"settingButtonNode",void 0),i([_(cc.Node)],t.prototype,"headerWaitingNode",void 0),i([_(cc.Node)],t.prototype,"avatarContainerNode",void 0),i([_(cc.Node)],t.prototype,"pcalertTextNode",void 0),i([_(cc.Label)],t.prototype,"sharinglinkLabel",void 0),i([_(cc.Node)],t.prototype,"orNode",void 0),i([_(cc.Node)],t.prototype,"copyButton",void 0),i([_(cc.Button)],t.prototype,"buttonClose",void 0),i([_(cc.Label)],t.prototype,"roomCodeLbls",void 0),i([m],t)}(cc.Component);o.NgcPartyRoomUI=S,cc._RF.pop()},{"../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../../../NanoGameCore/CrossFeatures/PartyRoom/Script/PartyPlayerItem":"PartyPlayerItem","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../NanoGameCore/GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../../NanoGameCore/Services/PartyRoom/PartyRoom":"PartyRoom","./PartyRoomManager":"PartyRoomManager"}],PartyRoom_impl_GameServerSrv:[function(e,t,o){"use strict";cc._RF.push(t,"82800tdz45PDoysQ2vVuAb4","PartyRoom_impl_GameServerSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../Core/Utils"),c=e("../../GameFramework/Scripts/BuildConfig"),l=e("../../GameFramework/Scripts/Network/NgcNetClient"),u=e("../../GameFramework/Scripts/Network/NgcNetClientRefactor"),p=e("../Platform/Platform"),d=e("./PartyRoom"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype._preInit=function(){return new Promise(function(e){e("PartyRoom_impl_PartyRoomSrv pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("PartyRoom_impl_PartyRoomSrv initialized")})},t.prototype._getName=function(){return"PartyRoom"},t.prototype._getPartyID=function(){return this._curPartyID},t.prototype._getPartyName=function(){return this._curPartyName},t.prototype._getGameID=function(){return this._curGameID},t.prototype._isHost=function(){return this._Host},t.prototype._getServerAdress=function(){this._serverAdress},t.prototype._requestJoinParty=function(e,t,o,n,r,i,a,s){this._isAbleToRecieveMessage=!0,this._curNetID=n;var p=this.clientMsg_RequestJoinParty(e,t,o,n,r,i,a,s);cc.log("@Party _requestJoinParty",p),c.NgcBuildConfig.useNgcServer?u.NgcNetClientRefactor.inst.send(JSON.stringify(p)):l.NgcNetClient.inst._sendWebsocketMessage(JSON.stringify(p))},t.prototype._sendMessageToParty=function(e,t,o){if(this._isValid(e)){var n=this.ClientMsg_SendMessageToParty(e,t,o);cc.log("@Party _sendMessageToParty",n),c.NgcBuildConfig.useNgcServer?u.NgcNetClientRefactor.inst.send(JSON.stringify(n)):l.NgcNetClient.inst._sendWebsocketMessage(JSON.stringify(n))}else cc.warn("@Party PartyID is null, you are not in any room")},t.prototype._requestLeaveParty=function(e,t){this._isAbleToRecieveMessage=!1;var o=e||this._curPartyID,n=t||null;this._sendMessageToParty(o,d.PARTY_REQUEST_TYPE.LEAVE_PARTY,n),this._reset()},t.prototype._requestReadyToPlay=function(e){this._sendMessageToParty(e,d.PARTY_REQUEST_TYPE.CHANGE_PLAYER_STATUS,{status:"Ready"})},t.prototype._setAllPartyCallBack=function(e,t,o){this._onPartyMessageCB=e,this._onPlayerJoinCB=t,this._onPlayerQuitCB=o},t.prototype._updateMessage=function(e){return i(this,void 0,void 0,function(){var t,o,n,r,i,s,c=this;return a(this,function(){if(cc.log("@Party serverMess",e),e.message==d.MessageType.ServerPartyStatus){if(!this._isAbleToRecieveMessage)return cc.warn("@Party Youre leaving party but still got message from others, should avoid to recieve it"),[2];if(!this._onPartyMessageCB||!this._onPlayerJoinCB||!this._onPlayerQuitCB)return cc.warn("@Party Missing callback functions, please call setAllPartyCallBack before using"),[2];if(this._removeRequestCommingStatus(),cc.log("@Party ServerPartyStatus",e),!e.partyID)return this._onPartyMessageCB(d.PARTY_ROOM_MESSAGE.ON_ROOM_STATE_CHANGE,d.PARTY_ROOM_STATE.UNAVAILABLE),[2];this._curPartyID=e.partyID,t=e.partyParameters,o=e.playerList,n="",r=!1,this._Host=this._isLocalPlayerHost(o),t&&(this._curPartyName=t.name,this._curGameID=t.gameID,this._curGamePass=t.gamePass,n=t.currentState,""==this._serverAdress&&(this._serverAdress=t.serverUrl,t.partyUrl&&(i={partyUrl:t.partyUrl},this._shortenLink=t.partyUrl,!this._shortenLink||this._shortenLink.startsWith("http://")&&this._shortenLink.startsWith("https://")||(this._shortenLink="https://"+this._shortenLink),this._onPartyMessageCB(d.PARTY_ROOM_MESSAGE.ON_ROOM_CREATED,i))),this._curPartyState!=n&&(this._curPartyState=n,this._curPartyState==d.PARTY_ROOM_STATE.START?r=!0:this._onPartyMessageCB(d.PARTY_ROOM_MESSAGE.ON_ROOM_STATE_CHANGE,this._curPartyState)),null!=t.playerInComing&&this._onPartyMessageCB(d.PARTY_ROOM_MESSAGE.ON_PLAYER_COMMING,t.playerInComing)),o&&(s=!1,this._curPlayers.forEach(function(e,t){c._isPlayerQuit(e.netID,o)&&(e.isHost&&(s=!0),c._curPlayers.splice(t,1),c._onPlayerQuitCB(e))}),o.forEach(function(e){if(c._isExistPlayer(e.netID)){var t=c._findPlayerByNet(e.netID);s&&e.isHost&&t&&(t.isHost=!0,c._onPartyMessageCB(d.PARTY_ROOM_MESSAGE.ON_HOST_CHANGE,t)),t.status!=e.status&&(t.status=e.status,c._onPartyMessageCB(d.PARTY_ROOM_MESSAGE.ON_PLAYER_CHANGE_STATUS,t)),t.playerName==e.playerName&&c._deepEqual(t.payload,e.payload)||(t.playerName=e.playerName,t.payload=e.payload,c._onPartyMessageCB(d.PARTY_ROOM_MESSAGE.ON_PLAYER_CHANGE_INFOR,t))}else{var o={netID:e.netID,playerName:e.playerName,isHost:e.isHost,status:e.status,payload:e.payload};c._curPlayers.push(o),c._onPlayerJoinCB(o)}})),r&&this._onPartyMessageCB(d.PARTY_ROOM_MESSAGE.ON_GAME_START,t)}return[2]})})},t.prototype._isLocalPlayerHost=function(e){console.log("current net id",this._curNetID);for(var t=0,o=e;t<o.length;t++){var n=o[t];if(n.netID==this._curNetID)return n.isHost}return!1},t.prototype._isExistPlayer=function(e){for(var t=0,o=this._curPlayers;t<o.length;t++)if(o[t].netID==e)return!0;return!1},t.prototype._isPlayerQuit=function(e,t){for(var o=0,n=t;o<n.length;o++)if(n[o].netID==e)return!1;return!0},t.prototype._findPlayerByNet=function(e){for(var t=0,o=this._curPlayers;t<o.length;t++){var n=o[t];if(n.netID==e)return n}return null},t.prototype._getInviteLink=function(e){if(e&&""!=this._shortenLink)return this._shortenLink;var t=p.NgcPlatform.inst.getPartyLinkBase(),o=this._clearInvalidUrlParameter(t);return o.includes("?")?o+"&partyID="+this._curPartyID+"&serverURL="+encodeURIComponent(this._serverAdress):o+"?partyID="+this._curPartyID+"&serverURL="+encodeURIComponent(this._serverAdress)},t.prototype._getClientUrl=function(){var e=p.NgcPlatform.inst.getPartyLinkBase();return this._clearInvalidUrlParameter(e)},t.prototype._isValid=function(e){return null!=e&&""!=e},t.prototype._isPlayersReady=function(){for(var e=0,t=this._curPlayers;e<t.length;e++)if(t[e].status==d.PARTY_PLAYER_STATUS.NOTREADY)return!1;return!0},t.prototype._getAllPlayers=function(){return this._curPlayers},t.prototype._reset=function(){this._Host=!1,this._curGameID="",this._curGamePass="",this._curPlayers=[],this._curNetID="",this._curPartyID="",this._serverAdress=""},t.prototype._removeRequestCommingStatus=function(){cc.sys.localStorage.removeItem(d.SAVE_KEY.PARTY_KEY)},t.prototype._shortenURL=function(e){return i(this,void 0,Promise,function(){var t;return a(this,function(){return t={url:e},[2,s.Utils.postHttp(d.SHORTEN_SERVICE_URL,JSON.stringify(t))]})})},t.prototype._getRoomCodeInfo=function(e){return i(this,void 0,void 0,function(){var t;return a(this,function(o){switch(o.label){case 0:return[4,new Promise(function(o){s.Utils.getHttp(d.SHORTEN_SERVICE_URL+"/short/"+e,{},function(e,n){e&&cc.log(e),t=JSON.parse(n),o(null)})})];case 1:return o.sent(),[2,t]}})})},t}(d.NgcPartyRoom);o.default=f,cc._RF.pop()},{"../../Core/Utils":"Utils","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../Platform/Platform":"Platform","./PartyRoom":"PartyRoom"}],PartyRoom:[function(e,t,o){"use strict";cc._RF.push(t,"57d38w1wfNNMpk+p29JitJt","PartyRoom");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPartyRoom=o.SHORTEN_SERVICE_URL=o.SAVE_KEY=o.INVITE_METHOD=o.URL_PARAMETER=o.MessageType=o.PARTY_REQUEST_TYPE=o.PARTY_ROOM_STATE=o.PARTY_PLAYER_STATUS=o.PARTY_ROOM_MESSAGE=void 0;var i,a=e("../../SDK/Nano/NanoSrv"),s=e("../Platform/Platform"),c=e("../Service");(function(e){e[e.ON_ROOM_CREATED=0]="ON_ROOM_CREATED",e[e.ON_ROOM_STATE_CHANGE=1]="ON_ROOM_STATE_CHANGE",e[e.ON_GAME_START=2]="ON_GAME_START",e[e.ON_HOST_CHANGE=3]="ON_HOST_CHANGE",e[e.ON_PLAYER_CHANGE_STATUS=4]="ON_PLAYER_CHANGE_STATUS",e[e.ON_PLAYER_CHANGE_INFOR=5]="ON_PLAYER_CHANGE_INFOR",e[e.ON_PLAYER_COMMING=6]="ON_PLAYER_COMMING"})(o.PARTY_ROOM_MESSAGE||(o.PARTY_ROOM_MESSAGE={})),function(e){e.READY="Ready",e.NOTREADY="notReady"}(o.PARTY_PLAYER_STATUS||(o.PARTY_PLAYER_STATUS={})),function(e){e.RECRUITING="Recruiting",e.PLAYING="Playing",e.FULL="full",e.UNAVAILABLE="unavailable",e.START="Start"}(o.PARTY_ROOM_STATE||(o.PARTY_ROOM_STATE={})),function(e){e.START_GAME_PARTY="startGameParty",e.CHANGE_PLAYER_STATUS="changePlayerStatus",e.LEAVE_PARTY="leaveParty",e.CHANGE_INFOR="changeInfo"}(i=o.PARTY_REQUEST_TYPE||(o.PARTY_REQUEST_TYPE={})),o.MessageType={ClientRequestJoinParty:"ClientMsg_RequestJoinParty",ClientSendMessageToParty:"ClientMsg_SendMessageToParty",ServerPartyStatus:"ServerMessage_PartyStatus"},o.URL_PARAMETER={SERVER_URL:"serverURL",PARTY_ID:"partyID",METHOD:"method"},o.INVITE_METHOD={QR_CODE:"qrcode",IN_GAME:"in-game",SOCIAL:"social",SHARE_LINK:"link",HOST:"host"},o.SAVE_KEY={PARTY_KEY:"PARTY_KEY",TIME_REQUEST:"TIME_REQUEST"},o.SHORTEN_SERVICE_URL="https://party.nano.ubisoft.com";var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._curPartyID="",t._curPartyState="",t._curPartyName="",t._curGameID="",t._curGamePass="",t._curPlayers=[],t._isRuningRequest=!1,t._curNetID="",t._Host=!1,t._serverAdress="",t._totalCommingPlayers=0,t._shortenLink="",t._isAbleToRecieveMessage=!1,t}return r(t,e),t.prototype.onLogin=function(e){e(null,"OK")},t.isLoginMandatory=function(){var e=a.default.inst.getCurGameInfo().gameParams,t=e&&e.PWF_Mandatory_Login||{},o=s.NgcPlatform.inst.getName().toLowerCase();return!(!t||!t[o])},t.prototype.getName=function(){return this._getName()},t.prototype.getServerAdress=function(){return this._getServerAdress()},t.prototype.getPartyID=function(){return this._getPartyID()},t.prototype.getPartyName=function(){return this._getPartyName()},t.prototype.getGameID=function(){return this._getGameID()},t.prototype.isHost=function(){return this._isHost()},t.prototype.init=function(e){return this._init(e)},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.requestJoinParty=function(e,t,o,n,r,i,a,s){return this._requestJoinParty(e,t,o,n,r,i,a,s)},t.prototype.sendMessageToParty=function(e,t,o){return this._sendMessageToParty(e,t,o)},t.prototype.requestStartParty=function(e,t){return this._sendMessageToParty(e,i.START_GAME_PARTY,t)},t.prototype.requestReadyToPlay=function(e){return this._requestReadyToPlay(e)},t.prototype.requestLeaveParty=function(e,t){return this._requestLeaveParty(e,t)},t.prototype.setAllPartyCallBack=function(e,t,o){this._setAllPartyCallBack(e,t,o)},t.prototype.updateMessage=function(e){this._updateMessage(e)},t.prototype.getInviteLink=function(e){return void 0===e&&(e=!1),this._getInviteLink(e)},t.prototype.getClientUrl=function(){return this._getClientUrl()},t.prototype.isPlayersReady=function(){return this._isPlayersReady()},t.prototype.reset=function(){this._reset()},t.prototype.getAllPlayers=function(){return this._getAllPlayers()},t.prototype.findPlayerByNet=function(e){return this._findPlayerByNet(e)},t.isPlayerInvited=function(){if(!s.NgcPlatform.isOfflineMode()){var e=t.getURLParameter(o.URL_PARAMETER.SERVER_URL),n=t.getURLParameter(o.URL_PARAMETER.PARTY_ID);if(e&&n)return!0}return!1},t.getURLParameter=function(e,t){void 0===t&&(t=null);var o=s.NgcPlatform.inst.getPartyLinkBase();t&&(o=t);var n=new URL(o).search;if(null==n||""==n){var r=o.indexOf("?");r>=0&&(n=o.substring(r,o.length))}return new URLSearchParams(n).get(e)},t.sendIamComingStatus=function(){var e=t.getURLParameter(o.URL_PARAMETER.SERVER_URL),n=t.getURLParameter(o.URL_PARAMETER.PARTY_ID),r=cc.sys.localStorage.getItem(o.SAVE_KEY.PARTY_KEY),i=cc.sys.localStorage.getItem(o.SAVE_KEY.TIME_REQUEST),a=!0;if(null!=i)try{a=Date.now()-parseInt(i)>15e3}catch(p){cc.warn(p)}if(null==r||r!=n||a){var s=new XMLHttpRequest;s.onreadystatechange=function(){4==s.readyState&&s.status>=200&&s.status<400&&s.responseText};var c=new URL(e),l=e.substring(e.lastIndexOf("/")+1);cc.log("serverInstanceID",l);var u="https://"+c.hostname+":8080/"+l+"/party/"+n;cc.log("@Parrty ",u),s.open("GET",u,!0),s.send(),cc.sys.localStorage.setItem(o.SAVE_KEY.PARTY_KEY,n),cc.sys.localStorage.setItem(o.SAVE_KEY.TIME_REQUEST,Date.now())}},t.prototype._deepEqual=function(e,t){var o=Object.keys(e),n=Object.keys(t);if(o.length!==n.length)return!1;for(var r=0,i=o;r<i.length;r++){var a=i[r],s=e[a],c=t[a],l=this._isObject(s)&&this._isObject(c);if(l&&!this._deepEqual(s,c)||!l&&s!==c)return!1}return!0},t.prototype._isObject=function(e){return null!=e&&"object"==typeof e},t.prototype._clearInvalidUrlParameter=function(e){e.includes("#goog_rewarded")&&(e=e.replace("#goog_rewarded",""));var t=new URL(e);return t.searchParams.get("partyID")&&t.searchParams.delete("partyID"),t.searchParams.get("serverURL")&&t.searchParams.delete("serverURL"),t.searchParams.get("method")&&t.searchParams.delete("method"),t.searchParams.get("A2HS")&&t.searchParams.delete("A2HS"),t.href},t.prototype.clientMsg_RequestJoinParty=function(e,t,n,r,i,a,s,c){return{message:o.MessageType.ClientRequestJoinParty,partyID:e,partyName:t,playerName:n,netID:r,clientUrl:i,minPlayers:a,maxPlayers:s,payload:c||""}},t.prototype.ClientMsg_SendMessageToParty=function(e,t,n){return{message:o.MessageType.ClientSendMessageToParty,partyID:e,type:t,payload:n}},t.prototype.shortenURL=function(e){return this._shortenURL(e)},t.prototype.getRoomCodeInfo=function(e){return this._getRoomCodeInfo(e)},t.srvInstances=[],t.inst=null,t.services=[],t}(c.NgcService);o.NgcPartyRoom=l,cc._RF.pop()},{"../../SDK/Nano/NanoSrv":"NanoSrv","../Platform/Platform":"Platform","../Service":"Service"}],PelicanManager:[function(e,t,o){"use strict";cc._RF.push(t,"9db90WEWixNapNGh1QX3K/T","PelicanManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../TuningData"),s=e("../Maps/MapController"),c=e("../../Scripts/HSAUtils"),l=e("../Network/HSANetUtils"),u=e("../Game"),p=e("../../Shared/Defines"),d=e("./Pelican"),f=cc._decorator,h=f.ccclass,g=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pelican=null,t.container=null,t.timeToSpawnNextPelican=5,t._deltatime=0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){if(a.default.inst&&a.default.inst.getGameParameters()){var e=a.default.inst.getGameParameters().PreyControl.Map1;this.maxPelicansOnMap=e.num_of_pelican_on_map}},t.prototype.createPelican=function(){var e=l.default.RandomRange(0,s.default.inst.pelicanMovementRects.length-1,!0),t=l.default.RandomRange(0,s.default.inst.pelicanMovementRects[e].width,!0),o=l.default.RandomRange(0,s.default.inst.pelicanMovementRects[e].height,!0),n=cc.instantiate(this.pelican);n.parent=this.container,n.getComponent(d.default).flyZone=s.default.inst.pelicanMovementRects[e];var r=cc.v2(s.default.inst.pelicanMovementRects[e].x+t,s.default.inst.pelicanMovementRects[e].y+o);c.default.setWorldPos(n,r)},t.prototype.initPelican=function(){for(var e=0;e<this.maxPelicansOnMap/2;e++)this.createPelican()},t.prototype.update=function(e){u.default.inst.curGameState!=p.GameState.GameOver&&(this._deltatime+=e,this.container.childrenCount<this.maxPelicansOnMap&&this._deltatime>=this.timeToSpawnNextPelican&&(this.createPelican(),this._deltatime=0))},t.prototype.reset=function(){},t.inst=null,i([g(cc.Prefab)],t.prototype,"pelican",void 0),i([g(cc.Node)],t.prototype,"container",void 0),i([g],t.prototype,"timeToSpawnNextPelican",void 0),o=i([h],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../Scripts/HSAUtils":"HSAUtils","../../Shared/Defines":"Defines","../Game":"Game","../Maps/MapController":"MapController","../Network/HSANetUtils":"HSANetUtils","../TuningData":"TuningData","./Pelican":"Pelican"}],Pelican:[function(e,t,o){"use strict";cc._RF.push(t,"460ee3MTKBIIabGDPrkzvFT","Pelican");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.State_Flying=o.State_RunAway=void 0;var a=e("./EnemyControllerBase"),s=e("../../globals"),c=e("../Network/HSANetUtils"),l=cc._decorator,u=l.ccclass;l.property,o.State_RunAway="RunAway",o.State_Flying="Flying";var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.flyZone=null,t._flyDirection=cc.v2(1,0),t}var n;return r(t,e),n=t,t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.start=function(){e.prototype.start.call(this),this.setScoreColor(cc.color(255,255,255,255))},t.prototype.update=function(e){this.work(e)},t.prototype.work=function(t){if(!e.prototype.work.call(this,t))return!1;switch(this.curState){case o.State_Flying:this._workstate_Flying(t),this._workstate_MagnetEffect(t);break;case o.State_RunAway:this._workstate_RunAwayPlayers(t),this._workstate_MagnetEffect(t)}},t.prototype.setState=function(t){t===a.State_Swim&&(t=o.State_Flying,this._isInWaterSurface=!1),e.prototype.setState.call(this,t)},t.prototype.updateFlipYFollowingAngle=function(){var e=this.node.angle%360;e>90&&e<270||e<-90&&e>-270?this.node.scaleY>0&&(this.node.scaleY=-this.node.scaleY):this.node.scaleY<0&&(this.node.scaleY=-this.node.scaleY)},t.prototype._workstate_Flying=function(e){var t=s.default.PlayerController.localPlayer.node.getPosition(),r=cc.Vec2.distance(t,this.node.getPosition());this._curSpeed=this.startSpeed,this._changeDirectionTimer<=0&&this.ChangeNewDirectionFly(),this.navigateFollowGuidedDirection(e,this._flyDirection),this.applyMovement(e),this._changeDirectionTimer-=e,r<=n.SHYING_DANGER_DISTANCE&&this.setState(o.State_RunAway)},t.prototype.ChangeNewDirectionFly=function(){var e=c.default.RandomRange(n.FREEMOVE_CHANGE_FLY_DIRECTION_TIME_MIN,n.FREEMOVE_CHANGE_FLY_DIRECTION_TIME_MAX);this._flyDirection.mulSelf(-1),this._changeDirectionTimer=e},t.prototype._workstate_RunAwayPlayers=function(e){this._curSpeed=2*this.startSpeed;var t=s.default.PlayerController.localPlayer.node.getPosition();cc.Vec2.distance(t,this.node.getPosition())>n.SHYING_DANGER_DISTANCE?this.setState(a.State_Swim):(this.ChangeNewDirectionFly(),this.navigateFollowGuidedDirection(e,this._flyDirection),this.applyMovement(e))},t.prototype.inFlyZone=function(e){var t=this.node.parent.convertToWorldSpaceAR(e);return this.flyZone.contains(t)},t.SHYING_DANGER_DISTANCE=200,t.SHYING_SAFE_DISTANCE=300,t.FREEMOVE_CHANGE_FLY_DIRECTION_TIME_MIN=2,t.FREEMOVE_CHANGE_FLY_DIRECTION_TIME_MAX=10,n=i([u],t)}(a.default);o.default=p,cc._RF.pop()},{"../../globals":"globals","../Network/HSANetUtils":"HSANetUtils","./EnemyControllerBase":"EnemyControllerBase"}],PerformanceMonitor:[function(e,t,o){"use strict";cc._RF.push(t,"92331YYWp5FWYy3WC4e7TJ8","PerformanceMonitor");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var i,a=e("../Utils/CustomEventEmitter");(function(e){e[e.FRAME_FREE_TIME=0]="FRAME_FREE_TIME"})(i||(i={}));var s=function(e){function t(){var t=e.call(this)||this;return t._targetFPS=60,t._maxFrameMillis=1e3/t._targetFPS,t._init(),t}return r(t,e),Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype._init=function(){var e=this;cc.director.once(cc.Director.EVENT_AFTER_DRAW,function(){cc.director.on(cc.Director.EVENT_BEFORE_UPDATE,e._beforeUpdate,e),cc.director.on(cc.Director.EVENT_AFTER_DRAW,e._afterDraw,e)})},t.prototype.setTargetFPS=function(e){e<=0?cc.error("Cannot set negative target FPS!"):(e<20&&cc.warn("Is target FPS ("+e+") too low??"),this._targetFPS=e,this._maxFrameMillis=1e3/this._targetFPS)},t.prototype._beforeUpdate=function(){this._startUpdateTS=Date.now()},t.prototype._afterDraw=function(){var e=Date.now(),o=e-this._startUpdateTS,n=this._maxFrameMillis-o;n>0&&this.emit(t.events.FRAME_FREE_TIME,e+n)},t.events=i,t}(a.default);o.default=s,cc._RF.pop()},{"../Utils/CustomEventEmitter":"CustomEventEmitter"}],PerformanceTask:[function(e,t,o){"use strict";cc._RF.push(t,"02a2doyI0VI5bV4HGHfI6XG","PerformanceTask");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,r++)n[r]=i[a];return n};Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.exec=function(){var e,t=Date.now();return cc.log("[Task] executing "+this.tag+"..."),(e=this._function).call.apply(e,i([this._caller],this._args)),Date.now()-t},t}(e("./CustomTask").default);o.default=a,cc._RF.pop()},{"./CustomTask":"CustomTask"}],PlatformGameObject:[function(e,t,o){"use strict";cc._RF.push(t,"4ae3e6KwWpFOLfXogS6EClX","PlatformGameObject");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./GameObject"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.objectType=a.GameObjectType.Platform,t.needUpdatePosition=!0,t}var o;return r(t,e),o=t,t.prototype.GetTypeAsString=function(){return a.GameObjectType[this.objectType]},t.prototype.start=function(){this.objectOriginalLocation=this.node.getPosition(),o.platformObjectsList.push(this)},t.prototype.setOriginalLocation=function(){this.node.getPosition().x==this.objectOriginalLocation.x&&this.node.getPosition().y==this.objectOriginalLocation.y||this.node.setPosition(this.objectOriginalLocation)},t.setNeedUpdatePosition=function(){o.platformObjectsList.forEach(function(e){null!=e&&(e.needUpdatePosition=!0)})},t.correctPosition=function(){o.platformObjectsList.forEach(function(e){null!=e&&e.needUpdatePosition&&e.setOriginalLocation()})},t.platformObjectsList=[],i([l({type:cc.Enum(a.GameObjectType)})],t.prototype,"objectType",void 0),o=i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./GameObject":"GameObject"}],Platform_impl_GameDistributionSrv:[function(e,t,o){"use strict";cc._RF.push(t,"1f70bpsDXRL6LeGsu49nepF","Platform_impl_GameDistributionSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../GameFramework/Scripts/BuildConfig"),s=e("./Platform"),c=e("./Platform_impl_WebBase"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype._preInit=function(){return new Promise(function(e){e("NgcPlatform_impl_GameDistributionSrv pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("NgcPlatform_impl_GameDistributionSrv initialized")})},t.prototype._onStartGame=function(){},t.prototype._onEndGame=function(){},t.prototype._getName=function(){return"GameDistribution"},t.prototype._isSupportBridgeSocial=function(){return!1},t.prototype._checkWebLoginData=function(){},t.prototype._getPlatformID=function(){return s.PlatformID.GameDistribution},t.prototype._onGameLoadingStart=function(){},t.prototype._onGameLoadingFinish=function(){},t.prototype._onPostMessage=function(e,t,o){window.parent.postMessage(e,t,o)},t.prototype._getPartyLinkBase=function(){var e=null;try{if((e=window.top.location).href)return window.location!=e?document.referrer?document.referrer:e.href:document.location.href}catch(t){}return a.NgcBuildConfig.gameClientURL},i([u],t)}(c.NgcPlatform_impl_WebBase));o.default=p,cc._RF.pop()},{"../../GameFramework/Scripts/BuildConfig":"BuildConfig","./Platform":"Platform","./Platform_impl_WebBase":"Platform_impl_WebBase"}],Platform_impl_WebBase:[function(e,t,o){"use strict";cc._RF.push(t,"5d7040mtXND2oZeDGzWzNgv","Platform_impl_WebBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPlatform_impl_WebBase=void 0;var a=e("../../Core/Utils"),s=e("../../CrossFeatures/NavBar/Script/NavBarConflictDialog"),c=e("../../CrossFeatures/NavBar/Script/NavBarManager"),l=e("../../CrossFeatures/PartyRoom/Script/QRCodeGenerator"),u=e("../../GameFramework/Scripts/BuildConfig"),p=e("../../GameFramework/Scripts/Localized/LocalizedManager"),d=e("../../GameFramework/Scripts/NgcMain"),f=e("../../GameFramework/Scripts/NgcUserInfo"),h=e("../../GameFramework/Scripts/ProfanityCheck"),g=e("../../SDK/Nano/NanoSrv"),y=e("../../SDK/Uplay/UplaySrv"),m=e("../Leaderboard/Leaderboard"),_=e("../Social/Social"),v=e("../Telemetry/Telemetry"),S=e("./Platform"),b=cc._decorator,N=b.ccclass,P=(b.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.getName=function(){return this._getName()},t.prototype._onSocialLogInFromHost=function(e){if(window.loadingGame)f.default.nanoLoginData=e;else if(this.isCallbackFromHost=!0,console.log("BridgeSocial webSocialLoginSuccess socialInfo = "+JSON.stringify(e)),e.hasOwnProperty("platform"))switch(e.platform){case"facebook":f.default.socialId=e.socialId,f.default.facebookAccessToken=e.facebookAccessToken||e.socialToken,this.requestGameLoginToSocial(_.SocialType.Facebook);break;case"ubiconnect":case"uplay":y.default.inst.userData.nameOnPlatform=e.name,y.default.inst.userData.avatarDesktop=e.avatarDesktop,y.default.inst.userData.avatarMobile=e.avatarMobile,y.default.inst.userData.userId=e.socialId,y.default.inst.loginFromHost=!0,this.requestGameLoginToSocial(_.SocialType.Uplay);break;case"apple":f.default.socialId=e.socialId,NgcAppleSrv.inst.userId=e.socialId,NgcAppleSrv.inst.username=e.name,NgcAppleSrv.inst.avatarURL=e.avatarMobile||e.avatarDesktop||e.avatarURL,NgcAppleSrv.inst.loginFromHost=!0,this.requestGameLoginToSocial(_.SocialType.Apple);break;default:console.log("A unrecognize Platform detected")}else console.log("Platform not FOUND")},t.prototype.requestGameLoginToSocial=function(e){_.NgcSocial.inst=_.NgcSocial.getSrvInstance(e),_.NgcSocial.inst.login(function(t,o){var n;if(t)cc.error("Social Login: ",t);else{"Conflict"===o?d.NgcMain.inst.resolveSocialConflict(null===(n=c.NgcNavBarManager.inst)||void 0===n?void 0:n.invokeOnSocialCallBack.bind(c.NgcNavBarManager.inst)):(c.NgcNavBarManager.inst.updateListEffectBtn(),c.NgcNavBarManager.inst.setNavBarInfo(),m.NgcLeaderboard.inst.clearCacheRequestData(),c.NgcNavBarManager.inst.invokeOnSocialCallBack(null,"login"));var r=(e===_.SocialType.Facebook?"fb:":"")+_.NgcSocial.inst.getSocialID();v.NgcTelemetry.inst.LogEvent_LoginSuccess(r,{Name:_.NgcSocial.inst.getFormatName(),AvatarUrl:_.NgcSocial.inst.getProfilePictureUrl(),FriendList:_.NgcSocial.inst.getFriendsData()})}})},t.prototype._onSocialLogInFromGame=function(){if(!this.isCallbackFromHost){var e={};e.avatarDesktop=f.default.avatarUrl,e.avatarMobile=f.default.avatarUrl,e.id=f.default.socialId,e.facebookAccessToken=f.default.facebookAccessToken,e.platform=_.NgcSocial.inst.getName().toLowerCase(),e.name=f.default.localUserName,f.default.setAccountLinkData({platform:e.platform});var t={GAME_SOCIAL_LOGIN_SUCCESS:e};if(S.NgcPlatform.isRunAsIframeOnNano()){var o=JSON.stringify(t);S.NgcPlatform.inst&&S.NgcPlatform.inst.onPostMessage(o,"*")}}},t.prototype._onSocialLogOutFromHost=function(){this.isCallbackFromHost=!0,f.default.nanoLoginData=null,console.log("webSocialLogoutSuccess"),_.NgcSocial.inst&&g.default.inst?_.NgcSocial.inst.checkLoginStatus().finally(function(){g.default.inst.resetUserID().finally(function(){var e,t;null===(e=d.NgcMain.inst)||void 0===e||e.createFakeName();try{_.NgcSocial.inst.logout()}catch(o){console.warn(o)}_.NgcSocial.inst.onLogoutSuccessCallback&&_.NgcSocial.inst.onLogoutSuccessCallback(),s.NavBarConflicttDialog.staticHide(),null===(t=c.NgcNavBarManager.inst)||void 0===t||t.invokeOnSocialCallBack(null,"logout")})}):console.log("User already log out")},t.prototype._onSocialLogOutFromGame=function(){if(!this.isCallbackFromHost&&S.NgcPlatform.isRunAsIframeOnNano()){var e=JSON.stringify({GAME_SOCIAL_LOGOUT_SUCCESS:!0});S.NgcPlatform.inst&&S.NgcPlatform.inst.onPostMessage(e,"*")}},t.prototype.isSupportBridgeSocial=function(){return this._isSupportBridgeSocial()},t.prototype._initBrigdeSocial=function(){cc.log("init SocialBridge WEB BASEE"),this.isBrigdeSocialInitialized||(window.isLoginPopUpOpen=function(){return!!_.NgcSocial.inst&&_.NgcSocial.inst.isLoginPopUpOpen()},window.addEventListener("message",function(e){var t=null;try{t=JSON.parse(e.data)}catch(n){t=null}if(t){if(console.log("[BridgeSocial] event.data = "+e.data),t.hasOwnProperty(S.BRIGDE_SOCIAL_INFO.WEB_SOCIAL_INFO))console.log("[BridgeSocial] WEB_SOCIAL_INFO = "+t.WEB_SOCIAL_INFO);else if(t.hasOwnProperty(S.BRIGDE_SOCIAL_INFO.WEB_SOCIAL_LOGIN_SUCCESS))S.NgcPlatform.inst.onSocialLogInFromHost(t.WEB_SOCIAL_LOGIN_SUCCESS);else if(t.hasOwnProperty(S.BRIGDE_SOCIAL_INFO.WEB_SOCIAL_LOGOUT_SUCCESS))S.NgcPlatform.inst.onSocialLogOutFromHost();else if(t.hasOwnProperty(S.BRIGDE_SOCIAL_INFO.WEB_A2HS_RESULT))c.NgcNavBarManager.inst.checkA2HSResult(t.WEB_A2HS_RESULT);else if(t.hasOwnProperty(S.BRIGDE_SOCIAL_INFO.WEB_LANGUAGE_CODE)){var o=t.WEB_LANGUAGE_CODE;f.default.curLanguage=o,p.NgcLocalizedManager.setLanguage(o),v.NgcTelemetry.inst.LogEvent_LanguageChanged({languageCode:o})}}else console.log("[BridgeSocial] parse JSON false")},!1),this.isBrigdeSocialInitialized=!0)},t.prototype.getPlatformID=function(){return this._getPlatformID()},t.prototype._checkLoginData=function(){if(f.default.nanoLoginData){var e=f.default.nanoLoginData;f.default.nanoLoginData=null,this._onSocialLogInFromHost(e)}},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.requestWebLoginButtonStatus=function(e){this.onPostMessage(JSON.stringify({REQUEST_WEB_LOGIN_BUTTON:e?"enabled":"disabled"}),"*")},t.prototype.onStartGame=function(e){void 0===e&&(e=null),this._onStartGame(e)},t.prototype.onEndGame=function(e){void 0===e&&(e=null),this._onEndGame(e)},t.prototype.onGameLoadingStart=function(){this._onGameLoadingStart()},t.prototype.onGameLoadingFinish=function(){this._onGameLoadingFinish(),this.requestWebLoginButtonStatus(!0)},t.prototype.onPostMessage=function(e,t,o){this._onPostMessage(e,t,o)},t.prototype._getPartyLinkBase=function(){try{var e=window.top.location;if(e.href)return window.location!==e?document.referrer?document.referrer:e.href:document.location.href}catch(t){console.error(t)}return u.NgcBuildConfig.gameClientURL},t.prototype._isWebLoginPopupOpen=function(){return new Promise(function(e){S.NgcPlatform.inst.onPostMessage(JSON.stringify({GET_WEB_LOGIN_POPUP_OPEN_INFO:!0}),"*"),window.addEventListener("message",function(t){try{var o=!1,n=JSON.parse(t.data);n.hasOwnProperty("GET_WEB_LOGIN_POPUP_OPEN_INFO_CALLBACK")&&(o=n.GET_WEB_LOGIN_POPUP_OPEN_INFO_CALLBACK),e(o)}catch(r){e(!1)}},!0)})},t.prototype._genQRCode=function(e,t){l.NgcQRCodeGenerator.genQRCode(e,t)},t.prototype._profanityCheck=function(e){return new Promise(function(t){var o={text:e};a.Utils.getHttp(h.NgcProfanityCheck.checkURL,o,function(e,o){var n={status:null,reasons:null};e||!o?(n.status=!1,n.reasons=e):(n=JSON.parse(o).report)||(n={status:null,reasons:null}),t(n)})})},i([N],t)}(S.NgcPlatform));o.NgcPlatform_impl_WebBase=P,cc._RF.pop()},{"../../Core/Utils":"Utils","../../CrossFeatures/NavBar/Script/NavBarConflictDialog":"NavBarConflictDialog","../../CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../../CrossFeatures/PartyRoom/Script/QRCodeGenerator":"QRCodeGenerator","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../GameFramework/Scripts/NgcMain":"NgcMain","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../GameFramework/Scripts/ProfanityCheck":"ProfanityCheck","../../SDK/Nano/NanoSrv":"NanoSrv","../../SDK/Uplay/UplaySrv":"UplaySrv","../Leaderboard/Leaderboard":"Leaderboard","../Social/Social":"Social","../Telemetry/Telemetry":"Telemetry","./Platform":"Platform"}],Platform:[function(e,t,o){"use strict";cc._RF.push(t,"5782fD7XEBKm5vfvqStrR+U","Platform");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPlatform=o.BRIGDE_SOCIAL_INFO=o.PlatformID=void 0;var a=e("crypto-js"),s=e("../../GameFramework/Scripts/BuildConfig"),c=e("../Service"),l=cc._decorator,u=l.ccclass;l.property,function(e){e[e.Nano=0]="Nano",e[e.Poki=1]="Poki",e[e.Android=2]="Android",e[e.IOs=3]="IOs",e[e.Douyin=4]="Douyin",e[e.GameDistribution=5]="GameDistribution",e[e.HUZ=6]="HUZ"}(o.PlatformID||(o.PlatformID={})),function(e){e.WEB_SOCIAL_INFO="WEB_SOCIAL_INFO",e.WEB_SOCIAL_LOGIN_SUCCESS="WEB_SOCIAL_LOGIN_SUCCESS",e.WEB_SOCIAL_LOGOUT_SUCCESS="WEB_SOCIAL_LOGOUT_SUCCESS",e.WEB_A2HS_RESULT="WEB_A2HS_RESULT",e.GET_WEB_LOGIN_DATA_CALLBACK="GET_WEB_LOGIN_DATA_CALLBACK",e.GET_GAME_LOGIN_POPUP_OPEN_INFO="GET_GAME_LOGIN_POPUP_OPEN_INFO",e.GET_WEB_LOGIN_POPUP_OPEN_INFO_CALLBACK="GET_WEB_LOGIN_POPUP_OPEN_INFO_CALLBACK",e.WEB_LANGUAGE_CODE="WEB_LANGUAGE_CODE"}(o.BRIGDE_SOCIAL_INFO||(o.BRIGDE_SOCIAL_INFO={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isBrigdeSocialEnable=!1,t.isBrigdeSocialInitialized=!1,t.isCallbackFromHost=!1,t.isLogoutFromGame=!1,t}var o;return r(t,e),o=t,t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.getName=function(){return this._getName()},t.prototype.isSupportBridgeSocial=function(){return this._isSupportBridgeSocial()},t.prototype.initBrigdeSocial=function(){return this._initBrigdeSocial()},t.prototype.onSocialLogInFromHost=function(e){this._onSocialLogInFromHost(e)},t.prototype.onSocialLogOutFromHost=function(){this._onSocialLogOutFromHost()},t.prototype.onSocialLogInFromGame=function(){this._onSocialLogInFromGame()},t.prototype.onSocialLogOutFromGame=function(){this._onSocialLogOutFromGame()},t.prototype.getPlatformID=function(){return this._getPlatformID()},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.init=function(e){var t=this;return new Promise(function(o){t._init(e).then(function(e){t.isSupportBridgeSocial()&&t.initBrigdeSocial(),o(e)})})},t.prototype.onStartGame=function(e){void 0===e&&(e=null),this._onStartGame(e)},t.prototype.onEndGame=function(e){void 0===e&&(e=null),this._onEndGame(e)},t.prototype.onGameLoadingStart=function(){this._onGameLoadingStart()},t.prototype.onGameLoadingFinish=function(){this._onGameLoadingFinish()},t.prototype.requestWebLoginButtonStatus=function(){},t.prototype.onPostMessage=function(e,t,o){this._onPostMessage(e,t,o)},t.prototype.checkLoginData=function(){this._checkLoginData()},t.prototype.getPartyLinkBase=function(){return o.isRunFromApp()?s.NgcBuildConfig.gameClientURL:this._getPartyLinkBase()},t.prototype.isWebLoginPopupOpen=function(){return this._isWebLoginPopupOpen()},t.prototype.genQRCode=function(e,t){return this._genQRCode(e,t)},t.prototype.profanityCheck=function(e){return this._profanityCheck(e)},t.prototype.useOwnSharingMethod=function(){return!1},t.prototype.isSocketMessageUsingArrayBuffer=function(){return!1},t.isOfflineMode=function(){return s.NgcBuildConfig.offlineMode},t.isValidOrigin=function(){try{return!!window.top.location.href}catch(e){return!1}},t.getLocationHref=function(){return o.isValidOrigin()?window.top.location.href:location.href},t.isRunAsIframeOnNano=function(){try{return!(!window.top.location.href||!window.top.location.href.includes("nano.ubisoft.com")&&!window.top.location.href.includes("localhost:9000")||window.top.location.href===window.location.href||!window.top.location.href.includes("localhost:9000"))}catch(e){return!1}},t.isRunFromApp=function(){return window.location.href.includes("runningPlatform=nanoApp")},t.getLoginDataFromURL=function(){var e=null;if(location.search.slice(1).split("&").forEach(function(t){t.match(/loginData=(.+)/i)&&(e=RegExp.$1,window.history.pushState({},document.title,location.href.replace(t,"")))}),e){var t=a.AES.decrypt(decodeURIComponent(e),a.SHA256(o.LOGIN_DATA_SECRET_KEY).toString(a.enc.Base64)).toString(a.enc.Utf8);return JSON.parse(t)}return null},t.srvInstances=[],t.inst=null,t.LOGIN_DATA_SECRET_KEY="LOGIN_DATA_123321",t.encryptData=function(e){return a.AES.encrypt(JSON.stringify(e),a.SHA256(o.LOGIN_DATA_SECRET_KEY).toString(a.enc.Base64)).toString()},o=i([u],t)}(c.NgcService);o.NgcPlatform=p,cc._RF.pop()},{"../../GameFramework/Scripts/BuildConfig":"BuildConfig","../Service":"Service","crypto-js":28}],PlayerAnim:[function(e,t,o){"use strict";cc._RF.push(t,"221c0ZXykhI74d1vyPF2zKM","PlayerAnim");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../BlendAnimBase"),s=e("../Network/HSANetUtils"),c=e("../Utils/ConstConfig"),l=e("../../globals"),u=e("../GameCamera"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cameraShakeValue=cc.v2(0,0),t.durationBeforeRoarAnimation=0,t.roarAnimationDuration=0,t.curSkin=null,t.swimAnim="Shark_swim",t.biteAnim="Shark_bite",t.biteAnimOnAir="Shark_bite_onair",t.dashAnim="Shark_attack_begindash",t.dashWindupBeginAnim="Shark_attack_windup_begin",t.dashWindupLoopAnim="Shark_attack_windup_loop",t.dashWindupEndAnim="Shark_attack_windup_end",t.turn180Anim="Shark_turn180",t.deadAnim="Shark_dead",t.sizeupAnim="Shark_sizeup",t.attackAnim="Shark_attack2",t.hurtAnim="Shark_hurt",t.idleAnim="Shark_idle",t.jumpOutAnim="Shark_jumpout",t.jumpInAnim="Shark_jumpin",t.onAirAnim="Shark_jumponair",t.onHelicopterIdle="Helicopter_drop",t.onHelicopterDrop="Helicopter_drop",t.stunning="Shark_stun",t.winning="Shark_win",t._hasStop=!1,t.lockBiteAnimation=!1,t}return r(t,e),t.prototype.onLoad=function(){this.allAnims=[[this.swimAnim,this.stunning],[this.biteAnim],[this.dashWindupBeginAnim,this.dashWindupLoopAnim,this.dashWindupEndAnim,this.dashAnim],[this.deadAnim],[this.sizeupAnim],[this.attackAnim],[this.hurtAnim],[this.idleAnim],[this.winning],[this.jumpOutAnim,this.onAirAnim,this.jumpInAnim],[this.onHelicopterDrop]],this._hasStop=!1,e.prototype.onLoad.call(this)},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.chooseRandomSkin=function(){if(!l.default.Game.inst.isPolygonDebugMode){var e=s.default.RandomRange(0,c.ConstConfig.SHARK_DATABASE.length-1,!0);return c.ConstConfig.SHARK_DATABASE[e].name}},t.prototype.setAlpha=function(e){this.node.opacity=e},t.prototype.getAlpha=function(){return this.node.opacity},t.prototype.stop=function(){this.skeleton.clearTrack(0),this._hasStop=!0},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.idle=function(){l.default.Game.inst.isPolygonDebugMode||this.skeleton.setAnimation(0,this.idleAnim,!0)},t.prototype.swimming=function(){l.default.Game.inst.isPolygonDebugMode||(this.skeleton.setAnimation(0,this.swimAnim,!0),this._hasStop=!1)},t.prototype.HelicopterIdle=function(){l.default.Game.inst.isPolygonDebugMode||this.skeleton.setAnimation(0,this.onHelicopterDrop,!0)},t.prototype.HelicopterDrop=function(){if(!l.default.Game.inst.isPolygonDebugMode){var e=this.skeleton.animation;this.skeleton.setAnimation(0,this.onHelicopterDrop,!1),e&&!this._hasStop&&this.skeleton.addAnimation(0,this.onAirAnim,!0,0)}},t.prototype.bite=function(e){if(l.default.Game.inst.isPolygonDebugMode)return!0;var t=this.skeleton.animation;return t===this.biteAnim&&this.lockBiteAnimation,this.skeleton.setAnimation(0,this.biteAnim,!1),e?this.skeleton.addAnimation(0,e,!0,0):t&&t!==this.biteAnim&&this.skeleton.addAnimation(0,t,!0,0),!0},t.prototype.biteOnAir=function(e){if(l.default.Game.inst.isPolygonDebugMode)return!0;var t=this.skeleton.animation;return t===this.biteAnim&&this.lockBiteAnimation,this.skeleton.setAnimation(0,this.biteAnimOnAir,!1),e?this.skeleton.addAnimation(0,e,!0,0):t&&t!==this.biteAnim&&this.skeleton.addAnimation(0,t,!0,0),!0},t.prototype.dead=function(){var e=this;l.default.Game.inst.isPolygonDebugMode||(this.skeleton.setAnimation(0,this.deadAnim,!1),this.skeleton.setCompleteListener(function(){e.node&&(e.node.active=!1)}),setTimeout(function(){e.node&&(e.node.active=!1)},1e3))},t.prototype.windup=function(){l.default.Game.inst.isPolygonDebugMode||(this.skeleton.setAnimation(0,this.dashWindupBeginAnim,!1),this.skeleton.addAnimation(0,this.dashWindupLoopAnim,!1))},t.prototype.dash=function(){if(!l.default.Game.inst.isPolygonDebugMode){var e=this.skeleton.animation,t=this.skeleton.setAnimation(0,this.dashWindupEndAnim,!1);return e&&!this._hasStop&&this.skeleton.addAnimation(0,this.dashAnim,!0),t}},t.prototype.attack=function(){if(!l.default.Game.inst.isPolygonDebugMode){var e=this.skeleton.animation;this.skeleton.setAnimation(0,this.attackAnim,!1),e&&!this._hasStop&&this.skeleton.addAnimation(0,this.swimAnim,!0,0)}},t.prototype.hurt=function(){if(!l.default.Game.inst.isPolygonDebugMode){var e=this.skeleton.animation;this.skeleton.setAnimation(0,this.hurtAnim,!1),e&&!this._hasStop&&this.skeleton.addAnimation(0,this.swimAnim,!0,0)}},t.prototype.turn180=function(){l.default.Game.inst.isPolygonDebugMode||this.skeleton.setAnimation(0,this.turn180Anim,!1)},t.prototype.jumpOut=function(){if(!l.default.Game.inst.isPolygonDebugMode){var e=this.skeleton.animation;this.skeleton.setAnimation(0,this.jumpOutAnim,!1),e&&!this._hasStop&&this.skeleton.addAnimation(0,this.onAirAnim,!0,0)}},t.prototype.jumpIn=function(){l.default.Game.inst.isPolygonDebugMode||this.skeleton.setAnimation(0,this.jumpInAnim,!1)},t.prototype.onAir=function(){l.default.Game.inst.isPolygonDebugMode||this.skeleton.setAnimation(0,this.onAirAnim,!0)},t.prototype.sizeup=function(e){if(!l.default.Game.inst.isPolygonDebugMode){var t=this.skeleton.animation;this.skeleton.setAnimation(0,this.sizeupAnim,!1),e?this.skeleton.addAnimation(0,e,!0,0):t&&t!==this.sizeupAnim&&this.skeleton.addAnimation(0,t,!0,0)}},t.prototype.stun=function(){l.default.Game.inst.isPolygonDebugMode||this.skeleton.setAnimation(0,this.stunning,!0)},t.prototype.win=function(){var e=this;l.default.Game.inst.isPolygonDebugMode||(this.skeleton.setAnimation(0,this.winning,!0),this.scheduleOnce(function(){u.default.inst.shakeCamera(e.roarAnimationDuration,e.cameraShakeValue.x,e.cameraShakeValue.x)},this.durationBeforeRoarAnimation),this.skeleton.addAnimation(0,this.idleAnim,!0))},t.prototype.pauseInTime=function(e){var t=this,o=this.getTimeScale();this.setTimeScale(0),this.scheduleOnce(function(){t.setTimeScale(o)},e)},t.prototype.start=function(){e.prototype.start.call(this);var t=this.skeleton.findAnimation(this.turn180Anim);t&&(this.turn180AnimationDuration=t.duration)},t.allSkinNames=[],i([f(cc.Vec2)],t.prototype,"cameraShakeValue",void 0),i([f(cc.Float)],t.prototype,"durationBeforeRoarAnimation",void 0),i([f(cc.Float)],t.prototype,"roarAnimationDuration",void 0),i([d],t)}(a.default);o.default=h,cc._RF.pop()},{"../../globals":"globals","../BlendAnimBase":"BlendAnimBase","../GameCamera":"GameCamera","../Network/HSANetUtils":"HSANetUtils","../Utils/ConstConfig":"ConstConfig"}],PlayerBoxColiiderMgr:[function(e,t,o){"use strict";cc._RF.push(t,"0e874LDpw5McY4nCGnsgrom","PlayerBoxColiiderMgr");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){},t.prototype.onCollisionEnter=function(e,t){this.node.parent.emit("boxColliderCollisionEnter",e,t)},t.prototype.onCollisionStay=function(e,t){this.node.parent.emit("boxColliderOnCollisionStay",e,t)},i([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],PlayerController_Bot:[function(e,t,o){"use strict";cc._RF.push(t,"7bf52S3QhZDzb8f+iRnJA27","PlayerController_Bot");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./PlayerController"),s=e("../Game"),c=e("../../Shared/Defines"),l=e("../GameEnums"),u=cc._decorator,p=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.start=function(){this.node.getComponent(a.default).getAnimation(),e.prototype.start.call(this)},t.prototype.update=function(t){if(s.default.inst.curGameState===c.GameState.Playing){switch(this.curState){case l.PlayerState.OnHelicopter:this._botAutoDropUpdate(t);break;case l.PlayerState.Idle:case l.PlayerState.Swimming:this.update_swim_ai(t);break;case l.PlayerState.Falling:this.update_falling_dir(t)}e.prototype.update.call(this,t)}},t.prototype.isRemote=function(){return!1},t.prototype.isLocalHuman=function(){return!1},t.prototype.isRealHuman=function(){return!1},t.prototype.isLocallyControlledBot=function(){return!0},i([p],t)}(a.default));o.default=d,cc._RF.pop()},{"../../Shared/Defines":"Defines","../Game":"Game","../GameEnums":"GameEnums","./PlayerController":"PlayerController"}],PlayerController_Remote:[function(e,t,o){"use strict";cc._RF.push(t,"95044YPapdNgJ7TOVBspwrY","PlayerController_Remote");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./PlayerController"),s=e("../Network/NetClient"),c=e("../HSAUtils"),l=e("../Game"),u=e("../TuningData"),p=e("../ParticleFollow"),d=e("../../Shared/Defines"),f=e("../UI/CircleBar"),h=e("../GameEnums"),g=cc._decorator,y=g.ccclass,m=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MAX_FRAMES_FOR_FIXING_ERROR=3,t.FIX_ERROR_MIN_SPEED_DT=6.4,t._beforeLastGuidedDir=null,t._curInterpolationPosition=null,t._curFixErrorVector=null,t._isControllingByBot=!1,t._lastTimeSwitchedToWaitingToRespawn=0,t._remotePositionDeltaCircularBuffer=[],t._remotePositionDeltaCircularBufferIndex=0,t.lastStateFromNet=h.PlayerState.PreInit,t._dashStartPos=null,t._dashFixPosErrorSpeed=0,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.start=function(){this.node.getComponent(a.default).getAnimation(),e.prototype.start.call(this)},t.prototype._addRemotePosition=function(e){if(this._remotePreviousPosition){var t=cc.Vec2.distance(this._remotePreviousPosition,e);this._remotePositionDeltaCircularBuffer[this._remotePositionDeltaCircularBufferIndex++]=t,this._remotePositionDeltaCircularBufferIndex%=o.REMOTE_POSITION_STACK_SIZE}this._remotePreviousPosition=e},t.prototype._isRemotePositionStable=function(){return!(this._remotePositionDeltaCircularBuffer.length<o.REMOTE_POSITION_STACK_SIZE)&&0==this._remotePositionDeltaCircularBuffer.filter(function(e){return e>0}).length},t.prototype.updateFromNetStateData=function(e){if(!this._isControllingByBot){this._addRemotePosition(cc.v2(e.lastPositionX,e.lastPositionY));var t=cc.v2(e.lastDirX,e.lastDirY).normalize(),o=cc.v2(e.lastGuidedDirX,e.lastGuidedDirY);this.guidedDirection=0===o.mag()?cc.v2(t.x,t.y):cc.v2(o.x,o.y),this._isNoGuidedDirection=0===o.mag(),this.remotingScore=e.score,this.curHP=e.hp;var n=s.default.GAME_UPDATE_TIME_MS/1e3*this.rotatableAnglePerSecond;if(0!==o.mag())if(null!==this._beforeLastGuidedDir&&cc.misc.radiansToDegrees(cc.Vec2.angle(this._beforeLastGuidedDir,o))>=.66*n){var r=cc.misc.radiansToDegrees(c.default.cartesianToPolar(cc.v2(o.x,o.y)).y),i=c.default.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(r+n))).angle(this._beforeLastGuidedDir),a=c.default.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(r-n))).angle(this._beforeLastGuidedDir);this.guidedDirection=i>a?c.default.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(r+.5*n))):c.default.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(r-.5*n)))}else this.guidedDirection=cc.v2(o.x,o.y);this._beforeLastGuidedDir=0===o.mag()?cc.v2(t.x,t.y):cc.v2(o.x,o.y),e.lastState===h.PlayerState.Jumping||e.lastState===h.PlayerState.InWaterSurface||this.curState!==h.PlayerState.Dashing&&this.curState!==h.PlayerState.Windup&&e.lastState!==h.PlayerState.Dashing||cc.log("Ignoring new state of player "+this.netID+" "+c.default.enumToString(h.PlayerState,e.lastState)),this._curInterpolationPosition=cc.v2(e.lastPositionX,e.lastPositionY);var l=this.getWorldPosition();this._curFixErrorVector=l.sub(cc.v2(e.lastPositionX,e.lastPositionY)).mul(1e3/s.default.GAME_UPDATE_TIME_MS),this._fixErrorTimeLeft=s.default.GAME_UPDATE_TIME_MS/1e3,e.curSize>this.curSize&&(this.curSize=e.curSize,this.setScaleBySize(this.curSize),this.setSizeName(this.curSize),this.CircleProgressBar.getComponent(f.default).updateBGProgress(this.curSize),this.maxHP=this.gameParams.shark.HP_per_size[this.curSize]),this._curDirection=t,this._curSpeed=e.lastSpeed;var u=e.lastState;u!==h.PlayerState.Idle&&u!==h.PlayerState.Stunning||this.setWorldPosition(cc.v2(e.lastPositionX,e.lastPositionY)),u===h.PlayerState.InWaterSurface&&this.setWorldPosition(cc.v2(e.lastPositionX,e.lastPositionY)),this.lastStateFromNet==u&&this.lastStateFromNet==h.PlayerState.Dead||(this.lastStateFromNet=u,this.setState(u))}},t.prototype.update=function(e){if(l.default.inst.curGameState===d.GameState.Playing)if(this._lastPosWS=this.getWorldPosition(),this._recentPositionsStack.push(this._lastPosWS),this._isControllingByBot)this.updateBot(e);else{switch(this.curState){case h.PlayerState.Dead:break;case h.PlayerState.Revive:this._workstate_Revive(e);break;case h.PlayerState.Swimming:case h.PlayerState.Jumping:case h.PlayerState.TurnBack:var t=0;this._isNoGuidedDirection||(t=u.default.inst.getGameParameters().shark_movement.base_movement.swimSpeed[this.sharkType]),this.applyDeceleration(e,t),this.interpolatePlayerPosition(e),this._isRemotePositionStable()&&(cc.log("Fixing position of the remote shark"),this._curInterpolationPosition=this._remotePreviousPosition,this.setWorldPosition(this._remotePreviousPosition));break;case h.PlayerState.InWaterSurface:this._curSpeed=u.default.inst.getGameParameters().shark_movement.base_movement.swimSpeed[this.sharkType],this.navigateFollowGuidedDirection(e,this.guidedDirection),this.applyMovement(e,cc.v2(this._curDirection.x,0)),this._isRemotePositionStable()&&(cc.log("Fixing position of the remote shark under the water surface"),this._curInterpolationPosition=this._remotePreviousPosition,this.setWorldPosition(this._remotePreviousPosition));break;case h.PlayerState.Windup:this.workstate_Windup(e);break;case h.PlayerState.Dashing:this.workstate_Dashing(e);break;case h.PlayerState.OnHelicopter:this.moveHelicopter(e);break;case h.PlayerState.Falling:this.applyFalling(e);break;case h.PlayerState.WaitingForRespawn:break;case h.PlayerState.Jumping:this.workstate_Jumping(e)}this.isreadyToJump()&&this.curState!==h.PlayerState.OnHelicopter&&this.prepareJumpOut(e),this.updateSurface(),this.updateHPBarTransform()}},t.prototype.switchToLocalBot=function(){this._isControllingByBot=!0,this.curState!==h.PlayerState.OnHelicopter&&this.curState!==h.PlayerState.Falling&&this.setState(h.PlayerState.Swimming)},t.prototype.updateBot=function(t){switch(this.curState){case h.PlayerState.OnHelicopter:this._botAutoDropUpdate(t);break;case h.PlayerState.Idle:case h.PlayerState.Swimming:this.update_swim_ai(t);break;case h.PlayerState.Falling:this.update_falling_dir(t)}e.prototype.update.call(this,t)},t.prototype.interpolatePlayerPosition=function(e){this.navigateFollowGuidedDirection(e,this.guidedDirection),this._curInterpolationPosition.addSelf(cc.v2(this._curDirection.x,this._curDirection.y).multiplyScalar(this._curSpeed*e));var t=cc.v2(this._curInterpolationPosition.x,this._curInterpolationPosition.y);if(this._fixErrorTimeLeft-=e,this._fixErrorTimeLeft>0){var o=cc.v2(this._curFixErrorVector.x,this._curFixErrorVector.y).multiplyScalar(this._fixErrorTimeLeft);t.addSelf(o)}var n=this.getWorldPosition(),r=t.sub(cc.v2(n.x,n.y)),i=r.len()/e;this.applyMovement(e,r.normalize(),i,this.curSize)},t.prototype.isRemote=function(){return!this._isControllingByBot},t.prototype.isLocalHuman=function(){return!1},t.prototype.isRealHuman=function(){return this.isRemote()},t.prototype.isLocallyControlledBot=function(){return this._isControllingByBot},t.prototype.setState=function(t){var o=this;if(this.curState!==t&&(this.curState!=h.PlayerState.Dead||t==h.PlayerState.Revive))if(this._isControllingByBot)e.prototype.setState.call(this,t);else{switch(cc.error("Remote setState: "+c.default.enumToString(h.PlayerState,t)),this.curState,t){case h.PlayerState.Idle:this._curSpeed=0,this.animation.idle();break;case h.PlayerState.Killed:this.isReallyDead=!0,this.animation.dead(),this.isDead=!0,this._canBeSpectated=!1,this.doBehaviorKilled();break;case h.PlayerState.Dead:this.animation.dead(),this.isDead=!0,this.isReallyDead=!0,this._canBeSpectated=!1,e.prototype.doBehaviorDead.call(this);break;case h.PlayerState.Revive:this.isReallyDead=!1,this._canBeSpectated=!0;break;case h.PlayerState.Swimming:this.animation.swimming();break;case h.PlayerState.SizeUp:this.animation.sizeup();break;case h.PlayerState.TurnBack:this.animation.turn180();break;case h.PlayerState.InWaterSurface:break;case h.PlayerState.Windup:this.animation.windup();break;case h.PlayerState.Dashing:this.animation.dash();break;case h.PlayerState.WaitingForRespawn:this.animation.dead(),this._lastTimeSwitchedToWaitingToRespawn=l.default.inst.getLocalGameClockSec(),this.HUD.active=!1,this.scheduleOnce(function(){o.node.opacity=0},2);var n=u.default.inst.getGameParameters().GameControl.invisible_duration_after_respawn+u.default.inst.getGameParameters().GameControl.time_to_respawn_player-.2;this.scheduleOnce(function(){cc.tween(o.node).to(5,{opacity:255}).start(),o.HUD.active=!0},n),this.spawnMeats();break;case h.PlayerState.Jumping:this.animation.setTimeScale(1.5),this.animation.jumpOut(),this._isOnRock=!1,this._jumpCurSpeedY=this.gameParams.shark_movement.air.jump_speed_per_size[this.curSize],this._jumpWileECTime=this.gameParams.shark_movement.air.wileE_C_time,this.curState===h.PlayerState.Swimming&&(this._jumpCurSpeedY*=this.gameParams.shark_movement.air.weak_jump_speed_ratio,this._jumpWileECTime/=2),this.makeWaveOnSurface(!1);break;case h.PlayerState.Stunning:this.animation.stun()}this.curState=t}},t.prototype.applyDash=function(){this._isControllingByBot&&e.prototype.applyDash.call(this),this._dashCurTime=0,this._oppHittedInDashSection=[],this.particalBoost=this.node.getComponent(p.default).create(),this.scheduleOnce(this.disableDash,this._dashDuration),this.setState(h.PlayerState.Dashing),this.updateHeightAttackableBoxCollider(!0)},t.prototype.disableDash=function(){h.PlayerState,this._isControllingByBot&&e.prototype.disableDash.call(this),this.particalBoost&&(this.particalBoost.destroy(),this.particalBoost=null),this.setState(h.PlayerState.Swimming),this._curSpeed*=.8,this.updateHeightAttackableBoxCollider(!1),this._curInterpolationPosition=cc.v2(this.getWorldPosition()),this._curFixErrorVector=cc.v2(0,0),this._fixErrorTimeLeft=0},t.prototype.goingToPerformDashing=function(e){var t=this;if(!this._isControllingByBot){this._dashDirection=c.default.polarToCartesian(cc.v2(1,e.direction));var o=e.commandTime+s.default.inst.deltaClock-Date.now();this._calculateDashParameters(e.energy);var n=this.getWorldPosition();this._dashStartPos=cc.v2(e.posX,e.posY);var r=cc.Vec2.distance(n,this._dashStartPos);this._dashFixPosErrorSpeed=r/this.gameParams.shark_movement.dash.dash_windup_duration,o>0?(this.setState(h.PlayerState.Windup),this.unschedule(this.applyDash),this.scheduleOnce(function(){t.applyDash()},o/1e3)):this.applyDash(),this._curSpeed=0;var i=cc.misc.radiansToDegrees(c.default.cartesianToPolar(cc.v2(this._dashDirection.x,this._dashDirection.y)).y);this.node.angle=i,this.updateFlipYFollowingAngle()}},t.prototype.workstate_Windup=function(e){var t=this.getWorldPosition(),o=cc.v2(this._dashStartPos).sub(t).normalize();this._curSpeed=this._dashFixPosErrorSpeed,this.applyMovement(e,o)},t.prototype.getCurrentScore=function(){return this.remotingScore},t.prototype.forceNavigateFollowAngle=function(t){this._isControllingByBot&&e.prototype.forceNavigateFollowAngle.call(this,t),this._curDirection=c.default.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(t)));var o=this.node.angle%180,n=t%180,r=Math.min(7,Math.abs(o-n));if(r>0){var i;i=c.default.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(o+r))).angle(this._curDirection)<c.default.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(o-r))).angle(this._curDirection)?o+r:o-r,this.node.angle=i}this.updateFlipYFollowingAngle()},t.prototype.repeat=function(e,t){return cc.misc.clampf(e-Math.floor(e/t)*t,0,t)},t.prototype.lerpTheta=function(e,t,o){var n=this.repeat(t-e,360);return cc.misc.lerp(e,e+(n>180?n-360:n),o)},t.REMOTE_POSITION_STACK_SIZE=10,o=i([y],t)}(a.default));o.default=m,cc._RF.pop()},{"../../Shared/Defines":"Defines","../Game":"Game","../GameEnums":"GameEnums","../HSAUtils":"HSAUtils","../Network/NetClient":"NetClient","../ParticleFollow":"ParticleFollow","../TuningData":"TuningData","../UI/CircleBar":"CircleBar","./PlayerController":"PlayerController"}],PlayerController:[function(e,t,o){"use strict";cc._RF.push(t,"d71d1KSnrtLEK8/4b8GDRYR","PlayerController");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../globals"),l=e("../../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/NgcRevive"),u=e("../../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/NgcSpectatorManager"),p=e("../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),d=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),f=e("../../NanoGameCore/Services/Ads/Ads"),h=e("../../Shared/Defines"),g=e("../CharacterControllerBase"),y=e("../Cheats/CheatsManager"),m=e("../DeathZoneManager"),_=e("../Enemy/EnemyControllerBase"),v=e("../Game"),S=e("../GameCamera"),b=e("../GameEnums"),N=e("../GameObject"),P=e("../GameScripts/GameObjectMgr"),C=e("../GameScripts/GamePoolItem"),w=e("../GameScripts/PoolItemInfo"),T=e("../GameTrackingDataHelper"),I=e("../HSACountryFlagsManager"),R=e("../HSAUtils"),O=e("../Localized/HSALocalizedManager"),E=e("../Main"),k=e("../Maps/MapController"),A=e("../Network/HSANetUtils"),B=e("../Network/NetClient"),D=e("../Obstacle/BlockObject"),M=e("../OffScreen/OffscreenDisableRender"),L=e("../ParticleFollow"),F=e("../SceneManager"),G=e("../Sound/SoundResource"),U=e("../SoundManager"),j=e("../StartPoint"),x=e("../TrackingManager"),z=e("../TuningData"),H=e("../UI/BoostBarOnShark"),W=e("../UI/CircleBar"),V=e("../UI/GameUI"),Y=e("../Utils/ConstConfig"),K=e("../WaterSurface/WaterSurfaceManager"),q=e("./PlayerAnim"),X=e("./SharkMeat"),J=cc._decorator,Q=J.ccclass,Z=J.property,$={Charger:100,Brawler:80,Hunter:60},ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._canBeSpectated=!0,t.CircleAnimList=["XStoS","XStoS","StoM","MtoL","LtoXL","XLtoXXL"],t.HUD=null,t.sharkShieldNode=null,t.CircleProgressBar=null,t.CircleBarSpine=null,t.BoostBarContainer=null,t.directionArrow=null,t.nameLabel=null,t.countryFlagSprite=null,t.sizeNameSprite=null,t.curState=b.PlayerState.PreInit,t.guidedDirection=null,t.isImmortal=!0,t.isGodMode=!1,t.gameParams=null,t.coins=-77,t.stars=-77,t._lastDirection=null,t._curFoodEatenSinceSizeUp=0,t._preRecoverTimer=0,t._curSize=0,t._curAvailableLifes=0,t._curRank=0,t._sharkType="",t.skin=null,t.netID=null,t.animation=null,t.temporarysizeupTime=0,t.invincibleTime=0,t.twinTime=0,t._timeInDeathZone=0,t._timeSinceLastHurtAnim=0,t._goldRushBonus=1,t._doubleDamageBonus=1,t._speedHelicopter=0,t._speedFallingFromHelicopter=0,t._hpLoseDropOnSand=0,t._distHelicopterVsSurface=0,t._maxSpeedFalling=0,t._FreeFallAcceleration=10,t.myHelicopter=null,t.PLAYER_DEAD_BROADCAST_MESSAGE_TYPE="player_dead",t.PLAYER_REVIVE_BROADCAST_MESSAGE_TYPE="player_revive",t._recentPositionsStack=[],t.nextUpdateTime=0,t.isReallyDead=!1,t.playerName=null,t.nextCurStateMsgID=0,t.typeOfAttacker=N.GameObjectType.Unknown,t.attacker=null,t._jumpCurSpeedY=0,t._jumpWileECTime=0,t._isOnRock=!1,t._timeWithoutGravity=0,t._isMakeSplashWater=!1,t._ranTrackingLandedWater=!1,t._turnBackTargetAngle=0,t.lastDragSend=Date.now(),t._FallingDecelerationPerS=0,t._FallingAccelerationPerS=0,t._foodsGonnaEat=[],t._curDashEnergy=0,t._jumpUpGravityScale=1,t._lastPosWS=null,t._dashDuration=0,t._dashFullSpeedDuration=0,t._dashCurTime=0,t._dashDecelerationSpeed=0,t._attackableBoxCollider=null,t._timeSinceLastBite_millisecond=0,t._oppHittedInDashSection=[],t._oppHasShieldInDashSection=[],t._scoreAttacking=0,t._scoreEating=0,t._scoreSizeUp=0,t._scoreLettersCollecting=0,t._scoreRank=0,t.TIME_DELAY_FIND_NEAREST_FOOD=5,t._preyTarget=null,t._freeMoveTarget=null,t._timeDelayForRandomNewMoveTarget=0,t._timeDelayForFindNearestFood=0,t.nextFindAttackableSharkTimer=0,t.CHECK_COLLISION_AHEAD_DELAY_TIME=1,t._timeDelayCheckCollisionAhead=0,t._timeToDropStart=0,t}var o;return r(t,e),o=t,t.prototype.getTotalScore=function(){return this.getCurrentScore()},t.prototype.getNetID=function(){return this.netID},t.prototype.getCountryFlag=function(){return this.countryFlagSprite.spriteFrame},t.prototype.isLead=function(){return!1},Object.defineProperty(t.prototype,"curSize",{get:function(){return this._curSize},set:function(e){this._curSize=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"availableLifes",{get:function(){return this._curAvailableLifes},set:function(e){this._curAvailableLifes=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curRank",{get:function(){return this._curRank},set:function(e){this._curRank=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sharkType",{get:function(){return this._sharkType},set:function(e){this._sharkType=e},enumerable:!1,configurable:!0}),t.prototype.setSizeName=function(e){this.sizeNameSprite.spriteFrame=v.default.inst.sizeNameList[e<0||e>=v.default.inst.sizeNameList.length?0:e]},Object.defineProperty(t.prototype,"countryCode",{get:function(){return this._countryCode},set:function(e){this._countryCode=e,this.countryFlagSprite.spriteFrame=I.default.inst.getFlagSpriteFrame(this._countryCode)},enumerable:!1,configurable:!0}),t.prototype.getAnimation=function(){return this.animation?this.animation:(this.animation=this.node.getComponentInChildren(q.default),this.animation)},t.prototype.onLoad=function(){this.HUD.parent=c.default.SceneManager.inst.hpOfSharksNode,this.sharkShieldNode.parent=c.default.SceneManager.inst.hpOfSharksNode,this.isLocalHuman()||(this.directionArrow.parent=c.default.GameUI.inst.node,this.directionArrow.active=!1),e.prototype.onLoad.call(this)},t.prototype.start=function(){var t=this;this.twinTime=0,this.temporarysizeupTime=0,this.invincibleTime=0,this.curRank=0,this.gameParams=z.default.inst.getGameParameters(),this.startSpeed=this.gameParams.shark_movement.base_movement.swimSpeed[this.sharkType],this.rotatableAnglePerSecond=this.gameParams.shark_movement.base_movement.turn_rate_persec[this.sharkType],this._maxSpeed=this.startSpeed,this._speedAccelerationPerS=this.gameParams.shark_movement.base_movement.speed_acceleration_per_second,this._speedDecelerationPerS=this.gameParams.shark_movement.base_movement.speed_deceleration_per_second,this._HPreducePerSec=this.gameParams.shark.hp_reduce_per_time,this._hpPercentToStarving=this.gameParams.shark.hp_percent_to_starving,this._HpRecoveryTimer=this.gameParams.shark.hp_pre_recovery_timer,this._HPRecoverRatePersize=this.gameParams.shark.hp_recovery_rate_per_size,this._speedHelicopter=this.gameParams.Helicopter.General.speed_helicopter,this._speedFallingFromHelicopter=this.gameParams.Helicopter.General.InitialFallSpeed,this._hpLoseDropOnSand=this.gameParams.Helicopter.General.HP_lose_when_drop_into_sand,this._distHelicopterVsSurface=this.gameParams.Helicopter.General.Helicopter_height,this._maxSpeedFalling=this.gameParams.Helicopter.General.MaxFallSpeed,this._allowSpeedDecreaseEndDash=this.gameParams.GameControl.allow_speed_decrease_at_the_end_of_dash,this.reset(),this.node.on("boxColliderCollisionEnter",function(e,o){t.boxColliderCollisionEnter(e,o)},this),this.node.on("boxColliderOnCollisionStay",function(e,o){t.boxColliderOnCollisionStay(e,o)},this),this.node.on("collideWithFood",function(e){t.collideWithFood(e)},this),this.node.on("collideWithEnemy",function(e){t.collideWithEnemy(e)},this),this.node.on("collideWithObstacle",function(e){t.collideWithObstacle(e)},this),e.prototype.start.call(this),this.updateHPBarTransform(),c.default.Game.inst.isPolygonDebugMode&&(this.node.getComponentInChildren(sp.Skeleton).enabled=!1),this.node.getComponentsInChildren(cc.BoxCollider).forEach(function(e){if(e.tag===b.ColliderTag.Attackable)t._originalAttackableBoxColliderSize=cc.size(e.size),t._attackableBoxCollider=e;else if(e.tag===b.ColliderTag.CanBeAttacked){var o=$[t.sharkType];e.size=cc.size(e.size.width,o)}}),this.isLocalHuman()&&B.default.inst.registerForBroadcastMessageType(this.PLAYER_REVIVE_BROADCAST_MESSAGE_TYPE,this.handleBroadcastMessagePlayerRevive.bind(this)),this.isLocalHuman()&&d.NgcBuildConfig.enabledDebugMode&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this._canBeSpectated=!0},t.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.d:y.default.inst.cheatDead();break;case cc.macro.KEY.u:y.default.inst.cheatSizeUp();break;case cc.macro.KEY.g:y.default.inst.cheatgodmode();break;case cc.macro.KEY["-"]:y.default.inst.cameraZoomOut();break;case cc.macro.KEY["+"]:y.default.inst.cameraZoomIn()}},t.prototype.handleBroadcastMessagePlayerDash=function(e){cc.log("Received Player Dash message!!!"),e.netID!==B.default.inst.localPlayerNetID&&c.default.SceneManager.inst.getAllPlayers().forEach(function(t){t.netID===e.netID&&t.isRemote()&&t.goingToPerformDashing(e)})},t.prototype.handleMessageCommandDash=function(e){e.playerId!==B.default.inst.localPlayerNetID&&c.default.SceneManager.inst.getAllPlayers().forEach(function(t){t.netID===e.playerId&&t.isRemote()&&t.goingToPerformDashing(e)})},t.prototype.sendBroadcastMessagePlayerDash=function(e){var t=R.default.cartesianToPolar(cc.v2(this._curDirection.x,this._curDirection.y)).y;this._dashDirection=cc.v2(this._curDirection.x,this._curDirection.y);var o=this.getWorldPosition(),n=this.gameParams.shark_movement.base_movement.windup_speed*this.gameParams.shark_movement.dash.dash_windup_duration,r=cc.v2(o.x,o.y).addSelf(cc.v2(this._dashDirection.x,this._dashDirection.y).multiplyScalar(n)),i={direction:t,time:Date.now()+1e3*this.gameParams.shark_movement.dash.dash_windup_duration-B.default.inst.deltaClock,startPos:r,distanceRatio:e};d.NgcBuildConfig.offlineMode||B.default.inst.sendMessageCommandDash(i.time,c.default.Game.inst.curGameNetID,this.netID,r.x,r.y,t,e)},t.prototype.sendBroadcastMessagePlayerKill=function(e){this.curRank=F.default.inst.getNumPlayerAlive()+1,d.NgcBuildConfig.offlineMode||B.default.inst.sendMessageCommandKill(e)},t.prototype.handleBroadcastMessagePlayerKill=function(){cc.log("Received Player Kill message!!!")},t.prototype.sendBroadcastMessagePlayerDead=function(e){this.curRank=F.default.inst.getNumPlayerAlive()+1,d.NgcBuildConfig.offlineMode||B.default.inst.sendMessageCommandDead(e,this.curRank)},t.prototype.handleBroadcastMessagePlayerDead=function(e){cc.log("Received Player Dead message!!!");var t=c.default.SceneManager.inst.getAllPlayers();if(t.forEach(function(t){t.netID===e.playerId&&(t.curRank=e.rank,t.setState(b.PlayerState.Dead))}),F.default.inst.getNumPlayerAlive()<=1&&e.playerId!==this.netID)if(this.isPlayerDie()){var o=t.find(function(e){return!e.isPlayerDie()});o&&(o.curRank=1)}else this.curRank=1,this.setState(b.PlayerState.Win),v.default.inst.showRankingPopup()},t.prototype.sendBroadcastMessagePlayerRevive=function(e){if(!d.NgcBuildConfig.offlineMode){var t={netID:e,revivePosition:cc.v2(0,0)},o=v.default.inst?v.default.inst.curGameNetID:"";B.default.inst.broadcastMessage(this.PLAYER_REVIVE_BROADCAST_MESSAGE_TYPE,t,o)}},t.prototype.handleBroadcastMessagePlayerRevive=function(e){var t=e.payload;t.netID!=this.netID&&c.default.SceneManager.inst.getAllPlayers().forEach(function(e){e.netID===t.netID&&e.isPlayerDie()&&e.setState(b.PlayerState.Revive)})},t.prototype.goingToPerformDashing=function(){},t.prototype.switchToLocalBot=function(){},t.prototype.getCountryFlagFrame=function(){return this.countryFlagSprite.spriteFrame},t.prototype.getPlayerName=function(){return this.playerName},t.prototype.destroyDirectionArrow=function(){this.directionArrow&&this.directionArrow.isValid&&this.directionArrow.destroy()},t.prototype.onDestroy=function(){this.destroyDirectionArrow()},t.prototype.updateFromNetStateData=function(){},Object.defineProperty(t.prototype,"isDead",{get:function(){return this._isDead},set:function(e){this._isDead=e,F.default.inst.updateNumPlayerAlive()},enumerable:!1,configurable:!0}),t.prototype.isAlive=function(){return!this._isDead},t.prototype.getName=function(){return this.nameLabel.string},t.prototype.processAttackResult=function(e){if(e.isResolved){var t=c.default.SceneManager.inst.findPlayerByNetID(e.killerPlayerId),n=c.default.SceneManager.inst.findPlayerByNetID(e.victimPlayerId);e.isValidated?(T.default.inst.alertEatPlayer(this),T.default.inst.alertAddingSharkClassKill(this,n.sharkType),t._scoreAttacking+=e.damage,n.receiveDamage(e.damage,!0,!0),n.curHP<e.damage&&(t._scoreAttacking+=Y.ConstConfig.SCORES.KILL_OPPONENT),n.netID===B.default.inst.localPlayerNetID&&(n.typeOfAttacker=N.GameObjectType.Enemy,n.attacker=t)):t.netID===B.default.inst.localPlayerNetID&&t.spawnFlyawayText(O.default.t("HSA_MISS").text,60,o.COLOR_SIZEUP,this.node.getPosition())}},t.prototype.update=function(e){if(v.default.inst.curGameState===h.GameState.Playing&&this.curState!=b.PlayerState.Win){switch(!d.NgcBuildConfig.offlineMode&&!this.isLocalHuman()&&!this.isPlayerDie()&&F.default.inst.getNumPlayerAlive()<=1&&this.setState(b.PlayerState.Dead),this._lastPosWS=this.getWorldPosition(),this._recentPositionsStack.push(this._lastPosWS),this._recentPositionsStack.length>o.LAST_POS_STACK_COUNT&&this._recentPositionsStack.shift(),this.curState){case b.PlayerState.OnHelicopter:this._workstate_OnHelicopter(e);break;case b.PlayerState.Idle:this._workstate_Idle(e);break;case b.PlayerState.Swimming:this._workstate_Swimming(e);break;case b.PlayerState.Windup:this.workstate_Windup(e);break;case b.PlayerState.Dashing:this.workstate_Dashing(e);break;case b.PlayerState.Dead:T.default.inst.playerTotalCount=F.default.inst.getNumPlayerAlive(),this._workstate_Dead(e);break;case b.PlayerState.Revive:this._workstate_Revive(e);break;case b.PlayerState.Stunning:this._workstate_Stunning(e);break;case b.PlayerState.TurnBack:this._workstate_TurnBack(e);break;case b.PlayerState.PowerUp:this._workstate_PowerUP(e);break;case b.PlayerState.SizeUp:this._workstate_SizeUp(e);break;case b.PlayerState.Jumping:this.workstate_Jumping(e);break;case b.PlayerState.Falling:this._workstate_Falling(e);break;case b.PlayerState.InWaterSurface:this._workstate_InWaterSurface(e);break;case b.PlayerState.WaitingForRespawn:this._workstate_WaitingForRespawn(e)}this.isreadyToJump()&&this.curState!==b.PlayerState.OnHelicopter&&this.prepareJumpOut(e),this.updateSurface(),!this.isReallyDead&&m.default.inst.checkPointInDeatchZone(this.getWorldPosition())?(this._timeInDeathZone+=e,this._timeSinceLastHurtAnim+=e,this._timeInDeathZone>=this.gameParams.death_zone.time_to_die&&(this.setState(b.PlayerState.Killed),this.isLocalHuman()&&T.default.inst.send_playerDie()),this._timeSinceLastHurtAnim>1&&(this.animation.hurt(),this._timeSinceLastHurtAnim=0),this.typeOfAttacker=N.GameObjectType.Toxic):(this._timeInDeathZone=0,this._timeSinceLastHurtAnim=0),this.isLocalHuman()&&V.default.inst.updateToxicWarningEffect(this._timeInDeathZone/this.gameParams.death_zone.time_to_die),this.updateDashSystem(e),this._timeSinceCurState+=e,this._preRecoverTimer+=e,this.curState!==b.PlayerState.WaitingForRespawn&&this.curState!==b.PlayerState.Dead&&(this.reduceAndCheckHPPerSeconds(e),this.autoRecoverHP(e))}},t.prototype.lateUpdate=function(){this.updateHPBarTransform()},t.prototype.update_falling_dir=function(){if(this.nextUpdateTime<Date.now()){this.nextUpdateTime=Date.now()+R.default.randomFromTo(1e3,3e3);var e=R.default.randomFromTo(-175,-45);this.forceNavigateFollowAngle(e)}},t.prototype.update_swim_ai=function(e){this.nextUpdateTime<Date.now()&&(this._checkCollisionAhead(e),this._findPosibleAttackableShark()||this._huntingPreyWork(e)),this._curFoodEatenSinceSizeUp+=this.gameParams.bot.point_increase_per_second*e,this._curFoodEatenSinceSizeUp>=this._numberFoodNeedToSizeUp&&this.sizeUp()},t.prototype.cleanFoodsGonnaEat=function(){this._foodsGonnaEat=[]},t.prototype.setScaleBySize=function(e){var t=this;if(E.Main.getAppContext()===E.AppContext.Gameplay||E.Main.getAppContext()===E.AppContext.Matchmaking||E.Main.getAppContext()===E.AppContext.Spectator){var o=z.default.inst.getGameParameters().shark_movement.base_movement.scales_per_size[e],n=this.node.scaleY<0?-o:o;this.node.scaleX=o,this.node.scaleY=n,this.isLocalHuman()?(this.HUD.scale=this.gameParams.shark_movement.base_movement.scales_hud_per_size[e],F.default.inst.getAllPlayers().forEach(function(o){null!=o&&!o.isPlayerDie()&&!o.isLocalHuman()&&t.gameParams.shark_movement.base_movement.scales_hud_per_size.length>e&&o.HUD&&(o.HUD.scale=t.gameParams.shark_movement.base_movement.scales_hud_per_size[e])})):0==e&&(this.HUD.scale=this.gameParams.shark_movement.base_movement.scales_hud_per_size[0])}},t.prototype.assignNetID=function(e){this.netID=e},t.prototype.isRemote=function(){return!1},t.prototype.isLocalHuman=function(){return!0},t.prototype.isRealHuman=function(){return!0},t.prototype.isFinishGameplay=function(){return this.isReallyDead},t.prototype.isLocallyControlledBot=function(){return!1},t.prototype.isRemoteBot=function(){return-1!==this.netID.indexOf(":")},t.createPlayer=function(e){var t=e.netID.includes(":"),n=e.netID==B.default.inst.localPlayerNetID,r=c.default.SceneManager.inst.botsList.includes(e.netID),i=c.default.Game.inst.remotePlayerPrefab;n?i=c.default.Game.inst.localPlayerPrefab:r&&(i=c.default.Game.inst.botPlayerPrefab);var a=cc.instantiate(i),s=a.getComponent(o),l=e.name.split("|"),p=l[l.length-1];s.countryCode=p,s.getAnimation().queueSkin(e.skin),s.skin=e.skin,Y.ConstConfig.SHARK_DATABASE.forEach(function(t){t.name===e.skin&&(s.sharkType=t.type)}),a.parent=c.default.SceneManager.inst.sharksNode,n&&(o.localPlayer=s),n||(a.opacity=50),s.assignNetID(e.netID);var d=t?cc.Color.WHITE:cc.Color.YELLOW;s.setNameLabel(e.name.replace("|"+p,""),d),s.curSize=e.startingSize,s.setSizeName(s.curSize),s.CircleProgressBar.getComponent(W.default).updateBGProgress(s.curSize),s.maxHP=z.default.inst.getGameParameters().shark.HP_per_size[s.curSize];var f=j.default.allPlayerStartPoints[e.startPointIndex];return s.setWorldPosition(R.default.getWorldPos(f.node)),s.startPointIndex=e.startPointIndex,f.boom(),s.availableLifes=z.default.inst.getGameParameters().shark.number_of_lifes,n||u.NgcSpectatorManager.inst&&(s._canBeSpectated=!0),s},t.prototype.setNameLabel=function(e,t){this.nameLabel.string=e,t&&(this.nameLabel.node.color=t),this.playerName=e},t.prototype.getCurStateData=function(e){void 0===e&&(e=!0);var t={stateMsgID:this.nextCurStateMsgID,netID:this.netID,lastPosition:this.getWorldPosition(),lastState:this.curState,score:this.getCurrentScore(),hp:this._curHP,lastDir:this._curDirection,lastGuidedDir:this.guidedDirection,curSize:this._curSize,lastSpeed:this._curSpeed};return e||(t.name=this.playerName,t.skin=this.skin),this.nextCurStateMsgID++,t},t.prototype.localHumanLog=function(e,t){void 0===t&&(t=!1),(this.isLocalHuman()||t)&&cc.log(e)},t.prototype.normalize=function(e,t,o,n,r){return n+(e-t)*(r-n)/(o-t)},t.prototype.setState=function(e){var t=this;if(e!==this.curState&&!(this.curState==b.PlayerState.Killed&&e!=b.PlayerState.Revive&&e!=b.PlayerState.Dead||this.isLocalHuman()&&this.curState===b.PlayerState.Win&&e!=b.PlayerState.Idle&&e!=b.PlayerState.OnHelicopter)){switch(this.curState,e){case b.PlayerState.OnHelicopter:this._wiggleCurrentPoints=0,this.animation.HelicopterIdle(),this.enablePhysicsBodies(!1);break;case b.PlayerState.Idle:this.animation.idle();break;case b.PlayerState.Swimming:if(this.isLocalHuman()){this._ranTrackingLandedWater||(this._ranTrackingLandedWater=!0,T.default.inst.send_playerWaterLanded());var o={offsetX:this.gameParams.camera.swimming.swimCamera_X_Offset,offsetY:this.gameParams.camera.swimming.swimCamera_Y_Offset,changeOffsetSpeed:.1,zoomRatio:this.gameParams.camera.scaling.camera_zoomout_per_size[this._curSize],zoomSpeed:.5};S.default.inst.changeCameraState(S.CameraState.playerFixed,o)}this._curSpeed=this._allowSpeedDecreaseEndDash?this._curSpeed:this.startSpeed,this._isInWaterSurface=!1,this.animation.swimming();break;case b.PlayerState.Windup:this.animation.windup(),this.scheduleOnce(function(){t.applyDash(),B.default.inst.sendLocalPlayerGameState()},this.gameParams.shark_movement.dash.dash_windup_duration);break;case b.PlayerState.Dashing:this.animation.dash();break;case b.PlayerState.Stunning:this.unschedule(this.disableDash),this.disableDash(),this._curSpeed=0,this.animation.stun(),this.scheduleOnce(function(){t.curState!==b.PlayerState.Dead&&t.setState(b.PlayerState.Idle)},this.gameParams.shark.stun_duration);break;case b.PlayerState.Win:this.isLocalHuman()&&p.default.inst.onGameplayOver(),this._curSpeed=0,this.animation.win(),this.scheduleOnce(function(){t.doBehaviorWin()},2);break;case b.PlayerState.Killed:if(this.isLocalHuman()){if(this.isGodMode)return;p.default.inst.onGameplayOver()}this.isReallyDead=!0,this.animation.dead(),this.isDead=!0,this._canBeSpectated=!1,this.doBehaviorKilled();break;case b.PlayerState.Dead:this.isLocalHuman()&&p.default.inst.onGameplayOver(),this.isReallyDead=!0,this.animation.dead(),this.isDead=!0,this._canBeSpectated=!1,this.doBehaviorDead();break;case b.PlayerState.Revive:this.isLocalHuman()&&p.default.inst.onGamePlayStart(),this.isReallyDead=!1,this._canBeSpectated=!0;break;case b.PlayerState.WaitingForRespawn:this._curSpeed=0,this.animation.dead(),this.node.getChildByName("collider").getComponent(cc.BoxCollider).enabled=!1,this.isLocalHuman()&&(v.default.inst.waitingForRespawnEffect.active=!0),this.scheduleOnce(function(){t.node.opacity=0},2),this.scheduleOnce(function(){t.node.opacity=255,t.curHP=t.maxHP,t.setState(b.PlayerState.Idle),t.node.getChildByName("collider").getComponent(cc.BoxCollider).enabled=!0,t.isLocalHuman()&&(v.default.inst.waitingForRespawnEffect.active=!1)},this.gameParams.GameControl.time_to_respawn_player),this.spawnMeats();break;case b.PlayerState.TurnBack:this.animation.turn180(),this._turnBackTargetAngle=cc.misc.radiansToDegrees(R.default.cartesianToPolar(this._curDirection.mul(-1)).y),this.scheduleOnce(function(){t.setState(b.PlayerState.Swimming),t.forceNavigateFollowAngle(t._turnBackTargetAngle)},this.animation.turn180AnimationDuration);break;case b.PlayerState.PowerUp:break;case b.PlayerState.SizeUp:this._curFoodEatenSinceSizeUp-=this._numberFoodNeedToSizeUp,this._curSize++,this.performSizeupAnimation();var n=this._curHP/this._maxHP;this._maxHP=this.gameParams.shark.HP_per_size[this._curSize],this._curHP=this._maxHP*n,this._maxSpeed-=this._maxSpeed*this.gameParams.shark.speed_percent_decrease[this.sharkType][this._curSize]/100,this.isLocalHuman()&&F.default.inst.getAllBlockObjects().forEach(function(e){t._curSize,e.limitedSize,e.node.active=!0});break;case b.PlayerState.Jumping:this.animation.setTimeScale(1.5),this.animation.jumpOut(),this._isOnRock=!1,this._jumpCurSpeedY=this.gameParams.shark_movement.air.jump_speed_per_size[this.curSize],this._jumpWileECTime=this.gameParams.shark_movement.air.wileE_C_time,this.curState===b.PlayerState.Swimming?(this._jumpCurSpeedY*=this.gameParams.shark_movement.air.weak_jump_speed_ratio,this._jumpWileECTime/=2):(this._jumpCurSpeedY*=this._dashDirection.y,this._timeWithoutGravity=Math.abs(this._dashDirection.x*this.gameParams.shark_movement.air.time_without_gravity)),this.makeWaveOnSurface(!1);break;case b.PlayerState.Falling:if(this.isLocalHuman()){V.default.inst.showWiggleToDropTutorial(!1),V.default.inst.showDragToControl(!0),this.scheduleOnce(function(){V.default.inst.showInGame_Leaderboard()},.5);var r={offsetY:this.gameParams.camera.helicopter.falling_state_top_screen_offset,changeOffsetSpeed:this.gameParams.camera.helicopter.falling_state_top_screen_offset_speed,zoomRatio:this.gameParams.camera.helicopter.falling_state_camera_zoom,zoomSpeed:this.gameParams.camera.helicopter.falling_state_camera_zoom_speed};S.default.inst.smoothSpeedX=10,S.default.inst.smoothSpeedY=10,this.scheduleOnce(function(){S.default.inst.changeCameraState(S.CameraState.showBottom,r)},this.gameParams.camera.helicopter.falling_state_camera_zoom_delay);var i={offsetX:0,offsetY:this.gameParams.camera.swimming.swimCamera_Y_Offset/2,changeOffsetSpeed:this.gameParams.camera.helicopter.falling_state_top_screen_offset_speed,zoomRatio:this.gameParams.camera.helicopter.falling_state_camera_zoom,zoomSpeed:this.gameParams.camera.helicopter.falling_state_camera_zoom_speed};this.scheduleOnce(function(){S.default.inst.changeCameraState(S.CameraState.showBottom,i)},6)}this._isOnRock=!1,this.animation.HelicopterDrop(),this.forceNavigateFollowAngle(-90),this.myHelicopter.removeHelicopter(this.netID),this._curSpeed=this._speedFallingFromHelicopter;var a=Math.sqrt(2*this._distHelicopterVsSurface/this._FreeFallAcceleration),s=a-80*a/100;this._FallingAccelerationPerS=this._maxSpeedFalling/a,this._FallingDecelerationPerS=this._maxSpeedFalling/s,this.enablePhysicsBodies(!0),this.particalBoost=this.node.getComponent(L.default).create();break;case b.PlayerState.InWaterSurface:this.animation.swimming(),this._curSpeed=this.startSpeed}this.curState=e,this._timeSinceCurState=0}},t.prototype.doBehaviorWin=function(){return a(this,void 0,void 0,function(){return s(this,function(){return this.HUD.destroy(),v.default.inst.playerWin(this),[2]})})},t.prototype.doBehaviorKilled=function(){this.node.getChildByName("collider").getComponent(cc.BoxCollider).enabled=!1,this.spawnMeats(),this.HUD.active=!1,v.default.inst.playerKilled(this)},t.prototype.doBehaviorDead=function(){this.node.getChildByName("collider").getComponent(cc.BoxCollider).enabled=!1,this.HUD.active=!1,v.default.inst.playerDead(this)},t.prototype.startSpectator=function(){u.NgcSpectatorManager.inst&&(u.NgcSpectatorManager.inst.startSpectator(),this.unschedule(this.startSpectator))},t.prototype.canRevive=function(){return!(!f.NgcAds.inst||!f.NgcAds.inst.adsIsAvailable(f.AdsType.VideoReward)||F.default.inst.getNumPlayerAlive()<=2||l.default.inst.isOfferAccepted())},t.prototype.doBehaviorRejectRevive=function(){d.NgcBuildConfig.offlineMode?this.setState(b.PlayerState.Dead):(x.default.getInst().LogEvent_ReviveOffer(F.default.inst.getNumPlayerAlive(),this.getKillsScore()+this.getDevouredScore(),c.default.Game.inst.getLocalGameClockSec().toString(),c.default.Game.inst.curGameNetID,!1),this.sendBroadcastMessagePlayerDead(this.netID))},t.prototype.doBehaviorRevive=function(){x.default.getInst().LogEvent_ReviveOffer(F.default.inst.getNumPlayerAlive(),this.getKillsScore()+this.getDevouredScore(),c.default.Game.inst.getLocalGameClockSec().toString(),c.default.Game.inst.curGameNetID,!0),this.sendBroadcastMessagePlayerRevive(this.netID),this.setState(b.PlayerState.Revive)},t.prototype.doRevive=function(){var e=this;this.node.getChildByName("collider").getComponent(cc.BoxCollider).enabled=!0,this.animation.node.active=!0,setTimeout(function(){e.animation.node.active=!0},1e3),this.animation.skeleton.setCompleteListener(null),this.HUD.active=!0,this._timeInDeathZone=0,this._timeSinceLastHurtAnim=0,this._curHP=this.maxHP,this.isDead=!1,this.addShield(),this.node.active=!1,this.node.active=!0,this.setState(b.PlayerState.Idle),this.spawnFlyawayText(O.default.t("HSA_REVIVE").text,60,cc.color(255,255,255,255),this.node.getPosition()),this.scheduleOnce(function(){e.removeShield()},z.default.inst.getGameParameters().GameControl.immortal_shield_revive_duration_since_countdown),this.isLocalHuman()&&T.default.inst.send_revive()},t.prototype.spawnMeats=function(){for(var e=0;e<this.gameParams.shark.number_meat_per_size[this._curSize];e++){var t=P.default.inst.getFreeItem(w.PoolItemType.Meat),o=e%2==0?1:-1;t.getComponent(X.default).setDirection(o,e),t.getComponent(X.default).setWorldPosition(this.getWorldPosition()),t.getComponent(X.default).active()}},t.prototype._workstate_OnHelicopter=function(e){if(this._wiggleCurrentPoints>100||this.getWorldPosition().x>=k.default.inst.getMapSize().width-1e3)return this.dropShark(),void this.animation.setTimeScale(1);var t=this.gameParams.Helicopter.wiggle_to_drop.points_lost_per_second;this.moveHelicopter(e),this._wiggleCurrentPoints=Math.max(0,this._wiggleCurrentPoints-t*e);var o=Math.max(.2,.05*this._wiggleCurrentPoints);this.animation.setTimeScale(o)},t.prototype.moveHelicopter=function(e){var t=cc.v2(1,0).normalize();this._curSpeed=this._speedHelicopter,this.applyMovement(e,t),this.myHelicopter&&this.myHelicopter.move(e,t,this._speedHelicopter)},t.prototype.dropShark=function(){this.curState==b.PlayerState.OnHelicopter&&v.default.inst.curGameState==h.GameState.Playing&&(this.isLocalHuman()&&T.default.inst.send_playerDropShark(),this.setState(b.PlayerState.Falling))},t.prototype.enablePhysicsBodies=function(e){this.node.getComponents(cc.BoxCollider).forEach(function(t){t.enabled=e})},t.prototype.touchToWiggle=function(){S.default.inst.shakeCamera(.1,2,2),this._wiggleCurrentPoints+=this.gameParams.Helicopter.wiggle_to_drop.points_per_touch},t.prototype._workstate_Idle=function(){null!==this.guidedDirection&&(this.setState(b.PlayerState.Swimming),this.isLocalHuman()&&c.default.GameUI.inst.showDragToControl(!1))},t.prototype._workstate_Swimming=function(e){if(null===this.guidedDirection){if(this.gameParams.GameControl.StopWhenDashOver)return this.applyDeceleration(e,0),this.applyMovement(e),void(0==this._curSpeed&&this.setState(b.PlayerState.Idle));null!==this._lastDirection&&(this.guidedDirection=cc.v2(this._curDirection.x,this._curDirection.y))}else if(null!==this._curDirection&&cc.misc.radiansToDegrees(this.guidedDirection.angle(this._curDirection))>=this.gameParams.shark_movement.base_movement.min_angle_to_apply_turn_180&&this.curState!==b.PlayerState.Dashing)return this.isLocalHuman()&&cc.log(" Set to TurnBack state!!!"),void this.setState(b.PlayerState.TurnBack);this.applyAcceleration(e),this.navigateFollowGuidedDirection(e,this.guidedDirection),this.applyMovement(e,this._curDirection,this._curSpeed,this._curSize),this._lastDirection=this.guidedDirection,this._curFoodEatenSinceSizeUp>=this._numberFoodNeedToSizeUp&&this.sizeUp()},t.prototype.workstate_Jumping=function(e){this.guidedDirection&&0!==this.guidedDirection.mag()&&this.navigateFollowGuidedDirection(e,this.guidedDirection,this.gameParams.shark_movement.air.air_turn_rate*e);var t=this.gameParams.shark_movement.air.jump_gravity_per_size[this.curSize]*(e/(1/60));t*=this._jumpUpGravityScale,this._jumpCurSpeedY<=0&&this._jumpWileECTime>0?this._jumpWileECTime-=e:this._timeWithoutGravity>0?this._timeWithoutGravity-=e:this._jumpCurSpeedY-=t;var o=this.getWorldPosition(),n=cc.v2(o);n.x+=this.gameParams.shark_movement.air.air_control*e*this._curDirection.x,n.y+=this._jumpCurSpeedY*e;var r=n.sub(o);this.applyMovement(e,r.normalize(),r.len()/e),n.y<k.default.inst.surface.getComponent(K.default).getWorldPosition().y&&(this.animation.setTimeScale(1),this.makeWaveOnSurface(!0),this._curSpeed=this.startSpeed,this._jumpUpGravityScale=1,U.default.inst.playMusic(G.default.inst.WaterAMB),this.setState(b.PlayerState.Swimming),this.forceNavigateFollowAngle(this.node.angle))},t.prototype._workstate_Falling=function(e){this.applyFalling(e)},t.prototype.applyFalling=function(e){if(this.getWorldPosition().y<k.default.inst.surface.getComponent(K.default).getWorldPosition().y&&this._curSpeed>0?this.applyDecelerationFalling(e):this.applyAccelerationFalling(e),null!==this.guidedDirection&&!this._isOnRock){var t=cc.misc.radiansToDegrees(R.default.cartesianToPolar(this.guidedDirection).y);(t<90&&t>=0||t<0&&t>-45)&&(t=-45),(t>90&&t<=180||t<-135)&&(t=-135),this.guidedDirection=R.default.polarToCartesian(cc.v2(1,cc.misc.degreesToRadians(t))),this.navigateFollowGuidedDirection(e,this.guidedDirection,180*e)}cc.misc.radiansToDegrees(R.default.cartesianToPolar(this._curDirection).y),this.applyMovement(e,cc.v2(this._curDirection.x/2,-.7)),this.getWorldPosition().y<k.default.inst.surface.getComponent(K.default).getWorldPosition().y&&(this.isLocalHuman()&&(v.default.inst.gameMusicPlaying||(v.default.inst.gameMusicPlaying=!0,U.default.inst.playGameMusic())),this._isMakeSplashWater||(this.makeWaveOnSurface(!0),this._isMakeSplashWater=!0),this._curSpeed<=0&&(this.particalBoost&&(this.particalBoost.destroy(),this.particalBoost=null),this.setState(b.PlayerState.Swimming),this.forceNavigateFollowAngle(this.node.angle)))},t.prototype._workstate_InWaterSurface=function(e){this.moveInSurface(e)},t.prototype._workstate_PowerUP=function(e){this._workstate_Swimming(e)},t.prototype.workstate_Windup=function(e){this._curSpeed=this.gameParams.shark_movement.base_movement.windup_speed,this.applyMovement(e),this._lastDirection=this.guidedDirection},t.prototype.workstate_Dashing=function(e){var t=this.gameParams.shark_movement.base_movement.swimSpeed[this.sharkType]*this.gameParams.shark_movement.dash.dash_speed_bonus[this.sharkType][this.curSize];this._dashCurTime<this._dashFullSpeedDuration?this._curSpeed=t:this._curSpeed-=this._dashDecelerationSpeed*e,this.applyMovement(e,this._dashDirection,this._curSpeed,this._curSize),this._lastDirection=this.guidedDirection,this._dashCurTime+=e;var o=this._attackableBoxCollider.offset.x*Math.abs(this.node.scaleX),n=this._attackableBoxCollider.size.width*Math.abs(this.node.scaleX),r=this.getWorldPosition(),i=cc.v2(r).add(cc.v2(this._dashDirection).mul(o+n/2)),a=cc.director.getPhysicsManager().rayCast(r,i,cc.RayCastType.Closest);if(a.length>0){var s=!0,c=a[0].collider.node;if("InvisibleBlock"===c.group){var l=c.parent.getComponent(D.default);l&&-1!=this._curSize&&l.limitedSize>=this._curSize&&(s=!1)}if(s){var u=cc.Vec2.distance(a[0].point,r);this._attackableBoxCollider.size.width=(u-o)/Math.abs(this.node.scaleX)*2}}},t.prototype._workstate_Dead=function(){},t.prototype._workstate_Revive=function(){this.doRevive()},t.prototype._workstate_WaitingForRespawn=function(){cc.log("_workstate_WaitingForRespawn")},t.prototype._workstate_Stunning=function(){},t.prototype._workstate_TurnBack=function(e){this._curSpeed=this.gameParams.shark_movement.base_movement.speed_when_turning_back;var t=this._curDirection.mul(-1),o=this.node.width*this.node.scaleX*.4,n=this.getWorldPosition(),r=cc.v2(n).add(cc.v2(t).mul(o)),i=cc.v2(t.x,t.y).multiplyScalar(this._curSpeed*e);cc.director.getPhysicsManager().rayCast(cc.v2(n),cc.v2(r).add(i),cc.RayCastType.Closest).length>0||this.applyMovement(e)},t.prototype._workstate_SizeUp=function(e){this.navigateFollowGuidedDirection(e,this.guidedDirection),this.applyMovement(e)},t.prototype.moveInSurface=function(e){this._isInWaterSurface=!0,this.navigateFollowGuidedDirection(e,this.guidedDirection);var t=(this.curState!==b.PlayerState.Dashing&&this._curDirection.y)>0?0:this._curDirection.y;this.applyMovement(e,cc.v2(this._curDirection.x,t))},t.prototype.setMoveDirection=function(e){null!==e?(this.guidedDirection=e.normalize(),this.sendCommandDrag()):this.guidedDirection=null},t.prototype.sendCommandDrag=function(){if(Date.now()-this.lastDragSend>=B.default.GAME_UPDATE_TIME_MS){this.lastDragSend=Date.now();var e=this.getWorldPosition(),t=R.default.cartesianToPolar(cc.v2(this.guidedDirection.x,this.guidedDirection.y)).y;d.NgcBuildConfig.offlineMode||B.default.inst.sendMessageCommandDrag(B.default.inst.getServerTime(),c.default.Game.inst.curGameNetID,this.netID,t,e.x,e.y)}},t.prototype.applyAcceleration=function(e){if(this._curSpeed<this.startSpeed&&(this._curSpeed=this.startSpeed),this._curSpeed>this._maxSpeed&&this._allowSpeedDecreaseEndDash)this.applyDeceleration(e,this._maxSpeed);else{var t=this._speedAccelerationPerS[this._curSize]*e;this._curSpeed=Math.min(this._curSpeed+t,this._maxSpeed)}},t.prototype.isreadyToJump=function(){return this.getWorldPosition().y>=k.default.inst.surface.getComponent(K.default).getWorldPosition().y},t.prototype.prepareJumpOut=function(e){if(this.curState!==b.PlayerState.Falling&&this.curState!==b.PlayerState.Jumping){var t=this.getWorldPosition(),o=this._recentPositionsStack[0],n=t.sub(o),r=e/(1/60)*20;this.curState===b.PlayerState.Dashing||this.curState===b.PlayerState.Swimming&&n.y>r?(this._curSpeed=this.startSpeed,U.default.inst.playMusic(G.default.inst.SurfaceAMB),this.setState(b.PlayerState.Jumping)):this.curState!=b.PlayerState.InWaterSurface&&(this.setState(b.PlayerState.InWaterSurface),U.default.inst.playMusic(G.default.inst.SurfaceAMB))}},t.prototype.makeWaveOnSurface=function(e){S.default.inst.IsNodeVisible(this.node)&&(this.checkPositionAndPlaySFX(G.default.inst.Splash),k.default.inst.surface.getComponent(K.default).startWaterSplash(this.getWorldPosition().add(cc.v2(this.node.width/2*this.node.scaleX,0)),this.node.scaleX,e,this.node.angle))},t.prototype.caculatorAngleJump=function(e){this.guidedDirection&&this.navigateFollowGuidedDirection(e,this.guidedDirection,180*e)},t.prototype.applyDecelerationFalling=function(e){var t=this._FallingDecelerationPerS*e;this._curSpeed=Math.max(this._curSpeed-t,0)},t.prototype.applyAccelerationFalling=function(e){var t=this._FallingAccelerationPerS*e;this._curSpeed=Math.min(this._curSpeed+t,this._maxSpeedFalling)},t.prototype.updateSurface=function(){var e=k.default.inst.surface.getComponent(K.default);this.curState===b.PlayerState.InWaterSurface&&this.getWorldPosition().y<e.getWorldPosition().y&&(U.default.inst.playMusic(G.default.inst.WaterAMB),this.animation.jumpIn(),this.setState(b.PlayerState.Swimming))},t.prototype.applyDeceleration=function(e,t){var o=this._speedDecelerationPerS[this._curSize]*e;this._curSpeed=Math.max(this._curSpeed-o,t)},t.prototype.reset=function(){this.guidedDirection=null,this.setState(b.PlayerState.OnHelicopter),this.isDead=!1,this._numberFoodNeedToSizeUp=this.gameParams.shark.eating_bar_per_size[this.sharkType][this._curSize],this._curFoodEatenSinceSizeUp=0,this._maxSpeed-=this._maxSpeed*this.gameParams.shark.speed_percent_decrease[this.sharkType][this._curSize]/100,this._maxHP=this._curHP=this.gameParams.shark.HP_per_size[this._curSize],this.setScaleBySize(this.curSize),this.myHelicopter.node.scale=this.gameParams.shark_movement.base_movement.scales_per_size[0],this.isLocalHuman()&&(this.CircleBarSpine.node.active=!1),c.default.GameUI.inst.monitorSizeProgress(0),F.default.inst.getAllBlockObjects().forEach(function(e){e.node.active=!0}),this.isLocalHuman()&&l.default.inst.reset()},t.prototype.collect=function(){!this._isDead&&this.isLocalHuman()},t.prototype.collideWithObstacle=function(e){var t=this;if(!this._isDead){var n=0;switch(e.getType()){case N.GameObjectType.Bomb:this.curState!=b.PlayerState.Jumping?(this.setState(b.PlayerState.Stunning),T.default.inst.alertHitMines(this)):this.isLocalHuman()&&S.default.inst.shakeCamera(.3,2,2);break;case N.GameObjectType.Toxic:this._curSpeed=this.startSpeed,this.animation.node.color=o.COLOR_INFECTIOUS,this.animation.node.runAction(cc.sequence(cc.blink(o.DURATION_INFECTIOUS,o.TIME_BLINKS),cc.callFunc(function(){t.animation.node.runAction(cc.tintTo(1,255,255,255)),t.animation.node.opacity=255}))),n=e.getDame(),this.isLocalHuman()&&this.spawnFlyawayText("-"+n,60,o.COLOR_INFECTIOUS),this.typeOfAttacker=N.GameObjectType.Toxic}n>0&&this.receiveDamage(n)}},t.prototype.collideWithFood=function(e){if(c.default.Game.inst.curGameState===h.GameState.Playing&&!this._isDead&&this.curState!==b.PlayerState.TurnBack&&this.curState!==b.PlayerState.SizeUp&&this.curState!==b.PlayerState.Windup)if(this.canEat(e.node)){if(this.curState===b.PlayerState.Win)return;this.gonnaEatThis(e)}else if(this.isLocalHuman()){var t=e.foodHUD;null!=t&&(t.active=!0,cc.tween(t).delay(.8).call(function(){t.active=!1}).start())}},t.prototype.collideWithEnemy=function(){},t.prototype.canEat=function(e){if(null===this.node)return!1;var t=Math.abs(e.width*e.scaleX*e.height*e.scaleY);return Math.abs(this.node.width*this.node.scaleX*this.node.height*this.node.scaleY)>=t*this.gameParams.GameControl.eatable_food_size_multiply},t.prototype.gonnaEatThis=function(e){this._foodsGonnaEat.push(e),this.curState!=b.PlayerState.Jumping&&this.curState!=b.PlayerState.Falling?this.performBiteAnimationToSwim():this.performBiteAnimationToOnAir()},t.prototype.eatFood=function(e){var t=e.getPointPerKill()*this._goldRushBonus,n=e.getBonusHP();this._curFoodEatenSinceSizeUp+=t,this.recoverHP(n),-1!=e.listFoodAllowBlood.indexOf(e.enemyType)&&this.showBloodEffect(!0),this._scoreEating+=t;var r=this._curFoodEatenSinceSizeUp/this._numberFoodNeedToSizeUp;if(this.monitorEatProgress(r),this.isLocalHuman()){var i=this._goldRushBonus>1?1.3:1;this.spawnFlyawayText(""+t,e.getScoreFontSize()*i,e.getScoreColor(),e.node.getPosition()),U.default.inst.playSharkAttackSFX()}else{var a=o.localPlayer.getWorldPosition(),s=this.getWorldPosition();cc.Vec2.distance(a,s)<=500&&U.default.inst.playSharkAttackSFX()}},t.prototype.monitorEatProgress=function(e){var t=cc.misc.clampf(e,0,1);this.CircleProgressBar.progress=(this._curSize+t)/5},t.prototype.checkPositionAndPlaySFX=function(e){if(this.isLocalHuman())U.default.inst.playSFX(e);else{var t=o.localPlayer.getWorldPosition(),n=this.getWorldPosition();cc.Vec2.distance(t,n)<=500&&U.default.inst.playSFX(e)}},t.prototype.sizeUp=function(){this._curSize>=this.gameParams.shark.max_size-1||(this.isLocalHuman()&&U.default.inst.playSFX(G.default.inst.StartBigger,.5),this.setState(b.PlayerState.SizeUp))},t.prototype.getCurrentSize=function(){return this._curSize},t.prototype.RecalScreenWhenSizeUp=function(){this._curSize>=this.gameParams.shark.size_need_camera_zoomout&&this.setCameraZoom(this.gameParams.camera.scaling.camera_zoomout_per_size[this._curSize]),c.default.GameUI.inst.monitorSizeProgress(this._curSize)},t.prototype.setCameraZoom=function(e,t){t||(t=this.gameParams.camera.swimming.default_camera_zoom_speed),c.default.GameCamera.inst.cameraOb.node.emit("zoomOutCameraEvent",e,t)},t.prototype.enableOpponentHint=function(e){c.default.SceneManager.inst.getAllPlayers().forEach(function(t){t.isLocalHuman()||(t.directionArrow.active=e)})},t.prototype.receiveDamage=function(e,t,o){var n=this;void 0===t&&(t=!1),this._isDead||(this._preRecoverTimer=0,this.animation.skeleton.animation===this.animation.biteAnim&&this.cleanFoodsGonnaEat(),this.animation.hurt(),this.showBloodEffect(),this._curHP=Math.max(0,this._curHP-e),t&&this.spawnFlyawayText("-"+e,0,this.isLocalHuman()?null:cc.color(38,55,255,255)),this.isLocalHuman()&&(c.default.GameUI.inst.showRedWarning(!0,!1),S.default.inst.shakeCamera(.3,8,8)),o&&this.scheduleOnce(function(){n.animation.pauseInTime(1)},.3))},t.prototype.recoverHP=function(e){this.gameParams.GameControl.hp_allow_recovery_timer||(this._curHP=Math.min(this._maxHP,this._curHP+e))},t.prototype.reduceAndCheckHPPerSeconds=function(e){this.curState!=b.PlayerState.Killed&&this.curState!=b.PlayerState.Dead&&this.curState!=b.PlayerState.Revive&&(this._curHP=Math.max(0,this._curHP-this._HPreducePerSec*e),this.isStarving()&&this.isLocalHuman()&&this.doBehaviorStarving(),!this.isStarving()&&this.isLocalHuman()&&(c.default.GameUI.inst.showRedWarning(!1,!0),v.default.inst.disableRedBlenEffect()),0!==this._curHP||this._isDead||(this.availableLifes>0?(cc.log(" >>> Waiting for Respawn"),this.setState(b.PlayerState.WaitingForRespawn),this.availableLifes--,this._curHP=this.maxHP):(this.setState(b.PlayerState.Killed),this.isLocalHuman()&&T.default.inst.send_playerDie())))},t.prototype.autoRecoverHP=function(e){this.gameParams.GameControl.hp_allow_recovery_timer&&this._preRecoverTimer>=this._HpRecoveryTimer&&(this._curHP=Math.min(this._maxHP,this._curHP+this._HPRecoverRatePersize[this._curSize]*e))},t.prototype.isStarving=function(){return 100*this._curHP/this._maxHP<this._hpPercentToStarving},t.prototype.doBehaviorStarving=function(){c.default.GameUI.inst.showRedWarning(!0,!0),v.default.inst.activeRedBlendEffect()},t.prototype.blinkShark=function(){},t.prototype.blinkHPBar=function(){},t.prototype.addShield=function(){this.isImmortal=!0,this.sharkShieldNode.active=!0},t.prototype.removeShield=function(){this.isGodMode||(this.node.opacity=255,this.sharkShieldNode&&this.sharkShieldNode.active&&(this.sharkShieldNode.active=!1),this.isImmortal=!1)},Object.defineProperty(t.prototype,"curHP",{get:function(){return this._curHP},set:function(e){this._curHP=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxHP",{get:function(){return this._maxHP},set:function(e){this._maxHP=e},enumerable:!1,configurable:!0}),t.prototype.updateHPBarTransform=function(){var e=this.HUD,t=this.getWorldPosition(),o=cc.v2(t.x,t.y).add(cc.Vec2.UP.mul(.2*this.node.height*Math.abs(this.node.scaleY)));e&&e.parent&&e.setPosition(e.parent.convertToNodeSpaceAR(o)),this.sharkShieldNode&&this.sharkShieldNode.active&&(this.sharkShieldNode.scale=this.node.scale,this.sharkShieldNode.opacity=this.node.opacity,this.sharkShieldNode.parent&&this.sharkShieldNode.setPosition(this.sharkShieldNode.parent.convertToNodeSpaceAR(t)))},t.prototype.updatePlayersDirectionArrow=function(){var e=this,t=c.default.SceneManager.inst.getAllPlayers(),o=this.getWorldPosition(),n=600,r=920;cc.sys.isMobile||(n=cc.view.getCanvasSize().width,r=cc.view.getCanvasSize().height);var i=cc.rect(0,0,n,r);t.forEach(function(t){if(!t.isLocalHuman()&&!t.isPlayerDie()){var n=t.getWorldPosition(),r=cc.v2(n.x,n.y).sub(o),a=cc.misc.radiansToDegrees(R.default.cartesianToPolar(cc.v2(r.x,r.y)).y),s=R.default.findPointOnRect(i,cc.misc.degreesToRadians(a));cc.Vec2.distance(cc.v2(0,0),s)<cc.Vec2.distance(o,n)-e.node.width*e.node.scaleX?(t.directionArrow.active=!0,t.directionArrow.angle=a,t.directionArrow.setPosition(s)):t.directionArrow.active=!1}})},t.prototype.updateDashSystem=function(e){this.curState!=b.PlayerState.OnHelicopter&&this.curState!=b.PlayerState.Falling&&(this.curState===b.PlayerState.Dashing?this._curDashEnergy=0:null!==this._lastPosWS&&(this._curDashEnergy+=this.gameParams.shark_movement.dash.dash_recovery_per_second[this.sharkType][this._curSize]*e,this._curDashEnergy=Math.min(this._curDashEnergy,100)),this.isLocalHuman()&&1!=this.curRank&&this.BoostBarContainer.getComponent(H.default).monitorProgress(this._curDashEnergy))},t.prototype._calculateDashParameters=function(e){var t=this.gameParams.shark_movement.dash.dash_distance_per_sizes[this.sharkType][this.curSize]*e,o=this.gameParams.shark_movement.base_movement.swimSpeed[this.sharkType]*this.gameParams.shark_movement.dash.dash_speed_bonus[this.sharkType][this.curSize],n=t*this.gameParams.shark_movement.dash.deceleration_ratio;this._dashFullSpeedDuration=n/o;var r=(t-n)/((o+this.gameParams.shark_movement.base_movement.swimSpeed[this.sharkType])/2);this._dashDecelerationSpeed=(o-this.gameParams.shark_movement.base_movement.swimSpeed[this.sharkType])/r,this._dashDuration=this._dashFullSpeedDuration+r},t.prototype.requestToDash=function(){if((this.curState===b.PlayerState.Swimming||this.curState===b.PlayerState.InWaterSurface)&&this._curDashEnergy>=25){this.setState(b.PlayerState.Windup);var e=Math.min(this._curDashEnergy/100,1);this._calculateDashParameters(e),this.sendBroadcastMessagePlayerDash(e)}},t.prototype.applyDash=function(){this._jumpUpGravityScale=Math.min(2,100/this._curDashEnergy),this._curDashEnergy=0,this._dashCurTime=0,this._oppHittedInDashSection=[],this._oppHasShieldInDashSection=[],this.particalBoost=this.node.getComponent(L.default).create(),this.scheduleOnce(this.disableDash,this._dashDuration),this.isLocalHuman()&&(U.default.inst.playSFX(G.default.inst.Dash),this.setCameraZoom(Math.min(this.gameParams.camera.scaling.camera_zoomout_per_size[this._curSize],this.gameParams.camera.dash.zoom_out_offset_per_size[this._curSize]),this.gameParams.camera.dash.zoom_speed)),this.setState(b.PlayerState.Dashing),this.updateHeightAttackableBoxCollider(!0),this.isLocalHuman()&&c.default.GameUI.inst.showDoubleTabTutorial(!1),T.default.inst.alertAttack(this)},t.prototype.disableDash=function(){this.curState!==b.PlayerState.Jumping&&this.setState(b.PlayerState.Swimming),this.particalBoost&&(this.particalBoost.destroy(),this.particalBoost=null),this.node.group=o.GROUP_COLLIDER_PLAYER,this.isLocalHuman()&&this.setCameraZoom(this.gameParams.camera.scaling.camera_zoomout_per_size[this._curSize],this.gameParams.camera.dash.zoom_speed),this.updateHeightAttackableBoxCollider(!1)},t.prototype.updateHeightAttackableBoxCollider=function(e){var t=cc.size(this._originalAttackableBoxColliderSize.width,this._originalAttackableBoxColliderSize.height);e&&(t.height=$[this.sharkType],t.width*=4.5),this._attackableBoxCollider.size.height=t.height,this._attackableBoxCollider.size.width=t.width},t.prototype.boxColliderCollisionEnter=function(){},t.prototype._isOppHittedInDashSection=function(e){for(var t=0;t<this._oppHittedInDashSection.length;t++)if(this._oppHittedInDashSection[t]===e)return!0;return!1},t.prototype._isOppHasShieldInDashSection=function(e){for(var t=0;t<this._oppHasShieldInDashSection.length;t++)if(this._oppHasShieldInDashSection[t]===e)return!0;return!1},t.prototype.boxColliderOnCollisionStay=function(e,t){if(e.node.uuid!==t.node.uuid&&!this._isDead){var n=e.node.getComponent(N.default);if(n.objectType==N.GameObjectType.Player&&t.tag===b.ColliderTag.Attackable&&e.tag===b.ColliderTag.CanBeAttacked){if(this.curState!==b.PlayerState.Dashing)return;var r=t.node.parent.getComponent(o),i=e.node.parent.getComponent(o);if(i.isImmortal)return void(this._isOppHasShieldInDashSection(i.uuid)||(this._oppHasShieldInDashSection.push(i.uuid),i.spawnFlyawayText(O.default.t("HSA_SHIELD_ON").text,30,o.COLOR_SIZEUP,this.node.getPosition())));if(this._isOppHittedInDashSection(i.uuid))return;var a=this.gameParams.shark.damages_per_size[i.curSize]*this._doubleDamageBonus,s=c.default.SceneManager.inst.getMainPlayer().netID;if(r.curSize<i.curSize)return;if(null===r||null===i)return;r.isLocalHuman()&&i.isRemote()&&!i.isRemoteBot()||i.isLocalHuman()&&r.isRemote()?B.default.inst.sendAttackCommand(s,r.netID,i.netID,a):(this._scoreAttacking+=a,i.curHP<a&&(this._scoreAttacking+=Y.ConstConfig.SCORES.KILL_OPPONENT),i.receiveDamage(a,!1,!0),i.typeOfAttacker=N.GameObjectType.Enemy,i.attacker=this,i.isLocalHuman()||(T.default.inst.alertEatPlayer(this),T.default.inst.alertAddingSharkClassKill(this,i.sharkType))),this.attackPlayer(),this._oppHittedInDashSection.push(i.uuid)}else if(n.objectType==N.GameObjectType.Food&&this.canEat(n.node)&&t.tag===b.ColliderTag.CanBeBite){var l=(new Date).getTime();l-this._timeSinceLastBite_millisecond>=500&&(this.animation.bite(),this._timeSinceLastBite_millisecond=l)}}},t.prototype.attackPlayer=function(){if(this.animation.attack(),this.isLocalHuman())U.default.inst.playSFX(G.default.inst.SharkKilled,.6),S.default.inst.shakeCamera(.3,8,8);else{var e=o.localPlayer.getWorldPosition(),t=this.getWorldPosition();cc.Vec2.distance(e,t)<=400&&U.default.inst.playSFX(G.default.inst.SharkKilled,.6)}},t.prototype.getDevouredScore=function(){return this._scoreEating},t.prototype.getKillsScore=function(){return this._scoreAttacking},t.prototype.getCurrentScore=function(){return this._scoreAttacking+this._scoreEating+this._scoreSizeUp+this._scoreLettersCollecting},t.prototype.performBiteAnimationToOnAir=function(){var e=this;this.animation.biteOnAir(this.animation.onAirAnim)&&(this.animation.lockBiteAnimation=!0,this.scheduleOnce(function(){e._foodsGonnaEat.length>0&&(e._foodsGonnaEat.forEach(function(t){t.isValid&&(e.eatFood(t),t.enemyType==_.EnemyType.SharkMeat?(t.node.getComponent(X.default).deactive(),P.default.inst.pushFreeItem(w.PoolItemType.Meat,t.node)):t.node.active=!1)}),T.default.inst.alertEatPrey(e,e._foodsGonnaEat.length)),e._foodsGonnaEat=[],e.animation.lockBiteAnimation=!1},o.DELAY_TIME_BITE_FOOD))},t.prototype.performBiteAnimationToSwim=function(){var e=this;this.animation.bite(this.animation.swimAnim)&&(this.animation.lockBiteAnimation=!0,this.scheduleOnce(function(){e._foodsGonnaEat.length>0&&(e._foodsGonnaEat.forEach(function(t){t.isValid&&(e.eatFood(t),t.enemyType==_.EnemyType.SharkMeat?(t.node.getComponent(X.default).deactive(),P.default.inst.pushFreeItem(w.PoolItemType.Meat,t.node)):t.node.active=!1)}),T.default.inst.alertEatPrey(e,e._foodsGonnaEat.length)),e._foodsGonnaEat=[],e.animation.lockBiteAnimation=!1},o.DELAY_TIME_BITE_FOOD))},t.prototype.performSizeupAnimation=function(){var e=this;this.animation.sizeup(),this.isLocalHuman()&&(this.CircleBarSpine.setAnimation(0,this.CircleAnimList[this._curSize],!1),this.CircleProgressBar.node.active=!1,this.CircleBarSpine.node.active=!0,this.CircleBarSpine.setCompleteListener(function(){e.CircleProgressBar.node.active=!0,e.CircleBarSpine.node.active=!1})),this.scheduleOnce(function(){(e.isLocalHuman()||E.Main.getAppContext()===E.AppContext.Spectator&&e.netID==u.NgcSpectatorManager.inst.currDisplayNetID)&&(e.spawnFlyawayTextUI(O.default.t("HSA_SIZE_UP").text,30,o.COLOR_SIZEUP),e.RecalScreenWhenSizeUp()),e.setScaleBySize(e._curSize),e._scoreSizeUp+=Y.ConstConfig.SCORES.SIZE_UP[e._curSize],e.setSizeName(e._curSize),e.CircleProgressBar.getComponent(W.default).updateBGProgress(e._curSize),e.monitorEatProgress(0),e._numberFoodNeedToSizeUp=e.gameParams.shark.eating_bar_per_size[e.sharkType][e._curSize],e.curState!=b.PlayerState.Jumping&&e.curState!=b.PlayerState.Falling&&e.setState(b.PlayerState.Swimming)},o.DELAY_TIME_SIZE_UP)},t.prototype.onBeginContact=function(e,t,o){"Platform"==o.node.group&&(this._curSpeed=this.startSpeed,this.curState==b.PlayerState.Jumping&&(this._isOnRock=!0))},t.prototype.showBloodEffect=function(e){if(c.default.Game.inst.gameParam.allow_blood_effect&&S.default.inst.IsNodeVisible(this.node)){var t=cc.instantiate(c.default.Game.inst.bloodEffect);e&&(t.getComponent(cc.ParticleSystem).startSize=g.default.SIZE_OF_BLOOD_EFFECT_FOR_EAT,t.getComponent(cc.ParticleSystem).startSizeVar=g.default.SIZE_OF_BLOOD_EFFECT_FOR_EAT),t.parent=this.node,t.zIndex=cc.macro.MIN_ZINDEX;var o=t.getComponent(cc.ParticleSystem).duration+1;this.scheduleOnce(function(){t&&(t.destroy(),t=null)},o)}},t.prototype._randomPositionOnMap=function(e,t,o,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===o&&(o=0),void 0===n&&(n=0);var r=A.default.RandomRange(.5,5);this._timeDelayForRandomNewMoveTarget=r;var i=k.default.inst.getRectWaterSwim(),a=A.default.RandomRange(e,i.width-t,!0),s=A.default.RandomRange(n,i.height-o,!0);return this._timeDelayCheckCollisionAhead=this.CHECK_COLLISION_AHEAD_DELAY_TIME,cc.v2(i.x+a,i.y+s)},t.prototype._huntingPreyWork=function(e){if(this._preyTarget&&cc.isValid(this._preyTarget)||this._timeDelayForFindNearestFood<0&&(this._preyTarget=this._findTargetFood(),this._timeDelayForFindNearestFood=this.TIME_DELAY_FIND_NEAREST_FOOD),this._timeDelayForFindNearestFood-=e,this._curSpeed=this.startSpeed,cc.isValid(this._preyTarget))this.guidedDirection=R.default.getWorldPos(this._preyTarget).sub(this.getWorldPosition()).normalize();else{this._timeDelayForRandomNewMoveTarget-=e;var t=this.getWorldPosition();(this._timeDelayForRandomNewMoveTarget<0||cc.Vec2.distance(t,this._freeMoveTarget)<2*e*this.startSpeed)&&(this._freeMoveTarget=this._randomPositionOnMap()),this.guidedDirection=this._freeMoveTarget.sub(t).normalize()}},t.prototype._findTargetFood=function(){var e=[];e=e.concat(F.default.inst.allClowFishes),this.curSize>0&&(e=e.concat(F.default.inst.allTunas)),this.curSize>1&&(e=e.concat(F.default.inst.allMahis)),e=e.sort(function(e,t){return e.position.y>t.position.y?1:-1});var t=[],o=F.default.inst.sharkMeatNode.children.filter(function(e){return e.getComponent(C.default).isActive});t.concat(o),t.concat(e);for(var n=null,r=1e3,i=this.getWorldPosition(),a=0;a<t.length;a++){var s=t[a];if(cc.isValid(s)){var c=R.default.getWorldPos(s),l=cc.Vec2.distance(c,i);if(l<r&&0===cc.director.getPhysicsManager().rayCast(i,c,cc.RayCastType.Any).length)return r=l,s}}return n},t.prototype._findPosibleAttackableShark=function(){if(this.nextFindAttackableSharkTimer>Date.now())return!1;if(this.nextFindAttackableSharkTimer=Date.now()+200,!1===this.node.getComponent(M.default).renderComponent.enabled&&A.default.RandomRange(0,100)>5)return!1;if(this._curDashEnergy<100)return!1;for(var e=F.default.inst.getAllPlayers(),t=this.getWorldPosition(),o=0;o<e.length;o++){var n=e[o];if(n.uuid!==this.uuid&&!n.isPlayerDie()&&this.curSize>=n.curSize&&!n.isImmortal){var r=n.getWorldPosition();if(cc.Vec2.distance(t,r)<this.gameParams.bot.detection_range&&0===cc.director.getPhysicsManager().rayCast(t,r,cc.RayCastType.Any).length){var i=A.default.RandomRange(0,100,!0)<this.gameParams.bot.accurate_dash_rate,a=this.gameParams.shark_movement.dash.dash_windup_duration+.1;!1===i&&(a*=-1);var s=r.add(cc.v2(n.guidedDirection).mul(a*n._curSpeed)).sub(t);if(cc.misc.radiansToDegrees(cc.Vec2.angle(s,this._curDirection))<this.gameParams.bot.attack_angle)return this.forceNavigateFollowDirection(s),this.requestToDash(),!0}}}return!1},t.prototype._checkCollisionAhead=function(e){if(this._timeDelayCheckCollisionAhead-=e,!(this._timeDelayCheckCollisionAhead>0)){var t=this.getWorldPosition(),o=cc.v2(t).add(this._curDirection.mul(this.node.width*this.node.scaleX*1)),n=cc.director.getPhysicsManager().rayCast(t,o,cc.RayCastType.Any);if(n.length>0){var r=n[0].normal,i=n[0].point,a=k.default.inst.getRectWaterSwim(),s=0,c=0,l=0,u=0;r.x>0?s=i.x:c=a.width-i.x,r.y>0?u=i.y:l=a.height-i.y,this._freeMoveTarget=this._randomPositionOnMap(s,c,l,u),this._preyTarget=null,this._timeDelayForFindNearestFood=this.TIME_DELAY_FIND_NEAREST_FOOD}}},t.prototype._botAutoDropUpdate=function(){0==this._timeToDropStart?this._timeToDropStart=Date.now()+A.default.RandomRange(500,7e3):this._timeToDropStart<Date.now()&&(this.dropShark(),this.animation.setTimeScale(1))},t.COLOR_INFECTIOUS=cc.color(98,230,66,255),t.COLOR_SIZEUP=cc.color(255,255,255,255),t.DURATION_INFECTIOUS=3,t.TIME_BLINKS=3,t.TIME_DELAY_BEFORE_BITE=.2,t.GROUP_COLLIDER_PLAYER_DASH="PlayerDash",t.GROUP_COLLIDER_PLAYER="Player",t.localPlayer=null,t.LAST_POS_STACK_COUNT=5,t.TURNBACK_ANIMATION_TIME=.3,t.DELAY_TIME_BITE_FOOD=.2,t.DELAY_TIME_SIZE_UP=.8,i([Z(cc.Node)],t.prototype,"HUD",void 0),i([Z(cc.Node)],t.prototype,"sharkShieldNode",void 0),i([Z(cc.ProgressBar)],t.prototype,"CircleProgressBar",void 0),i([Z(sp.Skeleton)],t.prototype,"CircleBarSpine",void 0),i([Z(cc.Node)],t.prototype,"BoostBarContainer",void 0),i([Z(cc.Node)],t.prototype,"directionArrow",void 0),i([Z(cc.Label)],t.prototype,"nameLabel",void 0),i([Z(cc.Sprite)],t.prototype,"countryFlagSprite",void 0),i([Z(cc.Sprite)],t.prototype,"sizeNameSprite",void 0),o=i([Q],t)}(g.default);o.default=ee,c.default.PlayerController=ee,c.default.PlayerState=b.PlayerState,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/NgcRevive":"NgcRevive","../../NanoGameCore/CrossFeatures/EndGameFlow/Spectator/Script/NgcSpectatorManager":"NgcSpectatorManager","../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/Services/Ads/Ads":"Ads","../../Shared/Defines":"Defines","../../globals":"globals","../CharacterControllerBase":"CharacterControllerBase","../Cheats/CheatsManager":"CheatsManager","../DeathZoneManager":"DeathZoneManager","../Enemy/EnemyControllerBase":"EnemyControllerBase","../Game":"Game","../GameCamera":"GameCamera","../GameEnums":"GameEnums","../GameObject":"GameObject","../GameScripts/GameObjectMgr":"GameObjectMgr","../GameScripts/GamePoolItem":"GamePoolItem","../GameScripts/PoolItemInfo":"PoolItemInfo","../GameTrackingDataHelper":"GameTrackingDataHelper","../HSACountryFlagsManager":"HSACountryFlagsManager","../HSAUtils":"HSAUtils","../Localized/HSALocalizedManager":"HSALocalizedManager","../Main":"Main","../Maps/MapController":"MapController","../Network/HSANetUtils":"HSANetUtils","../Network/NetClient":"NetClient","../Obstacle/BlockObject":"BlockObject","../OffScreen/OffscreenDisableRender":"OffscreenDisableRender","../ParticleFollow":"ParticleFollow","../SceneManager":"SceneManager","../Sound/SoundResource":"SoundResource","../SoundManager":"SoundManager","../StartPoint":"StartPoint","../TrackingManager":"TrackingManager","../TuningData":"TuningData","../UI/BoostBarOnShark":"BoostBarOnShark","../UI/CircleBar":"CircleBar","../UI/GameUI":"GameUI","../Utils/ConstConfig":"ConstConfig","../WaterSurface/WaterSurfaceManager":"WaterSurfaceManager","./PlayerAnim":"PlayerAnim","./SharkMeat":"SharkMeat"}],PlayerStartPoint:[function(e,t,o){"use strict";cc._RF.push(t,"8572aopcltPA7OATjOwKh1G","PlayerStartPoint");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./StartPoint"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){a.default.allPlayerStartPoints.push(this)},i([c],t)}(a.default));o.default=l,cc._RF.pop()},{"./StartPoint":"StartPoint"}],PoolItemInfo:[function(e,t,o){"use strict";cc._RF.push(t,"c3db4nvTYBKb78j1bGomzSU","PoolItemInfo");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.PoolItemType=void 0;var r,i=cc._decorator,a=i.ccclass,s=i.property;(function(e){e[e.Meat=0]="Meat",e[e.FlyawayText=1]="FlyawayText",e[e.HumanSwimmer=2]="HumanSwimmer",e[e.HumanDiver=3]="HumanDiver"})(r=o.PoolItemType||(o.PoolItemType={}));var c=function(){function e(){this.poolItemType=r.Meat,this.itemPrefab=null,this.buffSize=0,this.parentNode=null}return n([s({type:cc.Enum(r)})],e.prototype,"poolItemType",void 0),n([s(cc.Prefab)],e.prototype,"itemPrefab",void 0),n([s(cc.Integer)],e.prototype,"buffSize",void 0),n([s(cc.Node)],e.prototype,"parentNode",void 0),n([a("PoolItemInfo")],e)}();o.default=c,cc._RF.pop()},{}],PowerUpBar:[function(e,t,o){"use strict";cc._RF.push(t,"7cc60pf0KdPOp4yiHXEub/J","PowerUpBar");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Collectible/CollectibleBase"),s=e("../../globals"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.FLASHING_SPEED=.5,t.progressBars=[null],t.fxFlashing=null,t.iconGoldRush=null,t.iconHint=null,t.iconDoubleDamage=null,t.icon=null,t.startCountDown=!1,t.progress=1,t.time=0,t._powerUpBarItem=null,t._opacityDeltaPerSecond=0,t}return r(t,e),t.prototype.showPowerUpCountDownBar=function(e){this.time=e,this.reset(),this.node.active=!0,this.startFlashing(!0)},t.prototype.resetCountDown=function(){this.progress=1},t.prototype.reset=function(){this.node.active=!1,this.startCountDown=!0,this.progress=1},t.prototype.onDestroy=function(){s.default.GameUI.inst.destroyPowerUpBarBuyuuid(this.node.uuid)},t.prototype.update=function(e){this.startCountDown&&(this.monitorProgress(-e/this.time),this.updateFlashing(e))},t.prototype.monitorProgress=function(e){var t=this;this.progress+=e,this.progressBars.forEach(function(e){e.progress=t.progress}),this.progress<=0&&this.node.destroy()},t.prototype.setPowerUpUI=function(e){this._powerUpBarItem=e,this.setPowerIcon(e)},t.prototype.getType=function(){return this._powerUpBarItem},t.prototype.setPowerIcon=function(e){switch(e){case a.PowerUpItem.Hint:this.icon.getComponent(cc.Sprite).spriteFrame=this.iconHint;break;case a.PowerUpItem.GoldRush:this.icon.getComponent(cc.Sprite).spriteFrame=this.iconGoldRush,s.default.TextEffectController.inst.startEffectGoldRush();break;case a.PowerUpItem.DoubleDamage:this.icon.getComponent(cc.Sprite).spriteFrame=this.iconDoubleDamage,s.default.TextEffectController.inst.startEffectDoubleDamage()}},t.prototype.startFlashing=function(e){this.fxFlashing.active=e,this.fxFlashing.opacity=0,!0===e&&(this._opacityDeltaPerSecond=510/this.FLASHING_SPEED)},t.prototype.updateFlashing=function(e){var t=this._opacityDeltaPerSecond*e,o=this.fxFlashing.opacity;o+t<0?(t=-o,this._opacityDeltaPerSecond*=-1):o+t>255&&(t=255-o,this._opacityDeltaPerSecond*=-1),this.fxFlashing.opacity+=t},i([u([cc.ProgressBar])],t.prototype,"progressBars",void 0),i([u(cc.Node)],t.prototype,"fxFlashing",void 0),i([u(cc.SpriteFrame)],t.prototype,"iconGoldRush",void 0),i([u(cc.SpriteFrame)],t.prototype,"iconHint",void 0),i([u(cc.SpriteFrame)],t.prototype,"iconDoubleDamage",void 0),i([u(cc.Node)],t.prototype,"icon",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../globals":"globals","../Collectible/CollectibleBase":"CollectibleBase"}],PowerUpSpawner:[function(e,t,o){"use strict";cc._RF.push(t,"a82975ct1JDZ5aurNqbX3PP","PowerUpSpawner");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./SpawnObjectBase"),s=e("../SceneManager"),c=e("../StartPoint"),l=e("../Network/HSANetUtils"),u=e("../Collectible/CollectibleBase"),p=e("../TuningData"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.distanceRandom=200,t._newpos=cc.v2(0,0),t.pointActive=[],t}var o;return r(t,e),o=t,t.prototype.start=function(){if(p.default.inst&&p.default.inst.getGameParameters()){o.inst=this;for(var e=p.default.inst.getGameParameters().powerups,t=0;t<e.num_kind_of_powerup;t++){var n=e.ratio_spawn[t];this.PercentAppear[t]=n}this.maxObjects=e.max_item_on_map,this.timeSpawnNextObject=e.time_spawn_next_food}},t.prototype.findNewPosWithdistance=function(e){var t=this;if(this._newpos=this.randomAroundMap(),0==s.default.inst.allCollectibles.length)this.spawnRandomObjectByProbability();else{var o=!0;s.default.inst.allCollectibles.forEach(function(n){cc.Vec2.distance(n.node.position,cc.v3(t._newpos))<e&&(o=!1)}),o&&this.spawnRandomObjectByProbability()}},t.prototype.findNewPos=function(){var e=c.default.allCollectibleStartPoints[l.default.RandomRange(0,c.default.allCollectibleStartPoints.length-1,!0)];e&&-1==this.pointActive.indexOf(e)&&(this._newpos=e.getStartPos(),cc.log("Point:"+this._newpos.x+" "+this._newpos.y),this.spawnRandomObjectByProbability(),this.pointActive.push(e))},t.prototype.spawnObjByIndex=function(e){var t=cc.instantiate(this.ObjPrefab[e]);t.parent=this.powerUpNode,t.getComponent(u.default).setPointStart(this.pointActive[this.pointActive.length-1]),t.setPosition(this._newpos)},t.prototype.update=function(e){this.deltaTime+=e,this.deltaTime>=this.timeSpawnNextObject&&!this.isReachMaxObj()&&(this.deltaTime=0,this.findNewPos())},t.prototype.isReachMaxObj=function(){return this.powerUpNode.childrenCount>=this.maxObjects},i([h],t.prototype,"distanceRandom",void 0),o=i([f],t)}(a.default);o.default=g,cc._RF.pop()},{"../Collectible/CollectibleBase":"CollectibleBase","../Network/HSANetUtils":"HSANetUtils","../SceneManager":"SceneManager","../StartPoint":"StartPoint","../TuningData":"TuningData","./SpawnObjectBase":"SpawnObjectBase"}],PrizeScreen:[function(e,t,o){"use strict";cc._RF.push(t,"ced1dn9EyNAroRLsQt/cXKe","PrizeScreen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.PrizeScreen=void 0;var c=e("../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),l=e("../../../NanoGameCore/CrossFeatures/RealPrize/Script/NgcRealPrizeManager"),u=e("../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeBuyTicketDialog"),p=e("../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeDefines"),d=e("../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeEventRuleDialog"),f=e("../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeTabMenu"),h=e("../../../NanoGameCore/CrossFeatures/TabBar/Script/NgcTabBarManager"),g=e("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),y=e("../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),m=e("../../../NanoGameCore/Services/Telemetry/Telemetry"),_=cc._decorator,v=_.ccclass,S=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageView=null,t.events=[],t.prizeTabMenu=null,t._prizeState=p.PRIZE_STATE.COMING_SOON,t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),cc.log("Init prize screen!"),this.setEventState(p.PRIZE_STATE.NONE)},t.prototype.setEventState=function(e){this.events.forEach(function(t,o){t&&(t.active=e===o)}),this.pageView.enabled=e===p.PRIZE_STATE.AVAILABLE_EVENT},t.prototype.onClickTicketPlusBtn=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return[4,c.NgcDialogManager.create(u.default)];case 1:return(e=t.sent()).init(),e.show(),[2]}})})},t.prototype.onClickEventRuleInfo=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,c.NgcDialogManager.create(d.default)];case 1:return e.sent().show(),[2]}})})},t.prototype.onActivate=function(){this.updateTabBarHighlight(),console.log("@@@ PRIZE ON ACTIVE"),m.NgcTelemetry.inst.LogEvent_EnterScreen("Tournament"),this.parseEventUI()},t.prototype.onResume=function(){this.updateTabBarHighlight(),m.NgcTelemetry.inst.LogEvent_EnterScreen("Tournament"),this.parseEventUI()},t.prototype.updateTabBarHighlight=function(){y.default.realPrizeVisited=!0,h.NgcTabBarManager.inst&&h.NgcTabBarManager.inst.updateTabButtons(!1)},t.prototype.parseEventUI=function(){this.setEventState(l.default.getInstance().getEventState())},t.prototype.onClickScrollUpDown=function(e,t){console.log(t);var o="up"===t?0:1;this.pageView.scrollToPage(o,1)},t.prototype.onClickLeaderboard=function(){this.prizeTabMenu.onTabMenuBtnClick(null,f.PRIZE_TAB_MENU.LEADERBOARD),this.pageView.scrollToPage(1,1)},i([S(cc.PageView)],t.prototype,"pageView",void 0),i([S(cc.Node)],t.prototype,"events",void 0),i([S(f.NgcRealPrizeTabMenu)],t.prototype,"prizeTabMenu",void 0),i([v],t)}(g.default);o.PrizeScreen=b,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../../NanoGameCore/CrossFeatures/RealPrize/Script/NgcRealPrizeManager":"NgcRealPrizeManager","../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeBuyTicketDialog":"RealPrizeBuyTicketDialog","../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeDefines":"RealPrizeDefines","../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeEventRuleDialog":"RealPrizeEventRuleDialog","../../../NanoGameCore/CrossFeatures/RealPrize/Script/RealPrizeTabMenu":"RealPrizeTabMenu","../../../NanoGameCore/CrossFeatures/TabBar/Script/NgcTabBarManager":"NgcTabBarManager","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry"}],ProfanityCheck:[function(e,t,o){"use strict";cc._RF.push(t,"d0fabxR2mlBzpCGN+1bdOgD","ProfanityCheck");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcProfanityCheck=o.ProfanityResult=void 0;var i=e("../../../globals"),a=e("../../Services/Platform/Platform"),s=e("./BuildConfig");o.ProfanityResult=function(){};var c=function(){function e(){}return e.check=function(e){return n(this,void 0,Promise,function(){var t;return r(this,function(o){switch(o.label){case 0:return s.NgcBuildConfig.offlineMode?[2,new Promise(function(t){t({status:i.default.OfflineMode.ProfanityCheck(e),reasons:""})})]:(t={status:null,reasons:null},[4,a.NgcPlatform.inst.profanityCheck(e).then(function(e){t=e})]);case 1:return o.sent(),[2,t]}})})},e.checkURL="https://profanity.nano.ubisoft.com/filter/",e}();o.NgcProfanityCheck=c,cc._RF.pop()},{"../../../globals":"globals","../../Services/Platform/Platform":"Platform","./BuildConfig":"BuildConfig"}],Protocol:[function(e,t,o){"use strict";cc._RF.push(t,"df9bbMK59pKaq4NF53z17jI","Protocol"),Object.defineProperty(o,"__esModule",{value:!0}),o.GetMessageType=o.Protocol=void 0;var n=e("protobufjs/minimal");(function(e){e[e.SERVER_INIT=0]="SERVER_INIT",e[e.JOIN_ROOM=1]="JOIN_ROOM",e[e.LEAVE_ROOM=2]="LEAVE_ROOM",e[e.PING=3]="PING",e[e.NGC_BROADCAST=4]="NGC_BROADCAST",e[e.OP_END=20]="OP_END"})(o.Protocol||(o.Protocol={})),o.GetMessageType=function(e){var t=-1;try{var o=n.Reader.create(e);o.uint32()>>>3==1&&(t=o.int32())}catch(r){}return t},cc._RF.pop()},{"protobufjs/minimal":58}],PurchaseMethodAchievement:[function(e,t,o){"use strict";cc._RF.push(t,"73f3dRB7b5LKIslBpzveGWU","PurchaseMethodAchievement");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodAchievement=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("../../../../GameFramework/Scripts/NgcMain"),l=e("./ItemStatus"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t.titleOutLine=null,t._scalingAnim=null,t}return r(t,e),t.prototype.onLoad=function(){this._scalingAnim=cc.tween(this.title.node).repeatForever(cc.tween(this.title.node).to(.3,{scale:1.2}).to(.3,{scale:1}))},t.prototype.getType=function(){return s.NgcItemStatusType.Achievement},t.prototype.updateInfo=function(e){var t=c.NgcMain.inst.updatePurchaseAchievementInfo(e);t.extraParams&&this.title.setExtraParams(t.extraParams),t.extraParamComponents&&this.title.setExtraComponents(t.extraParamComponents),t.textKey&&this.title.setLocalizedText(t.textKey),t.purchasable?(this.title.node.color=new cc.Color(255,228,89),this.titleOutLine.enabled=!0,this._scalingAnim.start()):(this.title.node.color=new cc.Color(0,0,0),this.titleOutLine.enabled=!1,this._scalingAnim.stop())},i([d(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([d(cc.LabelOutline)],t.prototype,"titleOutLine",void 0),i([p],t)}(l.NgcItemStatus);o.NgcPurchaseMethodAchievement=f,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../GameFramework/Scripts/NgcMain":"NgcMain","./ItemStatus":"ItemStatus"}],PurchaseMethodComingSoon:[function(e,t,o){"use strict";cc._RF.push(t,"2d52fbKfO1NvIzHhLjYNBp2","PurchaseMethodComingSoon");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodComingSoon=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.ComingSoon},t.prototype.updateInfo=function(){},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(c.NgcItemStatus);o.NgcPurchaseMethodComingSoon=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],PurchaseMethodCrownRoad:[function(e,t,o){"use strict";cc._RF.push(t,"8e07fSs7XVCBKvMHMW+/lXI","PurchaseMethodCrownRoad");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodCrownRoad=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.CrownRoad},t.prototype.updateInfo=function(){},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(c.NgcItemStatus);o.NgcPurchaseMethodCrownRoad=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],PurchaseMethodCurrency:[function(e,t,o){"use strict";cc._RF.push(t,"80bea1dzH1C0bloixOGRs1P","PurchaseMethodCurrency");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodCurrency=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("../../../../GameFramework/Scripts/NgcShopManager"),c=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.price=null,t.coinIcon=null,t.startIcon=null,t}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.Currency},t.prototype.updateInfo=function(e){this.price.string=e.price.value.toString(),this.price.node.opacity=s.NgcShopManager.getInstance().getCurrencyCountByID(e.price.currency)<e.price.value?100:255,this.coinIcon.active="coin"===e.price.currency,this.startIcon.active="star"===e.price.currency},i([p(cc.Label)],t.prototype,"price",void 0),i([p(cc.Node)],t.prototype,"coinIcon",void 0),i([p(cc.Node)],t.prototype,"startIcon",void 0),i([u],t)}(c.NgcItemStatus);o.NgcPurchaseMethodCurrency=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","./ItemStatus":"ItemStatus"}],PurchaseMethodDailyReward:[function(e,t,o){"use strict";cc._RF.push(t,"61ee01U7tpCu6+BrJ+rTOGs","PurchaseMethodDailyReward");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodDailyReward=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.DailyReward},t.prototype.updateInfo=function(){},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(c.NgcItemStatus);o.NgcPurchaseMethodDailyReward=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],PurchaseMethodEdgeExclusive:[function(e,t,o){"use strict";cc._RF.push(t,"3b42fBlm69Nea86vv59X1iu","PurchaseMethodEdgeExclusive");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodEdgeExclusive=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./ItemStatus"),l=e("../../../EdgeExclusive/Script/EdgeExclusiveManager"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.EdgeExclusive},t.prototype.updateInfo=function(e){for(var t=0,o=l.default.getInstance().getRewardsEdgeExclusive();t<o.length;t++){var n=o[t];if(e.itemID===n.itemId){var r=n.startDate.split("-").reverse().join("-").replace(/-/g,"/").split("/",2).join("/");this.title.subText=" "+r,this.title.setLocalizedText("EES_ON");break}}},i([d(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([p],t)}(c.NgcItemStatus);o.NgcPurchaseMethodEdgeExclusive=f,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../EdgeExclusive/Script/EdgeExclusiveManager":"EdgeExclusiveManager","./ItemStatus":"ItemStatus"}],PurchaseMethodIAP:[function(e,t,o){"use strict";cc._RF.push(t,"5dd20iYYFpKwbcYRBUPbMUv","PurchaseMethodIAP");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodIAP=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("./ItemStatus"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.price=null,t}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.IAP},t.prototype.updateInfo=function(){this.price.string="200$"},i([u(cc.Label)],t.prototype,"price",void 0),i([l],t)}(s.NgcItemStatus);o.NgcPurchaseMethodIAP=p,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],PurchaseMethodLoginSocial:[function(e,t,o){"use strict";cc._RF.push(t,"b9765dsFn1JSbBlOkBqxVvV","PurchaseMethodLoginSocial");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodLoginSocial=void 0;var a=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),s=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),c=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}return r(t,e),t.prototype.getType=function(){return s.NgcItemStatusType.LikeSocial},t.prototype.updateInfo=function(){},i([p(a.NgcLabelLocalized)],t.prototype,"title",void 0),i([u],t)}(c.NgcItemStatus);o.NgcPurchaseMethodLoginSocial=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","./ItemStatus":"ItemStatus"}],PurchaseMethodWatchAds:[function(e,t,o){"use strict";cc._RF.push(t,"346e4hPb0FMmKMxH5NrhNbi","PurchaseMethodWatchAds");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcPurchaseMethodWatchAds=void 0;var a=e("../../../../GameFramework/Scripts/NgcItemInfoManager"),s=e("../../../../Services/Inventory/Inventory"),c=e("./ItemStatus"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.steps=null,t}return r(t,e),t.prototype.getType=function(){return a.NgcItemStatusType.WatchAds},t.prototype.updateInfo=function(e){var t=this;s.NgcInventory.inst.getItemCount(e.price.currency,function(o,n){if(!o&&n){var r=n.count,i=e.price.value;t.steps.string=r+"/"+i}})},i([p(cc.Label)],t.prototype,"steps",void 0),i([u],t)}(c.NgcItemStatus);o.NgcPurchaseMethodWatchAds=d,cc._RF.pop()},{"../../../../GameFramework/Scripts/NgcItemInfoManager":"NgcItemInfoManager","../../../../Services/Inventory/Inventory":"Inventory","./ItemStatus":"ItemStatus"}],QRCodeGenerator:[function(e,t,o){"use strict";cc._RF.push(t,"ddda4YkunpGJowM2cva277W","QRCodeGenerator"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcQRCodeGenerator=void 0;var n=e("qrcode"),r=function(){function e(){}return e.getInst=function(){e.inst||(e.inst=new e)},e.genQRCodeDataURL=function(e,t){n.toDataURL(e,function(e,o){e?t(e,null):t(null,o)})},e.genBase64ToSprite=function(e,t){var o=new Image;o.onload=function(){var e=new cc.Texture2D;e.initWithElement(o),e.handleLoadedTexture();var n=new cc.SpriteFrame(e);t(n)}.bind(this),o.src=e},e.genQRCode=function(t,o){e.genQRCodeDataURL(t,function(t,n){t?cc.log("@party Can't create DATA URI",t):e.genBase64ToSprite(n,o)})},e}();o.NgcQRCodeGenerator=r,cc._RF.pop()},{qrcode:69}],ReScaleObject:[function(e,t,o){"use strict";cc._RF.push(t,"c8a59rkjftOq6a2gWZ4bnAz","ReScaleObject");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaulScreenSize=cc.v2(640,960),t.listObjects=[],t.currentScale=1,t}return r(t,e),t.prototype.onLoad=function(){var e=this;this.reScale(),cc.view.setResizeCallback(function(){e.reScale()})},t.prototype.reScale=function(){var e=this,t=Math.min(1,cc.winSize.width/cc.winSize.height*this.defaulScreenSize.y/this.defaulScreenSize.x);this.listObjects.forEach(function(o){o&&(o.scale*=t/e.currentScale)}),this.currentScale=t},i([c(cc.Vec2)],t.prototype,"defaulScreenSize",void 0),i([c(cc.Node)],t.prototype,"listObjects",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],RealPrizeBuyTicketDialog:[function(e,t,o){"use strict";cc._RF.push(t,"13d5dFsxQlB8bjE/YMat4Tr","RealPrizeBuyTicketDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Core/Utils"),s=e("../../DeliveryReward/Script/DeliveryRewardAnimation"),c=e("./RealPrizeDialogBase"),l=cc._decorator,u=l.ccclass,p=l.property,d=l.menu,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._remainingTimeGetTicket=0,t._durationTimeGetTicket=0,t._startTimeCountdown=0,t._endTimeCountdown=0,t.progressBar=null,t.timeLabel=null,t.buyTicketContainer=null,t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.init=function(){this._remainingTimeGetTicket=19e3,this._durationTimeGetTicket=2e4,this._startTimeCountdown=Date.now()-(this._durationTimeGetTicket-this._remainingTimeGetTicket),this._endTimeCountdown=Date.now()+this._remainingTimeGetTicket},t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.update=function(){var e=Math.max(0,Math.ceil((this._endTimeCountdown-Date.now())/1e3)),t=a.Utils.secondsToMinutesSeconds(e),o=Math.min(1,(Date.now()-this._startTimeCountdown)/this._durationTimeGetTicket);this.progressBar.progress=o,this.timeLabel.string=t[0]+"m"+t[1]+"s"},t.prototype.onClickBuyTicket=function(){this._showClaimRewardAnimation()},t.prototype._showClaimRewardAnimation=function(){var e=this;this.dialogUsingNode.active=!1,this.bgUsingNode.active=!1,s.default.inst.showRewardAnimation({itemID:"ticket",count:10},function(){setTimeout(function(){e.hide()},200)},!0)},t.dialogType="RealPrizeBuyTicketDialog",t.urlPrefab=cc.sys.isMobile?"RealPrizeBuyTicketDialog_Mobile":"RealPrizeBuyTicketDialog_PC",i([p(cc.ProgressBar)],t.prototype,"progressBar",void 0),i([p(cc.Label)],t.prototype,"timeLabel",void 0),i([p(cc.Node)],t.prototype,"buyTicketContainer",void 0),i([u,d("NGC/RealPrize/RealPrizeBuyTicketDialog")],t)}(c.RealPrizeDialogBase);o.default=f,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../DeliveryReward/Script/DeliveryRewardAnimation":"DeliveryRewardAnimation","./RealPrizeDialogBase":"RealPrizeDialogBase"}],RealPrizeDefines:[function(e,t,o){"use strict";cc._RF.push(t,"79f8bLSjUNA/YBodTb6Au0J","RealPrizeDefines"),Object.defineProperty(o,"__esModule",{value:!0}),o.PRIZE_STATE=o.TLE_DEVICE_TYPE=void 0,function(e){e[e.MOBILE=0]="MOBILE",e[e.PC=1]="PC"}(o.TLE_DEVICE_TYPE||(o.TLE_DEVICE_TYPE={})),function(e){e[e.NONE=-1]="NONE",e[e.COMING_SOON=0]="COMING_SOON",e[e.TEASING_NEXT_EVENT=1]="TEASING_NEXT_EVENT",e[e.AVAILABLE_EVENT=2]="AVAILABLE_EVENT",e[e.NON_NANO_PLATFORM=3]="NON_NANO_PLATFORM"}(o.PRIZE_STATE||(o.PRIZE_STATE={})),cc._RF.pop()},{}],RealPrizeDialogBase:[function(e,t,o){"use strict";cc._RF.push(t,"17e14TiUAJAso3FUF75Vx1v","RealPrizeDialogBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.RealPrizeDialogBase=void 0;var a=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.show=function(t){e.prototype.show.call(this,t),o.enqueStack.push(this)},t.prototype.hide=function(){var t=this;e.prototype.hide.call(this,function(){cc.js.array.remove(o.enqueStack,t)})},t.bundleName="02_dialog_realprize",t.enqueStack=[],o=i([c],t)}(a.NgcDialogBase));o.RealPrizeDialogBase=l,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],RealPrizeEventRuleDialog:[function(e,t,o){"use strict";cc._RF.push(t,"772d1wNxRpOFJ9kY6Y8CLv/","RealPrizeEventRuleDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=e("./RealPrizeDialogBase"),c=cc._decorator,l=c.ccclass,u=c.property;c.menu,function(e){e[e.RULE=0]="RULE",e[e.FAQ=1]="FAQ",e[e.POLICY=2]="POLICY",e[e.TNC=3]="TNC"}(a||(a={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.page=[],t._callBackClose=null,t}return r(t,e),t.prototype.gotoPage=function(e){this.page.forEach(function(e){e.active=!1}),this.page[e].active=!0},t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.onClickBackBtn=function(){this.gotoPage(a.RULE)},t.prototype.onClickFAQBtn=function(){this.gotoPage(a.FAQ)},t.prototype.onClickPolicyBtn=function(){this.gotoPage(a.POLICY)},t.prototype.onClickTnCBtn=function(){this.gotoPage(a.TNC)},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.update=function(){},t.dialogType="RealPrizeEventRuleDialog",t.urlPrefab=cc.sys.isMobile?"RealPrizeEventRuleDialog_Mobile":"RealPrizeEventRuleDialog_PC",i([u(cc.Node)],t.prototype,"page",void 0),i([l],t)}(s.RealPrizeDialogBase);o.default=p,cc._RF.pop()},{"./RealPrizeDialogBase":"RealPrizeDialogBase"}],RealPrizeLeaderboardItem:[function(e,t,o){"use strict";cc._RF.push(t,"45498WLSttEQr1nqMQN5S+z","RealPrizeLeaderboardItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./RealPrizeDefines"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rank=null,t.gameRewardAmount=null,t.userName=null,t.scoreLb=null,t.avatar=null,t.flag=null,t.realPrizeSprite=null,t.gamePrizeSprite=null,t.deviceTypeSprite=null,t.deviceTypeSpriteFrame=[],t.deviceType=a.TLE_DEVICE_TYPE.MOBILE,t.isMineBg=null,t}return r(t,e),t.prototype.init=function(e,t,o,n,r,i,a,s){void 0===s&&(s=!1),e<=3||(this.rank.string=""+e),this.userName.string=t,this.scoreLb.string=o,this.realPrizeSprite.node.active=!1,this.gamePrizeSprite&&(this.gamePrizeSprite.node.active=!1),this.gameRewardAmount&&(this.gameRewardAmount.node.active=!1),r&&(this.avatar.spriteFrame=r),this.flag.spriteFrame=n,a.realPrize?(this.realPrizeSprite.spriteFrame=a.realPrize,this.realPrizeSprite.node.active=!0):(a.gamePrizeAmount&&(this.gameRewardAmount.string=""+a.gamePrizeAmount,this.gameRewardAmount.node.active=!0),a.gamePrize&&(this.gamePrizeSprite.spriteFrame=a.gamePrize,this.gamePrizeSprite.node.active=!0)),this.deviceTypeSprite.spriteFrame=this.deviceTypeSpriteFrame[i],this.isMineBg&&(this.isMineBg.active=s)},t.prototype.start=function(){},i([l(cc.Label)],t.prototype,"rank",void 0),i([l(cc.Label)],t.prototype,"gameRewardAmount",void 0),i([l(cc.Label)],t.prototype,"userName",void 0),i([l(cc.Label)],t.prototype,"scoreLb",void 0),i([l(cc.Sprite)],t.prototype,"avatar",void 0),i([l(cc.Sprite)],t.prototype,"flag",void 0),i([l(cc.Sprite)],t.prototype,"realPrizeSprite",void 0),i([l(cc.Sprite)],t.prototype,"gamePrizeSprite",void 0),i([l(cc.Sprite)],t.prototype,"deviceTypeSprite",void 0),i([l(cc.SpriteFrame)],t.prototype,"deviceTypeSpriteFrame",void 0),i([l(cc.Node)],t.prototype,"isMineBg",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./RealPrizeDefines":"RealPrizeDefines"}],RealPrizeLeaderboard:[function(e,t,o){"use strict";cc._RF.push(t,"022a7XS3FNM7YYNO2V+IiuZ","RealPrizeLeaderboard");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Core/Utils"),s=e("./RealPrizeLeaderboardItem"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.topPlayers=[],t.leaderboardItemPrefab=null,t.contentHolder=null,t.userItem=null,t.currRank=20,t.avatarFake=[],t.flagFake=[],t.rewardFake=[],t.view=null,t.userNode=null,t}return r(t,e),t.prototype.initItems=function(e){for(var t=this,o=0;o<30;o++){var n={realPrize:this.rewardFake[a.Utils.randomFromTo(0,this.rewardFake.length-1)],realPrizeAmount:0,gamePrize:null,gamePrizeAmount:0},r={rank:o,name:"UserName "+o,flag:this.flagFake[a.Utils.randomFromTo(0,this.flagFake.length-1)],avatar:this.avatarFake[a.Utils.randomFromTo(0,this.avatarFake.length-1)],score:a.Utils.randomFromTo(1e3,5e3)+"m",deviceType:a.Utils.randomFromTo(0,1),rewardItem:n};e.push(r)}for(this.contentHolder.removeAllChildren(),this.topPlayers.forEach(function(o,n){var r=e[n];t.initItem(o,r)}),o=3;o<e.length-1;o++){var i=e[o],s=cc.instantiate(this.leaderboardItemPrefab);this.initItem(s,i),s.parent=this.contentHolder,this.currRank===o&&(this.userNode=s)}this.currRank>=3&&this.initItem(this.userItem,e[this.currRank])},t.prototype.lateUpdate=function(){this.userItem.active=!a.Utils.areNodesIntersection(this.view,this.userNode)},t.prototype.initItem=function(e,t){e.getComponent(s.default).init(t.rank,t.name,t.score,t.flag,t.avatar,t.deviceType,t.rewardItem,t.rank===this.currRank),e.active=!0},t.prototype.start=function(){},i([u(cc.Node)],t.prototype,"topPlayers",void 0),i([u(cc.Prefab)],t.prototype,"leaderboardItemPrefab",void 0),i([u(cc.Node)],t.prototype,"contentHolder",void 0),i([u(cc.Node)],t.prototype,"userItem",void 0),i([u(cc.SpriteFrame)],t.prototype,"avatarFake",void 0),i([u(cc.SpriteFrame)],t.prototype,"flagFake",void 0),i([u(cc.SpriteFrame)],t.prototype,"rewardFake",void 0),i([u(cc.Node)],t.prototype,"view",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../Core/Utils":"Utils","./RealPrizeLeaderboardItem":"RealPrizeLeaderboardItem"}],RealPrizeTabMenu:[function(e,t,o){"use strict";cc._RF.push(t,"cfd38ELVKZHErRKBFrhbE3C","RealPrizeTabMenu");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcRealPrizeTabMenu=o.PRIZE_TAB_MENU=void 0;var a,s=e("./RealPrizeLeaderboard"),c=e("./RealPrizeWinner"),l=cc._decorator,u=l.ccclass,p=l.property;(function(e){e[e.LEADERBOARD=0]="LEADERBOARD",e[e.PRIZES=1]="PRIZES",e[e.RECENT_WINNER=2]="RECENT_WINNER"})(a=o.PRIZE_TAB_MENU||(o.PRIZE_TAB_MENU={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leaderboardPrefab=null,t.winnerPrefab=null,t.tabMenus=[],t.topHeader=[],t.leaderboardHint=null,t.whitePage=null,t.pageContent=null,t.hintDes=null,t.leaderboardMgr=null,t.winnerMgr=null,t._currentTabIdx=a.PRIZES,t}return r(t,e),t.prototype.onLoad=function(){var e=cc.instantiate(this.leaderboardPrefab);e.name="Leaderboard",e.parent=this.pageContent,this.leaderboardMgr=e.getComponent(s.default),this.tabMenus[0]=e;var t=cc.instantiate(this.winnerPrefab);t.name="Winner",t.parent=this.pageContent,this.winnerMgr=t.getComponent(c.default),this.tabMenus[2]=t},t.prototype.start=function(){this.activeTab(a.PRIZES)},t.prototype.activeTab=function(e){var t=this;this.tabMenus.forEach(function(o,n){t.setTabActive(n,n===e)}),this._currentTabIdx=e,this.leaderboardHint.active=e===a.LEADERBOARD,this.whitePage.active=e!==a.LEADERBOARD},t.prototype.setTabActive=function(e,t){this.tabMenus[e].active=t;var o=this.topHeader[e].children[0],n=this.topHeader[e].children[1];switch(o.active=!t,n.active=t,e){case a.LEADERBOARD:this.leaderboardMgr.initItems([]);break;case a.RECENT_WINNER:this.winnerMgr.initItems([])}},t.prototype.onTabMenuBtnClick=function(e,t){console.log("onTabMenuBtnClick ",t);var o=parseInt(""+t);this.activeTab(o)},t.prototype.onHintClick=function(){this.hintDes.active=!this.hintDes.active},i([p(cc.Prefab)],t.prototype,"leaderboardPrefab",void 0),i([p(cc.Prefab)],t.prototype,"winnerPrefab",void 0),i([p(cc.Node)],t.prototype,"tabMenus",void 0),i([p(cc.Node)],t.prototype,"topHeader",void 0),i([p(cc.Node)],t.prototype,"leaderboardHint",void 0),i([p(cc.Node)],t.prototype,"whitePage",void 0),i([p(cc.Node)],t.prototype,"pageContent",void 0),i([p(cc.Node)],t.prototype,"hintDes",void 0),i([u],t)}(cc.Component);o.NgcRealPrizeTabMenu=d,cc._RF.pop()},{"./RealPrizeLeaderboard":"RealPrizeLeaderboard","./RealPrizeWinner":"RealPrizeWinner"}],RealPrizeTicketProgressTimer:[function(e,t,o){"use strict";cc._RF.push(t,"103e6riQqNJZIWV8cGCTSkB","RealPrizeTicketProgressTimer");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcRealPrizeTicketProgressTimer=void 0;var a=e("../../../GameFramework/Scripts/Localized/TimerLabelLocalized"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t.iconTicketNode=null,t.timerLabel=null,t.glowEffectNode=null,t}return r(t,e),t.prototype.init=function(){this.timerLabel.updateLabelContentManually(0,0,4,30)},t.prototype.hideUIElements=function(){var e=this;this.node.children.forEach(function(t){t!==e.iconTicketNode&&(t.opacity=0)})},i([l(cc.ProgressBar)],t.prototype,"progressBar",void 0),i([l(cc.Node)],t.prototype,"iconTicketNode",void 0),i([l(a.NgcTimerLabelLocalized)],t.prototype,"timerLabel",void 0),i([l(cc.Node)],t.prototype,"glowEffectNode",void 0),i([c],t)}(cc.Component);o.NgcRealPrizeTicketProgressTimer=u,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/TimerLabelLocalized":"TimerLabelLocalized"}],RealPrizeWinnerItem:[function(e,t,o){"use strict";cc._RF.push(t,"dabd8/iscdLi5ihtVdsGTX4","RealPrizeWinnerItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.date=null,t.userName=null,t.avatar=null,t.flag=null,t.realPrizeSprite=null,t.realPrizeAmount=null,t.gameIcon=null,t}return r(t,e),t.prototype.init=function(e,t,o,n,r,i){this.date.string=e,this.userName.string=t,this.gameIcon.spriteFrame=n,this.realPrizeSprite&&(this.realPrizeSprite.node.active=!1),r&&(this.avatar.spriteFrame=r),this.flag.spriteFrame=o,i.realPrize?(this.realPrizeSprite.spriteFrame=i.realPrize,this.realPrizeSprite.node.active=!0):i.realPrizeAmount&&(this.realPrizeAmount.string=i.realPrizeAmount+"$\nCoupon",this.realPrizeAmount.node.active=!0)},t.prototype.start=function(){},i([c(cc.Label)],t.prototype,"date",void 0),i([c(cc.Label)],t.prototype,"userName",void 0),i([c(cc.Sprite)],t.prototype,"avatar",void 0),i([c(cc.Sprite)],t.prototype,"flag",void 0),i([c(cc.Sprite)],t.prototype,"realPrizeSprite",void 0),i([c(cc.Label)],t.prototype,"realPrizeAmount",void 0),i([c(cc.Sprite)],t.prototype,"gameIcon",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],RealPrizeWinner:[function(e,t,o){"use strict";cc._RF.push(t,"c3981xg55RJM5lJl3ErZS/S","RealPrizeWinner");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Core/Utils"),s=e("./RealPrizeWinnerItem"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.winnerItemPrefab=null,t.contentHolder=null,t.avatarFake=[],t.gameFake=[],t.flagFake=[],t.rewardFake=[],t}return r(t,e),t.prototype.initItems=function(e){for(var t=0;t<30;t++){var o={realPrize:null,realPrizeAmount:[100,200,300,500][a.Utils.randomFromTo(0,3)],gamePrize:null,gamePrizeAmount:0},n={date:"On 10th Sep",name:"UserName "+t,flag:this.flagFake[a.Utils.randomFromTo(0,this.flagFake.length-1)],avatar:this.avatarFake[a.Utils.randomFromTo(0,this.avatarFake.length-1)],game:this.gameFake[a.Utils.randomFromTo(0,this.gameFake.length-1)],rewardItem:o};e.push(n)}for(this.contentHolder.removeAllChildren(),t=0;t<e.length;t++){var r=e[t],i=cc.instantiate(this.winnerItemPrefab);this.initItem(i,r),i.parent=this.contentHolder}},t.prototype.lateUpdate=function(){},t.prototype.initItem=function(e,t){e.getComponent(s.default).init(t.date,t.name,t.flag,t.game,t.avatar,t.rewardItem),e.active=!0},t.prototype.start=function(){},i([u(cc.Prefab)],t.prototype,"winnerItemPrefab",void 0),i([u(cc.Node)],t.prototype,"contentHolder",void 0),i([u(cc.SpriteFrame)],t.prototype,"avatarFake",void 0),i([u(cc.SpriteFrame)],t.prototype,"gameFake",void 0),i([u(cc.SpriteFrame)],t.prototype,"flagFake",void 0),i([u(cc.SpriteFrame)],t.prototype,"rewardFake",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../Core/Utils":"Utils","./RealPrizeWinnerItem":"RealPrizeWinnerItem"}],RedWarning:[function(e,t,o){"use strict";cc._RF.push(t,"d5878GOQJ5LRLinOSl8v5A4","RedWarning");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onEnable=function(){this.node.opacity=0},t.prototype.startBlinkOnce=function(){cc.tween(this.node).to(.3,{opacity:150}).to(.2,{opacity:0}).start()},t.prototype.showRedWarning=function(e){this.node.opacity=e?150:0},i([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],RemoveWidgetPC:[function(e,t,o){"use strict";cc._RF.push(t,"0ae6e3HRs5O7beksQJAVK1Q","RemoveWidgetPC");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Main"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){a.Main.isDesktopBrowser()&&this.node.removeComponent(cc.Widget)},i([c],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../Main":"Main"}],ResizableComponent:[function(e,t,o){"use strict";cc._RF.push(t,"c06c4M2nZRKdqM2wBSMe4jj","ResizableComponent");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ResizableComponent=o.BaseSize=void 0;var a=cc._decorator,s=a.ccclass,c=(a.property,function(){});o.BaseSize=c;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baseSize=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){var e=this.node.getComponent(cc.Widget),t=this.node.getComponent(cc.Layout),o=this.node.getComponent(cc.Label);this.baseSize={width:this.node.width,height:this.node.height,x:this.node.x,y:this.node.y,leftAlign:e&&e.isAlignLeft?e.left:null,rightAlign:e&&e.isAlignRight?e.right:null,topAlign:e&&e.isAlignTop?e.top:null,bottomAlign:e&&e.isAlignBottom?e.bottom:null,spacingX:t&&t.type==cc.Layout.Type.HORIZONTAL?t.spacingX:null,spacingY:t&&t.type==cc.Layout.Type.VERTICAL?t.spacingY:null,fontSize:!!o&&o.fontSize,lineHeight:!!o&&o.lineHeight,scaleX:this.node.scaleX,scaleY:this.node.scaleY}},t.resizeNode=function(e,t){o.getResizableComponent(e).resize(t)},t.resizeNodeByWidth=function(e,t){var n=o.getResizableComponent(e),r=t/n.baseSize.width;n.resize(r)},t.resizeNodeByHeight=function(e,t){var n=o.getResizableComponent(e),r=t/n.baseSize.height;n.resize(r)},t.getResizableComponent=function(e){var t=e.getComponent(o);return t||(t=e.addComponent(o)),t},t.prototype.resize=function(e){var t=this.baseSize,n=this.node.getComponent(cc.Widget),r=this.node.getComponent(cc.Label),i=this.node.getComponent(cc.Layout),a=this.node.getComponent(sp.Skeleton);if(r||(i&&i.type==cc.Layout.Type.HORIZONTAL||(this.node.width=t.width*e),i&&i.type==cc.Layout.Type.VERTICAL||(this.node.height=t.height*e)),this.node.x=t.x*e,this.node.y=t.y*e,n&&this.resizeWidgetComponent(n,e),r&&(r.fontSize=t.fontSize*e,r.lineHeight=t.lineHeight*e),this.node.getComponent(cc.Sprite),t.designWidth&&t.designHeight){if(this.node.width!=t.designWidth*e){var s=t.designWidth*e/t.width;this.node.width=t.width*s,this.node.height=t.height*s}this.node.height>t.designHeight*e&&(s=t.designHeight*e/t.height,this.node.width=t.width*s,this.node.height=t.height*s)}i&&(t.spacingX&&(i.spacingX=t.spacingX*e),t.spacingY&&(i.spacingY=t.spacingY*e),i.updateLayout()),a&&(this.node.scaleX=t.scaleX*e,this.node.scaleY=t.scaleY*e),this.node.children.length>0&&this.node.children.forEach(function(t){return t.active&&o.resizeNode(t,e)})},t.prototype.resizeWidgetComponent=function(e,t){var o=this.baseSize;e.isAlignLeft&&(e.left=o.leftAlign*t),e.isAlignRight&&(e.right=o.rightAlign*t),e.isAlignTop&&(e.top=o.topAlign*t),e.isAlignBottom&&(e.bottom=o.bottomAlign*t),e.updateAlignment()},o=i([s],t)}(cc.Component);o.ResizableComponent=l,cc._RF.pop()},{}],ResultUI:[function(e,t,o){"use strict";cc._RF.push(t,"e3382SDYsVBzbezfadeDbqf","ResultUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcResultUI=void 0;var a=e("../../../../GameFramework/Scripts/Ads/NgcAdsManager"),s=e("../../../../GameFramework/Scripts/BuildConfig"),c=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),l=e("../../../../GameFramework/Scripts/Localized/LocalizedManager"),u=e("../../../CrownRoad/Script/CrownRoadManager"),p=e("../../../Dialogs/Script/DialogBase"),d=e("./RewardItem"),f=cc._decorator,h=f.ccclass,g=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleNode=null,t.scoreLayoutNode=null,t.crownParent=null,t.rewardItemPrefab=null,t.confettiNode=null,t.ignoreBackKey=!0,t._callBackWhenClose=null,t.scoreItemCounter=0,t.readyToPlayAnimation=!1,t.crownItem=null,t.canShowConfetti=!0,t.gotCrownData=!1,t}return r(t,e),t.prototype.init=function(e){var t=this.titleNode.getComponentInChildren(c.NgcLabelLocalized),o=l.NgcLocalizedManager.t(t.textKey).text;t.textKey=null,t.string=o.toLocaleUpperCase(),this._callBackWhenClose=e,this.initUI(),this.readyToPlayAnimation=!0},t.prototype.update=function(){this.readyToPlayAnimation&&(this.gotCrownData||s.NgcBuildConfig.offlineMode)&&(this.startUpAnimation(),this.readyToPlayAnimation=!1)},t.prototype.showConfetti=function(){var e=this;this.canShowConfetti&&cc.tween(this.node).delay(.2).call(function(){e.confettiNode.getComponentsInChildren(cc.ParticleSystem).forEach(function(e){return e.resetSystem()})}).start()},t.prototype.initUI=function(){this.titleNode.opacity=0,this.titleNode.scale=0,this.titleNode.active=!1,this.scoreLayoutNode.opacity=0,this.scoreLayoutNode.scale=0,this.crownParent.opacity=0,this.crownParent.active=!1,this.crownParent.scale=0},t.prototype.startUpAnimation=function(){var e=this;cc.tween(this.titleNode).to(.25,{opacity:255,scale:1}).call(function(){cc.tween(e.scoreLayoutNode).to(.5,{opacity:255,scale:1}).start(),e.crownItem.rewardLayout().scale=0,e.crownItem.scoreValueLabel.node.opacity=0,e.crownParent.opacity=255,cc.tween(e.crownParent).delay(1.75).to(.05,{opacity:255,scale:1}).call(function(){e.crownItem.playFancyAnimation(e.showConfetti.bind(e)),e.hideUI()}).start()}).start()},t.prototype.addScoreItem=function(e,t,o,n){void 0===o&&(o=!0),void 0===n&&(n="");var r=cc.instantiate(this.rewardItemPrefab).getComponent(d.NgcRewardItem);r.initScore(e,t,!1,o,n);var i=Math.floor(this.scoreItemCounter/3);return i>=this.scoreLayoutNode.children.length&&(i=this.scoreLayoutNode.children.length-1),this.scoreLayoutNode.children[i].addChild(r.node),this.scoreItemCounter+=1,this.scoreItemCounter>3&&(this.crownParent.y=-300),r},t.prototype.addCrown=function(e,t){var o=this;void 0===t&&(t=.75);var n=cc.instantiate(this.rewardItemPrefab).getComponent(d.NgcRewardItem);u.default.isInitialized()?u.default.checkReward(e,function(e){var r=e.rankPoints;o.canShowConfetti=r>0,o.crownParent.active=!0,n.initReward("crown",r,!0,t),o.gotCrownData=!0}):(n.initReward("crown",0,!0,t),this.gotCrownData=!0),this.crownItem=n,this.crownParent.addChild(n.node)},t.prototype.hideUI=function(){var e=this;cc.tween(this.node).delay(3).call(function(){e.hide()}).start()},t.prototype.show=function(){this.checkShowBanner(a.NgcPointcuts.bannerResult),e.prototype.show.call(this)},t.prototype.hide=function(){e.prototype.hide.call(this,this._callBackWhenClose)},t.urlPrefab="Result",t.bundleName="03_end_game_flow",t.dialogType="NgcResultUI",i([g(cc.Node)],t.prototype,"titleNode",void 0),i([g(cc.Node)],t.prototype,"scoreLayoutNode",void 0),i([g(cc.Node)],t.prototype,"crownParent",void 0),i([g(cc.Prefab)],t.prototype,"rewardItemPrefab",void 0),i([g(cc.Node)],t.prototype,"confettiNode",void 0),i([h],t)}(p.NgcDialogBase);o.NgcResultUI=y,cc._RF.pop()},{"../../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../CrownRoad/Script/CrownRoadManager":"CrownRoadManager","../../../Dialogs/Script/DialogBase":"DialogBase","./RewardItem":"RewardItem"}],ReviveDialog:[function(e,t,o){"use strict";cc._RF.push(t,"602f1RyJYxJjaIregvzu5tM","ReviveDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../../../globals"),l=e("../../../../../Scripts/GameTrackingDataSupporter"),u=e("../../../../../Scripts/Main"),p=e("../../../../GameFramework/Scripts/Ads/NgcAdsManager"),d=e("../../../../GameFramework/Scripts/BuildConfig"),f=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),h=e("../../../../GameFramework/Scripts/Localized/LocalizedManager"),g=e("../../../../GameFramework/Scripts/NgcMain"),y=e("../../../../Services/Inventory/Inventory"),m=e("../../../../Services/Telemetry/Telemetry"),_=e("../../../Dialogs/Script/DialogBase"),v=e("../../../Dialogs/Script/NgcDialogManager"),S=e("./NgcRevive"),b=cc._decorator,N=b.ccclass,P=b.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressBar=null,t.acceptBtnNode=null,t.goldenAdsBg=null,t.normalAdsBg=null,t.adsIconNode=null,t.flashAnimNode=null,t.reviveAdsInfoLabelNode=null,t.rejectBtnNode=null,t.titleNode=null,t.reviveCenterNode=null,t.heartIcon=null,t.freeTagNode=null,t.noAdsPriceLayout=null,t._acceptReviveFunc=null,t._refuseReviveFunc=null,t._offerCountDownTime=5,t.ignoreBackKey=!0,t._isShow=!1,t._curCountDownTime=0,t}return r(t,e),t.prototype.onLoad=function(){this.acceptBtnNode.opacity=0,this.acceptBtnNode.active=!1,this.titleNode.opacity=0},t.prototype.init=function(e,t,o){var n=this;this.checkShowBanner(p.NgcPointcuts.bannerRevive),m.NgcTelemetry.inst.LogEvent_EnterScreen("Revive");var r=this.rejectBtnNode.getComponentInChildren(f.NgcLabelLocalized),i=h.NgcLocalizedManager.t(r.textKey).text;r.textKey=null,r.string=i.toLocaleUpperCase(),this._acceptReviveFunc=e,this._refuseReviveFunc=t,this.setCountDownTime(o),this._isShow=!0,d.NgcBuildConfig.offlineMode?this.adsIconNode.active=!1:(this.rejectBtnNode.active=!1,this.rejectBtnNode.opacity=0),this.refreshClaimButton(),this.titleNode.scale=0,this.titleNode.getComponent(cc.Widget).enabled=!1,this.acceptBtnNode.opacity=0;var a=this.reviveCenterNode.getChildByName("CircleBar"),s=a.scale;a.scale=0,a.opacity=0;var c=this.reviveCenterNode.getChildByName("name");c.opacity=0,cc.tween(a).to(.35,{scale:1.5,opacity:255},{easing:"quadOut"}).to(.1,{scale:s},{easing:"quadOut"}).call(function(){n.heartIcon.pulsingEffect=!0}).start(),cc.tween(c).delay(.5).to(.25,{opacity:255}).start(),cc.tween(this.titleNode).delay(.5).to(.25,{opacity:255,scale:1}).start(),cc.tween(this.acceptBtnNode).call(function(){return n.acceptBtnNode.active=!0}).delay(.5).to(.25,{opacity:255}).call(function(){n.acceptBtnNode.pulsingEffect=!0,cc.tween(n.rejectBtnNode).call(function(){return n.rejectBtnNode.active=!0}).delay(3).to(.25,{opacity:255}).start()}).start(),this.show()},t.prototype.refreshClaimButton=function(){if(S.default.inst.isFreeOfferAvailable())this.adsIconNode.active=!1,this.reviveAdsInfoLabelNode.active=!1,this.freeTagNode.active=!0;else if(S.default.inst.notUsingAdToRevive()){this.adsIconNode.active=!1,this.reviveAdsInfoLabelNode.active=!1,this.acceptBtnNode.getChildByName("label_Claim").getComponent(f.NgcLabelLocalized).horizontalAlign=cc.Label.HorizontalAlign.LEFT,this.noAdsPriceLayout.active=!0;var e=this.noAdsPriceLayout.getComponentInChildren(cc.Sprite),t=this.noAdsPriceLayout.getComponentInChildren(cc.Label),o=y.NgcInventory.inst.itemTable[S.REVIVE_NO_ADS_CURRENCY].picture;cc.loader.loadRes(o,cc.SpriteFrame,function(t,o){e.spriteFrame=o}),t.string=""+S.REVIVE_NO_ADS_CURRENCY_NUMBER,this.rejectBtnNode.opacity=255,cc.Tween.stopAllByTarget(this.rejectBtnNode)}},t.prototype.setCountDownTime=function(e){this._curCountDownTime=this._offerCountDownTime=e},t.prototype.acceptButtonOnClick=function(){return a(this,void 0,void 0,function(){var e,t,o,n,r,i,a=this;return s(this,function(s){switch(s.label){case 0:return"GameDistribution"===d.NgcBuildConfig.buildPlatform&&(l.default.inst.setSendTrackingGDReviveClaim=!0),e=function(){p.default.inst&&p.default.inst.hide(),a._acceptReviveFunc&&a._acceptReviveFunc(),g.NgcMain.setAppContext(u.AppContext.Gameplay),a.hide()},S.default.inst.isFreeOfferAvailable()?(e(),[2]):window.isAdsBlocked?[4,v.NgcDialogManager.showAdsReminderMsg(this.acceptBtnNode)]:[3,2];case 1:return s.sent(),[2];case 2:return c.default.OfflineMode.GetFreeOffer()?(c.default.OfflineMode.SetFreeOffer(!1),e(),[2]):S.default.inst.notUsingAdToRevive()?(o=(t=["",0])[0],n=t[1],d.NgcBuildConfig.offlineMode?(r=[c.default.OfflineMode.Config.ReviveCostType,c.default.OfflineMode.Config.ReviveCostPrice],o=r[0],n=r[1]):(i=[S.REVIVE_NO_ADS_CURRENCY,S.REVIVE_NO_ADS_CURRENCY_NUMBER],o=i[0],n=i[1]),y.NgcInventory.inst.getItemCount(o,function(t,r){if(!t&&r){if(r.count>=n)return void y.NgcInventory.inst.consumeItem(o,n,function(){S.default.inst.tookFreeOffered=!0,e()});v.NgcDialogManager.showNotEnoughCurrencyMsg(a.acceptBtnNode)}}),[2]):(e(),[2])}})})},t.prototype.refuseButtonOnClick=function(){this._refuseReviveFunc&&this._refuseReviveFunc(),this.hide()},t.prototype.update=function(e){if(this.acceptBtnNode.pulsingEffect&&(this.acceptBtnNode.scale=.98+.04*Math.sin(Date.now()*Math.PI/480)),this.heartIcon.pulsingEffect&&(this.heartIcon.scale=.98+.04*Math.sin(Date.now()*Math.PI/480)),this._isShow&&255==this.reviveCenterNode.opacity){if(this._curCountDownTime<=0)return void this.refuseButtonOnClick();this._curCountDownTime-=e,this._curCountDownTime<0&&(this._curCountDownTime=0),this.progressBar.progress=this._curCountDownTime/this._offerCountDownTime}},t.urlPrefab="ReviveDialog",t.bundleName="02_dialog",t.dialogType="NgcReviveDialog",i([P(cc.ProgressBar)],t.prototype,"progressBar",void 0),i([P(cc.Node)],t.prototype,"acceptBtnNode",void 0),i([P(cc.Node)],t.prototype,"goldenAdsBg",void 0),i([P(cc.Node)],t.prototype,"normalAdsBg",void 0),i([P(cc.Node)],t.prototype,"adsIconNode",void 0),i([P(cc.Node)],t.prototype,"flashAnimNode",void 0),i([P(cc.Node)],t.prototype,"reviveAdsInfoLabelNode",void 0),i([P(cc.Node)],t.prototype,"rejectBtnNode",void 0),i([P(cc.Node)],t.prototype,"titleNode",void 0),i([P(cc.Node)],t.prototype,"reviveCenterNode",void 0),i([P(cc.Node)],t.prototype,"heartIcon",void 0),i([P(cc.Node)],t.prototype,"freeTagNode",void 0),i([P(cc.Node)],t.prototype,"noAdsPriceLayout",void 0),i([N],t)}(_.NgcDialogBase);o.default=C,cc._RF.pop()},{"../../../../../Scripts/GameTrackingDataSupporter":"GameTrackingDataSupporter","../../../../../Scripts/Main":"Main","../../../../../globals":"globals","../../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../../GameFramework/Scripts/NgcMain":"NgcMain","../../../../Services/Inventory/Inventory":"Inventory","../../../../Services/Telemetry/Telemetry":"Telemetry","../../../Dialogs/Script/DialogBase":"DialogBase","../../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","./NgcRevive":"NgcRevive"}],RewardClaimAnimation:[function(e,t,o){"use strict";cc._RF.push(t,"61396okdyZLJIC8NVJj0S4W","RewardClaimAnimation");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcRewardClaimAnimation=void 0;var c=e("../../../GameFramework/Scripts/CONSTANTS"),l=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),u=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),p=e("../../../GameFramework/Scripts/NgcShopManager"),d=e("../../../Services/Inventory/Inventory"),f=e("../../TabBar/Script/NgcTabBarManager"),h=cc._decorator,g=h.ccclass,y=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardImageContainer=null,t.light=null,t.rewardImage=null,t.rewardSpine=null,t.quantity=null,t.skeleton=null,t.customTextLabel=null,t}return r(t,e),t.prototype.onLoad=function(){this.rewardSpine.active=!1,this.node.active=!1},t.prototype.loadRewardImage=function(e){return new Promise(function(t,o){cc.loader.loadRes(e,cc.SpriteFrame,function(e,n){!e&&n?t(n):e&&o(e)})})},t.prototype.loadRewardImageURL=function(e){return new Promise(function(t,o){cc.assetManager.loadRemote(e,cc.SpriteFrame,function(e,n){!e&&n?t(new cc.SpriteFrame(n)):e&&o(e)})})},t.prototype.loadRewardSpine=function(e){var t=this;return new Promise(function(o,n){cc.loader.loadRes(e,sp.SkeletonData,function(e,r){!e&&r?(t.skeleton.skeletonData=r,t.skeleton.premultipliedAlpha=!1,o(r)):e&&n(e)})})},t.prototype.showRewardImage=function(e){this.rewardImageContainer.active=!0,this.light.getComponent(cc.Animation).play("light_scale"),this.rewardImage.getComponent(cc.Sprite).spriteFrame=e,this.rewardImage.getComponent(cc.Animation).play("scale_up")},t.prototype.showRewardSpine=function(e,t){this.rewardSpine.active=!0;var o=this.skeleton.skeletonData.skeletonJson.skins[0].name,n=Object.keys(this.skeleton.skeletonData.skeletonJson.animations)[0],r=t||o,i=e||n;this.skeleton.setSkin(r),this.skeleton.setAnimation(0,i,!1)},t.prototype.moveRewardToShopBar=function(){var e=f.NgcTabBarManager.inst.worldPosOfShopTab(),t=this.rewardImage.convertToWorldSpaceAR(cc.v2(0,0)),o=cc.v2(e.x-t.x,e.y-t.y);cc.tween(this.rewardImage).to(.6,{x:this.rewardImage.x+o.x,y:this.rewardImage.y+o.y,scale:.2},{easing:"quartInOut"}).call(function(){return f.NgcTabBarManager.inst.playAnimationShopTabGetItem()}).start()},t.prototype.checkMoveRewardToShopBar=function(e,t,o){var n=this,r=o&&p.NgcShopManager.getInstance().includeItem(e)?700:0;this.moveRewardToShopBar(),setTimeout(function(){n.node.active=!1,t&&t()},r)},t.prototype.setCustomText=function(e){if(null!==e){var t=this.customTextLabel.node;u.NgcLocalizedManager.setTextKey(this.customTextLabel,e),t.active=!0,t.opacity=0,cc.tween(t).to(.25,{opacity:255}).start()}},t.prototype.showClaimRewardAnimation=function(e,t,o){var n;return void 0===t&&(t=function(){}),a(this,void 0,void 0,function(){var r,i,a,l,u,p,f,h,g=this;return s(this,function(s){switch(s.label){case 0:return this.node.active=!0,setTimeout(function(){return g.checkMoveRewardToShopBar(e.itemID,t,o)},1200),this.rewardImageContainer.active=!1,this.rewardSpine.active=!1,r=null===(n=d.NgcInventory.inst.itemTable[e.itemID])||void 0===n?void 0:n.type,e.count>0&&r!==c.NGC_CONSTANTS.INVENTORY.TYPE.EQUIPPABLE?(this.quantity.active=!0,this.quantity.getComponent(cc.Label).string="+"+e.count,this.quantity.getComponent(cc.Animation).play("scale_up")):this.quantity.active=!1,d.NgcInventory.inst.itemTable[e.itemID]?(i=d.NgcInventory.inst.itemTable[e.itemID].picture,a=d.NgcInventory.inst.itemTable[e.itemID].rewardAnimation,l=d.NgcInventory.inst.itemTable[e.itemID].rewardAnimationSkin,u=null,p=null,a&&(i=a),l&&(h=l.split(",").map(function(e){return e.trim()}),u=h[0],p=h[1]),e.imgURL?[4,this.loadRewardImageURL(e.imgURL)]:[3,2]):[2];case 1:return(f=s.sent())instanceof cc.SpriteFrame&&this.showRewardImage(f),[2];case 2:return i.includes(".png")?(i=i.replace("DailyReward","shop_items"),[4,this.loadRewardImage(i)]):[3,4];case 3:return(f=s.sent())instanceof cc.SpriteFrame&&this.showRewardImage(f),[3,6];case 4:return i.includes(".json")?[4,this.loadRewardSpine(i)]:[3,6];case 5:s.sent()instanceof sp.SkeletonData&&this.showRewardSpine(u,p),s.label=6;case 6:return[2]}})})},i([y(cc.Node)],t.prototype,"rewardImageContainer",void 0),i([y(cc.Node)],t.prototype,"light",void 0),i([y(cc.Node)],t.prototype,"rewardImage",void 0),i([y(cc.Node)],t.prototype,"rewardSpine",void 0),i([y(cc.Node)],t.prototype,"quantity",void 0),i([y(sp.Skeleton)],t.prototype,"skeleton",void 0),i([y(l.NgcLabelLocalized)],t.prototype,"customTextLabel",void 0),i([g],t)}(cc.Component);o.NgcRewardClaimAnimation=m,cc._RF.pop()},{"../../../GameFramework/Scripts/CONSTANTS":"CONSTANTS","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../Services/Inventory/Inventory":"Inventory","../../TabBar/Script/NgcTabBarManager":"NgcTabBarManager"}],RewardItem:[function(e,t,o){"use strict";cc._RF.push(t,"c11de1txXxFA7nX1tbs/q5p","RewardItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcRewardItem=void 0;var a=e("../../../../Core/Utils"),s=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/Localized/LocalizedManager"),l=e("../../../../Services/Inventory/Inventory"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scoreBGSpriteframe=null,t.rewardBGSpriteframe=null,t.background=null,t.scoreTitleLabel=null,t.rewardIconSprite=null,t.scoreValueLabel=null,t.glowNode=null,t.lightEffectNode=null,t}return r(t,e),t.prototype.onLoad=function(){this.glowNode||(this.glowNode=this.node.getChildByName("Glow")),this.lightEffectNode||(this.lightEffectNode=this.node.getChildByName("Light"))},t.prototype.rewardLayout=function(){return this.background.node.parent},t.prototype.playFancyAnimation=function(e){var t=this.rewardLayout(),o=this.glowNode;o.scale=0,o.active=!0;var n=this.lightEffectNode;n.scale=0,n.opacity=0,n.active=!0,t.scale=0;var r=this.scoreValueLabel.node;cc.tween(n).to(.5,{scale:1.75,opacity:255}).start(),cc.tween(t).to(.5,{scale:1.5},{easing:"quadInOut"}).delay(5/60).call(function(){cc.tween(n).to(.1,{scale:1,opacity:0},{easing:"backOut"}).start(),e&&e(),cc.tween(t).to(.1,{scale:.75},{easing:"quadOut"}).call(function(){cc.tween(t).to(.1,{scale:1},{easing:"quadInOut"}).start(),cc.tween(r).to(.1,{opacity:255}).start(),cc.tween(o).parallel(cc.tween().to(.5,{scale:1},{easing:"quadOut"}),cc.tween().delay(.3).to(.5,{opacity:0},{easing:"quadOut"})).start()}).start()}).start()},t.prototype.initScore=function(e,t,o,n,r){var i=this;if(void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===r&&(r=""),this.background.spriteFrame=this.scoreBGSpriteframe,this.background.type=cc.Sprite.Type.SLICED,this.background.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.rewardIconSprite.node.active=!1,c.NgcLocalizedManager.setTextKey(this.scoreTitleLabel,e),this.background.node.width=this.scoreTitleLabel.node.getContentSize().width+16,n){var s=this.scoreValueLabel.node.y,l=a.Utils.tweenNumber(0,t,1.25,function(e,n){n?(cc.tween(i.scoreValueLabel.node).to(.25,{scale:1}).start(),i.scoreValueLabel.string=(o?t>=0?"+":"-":r)+Math.abs(e).toString(),i.scoreValueLabel.node.y=s):(cc.director.getTotalFrames()%5==0&&(i.scoreValueLabel.string=(o?t>=0?"+":"-":r)+Math.abs(e).toString()),i.scoreValueLabel.node.y=s+Math.abs(7*Math.sin(Date.now()*Math.PI/160)))});return this.scheduleOnce(function(){l.start()},.5),l}return this.scoreValueLabel.string=(o?t>0?"+":"-":r)+Math.abs(t).toString(),null},t.prototype.initReward=function(e,t,o,n){var r=this;void 0===o&&(o=!1),void 0===n&&(n=1),this.background.spriteFrame=this.rewardBGSpriteframe,this.scoreTitleLabel.node.active=!1,this.scoreValueLabel.string=(o?t>=0?"+":"-":"")+Math.abs(t).toString();var i="default_sprite";try{i=l.NgcInventory.inst.itemTable[e].picture}catch(a){console.warn(a)}cc.loader.loadRes(i,cc.SpriteFrame,function(e,t){e||(r.rewardIconSprite.spriteFrame=t)}),this.rewardIconSprite.node.scale=n},i([d(cc.SpriteFrame)],t.prototype,"scoreBGSpriteframe",void 0),i([d(cc.SpriteFrame)],t.prototype,"rewardBGSpriteframe",void 0),i([d(cc.Sprite)],t.prototype,"background",void 0),i([d(s.NgcLabelLocalized)],t.prototype,"scoreTitleLabel",void 0),i([d(cc.Sprite)],t.prototype,"rewardIconSprite",void 0),i([d(s.NgcLabelLocalized)],t.prototype,"scoreValueLabel",void 0),i([d(cc.Node)],t.prototype,"glowNode",void 0),i([d(cc.Node)],t.prototype,"lightEffectNode",void 0),i([p],t)}(cc.Component);o.NgcRewardItem=f,cc._RF.pop()},{"../../../../Core/Utils":"Utils","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../../Services/Inventory/Inventory":"Inventory"}],RewardUI:[function(e,t,o){"use strict";cc._RF.push(t,"e6a24w/gDVEz76+MwY1ayO5","RewardUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},c=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,r++)n[r]=i[a];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcEndGameRewardDialog=void 0;var l=e("../../../../Scripts/GameTrackingDataHelper"),u=e("../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager"),p=e("../../../../Scripts/SoundManager"),d=e("../../../Core/Utils"),f=e("../../../GameFramework/Scripts/Ads/AdsManager_impl"),h=e("../../../GameFramework/Scripts/Ads/NgcAdsManager"),g=e("../../../GameFramework/Scripts/BuildConfig"),y=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),m=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),_=e("../../../GameFramework/Scripts/NgcGame"),v=e("../../../GameFramework/Scripts/NgcScreenManager"),S=e("../../../GameFramework/Scripts/NgcUserInfo"),b=e("../../../SDK/Nano/NanoSrv"),N=e("../../../Services/Ads/Ads"),P=e("../../../Services/Telemetry/Telemetry"),C=e("../../Dialogs/Script/DialogBase"),w=e("../../Dialogs/Script/MessageDialog/MessageDialog"),T=e("../../Dialogs/Script/NgcDialogManager"),I=e("../../RealPrize/Script/RealPrizeTicketProgressTimer"),R=e("../Result/Script/RewardItem"),O=cc._decorator,E=O.ccclass,k=O.property,A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardLayoutNode=null,t.claimButton=null,t.claimAdsButton=null,t.retryButton=null,t.backToMainMenuButton=null,t.ticketUINode=null,t.ticketDailyLimitNode=null,t.rewardItemPrefab=null,t.confettiLeft=null,t.confettiRight=null,t._callBackWhenClose=null,t._retryFlowCallback=null,t.ignoreBackKey=!0,t.claimButtonClicked=!1,t._rewardAnimationQueues=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){this.claimButton.getComponent(cc.Button).interactable=!1,this.claimAdsButton.getComponent(cc.Button).interactable=!1,this.retryButton.getComponent(cc.Button).interactable=!1,this.backToMainMenuButton.getComponent(cc.Button).interactable=!1,this.claimButton.opacity=0,this.claimAdsButton.opacity=0,this.retryButton.opacity=0,this.backToMainMenuButton.opacity=0,this.ticketUINode.opacity=0,this.ticketUINode.scale=0,this.registerCustomEvents()},t.prototype.registerCustomEvents=function(){},t.prototype.init=function(e){var t=this;this.addRewardItems(),this.scheduleOnce(function(){t.isShowTicketUI()?cc.tween(t.ticketUINode).to(.25,{scale:1,opacity:255}).call(function(){t.checkShowTicketUI()}).start():t.showButtons()},1),this.updateClaimAdsButton(),(N.NgcAds.inst&&N.NgcAds.inst.isFakeAdsPlatform()||g.NgcBuildConfig.offlineMode)&&(this.claimAdsButton.getChildByName("icon_ad").active=!1,this.claimButton.active=!1),this._callBackWhenClose=e,o.canShowRetryButton()&&(this.claimAdsButton.active=!1,this.claimButton.active=!1,this.retryButton.active=!0,this.backToMainMenuButton.active=!0)},t.prototype.showConfetti=function(){var e=this;cc.tween(this.node).delay(.2).call(function(){e.confettiLeft.getComponentsInChildren(cc.ParticleSystem).forEach(function(e){return e.resetSystem()}),e.confettiRight.getComponentsInChildren(cc.ParticleSystem).forEach(function(e){return e.resetSystem()})}).start()},t.prototype.claimButtonDelayTime=function(){return 1},t.prototype.backToMainMenuDelayTime=function(){return 1},t.prototype.showButtons=function(){var e=this;o.canShowRetryButton()?cc.tween(this.retryButton).to(.5,{opacity:255}).call(function(){e.showDailyLimitMessage(),e.retryButton.getComponent(cc.Button).interactable=!0,cc.tween(e.backToMainMenuButton).delay(e.backToMainMenuDelayTime()).to(.5,{opacity:255}).call(function(){_.NgcGame.inst.forcedExit?e.onClaimButtonClick(null,null):e.backToMainMenuButton.getComponent(cc.Button).interactable=!0}).start()}).start():(this.claimAdsButton.pulsingEffect=!0,cc.tween(this.claimAdsButton).to(.5,{opacity:255}).call(function(){e.showDailyLimitMessage(),e.claimAdsButton.getComponent(cc.Button).interactable=!0,cc.tween(e.claimButton).delay(e.claimButtonDelayTime()).to(.5,{opacity:255}).call(function(){_.NgcGame.inst.forcedExit?e.onClaimButtonClick(null,null):e.claimButton.getComponent(cc.Button).interactable=!0}).start()}).start())},t.prototype.addRewardItems=function(){var e=this;o._endGameRewards.forEach(function(t){e.addRewardItem(t.itemID,t.count,!0)})},t.prototype.isShowTicketUI=function(){return!0},t.prototype.canShowDailyLimitMessage=function(){return this.isShowTicketUI()},t.prototype.checkShowTicketUI=function(){var e=this;if(this.isShowTicketUI()){this.ticketUINode.getComponent(I.NgcRealPrizeTicketProgressTimer).init();var t=this.ticketUINode.getComponent(I.NgcRealPrizeTicketProgressTimer).glowEffectNode,n=this.ticketUINode.getComponent(I.NgcRealPrizeTicketProgressTimer).iconTicketNode;cc.tween(t).to(.2,{opacity:255,scale:.6}).call(function(){cc.tween(t).to(.2,{opacity:0,scale:.4}).start()}).start(),n.getComponent(cc.Widget).enabled=!1,cc.tween(n).to(.2,{scale:2.5}).call(function(){}).start(),this.scheduleOnce(function(){var t=n.position;o.addReward({itemID:"ticket",count:5});var r=e.addRewardItem("ticket",5,!1);r.node.scale=0,r.node.opacity=0,cc.tween(r.node).to(.5,{scale:1},{easing:"backOut"}).call(function(){e.rewardLayoutNode.getComponent(cc.Layout).enabled=!1,r.node.scale=0,r.node.opacity=255}).start(),e.rewardLayoutNode.getComponent(cc.Layout).updateLayout(),e.scheduleOnce(function(){r.node.scale=1,r.rewardLayout().scale=0,r.scoreValueLabel.node.opacity=0,r.playFancyAnimation(e.showConfetti.bind(e))},.55),d.Utils.tweenNodeToNode(n,r.rewardIconSprite.node,cc.v2(-8,32),{scale:.75},.65,"quartInOut",!0).call(function(){cc.tween(n).to(.25,{opacity:0}).call(function(){n.x=t.x,n.y=t.y+50,n.scale=1.5,e.canShowDailyLimitMessage()?cc.tween(e.ticketUINode).to(.25,{opacity:0}).start():cc.tween(n).to(.25,{y:t.y,opacity:255},{easing:"quartInOut"}).start()}).start(),e.showButtons()}).start()},.4)}},t.prototype.showDailyLimitMessage=function(){if(this.canShowDailyLimitMessage()){this.ticketUINode.getComponent(I.NgcRealPrizeTicketProgressTimer).hideUIElements(),this.ticketDailyLimitNode.active=!0,this.ticketDailyLimitNode.opacity=0,this.ticketDailyLimitNode.getComponent(cc.Widget).updateAlignment(),this.ticketDailyLimitNode.getComponent(cc.Widget).enabled=!1;var e=this.ticketDailyLimitNode.y;this.ticketDailyLimitNode.y-=20,cc.tween(this.ticketDailyLimitNode).to(.5,{opacity:255,y:e},{easing:"quartInOut"}).start()}},t.prototype.onClaimAdsButtonClick=function(){var e=this;this.claimReward(!0,!1,function(){e.hide(e.onAfterClaim.bind(e,o.normalFlowCallback),!1)})},t.prototype.onClaimButtonClick=function(){var e=this;this.claimReward(!1,!1,function(){e.hide(e.onAfterClaim.bind(e,o.normalFlowCallback),!1)})},t.prototype.onRetryButtonClick=function(){var e=this;o.retryFlowTriggered=!0,this.claimReward(!1,!0,function(){e.hide(e.onAfterClaim.bind(e,o.retryFlowCallback),!1)})},t.prototype.onAfterClaim=function(e){var t=this,o=function(){v.default.inst.startFadeOut(.25,function(){t._callBackWhenClose&&t._callBackWhenClose(),e&&e(),setTimeout(function(){v.default.inst.startFadeIn(.25)},250),t.node.destroy()})};N.NgcAds.inst&&N.NgcAds.inst.adsIsAvailable(N.AdsType.Interstitial)?(S.default.updateAdsInfo(),f.default.inst.show(h.NgcPointcuts.interPostGame,N.AdsType.Interstitial,"None",0,function(){p.default.inst.stopMusic()},function(e){e?console.log("Post game interstitial ad is successfully showed!"):console.error("Post game interstitial ad is not showed - unavailable or too soon"),o()})):(console.error("Post-game interstitial pointcut is unavailable"),o())},t.prototype.hideUIBeforeRewardAnimation=function(){var e=this;cc.Tween.stopAllByTarget(this.backToMainMenuButton),cc.Tween.stopAllByTarget(this.claimButton),this.claimAdsButton.getComponent(cc.Button).interactable=!1,this.claimButton.getComponent(cc.Button).interactable=!1,this.retryButton.getComponent(cc.Button).interactable=!1,this.backToMainMenuButton.getComponent(cc.Button).interactable=!1,this.show&&this.isShowTicketUI()&&cc.tween(this.ticketUINode).to(.25,{opacity:0}).start(),cc.tween(this.rewardLayoutNode).to(.25,{opacity:0}).start(),cc.tween(this.claimButton).to(.25,{opacity:0}).call(function(){e.claimButton.active=!1}).start(),cc.tween(this.claimAdsButton).to(.25,{opacity:0}).start(),cc.tween(this.retryButton).to(.25,{opacity:0}).start(),cc.tween(this.backToMainMenuButton).to(.25,{opacity:0}).start(),cc.tween(this.ticketDailyLimitNode).to(.25,{opacity:0}).start()},t.prototype.displayRewardAnimations=function(e){var t=this;this._rewardAnimationQueues||(this._rewardAnimationQueues=c(o._endGameRewards));var n=this._rewardAnimationQueues.shift();n?(o.deliveryRewardInst.showRewardAnimation(n,null,!1),this.scheduleOnce(function(){t.displayRewardAnimations(e)},1.5)):e()},t.prototype.setGameOverClickExtraParams=function(){P.NgcTelemetry.inst.setGameRoundOverClickedExtraParam({NGC:!0})},t.prototype.sendGameOverClickTracking=function(e){var t=e?1:0;l.default.inst.send_gameRoundOverClicked({multiplierOffer:t,ticketEarnings:null,category:null})},t.prototype.claimReward=function(e,t,n){var r=this;if(void 0===e&&(e=!1),void 0===t&&(t=!1),!this.claimButtonClicked){(N.NgcAds.inst&&N.NgcAds.inst.isFakeAdsPlatform()||g.NgcBuildConfig.offlineMode)&&(e=!1);var i=o.currentMultiplier;if(g.NgcBuildConfig.offlineMode||this.sendGameOverClickTracking(e),e){if(window.isAdsBlocked)return void T.NgcDialogManager.showAdsReminderMsg(this.claimAdsButton);o._endGameRewards.map(function(e){return e.itemID});var c=o._endGameRewards.map(function(e){return e.count});h.default.inst.showRewardVideo(h.NgcPointcuts.videoRewardDialog,null,c,null,function(t){return a(r,void 0,void 0,function(){var r,a;return s(this,function(s){switch(s.label){case 0:return t?[3,2]:[4,T.NgcDialogManager.createDialog(w.NgcMessageDialog.dialogType,w.NgcMessageDialog.urlPrefab,w.NgcMessageDialog.bundleName)];case 1:return r=s.sent(),(a=r.getComponent(w.NgcMessageDialog)).init("NGG_AD_NOT_READY"),a.show(null,this.claimAdsButton,null,null),this.claimButtonClicked=!1,[3,3];case 2:o._endGameRewards.forEach(function(e){return e.count*=i}),this.hideUIBeforeRewardAnimation(),this.updateRewardMultiplier(e),this.displayRewardAnimations(n),s.label=3;case 3:return[2]}})})})}else this.hideUIBeforeRewardAnimation(),this.updateRewardMultiplier(e),this.displayRewardAnimations(n),P.NgcTelemetry.inst.markOnboardingClaim2xVideoEvents();this.claimButtonClicked=!0}},t.prototype.updateClaimAdsButton=function(){var e=N.NgcAds.inst&&N.NgcAds.inst.isFakeAdsPlatform()||g.NgcBuildConfig.offlineMode;this.claimAdsButton.getComponentInChildren(y.NgcLabelLocalized).string=m.NgcLocalizedManager.t("DLR_CLAIM").text+(e?"":" x"+o.currentMultiplier.toString())},t.prototype.updateRewardMultiplier=function(e,t){var n=o.rewardMultiplierData();o.currentMultiplier=e?n.defaultBenefitMultiplier:Math.min(o.currentMultiplier+n.incrementalMultiplier,n.maxBenefitMultiplier),o.uploadRewardMultiplierValue(o.currentMultiplier,t)},t.prototype.addRewardItem=function(e,t,o,n){void 0===o&&(o=!1),void 0===n&&(n=1);var r=cc.instantiate(this.rewardItemPrefab).getComponent(R.NgcRewardItem);return r.initReward(e,t,!0,n),this.rewardLayoutNode.addChild(r.node),o&&(r.rewardLayout().scale=0,r.scoreValueLabel.node.opacity=0,r.playFancyAnimation(this.showConfetti.bind(this))),r},t.prototype.show=function(){this.checkShowBanner(h.NgcPointcuts.bannerRewardVideo),e.prototype.show.call(this)},t.prototype.update=function(){var e;this.claimAdsButton.pulsingEffect&&(this.claimAdsButton.scale=.98+.04*Math.sin(Date.now()*Math.PI/480)),(null===(e=u.NgcPartyRoomManager.inst)||void 0===e?void 0:e.isGameStartedFromRoom())&&!_.NgcGame.inst.forcedExit&&_.NgcGame.inst.canSkipToPartyRoom()&&255===this.claimButton.opacity&&(this.onClaimButtonClick(null,null),_.NgcGame.inst.forcedExit=!0)},t.registerEvent=function(e,t){this.customEvents[e]=t},t.callEvent=function(e,t){this.customEvents[e]&&this.customEvents[e](t)},t.claimRewards=function(e){o.callEvent("claimRewards",e)},t.clearRewards=function(){o._endGameRewards=[],o._nonDisplayEndGameRewards=[]},t.setRewards=function(e){o._endGameRewards=o._endGameRewards.concat(e.filter(function(e){return 0!=e.count}))},t.addReward=function(e){o._endGameRewards.push(e)},t.addNonDisplayReward=function(e){o._nonDisplayEndGameRewards.push(e)},t.endGameFlowConfig=function(){var e=b.default.inst&&b.default.inst.getCurGameInfo()&&b.default.inst.getCurGameInfo().gameParams||{};return o._endGameFlowConfig=e&&e.endGameFLow||{},o._endGameFlowConfig},t.canShowRetryButton=function(){var e;return!(null===(e=u.NgcPartyRoomManager.inst)||void 0===e?void 0:e.isGameStartedFromRoom())&&o.retryFlowConditionFn&&o.retryFlowConditionFn()||!1},t.setRetryFlowCondition=function(e){o.retryFlowConditionFn=e},t.setRetryFlowCallback=function(e){o.retryFlowCallback=e},t.setNormalFlowCallback=function(e){o.normalFlowCallback=e},t.setSkipRewardScreenCondition=function(e){o.skipRewardScreenCondition=e},t.canSkipRewardScreen=function(){return o.skipRewardScreenCondition&&o.skipRewardScreenCondition()||!1},t.rewardMultiplierData=function(){var e=o.endGameFlowConfig(),t={rateToDisplayVideoBtn:e.rateToDisplayVideoBtn,defaultBenefitMultiplier:e.defaultBenefitMultiplier,incrementalMultiplier:e.incrementalMultiplier,maxBenefitMultiplier:e.maxBenefitMultiplier};return o._multiplierData=t||{rateToDisplayVideoBtn:1,defaultBenefitMultiplier:2,incrementalMultiplier:1,maxBenefitMultiplier:5},o._multiplierData},t.getRewardMultiplierValue=function(e){var t=this;void 0===e&&(e=null),g.NgcBuildConfig.offlineMode?e(1):b.default.inst.serviceGet("/playerdata",null,function(n,r){n||(o.currentMultiplier=Number(JSON.parse(r).data._rewardMultiplier)||t.rewardMultiplierData().defaultBenefitMultiplier,e&&e(o.currentMultiplier))})},t.uploadRewardMultiplierValue=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var n={_rewardMultiplier:e};b.default.inst.servicePost("/playerdata",JSON.stringify(n),function(e,r){e||(o.currentMultiplier=n._rewardMultiplier,t&&t(r))})},t.urlPrefab="Reward",t.bundleName="03_end_game_flow",t.dialogType="NgcEndGameRewardDialog",t.retryFlowTriggered=!1,t.customEvents={},t._endGameRewards=[],t._nonDisplayEndGameRewards=[],t._endGameFlowConfig=null,t._multiplierData=null,t.currentMultiplier=0,t.deliveryRewardInst=null,i([k(cc.Node)],t.prototype,"rewardLayoutNode",void 0),i([k(cc.Node)],t.prototype,"claimButton",void 0),i([k(cc.Node)],t.prototype,"claimAdsButton",void 0),i([k(cc.Node)],t.prototype,"retryButton",void 0),i([k(cc.Node)],t.prototype,"backToMainMenuButton",void 0),i([k(cc.Node)],t.prototype,"ticketUINode",void 0),i([k(cc.Node)],t.prototype,"ticketDailyLimitNode",void 0),i([k(cc.Prefab)],t.prototype,"rewardItemPrefab",void 0),i([k(cc.Node)],t.prototype,"confettiLeft",void 0),i([k(cc.Node)],t.prototype,"confettiRight",void 0),o=i([E],t)}(C.NgcDialogBase);o.NgcEndGameRewardDialog=A,cc._RF.pop()},{"../../../../Scripts/GameTrackingDataHelper":"GameTrackingDataHelper","../../../../Scripts/Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../../../../Scripts/SoundManager":"SoundManager","../../../Core/Utils":"Utils","../../../GameFramework/Scripts/Ads/AdsManager_impl":"AdsManager_impl","../../../GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/NgcGame":"NgcGame","../../../GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Ads/Ads":"Ads","../../../Services/Telemetry/Telemetry":"Telemetry","../../Dialogs/Script/DialogBase":"DialogBase","../../Dialogs/Script/MessageDialog/MessageDialog":"MessageDialog","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../RealPrize/Script/RealPrizeTicketProgressTimer":"RealPrizeTicketProgressTimer","../Result/Script/RewardItem":"RewardItem"}],SCPack:[function(e,t,o){"use strict";cc._RF.push(t,"5b3deBuiF5KuJm6ADVWharN","SCPack");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),l=e("../../NanoGameCore/GameFramework/Scripts/Ads/AdsManager_impl"),u=e("../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),p=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),d=e("../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),f=e("../../NanoGameCore/Services/Ads/Ads"),h=e("../../NanoGameCore/Services/Inventory/Inventory"),g=e("../../Scripts/HSAUtils"),y=e("../TrackingManager"),m=e("../TuningData"),_=e("../UserInfo"),v=e("../Utils/ConstConfig"),S=cc._decorator,b=S.ccclass,N=S.property,P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemQuantityLable=null,t.sCPackButtonNode=null,t.getRewardAnimNode=null,t.itemQuantity=0,t.buttonEnable=!0,t}return r(t,e),t.prototype.start=function(){this.sCPackButtonNode.active=!1,this.skeleton=this.getRewardAnimNode.getComponent(sp.Skeleton),this.getRewardAnimNode.active=!1},t.prototype.setBonus=function(){m.default.inst&&m.default.inst.getGameParameters()&&(this.itemQuantity=Math.ceil(_.UserInfo.curScoreMultiplierValue*m.default.inst.getGameParameters().SCPack.default_base_value),this.itemQuantityLable.string="+"+g.default.abbrNum(this.itemQuantity,1))},t.prototype.checkShow=function(){if(m.default.inst&&m.default.inst.getGameParameters()){if(this.setBonus(),this.sCPackButtonNode.active)return;_.UserInfo.lastSCPackTime,Date.now(),_.UserInfo.lastSCPackTime;var e=!f.NgcAds.inst.isFakeAdsPlatform()&&!p.NgcBuildConfig.offlineMode&&Date.now()/1e3-_.UserInfo.lastSCPackTime>=m.default.inst.getGameParameters().SCPack.cooldown_duration&&g.default.randomFromTo(0,100)<=m.default.inst.getGameParameters().SCPack.offer_likelihood;this.sCPackButtonNode.active=e}},t.prototype.playerClickButton=function(){this.showVideoAds()},t.prototype.showVideoAds=function(){return a(this,void 0,void 0,function(){var e=this;return s(this,function(){return u.default.inst.isAdsPoincutAvailable(u.NgcPointcuts.videoCurrencyPack,f.AdsType.VideoReward)?(d.default.updateAdsInfo(),l.default.inst.show(u.NgcPointcuts.videoCurrencyPack,f.AdsType.VideoReward,v.ConstConfig.INVENTORY.ITEM_ID.COIN,this.itemQuantity,function(){},function(t){e.getReward(t)})):c.NgcDialogManager.showAdsNotAvailableMsg(this.node),[2]})})},t.prototype.getReward=function(e){var t=this;if(void 0===e&&(e=!1),this.buttonEnable=!1,this.sCPackButtonNode.active=!1,e){var o=this.getRewardAnimNode.getChildByName("itemQuantity");o.getComponent(cc.Label).string="+"+this.itemQuantity,this.getRewardAnimNode.active=!0,o.active=!0,this.stepShowAnim=2,cc.Tween.stopAllByTag(3),cc.tween(o).tag(3).delay(.03).call(function(){o.scale=1.2,o.opacity=150}).parallel(cc.tween().to(.12,{opacity:255}),cc.tween().to(.12,{scale:1.5})).delay(.03).to(.12,{scale:1}).call(function(){t.stepShowAnim-=1,t.stepShowAnim<=0&&t.closeOnClick()}).start(),this.skeleton.setAnimation(0,"Coins_double",!1),this.skeleton.setCompleteListener(function(){var e={itemID:v.ConstConfig.INVENTORY.ITEM_ID.COIN,count:t.itemQuantity};h.NgcInventory.inst&&h.NgcInventory.inst.addItemList([e],function(o){o?cc.log("Add items ERR: "+o):h.NgcInventory.inst.forceFetchInventory().then(function(){cc.systemEvent.emit("refreshInventory"),_.UserInfo.lastSCPackTime=Date.now()/1e3,t.sCPackButtonNode.active=!1,t.buttonEnable=!0,t.checkShow(),_.UserInfo.addGameIncomeCoin(e.count),y.default.getInst().LogEvent_CurrencyIncome(v.ConstConfig.CURRENCY_SOURCE.CurrencyPack,e.count,_.UserInfo.curCoin)})}),t.stepShowAnim-=1,t.stepShowAnim<=0&&t.closeOnClick()})}else c.NgcDialogManager.showAdsNotAvailableMsg(this.node),this.buttonEnable=!0,this.checkShow()},t.prototype.closeOnClick=function(){this.hideAnim()},t.prototype.hideAnim=function(){this.getRewardAnimNode.active=!1},t.prototype.update=function(){this.buttonEnable&&this.checkShow()},i([N(cc.Label)],t.prototype,"itemQuantityLable",void 0),i([N(cc.Node)],t.prototype,"sCPackButtonNode",void 0),i([N(cc.Node)],t.prototype,"getRewardAnimNode",void 0),i([b],t)}(cc.Component);o.default=P,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../NanoGameCore/GameFramework/Scripts/Ads/AdsManager_impl":"AdsManager_impl","../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../NanoGameCore/Services/Ads/Ads":"Ads","../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../Scripts/HSAUtils":"HSAUtils","../TrackingManager":"TrackingManager","../TuningData":"TuningData","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig"}],SDK:[function(e,t,o){"use strict";cc._RF.push(t,"09937qcdPNOnb4BoIRAEFS9","SDK");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSDK=void 0;var i=function(){function e(){this.preInitialized=!1,this.initialized=!1,this.loggedIn=!1}return e.prototype.preInit=function(e){return this._preInit(e)},e.prototype.init=function(e){return this._init(e)},e.prototype.login=function(){var e=this;if(this.isLoggedIn())return new Promise(function(t){t(e.getName()+" already logged in")});var t=this._login();return t.then(function(){return e.loggedIn=!0}),t},e.prototype.logout=function(){var e=this,t=this._logout();return t.then(function(){return e.loggedIn=!1}),t},e.getCurTime=function(){return e.env&&e.env.hasOwnProperty("getCurTime")?e.env.getCurTime():Date.now()},e.prototype.lazyInit=function(){return n(this,void 0,void 0,function(){return r(this,function(){return console.log("[SDK] lazyInit - "+this.getName()+" NOT support lazyLoad"),[2,Promise.resolve()]})})},Object.defineProperty(e.prototype,"isLazyLoad",{get:function(){return!1},enumerable:!1,configurable:!0}),e.env={},e}();o.NgcSDK=i,cc._RF.pop()},{}],ScanQRCodeDialog:[function(e,t,o){"use strict";cc._RF.push(t,"e3cc2vEtiBONYsdz9n71AHN","ScanQRCodeDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcScanQRCodeDialog=void 0;var c=e("jsqr"),l=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),u=e("../../../Dialogs/Script/DialogBase"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.videoPlayer=null,t.resultLabel=null,t.errorDialog=null,t.video=null,t.bannerNode=null,t._stream=null,t._disableUpdate=!1,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){this.originalDialogNode=this.dialogNode,this.originalDialogNode.active=!1,this.errorDialog.active=!1},t.prototype.tick=function(){if(!this._disableUpdate&&this.video.readyState===this.video.HAVE_ENOUGH_DATA){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=this.videoPlayer.node.width,e.height=this.videoPlayer.node.height,t.clearRect(0,0,e.width,e.height),t.drawImage(this.video,0,0,e.width,e.height);try{var o=t.getImageData(0,0,e.width,e.height),n=c.default(o.data,o.width,o.height,{inversionAttempts:"dontInvert"});n&&(this.resultLabel.string=n.data,this._onSuccessCallback(n.data),this.onClose())}catch(r){console.warn(r)}}},t.prototype.startQRScanner=function(){this.video||(this.video=document.getElementsByClassName("cocosVideo")[0]),this.video.srcObject=this._stream,this.video.play(),this.schedule(this.tick,1/o.SCAN_FPS)},t.prototype.init=function(e,t){return a(this,void 0,void 0,function(){return s(this,function(){return this._onSuccessCallback=t,this._stream=e,[2]})})},t.prototype.clearBeforeClose=function(){this.unschedule(this.tick);try{this.video.srcObject.getTracks().forEach(function(e){e.stop()})}catch(e){console.warn(e)}},t.prototype.onClose=function(){this._disableUpdate=!0,this.clearBeforeClose(),this.dialogUsingNode=null,this.hide()},t.prototype.onTryAgainBtnClick=function(){var e=this;navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(function(t){return a(e,void 0,void 0,function(){var e=this;return s(this,function(){return this._stream=t,this.originalDialogNode.active=!0,this.errorDialog.active=!1,this.dialogOpenType=null,this.scheduleOnce(function(){e.startQRScanner()},.25),[2]})})}).catch(function(){e.onClose()})},t.prototype.show=function(){this._stream?(this.dialogNode=this.originalDialogNode,this.dialogNode.active=!0,this.startQRScanner()):(this.dialogNode=this.errorDialog,this.dialogNode.active=!0)},t.prototype.rescale=function(){},t.urlPrefab="NanoImplementation/CrossFeatures/Dialogs/Prefab/ScanQRCodeDialog",t.bundleName=null,t.dialogType="ScanQRCodeDialog",t.SCAN_FPS=15,i([f(cc.VideoPlayer)],t.prototype,"videoPlayer",void 0),i([f(l.NgcLabelLocalized)],t.prototype,"resultLabel",void 0),i([f(cc.Node)],t.prototype,"errorDialog",void 0),o=i([d],t)}(u.NgcDialogBase);o.NgcScanQRCodeDialog=h,cc._RF.pop()},{"../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../Dialogs/Script/DialogBase":"DialogBase",jsqr:56}],SceneManager:[function(e,t,o){"use strict";cc._RF.push(t,"304e5OPklJB/LicTpFQO4Vr","SceneManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),s=e("./../globals"),c=e("./Enemy/EnemyControllerBase"),l=e("./Flocking/FlockManager"),u=e("./GameScripts/GameObjectMgr"),p=e("./GameScripts/GamePoolItem"),d=e("./GameScripts/PoolItemInfo"),f=e("./Player/SharkMeat"),h=e("./StartPoint"),g=cc._decorator,y=g.ccclass,m=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sharksNode=null,t.sharkMeatNode=null,t.hpOfSharksNode=null,t.helicoptersNode=null,t.flyawayTextNode=null,t.allEnemies=[],t.allClowFishes=[],t.allTunas=[],t.allMahis=[],t.allCollectibles=[],t.allObstacles=[],t._allPlayers=[],t._allHelicopters=[],t.localHumanPlayer=null,t.countFriends=0,t.maxFriends=3,t.botsList=[],t.numberPlayerAlive=0,t._blockObjects=[],t}var o;return r(t,e),o=t,t.prototype.getAllPlayer=function(){return this._allPlayers},t.prototype._findPlayerLead=function(){return this._allPlayers[0]},t.prototype.findPlayerLead=function(){return this._findPlayerLead()},t.prototype.onLoad=function(){o.inst?console.error("More than one SceneManager!!"):o.inst=this},t.prototype.update=function(){},t.prototype.addEnemy=function(e){e.enemyType!=c.EnemyType.SharkMeat&&this.allEnemies.push(e)},t.prototype.addClowFish=function(e){this.allClowFishes.push(e)},t.prototype.removeClowFish=function(e){this.allClowFishes.forEach(function(t,o,n){t.uuid===e&&n.splice(o,1)})},t.prototype.addTuna=function(e){this.allTunas.push(e)},t.prototype.removeTuna=function(e){this.allTunas.forEach(function(t,o,n){t.uuid===e&&n.splice(o,1)})},t.prototype.addMahi=function(e){this.allMahis.push(e)},t.prototype.removeMahi=function(e){this.allMahis.forEach(function(t,o,n){t.uuid===e&&n.splice(o,1)})},t.prototype.addCollectible=function(e){this.allCollectibles.push(e)},t.prototype.addObstacle=function(e){this.allObstacles.push(e)},t.prototype.getAllLocallyControlledPlayers=function(){var e=[];return this._allPlayers.forEach(function(t){(t.isLocallyControlledBot()||t.isLocalHuman())&&e.push(t)}),e},t.prototype.createPlayer=function(e){var t=s.default.PlayerController.createPlayer(e);return t.myHelicopter=this.createHelicopter(e),t.isLocalHuman()&&(this.localHumanPlayer=t,0!==t.curSize&&(s.default.Game.inst.isSBBoosterActivated=!0)),this._allPlayers.push(t),t},t.prototype.createHelicopter=function(e){var t=s.default.HelicopterController.createHelicopter(e);return this._allHelicopters.push(t),t},t.prototype.getAllHelicopter=function(){return this._allHelicopters},t.prototype.getMainPlayer=function(){return this.localHumanPlayer},t.prototype.getAllHPofShark=function(){return this.hpOfSharksNode.children},t.prototype.getAllPlayers=function(){return this._allPlayers},t.prototype.getNumPlayerAlive=function(){return this.numberPlayerAlive},t.prototype.updateNumPlayerAlive=function(){var e=this._allPlayers.length;this.getAllPlayers().forEach(function(t){t.isPlayerDie()&&e--}),this.numberPlayerAlive=e},t.prototype.getAllPlayersAsTableByID=function(){var e={};return this._allPlayers.forEach(function(t){e[t.netID]=t}),e},t.prototype._findPlayerByNetID=function(e){var t=this._allPlayers.findIndex(function(t){return t.netID===e});if(-1!=t)return this._allPlayers[t]},t.prototype.findPlayerByNetID=function(e){return this._findPlayerByNetID(e)},t.prototype.findPlayerIndexByNetID=function(e){for(var t=this._allPlayers.length,o=0;o<t;o++)if(this._allPlayers[o].netID==e)return o;return-1},t.prototype.findHelicopterIndexByNetID=function(e){for(var t=this._allHelicopters.length,o=0;o<t;o++)if(this._allHelicopters[o].HelicopterNetID==e)return o;return-1},t.prototype.destroyPlayerByID=function(e){var t=this.findPlayerIndexByNetID(e);if(!(t<0)){var o=this._allPlayers[t];this._allPlayers.splice(t,1),o.node.destroy()}},t.prototype.destroyHelicopterByID=function(e){var t=this.findHelicopterIndexByNetID(e);if(!(t<0)){var o=this._allHelicopters[t];this._allHelicopters.splice(t,1),o.node.destroy()}},t.prototype.destroyEnemyByuuid=function(e){this.allEnemies.forEach(function(t,o,n){t.node.uuid===e&&n.splice(o,1)})},t.prototype.destroyObstacleByuuid=function(e){this.allObstacles.forEach(function(t,o,n){t.node.uuid===e&&n.splice(o,1)})},t.prototype.destroyCollectibleByuuid=function(e){this.allCollectibles.forEach(function(t,o,n){t.node.uuid===e&&n.splice(o,1)})},t.prototype.removePlayer=function(e){this._allPlayers.forEach(function(t,o,n){t.node.uuid===e&&n.splice(o,1)})},t.prototype.destroyAllOpponents=function(){for(;this._allPlayers.length>0;)this._allPlayers.pop().node.destroy();this._allPlayers=[]},t.prototype.destroyAllHelicopters=function(){for(;this._allHelicopters.length>0;)this._allHelicopters.pop().node.destroy();this._allHelicopters=[]},t.prototype.destroyHumanPlayer=function(){this.localHumanPlayer&&(this.localHumanPlayer.node&&this.localHumanPlayer.node.destroy(),this.localHumanPlayer=null)},t.prototype.destroyAllEnemies=function(){for(;this.allEnemies.length>0;)this.allEnemies.pop().node.destroy();this.allEnemies=[],this.allClowFishes=[],this.allTunas=[],this.allMahis=[]},t.prototype.destroyAllObstacles=function(){for(;this.allObstacles.length>0;)this.allObstacles.pop().node.destroy();this.allObstacles=[]},t.prototype.destroyAllCollectibles=function(){for(;this.allCollectibles.length>0;)this.allCollectibles.pop().node.destroy();this.allCollectibles=[]},t.prototype.removeAllHPofSharks=function(){this.getAllHPofShark().forEach(function(e){e.destroy()})},t.prototype.getPosPlayerById=function(e){var t=cc.v2(0,0);return this._allPlayers.forEach(function(o){o.netID==e&&(t=o.getWorldPosition())}),t},t.prototype.destroyAllFlock=function(){l.default.inst.reset()},t.prototype.pushSharkMeatToPool=function(){for(var e=0;e<this.sharkMeatNode.children.length;e++){var t=this.sharkMeatNode.children[e];t&&t.getComponent(p.default).isActive&&(t.getComponent(f.default).deactive(),u.default.inst.pushFreeItem(d.PoolItemType.Meat,t))}},t.prototype.clean=function(){this.pushSharkMeatToPool(),this.destroyAllEnemies(),this.destroyAllCollectibles(),this.destroyAllOpponents(),this.destroyAllHelicopters(),this.destroyHumanPlayer(),this.removeAllHPofSharks(),this.destroyAllFlock(),h.default.freeAllStartPoints(),this.clearBotsList(),a.default.inst.onGameplayOver()},t.prototype.getPlayerEmojiWPosByID=function(e){var t=null;this._allPlayers.forEach(function(o){o.netID==e&&(t=o)});var o=cc.v2(t.getWorldPosition());return o.x+=t.node.width*Math.abs(t.node.scaleX)/2,o.y+=t.node.height*Math.abs(t.node.scaleY)/2,o},t.prototype.isPlayerDeadByID=function(e){for(var t=0;t<this._allPlayers.length;t++)if(this._allPlayers[t].netID===e)return this._allPlayers[t].isPlayerDie();return!1},t.prototype.addBlockObject=function(e){this._blockObjects.push(e)},t.prototype.getAllBlockObjects=function(){return this._blockObjects},t.prototype.addBotID=function(e){this.botsList.push(e)},t.prototype.clearBotsList=function(){this.botsList.length=0},t.inst=null,i([m(cc.Node)],t.prototype,"sharksNode",void 0),i([m(cc.Node)],t.prototype,"sharkMeatNode",void 0),i([m(cc.Node)],t.prototype,"hpOfSharksNode",void 0),i([m(cc.Node)],t.prototype,"helicoptersNode",void 0),i([m(cc.Node)],t.prototype,"flyawayTextNode",void 0),o=i([y],t)}(cc.Component);o.default=_,s.default.SceneManager=_,cc._RF.pop()},{"../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","./../globals":"globals","./Enemy/EnemyControllerBase":"EnemyControllerBase","./Flocking/FlockManager":"FlockManager","./GameScripts/GameObjectMgr":"GameObjectMgr","./GameScripts/GamePoolItem":"GamePoolItem","./GameScripts/PoolItemInfo":"PoolItemInfo","./Player/SharkMeat":"SharkMeat","./StartPoint":"StartPoint"}],ScoreMultiplierButton:[function(e,t,o){"use strict";cc._RF.push(t,"4eb3aG4g2BI3ZP+w5QSUrkh","ScoreMultiplierButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),l=e("../../NanoGameCore/GameFramework/Scripts/Ads/AdsManager_impl"),u=e("../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),p=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),d=e("../../NanoGameCore/GameFramework/Scripts/NgcScreenManager"),f=e("../../NanoGameCore/Services/Ads/Ads"),h=e("../../NanoGameCore/Services/Inventory/Inventory"),g=e("../HSAUtils"),y=e("../Sound/SoundResource"),m=e("../SoundManager"),_=e("../TrackingManager"),v=e("../TuningData"),S=e("../UserInfo"),b=e("../Utils/ConstConfig"),N=cc._decorator,P=N.ccclass,C=N.property,w=function(){function e(){this.upgradeByCoinBackground=null,this.upgradeByAdsBackground=null}return i([C(cc.SpriteFrame)],e.prototype,"upgradeByCoinBackground",void 0),i([C(cc.SpriteFrame)],e.prototype,"upgradeByAdsBackground",void 0),i([P("UpgradeButtonBackgrounds")],e)}(),T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scoreLabelNode=null,t.currentTransitionNode=null,t.newTransitionNode=null,t.upgradeButtonNode=null,t.upgradeButtonSprite=null,t.upgradeByCoin=null,t.upgradeByAds=null,t.currentScoreLabel=null,t.newScoreLabel=null,t.upgradePriceLabel=null,t.lightNode=null,t.upgradeButtonBackgrounds=null,t.playButton=null,t.maxScoreLabelWidth=0,t.lightNodeScaleUpValue=0,t.newTransitionNodeScaleUpValue=0,t.newTransitionNodeScaleUpDuration=0,t.movingScaleDownValue=0,t.movingDuration=0,t.playButtonScaleUpValue=0,t.playButtonScaleDuration=0,t.fadeInDuration=0,t._currentUpgradePrice=0,t._purchaseCount=0,t}return r(t,e),t.prototype.onLoad=function(){v.default.inst&&v.default.inst.getGameParameters()&&(this._incrementOfMultiplier=v.default.inst.getGameParameters().score_multiplier.increment_of_multiplier,this.updateUpgradePrice())},t.prototype._updateUpgradeMethod=function(){this._canUpgradeByAds()?(this.upgradeByAds.active=!0,this.upgradeByCoin.active=!1,this._incrementOfMultiplier=v.default.inst.getGameParameters().score_multiplier.increment_of_multiplier_by_ads,this.upgradeButtonSprite.spriteFrame=this.upgradeButtonBackgrounds.upgradeByAdsBackground,this._currentUpgradePrice=0):(this.upgradeByAds.active=!1,this.upgradeByCoin.active=!0,this._incrementOfMultiplier=v.default.inst.getGameParameters().score_multiplier.increment_of_multiplier,this._currentUpgradePrice=this._calculateCoinUpgradePrice(),this.upgradePriceLabel.string=g.default.abbrNum(this._currentUpgradePrice,1),this.upgradeButtonSprite.spriteFrame=this.upgradeButtonBackgrounds.upgradeByCoinBackground)},t.prototype._canUpgradeByAds=function(){var e=v.default.inst.getGameParameters().score_multiplier.purchase_threshold;return!f.NgcAds.inst.isFakeAdsPlatform()&&!p.NgcBuildConfig.offlineMode&&this._purchaseCount===e||!this._hasEnoughCoinToUpgrade()},t.prototype.updateUpgradePrice=function(){this._updateUpgradeMethod(),this._updateScoreMultipliers()},t.prototype._calculateCoinUpgradePrice=function(){var e=v.default.inst.getGameParameters().score_multiplier,t=e.base_cost,o=e.growth_rate,n=(S.UserInfo.curScoreMultiplierValue-1)/e.increment_of_multiplier;return Math.round(t*Math.pow(o,n))},t.prototype._hasEnoughCoinToUpgrade=function(){return this._calculateCoinUpgradePrice()<=S.UserInfo.curCoin},t.prototype._updateScoreMultipliers=function(){var e=S.UserInfo.curScoreMultiplierValue,t=e+this._incrementOfMultiplier;this.currentScoreLabel.string=""+e.toFixed(1),this.newScoreLabel.string=""+t.toFixed(1)},t.prototype.onPlayerClickScoreMultiplier=function(){return a(this,void 0,Promise,function(){return s(this,function(){return this._canUpgradeByAds()?u.default.inst.isAdsPoincutAvailable(u.NgcPointcuts.videoScoreMultiplier,f.AdsType.VideoReward)?this._watchAds():c.NgcDialogManager.showAdsNotAvailableMsg(this.upgradeButtonNode):this._upgradeByCoin(),[2]})})},t.prototype._updatePurchaseCountForAd=function(){var e=v.default.inst.getGameParameters().score_multiplier.purchase_threshold;this._purchaseCount<e?this._purchaseCount++:this._purchaseCount=0},t.prototype._watchAds=function(){var e=this;l.default.inst.show(u.NgcPointcuts.videoScoreMultiplier,f.AdsType.VideoReward,b.ConstConfig.INVENTORY.ITEM_ID.SM_VALUE,this._incrementOfMultiplier,function(){m.default.inst.stopMusic()},function(t){m.default.inst.playStartScreenMusic(),t?(e._updatePurchaseCountForAd(),e._playAnimation()):c.NgcDialogManager.showAdsNotAvailableMsg(e.upgradeButtonNode)})},t.prototype._playAnimation=function(){var e=this;d.default.inst.setTouchStatus(!1),y.default.inst&&m.default.inst.playSFX(y.default.inst.ScoreMultiplier);var t=this.newTransitionNode.position;this.currentTransitionNode.opacity=0,this.upgradeButtonNode.opacity=0;var o=this.playButton.convertToWorldSpaceAR(cc.v2(0,0)),n=this.newTransitionNode.convertToWorldSpaceAR(cc.v2(0,0)),r=cc.v2(o.x-n.x,o.y-n.y),i=this.lightNode.convertToWorldSpaceAR(cc.v2(0,0)),c=cc.v2(n.x-i.x,n.y-i.y),l=cc.v2(this.lightNode.x+c.x,this.lightNode.y+c.y);this.lightNode.setPosition(l),this.lightNode.active=!0;var u=this.lightNode.scale;cc.tween(this.lightNode).to(this.newTransitionNodeScaleUpDuration,{scale:this.lightNodeScaleUpValue}).call(function(){e.lightNode.scale=u,e.lightNode.active=!1}).start();var p=this.newTransitionNode.scale;cc.tween(this.newTransitionNode).to(this.newTransitionNodeScaleUpDuration,{scale:this.newTransitionNodeScaleUpValue}).to(this.movingDuration,{x:this.newTransitionNode.x+r.x,y:this.newTransitionNode.y+r.y,scale:this.movingScaleDownValue,opacity:0}).start();var f=this.playButton.scale,h=this.newTransitionNodeScaleUpDuration+.5*this.movingDuration;cc.tween(this.playButton).delay(h).to(this.playButtonScaleDuration,{scale:this.playButtonScaleUpValue}).to(this.playButtonScaleDuration,{scale:f}).delay(.5*this.movingDuration).call(function(){return a(e,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this._updateCurrentScoreMultiplier()];case 1:return e.sent(),this.newTransitionNode.position=t,this.newTransitionNode.scale=p,cc.tween(this.newTransitionNode).to(this.fadeInDuration,{opacity:255},{easing:"fade"}).start(),cc.tween(this.currentTransitionNode).to(this.fadeInDuration,{opacity:255},{easing:"fade"}).start(),cc.tween(this.upgradeButtonNode).to(this.fadeInDuration,{opacity:255},{easing:"fade"}).start(),this.scheduleOnce(function(){d.default.inst.setTouchStatus(!0)},this.fadeInDuration),[2]}})})}).start()},t.prototype._updateScoreLabelPosition=function(){this.scoreLabelNode.width>this.maxScoreLabelWidth?this.scoreLabelNode.scale=this.maxScoreLabelWidth/this.scoreLabelNode.width:this.scoreLabelNode.scale=1,this.scoreLabelNode.x=-this.currentTransitionNode.width*this.scoreLabelNode.scale*.5},t.prototype._upgradeByCoin=function(){return a(this,void 0,Promise,function(){return s(this,function(){return this._hasEnoughCoinToUpgrade()?(this._purchaseCount++,this._playAnimation()):c.NgcDialogManager.showNotEnoughCurrencyMsg(this.upgradeButtonNode),[2]})})},t.prototype.update=function(){this._updateScoreLabelPosition()},t.prototype._updateCurrentScoreMultiplier=function(){return a(this,void 0,Promise,function(){var e=this;return s(this,function(){return[2,new Promise(function(t,o){var n=g.default.round(S.UserInfo.curScoreMultiplierValue+e._incrementOfMultiplier,1);S.UserInfo.curScoreMultiplierValue=n,h.NgcInventory.inst&&h.NgcInventory.inst.consumeItem(b.ConstConfig.INVENTORY.ITEM_ID.COIN,e._currentUpgradePrice,function(r,i){if(r)return cc.log("Add items ERR: "+r),o(r);var a=JSON.parse(i).data.coin;S.UserInfo.curCoin=a.count,_.default.inst.player_upgradeMultiplier(e._currentUpgradePrice>0?"Coin":"Ads",e._currentUpgradePrice,n),h.NgcInventory.inst.addItem(b.ConstConfig.INVENTORY.ITEM_ID.SM_VALUE,e._incrementOfMultiplier,function(n){if(n)return cc.log("Add items ERR: "+n),o(n);0!==e._currentUpgradePrice&&_.default.getInst().LogEvent_BuyItem(b.ConstConfig.INVENTORY.ITEM_ID.SM_VALUE,e._incrementOfMultiplier,b.ConstConfig.INVENTORY.ITEM_ID.COIN,e._currentUpgradePrice,S.UserInfo.curCoin),S.UserInfo.addGameExpenseCoin(e._currentUpgradePrice),_.default.getInst().LogEvent_CurrencyExpense(b.ConstConfig.CURRENCY_SOURCE.ScoreMultiplier,e._currentUpgradePrice,S.UserInfo.curCoin),cc.systemEvent.emit("refreshInventory"),t()})})})]})})},i([C(cc.Node)],t.prototype,"scoreLabelNode",void 0),i([C(cc.Node)],t.prototype,"currentTransitionNode",void 0),i([C(cc.Node)],t.prototype,"newTransitionNode",void 0),i([C(cc.Node)],t.prototype,"upgradeButtonNode",void 0),i([C(cc.Sprite)],t.prototype,"upgradeButtonSprite",void 0),i([C(cc.Node)],t.prototype,"upgradeByCoin",void 0),i([C(cc.Node)],t.prototype,"upgradeByAds",void 0),i([C(cc.Label)],t.prototype,"currentScoreLabel",void 0),i([C(cc.Label)],t.prototype,"newScoreLabel",void 0),i([C(cc.Label)],t.prototype,"upgradePriceLabel",void 0),i([C(cc.Node)],t.prototype,"lightNode",void 0),i([C(w)],t.prototype,"upgradeButtonBackgrounds",void 0),i([C(cc.Node)],t.prototype,"playButton",void 0),i([C(cc.Float)],t.prototype,"maxScoreLabelWidth",void 0),i([C(cc.Float)],t.prototype,"lightNodeScaleUpValue",void 0),i([C(cc.Float)],t.prototype,"newTransitionNodeScaleUpValue",void 0),i([C(cc.Float)],t.prototype,"newTransitionNodeScaleUpDuration",void 0),i([C(cc.Float)],t.prototype,"movingScaleDownValue",void 0),i([C(cc.Float)],t.prototype,"movingDuration",void 0),i([C(cc.Float)],t.prototype,"playButtonScaleUpValue",void 0),i([C(cc.Float)],t.prototype,"playButtonScaleDuration",void 0),i([C(cc.Float)],t.prototype,"fadeInDuration",void 0),i([P],t)}(cc.Component);o.default=T,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../NanoGameCore/GameFramework/Scripts/Ads/AdsManager_impl":"AdsManager_impl","../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../../NanoGameCore/Services/Ads/Ads":"Ads","../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../HSAUtils":"HSAUtils","../Sound/SoundResource":"SoundResource","../SoundManager":"SoundManager","../TrackingManager":"TrackingManager","../TuningData":"TuningData","../UserInfo":"UserInfo","../Utils/ConstConfig":"ConstConfig"}],ScreenBase:[function(e,t,o){"use strict";cc._RF.push(t,"1eb9dTy+edAnqTgXIVW2Z98","ScreenBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.allScreens.push(this)},t.prototype.start=function(){},t.prototype.onActivate=function(){},t.prototype.onTapDown=function(){},t.prototype.onTapUp=function(){},t.prototype.onKeyDown=function(){},t.prototype.onKeyUp=function(){},t.prototype.onDeactivate=function(){},t.prototype.Activate=function(e){this.node.active=e,e?this.onActivate():this.onDeactivate()},t.allScreens=[],o=i([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],ScreenManager:[function(e,t,o){"use strict";cc._RF.push(t,"c0966BQ3JtLiqi/4Yw5n9c1","ScreenManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ScreenIDs=void 0;var a=e("../globals"),s=e("../NanoGameCore/Core/Utils"),c=e("../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager"),l=e("../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager"),u=e("../NanoGameCore/CrossFeatures/PartyRoom/Script/PartyInfoBuilder"),p=e("../NanoGameCore/CrossFeatures/TabBar/Script/NgcTabBarManager"),d=e("../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),f=e("../NanoGameCore/GameFramework/Scripts/BuildConfig"),h=e("../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),g=e("../NanoGameCore/GameFramework/Scripts/Network/NetStatsTracker"),y=e("../NanoGameCore/GameFramework/Scripts/NgcMain"),m=e("../NanoGameCore/GameFramework/Scripts/NgcScreenManager"),_=e("../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),v=e("../NanoGameCore/GameFramework/Scripts/Screens/NgcStartMain"),S=e("../NanoGameCore/SDK/Nano/NanoSrv"),b=e("../NanoGameCore/Services/Platform/Platform"),N=e("../NanoGameCore/Services/Telemetry/Telemetry"),P=e("./Main"),C=e("./Network/ImprovedNetClient"),w=e("./Screens/PartyRoomScreen/PartyRoomManager"),T=e("./UserInfo"),I=cc._decorator,R=I.ccclass;I.property,function(e){e[e.StartScreen=0]="StartScreen",e[e.ShopScreen=1]="ShopScreen",e[e.LeaderBoardScreen=2]="LeaderBoardScreen",e[e.PWFScreen=3]="PWFScreen",e[e.GameScreen=4]="GameScreen",e[e.LeaderBoardScreenPC=5]="LeaderBoardScreenPC",e[e.PrizeScreen=6]="PrizeScreen",e[e.ShopScreenPC=7]="ShopScreenPC"}(o.ScreenIDs||(o.ScreenIDs={}));var O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentScreen=null,t.delayToGameScreen=.5,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){e.prototype.onLoad.call(this),o.inst?console.error("More than one ScreenManager instance"):(this.node.on("tapDown",this.onTapDown,this),this.node.on("tapUp",this.onTapUp,this),o.inst=this,m.default.inst=this,this.init(!0))},t.prototype.init=function(t,o){void 0===t&&(t=!1),void 0===o&&(o=!0),e.prototype.init.call(this,t,o)},t.prototype.tabIdToScreenID=function(e){switch(e){case"Shop":return o.screenIDs.ShopScreen;case"Leaderboard":return o.screenIDs.LeaderBoardScreen;case"MainMenu":return o.screenIDs.StartScreen;case"PWF":return o.screenIDs.PWFScreen;case"Prize":return o.screenIDs.PrizeScreen}},t.prototype.pageOrder=function(){var e=this,t=[o.screenIDs.ShopScreen,o.screenIDs.LeaderBoardScreen,o.screenIDs.StartScreen,o.screenIDs.PWFScreen,o.screenIDs.PrizeScreen];return f.NgcBuildConfig.buildPlatform===s.Utils.enumToString(b.PlatformID,b.PlatformID.GameDistribution)&&(t=[o.screenIDs.ShopScreen,o.screenIDs.StartScreen,o.screenIDs.LeaderBoardScreen]),f.NgcBuildConfig.buildPlatform===s.Utils.enumToString(b.PlatformID,b.PlatformID.Poki)&&(t=[o.screenIDs.ShopScreen,o.screenIDs.StartScreen,o.screenIDs.LeaderBoardScreen]),f.NgcBuildConfig.buildPlatform===s.Utils.enumToString(b.PlatformID,b.PlatformID.HUZ)&&(t=[o.screenIDs.ShopScreen,o.screenIDs.StartScreen]),f.NgcBuildConfig.offlineMode&&(t=[o.screenIDs.StartScreen,o.screenIDs.ShopScreen]),this.liveOpsTabOrder&&(t=this.liveOpsTabOrder.map(function(t){return e.tabIdToScreenID(t)})),t.map(function(e){return cc.sys.isMobile?e:e===o.screenIDs.ShopScreen?o.screenIDs.ShopScreenPC:e===o.screenIDs.LeaderBoardScreen?o.screenIDs.LeaderBoardScreenPC:e})},t.prototype.screenPointcuts=function(){var t=e.prototype.screenPointcuts.call(this);return f.NgcBuildConfig.buildPlatform===s.Utils.enumToString(b.PlatformID,b.PlatformID.GameDistribution)&&(t=[d.NgcPointcuts.bannerShop,d.NgcPointcuts.bannerMainMenu,d.NgcPointcuts.bannerLeaderboard]),f.NgcBuildConfig.buildPlatform===s.Utils.enumToString(b.PlatformID,b.PlatformID.Poki)&&(t=[d.NgcPointcuts.bannerShop,d.NgcPointcuts.bannerMainMenu,d.NgcPointcuts.bannerLeaderboard]),f.NgcBuildConfig.buildPlatform===s.Utils.enumToString(b.PlatformID,b.PlatformID.HUZ)&&(t=[d.NgcPointcuts.bannerShop,d.NgcPointcuts.bannerMainMenu]),t},t.prototype.defaultPageOrder=function(){var e=[o.screenIDs.ShopScreen,o.screenIDs.LeaderBoardScreen,o.screenIDs.StartScreen,o.screenIDs.PWFScreen,o.screenIDs.PrizeScreen];return e.map(function(e){return cc.sys.isMobile?e:e===o.screenIDs.ShopScreen?o.screenIDs.ShopScreenPC:e===o.screenIDs.LeaderBoardScreen?o.screenIDs.LeaderBoardScreenPC:e})},t.prototype.gamePlayScreens=function(){return[o.screenIDs.GameScreen]},t.prototype.onBeforeInitPageview=function(){},t.prototype.onAfterInitPageview=function(){},t.prototype.disableAll=function(){},t.prototype.onTapDown=function(e){this.currentScreen&&this.currentScreen.onTapDown(e)},t.prototype.onTapUp=function(e){this.currentScreen&&this.currentScreen.onTapUp(e)},t.prototype.onKeyUp=function(e){this.currentScreen&&this.currentScreen.onKeyUp(e)},t.prototype.goToStartScreen=function(e){void 0===e&&(e=m.TransitionType.FadeIn),this.switchScreen(o.screenIDs.StartScreen,e),w.NgcPartyRoomManager.mustGoToPartyRoom()||this.scheduleOnce(function(){l.NgcNavBarManager.inst.showAllNavBar(!0)},.5),m.default.inst.tabBarInitState&&(m.default.inst.showTabBar(),p.NgcTabBarManager.inst&&p.NgcTabBarManager.inst.updateTabButtons(!1))},t.prototype.goToGameScreen=function(e){void 0===e&&(e=m.TransitionType.FadeIn),this.scheduleOnce(function(){l.NgcNavBarManager.inst.showAllNavBar(!1),o.inst.hideTabBar()},.25),b.NgcPlatform.inst&&b.NgcPlatform.inst.onStartGame(),this.switchScreen(o.screenIDs.GameScreen,e)},t.prototype.goToShopScreen=function(e,t){void 0===e&&(e=m.TransitionType.FadeIn),void 0===t&&(t=null),this.switchScreen(o.screenIDs.ShopScreen,e,t)},t.prototype.afterGoToLeaderBoardScreen=function(){var e=this;c.NgcLeaderboardManager.inst.getLeaderBoardUIComponent()?(c.NgcLeaderboardManager.inst.getLeaderBoardUIComponent().needRefreshLeaderboard&&(c.NgcLeaderboardManager.inst.getLeaderBoardUIComponent().refreshFilter(),c.NgcLeaderboardManager.inst.showLB(),c.NgcLeaderboardManager.inst.getLeaderBoardUIComponent().needRefreshLeaderboard=!1),c.NgcLeaderboardManager.inst.checkShowBanner()):this.scheduleOnce(function(){return e.afterGoToLeaderBoardScreen()})},t.prototype.goToLeaderBoardScreen=function(){cc.sys.isMobile?this.switchScreen(o.screenIDs.LeaderBoardScreen):this.switchScreen(o.screenIDs.LeaderBoardScreenPC),this.afterGoToLeaderBoardScreen()},t.prototype.beforeGoToPartyScreen=function(){var e=h.NgcCountryFlagsManager.localCountry,t=f.NgcBuildConfig.useNgcServer?C.default.inst.clientID:a.default.NetClient.inst.localPlayerNetID,o=new u.NgcPartyInfoBuilder;o.setPlayerName(_.default.localUserName).setCountry(e).setMaxPlayer(32).setMinPlayer(2).setPlayerNetID(t).setSkin(T.UserInfo.curSkin).setAvatarURL(_.default.avatarUrl).setLoginSocial(_.default.isUserLogined()).setNewUser(0==T.UserInfo.bestScore).setTimeDelayNextGame(5).setPrivate(!0).setAllowBot(!0).setAutoStartGame(!1).setJoinPayload({}).setStartPayload({}).setUpdatePayloadFuncion(function(){}).setStartGameFuncion(function(){v.default.inst.loadingNode.active=!0,N.NgcTelemetry.inst.LogEvent_BeginTimer("RoomFillingTime"),N.NgcTelemetry.inst.LogEvent_StartGame(),g.NgcNetStatsTracker.inst.beginSession(),P.Main.inst.setState(y.AppState.Game)}).setOnSocialCallBack(function(){}).setOnMultiLoginFuntion(function(){var e=_.default.gameRunningSession;cc.log("#key",e),cc.log("#UserInfo.sessionKey",_.default.sessionKey),e==_.default.sessionKey?(S.default.inst.resetUserID().finally(function(){P.Main.inst.resetData()}),cc.log("#Clear all save key because use different browser")):cc.log("#Do nothing because using the same browser")}),w.NgcPartyRoomManager.init(o)},t.prototype.afterGoToPartyScreen=function(){this.showTabBar(),this.scheduleOnce(function(){l.NgcNavBarManager.inst.showAllNavBar(!0)},1)},t.prototype.goToPartyScreen=function(){this.beforeGoToPartyScreen(),this.switchScreen(o.screenIDs.PWFScreen),this.afterGoToPartyScreen()},t.prototype.start=function(){},t.inst=null,t.screenIDs=cc.Enum({StartScreen:0,ShopScreen:1,LeaderBoardScreen:2,PWFScreen:3,GameScreen:4,LeaderBoardScreenPC:5,PrizeScreen:6,ShopScreenPC:7}),o=i([R],t)}(m.default);o.default=O,cc._RF.pop()},{"../NanoGameCore/Core/Utils":"Utils","../NanoGameCore/CrossFeatures/LeaderBoard/Script/LeaderBoardManager":"LeaderBoardManager","../NanoGameCore/CrossFeatures/NavBar/Script/NavBarManager":"NavBarManager","../NanoGameCore/CrossFeatures/PartyRoom/Script/PartyInfoBuilder":"PartyInfoBuilder","../NanoGameCore/CrossFeatures/TabBar/Script/NgcTabBarManager":"NgcTabBarManager","../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../NanoGameCore/GameFramework/Scripts/Network/NetStatsTracker":"NetStatsTracker","../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../NanoGameCore/GameFramework/Scripts/NgcScreenManager":"NgcScreenManager","../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../NanoGameCore/GameFramework/Scripts/Screens/NgcStartMain":"NgcStartMain","../NanoGameCore/SDK/Nano/NanoSrv":"NanoSrv","../NanoGameCore/Services/Platform/Platform":"Platform","../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../globals":"globals","./Main":"Main","./Network/ImprovedNetClient":"ImprovedNetClient","./Screens/PartyRoomScreen/PartyRoomManager":"PartyRoomManager","./UserInfo":"UserInfo"}],ScreenResourceLoader:[function(e,t,o){"use strict";cc._RF.push(t,"12d23ZbBxlOzplvT+95WVLd","ScreenResourceLoader");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.EScrResLoaderEvents=void 0;var i,a=e("../Performance/OffFrameTasksMgr"),s=e("../ScreenManager"),c=e("../Utils/ConstConfig"),l=e("../Utils/CustomEventEmitter");(function(e){e[e.SCREEN_PREFAB_LOADED=0]="SCREEN_PREFAB_LOADED",e[e.LOADING_SEQUENCE_FINISHED=1]="LOADING_SEQUENCE_FINISHED"})(i=o.EScrResLoaderEvents||(o.EScrResLoaderEvents={}));var u=function(e){function t(){var t=e.call(this)||this;return t._RES_PATH_MAP=new Map([[s.default.screenIDs.StartScreen,c.ConstConfig.PREFAB_URLS.StartScreen],[s.default.screenIDs.ShopScreen,c.ConstConfig.PREFAB_URLS.ShopScreen],[s.default.screenIDs.ShopScreenPC,c.ConstConfig.PREFAB_URLS.ShopScreenPC],[s.default.screenIDs.LeaderBoardScreen,c.ConstConfig.PREFAB_URLS.LeaderBoardUI],[s.default.screenIDs.LeaderBoardScreenPC,c.ConstConfig.PREFAB_URLS.LeaderBoardUI_PC],[s.default.screenIDs.PWFScreen,c.ConstConfig.PREFAB_URLS.PartyRoomScreen],[s.default.screenIDs.PrizeScreen,c.ConstConfig.PREFAB_URLS.PrizeScreen],[s.default.screenIDs.GameScreen,c.ConstConfig.PREFAB_URLS.GameScreen]]),t._LOADING_ORDER=[],s.default.inst.pageOrder().forEach(function(e){return null==s.default.inst.screenPrefabs[e]&&t._LOADING_ORDER.push(e)}),t}return r(t,e),Object.defineProperty(t,"inst",{get:function(){return this._inst||(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.startLoadScreensInSequence=function(){this._loadNextScreen()},t.prototype.loadScreen=function(e,t){var o=this._LOADING_ORDER.findIndex(function(t){return t===e});o<0?t&&t(new Error("The screen id "+e+" was being loaded or does not exist")):(this._LOADING_ORDER.splice(o,1),this._load(e,t))},t.prototype._loadNextScreen=function(){var e=this;if(this._LOADING_ORDER.length<=0)this.emit(i.LOADING_SEQUENCE_FINISHED);else{var t=this._LOADING_ORDER.shift();this._load(t,function(o,n){o?cc.error(o):a.default.inst.addTask(e.emit,e,[i.SCREEN_PREFAB_LOADED,t,n],"",!0)}),a.default.inst.addTask(this._loadNextScreen,this,[],"")}},t.prototype._load=function(e,t){var o=this._RES_PATH_MAP.get(e);if(o)cc.log("[LazyLoad] Start loading screen id "+e+" with path "+o),cc.resources.load(o,cc.Prefab,null,t);else{var n=new Error("No resource path for id "+e);t&&t(n)}},t.prototype.load=function(e,t){this._load(e,t)},t}(l.default);o.default=u,cc._RF.pop()},{"../Performance/OffFrameTasksMgr":"OffFrameTasksMgr","../ScreenManager":"ScreenManager","../Utils/ConstConfig":"ConstConfig","../Utils/CustomEventEmitter":"CustomEventEmitter"}],SelectLanguageDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d5fc2/8PulKD7UUqF4h/TwW","SelectLanguageDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSelectLanguageDialog=void 0;var a=e("../../../../../Scripts/UserInfo"),s=e("../../../../GameFramework/Scripts/Localized/LocalizedManager"),c=e("../../../../Services/Telemetry/Telemetry"),l=e("../DialogBase"),u=e("./ItemSelectLanguage"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackOk=null,t.selectedLang="",t.itemPrefab=null,t.content=null,t.items=[],t}return r(t,e),t.prototype.init=function(e){var t=this;this._callBackOk=e,s.NgcLocalizedManager.jsonData.forEach(function(e){if(e.enabled){var o=cc.instantiate(t.itemPrefab);o.parent=t.content;var n=o.getComponent(u.NgcItemSelectLanguage);n.setInfo(e.flag_url,e.name,e.code,e.code==a.UserInfo.curLanguage,function(o){t.selectedLang=o,t.items.forEach(function(t){t.isSelected=t.codeItem==e.code})}),t.items.push(n)}})},t.prototype.OkOnClick=function(){this.changeLanguageOnClick(this.selectedLang),this.closeOnClick()},t.prototype.closeOnClick=function(){this._callBackOk&&this._callBackOk(),this.hide()},t.prototype.changeLanguageOnClick=function(e){s.NgcLocalizedManager.setLanguage(e),c.NgcTelemetry.inst.LogEvent_LanguageChanged({languageCode:e})},t.prototype.show=function(){e.prototype.show.call(this),c.NgcTelemetry.inst.LogEvent_EnterScreen("LanguageSelectScreen")},t.prototype.hide=function(){e.prototype.hide.call(this),c.NgcTelemetry.inst.LogEvent_ExitScreen("LanguageSelectScreen")},t.dialogType="NgcSelectLanguageDialog",t.urlPrefab="SelectLanguage",t.bundleName="02_dialog",i([f(cc.Prefab)],t.prototype,"itemPrefab",void 0),i([f(cc.Node)],t.prototype,"content",void 0),i([d],t)}(l.NgcDialogBase);o.NgcSelectLanguageDialog=h,cc._RF.pop()},{"../../../../../Scripts/UserInfo":"UserInfo","../../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../../Services/Telemetry/Telemetry":"Telemetry","../DialogBase":"DialogBase","./ItemSelectLanguage":"ItemSelectLanguage"}],ServicesMgr:[function(e,t,o){"use strict";cc._RF.push(t,"97ec45qLp9Im5NxDVnsIQzf","ServicesMgr");var n=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcServicesMgr=void 0;var r=e("./Ads/Ads"),i=e("./DailyReward/DailyReward"),a=e("./GameShop/GameShop"),s=e("./Inventory/Inventory"),c=e("./Leaderboard/Leaderboard"),l=e("./Social/Social"),u=e("./Telemetry/Telemetry"),p=e("./Platform/Platform"),d=e("./PartyRoom/PartyRoom"),f=e("./Ads/Ads_impl_GameDistributionSrv"),h=e("./PartyRoom/PartyRoom_impl_GameServerSrv"),g=e("./Leaderboard/Leaderboard_impl_NanoSrv"),y=e("./GameShop/GameShop_impl_NanoSrv"),m=e("./Platform/Platform_impl_GameDistributionSrv"),_=e("./Inventory/Inventory_impl_NanoSrv"),v=e("./Social/Social_impl_UplaySrv"),S=e("./Telemetry/Telemetry_impl_FirebaseSrv"),b=e("./DailyReward/DailyReward_impl_NanoSrv"),N=e("../SDK/Nano/NanoSrv"),P=e("../SDK/Uplay/UplaySrv"),C=e("../SDK/GameDistribution/GameDistributionSrv"),w=cc._decorator,T=w.ccclass,I=(w.property,function(){function e(){}var t;return t=e,e.preInit=function(e){if(t.isInitialized)return new Promise(function(e){e("Services are already pre-initialized.")});var o=[];return r.NgcAds.srvInstances.push(new f.default),r.NgcAds.inst=r.NgcAds.srvInstances[0],r.NgcAds.srvInstances.forEach(function(e){return t.allServices.push(e)}),d.NgcPartyRoom.srvInstances.push(new h.default),d.NgcPartyRoom.inst=d.NgcPartyRoom.srvInstances[0],d.NgcPartyRoom.srvInstances.forEach(function(e){return t.allServices.push(e)}),c.NgcLeaderboard.srvInstances.push(new g.default),c.NgcLeaderboard.inst=c.NgcLeaderboard.srvInstances[0],c.NgcLeaderboard.srvInstances.forEach(function(e){return t.allServices.push(e)}),a.NgcGameShop.srvInstances.push(new y.default),a.NgcGameShop.inst=a.NgcGameShop.srvInstances[0],a.NgcGameShop.srvInstances.forEach(function(e){return t.allServices.push(e)}),p.NgcPlatform.srvInstances.push(new m.default),p.NgcPlatform.inst=p.NgcPlatform.srvInstances[0],p.NgcPlatform.srvInstances.forEach(function(e){return t.allServices.push(e)}),s.NgcInventory.srvInstances.push(new _.default),s.NgcInventory.inst=s.NgcInventory.srvInstances[0],s.NgcInventory.srvInstances.forEach(function(e){return t.allServices.push(e)}),l.NgcSocial.srvInstances.push(new v.default),l.NgcSocial.inst=l.NgcSocial.srvInstances[0],l.NgcSocial.srvInstances.forEach(function(e){return t.allServices.push(e)}),u.NgcTelemetry.srvInstances.push(new S.default),u.NgcTelemetry.inst=u.NgcTelemetry.srvInstances[0],u.NgcTelemetry.srvInstances.forEach(function(e){return t.allServices.push(e)}),i.NgcDailyReward.srvInstances.push(new b.default),i.NgcDailyReward.inst=i.NgcDailyReward.srvInstances[0],i.NgcDailyReward.srvInstances.forEach(function(e){return t.allServices.push(e)}),o.push((new N.default).preInit(e)),o.push((new P.default).preInit(e)),o.push((new C.default).preInit(e)),t.allServices.forEach(function(t){o.push(t.preInit(e.services))}),new Promise(function(e,n){var r=Promise.all(o);r.then(function(o){t.isPreInitialized=!0,console.log(o),e()}),r.catch(function(e){cc.error(e),n()})})},e.initServices=function(e){var o=this;if(!t.isPreInitialized)return new Promise(function(e,t){cc.error("ServicesMgr: calling initServices before preInitServices"),t()});if(t.isInitialized)return new Promise(function(e){e("Services are already initialized.")});t.buildConfig=e;var n=[];return n.push(N.default.inst.init(e)),n.push(P.default.inst.init(e)),n.push(C.default.inst.init(e)),t.allServices.forEach(function(t){n.push(t.init(e.services))}),new Promise(function(e,t){var r=Promise.all(n);r.then(function(n){if(console.log(n),o.isInitialized=!0,p.NgcPlatform.isOfflineMode())o.isLoggedIn=!0,e();else{var r=o.loginSDKs();r.then(function(t){console.log(t),o.isLoggedIn=!0,e()}),r.catch(function(e){cc.error(e),t(e)})}}),r.catch(function(e){cc.error(e),t(e)})})},e.loginSDKs=function(){if(t.isLoggedIn)return new Promise(function(e){return e()});var e=[];return null!==N.default.inst&&e.push(N.default.inst.login()),Promise.all(e)},e.allServices=[],e.isPreInitialized=!1,e.isInitialized=!1,e.isLoggedIn=!1,e.buildConfig=null,t=n([T],e)}());o.NgcServicesMgr=I,cc._RF.pop()},{"../SDK/GameDistribution/GameDistributionSrv":"GameDistributionSrv","../SDK/Nano/NanoSrv":"NanoSrv","../SDK/Uplay/UplaySrv":"UplaySrv","./Ads/Ads":"Ads","./Ads/Ads_impl_GameDistributionSrv":"Ads_impl_GameDistributionSrv","./DailyReward/DailyReward":"DailyReward","./DailyReward/DailyReward_impl_NanoSrv":"DailyReward_impl_NanoSrv","./GameShop/GameShop":"GameShop","./GameShop/GameShop_impl_NanoSrv":"GameShop_impl_NanoSrv","./Inventory/Inventory":"Inventory","./Inventory/Inventory_impl_NanoSrv":"Inventory_impl_NanoSrv","./Leaderboard/Leaderboard":"Leaderboard","./Leaderboard/Leaderboard_impl_NanoSrv":"Leaderboard_impl_NanoSrv","./PartyRoom/PartyRoom":"PartyRoom","./PartyRoom/PartyRoom_impl_GameServerSrv":"PartyRoom_impl_GameServerSrv","./Platform/Platform":"Platform","./Platform/Platform_impl_GameDistributionSrv":"Platform_impl_GameDistributionSrv","./Social/Social":"Social","./Social/Social_impl_UplaySrv":"Social_impl_UplaySrv","./Telemetry/Telemetry":"Telemetry","./Telemetry/Telemetry_impl_FirebaseSrv":"Telemetry_impl_FirebaseSrv"}],Service:[function(e,t,o){"use strict";cc._RF.push(t,"a603bhRnQJE/JPY9ZgDnuCN","Service"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcService=void 0;var n=cc._decorator,r=(n.ccclass,n.property,function(){function e(){}return e.prototype.lazyInit=function(){return cc.warn("[NgcService] lazyInit - service "+this.getName()+" NOT support lazyLoad"),null},e}());o.NgcService=r,cc._RF.pop()},{}],SharkMeat:[function(e,t,o){"use strict";cc._RF.push(t,"4a954GH4bxLhrV492S62ONS","SharkMeat");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.Moving_down=void 0;var a=e("../Enemy/EnemyControllerBase"),s=e("../GameScripts/GamePoolItem"),c=cc._decorator,l=c.ccclass;c.property,o.Moving_down="Moving_down";var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dir=-1,t.id=0,t}return r(t,e),t.prototype.onLoad=function(){this.node.getComponent(cc.BoxCollider).enabled=!1,e.prototype.onLoad.call(this)},t.prototype.start=function(){e.prototype.start.call(this)},t.prototype.active=function(){var e=this;this.node.active=!0,this.node.scale=0,this.flyOut(),this.scheduleOnce(function(){e.node.getComponent(cc.BoxCollider).enabled=!0},1)},t.prototype.deactive=function(){this.node.getComponent(cc.BoxCollider).enabled=!1},t.prototype.setDirection=function(e,t){this.dir=e,this.id=t},t.prototype.flyOut=function(){var e=this;this.id,cc.tween(this.node).parallel(cc.tween().by(1,{angle:180*-this.dir}),cc.tween().by(.2,{position:cc.v2(300*Math.random()-150,300*Math.random()-150)}),cc.tween().to(.2,{scale:.5})).call(function(){e.setState(o.Moving_down)}).start()},t.prototype.update=function(e){this.getComponent(s.default).isActive&&(this.work(e),this.curState,a.State_OffScreen)},t.prototype.work=function(t){if(!e.prototype.work.call(this,t))return!1;switch(this.curState){case o.Moving_down:this._work_state_moving_down(t)}this._workstate_MagnetEffect(t)},t.prototype.setState=function(t){t===a.State_Swim&&(this._curSpeed=this.startSpeed,t=o.Moving_down),e.prototype.setState.call(this,t)},t.prototype._work_state_moving_down=function(e){this.applyMovement(e,cc.v2(0,-1))},i([l],t)}(a.default);o.default=u,cc._RF.pop()},{"../Enemy/EnemyControllerBase":"EnemyControllerBase","../GameScripts/GamePoolItem":"GamePoolItem"}],ShopScreen:[function(e,t,o){"use strict";cc._RF.push(t,"3ae7eSbDhpBbK9ngSOBPsNd","ShopScreen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ShopScreen=void 0;var a=e("../../../NanoGameCore/GameFramework/Scripts/NgcShopManager"),s=e("../../../NanoGameCore/GameFramework/Scripts/Screens/NgcShopScreen"),c=e("../../../NanoGameCore/Services/Inventory/Inventory"),l=e("../../HSAUtils"),u=e("../../Player/PlayerAnim"),p=e("../../UI/InfoType_Popup"),d=e("../../UI/NameBar"),f=e("../../UserInfo"),h=e("../../Utils/ConstConfig"),g=e("../MainScreen"),y=cc._decorator,m=y.ccclass,_=y.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.infoType_Popup=null,t.nameBar=null,t.playerParent=null,t.player=null,t.coinNumber=null,t.starNumber=null,t}return r(t,e),t.prototype.onLoad=function(){this.itemContainerParent&&(e.prototype.onLoad.call(this),this.attachDefaultPreviewObject(),this.getShopManager().registerCurrencyUpdate(["coin"],this.onCurrencyUpdate.bind(this)),this.getShopManager().registerItemPreviewCallback(this.onItemPreview.bind(this)),this.getShopManager().registerItemEquipCallback(this.onItemEquip.bind(this)))},t.prototype.attachDefaultPreviewObject=function(){cc.log("attachDefaultPreviewObject")},t.prototype.onAfterReloadShopDataAfterSocialCallback=function(){this._shopManager.updateShop(),this._itemContainer.reselectCurrentTab()},t.prototype.onCurrencyUpdate=function(){var e=this;c.NgcInventory.inst.getItemCount("coin",function(t,o){t||(e.coinNumber.string=l.default.abbrNum(o.count,1),f.UserInfo.curCoin=o.count)})},t.prototype.onItemPreview=function(e){var t=e.split("_")[0],o=g.default.getSharkInfoArrIdBySkinName(t);if(o>=0){var n=h.ConstConfig.SHARK_DATABASE[o].type,r="Brawler"===n?0:"Charger"===n?1:2;this.infoType_Popup.changeSharkType(r),this.nameBar.UpdateNameBar(o,r),this.player.skeleton.setSkin(h.ConstConfig.SHARK_DATABASE[o].name)}},t.prototype.onItemEquip=function(e){g.default.inst.equipSkin(e),a.NgcShopManager.getInstance().updateEquippedItemList([e])},i([_(p.default)],t.prototype,"infoType_Popup",void 0),i([_(d.default)],t.prototype,"nameBar",void 0),i([_(cc.Node)],t.prototype,"playerParent",void 0),i([_(u.default)],t.prototype,"player",void 0),i([_(cc.Label)],t.prototype,"coinNumber",void 0),i([_(cc.Label)],t.prototype,"starNumber",void 0),i([m],t)}(s.NgcShopScreen);o.ShopScreen=v,cc._RF.pop()},{"../../../NanoGameCore/GameFramework/Scripts/NgcShopManager":"NgcShopManager","../../../NanoGameCore/GameFramework/Scripts/Screens/NgcShopScreen":"NgcShopScreen","../../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../HSAUtils":"HSAUtils","../../Player/PlayerAnim":"PlayerAnim","../../UI/InfoType_Popup":"InfoType_Popup","../../UI/NameBar":"NameBar","../../UserInfo":"UserInfo","../../Utils/ConstConfig":"ConstConfig","../MainScreen":"MainScreen"}],SimpleBoosterUI:[function(e,t,o){"use strict";cc._RF.push(t,"9e804q0Kr9IbYHT5+EaKudy","SimpleBoosterUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../NanoGameCore/Services/Inventory/Inventory"),s=e("../../UserInfo"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boosterSprite=null,t}return r(t,e),t.prototype.onLoad=function(){this.clearSpriteFrames()},t.prototype.clearSpriteFrames=function(){this.boosterSprite.spriteFrame=null},t.prototype.updateUI=function(){var e=this,t=s.UserInfo.curBooster;if(t){var o=a.NgcInventory.inst.itemTable[t].picture;cc.loader.loadRes(o,cc.SpriteFrame,function(t,o){t||(e.boosterSprite.spriteFrame=o)})}},i([u(cc.Sprite)],t.prototype,"boosterSprite",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../UserInfo":"UserInfo"}],SimpleCharacterPreview:[function(e,t,o){"use strict";cc._RF.push(t,"4a2f2re7/tEk6M28bDsFLCS","SimpleCharacterPreview");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../NanoGameCore/GameFramework/Scripts/NgcMain"),s=e("../../../NanoGameCore/GameFramework/Scripts/Screens/NgcStartMain"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.onMainCharacterClick=function(){a.NgcMain.inst.appState!==a.AppState.ShopScreen&&s.default.inst.redirectToShop()},t.inst=null,o=i([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../../../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../../../NanoGameCore/GameFramework/Scripts/Screens/NgcStartMain":"NgcStartMain"}],SimpleEquipUI:[function(e,t,o){"use strict";cc._RF.push(t,"4e5c9gfmPxFiYUNDtcApV9i","SimpleEquipUI");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../NanoGameCore/Services/Inventory/Inventory"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.headSprite=null,t.faceSprite=null,t.bodySprite=null,t}return r(t,e),t.prototype.onLoad=function(){this.clearSpriteFrames()},t.prototype.clearSpriteFrames=function(){this.headSprite.spriteFrame=null,this.faceSprite.spriteFrame=null,this.bodySprite.spriteFrame=null},t.prototype.updateUI=function(e){var t=this;this.clearSpriteFrames();var o=a.NgcInventory.inst.itemTable;cc.loader.loadRes(o[e.head].picture,cc.SpriteFrame,function(e,o){e||(t.headSprite.spriteFrame=o)}),cc.loader.loadRes(o[e.face].picture,cc.SpriteFrame,function(e,o){e||(t.faceSprite.spriteFrame=o)}),cc.loader.loadRes(o[e.body].picture,cc.SpriteFrame,function(e,o){e||(t.bodySprite.spriteFrame=o)})},t.inst=null,i([l(cc.Sprite)],t.prototype,"headSprite",void 0),i([l(cc.Sprite)],t.prototype,"faceSprite",void 0),i([l(cc.Sprite)],t.prototype,"bodySprite",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../NanoGameCore/Services/Inventory/Inventory":"Inventory"}],SimpleGamePlayerHandler:[function(e,t,o){"use strict";cc._RF.push(t,"a1ab95alxNEUrzBZZiMFVAq","SimpleGamePlayerHandler");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerName=null,t.flagSprite=null,t}return r(t,e),i([l(a.NgcLabelLocalized)],t.prototype,"playerName",void 0),i([l(cc.Sprite)],t.prototype,"flagSprite",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized"}],SimpleGameScreen:[function(e,t,o){"use strict";cc._RF.push(t,"d16b7XBZCtNPLAXwoaFObLq","SimpleGameScreen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../NanoGameCore/CrossFeatures/GameMode/Script/NgcGameModeManager"),s=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase"),l=e("./SimpleGame"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.modeNameLabel=null,t.gameInstance=null,t}return r(t,e),t.prototype.onLoad=function(){this.node.active=!1,this.gameInstance=this.getComponent(l.default)},t.prototype.onActivate=function(){e.prototype.onActivate.call(this),a.NgcGameModeManager.inst.selectedModeId?this.modeNameLabel.string="Mode: "+a.NgcGameModeManager.inst.selectedModeId:this.modeNameLabel.string="Mode: Normal",this.gameInstance.begin()},t.prototype.onDeactivate=function(){e.prototype.onDeactivate.call(this),this.gameInstance.onLeaveGame()},t.prototype.start=function(){},t.prototype.update=function(){},i([d(s.NgcLabelLocalized)],t.prototype,"modeNameLabel",void 0),i([p],t)}(c.default);o.default=f,cc._RF.pop()},{"../../../NanoGameCore/CrossFeatures/GameMode/Script/NgcGameModeManager":"NgcGameModeManager","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/NgcScreenBase":"NgcScreenBase","./SimpleGame":"SimpleGame"}],SimpleGame:[function(e,t,o){"use strict";cc._RF.push(t,"b84939UsLROv6Bxilak+Fv/","SimpleGame");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SimplePlayer=o.PlayerState=o.GamePlayState=void 0;var a,s=e("../../../NanoGameCore/Core/Utils"),c=e("../../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager"),l=e("../../../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/NgcRevive"),u=e("../../../NanoGameCore/CrossFeatures/EndGameFlow/Reward/RewardUI"),p=e("../../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages"),d=e("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),f=e("../../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager"),h=e("../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized"),g=e("../../../NanoGameCore/GameFramework/Scripts/Network/NetUtils"),y=e("../../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClientRefactor"),m=e("../../../NanoGameCore/GameFramework/Scripts/NgcGame"),_=e("../../../NanoGameCore/GameFramework/Scripts/NgcMain"),v=e("../../../NanoGameCore/GameFramework/Scripts/Screens/NgcStartMain"),S=e("../../../NanoGameCore/Services/Platform/Platform"),b=e("../../../NanoGameCore/Services/Telemetry/Telemetry"),N=e("../../Network/ImprovedNetClient"),P=e("../../UserInfo"),C=e("../PartyRoomScreen/PartyRoomManager"),w=e("../StartScreen/SimpleBoosterUI"),T=e("./SimpleGamePlayerHandler"),I=cc._decorator,R=I.ccclass,O=I.property;(function(e){e[e.AddingPlayers=0]="AddingPlayers",e[e.Playing=1]="Playing",e[e.GameOver=2]="GameOver"})(o.GamePlayState||(o.GamePlayState={})),function(e){e[e.Alive=0]="Alive",e[e.Dead=1]="Dead",e[e.FinishedGamePlay=2]="FinishedGamePlay"}(a=o.PlayerState||(o.PlayerState={}));var E=function(){function e(){this._isLeader=!0,this._canBeSpectated=!0,this.reviveUsed=!1,this.isLocalPlayer=!1,this.netID="",this.playerName="",this.playerNode=null,this.currentStatus=null,this.nextCurStateMsgID=0}return e.prototype.getNetID=function(){return this.netID},e.prototype.getName=function(){return this.isLocalPlayer?_.NgcMain.inst.localUserName:this.playerName},e.prototype.getCountryFlag=function(){var e=f.NgcCountryFlagsManager.localCountry;return f.NgcCountryFlagsManager.inst.getFlagSpriteFrame(e)},e.prototype.isRealHuman=function(){return-1===this.playerName.indexOf("Bot")},e.prototype.isFinishGameplay=function(){return this.currentStatus===a.FinishedGamePlay},e.prototype.getTotalScore=function(){return 0},e.prototype.getWorldPosition=function(){return s.Utils.getWorldPos(this.playerNode)},e.prototype.setPlayerNode=function(e){this.playerNode=e},e.prototype.getCurGameState=function(){var e={name:this.getName(),stateMsgID:this.nextCurStateMsgID,netID:this.getNetID(),lastState:this.currentStatus};return this.nextCurStateMsgID+=1,e},e.prototype.setState=function(e){if(this.currentStatus!==e)switch(this.currentStatus=e,e){case a.Alive:this._canBeSpectated=!0;break;case a.Dead:case a.FinishedGamePlay:this._canBeSpectated=!1}},e.prototype.isDead=function(){return this.currentStatus===a.Dead},e.prototype.setWorldPosition=function(){},e}();o.SimplePlayer=E;var k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gamePlayerPrefab=null,t.playersLayout=null,t.parentForEmojis=null,t.parentForBubble=null,t.notifyScrollView=null,t.scoreLayout=null,t.notifyPool=[],t.dieBtnClick=!1,t.addedPlayers={},t.isGameStarting=!1,t.startGamePlayStartTime=null,t.localPlayer=null,t.localPlayerNetID=null,t.totalScore=0,t.totalCoin=0,t.playerRank=0,t.playtime=0,t.offlineTotalBot=15,t.allPlayers=[],t}return r(t,e),t.prototype.createPlayer=function(e,t){var o=new E;return o.netID=e,o.playerName=t,this.allPlayers.push(o),o.setState(a.Alive),o},t.prototype.destroyPlayers=function(){this.allPlayers=[]},t.prototype.depopulate=function(){this.destroyPlayers()},t.prototype._findPlayerByNetID=function(e){var t=e.split(":")[1];return t?this.findPlayerByID(t):this.findPlayerByID(e)},t.prototype.findPlayerByID=function(e){return this.allPlayers.filter(function(t){return t.getNetID()===e})[0]},t.prototype._findPlayerLead=function(){return this.allPlayers.filter(function(e){return e._isLeader})[0]},t.prototype.getAllPlayer=function(){return this.allPlayers},t.prototype.init=function(){c.NgcEmotesManager.inst.allowScrollView(!0);var e={getPlayerEmojiPosByID:this.getPosEmojiForPlayerById.bind(this),checkPlayerIsDeadByID:this.isPlayerDead.bind(this),parentForBubble:this.parentForBubble,parentForEmojis:this.parentForEmojis};c.NgcEmotesManager.inst.init(e),c.NgcEmotesManager.inst.allowScrollView(!0),c.NgcEmotesManager.inst.extendEmotesUI(!0)},t.prototype.getLocalPlayer=function(){var e=this.findPlayerByNetID(S.NgcPlatform.isOfflineMode()?this.getLocalPlayerNetID():y.NgcNetClientRefactor.inst.getCombinedNetID());return this.localPlayer=e,e},t.prototype.addNotification=function(e){var t=cc.instantiate(this.notifyScrollView.content.children[0]);t.getComponent(cc.Label).string=e,this.notifyScrollView.content.addChild(t),this.notifyScrollView.scrollToBottom(.1),this.notifyPool.push(t)},t.prototype.onDieBtnClick=function(){this.isGameStarting&&(this.dieBtnClick||(this.dieBtnClick=!0,this.getLocalPlayer().reviveUsed?this.gameOver():(this.getLocalPlayer().setState(a.Dead),this.showRevive())))},t.prototype.onAddScoreBtnClick=function(e,t){this.totalScore+=+t,this.updateUI()},t.prototype.onAddCoinBtnClick=function(e,t){this.totalCoin+=+t,this.updateUI()},t.prototype.updateUI=function(){this.scoreLayout.children[0].getComponent(h.NgcLabelLocalized).string="Score: "+this.totalScore,this.scoreLayout.children[1].getComponent(h.NgcLabelLocalized).string="Coin: "+this.totalCoin},t.prototype.showRevive=function(){l.default.inst.showReviveDialog()},t.prototype.addScoresToResultScreen=function(e){var t=+this.scoreLayout.children[2].getComponent(cc.EditBox).string||1;e.addScoreItem("Score",this.totalScore,!0),e.addScoreItem("Rank",t,!1,"#"),e.addScoreItem("Coin",this.totalCoin,!0),e.addCrown(t),this.playerRank=t,this.playtime=this.getGamePlayTime()},t.prototype.getPosEmojiForPlayerById=function(e){return(d.NgcBuildConfig.offlineMode?this.getLocalPlayer():this.findPlayerByNetID(e)).getWorldPosition().add(cc.v2(50,50))},t.prototype.isPlayerDead=function(e){var t=this.findPlayerByNetID(e);return!!t&&(t.isDead()||t.isFinishGameplay())},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),cc.systemEvent.on("onGameStartingStatus",this.onGameStartingStatusMessageHandle.bind(this)),cc.systemEvent.on("onCreateBot",this.onCreateBotMessageHandle.bind(this)),cc.systemEvent.on("onServerFullGameState",this.onServerFullGameStateHandle.bind(this))},t.prototype.setMandatoryCallbacks=function(){l.default.inst.setReviveFunctions(this.canApplyRevive.bind(this),this.acceptReviveOffer.bind(this),this.refuseReviveOffer.bind(this)),u.NgcEndGameRewardDialog.setSkipRewardScreenCondition(this.skipRewardCondition.bind(this)),u.NgcEndGameRewardDialog.setRetryFlowCondition(this.retryFlowCondition.bind(this)),u.NgcEndGameRewardDialog.setRetryFlowCallback(this.onRetryFlowFinish.bind(this)),u.NgcEndGameRewardDialog.setNormalFlowCallback(this.onNormalFlowFinish.bind(this))},t.prototype.onGameStartingStatusMessageHandle=function(e){e&&(e.playerList,this.curGameNetID=e.gameID)},t.prototype.onCreateBotMessageHandle=function(e){var t=e.botID,o=this.createPlayer(t,"Bot "+t);this.addedPlayers[t]=!0,this.addNotification("Add Bot ("+o.getNetID()+")"),this.addPlayerObject(o)},t.prototype.checkStartGamePlay=function(){this.isGameStarting||(this.startGamePlayStartTime=Date.now(),this.addNotification("Game Start!"),this.onGamePlayStart(),this.startSpectatorView(),this.isGameStarting=!0)},t.prototype.onServerFullGameStateHandle=function(e){var t=this;this.checkStartGamePlay(),this.isGameStarting=!0,e.gameID==this.curGameNetID&&e.playerState.forEach(function(e){e.name;var o=e.netID,n=e.lastState,r=t.findPlayerByNetID(o);r&&r.getNetID()!==t.getLocalPlayer().getNetID()&&r.setState(n)})},t.prototype.skipRewardCondition=function(){return 0===this.totalCoin},t.prototype.retryFlowCondition=function(){var e=u.NgcEndGameRewardDialog.endGameFlowConfig();return e.lowSCFlow?this.totalCoin<e.lowSCLimit:e.earlyDeadFlow?this.playtime<e.earlyDeathLimit:!!e.rankFlow&&this.playerRank>e.retryThresholdRank},t.prototype.onRetryFlowFinish=function(){_.NgcMain.inst.reset(),setTimeout(function(){v.default.inst.enterGame()},500)},t.prototype.onNormalFlowFinish=function(){_.NgcMain.inst.reset()},t.prototype.canApplyRevive=function(){return!0},t.prototype.acceptReviveOffer=function(){this.getLocalPlayer().reviveUsed=!0,this.getLocalPlayer().setState(a.Alive),this.dieBtnClick=!1,cc.log("Accept offer")},t.prototype.refuseReviveOffer=function(){this.gameOver(),cc.log("Refuse offer")},t.prototype.begin=function(){var e=this;if(this.init(),this.isGameStarting=!1,this.dieBtnClick=!1,this.totalScore=0,this.totalCoin=0,S.NgcPlatform.isOfflineMode()){this.localPlayerNetID=this.generateFakeNetID();var t=this.createPlayer(this.getLocalPlayerNetID(),_.NgcMain.inst.localUserName);this.addNotification("Offline Mode Activated"),this.addNotification("Add player ("+t.getNetID()+") : "+t.getName()),this.addPlayerObject(t);var o=0,n=setInterval(function(){var t=e.generateFakeNetID(),r=e.createPlayer(t,"Bot #"+o);e.addNotification("Add Bot ("+t+")"),e.addPlayerObject(r),(o+=1)>=e.offlineTotalBot&&(e.checkStartGamePlay(),clearInterval(n))},250)}else C.NgcPartyRoomManager.inst&&C.NgcPartyRoomManager.inst.isGameStartedFromRoom()?d.NgcBuildConfig.useNgcServer&&N.default.inst.joinGame():N.default.inst&&N.default.inst.isConnected()&&N.default.inst.joinGame();this.onGameQueueStart(),this.applyBooster()},t.prototype.getLocalPlayerNetID=function(){return this.localPlayerNetID},t.prototype.generateFakeNetID=function(){return g.NgcNetUtils.generateRandomUUID()},t.prototype.applyBooster=function(){P.UserInfo.curBooster&&(this.addNotification("Booster applied: "+P.UserInfo.curBooster),this.node.getComponentInChildren(w.default).updateUI(),P.UserInfo.curBooster="")},t.prototype.reset=function(){this.playersLayout.node.destroyAllChildren(),this.addedPlayers={}},t.prototype.addPlayerObject=function(e){var t=cc.instantiate(this.gamePlayerPrefab),o=t.getComponent(T.default);o.playerName.string=e.getName(),o.flagSprite.spriteFrame=e.getCountryFlag(),this.playersLayout.node.addChild(t),this.playersLayout.updateLayout(),e.setPlayerNode(t)},t.prototype._gameOver=function(){this.getLocalPlayer().setState(a.FinishedGamePlay),p.default.inst.onGameplayOver()},t.prototype.setEndGameRewards=function(){u.NgcEndGameRewardDialog.setRewards([{itemID:"coin",count:this.totalCoin}])},t.prototype._onBeforeGameQueueStart=function(){b.NgcTelemetry.inst.setGameQueueStartExtraParam({NGC:!0})},t.prototype._onBeforeGameRoundStart=function(){b.NgcTelemetry.inst.setGameRoundStartExtraParam({NGC:!0})},t.prototype.getSpectatorParrent=function(){return this.node.getChildByName("SpectatorParent")},t.prototype.uploadBestScore=function(){_.NgcMain.inst.uploadBestScore(this.totalScore)},t.prototype.getGamePlayTime=function(){return(Date.now()-this.startGamePlayStartTime)/1e3},t.prototype.onLeaveGame=function(){cc.systemEvent.off("onGameStartingStatus",this.onGameStartingStatusMessageHandle.bind(this)),cc.systemEvent.off("onCreateBot",this.onCreateBotMessageHandle.bind(this)),cc.systemEvent.off("onServerFullGameState",this.onServerFullGameStateHandle.bind(this)),this.depopulate(),this.reset()},i([O(cc.Prefab)],t.prototype,"gamePlayerPrefab",void 0),i([O(cc.Layout)],t.prototype,"playersLayout",void 0),i([O(cc.Node)],t.prototype,"parentForEmojis",void 0),i([O(cc.Node)],t.prototype,"parentForBubble",void 0),i([O(cc.ScrollView)],t.prototype,"notifyScrollView",void 0),i([O(cc.Node)],t.prototype,"scoreLayout",void 0),i([R],t)}(m.NgcGame);o.default=k,cc._RF.pop()},{"../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/CrossFeatures/Emojis/Script/EmotesManager":"EmotesManager","../../../NanoGameCore/CrossFeatures/EndGameFlow/Revive/Script/NgcRevive":"NgcRevive","../../../NanoGameCore/CrossFeatures/EndGameFlow/Reward/RewardUI":"RewardUI","../../../NanoGameCore/CrossFeatures/TechMessage/Script/TechMessages":"TechMessages","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../../../NanoGameCore/GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../NanoGameCore/GameFramework/Scripts/Network/NetUtils":"NetUtils","../../../NanoGameCore/GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../../../NanoGameCore/GameFramework/Scripts/NgcGame":"NgcGame","../../../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../../../NanoGameCore/GameFramework/Scripts/Screens/NgcStartMain":"NgcStartMain","../../../NanoGameCore/Services/Platform/Platform":"Platform","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../../Network/ImprovedNetClient":"ImprovedNetClient","../../UserInfo":"UserInfo","../PartyRoomScreen/PartyRoomManager":"PartyRoomManager","../StartScreen/SimpleBoosterUI":"SimpleBoosterUI","./SimpleGamePlayerHandler":"SimpleGamePlayerHandler"}],SimpleShopScreen:[function(e,t,o){"use strict";cc._RF.push(t,"06282YrlgFIKoZQKCOy1MGp","SimpleShopScreen");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../NanoGameCore/GameFramework/Scripts/Screens/NgcShopScreen"),s=e("../../../NanoGameCore/Services/Inventory/Inventory"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.coinNumber=null,t.starNumber=null,t.playerPreview=null,t.equipUI=null,t.previewSkin=null,t}return r(t,e),t.prototype.onLoad=function(){this.itemContainerParent&&(e.prototype.onLoad.call(this),this.attachDefaultPreviewObject(),this.getShopManager().registerCurrencyUpdate(["coin","star"],this.onCurrencyUpdate_NGCExample.bind(this)),this.getShopManager().registerItemPreviewCallback(this.onItemPreview_NGCExample.bind(this)),this.getShopManager().registerItemEquipCallback(this.onItemEquip_NGCExample.bind(this)))},t.prototype.attachDefaultPreviewObject=function(){},t.prototype.onAfterReloadShopDataAfterSocialCallback=function(){},t.prototype.onCurrencyUpdate_NGCExample=function(){var e=this;s.NgcInventory.inst.getItemCount("coin",function(t,o){t||(e.coinNumber.string=""+o.count)}),s.NgcInventory.inst.getItemCount("star",function(t,o){t||(e.starNumber.string=""+o.count)})},t.prototype.onItemPreview_NGCExample=function(e){var t=this.previewSkin;t[e.split("_")[0]]=e,this.equipUI.updateUI(t)},t.prototype.onItemEquip_NGCExample=function(){},i([u(cc.Label)],t.prototype,"coinNumber",void 0),i([u(cc.Label)],t.prototype,"starNumber",void 0),i([l],t)}(a.NgcShopScreen);o.default=p,cc._RF.pop()},{"../../../NanoGameCore/GameFramework/Scripts/Screens/NgcShopScreen":"NgcShopScreen","../../../NanoGameCore/Services/Inventory/Inventory":"Inventory"}],SingleItemAsset:[function(e,t,o){"use strict";cc._RF.push(t,"72e39wQDbBDS4o+M2u8/WTL","SingleItemAsset");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SingleItemAsset=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundUnlockedBrandNew=null,t.backgroundUnlockedUnselected=null,t.backgroundUnlockedSelected=null,t.backgroundLockedUnselected=null,t.backgroundLockedSelected=null,t.flashAnimation=null,t}return r(t,e),Object.defineProperty(t.prototype,"EnableFlash",{set:function(e){this.flashAnimation.node.active=e,e?this.flashAnimation.play():this.flashAnimation.stop()},enumerable:!1,configurable:!0}),i([c(cc.SpriteFrame)],t.prototype,"backgroundUnlockedBrandNew",void 0),i([c(cc.SpriteFrame)],t.prototype,"backgroundUnlockedUnselected",void 0),i([c(cc.SpriteFrame)],t.prototype,"backgroundUnlockedSelected",void 0),i([c(cc.SpriteFrame)],t.prototype,"backgroundLockedUnselected",void 0),i([c(cc.SpriteFrame)],t.prototype,"backgroundLockedSelected",void 0),i([c(cc.Animation)],t.prototype,"flashAnimation",void 0),i([s],t)}(cc.Component);o.SingleItemAsset=l,cc._RF.pop()},{}],SingleItemType1:[function(e,t,o){"use strict";cc._RF.push(t,"268d8fPIVNHB4NOtq+3G3mO","SingleItemType1");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SingleItemType1=void 0;var a=e("./SingleItem"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getDisplayType=function(){return"type1"},i([c],t)}(a.SingleItem));o.SingleItemType1=l,cc._RF.pop()},{"./SingleItem":"SingleItem"}],SingleItemType2:[function(e,t,o){"use strict";cc._RF.push(t,"ce75cAOLatG8rzXR2HAnP5U","SingleItemType2");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SingleItemType2=void 0;var a=e("./SingleItem"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getDisplayType=function(){return"type2"},i([c],t)}(a.SingleItem));o.SingleItemType2=l,cc._RF.pop()},{"./SingleItem":"SingleItem"}],SingleItemType3:[function(e,t,o){"use strict";cc._RF.push(t,"f31famkdhFIIKA7ux9JlWqS","SingleItemType3");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SingleItemType3=void 0;var a=e("./SingleItem"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getDisplayType=function(){return"type3"},i([c],t)}(a.SingleItem));o.SingleItemType3=l,cc._RF.pop()},{"./SingleItem":"SingleItem"}],SingleItemTypeEdge:[function(e,t,o){"use strict";cc._RF.push(t,"8ee27AGh/lKeb0EL5Wf4jZ0","SingleItemTypeEdge");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SingleItemTypeEdge=void 0;var a=e("./SingleItem"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.getDisplayType=function(){return"typeEdge"},i([c],t)}(a.SingleItem));o.SingleItemTypeEdge=l,cc._RF.pop()},{"./SingleItem":"SingleItem"}],SingleItem:[function(e,t,o){"use strict";cc._RF.push(t,"58916PnGttEgadq51DTd0fj","SingleItem");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SingleItem=void 0;var a=e("../../../../Core/ResizableComponent"),s=e("../../../../GameFramework/Scripts/Localized/LabelLocalized"),c=e("../../../../GameFramework/Scripts/NgcShopManager"),l=e("../AssetComponent/SingleItemAsset"),u=e("../ItemStatus/ItemStatus"),p=e("./ItemShop"),d=cc._decorator,f=d.ccclass,h=d.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.itemInfoLayout=null,t.itemPicture=null,t.itemName=null,t.purchaseMethodParent=null,t.edgeLabel=null,t._singleItemAsset=null,t}return r(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._singleItemAsset=this.node.getComponent(l.SingleItemAsset),this.initItemPictureDesignSize(),this.initItemInfoLayoutDesignPosition()},t.prototype.initItemPictureDesignSize=function(){var e=a.ResizableComponent.getResizableComponent(this.itemPicture.node);e.baseSize&&(e.baseSize.designWidth=this.itemPicture.node.width,e.baseSize.designHeight=this.itemPicture.node.height)},t.prototype.initItemInfoLayoutDesignPosition=function(){if(this.itemInfoLayout){var e=a.ResizableComponent.getResizableComponent(this.itemInfoLayout);e.baseSize.designX=this.itemInfoLayout.x,e.baseSize.designY=this.itemInfoLayout.y}},t.prototype.childUpdateInfo=function(){this.updateBackground(),this.updateSpriteFrame(),this.updateItemName(),this.updatePurchaseMethodType()},t.prototype.childSelect=function(){this.updateBackground()},t.prototype.updateBackground=function(){this.updateNormalBackground(),this.updateBrandNewBackground(),this.checkRemoveBrandNewItem()},t.prototype.updateNormalBackground=function(){this.ItemInfo.isBought?(this.background.spriteFrame=this._isSelected?this._singleItemAsset.backgroundUnlockedSelected:this._singleItemAsset.backgroundUnlockedUnselected,this.edgeLabel&&(this.edgeLabel.getComponent(s.NgcLabelLocalized).node.active=!1)):(this.background.spriteFrame=this._isSelected?this._singleItemAsset.backgroundLockedSelected:this._singleItemAsset.backgroundLockedUnselected,this.edgeLabel&&(this.edgeLabel.getComponent(s.NgcLabelLocalized).node.active=!0))},t.prototype.updateBrandNewBackground=function(){var e=this.ItemInfo.isBrandNew&&0==this._isSelected;e&&(this.background.spriteFrame=this._singleItemAsset.backgroundUnlockedBrandNew),this._singleItemAsset.EnableFlash=e},t.prototype.checkRemoveBrandNewItem=function(){this.ItemInfo.isBrandNew&&this._isSelected&&c.NgcShopManager.getInstance().removeBrandItem(this.ItemInfo.itemID)},Object.defineProperty(t.prototype,"ItemInfo",{get:function(){return this._itemInfo},enumerable:!1,configurable:!0}),t.prototype.updateSpriteFrame=function(){this.itemPicture.spriteFrame=this.ItemInfo.spriteFrame;var e=a.ResizableComponent.getResizableComponent(this.itemPicture.node);e.baseSize&&(e.baseSize.width=this.itemPicture.node.width,e.baseSize.height=this.itemPicture.node.height)},t.prototype.updateItemName=function(){this.itemName.setLocalizedText(this.ItemInfo.itemName),this.itemName.node.active=this.ItemInfo.isShowName},t.prototype.updatePurchaseMethodType=function(){if(u.NgcItemStatus.updateItemStatusForNode(this.purchaseMethodParent,this._itemInfo),this.itemInfoLayout){var e=a.ResizableComponent.getResizableComponent(this.itemInfoLayout);1==this.ItemInfo.isBought?(e.baseSize.x=0,e.baseSize.y=0):(e.baseSize.x=e.baseSize.designX,e.baseSize.y=e.baseSize.designY)}},t.prototype.getDisplayType=function(){return"type0"},i([h(cc.Sprite)],t.prototype,"background",void 0),i([h(cc.Node)],t.prototype,"itemInfoLayout",void 0),i([h(cc.Sprite)],t.prototype,"itemPicture",void 0),i([h(s.NgcLabelLocalized)],t.prototype,"itemName",void 0),i([h(cc.Node)],t.prototype,"purchaseMethodParent",void 0),i([h(s.NgcLabelLocalized)],t.prototype,"edgeLabel",void 0),i([f],t)}(p.ItemShop);o.SingleItem=g,cc._RF.pop()},{"../../../../Core/ResizableComponent":"ResizableComponent","../../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../../../GameFramework/Scripts/NgcShopManager":"NgcShopManager","../AssetComponent/SingleItemAsset":"SingleItemAsset","../ItemStatus/ItemStatus":"ItemStatus","./ItemShop":"ItemShop"}],SizeBar:[function(e,t,o){"use strict";cc._RF.push(t,"da7a3agXe1Mq7FdFq/HoY24","SizeBar");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Utils/ConstConfig"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgSprite=null,t.BGprogressBar=[],t}return r(t,e),t.prototype.updateBGProgress=function(e){e<a.ConstConfig.SIZE_BAR_BG.SMALL&&(this.bgSprite.spriteFrame=this.BGprogressBar[0]),e>=a.ConstConfig.SIZE_BAR_BG.SMALL&&e<a.ConstConfig.SIZE_BAR_BG.MEDIUM&&(this.bgSprite.spriteFrame=this.BGprogressBar[1]),e>=a.ConstConfig.SIZE_BAR_BG.MEDIUM&&e<a.ConstConfig.SIZE_BAR_BG.LARGE&&(this.bgSprite.spriteFrame=this.BGprogressBar[2])},i([l(cc.Sprite)],t.prototype,"bgSprite",void 0),i([l([cc.SpriteFrame])],t.prototype,"BGprogressBar",void 0),i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Utils/ConstConfig":"ConstConfig"}],SkyMovement:[function(e,t,o){"use strict";cc._RF.push(t,"371afOZGzhIrYiLO96x8wch","SkyMovement");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./GameCamera"),s=e("./Maps/MapController"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainCamera=null,t.mainCameraOffsetScale=.22,t.offsetCloudMoveX=50,t.mapSize=null,t.myStartX=0,t.myStartY=0,t}return r(t,e),t.prototype.onLoad=function(){this.myStartX=this.getWorldPosition().x,this.myStartY=this.getWorldPosition().y},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.start=function(){this.mapSize=s.default.inst.getMapSize()},t.prototype.update=function(e){this.myStartX-=this.offsetCloudMoveX*e,this.setWorldPosition(cc.v2(this.myStartX,this.myStartY)),this.getWorldPosition().x<-1*(this.mapSize.width/2+this.node.width/2)&&(this.myStartX=this.mapSize.width/2+this.node.width/2)},i([u(a.default)],t.prototype,"mainCamera",void 0),i([u()],t.prototype,"mainCameraOffsetScale",void 0),i([u()],t.prototype,"offsetCloudMoveX",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./GameCamera":"GameCamera","./Maps/MapController":"MapController"}],Social_impl_UplaySrv:[function(e,t,o){"use strict";cc._RF.push(t,"bb30f4DtDBOk7tve59yHuQa","Social_impl_UplaySrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../SDK/Uplay/UplaySrv"),c=e("./Social"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype._preInit=function(){return new Promise(function(e){e("Social_impl_UplaySrv pre-initialized")})},t.prototype._init=function(){return new Promise(function(e){e("Social_impl_UplaySrv initialized")})},t.prototype._getName=function(){return"Uplay"},t.prototype._login=function(e){var t=this;void 0===e&&(e=null),s.default.inst.login().then(function(o){e(null,o),t.onLoginSuccessCallback&&t.onLoginSuccessCallback()}).catch(function(t){e(t,null)})},t.prototype._logout=function(e){var t=this;void 0===e&&(e=null),s.default.inst.logout().then(function(t){e&&e(null,t)}).catch(function(t){e&&e(t,null)}).finally(function(){t.onLogoutSuccessCallback&&t.onLogoutSuccessCallback()})},t.prototype._reLogin=function(){s.default.inst.reLogin()},t.prototype._share=function(e){void 0===e&&(e=null)},t.prototype._invite=function(e){void 0===e&&(e=null)},t.prototype._getConflictedData=function(){return s.default.inst.getDataConflict()},t.prototype._fetchInfoWithAccessToken=function(e,t){return s.default.inst.fetchInfoWithAccessToken(e,t)},t.prototype._sendFriendListToServer=function(){s.default.inst.sendFriendListToServer()},t.prototype._checkLoginStatus=function(){return s.default.inst.checkLoginStatus()},t.prototype._getFullName=function(){return s.default.inst.getFullName()},t.prototype._getFormatName=function(){return s.default.inst.getFormatName()},t.prototype._getProfilePictureUrl=function(){return s.default.inst.getProfilePictureUrl()},t.prototype._sendNameToServer=function(){s.default.inst.sendNameToServer()},t.prototype._sendAvatarToServer=function(){s.default.inst.sendAvatarToServer()},t.prototype._forceLinkInfoToServer=function(e){return i(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,s.default.inst.forceLinkInfoToServer(e)];case 1:return t.sent(),[2]}})})},t.prototype._getSocialID=function(){return s.default.inst.getUplayId()},t.prototype._isConnected=function(){return s.default.inst.isConnected()},t.prototype._getFriendsData=function(){return s.default.inst.getFriendsData()},t.prototype._getSocialType=function(){return c.SocialType.Uplay},t.prototype._isLoginPopUpOpen=function(){return s.default.inst.isLoginPopUpOpen()},t}(c.NgcSocial);o.default=l,cc._RF.pop()},{"../../SDK/Uplay/UplaySrv":"UplaySrv","./Social":"Social"}],Social:[function(e,t,o){"use strict";cc._RF.push(t,"55c8eriJDxNIb57wR3F0Hcp","Social");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSocial=o.SocialType=void 0;var s=e("../Service");(function(e){e[e.None=-1]="None",e[e.Facebook=0]="Facebook",e[e.Uplay=1]="Uplay",e[e.Douyin=2]="Douyin",e[e.Apple=3]="Apple"})(o.SocialType||(o.SocialType={}));var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onLoginSuccessCallback=null,t.onLogoutSuccessCallback=null,t}return r(t,e),t.prototype.setOnLoginSuccessCallback=function(e){void 0===e&&(e=null),this.onLoginSuccessCallback=e},t.prototype.setOnLogoutSuccessCallback=function(e){void 0===e&&(e=null),this.onLogoutSuccessCallback=e},t.getSrvInstance=function(e){return t.srvInstances.find(function(t){return t.getSocialType()===e})},t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.getName=function(){return this._getName()},t.prototype.init=function(e){return this._init(e)},t.prototype.preInit=function(e){return this._preInit(e)},t.prototype.login=function(e){void 0===e&&(e=null),this._login(e)},t.prototype.logout=function(e){void 0===e&&(e=null),this._logout(e)},t.prototype.reLogin=function(e){void 0===e&&(e=null),this._reLogin(e)},t.prototype.share=function(e){void 0===e&&(e=null),this._share(e)},t.prototype.invite=function(e){void 0===e&&(e=null),this._invite(e)},t.prototype.getConflictedData=function(){return this._getConflictedData()},t.prototype.fetchInfoWithAccessToken=function(e,t){return void 0===t&&(t=null),this._fetchInfoWithAccessToken(e,t)},t.prototype.sendFriendListToServer=function(){this._sendFriendListToServer()},t.prototype.checkLoginStatus=function(){return this._checkLoginStatus()},t.prototype.getFullName=function(){return this._getFullName()},t.prototype.getFormatName=function(){return this._getFormatName()},t.prototype.getProfilePictureUrl=function(){return this._getProfilePictureUrl()},t.prototype.sendNameToServer=function(){this._sendNameToServer()},t.prototype.sendAvatarToServer=function(){this._sendAvatarToServer()},t.prototype.forceLinkInfoToServer=function(e){return i(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this._forceLinkInfoToServer(e)];case 1:return t.sent(),[2]}})})},t.prototype.getSocialID=function(){return this._getSocialID()},t.prototype.isConnected=function(){return this._isConnected()},t.prototype.getFriendsData=function(){return this._getFriendsData()},t.prototype.getSocialType=function(){return this._getSocialType()},t.prototype.isLoginPopUpOpen=function(){return this._isLoginPopUpOpen()},t.srvInstances=[],t.inst=null,t.services=[],t}(s.NgcService);o.NgcSocial=c,cc._RF.pop()},{"../Service":"Service"}],SoundManager:[function(e,t,o){"use strict";cc._RF.push(t,"80d7ayxQOtK/qL9HLUa8l+4","SoundManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.AudioClips=void 0;var a,s=e("../NanoGameCore/GameFramework/Scripts/NgcSoundManager"),c=e("../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),l=e("./HSAUtils"),u=e("./Sound/SoundResource"),p=cc._decorator,d=p.ccclass,f=p.property;(function(e){e[e.DeathByElectricClip=0]="DeathByElectricClip",e[e.DeathByBulletClip=1]="DeathByBulletClip",e[e.DrownCharClip=2]="DrownCharClip",e[e.DrownObjectClip=3]="DrownObjectClip",e[e.EndScreenAppearClip=4]="EndScreenAppearClip",e[e.NumberCountClip=5]="NumberCountClip",e[e.WardrobeSelectClip=6]="WardrobeSelectClip",e[e.WardrobeNegClip=7]="WardrobeNegClip",e[e.UnlockItemClip=8]="UnlockItemClip",e[e.CharDeathClip=9]="CharDeathClip",e[e.ThrustLoopClip=10]="ThrustLoopClip",e[e.BurstClip=11]="BurstClip",e[e.CollectCoinClip=12]="CollectCoinClip",e[e.CollectStarClip=13]="CollectStarClip"})(a=o.AudioClips||(o.AudioClips={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.musicChannel=null,t.inGameMusicClip=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst?console.error("Too many Sound Managers"):(o.inst=this,e.prototype.onLoad.call(this))},t.prototype.isSoundPlaying=function(e){return cc.audioEngine.getState(e)==cc.audioEngine.AudioState.PLAYING},t.prototype.stopMusic=function(){cc.audioEngine.stopMusic()},t.prototype.playStartScreenMusic=function(){this.stopMusic(),c.default.musicOff||(this.playMusic(o.inst.startScreenMusicClip,!0),cc.audioEngine.setMusicVolume(.5))},t.prototype.playGameMusic=function(){this.stopMusic(),c.default.musicOff||this.playMusic(u.default.inst.WaterAMB,!0,.5)},t.prototype.playSharkAttackSFX=function(){this._playHSASFX(u.default.inst.PreyDevoured,.1,!1)},t.prototype.playBombExplosion=function(){this._playHSASFX(u.default.inst.MineExplode,.5,!1)},t.prototype.playSFX=function(e,t,o){void 0===t&&(t=1),void 0===o&&(o=!1),this._playHSASFX(e,t,o)},t.prototype.start=function(){},t.prototype._playHSASFX=function(e,t,o){var n=null;return c.default.soundOff||null==e||(n=cc.audioEngine.playEffect(e,o||!1),cc.audioEngine.setVolume(n,t)),n},t.prototype.playSound=function(e,t,o){(!t||t>1)&&(t=1),t<0&&(t=0);var n=this[l.default.enumToString(a,e)];return Array.isArray(this[l.default.enumToString(a,e)])&&(n=l.default.randomArr(this[l.default.enumToString(a,e)])),this._playHSASFX(n,t,o)},t.prototype.stopSound=function(e){cc.audioEngine.stopEffect(e)},t.prototype.setVolume=function(e,t){t<0&&(t=0),cc.audioEngine.setVolume(e,t)},t.inst=null,i([f({type:cc.AudioClip})],t.prototype,"inGameMusicClip",void 0),o=i([d],t)}(s.NgcSoundManager);o.default=h,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/NgcSoundManager":"NgcSoundManager","../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","./HSAUtils":"HSAUtils","./Sound/SoundResource":"SoundResource"}],SoundResource:[function(e,t,o){"use strict";cc._RF.push(t,"2bea7VoKwJH6ZCeU8+FxsdQ","SoundResource");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Utils/ConstConfig"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SharkSlides=null,t.ScoreMultiplier=null,t.StartBigger=null,t.SharkUnlocked=null,t.PreyDevoured=null,t.SharkKilled=null,t.Dash=null,t.GrowUp=null,t.Splash=null,t.ScoreTally=null,t.RewardReceived=null,t.MineExplode=null,t.BattleBGM=null,t.WaterAMB=null,t.SurfaceAMB=null,t}var o;return r(t,e),o=t,Object.defineProperty(t,"inst",{get:function(){return this._inst},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o._inst=this,cc.log("[Sound] SoundResource onLoad")},t.PREFAB_PATH=a.ConstConfig.PREFAB_URLS.SoundResource,i([l({type:cc.AudioClip})],t.prototype,"SharkSlides",void 0),i([l({type:cc.AudioClip})],t.prototype,"ScoreMultiplier",void 0),i([l({type:cc.AudioClip})],t.prototype,"StartBigger",void 0),i([l({type:cc.AudioClip})],t.prototype,"SharkUnlocked",void 0),i([l({type:cc.AudioClip})],t.prototype,"PreyDevoured",void 0),i([l({type:cc.AudioClip})],t.prototype,"SharkKilled",void 0),i([l({type:cc.AudioClip})],t.prototype,"Dash",void 0),i([l({type:cc.AudioClip})],t.prototype,"GrowUp",void 0),i([l({type:cc.AudioClip})],t.prototype,"Splash",void 0),i([l({type:cc.AudioClip})],t.prototype,"ScoreTally",void 0),i([l({type:cc.AudioClip})],t.prototype,"RewardReceived",void 0),i([l({type:cc.AudioClip})],t.prototype,"MineExplode",void 0),i([l({type:cc.AudioClip})],t.prototype,"BattleBGM",void 0),i([l({type:cc.AudioClip})],t.prototype,"WaterAMB",void 0),i([l({type:cc.AudioClip})],t.prototype,"SurfaceAMB",void 0),o=i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Utils/ConstConfig":"ConstConfig"}],SpawnFish:[function(e,t,o){"use strict";cc._RF.push(t,"8613do6kM9Nz6yAECDVtFX2","SpawnFish");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./SpawnObjectBase"),s=e("../Maps/MapController"),c=e("../TuningData"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.NumberFishInitialize=10,t._isInitialized=!1,t._arrTimePerWave=[],t._currentWave=0,t._waveTime=0,t._ratioSpawnPerWave=null,t}return r(t,e),t.prototype.start=function(){this.initFoodParams()},t.prototype.initFoodParams=function(){if(c.default.inst&&c.default.inst.getGameParameters()){var e=c.default.inst.getGameParameters().PreyControl.Map1;this.NumberFishInitialize=e.fish_initialize,this.maxObjects=e.max_fish_on_map,this.timeSpawnNextObject=e.RespawnInterval,this._arrTimePerWave=e.wave_time_spawn,this._ratioSpawnPerWave=e.ratio_spawn_per_wave,this._currentWave=0,this.PercentAppear=this._ratioSpawnPerWave[this._currentWave]}},t.prototype.InitializeFish=function(){this._isInitialized=!0,0==this._currentWave&&(this.PercentAppear=this._ratioSpawnPerWave[this._currentWave]);for(var e=0;e<this.NumberFishInitialize;e++)this.spawnRandomObjectByProbability()},t.prototype.isReachMaxObj=function(){return this.enemiesNode.childrenCount+this.smallFoodNode.childrenCount+this.normalFoodNode.childrenCount>=this.maxObjects},t.prototype.reset=function(){e.prototype.reset.call(this),this._isInitialized=!1,this._currentWave=0,this._waveTime=0,this.PercentAppear=[]},t.prototype.isLastWave=function(){return this._currentWave>=this._arrTimePerWave.length-1},t.prototype.update=function(t){this._waveTime+=t,this._arrTimePerWave[this._currentWave]&&this._waveTime>=this._arrTimePerWave[this._currentWave]&&(this._waveTime=0,this.isLastWave()||this._currentWave++,this.PercentAppear=this._ratioSpawnPerWave[this._currentWave]),e.prototype.update.call(this,t),!this._isInitialized&&s.default.inst.getMapSize().width>0&&this.InitializeFish()},i([p],t.prototype,"NumberFishInitialize",void 0),i([u],t)}(a.default);o.default=d,cc._RF.pop()},{"../Maps/MapController":"MapController","../TuningData":"TuningData","./SpawnObjectBase":"SpawnObjectBase"}],SpawnObjectBase:[function(e,t,o){"use strict";cc._RF.push(t,"eca047A5GlAMq2mNknJT517","SpawnObjectBase");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=e("../Network/HSANetUtils"),c=e("../Maps/MapController"),l=e("../GameCamera"),u=e("../Game"),p=e("../Enemy/EnemyControllerBase"),d=e("../../Shared/Defines"),f=e("../../Scripts/HSAUtils"),h=cc._decorator,g=h.ccclass,y=h.property;(function(e){e[e.Map=0]="Map",e[e.MainCamera=1]="MainCamera"})(a||(a={}));var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.AreNeedRandom=a.Map,t.ObjPrefab=[],t.timeSpawnNextObject=3,t.maxObjects=10,t.mainCamera=null,t.offsetrandom=200,t.smallFoodNode=null,t.normalFoodNode=null,t.enemiesNode=null,t.powerUpNode=null,t.deltaTime=0,t._canSpawnObject=!0,t.PercentAppear=[],t}return r(t,e),t.prototype.onEnable=function(){this.reset()},t.prototype.reset=function(){this.deltaTime=0},t.prototype.spawnRandomObjectByProbability=function(e){for(var t=0,o=0;o<this.ObjPrefab.length;o++)t+=this.PercentAppear[o];var n=s.default.RandomRange(0,t,!0),r=0;for(o=0;o<this.ObjPrefab.length;o++)if(n<=(r+=this.PercentAppear[o]))return this.spawnObjByIndex(o,e);return null},t.prototype.spawnObjByIndex=function(e,t){if(t||(t=this.randomAroundMap()),c.default.inst){var o=cc.instantiate(this.ObjPrefab[e]),n=o.getComponent(p.default);if(n){var r=n.enemyType;r===p.EnemyType.Tuna||r===p.EnemyType.Mahi?(t=r===p.EnemyType.Tuna?c.default.inst.randomTunaSpawnWPos():c.default.inst.randomMahiSpawnWPos(),o.parent=this.normalFoodNode):o.parent=this.enemiesNode}else o.parent=this.smallFoodNode;f.default.setWorldPos(o,t)}},t.prototype.getNumObjs=function(){return this.ObjPrefab.length},t.prototype.randomAroundMap=function(){var e=c.default.inst.getRectWaterSwim(),t=s.default.RandomRange(0,e.width,!0),o=s.default.RandomRange(0,e.height,!0);return cc.v2(e.x+t,e.y+o)},t.prototype.randomAroundMainCamera=function(){var e=cc.v2(0,0);return e.x=s.default.RandomRange(this.mainCamera.node.x-cc.view.getCanvasSize().width/2,this.mainCamera.node.x+cc.view.getCanvasSize().width/2,!1),e.y=s.default.RandomRange(this.mainCamera.node.y-cc.view.getCanvasSize().height,this.mainCamera.node.y,!1),e},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.isReachMaxObj=function(){},t.prototype.update=function(e){this.canSpawn()&&(this.deltaTime+=e,this.deltaTime>=this.timeSpawnNextObject&&!this.isReachMaxObj()&&(this.deltaTime=0,this.spawnRandomObjectByProbability()))},t.prototype.stopSpawn=function(){this._canSpawnObject=!1},t.prototype.canSpawn=function(){return u.default.inst.curGameState!=d.GameState.GameOver},i([y({type:cc.Enum(a)})],t.prototype,"AreNeedRandom",void 0),i([y([cc.Prefab])],t.prototype,"ObjPrefab",void 0),i([y],t.prototype,"timeSpawnNextObject",void 0),i([y],t.prototype,"maxObjects",void 0),i([y(l.default)],t.prototype,"mainCamera",void 0),i([y],t.prototype,"offsetrandom",void 0),i([y(cc.Node)],t.prototype,"smallFoodNode",void 0),i([y(cc.Node)],t.prototype,"normalFoodNode",void 0),i([y(cc.Node)],t.prototype,"enemiesNode",void 0),i([y(cc.Node)],t.prototype,"powerUpNode",void 0),i([g],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../../Scripts/HSAUtils":"HSAUtils","../../Shared/Defines":"Defines","../Enemy/EnemyControllerBase":"EnemyControllerBase","../Game":"Game","../GameCamera":"GameCamera","../Maps/MapController":"MapController","../Network/HSANetUtils":"HSANetUtils"}],SpectatorItem:[function(e,t,o){"use strict";cc._RF.push(t,"265f4M+PcJDnoss3W+PahIM","SpectatorItem"),Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSpectatorItem=o.SpectatorTag=void 0;var n=cc._decorator;n.ccclass,n.property,function(e){e[e.NONE=0]="NONE",e[e.FRIEND=1]="FRIEND",e[e.ELIMINATED=2]="ELIMINATED",e[e.LEADER=3]="LEADER"}(o.SpectatorTag||(o.SpectatorTag={}));var r=function(){function e(e,t,o,n){this._netID=e,this._tag=t,this._pName=o,this._pFlag=n,cc.log("Init item with netID "+this._netID+" tag: "+this._tag+" name "+this._pName+" Flag "+this._pFlag)}return e.prototype.start=function(){},e}();o.NgcSpectatorItem=r,cc._RF.pop()},{}],SplashWaterEffect:[function(e,t,o){"use strict";cc._RF.push(t,"55dadcYC1BNKJUy3bJtHrTz","SplashWaterEffect");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.waterFrontEffect=null,t.waterBackEffect=null,t}return r(t,e),t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.create=function(e,t){e&&this.setWorldPosition(cc.v2(e.x,this.getWorldPosition().y)),t&&this.node.setScale(t);var o=cc.instantiate(this.waterFrontEffect);o.parent=this.node;var n=o.getComponent(sp.Skeleton),r=n.findAnimation("animation").duration;n.setAnimation(0,"animation",!1),this.scheduleOnce(function(){o.destroy()},r+.5)},i([c(cc.Prefab)],t.prototype,"waterFrontEffect",void 0),i([c(cc.Prefab)],t.prototype,"waterBackEffect",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],SplittedAsyncTask:[function(e,t,o){"use strict";cc._RF.push(t,"f7e4dgvk2RIXrLq9qxwKJP4","SplittedAsyncTask"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./PerformanceTask"),r=function(){function e(e,t){e<=0&&console.warn("The task will nerver be executed"),t||console.warn("The task will nerver call back"),this._maxMillisPerFrame=e,this._onFinishedCb=t,this._tasks=[]}return e.prototype.addTask=function(e,t,o){var r=new n.default(e,t,o);this._tasks.push(r)},e.prototype.start=function(){this._registerUpdate()},e.prototype._onFinished=function(){this._unregisterUpdate(),this._onFinishedCb&&this._onFinishedCb()},e.prototype._registerUpdate=function(){cc.director.on(cc.Director.EVENT_AFTER_UPDATE,this._update,this)},e.prototype._unregisterUpdate=function(){cc.director.off(cc.Director.EVENT_AFTER_UPDATE,this._update,this)},e.prototype._update=function(){for(var e=this._maxMillisPerFrame;e>0&&this._tasks.length>0;)e-=this._tasks.shift().exec();e>0&&this._tasks.length<=0&&this._onFinished()},e}();o.default=r,cc._RF.pop()},{"./PerformanceTask":"PerformanceTask"}],SpriteLocalized:[function(e,t,o){"use strict";cc._RF.push(t,"69db4hD6xFJLoKeiZ8sgJWq","SpriteLocalized");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcSpriteLocalized=void 0;var a=e("./LocalizedManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._keyStr="SPRITE_FRAME_KEY",t}return r(t,e),Object.defineProperty(t.prototype,"spriteFrameKey",{get:function(){return this._keyStr},set:function(e){this._keyStr=e,a.NgcLocalizedManager.getSpriteFrame(e)&&this.spriteFrame&&(this.spriteFrame=a.NgcLocalizedManager.getSpriteFrame(e))},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){a.NgcLocalizedManager.spriteLocalizeds.push(this),this.spriteFrameKey=this.spriteFrameKey},i([l],t.prototype,"_keyStr",void 0),i([l({tooltip:"Enter SPRITE_FRAME_KEY key here"})],t.prototype,"spriteFrameKey",null),i([c],t)}(cc.Sprite);o.NgcSpriteLocalized=u,cc._RF.pop()},{"./LocalizedManager":"LocalizedManager"}],StartBiggerBooster:[function(e,t,o){"use strict";cc._RF.push(t,"744cdFnlZJPHZetHTRz3CmW","StartBiggerBooster");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager"),l=e("../../NanoGameCore/GameFramework/Scripts/Ads/AdsManager_impl"),u=e("../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),p=e("../../NanoGameCore/GameFramework/Scripts/BuildConfig"),d=e("../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),f=e("../../NanoGameCore/Services/Ads/Ads"),h=e("../../Scripts/HSAUtils"),g=e("../Screens/MainScreen"),y=e("../SoundManager"),m=e("../TrackingManager"),_=e("../TuningData"),v=e("../UserInfo"),S=cc._decorator,b=S.ccclass,N=S.property,P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sizeLabel=null,t}return r(t,e),t.prototype.start=function(){this.node.active=!1},t.prototype.setBonus=function(){_.default.inst&&_.default.inst.getGameParameters()&&(this.sizeLabel.string=""+_.default.inst.getGameParameters().shark.text_per_sizes[_.default.inst.getGameParameters().StartBigger.bonus_size])},t.prototype.checkShow=function(){this.setBonus(),this.node.active=!f.NgcAds.inst.isFakeAdsPlatform()&&!p.NgcBuildConfig.offlineMode&&h.default.randomFromTo(0,100)<=_.default.inst.getGameParameters().StartBigger.bigger_offer_prompt_chance,m.default.getInst().LogEvent_StartBiggerBoosterDisplay(this.node.active)},t.prototype.playerClickButton=function(){return a(this,void 0,void 0,function(){var e=this;return s(this,function(){return u.default.inst.isAdsPoincutAvailable(u.NgcPointcuts.videoStartBigger,f.AdsType.VideoReward)?(d.default.updateAdsInfo(),l.default.inst.show(u.NgcPointcuts.videoStartBigger,f.AdsType.VideoReward,"None",0,function(){y.default.inst.stopMusic()},function(t){t&&m.default.getInst().LogEvent_StartBiggerBoosterComplete(),y.default.inst.playStartScreenMusic(),e.getReward(t)})):c.NgcDialogManager.showAdsNotAvailableMsg(this.node),[2]})})},t.prototype.getReward=function(e){void 0===e&&(e=!1),e&&(v.UserInfo.startBiggerSize=_.default.inst.getGameParameters().StartBigger.bonus_size,g.default.inst.sharkUpSizeAnim(),this.node.active=!1)},i([N(cc.Label)],t.prototype,"sizeLabel",void 0),i([b],t)}(cc.Component);o.default=P,cc._RF.pop()},{"../../NanoGameCore/CrossFeatures/Dialogs/Script/NgcDialogManager":"NgcDialogManager","../../NanoGameCore/GameFramework/Scripts/Ads/AdsManager_impl":"AdsManager_impl","../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../NanoGameCore/Services/Ads/Ads":"Ads","../../Scripts/HSAUtils":"HSAUtils","../Screens/MainScreen":"MainScreen","../SoundManager":"SoundManager","../TrackingManager":"TrackingManager","../TuningData":"TuningData","../UserInfo":"UserInfo"}],StartMain:[function(e,t,o){"use strict";cc._RF.push(t,"21dc87EtuBBEqEL5B2qXqD0","StartMain");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../globals"),s=e("../../../NanoGameCore/Core/Utils"),c=e("../../../NanoGameCore/CrossFeatures/CrownRoad/Script/CrownRoadManager"),l=e("../../../NanoGameCore/GameFramework/Scripts/Ads/AdsManager_impl"),u=e("../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager"),p=e("../../../NanoGameCore/GameFramework/Scripts/BuildConfig"),d=e("../../../NanoGameCore/GameFramework/Scripts/NgcMain"),f=e("../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),h=e("../../../NanoGameCore/GameFramework/Scripts/Screens/NgcStartMain"),g=e("../../../NanoGameCore/Services/Ads/Ads"),y=e("../../../NanoGameCore/Services/Inventory/Inventory"),m=e("../../../NanoGameCore/Services/Platform/Platform"),_=e("../../../NanoGameCore/Services/Telemetry/Telemetry"),v=e("../../AppEventsCenter"),S=e("../../GameTrackingDataHelper"),b=e("../../GameTrackingDataSupporter"),N=e("../../HSAUtils"),P=e("../../Main"),C=e("../../Performance/OffFrameTasksMgr"),w=e("../../ScoreMultiplier/ScoreMultiplierButton"),T=e("../../SCPack/SCPack"),I=e("../../SoundManager"),R=e("../../StartBiggerBooster/StartBiggerBooster"),O=e("../../TuningData"),E=e("../../UserInfo"),k=e("../../Utils/ConstConfig"),A=e("../MainScreen"),B=cc._decorator,D=B.ccclass,M=B.property,L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerSpriteNode=null,t.coinLbl=null,t.starLbl=null,t.isFinishLoadPreviewObject=!1,t._gameScreenAssetReady=!1,t._emotesAssetReady=!1,t._gameParametersReady=!1,t._sendGDTrackingTime=0,t.playButtonConnectingBg=null,t.playButtonConnectedBg=null,t.scoreMultiplierComp=null,t.startBiggerBoosterComp=null,t.sCPackComp=null,t.lockNode=null,t.infoTypePopup=null,t.coinFlyStartNode=null,t.coinFlyEndNode=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.attachDefaultPreviewObject(),cc.systemEvent.on("refreshInventory",function(){t.refreshCurrency(),t.updateCharacterPreview(),t.scoreMultiplierComp.updateUpgradePrice()}),o.inst=this,this.sCPackComp.node.active=!1,v.default.inst.once(v.default.events.GAMESCREEN_ASSET_READY,function(){cc.log("[LazyLoad] GAME SCREEN asset ready"),t._gameScreenAssetReady=!0},this),v.default.inst.once(v.default.events.EMOTES_ASSET_READY,function(){t._emotesAssetReady=!0},this),v.default.inst.once(v.default.events.GAME_PARAMETERS_READY,function(){t._gameParametersReady=!0})},t.prototype.enablePlayButton=function(e){e?this.playButtonConnectedBg.active&&!this.playButtonConnectingBg.active||(this.playButtonConnectedBg.active=!0,this.playButtonConnectingBg.active=!1,this.connectingToNetwork.node.active=!1,this.sCPackComp.node.active=!0):!this.playButtonConnectedBg.active&&this.playButtonConnectingBg.active||(this.playButtonConnectedBg.active=!1,this.playButtonConnectingBg.active=!0,this.connectingToNetwork.node.active=!0,this.sCPackComp.node.active=!1)},t.prototype.attachDefaultPreviewObject=function(){},t.prototype.refreshCurrency=function(){var e=this;y.NgcInventory.inst.getItemCount("coin",function(t,o){t||(e.coinLbl.string=N.default.abbrNum(o.count,1),E.UserInfo.curCoin=o.count)})},t.prototype.onResume=function(){"GameDistribution"===p.NgcBuildConfig.buildPlatform&&1==this._sendGDTrackingTime&&b.default.inst.isStarted&&(b.default.inst.setSendTrackingGDMainMenuSignal=!0,this._sendGDTrackingTime++),e.prototype.onResume.call(this),this.scoreMultiplierComp.updateUpgradePrice(),this.checkShowButons()},t.prototype.onActivate=function(){"GameDistribution"===p.NgcBuildConfig.buildPlatform&&0==this._sendGDTrackingTime&&(b.default.inst.setSendTrackingGDMainMenuSignal=!0,this._sendGDTrackingTime++),e.prototype.onActivate.call(this),d.NgcMain.setAppContext(P.AppContext.MainMenu),c.default.setCrownDisplayTarget(this.playerSpriteNode),this.scoreMultiplierComp.updateUpgradePrice(),this.checkShowButons()},t.prototype.isBlockStartGame=function(){return e.prototype.isBlockStartGame.call(this)&&d.NgcMain.inst.appState===P.AppState.Game},t.prototype.updateCharacterPreview=function(){},t.prototype.applyBooster=function(){},t.prototype.previewCharacterWolrdPosition=function(){return this.playerSpriteNode.convertToWorldSpaceAR(cc.v2(0,0))},t.prototype.workStartButtonNetworkConnect=function(){var e=a.default.NetClient.inst.isConnected();this._gameScreenAssetReady&&this._emotesAssetReady&&this._gameParametersReady&&(p.NgcBuildConfig.offlineMode||e)?this.enablePlayButton(!0):this.enablePlayButton(!1)},t.prototype.checkShowButons=function(){var e=this;this.scheduleOnce(function(){O.default.inst&&O.default.inst.getGameParameters()?e.sCPackComp.checkShow():e.checkShowButons()},.03)},t.prototype.showInfoTypePopup=function(e){var t=this;this.infoTypePopup.active=e,cc.Tween.stopAllByTag(k.ConstConfig.TWEEN_TAGS.Shark_Type_Popup),this.infoTypePopup.active&&cc.tween(this.infoTypePopup).tag(k.ConstConfig.TWEEN_TAGS.Shark_Type_Popup).delay(3).call(function(){t.infoTypePopup.active=!1}).start()},t.prototype.playerClickedIconType=function(){this.infoTypePopup.active=!this.infoTypePopup.active,this.showInfoTypePopup(this.infoTypePopup.active)},t.prototype.gotoMatch=function(){var e=this;if(0==E.UserInfo.isFirstTimeClicked){E.UserInfo.isFirstTimeClicked=!0;var t=!1;cc.sys.isMobile||(t=!0),m.NgcPlatform.inst&&m.NgcPlatform.inst.getName()==s.Utils.enumToString(m.PlatformID,m.PlatformID.Poki)&&(t=!1),t&&cc.screen.requestFullScreen()}if(""==E.UserInfo.localSkinName){var o=P.Main.inst.localUserSkin;if(o&&""!==o)A.default.inst.currentSharkSkinIdx=k.ConstConfig.SHARK_DATABASE.findIndex(function(e){return e.name===o});else{var n=k.ConstConfig.SHARK_DATABASE.findIndex(function(e){return e.id==A.default.inst.defaultSharkSkin});A.default.inst.currentSharkSkinIdx=n||0,n&&(o=k.ConstConfig.SHARK_DATABASE[A.default.inst.currentSharkSkinIdx].name)}A.default.inst.changeShark()}_.NgcTelemetry.inst.LogEvent_StartGame(),P.Main.inst.setState(P.AppState.Game),this.loadingNode.active=!1,setTimeout(function(){e.clickedStartGame=!1},1e3)},t.prototype.showInterstitialAdsBeforeMatch=function(){var e=this;g.NgcAds.inst&&g.NgcAds.inst.adsIsAvailable(g.AdsType.Interstitial)?(f.default.updateAdsInfo(),l.default.inst.show(u.NgcPointcuts.interPreGame,g.AdsType.Interstitial,"None",0,function(){I.default.inst.stopMusic()},function(){S.default.inst.timer_onboarding_preInterEnd=Date.now(),I.default.inst.playStartScreenMusic(),e.gotoMatch()})):this.gotoMatch()},t.prototype.update=function(t){e.prototype.update.call(this,t),C.default.inst.manuallyUpdate(1)},t.inst=null,i([M(cc.Node)],t.prototype,"playerSpriteNode",void 0),i([M(cc.Label)],t.prototype,"coinLbl",void 0),i([M(cc.Label)],t.prototype,"starLbl",void 0),i([M(cc.Node)],t.prototype,"playButtonConnectingBg",void 0),i([M(cc.Node)],t.prototype,"playButtonConnectedBg",void 0),i([M(w.default)],t.prototype,"scoreMultiplierComp",void 0),i([M(R.default)],t.prototype,"startBiggerBoosterComp",void 0),i([M(T.default)],t.prototype,"sCPackComp",void 0),i([M(cc.Node)],t.prototype,"lockNode",void 0),i([M(cc.Node)],t.prototype,"infoTypePopup",void 0),i([M(cc.Node)],t.prototype,"coinFlyStartNode",void 0),i([M(cc.Node)],t.prototype,"coinFlyEndNode",void 0),o=i([D],t)}(h.default);o.default=L,cc._RF.pop()},{"../../../NanoGameCore/Core/Utils":"Utils","../../../NanoGameCore/CrossFeatures/CrownRoad/Script/CrownRoadManager":"CrownRoadManager","../../../NanoGameCore/GameFramework/Scripts/Ads/AdsManager_impl":"AdsManager_impl","../../../NanoGameCore/GameFramework/Scripts/Ads/NgcAdsManager":"NgcAdsManager","../../../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../../../NanoGameCore/GameFramework/Scripts/NgcMain":"NgcMain","../../../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../../NanoGameCore/GameFramework/Scripts/Screens/NgcStartMain":"NgcStartMain","../../../NanoGameCore/Services/Ads/Ads":"Ads","../../../NanoGameCore/Services/Inventory/Inventory":"Inventory","../../../NanoGameCore/Services/Platform/Platform":"Platform","../../../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry","../../../globals":"globals","../../AppEventsCenter":"AppEventsCenter","../../GameTrackingDataHelper":"GameTrackingDataHelper","../../GameTrackingDataSupporter":"GameTrackingDataSupporter","../../HSAUtils":"HSAUtils","../../Main":"Main","../../Performance/OffFrameTasksMgr":"OffFrameTasksMgr","../../SCPack/SCPack":"SCPack","../../ScoreMultiplier/ScoreMultiplierButton":"ScoreMultiplierButton","../../SoundManager":"SoundManager","../../StartBiggerBooster/StartBiggerBooster":"StartBiggerBooster","../../TuningData":"TuningData","../../UserInfo":"UserInfo","../../Utils/ConstConfig":"ConstConfig","../MainScreen":"MainScreen"}],StartPoint:[function(e,t,o){"use strict";cc._RF.push(t,"4edb2ES4/1OeqPZxc8gdOVw","StartPoint");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./UI/WaitSpinner"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.posWS=cc.v2(0,0),t.startPoint=null,t.pointID=0,t.waitSpinner=null,t}var o;return r(t,e),o=t,t.prototype.getWorldPosition=function(){return this.posWS},t.prototype.setStartPos=function(e){this.startPoint=e},t.prototype.getStartPos=function(){return this.startPoint},t.prototype.setPointId=function(e){this.pointID=e},t.prototype.getPointId=function(){return this.pointID},t.prototype.reset=function(){this.waitSpinner.reset()},t.prototype.boom=function(){this.waitSpinner.boom()},t.prototype.collapse=function(){this.waitSpinner.collapse()},t.freeAllStartPoints=function(){o.allPlayerStartPoints.forEach(function(e){e.reset()})},t.collapseAll=function(){o.allPlayerStartPoints.forEach(function(e){e.collapse()})},t.allCollectibleStartPoints=[],t.allPlayerStartPoints=[],i([l(a.default)],t.prototype,"waitSpinner",void 0),o=i([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./UI/WaitSpinner":"WaitSpinner"}],TabButton:[function(e,t,o){"use strict";cc._RF.push(t,"cd99b+qZsxJ2I1BwtUMUQU+","TabButton");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcTabButton=void 0;var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tabLabel=null,t.tabIcon=null,t.tabHighlight=null,t.disabled=!1,t.screenID=-1,t.mobileScreenID=-1,t.switchScreenDelay=.1,t.highlightEvent=new cc.Component.EventHandler,t.onBeforeSwitchEvent=new cc.Component.EventHandler,t.onAfterSwitchEvent=new cc.Component.EventHandler,t.onLeaveEvent=new cc.Component.EventHandler,t.exitPromptRequire=!1,t}return r(t,e),t.prototype.activeScreenID=function(){return cc.sys.isMobile&&-1!==this.mobileScreenID?this.mobileScreenID:this.screenID},t.prototype.isHighLight=function(){if(this.highlightEvent&&this.highlightEvent.handler){var e={};if(this.highlightEvent.emit([e]),e.value)return!0}return!1},i([c(cc.Node)],t.prototype,"tabLabel",void 0),i([c(cc.Node)],t.prototype,"tabIcon",void 0),i([c(cc.Node)],t.prototype,"tabHighlight",void 0),i([c],t.prototype,"disabled",void 0),i([c],t.prototype,"screenID",void 0),i([c],t.prototype,"mobileScreenID",void 0),i([c],t.prototype,"switchScreenDelay",void 0),i([c(cc.Component.EventHandler)],t.prototype,"highlightEvent",void 0),i([c(cc.Component.EventHandler)],t.prototype,"onBeforeSwitchEvent",void 0),i([c(cc.Component.EventHandler)],t.prototype,"onAfterSwitchEvent",void 0),i([c(cc.Component.EventHandler)],t.prototype,"onLeaveEvent",void 0),i([c],t.prototype,"exitPromptRequire",void 0),i([s],t)}(cc.Component);o.NgcTabButton=l,cc._RF.pop()},{}],TechMessageAndroidWebview:[function(e,t,o){"use strict";cc._RF.push(t,"b0d2cdjExZNU58RlGh1NZB0","TechMessageAndroidWebview");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../../../Core/Utils"),l=e("../../../GameFramework/Scripts/BuildConfig"),u=e("../../../GameFramework/Scripts/Localized/LabelLocalized"),p=e("../../Dialogs/Script/DialogBase"),d=e("./TechMessages"),f=cc._decorator,h=f.ccclass,g=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameURL=null,t._onCloseCallback=null,t}return r(t,e),t.prototype.init=function(e){this.gameURL.string=l.NgcBuildConfig.shortGameClientURL||l.NgcBuildConfig.gameClientURL,this._onCloseCallback=e},t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.hide=function(){d.default.inst.sendMessageRespondTracking("FBUnsupportedWebview"),"function"==typeof this._onCloseCallback&&this._onCloseCallback(),e.prototype.hide.call(this)},t.prototype.copyLink=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return d.default.inst.sendMessageRespondTracking("FBUnsupportedWebview"),[4,c.Utils.copyToClipboard(this.gameURL.string)];case 1:return e.sent(),[2]}})})},t.dialogType="NgcTechMessageAndroidWebview",t.urlPrefab="NgcTechMessageAndroidWebview",t.bundleName="02_techmessage_dialog",i([g(u.NgcLabelLocalized)],t.prototype,"gameURL",void 0),i([h],t)}(p.NgcDialogBase);o.default=y,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LabelLocalized":"LabelLocalized","../../Dialogs/Script/DialogBase":"DialogBase","./TechMessages":"TechMessages"}],TechMessageFPS:[function(e,t,o){"use strict";cc._RF.push(t,"3fce4bkQmdP07yWp6ZSKpxb","TechMessageFPS");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),s=e("./TechMessages"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.closeOnClick=function(){s.default.inst.sendMessageRespondTracking("FPS"),this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.onClickActionBtn=function(){location.reload()},t.dialogType="NgcTechMessageFPS",t.urlPrefab="NgcTechMessageFPS",t.bundleName="02_techmessage_dialog",i([l],t)}(a.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase","./TechMessages":"TechMessages"}],TechMessageIdleDisconnect:[function(e,t,o){"use strict";cc._RF.push(t,"12b5dS972ZOZ6H4NNdJ1/+L","TechMessageIdleDisconnect");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),s=e("./TechMessages"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onClickActionBtn=function(){location.reload()},t.prototype.closeOnClick=function(){s.default.inst.sendMessageRespondTracking("Idle"),this._callBackClose&&this._callBackClose(),this.hide()},t.dialogType="NgcTechMessageIdleDisconnect",t.urlPrefab="NgcTechMessageIdleDisconnect",t.bundleName="02_techmessage_dialog",i([l],t)}(a.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase","./TechMessages":"TechMessages"}],TechMessageIdleFPSWarning:[function(e,t,o){"use strict";cc._RF.push(t,"6df17cCS/lIH5E9pQDnltfh","TechMessageIdleFPSWarning");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=(s.menu,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.warningNode=null,t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){cc.tween(this.warningNode).repeatForever(cc.tween(this.warningNode).to(.5,{opacity:125,scale:1}).to(.5,{opacity:255,scale:1.2})).start(),e.prototype.show.call(this)},t.prototype.init=function(){this.show()},t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="NgcTechMessageFPSWarning",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageFPSWarning",i([l(cc.Node)],t.prototype,"warningNode",void 0),i([c],t)}(a.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessageIdleWarningDialog:[function(e,t,o){"use strict";cc._RF.push(t,"3dba0oA4IdBlYhMV0YwqZI0","TechMessageIdleWarningDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.deviceType=[],t.deviceSprite=null,t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){cc.tween(this.deviceSprite.node).repeatForever(cc.tween(this.deviceSprite.node).to(.5,{opacity:125,scale:.8}).to(.5,{opacity:255,scale:1})).start(),e.prototype.show.call(this)},t.prototype.init=function(){this.deviceSprite.spriteFrame=cc.sys.isMobile?this.deviceType[0]:this.deviceType[1],this.show()},t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.hide=function(){e.prototype.hide.call(this)},t.urlPrefab="NgcTechMessageIdleWarning",t.bundleName="02_techmessage_dialog",t.dialogType="NgcTechMessageIdleWarning",i([l(cc.SpriteFrame)],t.prototype,"deviceType",void 0),i([l(cc.Sprite)],t.prototype,"deviceSprite",void 0),i([c],t)}(a.NgcDialogBase);o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessageLatencyDisconnect:[function(e,t,o){"use strict";cc._RF.push(t,"ceb71tkXplML5+Oap3/hEko","TechMessageLatencyDisconnect");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),s=e("./TechMessages"),c=cc._decorator,l=c.ccclass,u=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.closeOnClick=function(){s.default.inst.sendMessageRespondTracking("Ping"),this._callBackClose&&this._callBackClose(),this.hide()},t.prototype.onClickActionBtn=function(){location.reload()},t.dialogType="NgcTechMessageLatencyDisconnect",t.urlPrefab="NgcTechMessageLatencyDisconnect",t.bundleName="02_techmessage_dialog",i([l],t)}(a.NgcDialogBase));o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase","./TechMessages":"TechMessages"}],TechMessageLatencyWarning:[function(e,t,o){"use strict";cc._RF.push(t,"41d76W65MxKCZGJgAlKnbcg","TechMessageLatencyWarning");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.networkNode=null,t._onCloseCallBackFn=null,t}return r(t,e),t.prototype.show=function(){cc.tween(this.networkNode).repeatForever(cc.tween(this.networkNode).to(.5,{opacity:125,scale:.8}).to(.5,{opacity:255,scale:1})).start(),e.prototype.show.call(this)},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.closeOnClick=function(){"function"==typeof this._onCloseCallBackFn&&this._onCloseCallBackFn(),this.hide()},t.dialogType="NgcTechMessageLatencyWarning",t.urlPrefab="NgcTechMessageLatencyWarning",t.bundleName="02_techmessage_dialog",i([l(cc.Node)],t.prototype,"networkNode",void 0),i([c],t)}(a.NgcDialogBase);o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessageNetworkDisconnect:[function(e,t,o){"use strict";cc._RF.push(t,"b3437suWnJJXKDuzYagI5CD","TechMessageNetworkDisconnect");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._callBackClose=null,t}return r(t,e),t.prototype.show=function(){e.prototype.show.call(this)},t.prototype.hide=function(){e.prototype.hide.call(this)},t.prototype.onClickActionBtn=function(){location.reload()},t.prototype.closeOnClick=function(){this._callBackClose&&this._callBackClose(),this.hide()},t.dialogType="NgcTechMessageNetworkDisconnect",t.urlPrefab="NgcTechMessageNetworkDisconnect",t.bundleName="02_techmessage_dialog",i([c],t)}(a.NgcDialogBase));o.default=l,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessageSupportBrowser:[function(e,t,o){"use strict";cc._RF.push(t,"c9adal2fhJIwIjxRhBaHLRz","TechMessageSupportBrowser");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../Dialogs/Script/DialogBase"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.supportedBrowserNodes=[],t}return r(t,e),t.prototype.init=function(e){this.supportedBrowserNodes.forEach(function(t,o){t.active=e.includes(o)})},t.prototype.show=function(){e.prototype.show.call(this)},t.dialogType="NgcTechMessageSupportBrowser",t.urlPrefab="NgcTechMessageSupportBrowser",t.bundleName="02_techmessage_dialog",i([l(cc.Node)],t.prototype,"supportedBrowserNodes",void 0),i([c],t)}(a.NgcDialogBase);o.default=u,cc._RF.pop()},{"../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessagesDialog:[function(e,t,o){"use strict";cc._RF.push(t,"d640bxvHZlJJLfsEgE70/RV","TechMessagesDialog");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),s=e("../../Dialogs/Script/DialogBase"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.contentLabel=null,t.buttonNode=null,t.okLabel=null,t.icon=null,t._callBackOk=null,t}return r(t,e),t.prototype.init=function(e,t,o,n,r){void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=a.NgcLocalizedManager.t("OK").text),this._callBackOk=o,this.titleLabel.string=e,this.contentLabel.string=t,this.okLabel.string=r,n&&(this.icon.spriteFrame=n),""!==r&&null!=r||(this.buttonNode.active=!1),this.show()},t.prototype.OkOnClick=function(){"function"==typeof this._callBackOk&&this._callBackOk(),this.hide()},t.urlPrefab="NanoImplementation/CrossFeatures/Dialogs/Prefab/TechMessagesDialog",t.bundleName=null,t.dialogType="NgcTechMessagesDialog",i([u(cc.Label)],t.prototype,"titleLabel",void 0),i([u(cc.Label)],t.prototype,"contentLabel",void 0),i([u(cc.Node)],t.prototype,"buttonNode",void 0),i([u(cc.Label)],t.prototype,"okLabel",void 0),i([u(cc.Sprite)],t.prototype,"icon",void 0),i([l],t)}(s.NgcDialogBase);o.default=p,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessagesPortraitOnly:[function(e,t,o){"use strict";cc._RF.push(t,"442d9/hbExAqK8JCPdristV","TechMessagesPortraitOnly");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),s=e("../../Dialogs/Script/DialogBase"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.contentLabel=null,t.buttonNode=null,t.okLabel=null,t._callBackOk=null,t.icon=null,t}return r(t,e),t.prototype.init=function(e,t,o,n,r){void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=a.NgcLocalizedManager.t("OK").text),this._callBackOk=o,this.titleLabel.string=e,this.contentLabel.string=t,this.okLabel.string=r,n&&(this.icon.spriteFrame=n),""!==r&&null!=r||(this.buttonNode.active=!1),this.show()},t.prototype.hide=function(){e.prototype.hide.call(this,function(){},!1)},t.urlPrefab="NanoImplementation/CrossFeatures/Dialogs/Prefab/TechMessagesPortraitOnly",t.bundleName=null,t.dialogType="NgcTechMessagesPortraitOnly",i([u(cc.Label)],t.prototype,"titleLabel",void 0),i([u(cc.Label)],t.prototype,"contentLabel",void 0),i([u(cc.Node)],t.prototype,"buttonNode",void 0),i([u(cc.Label)],t.prototype,"okLabel",void 0),i([u(cc.Sprite)],t.prototype,"icon",void 0),i([l],t)}(s.NgcDialogBase);o.default=p,cc._RF.pop()},{"../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../Dialogs/Script/DialogBase":"DialogBase"}],TechMessages:[function(e,t,o){"use strict";cc._RF.push(t,"3ade3/fBrlP3bCSYkjtcWsu","TechMessages");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.TECH_MESSAGE=void 0;var l,u=e("../../../Core/Utils"),p=e("../../../GameFramework/Scripts/BuildConfig"),d=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),f=e("../../../GameFramework/Scripts/Network/NgcNetClient"),h=e("../../../GameFramework/Scripts/Network/NgcNetClientRefactor"),g=e("../../../GameFramework/Scripts/NgcGame"),y=e("../../../SDK/Nano/NanoSrv"),m=e("../../../Services/Platform/Platform"),_=e("../../../Services/Telemetry/Telemetry"),v=e("../../Dialogs/Script/NgcDialogManager"),S=e("./TechMessageAndroidWebview"),b=e("./TechMessageFPS"),N=e("./TechMessageIdleDisconnect"),P=e("./TechMessageIdleFPSWarning"),C=e("./TechMessageIdleWarningDialog"),w=e("./TechMessageLatencyDisconnect"),T=e("./TechMessageLatencyWarning"),I=e("./TechMessageNetworkDisconnect"),R=e("./TechMessagesDialog"),O=e("./TechMessagesPortraitOnly"),E=e("./TechMessageSupportBrowser"),k=cc._decorator,A=k.ccclass,B=k.property;(function(e){e.SERVER_MAINTENANCE_MESSAGE="SERVER_MAINTENANCE"})(l=o.TECH_MESSAGE||(o.TECH_MESSAGE={}));var D=u.BROWSER_TYPE.CHROME,M=u.BROWSER_TYPE.EDGE,L=u.BROWSER_TYPE.FIREFOX,F=u.BROWSER_TYPE.SAFARI,G=u.BROWSER_TYPE.SAMSUNG_INTERNET,U=u.BROWSER_TYPE.ANDROID_WEBVIEW,j=u.BROWSER_TYPE.SAFARI_IN_APP,x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconNetworkErr=null,t.iconNetworkBad=null,t.rotateDeviceToPlayPrefab=null,t.loadingPrefab=null,t.badConnectionPrefab=null,t.dialogTechMessagesPrefab=null,t.loadingNode=null,t.badConnectionNode=null,t._isServerMaintenanceShow=!1,t._isGameAlreadyIdle=!1,t._isGameAlreadyStart=!1,t._idleTime=5,t._kickTime=8,t._FPSAvgLimit=20,t._FPSAvgLimitDuration=3,t._FPSAvgWarningDuration=8,t._latencyAvgLimit=120,t._latencyAvgLimitDuration=3,t._latencyAvgWarningDuration=3,t.warningIdleTimeOut=null,t.idleKickTimeout=null,t.fpsWarningTimeout=null,t.fpsKickTimeout=null,t.idleWarningDialog=null,t.dialogFPSWarning=null,t._forceGameDisconnectCB=null,t.trackingParams={},t.isReceivedTechMessageConfig=!1,t.isMarkedAsFPSKick=!1,t.isMarkAsLatencyKick=!1,t.latencyKickTimeoutID=null,t.latencyWarningTimeoutID=null,t.latencyWarningDialog=null,t._noNetworkDetection=!1,t._noNetworkDetectionTimer=0,t.rotationDeviceNode=null,t.isRotationDialogInited=!1,t.handleServerMaintenance=function(e){return s(t,void 0,void 0,function(){var t,o,n,r;return c(this,function(i){switch(i.label){case 0:return cc.log("TECH_MESSAGE handleServerMaintenance",e),this.isServerMaintenanceShow?[2,!1]:(this.isServerMaintenanceShow=!0,null===(r=g.NgcGame.inst)||void 0===r||r.pause(!0),[4,v.NgcDialogManager.create(R.default)]);case 1:return t=i.sent(),o=d.NgcLocalizedManager.t("NTM_SERVER_MAINTENANCE_CONTENT").text,n=d.NgcLocalizedManager.t("NTM_SERVER_MAINTENANCE").text,t.init(n,o,function(){return location.reload()},null),t.show(),[2]}})})},t}var o;return r(t,e),o=t,Object.defineProperty(t.prototype,"isServerMaintenanceShow",{get:function(){return this._isServerMaintenanceShow},set:function(e){this._isServerMaintenanceShow=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o.inst?cc.error("There are already have NgcTechMessages!!! inst"):(p.NgcBuildConfig.useNgcServer?h.NgcNetClientRefactor.inst.registerForBroadcastMessageType(l.SERVER_MAINTENANCE_MESSAGE,this.handleServerMaintenance):f.NgcNetClient.inst.registerForBroadcastMessageType(l.SERVER_MAINTENANCE_MESSAGE,this.handleServerMaintenance),o.inst=this,cc.sys.isMobile&&(this.onResized(),cc.view.on("canvas-resize",this.onResized.bind(this))))},t.prototype.setTrackingParams=function(e){e.currentPing&&(this.trackingParams.maxPing=this.trackingParams.maxPing||e.currentPing,this.trackingParams.minPing=this.trackingParams.minPing||e.currentPing,e.currentPing>this.trackingParams.maxPing&&(this.trackingParams.maxPing=e.currentPing),e.currentPing<this.trackingParams.minPing&&(this.trackingParams.minPing=e.currentPing)),e.currentFPS&&(this.trackingParams.maxFPS=this.trackingParams.maxFPS||e.currentFPS,this.trackingParams.minFPS=this.trackingParams.minFPS||e.currentFPS,e.currentFPS>this.trackingParams.maxFPS&&(this.trackingParams.maxFPS=e.currentFPS),e.currentFPS<this.trackingParams.minFPS&&(this.trackingParams.minFPS=e.currentFPS)),this.trackingParams=i(i({},this.trackingParams),e)},t.prototype.sendWarningTracking=function(e,t){_.NgcTelemetry.inst.LogEvent_GameTechWarning(i({checker:e,roundID:t},this.trackingParams))},t.prototype.sendMessageTracking=function(e){_.NgcTelemetry.inst.LogEvent_GameTechMessage(i({checker:e},this.trackingParams))},t.prototype.sendMessageRespondTracking=function(e){_.NgcTelemetry.inst.LogEvent_GameTechMessageRespond(i({checker:e},this.trackingParams))},t.prototype.onPlayerInput=function(){this._isGameAlreadyStart&&this.resetIdleAction()},t.prototype.clearIdleListener=function(){clearTimeout(this.warningIdleTimeOut),clearTimeout(this.idleKickTimeout),this.idleWarningDialog&&(this.idleWarningDialog.hide(),this.idleWarningDialog=null)},t.prototype.resetIdleAction=function(){var e=this;p.NgcBuildConfig.offlineMode||(this.clearIdleListener(),this.warningIdleTimeOut=setTimeout(function(){s(e,void 0,void 0,function(){var e,t=this;return c(this,function(o){switch(o.label){case 0:return e=this,[4,v.NgcDialogManager.create(C.default)];case 1:return e.idleWarningDialog=o.sent(),this.idleWarningDialog.init(),this.sendWarningTracking("Idle",null),this._isGameAlreadyIdle=!0,clearTimeout(this.idleKickTimeout),this.idleKickTimeout=setTimeout(function(){t.idleWarningDialog.hide(),t.idleWarningDialog=null,"function"==typeof t._forceGameDisconnectCB&&t._forceGameDisconnectCB(),s(t,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return this.clearFPSListener(),this.sendMessageTracking("Idle"),[4,v.NgcDialogManager.create(N.default)];case 1:return e.sent().show(),[2]}})})},1e3*(this._kickTime-this._idleTime)),[2]}})})},1e3*this._idleTime))},t.prototype.onGamePlayStart=function(){this.isReceivedTechMessageConfig||this.parseTechConfig(),this._isGameAlreadyStart=!0,this.resetIdleAction()},t.prototype.onGameplayOver=function(){this._isGameAlreadyStart=!1,this.clearIdleListener(),this.clearFPSListener(),this.clearLatencyListener()},t.prototype.parseTechConfig=function(){this.isReceivedTechMessageConfig=!0;var e=y.default.inst.getCurGameInfo().gameParams.techMessage||{};e&&(this._FPSAvgLimit=e.FPSAvgLimit,this._FPSAvgLimitDuration=e.FPSObservedPeriod,this._FPSAvgWarningDuration=e.FPSWarningTime,this._idleTime=e.idleDetectionWarning,this._kickTime=e.idleDetectionKick,this._latencyAvgLimit=e.pingAvgLimit,this._latencyAvgWarningDuration=e.warningTime,this._latencyAvgLimitDuration=e.pingObservedPeriod)},t.prototype.setForceGameDisconnect=function(e){void 0===e&&(e=function(){}),this._forceGameDisconnectCB=function(){"function"==typeof e&&e(),p.NgcBuildConfig.useNgcServer?h.NgcNetClientRefactor.inst.isConnected()&&h.NgcNetClientRefactor.inst.sendLeaveGameMessage():f.NgcNetClient.inst.isConnected()&&f.NgcNetClient.inst.exitGame()}},t.prototype.isGameAlreadyIdle=function(){return this._isGameAlreadyIdle},t.prototype.clearFPSListener=function(){clearTimeout(this.fpsKickTimeout),clearTimeout(this.fpsWarningTimeout),this.dialogFPSWarning&&(this.dialogFPSWarning.hide(),this.dialogFPSWarning=null)},t.prototype.onMeansureFPS=function(e){var t=this;p.NgcBuildConfig.offlineMode||this._isGameAlreadyStart&&(this.isMarkedAsFPSKick||(e>=this._FPSAvgLimit?this.clearFPSListener():this.fpsWarningTimeout||(this.fpsWarningTimeout=setTimeout(function(){s(t,void 0,void 0,function(){var e,t=this;return c(this,function(o){switch(o.label){case 0:return e=this,[4,v.NgcDialogManager.create(P.default)];case 1:return e.dialogFPSWarning=o.sent(),this.dialogFPSWarning.init(),this.sendWarningTracking("FPS",null),clearTimeout(this.fpsKickTimeout),this.fpsKickTimeout=setTimeout(function(){t.isMarkedAsFPSKick=!0,t.dialogFPSWarning.hide(),t.dialogFPSWarning=null,"function"==typeof t._forceGameDisconnectCB&&t._forceGameDisconnectCB(),s(t,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return this.clearFPSListener(),this.clearIdleListener(),this.clearLatencyListener(),this.sendMessageTracking("FPS"),[4,v.NgcDialogManager.create(b.default)];case 1:return e.sent().show(),[2]}})})},1e3*this._FPSAvgWarningDuration),[2]}})})},1e3*this._FPSAvgLimitDuration))))},t.prototype.clearLatencyListener=function(){clearTimeout(this.latencyKickTimeoutID),clearTimeout(this.latencyWarningTimeoutID),this.latencyKickTimeoutID=null,this.latencyWarningTimeoutID=null,this.latencyWarningDialog&&(this.latencyWarningDialog.hide(),this.latencyWarningDialog=null)},t.prototype.onMeasureLatency=function(e){var t=this;p.NgcBuildConfig.offlineMode||!this._isGameAlreadyStart||(cc.log("@@@@ TechMessages > onMeasureLatency: latency =",e),this.isMarkAsLatencyKick)||(e<=this._latencyAvgLimit?this.clearLatencyListener():this.latencyWarningTimeoutID||(this.latencyWarningTimeoutID=setTimeout(function(){return s(t,void 0,void 0,function(){var e,t=this;return c(this,function(o){switch(o.label){case 0:return e=this,[4,v.NgcDialogManager.create(T.default)];case 1:return e.latencyWarningDialog=o.sent(),this.latencyWarningDialog.show(),this.sendWarningTracking("Ping",null),clearTimeout(this.latencyKickTimeoutID),this.latencyKickTimeoutID=setTimeout(function(){return s(t,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return this.isMarkAsLatencyKick=!0,this.latencyWarningDialog.hide(),this.latencyWarningDialog=null,"function"==typeof this._forceGameDisconnectCB&&this._forceGameDisconnectCB(),this.clearFPSListener(),this.clearIdleListener(),this.sendMessageTracking("Ping"),[4,v.NgcDialogManager.create(w.default)];case 1:return e.sent().show(),[2]}})})},1e3*this._latencyAvgWarningDuration),[2]}})})},1e3*this._latencyAvgLimitDuration)))},t.prototype.onResized=function(){var e=cc.view.getFrameSize();e.width>e.height?this.showRotateDevice(!0):this.showRotateDevice(!1)},t.prototype.lateUpdate=function(e){if(!o.showedDisconnectPopup&&(u.Utils.isNetWorkAvailable()||p.NgcBuildConfig.offlineMode?this._noNetworkDetection=!1:this._noNetworkDetection?(this._noNetworkDetectionTimer+=e,this._noNetworkDetectionTimer>=o.MAX_NETWORK_CHECK_DURATION&&o.showNetworkDisconnect()):(this._noNetworkDetectionTimer=0,this._noNetworkDetection=!0),cc.sys.isMobile&&this.rotationDeviceNode&&this.rotationDeviceNode.active)){var t=cc.view.getFrameSize();t.width>t.height?this.showRotateDevice(!0):this.showRotateDevice(!1)}},t.prototype.showRotateDevice=function(e){return s(this,void 0,void 0,function(){var t,n,r,i,a,s;return c(this,function(c){switch(c.label){case 0:return t=navigator.userAgent,n=t.includes("iPad"),t.includes("FB_IAB/Orca-Android")&&!t.includes("Mobile Safari/")||n&&u.Utils.getBrowserType()===j?[2]:this.rotationDeviceNode?(e&&this.rotationDeviceNode.setSiblingIndex(o.ZORDER_ROTATE_DEVICE),this.rotationDeviceNode.active=e,[2]):!e||this.isRotationDialogInited?[3,2]:(this.isRotationDialogInited=!0,r=O.default.dialogType,i=O.default.urlPrefab,a=O.default.bundleName,s=this,[4,v.NgcDialogManager.createDialog(r,i,a)]);case 1:s.rotationDeviceNode=c.sent(),c.label=2;case 2:return[2]}})})},t.prototype.checkServerMaintenanceAndShowPopup=function(){var e,t=y.default.inst.getCurGameInfo();if(this.isServerMaintenanceShow||!t)return!1;var o=t.message;if(o&&o.type===l.SERVER_MAINTENANCE_MESSAGE){null===(e=g.NgcGame.inst)||void 0===e||e.pause(!0),this.isServerMaintenanceShow=!0;var n=d.NgcLocalizedManager.t("NTM_SERVER_MAINTENANCE_CONTENT").text,r=d.NgcLocalizedManager.t("NTM_SERVER_MAINTENANCE").text;return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,v.NgcDialogManager.create(R.default)];case 1:return(e=t.sent()).init(r,n,function(){return location.reload()},null),e.show(),[2]}})}),!0}return!1},t.checkAndShowUnSupportedBrowser=function(){if(m.NgcPlatform.isRunFromApp())return!0;if(o._isShowingUnSupportedBrowser)return!1;var e=u.Utils.getOSType(),t=u.Utils.getBrowserType(),n=o.browserSupportedList[e],r=!1;if((n.includes(t)||cc.sys.isNative)&&(r=!0),(navigator.userAgent.match(/coc_coc/)||navigator.userAgent.match(/Opera|OPR\//))&&(r=!1),navigator.userAgent.match(/Iphone/)&&navigator.userAgent.match(/Mobile/)&&(r=!0),!r){o._isShowingUnSupportedBrowser=!0,s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,v.NgcDialogManager.create(E.default)];case 1:return(e=t.sent()).init(n),e.show(),[2]}})});var i=t===U||t===j;_.NgcTelemetry.inst.LogEvent_GameTechMessageUnsupported({osType:e,osVersion:cc.sys.osVersion,browserType:t,browserVersion:cc.sys.browserVersion,checker:i})}return r},t.showAndroidWebViewDialog=function(){return s(this,void 0,void 0,function(){var e,t;return c(this,function(n){switch(n.label){case 0:return o._isShowingWarningWebView=!0,[4,v.NgcDialogManager.create(S.default)];case 1:return e=n.sent(),t=function(){o._isShowingWarningWebView=!1},e.init(t),e.show(),[2]}})})},t.showWarningLoginWithAndroidWebview=function(){var e=u.Utils.getBrowserType();return u.Utils.getOSType()===u.OS_TYPE.ANDROID&&e===U&&(o._isShowingWarningWebView||this.showAndroidWebViewDialog(),!0)},t.showWarningLoginWithWebview=function(){var e=u.Utils.getBrowserType();return(e===U||e===j)&&(o._isShowingWarningWebView||this.showAndroidWebViewDialog(),!0)},t.showNetworkDisconnect=function(){o.showedDisconnectPopup||(p.NgcBuildConfig.offlineMode&&u.Utils.reloadPage(),o.showedDisconnectPopup=!0,s(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,v.NgcDialogManager.create(I.default)];case 1:return e.sent().show(),[2]}})}))},t.inst=null,t.CONNECT_RETRY_MAX_COUNT=15,t.LATENCY_BAD_CONNECTION=1e3,t.LATENCY_WEAK_CONNECTION=5e3,t.MATCHMAKING_TIME_OUT=1e4,t.ZORDER_SERVER_MAINTENANCE=100,t.ZORDER_ROTATE_DEVICE=200,t._isShowingUnSupportedBrowser=!1,t._isShowingWarningWebView=!1,t.showedDisconnectPopup=!1,t.MAX_NETWORK_CHECK_DURATION=3,t.browserSupportedList=[[D,M],[D,L,M],[D,G,U,M],[F,D,j,M],[F,D,L,M]],a([B(cc.SpriteFrame)],t.prototype,"iconNetworkErr",void 0),a([B(cc.SpriteFrame)],t.prototype,"iconNetworkBad",void 0),a([B(cc.Prefab)],t.prototype,"rotateDeviceToPlayPrefab",void 0),a([B(cc.Prefab)],t.prototype,"loadingPrefab",void 0),a([B(cc.Prefab)],t.prototype,"badConnectionPrefab",void 0),a([B(cc.Prefab)],t.prototype,"dialogTechMessagesPrefab",void 0),o=a([A],t)}(cc.Component);o.default=x,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","../../../GameFramework/Scripts/Network/NgcNetClient":"NgcNetClient","../../../GameFramework/Scripts/Network/NgcNetClientRefactor":"NgcNetClientRefactor","../../../GameFramework/Scripts/NgcGame":"NgcGame","../../../SDK/Nano/NanoSrv":"NanoSrv","../../../Services/Platform/Platform":"Platform","../../../Services/Telemetry/Telemetry":"Telemetry","../../Dialogs/Script/NgcDialogManager":"NgcDialogManager","./TechMessageAndroidWebview":"TechMessageAndroidWebview","./TechMessageFPS":"TechMessageFPS","./TechMessageIdleDisconnect":"TechMessageIdleDisconnect","./TechMessageIdleFPSWarning":"TechMessageIdleFPSWarning","./TechMessageIdleWarningDialog":"TechMessageIdleWarningDialog","./TechMessageLatencyDisconnect":"TechMessageLatencyDisconnect","./TechMessageLatencyWarning":"TechMessageLatencyWarning","./TechMessageNetworkDisconnect":"TechMessageNetworkDisconnect","./TechMessageSupportBrowser":"TechMessageSupportBrowser","./TechMessagesDialog":"TechMessagesDialog","./TechMessagesPortraitOnly":"TechMessagesPortraitOnly"}],Telemetry_impl_FirebaseSrv:[function(e,t,o){"use strict";cc._RF.push(t,"2a37bC7Y1xITpahAAXRvGfk","Telemetry_impl_FirebaseSrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../../Scripts/Main"),s=e("../../Core/Utils"),c=e("../Ads/Ads"),l=e("../Platform/Platform"),u=e("./Telemetry"),p=e("../../GameFramework/Scripts/NgcUserInfo"),d=e("../../CrossFeatures/GameMode/Script/NgcGameModeManager"),f=e("../../CrossFeatures/EndGameFlow/Reward/RewardUI"),h=e("../../GameFramework/Scripts/BuildConfig"),g=e("../../CrossFeatures/CrownRoad/Script/CrownRoadManager"),y=e("../../GameFramework/Scripts/NgcGame"),m=e("../Inventory/Inventory"),_=e("../Social/Social"),v=cc._decorator,S=v.ccclass,b=v.property,N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameQueueStartExParams=null,t.gameRoundStartExParams=null,t.gameRoundOverExParams=null,t.gameRoundOverClickedExParams=null,t.roundQueueStartTimestamp=null,t.timeStamp_gameOver=null,t.timeStamp_gameOverClicked=null,t.lastScreenName=null,t.visitCounter={},t.currentScreenCategory=null,t.adsTimeStamps={},t.joinCreateRoomTimestamp=null,t.lastRoomID=null,t.techMessageTimestamp=null,t.onboardDailyVideoEndTimeStamp=null,t.loginData=null,t.firebaseConfig={},t.firebaseApp=null,t.firebaseAnalytics=null,t}var o;return r(t,e),o=t,t.prototype.getFirebaseRemoteConfig=function(){return this.firebaseRemoteConfig},t.prototype.firebaseLogEvent=function(e,t){if(!this.isPlatformBlocked()&&this.isLoggedIn()&&(this.isActive||this.isMandatoryEvent(e))){t||(t={});var o=this.addContext(t),n={};if(this.isActive)n=o,n=this.addExtraParams(e,n);else{var r=this;Object.keys(o).forEach(function(e){r.isMandatoryParam(e)&&(n[e]=o[e])})}this.firebaseAnalytics.logEvent(e,n),console.log("FIREBASE LOG: "+e+" "+JSON.stringify(n))}},t.prototype.removeParameter=function(e,t){if("game_queueStart"==e){for(var o=0,n=["clientTimestamp","coinBalance","itemCount","playerType","sessionToken","ticketBalance"];o<n.length;o++)delete t[n[o]];return t}if("game_roundOver"==e){for(var r=0,i=["checker","clientTimestamp","coinBalance","gameMode","itemCount","luckyDraw","maxFPS","minFPS","playerType","sessionToken","ticketBalance","ticketConsumed","tleID","tleType"];r<i.length;r++)delete t[i[r]];return t}if("game_roundStart"==e){for(var a=0,s=["checker","clientTimestamp","coinBalance","itemCount","NGC","playerType","sessionToken","ticketBalance","tleID"];a<s.length;a++)delete t[s[a]];return t}return t},t.prototype.addContext=function(e){var t,o,n;e.playerId=p.default.userIdKey?p.default.userIdKey:"null",e.sessionToken=p.default.sessionKey?p.default.sessionKey:"null",e.clientTimestamp||(e.clientTimestamp=Date.now()),e.gameVersion=window.versionInfo.gameVersion,e.deploymentEnvironment=window.versionInfo.deploymentEnvironment,e.sessionTime=window.funnel?Date.now()-window.funnel.startTime:"null",e||(e.context=a.AppContext[a.Main.appContext]),e.coinBalance="null",e.itemCount="null",e.crownBalance="null",e.totalRoundCount="null",e.ticketBalance="null",e.playerType="null";var r=u.NgcTelemetry.gameImportantInfos;if(r)try{e.coinBalance=(null===(t=m.NgcInventory.inst.ownedItems[r.coinBalanceID])||void 0===t?void 0:t.count)||0;var i=0;for(var s in m.NgcInventory.inst.ownedItems){var c=null===(o=m.NgcInventory.inst.itemTable[s])||void 0===o?void 0:o.category;c&&r.itemCategories&&r.itemCategories.indexOf(c)>=0&&(i+=1)}e.crownRank=g.default.inst&&g.default.inst.oldCrownRank||0,e.itemCount=i,e.crownBalance=g.default.crownRoadUIInst&&g.default.crownRoadUIInst.currentPointTracking||0,e.totalRoundCount=null!==(n=p.default.totalRoundCount)&&void 0!==n?n:"null",e.playerType=p.default.socialId?"Uplay"===_.NgcSocial.inst.getName()?"Ubisoft":_.NgcSocial.inst.getName():"Guest"}catch(l){console.error("Error at Firebase tracking AddContext: ",l)}return e},t.prototype.LogEvent_ReportNetStats=function(e){this.firebaseLogEvent("NetStats",e)},t.prototype.LogEvent_GameOverData=function(e){this.firebaseLogEvent("game_over",e)},t.prototype.LogEvent_CustomEvent=function(e,t){e&&this.firebaseLogEvent(e,t)},t.prototype.LogEvent_InstallAppClick=function(){this.firebaseLogEvent("install_app_click")},t.prototype.LogEvent_GoToEdge=function(e){this.firebaseLogEvent("go_to_edge",e)},t.prototype.LogEvent_EdgePopupResponse=function(e){this.firebaseLogEvent("edge_popup_response",e)},t.prototype.LogEvent_EnterShop=function(){this.firebaseLogEvent("EnterShop")},t.prototype.LogEvent_PurchaseItem=function(e){this.firebaseLogEvent("player_purchase",e)},t.prototype.LogEvent_CollectPurchaseItem=function(e){this.firebaseLogEvent("player_purchaseCollect",e)},t.prototype.LogEvent_ShopItemViewed=function(e){this.firebaseLogEvent("player_shopItemViewed",e)},t.prototype.setGameQueueStartExtraParam=function(e){this.gameQueueStartExParams=e},t.prototype.setGameRoundStartExtraParam=function(e){this.gameRoundStartExParams=e},t.prototype.setGameRoundOverExtraParam=function(e){this.gameRoundOverExParams=e},t.prototype.setGameRoundOverClickedExtraParam=function(e){this.gameRoundOverClickedExParams=e},t.prototype.LogEvent_GameQueueStart=function(e){e=e||{},this.gameQueueStartExParams&&Object.assign(e,this.gameQueueStartExParams),e.roundID=y.NgcGame.roundID||"null",e.ticketConsumed="null",e.tleID="null",e.tleType="null",e.luckyDraw="null",e.crownRank=g.default.inst&&g.default.inst.oldCrownRank||0,e.gameMode=d.NgcGameModeManager.inst.selectedModeId||"null",this.firebaseLogEvent("game_queueStart",e),this.roundQueueStartTimestamp=Date.now()},t.prototype.LogEvent_GameRoundStart=function(e){e=e||{},this.gameRoundStartExParams&&Object.assign(e,this.gameRoundStartExParams),e.roundID=y.NgcGame.roundID||"null",e.tleID="null",e.crownRank=g.default.inst&&g.default.inst.oldCrownRank||0,e.gameMode=d.NgcGameModeManager.inst.selectedModeId,e.checker=f.NgcEndGameRewardDialog.retryFlowTriggered,this.firebaseLogEvent("game_roundStart",e),f.NgcEndGameRewardDialog.retryFlowTriggered=!1},t.prototype.LogEvent_GameRoundOver=function(e){var t,o;e=e||{},this.gameRoundOverExParams&&Object.assign(e,this.gameRoundOverExParams),e.roundID=y.NgcGame.roundID||"null",e.gameMode=d.NgcGameModeManager.inst.selectedModeId||"null",e.ticketConsumed=e.ticketConsumed||"null",e.tleID=e.tleID||"null",e.tleType=e.tleType||"null",e.luckyDraw=e.luckyDraw||"null",e.crownRank=null!==(t=e.crownRank)&&void 0!==t?t:"null",e.crownEarnings=null!==(o=e.crownEarnings)&&void 0!==o?o:"null",e["crownResult "]=e.crownResult||"null",this.firebaseLogEvent("game_roundOver",e),this.timeStamp_gameOver=Date.now()},t.prototype.LogEvent_GameRoundOverClicked=function(e){var t,o;e=e||{},this.gameRoundOverClickedExParams&&Object.assign(e,this.gameRoundOverClickedExParams),e.roundID=y.NgcGame.roundID||"null",e.crownRank=g.default.inst&&g.default.inst.oldCrownRank||0,e.tleID=e.tleID||"null",e.ticketEarnings=null!==(t=e.ticketEarnings)&&void 0!==t?t:"null",e.multiplierOffer=null!==(o=e.multiplierOffer)&&void 0!==o?o:"null",e.category=e.category||"null",e.gameMode=d.NgcGameModeManager.inst.selectedModeId,this.firebaseLogEvent("game_roundOverClicked",e),this.timeStamp_gameOverClicked=Date.now(),this.LogEvent_OnboardingGameRoundOverClicked(e)},t.prototype.LogEvent_PlayerCrownRewardCollect=function(e){var t,o;(e=e||{}).crownRank=g.default.inst&&g.default.inst.oldCrownRank||0,e.itemRewardID=null!==(t=e.itemRewardID)&&void 0!==t?t:"null",e.itemRewardValue=null!==(o=e.itemRewardValue)&&void 0!==o?o:"null",this.firebaseLogEvent("player_crownRewardCollect",e)},t.prototype.LogEvent_PlayerDied=function(e){(e=e||{}).roundID=y.NgcGame.roundID||"null",e.gameMode=d.NgcGameModeManager.inst.selectedModeId||"null",this.firebaseLogEvent("player_died",e)},t.prototype.LogEvent_PlayerRevived=function(e){(e=e||{}).roundID=y.NgcGame.roundID||"null",e.gameMode=d.NgcGameModeManager.inst.selectedModeId||"null",this.firebaseLogEvent("player_revived",e)},t.prototype.LogEvent_LuckyboosterClicked=function(e){this.firebaseLogEvent("player_luckyboosterClicked",{checker:e})},t.prototype.LogEvent_LuckyboosterCollected=function(e,t,o){this.firebaseLogEvent("player_luckyboosterCollected",{itemRewardID:e,itemRewardValue:t,totalRoundCount:o})},t.prototype.LogEvent_PlayerClickedStartGame=function(e){this.firebaseLogEvent("player_click_start_game",e)},t.prototype.LogEvent_ReportLoadingStep=function(e,t){this.firebaseLogEvent(e,{step_name:t})},t.prototype.LogEvent_SpectatorMode=function(e){e?this.firebaseLogEvent("EnterSpectatorMode"):this.firebaseLogEvent("ExitSpectatorMode")},t.prototype.LogEvent_StartGame=function(){this.firebaseLogEvent("player_click_start_game")},t.prototype.LogEvent_EnterScreen=function(e){this.visitCounter[e]=this.visitCounter[e]||0,this.visitCounter[e]+=1;var t={};t.context=e,t.crownRank=g.default.inst&&g.default.inst.oldCrownRank||0,t.source=this.lastScreenName||"null",t.category=this.currentScreenCategory||"null",t.count=this.visitCounter[e],t.checker=p.default.visitedScreens.screenName?1:0,this.firebaseLogEvent("player_enterScreen",t),p.default.addVisitedScreen(e),this.lastScreenName=e},t.prototype.setScreenCategory=function(e){this.currentScreenCategory=e},t.prototype.LogEvent_ExitScreen=function(e){this.firebaseLogEvent("exit_screen",{context:e})},t.prototype.LogEvent_SettingInformation=function(e){this.firebaseLogEvent("game_settingsChanged",e)},t.prototype.LogEvent_LanguageChanged=function(e){this.firebaseLogEvent("languageChanged_info",e)},t.prototype.LogEvent_ReportOrigin=function(e){this.firebaseLogEvent("Origin",{origin:e})},t.prototype.LogEvent_ReportTiming=function(e,t){this.firebaseLogEvent(e,{time:t})},t.prototype.LogEvent_SendEmoji=function(e){var t={emoteID:e,context:s.Utils.enumToString(a.AppContext,a.Main.getAppContext())},o=y.NgcGame.roundID;"PartyRoom"===t.context&&(o=null),t.roundID=o||"null",t.roundTime=o?Date.now()-this.roundQueueStartTimestamp:"null",this.firebaseLogEvent("player_emoteUsed",t)},t.prototype.LogEvent_DailyLoginReward=function(e){this.firebaseLogEvent("player_dailyloginCollected",e)},t.prototype.LogEvent_InfoLeaderboard=function(e){this.firebaseLogEvent("game_leaderboardSwitched",e)},t.prototype.LogEvent_InitShare=function(){this.firebaseLogEvent("Initialization of Share action",{context:s.Utils.enumToString(a.AppContext,a.Main.getAppContext())})},t.prototype.LogEvent_ShareCompletion=function(e){this.firebaseLogEvent("Completion of Share action",{Channel:e,context:s.Utils.enumToString(a.AppContext,a.Main.getAppContext())})},t.prototype.LogEvent_GameAdsStart=function(e,t,o,n,r,i,a,l,u){void 0===u&&(u="null"),this.firebaseLogEvent("game.ad.start",{nbAdsLtd:e,nbAdsSession:t,adIsAvailable:o?1:0,itemRewardID:n,itemRewardValue:r,adsProvider:i,adsType:s.Utils.enumToString(c.AdsType,a),isAdBlocked:window.isAdsBlocked?1:0,pointcutID:l,actualSec:Date.now()-this.adsTimeStamps.ads_request_start,gameCode:h.NgcBuildConfig.platformGameID,adUnitID:h.NgcBuildConfig.platformGameID+"_"+l,tleID:u}),this.adsTimeStamps.ads_start=Date.now()},t.prototype.LogEvent_GameAdsStop=function(e,t,o,n,r,i,a,l,u,p){void 0===u&&(u=!1),void 0===p&&(p="null"),this.firebaseLogEvent("game.ad.stop",{itemRewardID:e,itemRewardValue:t,isLoaded:o,adsProvider:n,adsType:s.Utils.enumToString(c.AdsType,r),adViewingDuration:Math.round(i/1e3),maxReached:a,isAdBlocked:window.isAdsBlocked?1:0,isAdAborted:u?1:0,pointcutID:l,actualSec:Date.now()-this.adsTimeStamps.ads_start,totalSec:Date.now()-this.adsTimeStamps.ads_request_start,gameCode:h.NgcBuildConfig.platformGameID,adUnitID:h.NgcBuildConfig.platformGameID+"_"+l,tleID:p})},t.prototype.LogEvent_GameAdsRequest=function(e,t,o,n,r,i){this.firebaseLogEvent("game.ad.request",{adIsAvailable:e,itemRewardID:t,itemRewardValue:o,adsProvider:n,adsType:s.Utils.enumToString(c.AdsType,r),isAdBlocked:window.isAdsBlocked?1:0,pointcutID:i,gameCode:h.NgcBuildConfig.platformGameID,adUnitID:h.NgcBuildConfig.platformGameID+"_"+i}),this.adsTimeStamps.ads_request_start=Date.now()},t.prototype.LogEvent_ShareInit=function(e){this.firebaseLogEvent("share_init",{context:e})},t.prototype.LogEvent_ShareClick=function(e,t){this.firebaseLogEvent("share_click",{context:e,shareChannel:t})},t.prototype.LogEvent_ShareComplete=function(e,t){this.firebaseLogEvent("share_complete",{context:e,shareChannel:t})},t.prototype.LogEvent_LoginAttempt=function(e){this.firebaseLogEvent("login_attempt",{socialNetwork:e})},t.prototype.LogEvent_LoginSuccess=function(e,t){this.firebaseLogEvent("login_success",{id:e,name:t.Name,avatar:t.AvatarUrl})},t.prototype.LogEvent_MoreGameInit=function(e){this.firebaseLogEvent("more_game_init",{context:e})},t.prototype.LogEvent_BrandGameInit=function(e){this.firebaseLogEvent("brand_site_init",{context:e})},t.prototype.LogEvent_LikeUsInit=function(e){this.firebaseLogEvent("like_us_init",{context:e})},t.prototype.LogEvent_LikeUsSuccess=function(e){this.firebaseLogEvent("like_us_success",{likeUsSuccess:e})},t.prototype.LogEvent_AddToHomeInit=function(e){this.firebaseLogEvent("add_to_home_init",{context:e})},t.prototype.LogEvent_AddToHomeComplete=function(e){this.firebaseLogEvent("add_to_home_complete",{context:e})},t.prototype.LogEvent_NameEvent=function(e){var t={username:e};t.checker=p.default.changeNameLocation||"MainMenu",this.firebaseLogEvent("player_nameChanged",t)},t.prototype.LogEvent_GamePlayStart=function(){this.firebaseLogEvent("game_play_start",{clientTimestamp:Date.now()})},t.prototype.LogEvent_PlayerClickedCreatePartyRoom=function(e){this.joinCreateRoomTimestamp=Date.now(),this.lastRoomID=e.roomID||"null",this.firebaseLogEvent("player_partyroomCreated",e)},t.prototype.LogEvent_PlayerClickedStartPartyGame=function(e){e.totalSec=Date.now()-this.joinCreateRoomTimestamp,e.roundID=y.NgcGame.roundID||"null",this.firebaseLogEvent("game_partyroomStarted",e)},t.prototype.LogEvent_InvitePartyInit=function(e){this.firebaseLogEvent("invite_party_init",e)},t.prototype.LogEvent_JointRoom=function(e){this.joinCreateRoomTimestamp=Date.now(),this.lastRoomID=e.roomID||"null",this.firebaseLogEvent("player_partyroomJoined",e)},t.prototype.LogEvent_ReturnParty=function(e){this.firebaseLogEvent("return_party_room",e)},t.prototype.LogEvent_LeaveParty=function(e){(e=e||{}).roomID=this.lastRoomID||"null",e.totalSec=this.joinCreateRoomTimestamp?Date.now()-this.joinCreateRoomTimestamp:"null",this.firebaseLogEvent("game_partyroomClosed",e)},t.prototype.LogEvent_GameTechWarning=function(e){e.roundID=y.NgcGame.roundID||"null",e.roundTime=e.roundTime||Date.now()-this.roundQueueStartTimestamp,e.gameMode=d.NgcGameModeManager.inst.selectedModeId||"null",e.currentFPS=e.currentFPS||"null",e.averageFPS=e.averageFPS||"null",e.maxFPS=e.maxFPS||"null",e.minFPS=e.minFPS||"null",e.currentPing=e.currentPing||"null",e.averagePing=e.averagePing||"null",e.maxPing=e.maxPing||"null",e.minPing=e.minPing||"null",e.checker=e.checker||"null",this.firebaseLogEvent("game_techWarning",e)},t.prototype.LogEvent_GameTechMessage=function(e){e.currentFPS=e.currentFPS||"null",e.averageFPS=e.averageFPS||"null",e.maxFPS=e.maxFPS||"null",e.minFPS=e.minFPS||"null",e.currentPing=e.currentPing||"null",e.averagePing=e.averagePing||"null",e.maxPing=e.maxPing||"null",e.maxPing=e.maxPing||"null",e.minPing=e.minPing||"null",e.checker=e.checker||"null",this.techMessageTimestamp=Date.now(),this.firebaseLogEvent("game_techMessage",e)},t.prototype.LogEvent_GameTechMessageRespond=function(e){e.currentFPS=e.currentFPS||"null",e.averageFPS=e.averageFPS||"null",e.maxFPS=e.maxFPS||"null",e.minFPS=e.minFPS||"null",e.currentPing=e.currentPing||"null",e.averagePing=e.averagePing||"null",e.maxPing=e.maxPing||"null",e.maxPing=e.maxPing||"null",e.minPing=e.minPing||"null",e.checker=e.checker||"null",e.actualSec=this.techMessageTimestamp-Date.now(),this.firebaseLogEvent("game_techMessageRespond",e)},t.prototype.LogEvent_GameTechMessageUnsupported=function(e){e.osVersion=e.osVersion||"null",e.browserVersion=e.browserVersion||"null",this.firebaseLogEvent("game_techUnsupported",e)},t.prototype.LogEvent_OnboardingDailyloginCollected=function(e){var t="onboarding_dailyloginCollected";p.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",e.actualSec=this.timeStamp_gameOverClicked?Date.now()-this.timeStamp_gameOverClicked:"null",this.firebaseLogEvent(t,e),p.default.setOnBoardingEventFlags(t),p.default.setOnBoardingEventFlags("onboarding_dailyVideoRequest"),p.default.setOnBoardingEventFlags("onboarding_dailyVideoStart"),p.default.setOnBoardingEventFlags("onboarding_dailyVideoEnd"))},t.prototype.LogEvent_OnboardingGameSpectatorEnd=function(e){var t="onboarding_gameSpectatorEnd";p.default.totalRoundCount>0||p.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",e.actualSec=this.timeStamp_gameOver?Date.now()-this.timeStamp_gameOver:"null",this.firebaseLogEvent(t,e),p.default.setOnBoardingEventFlags(t))},t.prototype.LogEvent_OnboardingGameRoundOverClicked=function(e){var t="onboarding_gameOverClicked";p.default.totalRoundCount>0||p.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",e.actualSec=this.timeStamp_gameOver?Date.now()-this.timeStamp_gameOver:"null",this.firebaseLogEvent(t,e),p.default.setOnBoardingEventFlags(t))},t.prototype.LogEvent_OnboardingDailyVideoRequest=function(e){var t="onboarding_dailyVideoRequest";p.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",this.firebaseLogEvent(t,e),p.default.setOnBoardingEventFlags(t))},t.prototype.LogEvent_OnboardingDailyVideoStart=function(e){var t="onboarding_dailyVideoStart";p.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",this.firebaseLogEvent(t,e),p.default.setOnBoardingEventFlags(t))},t.prototype.LogEvent_OnboardingDailyVideoEnd=function(e){var t="onboarding_dailyVideoEnd";p.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",this.firebaseLogEvent(t,e),p.default.setOnBoardingEventFlags(t),this.onboardDailyVideoEndTimeStamp=Date.now())},t.prototype.LogEvent_OnboardingPreR2InterRequest=function(e){var t="onboarding_preR2InterRequest";p.default.totalRoundCount<1||p.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",e.actualSec=this.onboardDailyVideoEndTimeStamp?Date.now()-this.onboardDailyVideoEndTimeStamp:"null",this.firebaseLogEvent(t,e),p.default.setOnBoardingEventFlags(t))},t.prototype.LogEvent_OnboardingPreR2InterStart=function(e){var t="onboarding_preR2InterStart";1===p.default.totalRoundCount&&(p.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",this.firebaseLogEvent(t,e),p.default.setOnBoardingEventFlags(t)))},t.prototype.LogEvent_OnboardingPreR2InterEnd=function(e){var t="onboarding_preR2InterEnd";1===p.default.totalRoundCount&&(p.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",this.firebaseLogEvent(t,e),p.default.setOnBoardingEventFlags(t)))},t.prototype.LogEvent_OnboardingClaim2xVideoRequest=function(e){var t="onboarding_claim2xVideoRequest";p.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",e.actualSec=this.timeStamp_gameOverClicked?Date.now()-this.timeStamp_gameOverClicked:"null",this.firebaseLogEvent(t,e),p.default.setOnBoardingEventFlags(t))},t.prototype.LogEvent_OnboardingClaim2xVideoStart=function(e){var t="onboarding_claim2xVideoStart";p.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",this.firebaseLogEvent(t,e),p.default.setOnBoardingEventFlags(t))},t.prototype.LogEvent_OnboardingClaim2xVideoEnd=function(e){var t="onboarding_claim2xVideoEnd";p.default.onboardingEventFlags[t]||((e=e||{}).totalSec=this.timeStamp_loadingGameStart?Date.now()-this.timeStamp_loadingGameStart:"null",this.firebaseLogEvent(t,e),p.default.setOnBoardingEventFlags(t))},t.prototype.LogEvent_XInOneOfferDisplay=function(e){e=e||{},this.firebaseLogEvent("Xinoneoffer_display",e)},t.prototype.LogEvent_XInOneOfferPurchased=function(e){e=e||{},this.firebaseLogEvent("Xinoneoffer_purchased",e)},t.prototype.LogEvent_XInOneOfferClosed=function(e){e=e||{},this.firebaseLogEvent("Xinoneoffer_closed",e)},t.prototype.markOnboardingClaim2xVideoEvents=function(){p.default.setOnBoardingEventFlags("onboarding_claim2xVideoRequest"),p.default.setOnBoardingEventFlags("onboarding_claim2xVideoStart"),p.default.setOnBoardingEventFlags("onboarding_claim2xVideoEnd")},t.prototype.isLoggedIn=function(){return null!=this.firebaseAnalytics},t.prototype.getTelemetrySystem=function(){return u.TelemetrySystem.Firebase},t.prototype.getName=function(){return"Firebase"},t.prototype._preInit=function(){if(window.hasOwnProperty("firebaseInfo"))this.firebaseApp=window.firebaseInfo.firebaseApp,this.firebaseAnalytics=window.firebaseInfo.firebaseAnalytics;else if(!l.NgcPlatform.isOfflineMode()){var e="Live"===h.NgcBuildConfig.deploymentEnvironment?o.LIVE_CREDENTIALS:o.UAT_CREDENTIALS;if(this.firebaseApp=firebase.initializeApp(e),!this.firebaseApp)return console.error("Failed to initialize Firebase"),new Promise(function(e){e(!1)});if(this.firebaseAnalytics=firebase.analytics(),!this.firebaseAnalytics)return console.error("Failed to initialize firebase analytics"),new Promise(function(e){e(!1)})}return new Promise(function(e){e("Telemetry_impl_Firebase pre-initialized")})},t.prototype._init=function(){return this.initialized=!0,new Promise(function(e){e("Telemetry_impl_Firebase initialized")})},t.prototype._login=function(){throw new Error("Method not implemented.")},t.prototype._getParameter=function(){return Promise.resolve("")},t.prototype._setUserValue=function(){return new Promise(function(e){e(null)})},t.UAT_CREDENTIALS={apiKey:"AIzaSyDXuVubuaK6ECD1y-cvkBAU2o0zi-eXsak",authDomain:"hungry-shark-uat.firebaseapp.com",projectId:"hungry-shark-uat",storageBucket:"hungry-shark-uat.appspot.com",messagingSenderId:"138523519593",appId:"1:138523519593:web:d510fcfe89dd2260f550f8",measurementId:"G-XK98EDDHMW"},t.LIVE_CREDENTIALS={apiKey:"AIzaSyDJEGeNfP54DQjzz6-9YCYo0RXDaWs68jo",authDomain:"hungry-shark-6bb74.firebaseapp.com",databaseURL:"https://hungry-shark-6bb74.firebaseio.com",projectId:"hungry-shark-6bb74",storageBucket:"hungry-shark-6bb74.appspot.com",messagingSenderId:"69867252644",appId:"1:69867252644:web:b6da28ebfbcb3af5b06f31",measurementId:"G-YWH8HCBRMY"},i([b(cc.TextAsset)],t.prototype,"loginData",void 0),o=i([S],t)}(u.NgcTelemetry);o.default=N,cc._RF.pop()},{"../../../Scripts/Main":"Main","../../Core/Utils":"Utils","../../CrossFeatures/CrownRoad/Script/CrownRoadManager":"CrownRoadManager","../../CrossFeatures/EndGameFlow/Reward/RewardUI":"RewardUI","../../CrossFeatures/GameMode/Script/NgcGameModeManager":"NgcGameModeManager","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/NgcGame":"NgcGame","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../Ads/Ads":"Ads","../Inventory/Inventory":"Inventory","../Platform/Platform":"Platform","../Social/Social":"Social","./Telemetry":"Telemetry"}],Telemetry:[function(e,t,o){"use strict";cc._RF.push(t,"0759aua18FGpb1CgPa/I61l","Telemetry");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcTelemetry=o.TelemetrySystem=void 0;var s=e("../../GameFramework/Scripts/BuildConfig"),c=e("../../SDK/Nano/NanoSrv"),l=e("../Platform/Platform"),u=e("../Service"),p=cc._decorator,d=p.ccclass;p.property,function(e){e[e.DevFake=0]="DevFake",e[e.Firebase=1]="Firebase",e[e.Null=2]="Null"}(o.TelemetrySystem||(o.TelemetrySystem={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isActive=!0,t._trackingConfig={mandatoryEvents:[],mandatoryParams:[]},t._isReceivedTrackingConfig=!1,t.timeStamp_loadingGameStart=null,t.initialized=!1,t.timersSuspendedAt=0,t.timers={},t.customParams={},t}var o;return r(t,e),o=t,t.prototype.preInit=function(e){return this._preInit(e)},Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},set:function(e){this._isActive=e},enumerable:!1,configurable:!0}),t.prototype.isPlatformBlocked=function(){return l.NgcPlatform.isOfflineMode()||this.blockedPlatforms().indexOf(s.NgcBuildConfig.buildPlatform)>=0},t.prototype.blockedPlatforms=function(){var e=[];return e.push("HUZ"),e},t.prototype.getGDPRTrackingConfig=function(){return this._isReceivedTrackingConfig?this._trackingConfig:this._getTrackingConfigs()},t.prototype.isMandatoryEvent=function(e){return this._isReceivedTrackingConfig||this.getGDPRTrackingConfig(),-1!==this._trackingConfig.mandatoryEvents.indexOf(e)},t.prototype.isMandatoryParam=function(e){return-1!==this._trackingConfig.mandatoryParams.indexOf(e)},t.prototype._getTrackingConfigs=function(){var e=c.default.inst.getCurGameInfo().gameParams,t=e&&e.GDPR_Tracking;return this._isReceivedTrackingConfig=!0,this._trackingConfig.mandatoryEvents=(t.mandatoryEvents||"").trim().split(/\r\n|\r|\n|,| /),this._trackingConfig.mandatoryParams=(t.mandatoryParams||"").trim().split(/\r\n|\r|\n|,| /),this._trackingConfig},t.prototype.sendFunnelEvents=function(){var e=this,t=window.trackingFunnelEvents||[];t.forEach(function(n,r){var i=n.param;if("loading_gameStart"===n.name&&(e.timeStamp_loadingGameStart=n.param.clientTimestamp),r>0){var a=t[r-1].param;i.actualSec=i.clientTimestamp-a.clientTimestamp}o.inst.LogCustomEvent(n.name,i)}),window.trackingFunnelEvents=[]},t.prototype.isInitalized=function(){return this.initialized},t.prototype.init=function(e){var t=this;return this.initialized?new Promise(function(e){e(t.initialized)}):this._init(e)},t.prototype.suspendTimers=function(){0!=this.timersSuspendedAt&&console.warn("Timers were already suspended when suspend was called again!"),this.timersSuspendedAt=Date.now()},t.prototype.resumeTimers=function(){if(0!=this.timersSuspendedAt){var e=Date.now()-this.timersSuspendedAt,t=this;Object.keys(this.timers).forEach(function(o){var n=t.timers[o];n.startTime+=e,t.timers[o]=n}),this.timersSuspendedAt=0}else console.warn("Timers were not suspended. Resume ignored")},t.prototype.login=function(e){return!!this.isLoggedIn()||(this._login(e,function(){}),!0)},t.setGameImportantInfos=function(e,t){o.gameImportantInfos={},o.gameImportantInfos.coinBalanceID=e,o.gameImportantInfos.itemCategories=t||[]},t.prototype.LogCustomEvent=function(e,t){this.LogEvent_CustomEvent(e,t)},t.prototype.LogEvent_BeginTimer=function(e){if(this.timers.hasOwnProperty(e))console.warn('Telemetry: beginTimer( "'+e+'" ) already called');else{var t=new Date;this.timers[e]={startTime:t.getTime()}}},t.prototype.LogEvent_EndTimer=function(e,t){if(this.timers.hasOwnProperty(e)){var o=new Date,n=this.timers[e],r=(o.getTime()-n.startTime)/1e3;return t&&this.LogEvent_ReportTiming(e,r),delete this.timers[e],r}console.warn('Telemetry: endTimer( "'+e+'" ) - did not get first get a beginTimer()!')},t.prototype.setCustomExtraParamsForEvent=function(e,t){this.customParams[e]=t},t.prototype.addExtraParams=function(e,t){if(this.customParams.hasOwnProperty(e)){var o=this.customParams[e];t=i(i({},t),o)}return t},t.prototype.onLogin=function(e){e(null,"OK")},t.prototype.getParameter=function(e){return this._getParameter(e)},t.prototype.setUserValue=function(e){this._setUserValue(e)},t.srvInstances=[],t.inst=null,t.creationTable={},t.gameImportantInfos=null,o=a([d],t)}(u.NgcService);o.NgcTelemetry=f,cc._RF.pop()},{"../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../SDK/Nano/NanoSrv":"NanoSrv","../Platform/Platform":"Platform","../Service":"Service"}],TextEffectController:[function(e,t,o){"use strict";cc._RF.push(t,"c79ceXJPWxNrLUG7sxUS2BM","TextEffectController");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../../globals"),s=e("./textEffectGoldRush"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.goldrushTextEffect=null,t}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.startEffectGoldRush=function(){var e=cc.instantiate(this.goldrushTextEffect);e.parent=this.node,e.getComponent(s.default).playTextEffect("GOLD","RUSH",!0,!1)},t.prototype.startEffectDoubleDamage=function(){var e=cc.instantiate(this.goldrushTextEffect);e.parent=this.node,e.getComponent(s.default).playTextEffect("DOUBLE","DAMAGE",!1,!0)},t.inst=null,i([u(cc.Prefab)],t.prototype,"goldrushTextEffect",void 0),o=i([l],t)}(cc.Component);o.default=p,a.default.TextEffectController=p,cc._RF.pop()},{"../../globals":"globals","./textEffectGoldRush":"textEffectGoldRush"}],ThrobTween:[function(e,t,o){"use strict";cc._RF.push(t,"3bffbf3f1tNpaoKVr8xw8Y2","ThrobTween");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.from=1,t.to=2,t.cycleTimeSec=1,t}return r(t,e),t.prototype.start=function(){cc.tween(this.node).repeatForever(cc.tween(this.node).to(this.cycleTimeSec/2,{scale:this.from},{easing:function(e){return e*e}}).to(this.cycleTimeSec/2,{scale:this.to},{easing:function(e){return e*e}})).start()},i([c],t.prototype,"from",void 0),i([c],t.prototype,"to",void 0),i([c],t.prototype,"cycleTimeSec",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],TimerLabelLocalized:[function(e,t,o){"use strict";cc._RF.push(t,"8d384wPOCZMxYqHIIwpxz2q","TimerLabelLocalized");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcTimerLabelLocalized=o.TimerLabelType=void 0;var a,s=e("./LabelLocalized"),c=e("./LocalizedManager"),l=cc._decorator,u=l.ccclass,p=l.property,d=l.menu;(function(e){e[e.SIMPLE=0]="SIMPLE",e[e.SEMI=1]="SEMI",e[e.DETAIL=2]="DETAIL"})(a=o.TimerLabelType||(o.TimerLabelType={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayStyle=a.SIMPLE,t.showDay=!0,t.showHour=!0,t.showMin=!0,t.showSec=!0,t.autoRemoveWhenZero=!0,t.showUnderThresholdStatus=!0,t.dynamicFormat=!0,t._timeCountInterval=null,t._realTimeCounting=!1,t._counting=!1,t._originalRemainingTime=null,t._timerExpired=!1,t._timerExpiredCallback=null,t._timeText={day:"",hour:"",min:"",sec:""},t.isEnglish=!1,t}return r(t,e),t.prototype.onLoad=function(){this.displayStyle===a.SEMI&&(this._timeText.day="d",this._timeText.hour="h",this._timeText.min="m",this._timeText.sec="s"),this.isEnglish="en"==c.NgcLocalizedManager.curLang},t.prototype.setTimerExpiredCallback=function(e){this._timerExpiredCallback=e},t.prototype.onTimerExpiredCallback=function(){this._timerExpiredCallback&&this._timerExpiredCallback()},t.prototype.startCount=function(e,t){void 0===t&&(t=!0),this._timerExpired=!1,this._realTimeCounting=t,this._counting=!0;var o=Date.now()+e;this._realTimeCounting?(this._originalRemainingTime=o,this.updateLabelContent(this.getRemainingDayAndTime(o))):(this._originalRemainingTime=e,this.updateLabelContent(this.getTimeObject(this._originalRemainingTime)))},t.prototype.update=function(e){this._counting&&!this._timerExpired&&(this._realTimeCounting?(this.updateLabelContent(this.getRemainingDayAndTime(this._originalRemainingTime)),this._originalRemainingTime-Date.now()<=0&&(this.onTimerExpiredCallback(),this._timerExpired=!0)):(this._originalRemainingTime-=1e3*e,this.updateLabelContent(this.getTimeObject(this._originalRemainingTime)),this._originalRemainingTime<=0&&(this.onTimerExpiredCallback(),this._timerExpired=!0)))},t.prototype.getTimeText=function(e,t){return this.displayStyle===a.DETAIL&&(this._timeText.day=c.NgcLocalizedManager.t("NGG_TIME_DAY"+(e>1?"_MULTI":"")).text,this._timeText.hour=c.NgcLocalizedManager.t("NGG_TIME_HOUR"+(e>1?"_MULTI":"")).text,this._timeText.min=c.NgcLocalizedManager.t("NGG_TIME_MINUTE"+(e>1?"_MULTI":"")).text,this._timeText.sec=c.NgcLocalizedManager.t("NGG_TIME_SECOND"+(e>1?"_MULTI":"")).text),this._timeText[t]},t.prototype.updateLabelContentManually=function(e,t,o,n){this.updateLabelContent({day:e,hour:t,min:o,sec:n})},t.prototype.updateLabelContent=function(e){var t="",o=this.showDay,n=this.showHour,r=this.showMin,i=this.showSec;this.autoRemoveWhenZero&&(0===e.day&&(o=!1),0===e.hour&&(n=!1),0===e.min&&(r=!1),0===e.showSec&&(i=!1));var s=this.showUnderThresholdStatus&&0==e.hour&&0==e.day&&e.min<1;switch(this.displayStyle){case a.SEMI:this.dynamicFormat?e.day>0?(t+=o?e.day.toString().padStart(2,"0")+""+this.getTimeText(e.day,"day")+" ":"",t+=n?e.hour.toString().padStart(2,"0")+""+this.getTimeText(e.hour,"hour")+" ":""):e.hour>0?(t+=n?e.hour.toString().padStart(2,"0")+""+this.getTimeText(e.hour,"hour")+" ":"",t+=r?e.min.toString().padStart(2,"0")+""+this.getTimeText(e.min,"min")+" ":""):e.min>0?t+=r?e.min.toString().padStart(2,"0")+""+this.getTimeText(e.min,"min")+" ":"":e.sec>0&&(t+=i?e.sec.toString().padStart(2,"0")+""+this.getTimeText(e.sec,"sec")+" ":""):(t+=o?e.day.toString().padStart(2,"0")+""+this.getTimeText(e.day,"day")+" ":"",t+=n?e.hour.toString().padStart(2,"0")+""+this.getTimeText(e.hour,"hour")+" ":"",t+=r?e.min.toString().padStart(2,"0")+""+this.getTimeText(e.min,"min")+" ":"",t+=i?e.sec.toString().padStart(2,"0")+""+this.getTimeText(e.sec,"sec")+" ":""),s&&(t=c.NgcLocalizedManager.t("NGG_TIME_UNDER_MINUTE").text);break;case a.DETAIL:this.dynamicFormat?e.day>0?(t+=o?this.getTimeText(e.day,"day").replace("X",e.day.toString())+" ":"",t+=n?this.getTimeText(e.hour,"hour").replace("X",e.hour.toString())+" ":""):e.hour>0?(t+=n?this.getTimeText(e.hour,"hour").replace("X",e.hour.toString())+" ":"",t+=r?this.getTimeText(e.min,"min").replace("X",e.min.toString())+" ":""):e.min>0&&(t+=r?this.getTimeText(e.min,"min").replace("X",e.min.toString())+" ":""):(t+=o?this.getTimeText(e.day,"day").replace("X",e.day.toString())+" ":"",t+=n?this.getTimeText(e.hour,"hour").replace("X",e.hour.toString())+" ":"",t+=r?this.getTimeText(e.min,"min").replace("X",e.min.toString())+" ":""),s&&(t=c.NgcLocalizedManager.t("NGG_TIME_UNDER_MINUTE").text);break;case a.SIMPLE:if(o){t+=o?e.day.toString()+" "+this.getTimeText(e.day,"day")+" ":"";var l=!1;this.showHour&&(t+=e.hour.toString().padStart(2,"0"),l=!0),this.showMin&&(t+=l?":":"",t+=e.min.toString().padStart(2,"0"),l=!0),this.showSec&&(t+=l?":":"",t+=e.sec.toString().padStart(2,"0"),l=!0)}else l=!1,this.showHour&&(t+=e.hour.toString().padStart(2,"0"),l=!0),this.showMin&&(t+=l?":":"",t+=e.min.toString().padStart(2,"0"),l=!0),this.showSec&&(t+=l?":":"",t+=e.sec.toString().padStart(2,"0"),l=!0)}this.string=t},t.prototype.getRemainingDayAndTime=function(e){var t;return t=e-Date.now(),this.getTimeObject(t)},t.prototype.getTimeObject=function(e){var t=Math.floor(e/1e3%60),o=Math.floor(e/1e3/60%60),n=Math.floor(e/1e3/60/60%24),r=Math.floor(e);!1===this.showDay&&(n=Math.floor(e/1e3/60/60));var i=Math.floor(e/1e3/60/60/24);return{day:i=i>0?i:0,hour:n=n>0?n:0,min:o=o>0?o:0,sec:t=t>0?t:0,extra:r=r>0?r:0}},t.prototype.onDestroy=function(){},i([p({type:cc.Enum(a)})],t.prototype,"displayStyle",void 0),i([p],t.prototype,"showDay",void 0),i([p],t.prototype,"showHour",void 0),i([p],t.prototype,"showMin",void 0),i([p],t.prototype,"showSec",void 0),i([p],t.prototype,"autoRemoveWhenZero",void 0),i([p],t.prototype,"showUnderThresholdStatus",void 0),i([p],t.prototype,"dynamicFormat",void 0),i([u,d("NGC/LocalizedTimerLabel")],t)}(s.NgcLabelLocalized);o.NgcTimerLabelLocalized=f,cc._RF.pop()},{"./LabelLocalized":"LabelLocalized","./LocalizedManager":"LocalizedManager"}],TipBackAndForth:[function(e,t,o){"use strict";cc._RF.push(t,"f42337A/lZC/54BOHCKt8dA","TipBackAndForth");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t.angle=30,t.speed=2,t.cnt=0,t}return r(t,e),t.prototype.start=function(){},t.prototype.update=function(e){this.cnt+=e;var t=this.cnt%this.speed/this.speed,o=Math.cos(6.28*t)*this.angle;this.node.angle=o},i([c(cc.Label)],t.prototype,"label",void 0),i([c],t.prototype,"text",void 0),i([c],t.prototype,"angle",void 0),i([c],t.prototype,"speed",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],TipManager:[function(e,t,o){"use strict";cc._RF.push(t,"b13ef1MjtVE/oPWhA3Etpi/","TipManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},a=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcTipManager=o.Tip=o.Type_Tip=void 0;var l,u=e("../../../Core/Utils"),p=e("../../../GameFramework/Scripts/BuildConfig"),d=e("../../../GameFramework/Scripts/Localized/LocalizedManager"),f=cc._decorator,h=f.ccclass,g=f.property;(function(e){e[e.Mobile=0]="Mobile",e[e.Desktop=1]="Desktop",e[e.Both=2]="Both"})(l=o.Type_Tip||(o.Type_Tip={}));var y=function(e,t,o,n){void 0===e&&(e=l.Both),void 0===t&&(t=""),void 0===o&&(o=""),void 0===n&&(n=null),this.type=e,this.textKey=t,this.imageName=o,this.spriteFrame=n};o.Tip=y;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.localTipConfig=null,t.tipLabel=null,t.tipLabelNext=null,t.tipSprite=null,t.tipSpriteNext=null,t.COUNTDOWN_TIME_SHOW_TIP=3,t.arrowPre=null,t.arrowNext=null,t.timeShowTip=0,t._curTip=null,t}var o;return r(t,e),o=t,t.getLoadingHints=function(){return this.tips},t.getLocalizationTexts=function(){return this.localization},Object.defineProperty(t,"loadingHintsInit",{get:function(){return this._loadingHintsInit},set:function(e){this._loadingHintsInit=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isUsingRemoteConfig",{get:function(){return this._isUsingRemoteConfig},set:function(e){this._isUsingRemoteConfig=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"curTip",{get:function(){return this._curTip},set:function(e){var t=this;if(!(e>=o.tips.length||e<0)){var n=o.tips[e],r=function(e){return e?e.replace(/\\n/gi,"\n"):""};if(null===this._curTip)cc.tween(this.tipLabel.node).call(function(){var e=o.isUsingRemoteConfig?r(o.localization[n.textKey][d.NgcLocalizedManager.curLang]):d.NgcLocalizedManager.t(n.textKey).text;t.tipLabel.string=e,t.tipLabel.node.x=0}).to(0,{opacity:255}).start(),cc.tween(this.tipSprite.node).call(function(){n.spriteFrame&&(t.tipSprite.spriteFrame=n.spriteFrame)}).to(.3,{opacity:255}).start();else{var i=this.tipLabel;this.tipLabel=this.tipLabelNext,this.tipLabelNext=i;var a=this.tipSprite;this.tipSprite=this.tipSpriteNext,this.tipSpriteNext=a,cc.tween(this.tipLabel.node).call(function(){var e=o.isUsingRemoteConfig?r(o.localization[n.textKey][d.NgcLocalizedManager.curLang]):d.NgcLocalizedManager.t(n.textKey).text;t.tipLabel.string=e,t.tipLabel.node.x=500}).to(.3,{x:0}).start(),cc.tween(this.tipSprite.node).call(function(){t.tipSprite.spriteFrame=n.spriteFrame,t.tipSprite.node.x=500}).to(.3,{x:0}).start(),cc.tween(this.tipLabelNext.node).to(.3,{x:-500}).start(),cc.tween(this.tipSpriteNext.node).to(.3,{x:-500}).start()}this.arrowPre.active=0!==e,this.timeShowTip=this.COUNTDOWN_TIME_SHOW_TIP,this._curTip=e}},enumerable:!1,configurable:!0}),t.prototype.getRemoteConfig=function(){var e;return s(this,void 0,Promise,function(){var t,o,n,r,i,a,s;return c(this,function(c){switch(c.label){case 0:t=p.NgcBuildConfig.platformGameID,o=p.NgcBuildConfig.buildVersionName,n=p.NgcBuildConfig.SDK.NanoSrv,r=n.url+"/public/game/"+t+"/?version="+o,c.label=1;case 1:return c.trys.push([1,4,,5]),[4,fetch(r)];case 2:if(!(i=c.sent()).ok)throw new Error("[Loading Hint] Cannot get remote config from Nano Services | HTTP_ERROR_STATUS: "+i.status);return[4,i.json()];case 3:return a=c.sent(),[2,null===(e=a.data)||void 0===e?void 0:e.loadingHint];case 4:return s=c.sent(),console.error(s),[2];case 5:return[2]}})})},t.prototype.loadRemoteConfig=function(){return s(this,void 0,Promise,function(){var e,t,n,r,i;return c(this,function(a){switch(a.label){case 0:return[4,this.getRemoteConfig()];case 1:if(!(e=a.sent()))return[2];t=e.localization,n=e.localizationUrl,r=e.hints,o.localization=t,o.localizationUrl=n,a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.loadRemoteTips(r)];case 3:return[2,a.sent()];case 4:return i=a.sent(),console.error(i),[3,5];case 5:return[2]}})})},t.prototype.loadRemoteTips=function(e){return s(this,void 0,Promise,function(){var t=this;return c(this,function(){return[2,new Promise(function(n,r){return s(t,void 0,void 0,function(){var t;return c(this,function(){return t=[],e.forEach(function(i){cc.assetManager.loadRemote(i.image,o.downloaderOptions,function(a,s){if(a)return r(a);var c=new y;return c.textKey=i.text,c.type=l.Both,c.spriteFrame=new cc.SpriteFrame(s),t.push(c),e.length===t.length?(o.isUsingRemoteConfig=!0,n(t)):void 0})}),[2]})})})]})})},t.prototype.onLoad=function(){return s(this,void 0,void 0,function(){var e,t;return c(this,function(n){switch(n.label){case 0:return o.inst||(o.inst=this),this.arrowNext.active=!1,this.tipLabel.node.opacity=0,this.tipSprite.node.opacity=0,e=[],p.NgcBuildConfig.offlineMode?[3,2]:[4,this.loadRemoteConfig()];case 1:e=n.sent(),n.label=2;case 2:return(t=this.parseInputConfigFile())&&0!==t.length?[4,this.loadTipSpriteFrames(t).catch(console.error)]:[3,4];case 3:n.sent(),n.label=4;case 4:return o.tips=o.isUsingRemoteConfig?e:t,this.arrowNext.active=1!==o.tips.length,this.curTip=u.Utils.randomFromTo(0,o.tips.length-1),o.loadingHintsInit=!0,[2]}})})},t.prototype.start=function(){["ar","hi","jp","kr","ru","zh","cn"].includes(d.NgcLocalizedManager.curLang)&&(this.tipLabel.fontSize=.7*this.tipLabel.fontSize,this.tipLabelNext.fontSize=.7*this.tipLabelNext.fontSize)},t.prototype.nextTip=function(){if(!(o.tips.length<=1)){var e=this.curTip+1;e>=o.tips.length&&(e=0),this.curTip=e}},t.prototype.update=function(e){!d.NgcLocalizedManager.firstTimeInit&&o.loadingHintsInit&&(this.timeShowTip-=e,this.timeShowTip<0&&this.nextTip())},t.prototype.parseInputConfigFile=function(){var e=[],t=this.localTipConfig.text.split("\r\n");t.shift();try{t.forEach(function(t){var o=t.split("|"),n=o[0];if(null!=n&&0!=n.length&&""!=n){var r=o[1],i=l.Both;switch(o[2].toLowerCase()){case"mobile":i=l.Mobile;break;case"desktop":i=l.Desktop;break;default:i=l.Both}var a=new y(i,n,r,null);i==l.Both?e.push(a):cc.sys.isMobile&&i===l.Mobile?e.push(a):cc.sys.isMobile||i!==l.Desktop||e.push(a)}})}catch(o){return console.error("Error reading configTip file. Format error?"),null}return e},t.prototype.loadTipSpriteFrames=function(e){return s(this,void 0,Promise,function(){return c(this,function(){return[2,new Promise(function(t,o){cc.assetManager.loadBundle(p.NgcBuildConfig.services.Tips.bundles,function(n,r){if(n)return o(n);var i=e.length,a=0;e.forEach(function(e){r.load(e.imageName,cc.SpriteFrame,function(n,r){if(n)return o(n);e.spriteFrame=r,i===++a&&t()})})})})]})})},t.inst=null,t.downloaderOptions=i(i({},cc.assetManager.presets.default),{maxRetryCount:1,retryInterval:1e3}),t.tips=[],t.localization=new Map,t.localizationUrl="",t._isUsingRemoteConfig=!1,t._loadingHintsInit=!1,a([g(cc.TextAsset)],t.prototype,"localTipConfig",void 0),a([g(cc.Label)],t.prototype,"tipLabel",void 0),a([g(cc.Label)],t.prototype,"tipLabelNext",void 0),a([g(cc.Sprite)],t.prototype,"tipSprite",void 0),a([g(cc.Sprite)],t.prototype,"tipSpriteNext",void 0),a([g],t.prototype,"COUNTDOWN_TIME_SHOW_TIP",void 0),a([g(cc.Node)],t.prototype,"arrowPre",void 0),a([g(cc.Node)],t.prototype,"arrowNext",void 0),o=a([h],t)}(cc.Component);o.NgcTipManager=m,cc._RF.pop()},{"../../../Core/Utils":"Utils","../../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../../GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager"}],ToxicController:[function(e,t,o){"use strict";cc._RF.push(t,"32d91zOEH1Ap7DIax65ozuc","ToxicController");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../GameCamera"),s=e("./ObstacleControllerBase"),c=e("../GameObject"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.explosionPartical=null,t.nodeToxic=null,t.dame=0,t}return r(t,e),t.prototype.start=function(){e.prototype.start.call(this),this.initParameters()},t.prototype.initParameters=function(){var e=this.obstacleData.toxic;this.dame=e.dame},t.prototype.onLoad=function(){var e=this;this.node.on("canToxicExplosion",function(){e.nodeToxic.active&&e.doExplosionToxic()},this)},t.prototype.getType=function(){return c.GameObjectType.Toxic},t.prototype.getDame=function(){return this.dame},t.prototype.doRenderExplosion=function(){var e=this;this.explosionPartical.node.active=!0,this.nodeToxic.active=!1,this.scheduleOnce(function(){e.node.destroy()},3)},t.prototype.doExplosionToxic=function(){a.default.inst.IsNodeVisible(this.node)?this.doRenderExplosion():this.node.destroy(),this.impactDameToPlayer()},t.prototype.impactDameToPlayer=function(){},i([p(cc.ParticleSystem)],t.prototype,"explosionPartical",void 0),i([p(cc.Node)],t.prototype,"nodeToxic",void 0),i([u],t)}(s.default);o.default=d,cc._RF.pop()},{"../GameCamera":"GameCamera","../GameObject":"GameObject","./ObstacleControllerBase":"ObstacleControllerBase"}],ToxicCountdown:[function(e,t,o){"use strict";cc._RF.push(t,"9423cfYc4ZJGpyjqcM13wf4","ToxicCountdown");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../Game"),s=e("../../Shared/Defines"),c=e("../TuningData"),l=cc._decorator,u=l.ccclass,p=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.bgNotify=null,t._isBlinkingBgNotify=!1,t}return r(t,e),t.prototype.reset=function(){c.default.inst.isLoaded()&&c.default.inst.getGameParameters()&&(this._curTime=c.default.inst.getGameParameters().death_zone.time_start),this.label.string="0:00",this.bgNotify.opacity=0,this._isBlinkingBgNotify=!1,cc.Tween.stopAll()},t.prototype.onEnable=function(){this.reset()},t.prototype.update=function(e){this.updateTimer(e)},t.prototype.updateTimer=function(e){if(a.default.inst.curGameState==s.GameState.Playing){var t=Math.floor(this._curTime/60),o=Math.floor(this._curTime-60*t),n=0===t?""+o:t+":"+(o<10?"0":"")+o;this.label.string=n,this._curTime-=e,this._curTime<=10&&(this._blinkBackground(),this._isBlinkingBgNotify=!0),this.isEndOfTime()&&(this.node.active=!1)}},t.prototype.isEndOfTime=function(){return this._curTime<0},t.prototype._blinkBackground=function(){this._isBlinkingBgNotify||cc.tween(this.bgNotify).repeatForever(cc.tween(this.bgNotify).to(.1,{opacity:180},{easing:function(e){return e*e}}).to(.9,{opacity:0},{easing:function(e){return e*e}})).start()},i([p(cc.Label)],t.prototype,"label",void 0),i([p(cc.Node)],t.prototype,"bgNotify",void 0),i([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../Shared/Defines":"Defines","../Game":"Game","../TuningData":"TuningData"}],ToxicWarning:[function(e,t,o){"use strict";cc._RF.push(t,"0eb82yf2XJIk5wsSJpP+Uag","ToxicWarning");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.BLINK_SPEED=255,t.nodeOpacity=0,t._curOpacity=0,t._multiply=1,t}return r(t,e),t.prototype.update=function(e){var t=this.nodeOpacity/2;this._curOpacity=this._curOpacity+e*this._multiply*this.BLINK_SPEED,this._curOpacity<t?(this._curOpacity=t,this._multiply=1):this._curOpacity>this.nodeOpacity&&(this._curOpacity=this.nodeOpacity,this._multiply=-1),this.node.opacity=this._curOpacity},i([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],TrackingManager:[function(e,t,o){"use strict";cc._RF.push(t,"e3557E6ccJNuLnNh4Fnjljf","TrackingManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../NanoGameCore/GameFramework/Scripts/BuildConfig"),s=e("../NanoGameCore/GameFramework/Scripts/NgcTrackingManager"),c=e("../NanoGameCore/Services/Telemetry/Telemetry"),l=cc._decorator,u=l.ccclass,p=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.getInst=function(){return o.inst||(o.inst=new o),o.inst},t.prototype.LogEvent_BuyItem=function(e,t,o,n,r){this.LogCustomEvent("buy_item",{itemPurchaseID:e,itemPurchaseValue:t,itemSpentID:o,itemSpentValue:n,itemSpentBalance:r})},t.prototype.LogEvent_SharkUnlockProgression=function(e,t,o,n,r){this.LogCustomEvent("shark_unlock_progression",{sharkID:e,currentProgression:t,progressionLimit:o,acquisitionChannel:n,coinBalance:r})},t.prototype.LogEvent_CurrencyIncome=function(e,t,o){this.LogCustomEvent("currency_income",{source:e,coinEarnValue:t,coinBalance:o})},t.prototype.LogEvent_CurrencyExpense=function(e,t,o){this.LogCustomEvent("currency_expense",{source:e,coinSpentValue:t,coinBalance:o})},t.prototype.LogEvent_StartBiggerBoosterDisplay=function(e){"Live"!=a.NgcBuildConfig.deploymentEnvironment&&this.LogCustomEvent("startbigger_booster_display",{isDisplayed:e?1:0})},t.prototype.LogEvent_StartBiggerBoosterComplete=function(){"Live"!=a.NgcBuildConfig.deploymentEnvironment&&this.LogCustomEvent("startbigger_booster_complete",{})},t.prototype.LogEvent_ReviveOffer=function(e,t,o,n,r){"Live"!=a.NgcBuildConfig.deploymentEnvironment&&this.LogCustomEvent("revive_offer",{totalPlayersInGame:e,scoreBalance:t,runTime:Math.round(o),gameID:n,isAccepted:r?1:0})},t.prototype.LogEvent_GameQueueStart=function(e,t,o,n,r){"Live"!=a.NgcBuildConfig.deploymentEnvironment&&this.LogCustomEvent("Game_QueueStart",{gameID:e,currentFPS:t,sharkID:o,sharkClass:n,boosterUsed:r})},t.prototype.LogEvent_GameStart=function(e,t,o,n,r,i,s){"Live"!=a.NgcBuildConfig.deploymentEnvironment&&this.LogCustomEvent("Game_Start",{gameID:e,humanPlayers:t,currentFPS:o,roundTime:Math.round(n),sharkID:r,sharkClass:i,boosterUsed:s})},t.prototype.LogEvent_game_roundOver=function(e,t,o,n,r,i,a,s,c,l,u,p,d,f,h,g,y,m,_,v,S,b,N){this.LogCustomEvent("game_roundOver",{roundID:e,currentFPS:Math.round(t),averageFPS:o,maxFPS:n,minFPS:r,roundTime:Math.round(i),playerTotalCount:a,finalPositionInActionPhase:s,coinEarnings:c,crownEarnings:l,checker:u,causeOfDeath:p,boosterUsed:d,hunterClassKilledNumber:f,brawlerClassKilledNumber:h,chargerClassKilledNumber:g,deathPosition:y,sharkID:m,sharkClass:_,sharkSize:v,preyEaten:S,playersEaten:b,scoreBonusFromMultiplier:N})},t.prototype.LogEvent_playerDied=function(e,t,o,n,r,i,a,s,c){this.LogCustomEvent("player_died",{roundID:e,currentFPS:t,causeOfDeath:o,finalPositionInActionPhase:n,checker:r,coinEarnings:i,sharkID:a,sharkSize:s,playersEaten:c})},t.prototype.LogEvent_playerRevived=function(e,t,o,n,r,i,a,s,c){this.LogCustomEvent("player_revived",{roundID:e,currentFPS:t,causeOfDeath:o,finalPositionInActionPhase:n,coinEarnings:r,sharkClass:i,sharkId:a,sharkSize:s,boosterUsed:c})},t.prototype.LogEvent_LandedWater=function(e,t,o,n){this.LogCustomEvent("game_playerLandedWater",{startPosition:e,roundTime:Math.round(t),roundID:o,sharkID:n})},t.prototype.onboarding_gameQueueStart=function(e,t){this.LogCustomEvent("onboarding_gameQueueStart",{totalSec:e,actualSec:t})},t.prototype.onboarding_gameRoundStart=function(e,t){this.LogCustomEvent("onboarding_gameRoundStart",{totalSec:e,actualSec:t})},t.prototype.onboarding_playerDropSharkR1=function(e,t,o){this.LogCustomEvent("onboarding_playerDropSharkR1",{totalSec:e,actualSec:t,startPosition:o})},t.prototype.onboarding_playerDied=function(e,t,o,n,r,i,a){this.LogCustomEvent("onboarding_playerDied",{totalSec:e,actualSec:t,roundID:o,currentFPS:n,causeOfDeath:r,finalPositionInActionPhase:i,checker:a})},t.prototype.onboarding_playerRevived=function(e,t,o,n,r,i,a){this.LogCustomEvent("onboarding_playerRevived",{totalSec:e,actualSec:t,roundID:o,currentFPS:n,causeOfDeath:r,finalPositionInActionPhase:i,checker:a})},t.prototype.onboarding_gameRoundOver=function(e,t,o,n,r,i,a,s,c,l){this.LogCustomEvent("onboarding_gameRoundOver",{totalSec:e,actualSec:t,roundID:o,currentFPS:n,causeOfDeath:r,finalPositionInActionPhase:i,checker:a,crownEarnings:s,coinEarnings:c,startPosition:l})},t.prototype.onboarding_gameSpectatorEnd=function(e,t,o,n,r){this.LogCustomEvent("onboarding_gameSpectatorEnd",{totalSec:e,actualSec:t,roundID:o,currentFPS:n,finalPositionInActionPhase:r})},t.prototype.onboarding_gameOverClicked_ExtraParam=function(e,t,o,n){return{currentFPS:e,causeOfDeath:o,finalPositionInActionPhase:t,checker:n}},t.prototype.onboarding_gameQueueStart2=function(e,t,o,n,r){this.LogCustomEvent("onboarding_gameQueueStart2",{totalSec:e,actualSec:t,roundID:o,currentFPS:n,checker:r})},t.prototype.onboarding_gameRoundStart2=function(e,t,o,n,r){this.LogCustomEvent("onboarding_gameRoundStart2",{totalSec:e,actualSec:t,roundID:o,currentFPS:n,checker:r})},t.prototype.onboarding_playerDropSharkR2=function(e,t,o){this.LogCustomEvent("onboarding_playerDropSharkR2",{totalSec:e,actualSec:t,startPosition:o})},t.prototype.onboarding_gameRoundOver2=function(e,t,o,n,r,i,a,s,c,l){this.LogCustomEvent("onboarding_gameRoundOver2",{totalSec:e,actualSec:t,roundID:o,currentFPS:n,causeOfDeath:r,finalPositionInActionPhase:i,crownEarnings:a,coinEarnings:s,startPosition:c,checker:l})},t.prototype.player_upgradeMultiplier=function(e,t,o){this.LogCustomEvent("player_upgradeMultiplier",{itemSpentID:e,itemSpentValue:t,multiplierOffer:o})},t.prototype.game_queueStart_ExtraParam=function(e,t,o,n){return{currentFPS:e,sharkID:t,sharkClass:o,boosterUsed:n}},t.prototype.game_roundStart_ExtraParam=function(e,t,o,n,r,i,a){return{currentFPS:e,humanPlayersInGame:t,roundTime:Math.round(o),sharkID:n,sharkClass:r,boosterUsed:i,startPosition:a}},t.prototype.game_playerDropShark=function(e,t,o,n,r,i){this.LogCustomEvent("game_playerDropShark",{actualSec:e,startPosition:t,roundTime:Math.round(o),roundID:n,sharkID:r,currentFPS:i})},t.prototype.game_roundOver_ExtraParam=function(e,t,o,n,r,i,a,s,l,u,p,d,f,h,g,y,m,_,v,S,b,N,P){c.NgcTelemetry.inst.setGameRoundOverExtraParam({roundID:e,currentFPS:Math.round(t),averageFPS:o,maxFPS:n,minFPS:r,roundTime:Math.round(i),playerTotalCount:a,finalPositionInActionPhase:s,coinEarnings:l,checker:u,causeOfDeath:p,boosterUsed:d,hunterClassKilledNumber:f,brawlerClassKilledNumber:h,chargerClassKilledNumber:g,deathPosition:y,sharkID:m,sharkClass:_,sharkSize:v,preyEaten:S,playersEaten:b,scoreBonusFromMultiplier:N,startPosition:P})},t.prototype.game_roundOverClicked_ExtraParam=function(e,t,o,n,r,i,a,s,l,u,p,d,f,h){c.NgcTelemetry.inst.setGameRoundOverClickedExtraParam({roundID:e,roundTime:Math.round(t),actualSec:Math.round(h),finalPositionInActionPhase:o,coinEarnings:r,crownEarnings:n,checker:i,causeOfDeath:a,boosterUsed:s,sharkID:l,sharkClass:u,sharkSize:p,scoreBonusFromMultiplier:d,startPosition:f})},t.inst=null,o=i([u],t)}(s.default));o.default=p,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/BuildConfig":"BuildConfig","../NanoGameCore/GameFramework/Scripts/NgcTrackingManager":"NgcTrackingManager","../NanoGameCore/Services/Telemetry/Telemetry":"Telemetry"}],Transition:[function(e,t,o){"use strict";cc._RF.push(t,"aa21aba2VJBHpAzXR2opKTn","Transition");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return r(t,e),o=t,t.prototype.onLoad=function(){o.inst=this},t.prototype.start=function(){this.node.opacity=0,this.node.active=!1},t.prototype.fadeIn=function(e,t,o){var n=this;void 0===t&&(t=0),this.node.opacity=255,cc.tween(this.node).delay(t).to(e,{opacity:0}).call(function(){o&&o(),n.node.active=!1}).start()},t.prototype.fadeOut=function(e,t){this.node.active=!0,this.node.opacity=0,cc.tween(this.node).to(e,{opacity:255}).call(function(){t&&t()}).start()},t.prototype.startFadeIn_Out=function(e,t,o,n,r){var i=this;void 0===o&&(o=0),this.fadeOut(e,function(){n&&n(),i.fadeIn(t,o,function(){r&&r()})})},t.inst=null,o=i([s],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],TuningData:[function(e,t,o){"use strict";cc._RF.push(t,"70374Zuy29PhJcj1v/Xotcj","TuningData"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this._cbFunc=null,this._isLoaded=!1,this._paramsObject=null}return Object.defineProperty(e,"inst",{get:function(){return null==e._inst&&(e._inst=new e),e._inst},enumerable:!1,configurable:!0}),e.prototype.isLoaded=function(){return this._isLoaded},e.prototype.getGameParameters=function(){return this._paramsObject},e.prototype.loadJsonData=function(e,t){var o=this;if(this._cbFunc=t,""!==e){var n=new XMLHttpRequest;n.open("GET",e+(/\?/.test(e)?"&":"?")+((new Date).getTime()+1e3*Math.random())),n.onreadystatechange=function(){4===n.readyState&&(200===n.status?o._parseJsonData(JSON.parse(n.responseText)):o._loadJsonFromLocal())},n.send(null)}else this._loadJsonFromLocal()},e.prototype._parseJsonData=function(e){this._paramsObject=e,this._isLoaded=!0,this._cbFunc&&this._cbFunc()},e.prototype._loadJsonFromLocal=function(){var e=this;cc.resources.load("/Json/GameParameters",cc.JsonAsset,function(t,o){t?console.error("loadConfigFromLocal",t):e._parseJsonData(o.json)})},e._inst=null,e}();o.default=n,cc._RF.pop()},{}],Tutorial:[function(e,t,o){"use strict";cc._RF.push(t,"e50ffA6hPNEeJV1HxY3fSbM","Tutorial");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./DragToControl"),s=e("./DoubleTab"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dragToControl=null,t.doubleTab=null,t}return r(t,e),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){this.dragToControl.node.active=!1,this.doubleTab.node.active=!1},t.prototype.enableDragToControl=function(e){void 0===e&&(e=!0),this.dragToControl.node.active=e},t.prototype.enableDoubleTab=function(e){void 0===e&&(e=!0),this.doubleTab.node.active=e},t.prototype.setDoubleTabMode=function(){this.doubleTab.mode="wiggle"},t.prototype.setMessageTutorial=function(e){this.doubleTab.setMessage(e.toUpperCase())},i([u(a.default)],t.prototype,"dragToControl",void 0),i([u(s.default)],t.prototype,"doubleTab",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"./DoubleTab":"DoubleTab","./DragToControl":"DragToControl"}],UplaySrv:[function(e,t,o){"use strict";cc._RF.push(t,"3a060fdeeJGEI6V0/6RJOwK","UplaySrv");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("../../GameFramework/Scripts/BuildConfig"),c=e("../../GameFramework/Scripts/NgcMain"),l=e("../../GameFramework/Scripts/NgcUserInfo"),u=e("../Nano/NanoSrv"),p=e("../SDK"),d=e("../../Services/Platform/Platform"),f=e("../../Core/Utils"),h=cc._decorator,g=(h.ccclass,h.property,function(e){function t(){var o=e.call(this)||this;if(o.isIframeLoaded=!1,o.myAppId="b2f1dcc3-b629-4fdd-b8c3-a8d580dab056",o.myGenomeId=s.NgcBuildConfig.uplayGenomeId,o.myLang="en-US",o.locationHref=d.NgcPlatform.getLocationHref(),o.myNextUrlIframe=location.href.slice(0,location.href.lastIndexOf("index.html"))+"nextUrlGameIframe.html",o.myNextUrlPopUp=location.href.slice(0,location.href.lastIndexOf("index.html"))+"nextUrlGamePopUp.html?myGenomeId="+o.myGenomeId,o.MY_CALLBACK_PAGE=location.href.slice(0,location.href.lastIndexOf("index.html"))+"callback_thirdPartyCookiesBlockedGame.html",o.extraParam=o.locationHref,o.isStandalone=!1,o.areTPCenabled=!0,o.connectSDK=null,o.userTicket=null,o.userSessionId=null,o.userId=null,o.tdata=null,o.onLoginCompleted=null,o.urlWindow=null,o.userData={nameOnPlatform:null,userId:null,avatarMobile:null,avatarDesktop:null},o.isConflict=!1,o.initInfo={},o.loginFromHost=!1,t.inst){if(d.NgcPlatform.isOfflineMode())return o;cc.error("There are multiple places constructing UplaySrv!!!")}return t.inst=o,o}return r(t,e),t.prototype.isLoggedIn=function(){return!1},t.prototype.getUserID=function(){return t.inst.getUplayId()},t.prototype.getName=function(){return"UplaySrv"},t.prototype._preInit=function(){return new Promise(function(e){t.inst.preInitialized=!0;try{window.location!==window.parent.location?t.inst.isStandalone=!1:t.inst.isStandalone=!0}catch(o){t.inst.isStandalone=!1}window.retrieveTicketData=t.inst.retrieveTicketData,window.retrieveTicketDataFromCallback=t.inst.retrieveTicketDataFromCallback,e("UplaySrv pre-initialized")})},t.prototype._init=function(){return s.NgcBuildConfig.offlineMode||"HUZ"==s.NgcBuildConfig.buildPlatform?new Promise(function(e){return e(null)}):this.isLazyLoad?Promise.resolve("Uplay SDK is uisng LazyInit"):this._uplayConnectInit()},t.prototype.retrieveTicketData=function(e){t.inst.connectSDK.getTicket().subscribe(function(o){if(t.inst.ticketResponse=o,"ok"===o.status){var n=o.payload;t.inst.tdata=n,t.inst.userTicket=n.ticket,t.inst.userSessionId=n.sessionId,t.inst.userId=n.userId,t.inst.areTPCenabled}t.inst.onLoginCompleted&&(t.inst.onLoginCompleted(o.status),t.inst.onLoginCompleted=null),e&&e()})},t.prototype._login=function(){return this.loginFromHost?(this.loginFromHost=!1,this.reLogin(null,!0),new Promise(function(e){t.inst.sendInfoToServer().then(function(o){o?e("Conflict"):(l.default.socialId=t.inst.getUplayId(),l.default.avatarUrl=t.inst.getProfilePictureUrl(),l.default.localUserName=c.NgcMain.inst.localUserName=t.inst.getFormatName(),e("OK"))}).catch(function(){e("err")})})):new Promise(function(e,o){t.inst.uplayLogin(function(n){console.log("[UplaySrv] `_login` uplayLogin response"),"ok"===n?t.inst.getProfile().then(function(){window.uplayLoginData&&window.uplayLoginData.loginInfo||o("getProfile error");var n=window.uplayLoginData.loginInfo.userData;n?(n.hasOwnProperty("userId")&&(t.inst.userData.userId=n.userId),n.hasOwnProperty("nameOnPlatform")&&(t.inst.userData.nameOnPlatform=n.nameOnPlatform),t.inst.userData.avatarMobile=window.uplayLoginData.loginInfo.loginAvatarMobile,t.inst.userData.avatarDesktop=window.uplayLoginData.loginInfo.loginAvatarDesktop):o("Parse JSON profile error"),t.inst.sendInfoToServer().then(function(o){o?e("Conflict"):(l.default.socialId=t.inst.getUplayId(),l.default.avatarUrl=t.inst.getProfilePictureUrl(),l.default.localUserName=c.NgcMain.inst.localUserName=t.inst.getFormatName(),e("OK"))}).catch(function(){e("err")})},function(){o("getProfile error")}):o(n)})})},t.prototype._logout=function(){return new Promise(function(e){t.inst.connectSDK.logout(t.inst.userTicket,t.inst.userSessionId).subscribe(function(t){console.log("[UplaySrv] `_logOut` user Uplay log out"),e(t)})})},t.prototype.uplayLogin=function(e){t.inst.onLoginCompleted=function(t){console.log("[UplaySrv] `uplayLogin` onLoginComplete. status = "+t),e(t)},f.Utils.isRunningWithFacebookApp()||!t.inst.areTPCenabled&&!t.inst.isStandalone||!0===t.inst.areTPCenabled&&!0===t.inst.isStandalone&&!cc.sys.isMobile?t.inst.loginIframe(s.NgcBuildConfig.SDK.UplaySrv.urlConnect+"/login?appId="+t.inst.myAppId+"&genomeId="+t.inst.myGenomeId+"&lang="+t.inst.myLang+"&nextUrl="+encodeURIComponent(t.inst.myNextUrlIframe)):t.inst.loginPopUp(s.NgcBuildConfig.SDK.UplaySrv.urlConnect+"/login?appId="+t.inst.myAppId+"&genomeId="+t.inst.myGenomeId+"&lang="+t.inst.myLang+"&nextUrl="+encodeURIComponent(t.inst.myNextUrlPopUp))},t.prototype.loginIframe=function(e){return i(this,void 0,void 0,function(){var t,o;return a(this,function(n){switch(n.label){case 0:return this.initialized||!this.isLazyLoad?[3,2]:[4,this.lazyInit()];case 1:n.sent(),n.label=2;case 2:return console.log("[UplaySrv] login iframe called"),t=document.getElementById("uplay-iframe-container"),o=document.getElementById("uplay-iframe"),t.classList.contains("hide")?(o.src=e,t.classList.remove("hide"),[2]):[2]}})})},t.prototype.loginPopUp=function(e){console.log("[UplaySrv] login popup called");var o=window.screenX+screen.width/2-240,n=screen.height/2-360;t.loginPopUp=window.open(e,"Ubisoft Connect","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=480, height=720, top="+n+", left="+o)},t.prototype.isLoginPopUpOpen=function(){var e=document.getElementById("uplay-iframe-container");return t.loginPopUp?!t.loginPopUp.closed:!(!e||e.classList.contains("hide"))},t.prototype.retrieveTicketDataFromCallback=function(e){var o=e.payload;t.inst.ticketResponse=e,t.inst.tdata=o,t.inst.userTicket=o.ticket,t.inst.userSessionId=o.sessionId,t.inst.userId=o.userId,t.inst.onLoginCompleted(e.status),t.inst.onLoginCompleted=null},t.prototype.getProfile=function(){return new Promise(function(e,o){console.log("UplaySrv.inst.userId = "+t.inst.userId),console.log("UplaySrv.inst.userSessionId = "+t.inst.userSessionId),t.inst.connectSDK.getProfiles(t.inst.userTicket,t.inst.userSessionId,t.inst.userId).subscribe(function(n){console.log("[UplaySrv] Getprofile"),console.log("[UplaySrv] getProfilesResponse = "+JSON.stringify(n)),n?(n.payload.profiles.forEach(function(o){if(console.log("profile = "+JSON.stringify(o)),"uplay"===o.platformType){console.log("uplay"===o.platformType);var n="https://ubisoft-avatars.akamaized.net/"+t.inst.userId+"/default_146_146.png",r="https://ubisoft-avatars.akamaized.net/"+t.inst.userId+"/default_256_256.png";return o.nameOnPlatform,window.uplayLoginData={platform:o.platformType,loginInfo:{userData:o,ticket:t.inst.tdata,loginAvatarMobile:n,loginAvatarDesktop:r},env:s.NgcBuildConfig.SDK.UplaySrv.env},void e(null)}}),e(null)):o()})})},t.prototype.reLogin=function(e,o){return void 0===o&&(o=!1),i(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return this.initialized||!this.isLazyLoad?[3,2]:[4,this.lazyInit()];case 1:n.sent(),n.label=2;case 2:return o&&Connect.init(this.initInfo),Connect.sdk.subscribe(function(o){t.inst.connectSDK=o,t.inst.connectSDK.getTicket().subscribe(function(o){if("ok"===o.status)t.inst.areTPCenabled=!0,t.inst.retrieveTicketData(e);else{if(console.log("TPC are disabled"),t.inst.areTPCenabled=!1,!1===t.inst.isStandalone)try{window.parent}catch(n){console.log(n)}e&&e()}})}),[2]}})})},t.prototype.ubiConnect=function(){},t.prototype.sendInfoToServer=function(){var e={name:t.inst.getFormatName(),socialId:t.inst.getUplayId(),avatar:t.inst.getProfilePictureUrl(),platform:"uplay"},o=!1;return new Promise(function(n,r){u.default.inst.servicePost("/player/loginsocialv2",JSON.stringify(e),function(e,i){if(e)r(e);else{console.log("update info success res ",i);var a=JSON.parse(i).data;a&&a.conflict_info&&(o=!0,t.inst.dataConflict=a.conflict_info),t.inst.isConflict=o,n(o)}})})},t.prototype.getFriendsData=function(){return[]},t.prototype.isConnected=function(){return"ok"===t.inst.ticketResponse.status},t.prototype.getUplayId=function(){return t.inst.userData.userId},t.prototype.forceLinkInfoToServer=function(e){return i(this,void 0,void 0,function(){var o,n,r;return a(this,function(i){switch(i.label){case 0:return o=e?"local":"server",n=t.inst.getFormatName(),r={name:n,socialId:t.inst.getUplayId(),avatar:t.inst.getProfilePictureUrl(),platform:"uplay",resolve:o},[4,new Promise(function(o){u.default.inst.servicePost("/player/loginsocialv2",JSON.stringify(r),function(n,r){if(n)o(n);else{if(console.log(r),!e){var i=JSON.parse(r).data;if(i&&i.hasOwnProperty("id")&&(t.inst.dataConflict.id=i.id),i&&i.hasOwnProperty("secretKey")){var a=i.secretKey;l.default.secretKey=a}}console.log("force update info success"),o(null)}})})];case 1:return i.sent(),[2]}})})},t.prototype.sendAvatarToServer=function(){console.log("Method not implemented for Uplay")},t.prototype.sendNameToServer=function(){console.log("Method not implemented for Uplay")},t.prototype.getProfilePictureUrl=function(){return cc.sys.isMobile?t.inst.userData.avatarMobile:t.inst.userData.avatarDesktop},t.prototype.getFormatName=function(){return l.default.correctNameFormat(t.inst.getFullName())},t.prototype.getFullName=function(){return t.inst.userData.nameOnPlatform},t.prototype.checkLoginStatus=function(){return new Promise(function(e){console.log("[Uplay] `checkLoginStatus` userTicket = "+t.inst.userTicket),e(null)})},t.prototype.sendFriendListToServer=function(){console.log("Uplay has no friends")},t.prototype.fetchInfoWithAccessToken=function(){return new Promise(function(e){t.inst.getProfile().then(function(){if(window.uplayLoginData&&window.uplayLoginData.loginInfo){var o=window.uplayLoginData.loginInfo.userData;o&&(o.hasOwnProperty("userId")&&(t.inst.userData.userId=o.userId),o.hasOwnProperty("nameOnPlatform")&&(t.inst.userData.nameOnPlatform=o.nameOnPlatform),t.inst.userData.avatarMobile=window.uplayLoginData.loginInfo.loginAvatarMobile,t.inst.userData.avatarDesktop=window.uplayLoginData.loginInfo.loginAvatarDesktop),e(null)}else e(null)})})},t.prototype.getDataConflict=function(){return t.inst.dataConflict},t.prototype._uplayConnectInit=function(){return i(this,void 0,void 0,function(){var e,o,n=this;return a(this,function(r){switch(r.label){case 0:return[4,this._loadSDK()];case 1:return r.sent(),e=window.location.search,new URLSearchParams(e).get("gameID"),o=btoa(this.extraParam),this.MY_CALLBACK_PAGE.includes("?")?this.MY_CALLBACK_PAGE+="&extra="+o:this.MY_CALLBACK_PAGE+="?&extra="+o,[2,new Promise(function(e){console.log("[UplaySrv] `_init` UbiConnect called ",n.MY_CALLBACK_PAGE),window.Connect?(Connect.init({env:s.NgcBuildConfig.SDK.UplaySrv.env,appId:t.inst.myAppId,genomeId:t.inst.myGenomeId,lang:t.inst.myLang,nextUrl:encodeURIComponent(n.MY_CALLBACK_PAGE),thirdPartyCookiesSupport:!d.NgcPlatform.isRunAsIframeOnNano()}),Connect.sdk.subscribe(function(e){t.inst.connectSDK=e,t.inst.connectSDK.getTicket().subscribe(function(e){if(console.log("[UplaySrv] `_init`  getTicket = "+e.status),"ok"===e.status)t.inst.areTPCenabled=!0,t.inst.retrieveTicketData();else if(t.inst.areTPCenabled=!1,!1===t.inst.isStandalone)try{window.parent}catch(o){console.log(o)}})}),n.initialized=!0,e("UbiConnect initialized")):e()})]}})})},t.prototype._loadSDK=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.isSDKLoaded?(cc.warn("[UplaySrv] _loadSDK - SDK alrady loaded. Why call again"),[2,Promise.resolve()]):[4,f.Utils.loadScriptDynamic("https://ubistatic2-a.akamaihd.net/uplay-connect/v3/prod/default/sdk/connectSdkPublic.js")];case 1:return e.sent(),[2]}})})},Object.defineProperty(t.prototype,"isSDKLoaded",{get:function(){return"undefined"!=typeof Connect},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLazyLoad",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.lazyInit=function(){return cc.log("[UplaySrv] lazyInit"),this._uplayConnectInit()},t.inst=null,t.loginPopUp=null,t}(p.NgcSDK));o.default=g,cc._RF.pop()},{"../../Core/Utils":"Utils","../../GameFramework/Scripts/BuildConfig":"BuildConfig","../../GameFramework/Scripts/NgcMain":"NgcMain","../../GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../../Services/Platform/Platform":"Platform","../Nano/NanoSrv":"NanoSrv","../SDK":"SDK"}],UserInfo:[function(e,t,o){"use strict";cc._RF.push(t,"69b455Pup1N0qkLQD+Htumb","UserInfo");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.UserInfo=void 0;var s=e("simple-crypto-js"),c=e("../globals"),l=e("../NanoGameCore/GameFramework/Scripts/NgcLocalStorage"),u=e("../NanoGameCore/GameFramework/Scripts/NgcUserInfo"),p=e("../NanoGameCore/Services/Inventory/Inventory"),d=e("./Utils/ConstConfig"),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.getCryptr=function(){return this.cryptr||(this.cryptr=new s.default(d.ConstConfig.PARAMS.SECRET_KEY)),this.cryptr},t.keymangle=function(e){return e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)},Object.defineProperty(t,"curCoin",{get:function(){return u.convertToNum(l.default.getKey(d.ConstConfig.COIN,d.ConstConfig.PARAMS.DEFAULT_COIN))},set:function(e){l.default.setKey(d.ConstConfig.COIN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"curGameExpenseCoin",{get:function(){return t._curGameExpenseCoin},set:function(e){t._curGameExpenseCoin=e},enumerable:!1,configurable:!0}),t.addGameExpenseCoin=function(e){t._curGameExpenseCoin+=e},Object.defineProperty(t,"curGameIncomeCoin",{get:function(){return t._curGameIncomeCoin},set:function(e){t._curGameIncomeCoin=e},enumerable:!1,configurable:!0}),t.addGameIncomeCoin=function(e){t._curGameIncomeCoin+=e},Object.defineProperty(t,"curScoreMultiplierValue",{get:function(){var e,t=this.getCryptr();try{null==(e=u.convertToNum(t.decrypt(cc.sys.localStorage.getItem(d.ConstConfig.SCORE_MULTIPLIER_VALUE))))&&(e=d.ConstConfig.PARAMS.DEFAULT_SCORE_MULTIPLIER_VALUE)}catch(o){e=d.ConstConfig.PARAMS.DEFAULT_SCORE_MULTIPLIER_VALUE}return e},set:function(e){var t=this.getCryptr();cc.sys.localStorage.setItem(d.ConstConfig.SCORE_MULTIPLIER_VALUE,t.encrypt(e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"curScoreMultiplierLevel",{get:function(){var e,t=this.getCryptr();try{null==(e=u.convertToNum(t.decrypt(cc.sys.localStorage.getItem(d.ConstConfig.SCORE_MULTIPLIER_LEVEL))))&&(e=d.ConstConfig.PARAMS.DEFAULT_SCORE_MULTIPLIER_LEVEL)}catch(o){e=d.ConstConfig.PARAMS.DEFAULT_SCORE_MULTIPLIER_LEVEL}return e},set:function(e){var t=this.getCryptr();cc.sys.localStorage.setItem(d.ConstConfig.SCORE_MULTIPLIER_LEVEL,t.encrypt(e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"lastSCPackTime",{get:function(){var e,t=this.getCryptr();try{null==(e=u.convertToNum(t.decrypt(cc.sys.localStorage.getItem(d.ConstConfig.LAST_SCPACK_TIME))))&&(e=0)}catch(o){e=0}return e},set:function(e){var t=this.getCryptr();cc.sys.localStorage.setItem(d.ConstConfig.LAST_SCPACK_TIME,t.encrypt(e))},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isHardResetData",{get:function(){return u.convertToBoolean(cc.sys.localStorage.getItem(t.keymangle(d.ConstConfig.IS_HARD_RESET_DATA)))},set:function(e){cc.sys.localStorage.setItem(t.keymangle(d.ConstConfig.IS_HARD_RESET_DATA),e)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"curStars",{get:function(){return u.convertToNum(l.default.getKey(d.ConstConfig.STAR,0))},set:function(e){l.default.setKey(d.ConstConfig.STAR,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"totalTimeSpent",{get:function(){return u.convertToNum(l.default.getKey(d.ConstConfig.TOTAL_TIME_SPENT,0))},enumerable:!1,configurable:!0}),t.accumulateTotalTimeSpent=function(e){l.default.setKey(d.ConstConfig.TOTAL_TIME_SPENT,t.totalTimeSpent+e)},Object.defineProperty(t,"localSkinName",{get:function(){var e=this.getStringValue(d.ConstConfig.SKIN_NAME_LOCAL);return"0"===e&&(e=""),e},set:function(e){this.setStringValue(e,d.ConstConfig.SKIN_NAME_LOCAL)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"bestScore",{get:function(){return u.convertToNum(l.default.getKey(d.ConstConfig.BEST_SCORE,0))},set:function(e){l.default.setKey(d.ConstConfig.BEST_SCORE,e)},enumerable:!1,configurable:!0}),t.updateInventoryWithPlatform=function(){return i(this,void 0,void 0,function(){var e,o;return a(this,function(){if(null==p.NgcInventory.inst)return[2];for(o in e=function(e){var o=p.NgcInventory.inst.itemTable[e];switch(o.type){case d.ConstConfig.INVENTORY.TYPE.CURRENCY:o.itemID==d.ConstConfig.INVENTORY.ITEM_ID.COIN?p.NgcInventory.inst.getItemCount(o.itemID,function(e,o){o&&(t.curCoin=o.count)}):o.category==d.ConstConfig.INVENTORY.CATEGORY.ADS_COUNTER&&p.NgcInventory.inst.getItemCount(o.itemID,function(){});break;case d.ConstConfig.INVENTORY.TYPE.SCOREMULTIPLIER:if(o.category==d.ConstConfig.INVENTORY.CATEGORY.VALUE){var n=o.itemID;p.NgcInventory.inst.getItemCount(n,function(e,o){if(o&&o.count>0){var n=Math.round(10*o.count)/10,r=d.ConstConfig.PARAMS.DEFAULT_SCORE_MULTIPLIER_VALUE+n;t.curScoreMultiplierValue=r}else t.curScoreMultiplierValue=d.ConstConfig.PARAMS.DEFAULT_SCORE_MULTIPLIER_VALUE})}break;case d.ConstConfig.INVENTORY.TYPE.EQUIPPABLE:if(o.category==d.ConstConfig.INVENTORY.CATEGORY.SKIN){var r=o.itemID;p.NgcInventory.inst.getItemCount(r,function(e,o){o&&o.count>0&&t.unlockSkin(r)})}break;default:cc.log("[UserInfo] 'updateInventoryWithPlatform' - itemInfo.type: "+o.type+" is not FOUND")}},p.NgcInventory.inst.itemTable)e(o);return c.default.MainScreen.inst.changeShark(),[2]})})},t.setBestScore=function(e){return e>this.bestScore&&(this.bestScore=e),this.bestScore},t.getStringValue=function(e){var o=this.getCryptr(),n="";try{null==(n=o.decrypt(cc.sys.localStorage.getItem(t.keymangle(e))).toString())&&(n="")}catch(r){n="0"}return n},t.setStringValue=function(e,o){var n=this.getCryptr();cc.sys.localStorage.setItem(t.keymangle(o),n.encrypt(e))},t.unlockSkin=function(e){t.unlockedSharkSkins.push(e)},t.isSkinUnlocked=function(e){return t.unlockedSharkSkins.findIndex(function(t){return t===e})>-1},t.removeAllUnlockedSkins=function(){return t.unlockedSharkSkins=[]},t.resetPrivateData=function(){t.bestScore=0,t.localSkinName="",t.curCoin=0,t.curStars=0,t.curBooster="",t.accumulateTotalTimeSpent(0),t.bestScore=0,t.curSkin=d.ConstConfig.DEFAULT_SHARK_NAME,t.isFirstTimeClicked=!1,u.default.totalSessions=1,t.startBiggerSize=0,t.needCheckStartBiggerSize=!0,t.removeAllUnlockedSkins(),c.default.MainScreen.inst.changeShark(0)},t.readOldUserID=function(){var e=cc.sys.localStorage.getItem(t.LOCAL_STORAGE_USERID_KEY);return e&&0!=e.length?new s.default("pizzataco").decrypt(e).toString():null},Object.defineProperty(t,"curSkin",{get:function(){return this.localSkinName},set:function(e){t.localSkinName=e},enumerable:!1,configurable:!0}),Object.defineProperty(t,"curBooster",{get:function(){return l.default.getKey("curBooster","")},set:function(e){l.default.setKey("curBooster",e)},enumerable:!1,configurable:!0}),t.instance=null,t.cryptr=null,t._curGameExpenseCoin=0,t._curGameIncomeCoin=0,t.startBiggerSize=0,t.needCheckStartBiggerSize=!0,t.unlockedSharkSkins=[],t.LOCAL_STORAGE_USERID_KEY="_linseb",t.NGC_DEFAULT_SKIN={head:"head_naked",body:"body_naked",face:"face_naked"},t}(u.default);o.UserInfo=f,c.default.UserInfo=f,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/NgcLocalStorage":"NgcLocalStorage","../NanoGameCore/GameFramework/Scripts/NgcUserInfo":"NgcUserInfo","../NanoGameCore/Services/Inventory/Inventory":"Inventory","../globals":"globals","./Utils/ConstConfig":"ConstConfig","simple-crypto-js":96}],Utils:[function(e,t,o){"use strict";cc._RF.push(t,"239e4yYMtdDs7sZISNvCfcX","Utils");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),r=0;for(t=0;t<o;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,r++)n[r]=i[a];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.findNode=o.csv2arr=o.LoadAsset=o.LoadBundleAsset=o.LoadResourceAsset=o.Utils=o.OS_TYPE=o.BROWSER_TYPE=void 0;var a,s,c=e("../Services/Platform/Platform");(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.CHROME=0]="CHROME",e[e.FIREFOX=1]="FIREFOX",e[e.EDGE=2]="EDGE",e[e.SAFARI=3]="SAFARI",e[e.SAMSUNG_INTERNET=4]="SAMSUNG_INTERNET",e[e.ANDROID_WEBVIEW=5]="ANDROID_WEBVIEW",e[e.SAFARI_IN_APP=6]="SAFARI_IN_APP"})(a=o.BROWSER_TYPE||(o.BROWSER_TYPE={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WINDOWS=1]="WINDOWS",e[e.ANDROID=2]="ANDROID",e[e.IOS=3]="IOS",e[e.MAC_OS=4]="MAC_OS"}(s=o.OS_TYPE||(o.OS_TYPE={}));var l=function(){function e(){}return e.getHttp=function(e,t,o,n){if(void 0===n&&(n=null),c.NgcPlatform.isOfflineMode())o("offline",null);else{var r=new XMLHttpRequest,i="";if(t&&Array.isArray(t)&&t.length>0)for(var a=0;a<t.length;a++)i=0==a?i+"?"+t[a][0]+"="+t[a][1]:i+"&"+t[a][0]+"="+t[a][1];else if("object"==typeof t){for(var s in i+="?",t)i+=s+"="+t[s]+"&";i=i.substr(0,i.length-1)}var l=e+i;l.includes("?")?l+="&dummy="+Date.now().toString():l+="?dummy="+Date.now().toString(),r.open("GET",l,!0),r.onloadend=function(){4==r.readyState&&200==r.status?o(null,r.responseText):4==r.readyState&&o(r.responseText,null)},r.onerror=function(t){console.log("Error getting URL "+e+": "+t),o(t,null)},r.ontimeout=function(t){console.log("Timeout getting URL "+e),o(t,null)},n&&r.setRequestHeader("Authorization","Bearer "+n),r.send()}},e.parseFunctionCallString=function(e){var t=/([a-zA-Z_$][-a-zA-Z_$0-9]*).*/.exec(e);if(!t)return[];var o=[],n=t[1].trim();return o[0]=n,(t=/.*\((.*)\)/.exec(e))&&t[1].trim().split(",").forEach(function(e){var t=e.trim();t.length>0&&o.push(t)}),o},e.postHttp=function(e,t,o,n){return void 0===o&&(o="application/json"),void 0===n&&(n=null),new Promise(function(r,i){c.NgcPlatform.isOfflineMode()&&i("Offline Mode");var a=new XMLHttpRequest;console.log("pars:",t),a.open("POST",e,!0),a.setRequestHeader("Content-type",o),a.onloadend=function(){4===a.readyState&&200===a.status?r(a.response):4===a.readyState&&i(a.response)},a.onerror=function(t){i("Error post URL "+e+": "+t)},a.ontimeout=function(){i("Timeout post URL "+e)},n&&a.setRequestHeader("Authorization","Bearer "+n),a.send(t)})},e.addQuery=function(e,t){return e.indexOf("?")>=0?e+"&"+t:e+"?"+t},e.numberRaise=function(e,t,o,n){o||(o=""),n||(n="");for(var r=e.string,i=0;i<r.length;i++)r=r.replace(".","");r=(r=r.replace(o,"")).replace(n,"");var a=parseInt(r);if(t!==a){t=Math.round(t);var s=function(e){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):"0"};("number"!=typeof a||isNaN(a))&&(a=0);var c=a,l=(t-a)/30;e.node.stopAllActions;var u=cc.sequence(cc.delayTime(.03),cc.callFunc(function(){c+=l,e.string=n+s(Math.round(c))+o,(c>=t&&t>a||c<=t&&t<a)&&(e.string=n+s(t)+o)}));e.node.runAction(cc.sequence(cc.scaleTo(.2,2),cc.repeat(u,31),cc.scaleTo(.2,1)))}},e.changeParent=function(e,t){if(e.parent!==t){var o=function(e){var t=e,o=t.angle;do{o+=(t=t.parent).angle}while(null!=t.parent);return o%360},n=o(e)-o(t),r=e.convertToWorldSpaceAR(cc.v3(0,0)),i=t.convertToNodeSpaceAR(r);e.parent=t,e.position=i,e.angle=n}},e.clearChild=function(e){e.removeAllChildren()},e.randomArr=function(e){return e[Math.floor(Math.random()*e.length)]},e.randomFromTo=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},e.shuffleArr=function(e){for(var t,o=e.length-1;o>0;o--){var n=Math.floor(Math.random()*(o+1));t=[e[n],e[o]],e[o]=t[0],e[n]=t[1]}return e},e.differenceOf2Arrays=function(e,t){var o=[],n=e.toString().split(",").map(Number),r=t.toString().split(",").map(Number);for(var i in n)-1===r.indexOf(n[i])&&o.push(n[i]);for(var i in r)-1===n.indexOf(r[i])&&o.push(r[i]);return o.sort(function(e,t){return e-t})},e.intersect_arrays=function(e,t){for(var o=e.concat().sort(),n=t.concat().sort(),r=[],i=0,a=0;i<e.length&&a<t.length;)o[i]===n[a]?(r.push(o[i]),i++,a++):o[i]<n[a]?i++:a++;return r},e.union_arrays=function(e,t){for(var o={},n=e.length-1;n>=0;--n)o[e[n]]=e[n];for(n=t.length-1;n>=0;--n)o[t[n]]=t[n];var r=[];for(var i in o)o.hasOwnProperty(i)&&r.push(o[i]);return r},e.sumArr=function(e){var t=0;return e.forEach(function(e){t+=e}),t},e.getUrlParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},e.randomProperty=function(e){var t=Object.keys(e);return e[t[t.length*Math.random()<<0]]},e.compareObj=function(e,t){for(var o in e){if(e.hasOwnProperty(o)!==t.hasOwnProperty(o))return!1;switch(typeof e[o]){case"object":if(!this.compareObj(e[o],t[o]))return!1;break;case"function":if(void 0===t[o]||"compare"!=o&&e[o].toString()!=t[o].toString())return!1;break;default:if(e[o]!=t[o])return!1}}for(var o in t)if(void 0===e[o])return!1;return!0},e.arrayUnion=function(e,t){for(var o=e.concat(t),n=0;n<o.length;n++)for(var r=n+1;r<o.length;r++)this.compareObj(o[n],o[r])&&(o.splice(r,1),r--);return o},e.cloneNumberArray=function(e){return JSON.parse(JSON.stringify(e))},e.getWorldPos=function(e){return e.convertToWorldSpaceAR(cc.v2(0,0))},e.setWorldPos=function(e,t){e.setPosition(e.parent.convertToNodeSpaceAR(t))},e.enumToString=function(e,t){for(var o in e)if(e[o]==t)return o;return null},e.loadPrefab=function(e){return n(this,void 0,Promise,function(){var t;return r(this,function(o){switch(o.label){case 0:return t=null,[4,new Promise(function(t,o){cc.loader.loadRes(e,function(e,n){if(e)return cc.error(e.message||e),void o(e);t(n)})}).then(function(e){t=e})];case 1:return o.sent(),[2,t]}})})},e.getHash=function(e){for(var t=0,o=0;o<e.length;o++)t=(t<<5)-t+e.charCodeAt(o),t|=0;return t},e.getKeys=function(e){var t=[];for(var o in e)t.push(o);return t},e.loadSpriteFrameFromURL=function(e){return new Promise(function(t,o){cc.loader.load({url:e,type:"jpg"},function(e,n){if(e)o(e);else{var r=new cc.SpriteFrame(n);t(r)}})})},e.spawCoin=function(e,t,o,n){e=cc.find("Canvas").convertToNodeSpaceAR(e),t=cc.find("Canvas").convertToNodeSpaceAR(t);for(var r=function(o){var r=cc.instantiate(n);r.parent=cc.find("Canvas"),r.active=!0,r.setPosition(e),r.opacity=0,r.runAction(cc.sequence(cc.delayTime(.05*o),cc.fadeIn(0),cc.spawn(cc.jumpTo(.6,t,t.y-100-200*Math.random(),1),cc.rotateBy(.6,360)),cc.callFunc(function(){r.destroy()})))},i=0;i<o;i++)r(i)},e.createURLFromObject=function(e){var t="http://game.js/search?";for(var o in e)t+=o+"="+e[o]+"&";return t},e.secondsToHoursMinutesSeconds=function(e){return[Math.floor(e/3600),Math.floor(e%3600/60),e%3600%60]},e.secondsToMinutesSeconds=function(e){return[Math.floor(e%3600/60),e%3600%60]},e.loadBundle=function(e){return n(this,void 0,Promise,function(){var t;return r(this,function(o){switch(o.label){case 0:return t=null,[4,new Promise(function(o,n){var r=cc.assetManager.getBundle(e);r?(t=r,cc.log(e+" is existing"),o()):cc.assetManager.loadBundle(e,function(r,i){r?(cc.error(r),n()):(cc.log(e+" is loaded"),t=i,o())})})];case 1:return o.sent(),[2,t]}})})},e.convertUint8ArrayToArrayBuffer=function(e){for(var t=e.length,o=new ArrayBuffer(t),n=0;n<t;n++)new Int8Array(o)[n]=e[n];return o},e.isRunningWithFacebookApp=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return e.indexOf("FBAN")>-1||e.indexOf("FBAV")>-1},e.isNetWorkAvailable=function(){return cc.sys.isBrowser?navigator.onLine:cc.sys.getNetworkType()!==cc.sys.NetworkType.NONE},e.reloadPage=function(){if(window.parent.location!==window.location)try{window.parent.location.reload()}catch(e){window.location.reload(),console.log(e)}else window.location.reload()},e.deleteCookie=function(e){document.cookie=e+"=; Path=/;  Domain="+location.host+"; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"},e.copyToClipboard=function(e){var t=this;return new Promise(function(o){return n(t,void 0,void 0,function(){var t,n,i;return r(this,function(r){switch(r.label){case 0:if("function"!=typeof(null===(i=navigator.clipboard)||void 0===i?void 0:i.writeText))return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,navigator.clipboard.writeText(e)];case 2:return r.sent(),o(!0),[3,4];case 3:return t=r.sent(),cc.error(t),o(!1),[3,4];case 4:return[2];case 5:return(n=document.createElement("textarea")).value=e,n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select(),setTimeout(function(){try{var e=document.execCommand("copy");o(!!e)}catch(t){cc.error(t),o(!1)}finally{document.body.removeChild(n)}},250),[2]}})})})},e.getCameraNode=function(){return e._cameraNode||(e._cameraNode=new cc.Node,e._cameraNode.addComponent(cc.Camera)),e._cameraNode},e.getScreenshotTexture=function(t){var o=e.getCameraNode();o.parent=t,o.setPosition(0,0);var n=o.getComponent(cc.Camera);n.cullingMask=4294967295,n.backgroundColor=cc.Color.BLACK,n.clearFlags=cc.Camera.ClearFlags.DEPTH|cc.Camera.ClearFlags.STENCIL|cc.Camera.ClearFlags.COLOR;var r=new cc.RenderTexture,i=cc.game._renderContext;return r.initWithSize(cc.visibleRect.width,cc.visibleRect.height,i.STENCIL_INDEX8),n.targetTexture=r,n.render(t),o.parent=null,r},e.tweenNumber=function(e,t,o,n){var r={value:e};return cc.tween(r).to(o,{value:t},{progress:function(e,t,o,r){var i=e+(t-e)*r;return n(Math.floor(i),!1),i}}).call(function(){n(t,!0)})},e.tweenNodeToNode=function(t,o,n,r,i,a,s,c,l){void 0===i&&(i=.5),void 0===a&&(a="quartInOut"),void 0===s&&(s=!1),void 0===c&&(c=null),void 0===l&&(l=null);var u=e.getWorldPos(o);n&&(u.x+=n.x,u.y+=n.y);var p=t.parent.convertToNodeSpaceAR(u);if(r=r||{},s){var d=c||cc.v2(t.x+60,t.y),f=l||cc.v2(p.x+60,(p.y-t.y)/2);return cc.tween(t).parallel(cc.tween().bezierTo(i,d,f,p,{easing:a}),cc.tween().to(i,r,{easing:a}))}return r.position=p,cc.tween(t).to(i,r,{easing:a})},e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o="\ud83d\udd25\ud83d\udd25\ud83d\udd25";cc.log.apply(cc,i([o],e))},e.areNodesIntersection=function(t,o){var n=e.getWorldPos(t),r=new cc.Rect(n.x-t.width/2,n.y-t.height/2,t.width,t.height),i=e.getWorldPos(o),a=new cc.Rect(i.x-o.width/2,i.y-o.height/2,o.width,o.height);return r.intersects(a)},e.vibrate=function(e){void 0===e&&(e=200),"vibrate"in navigator&&navigator.vibrate(e)},e.shareNative=function(e,t){navigator.share({url:e}).then(function(){"function"==typeof t&&t(),console.log("Share was successful.")}).catch(function(e){console.log("Sharing failed",e)})},e.getBrowserType=function(){var t=a.CHROME,o=a.EDGE,n=a.FIREFOX,r=a.SAFARI,i=a.SAMSUNG_INTERNET,s=a.ANDROID_WEBVIEW,c=a.SAFARI_IN_APP;if(e.isRunningWithFacebookApp())return cc.sys.os===cc.sys.OS_ANDROID?s:c;if(navigator.userAgent.includes("FxiOS"))return n;if(navigator.userAgent.includes("EdgiOS"))return o;if(navigator.userAgent.includes("CriOS"))return t;if(navigator.userAgent.includes("SamsungBrowser"))return i;if(navigator.userAgent.includes("Edg")||navigator.userAgent.includes("Edge"))return o;var l=a.UNKNOWN;switch(cc.sys.browserType){case cc.sys.BROWSER_TYPE_SAFARI:l=r;break;case cc.sys.BROWSER_TYPE_CHROME:l=t;break;case cc.sys.BROWSER_TYPE_EDGE:l=o;break;case cc.sys.BROWSER_TYPE_FIREFOX:l=n}return l},e.getOSType=function(){var e=s.UNKNOWN,t=s.WINDOWS,o=s.ANDROID,n=s.IOS,r=s.MAC_OS,i=e;switch(cc.sys.os){case cc.sys.OS_WINDOWS:i=t;break;case cc.sys.OS_ANDROID:i=o;break;case cc.sys.OS_IOS:i=n;break;case cc.sys.OS_OSX:i=r}return i},e.getTimeZone=function(){var e=Intl.DateTimeFormat().resolvedOptions().timeZone,t=-(new Date).getTimezoneOffset()/60;return e+" UTC"+(t<0?"-":"+")+t},e.convertRecordToString=function(e){return 0===Object.keys(e).length?"":Object.entries(e).join("&").replace(new RegExp(",","g"),"=")},e.loadScriptDynamic=function(e,t,o,i){return void 0===t&&(t=new Map),void 0===o&&(o=!0),void 0===i&&(i="text/javascript"),n(this,void 0,void 0,function(){return r(this,function(){return[2,new Promise(function(n,r){try{var a=document.createElement("script");a.type=i,a.async=o,a.src=e,t.forEach(function(e,t){a.setAttribute(t,e)}),a.addEventListener("load",function(){n({status:!0})}),a.addEventListener("error",function(){r({status:!1,message:"Failed to load the script "+e})}),document.body.appendChild(a)}catch(s){r(s)}})]})})},e._cameraNode=null,e}();function u(e,t){return n(this,void 0,void 0,function(){return r(this,function(){return[2,new Promise(function(o,n){cc.resources.load(e,t,function(e,t){e?n(e):o(t)})})]})})}function p(e,t,o){return n(this,void 0,void 0,function(){return r(this,function(){return[2,new Promise(function(n,r){cc.assetManager.loadBundle(e,function(e,i){e?r(e):o?i.load(t,o,function(e,t){e?r(e):n(t)}):i.load(t,function(e,t){e?r(e):n(t)})})})]})})}function d(e,t){void 0===t&&(t="");var o=[];return e.children.forEach(function(e){var n=t+">"+e.name;o.push({path:n,node:e}),d(e,n).forEach(function(e){return o.push(e)})}),o}o.Utils=l,o.LoadResourceAsset=u,o.LoadBundleAsset=p,o.LoadAsset=function(e,t){return n(this,void 0,void 0,function(){var o,n,i;return r(this,function(){return e.includes(":")?(o=e.split(":"),n=o[0],i=o[1],[2,p(n,i,t)]):[2,u(e,t)]})})},o.csv2arr=function(e){return e.trim().split("\n").slice(1).map(function(e){return e.split("|").map(function(e){return e.trim()})})},o.findNode=function(e,t){return e?d(e instanceof cc.Component?e.node:e).find(function(e){return t.test(e.path)}).node:null},cc._RF.pop()},{"../Services/Platform/Platform":"Platform"}],WaitSpinner:[function(e,t,o){"use strict";cc._RF.push(t,"e83367tE1NFlLBJpJNTwqX/","WaitSpinner");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.requireComponent,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rotSteps=16,t.rotStepTimeSec=.25,t.explodeTimeSec=.25,t.explodeTopScale=2,t.homeScale=1,t.homeOpacity=255,t.mySprite=null,t}return r(t,e),t.prototype.onLoad=function(){this.homeScale=this.node.scale,this.homeOpacity=this.node.opacity,this.mySprite=this.node.getComponent(cc.Sprite)},t.prototype.rotateOneTick=function(){var e=this.node.angle;e-=360/this.rotSteps,this.node.angle=e},t.prototype.reset=function(){this.node.opacity=this.homeOpacity,this.node.scale=this.homeScale,this.mySprite.enabled=!0},t.prototype.collapse=function(){var e=this;cc.tween(this.node).to(e.explodeTimeSec,{opacity:0,scale:0}).call(function(){e.mySprite.enabled=!1}).start()},t.prototype.boom=function(){var e=this;cc.tween(this.node).to(e.explodeTimeSec,{opacity:0,scale:e.explodeTopScale}).call(function(){e.mySprite.enabled=!1}).start()},t.prototype.start=function(){this.schedule(this.rotateOneTick,this.rotStepTimeSec)},i([l],t.prototype,"rotSteps",void 0),i([l],t.prototype,"rotStepTimeSec",void 0),i([l],t.prototype,"explodeTimeSec",void 0),i([l],t.prototype,"explodeTopScale",void 0),i([c(cc.Sprite)],t.prototype,"mySprite",void 0),i([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],WaterSurfaceManager:[function(e,t,o){"use strict";cc._RF.push(t,"37a2ex4GDZHFIh0gZR0Og4c","WaterSurfaceManager");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.SurfaceColliderTag=void 0;var a=e("../ParticleFollow"),s=e("./SplashWaterEffect"),c=cc._decorator,l=c.ccclass,u=c.property;(function(e){e[e.canJump=0]="canJump",e[e.canSwim=1]="canSwim"})(o.SurfaceColliderTag||(o.SurfaceColliderTag={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.useSpineEffect=!1,t.useParticleEffect=!1,t}return r(t,e),t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.startWaterSplash=function(e,t,o,n){this.useSpineEffect&&(o&&n?this.node.getComponent(s.default).create(e,t,o,n):this.node.getComponent(s.default).create(e,t)),this.useParticleEffect&&this.node.getComponent(a.default).create(e,t)},i([u],t.prototype,"useSpineEffect",void 0),i([u],t.prototype,"useParticleEffect",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../ParticleFollow":"ParticleFollow","./SplashWaterEffect":"SplashWaterEffect"}],WorldPosInterface:[function(e,t){"use strict";cc._RF.push(t,"816b3tLv3FOnodK27Tq/WKp","WorldPosInterface"),cc._RF.pop()},{}],countDownStartGame:[function(e,t,o){"use strict";cc._RF.push(t,"95e88zY8CpF6I0i4GI654dI","countDownStartGame");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager"),s=e("./../globals"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.digit=null,t.isPlaying=!1,t.LocalGameClockSec=0,t.homeScale=1,t.lastStep=-1,t}return r(t,e),t.prototype.onLoad=function(){this.homeScale=this.digit.node.scale},t.prototype.start=function(){this.isPlaying=!0},t.prototype.reset=function(){this.LocalGameClockSec=0},t.prototype.onEnable=function(){this.reset()},t.prototype.UnlockToPlayGame=function(){var e=this;this.scheduleOnce(function(){e.node.active=!1,s.default.Game.inst.startGamePlay()},1)},t.prototype.displayBasedOnGameClock=function(e){var t=Math.floor(e/1),o=e%1/1,n="";t>4||(0==t?n="3":1==t?n="2":2==t?n="1":3==t&&(n=a.NgcLocalizedManager.t("HSA_GAME_RULE").text,3!=this.lastStep&&this.UnlockToPlayGame()),this.lastStep=t,this.digit.string=n,this.digit.node.scale=(1-o)*this.homeScale)},t.prototype.update=function(e){if(this.LocalGameClockSec+=e,this.isPlaying){var t=this.LocalGameClockSec;t<=5&&this.displayBasedOnGameClock(t)}},i([u(cc.Label)],t.prototype,"digit",void 0),i([l],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../NanoGameCore/GameFramework/Scripts/Localized/LocalizedManager":"LocalizedManager","./../globals":"globals"}],globals:[function(e,t,o){"use strict";cc._RF.push(t,"2b7a2SQF+JHup0IJkUV1eEK","globals"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={Main:null,PlayerController:null,Game:null,EnemyControllerBase:null,SceneManager:null,AutoTest:null,GameUI:null,NetClient:null,AppState:null,PlayerState:null,NgcLocalizedManager:null,Parallax:null,GameCamera:null,TextEffectController:null,HelicopterController:null,StartMain:null,MainScreen:null,OfflineMode:null,UserInfo:null},cc._RF.pop()},{}],helpers:[function(e,t,o){"use strict";cc._RF.push(t,"f228aSmONVFqbdEo3io3u1q","helpers");var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,s)}c((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.createDebug=o.strToBoolean=o.sendTracking=o.getTrackingParams=o.TrackType=o.getPageURL=o.doWithRetry=o.getRandomInt=o.wait=void 0;var a,s=e("../GameFramework/Scripts/BuildConfig"),c=e("../GameFramework/Scripts/CountryFlagsManager"),l=e("../SDK/Nano/NanoSrv"),u=e("./Utils");function p(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1)+e)}function d(){return window.location!==window.parent.location?document.referrer:document.location.href}function f(e,t){void 0===t&&(t={encodeURLs:!1});var o=t.encodeURLs;return n({gameId:s.NgcBuildConfig.platformGameID,platform:u.Utils.getUrlParameter("platform")||s.NgcBuildConfig.buildPlatform,page_url:o?encodeURIComponent(d()):d(),os:u.OS_TYPE[u.Utils.getOSType()].toLowerCase(),timeZone:u.Utils.getTimeZone(),country:c.NgcCountryFlagsManager.localCountry,deviceType:cc.sys.isMobile?"Mobile":"PC",browser:u.BROWSER_TYPE[u.Utils.getBrowserType()].toLowerCase()},e)}function h(e,t){return void 0===t&&(t=!1),null===e?t:"true"===e}o.wait=function(e){return new Promise(function(t){return setTimeout(t,e)})},o.getRandomInt=p,function(e){e[e.firstTry=0]="firstTry",e[e.immediateRetry=1]="immediateRetry",e[e.finalRetry=2]="finalRetry"}(a||(a={})),o.doWithRetry=function(e,t){return r(this,void 0,Promise,function(){var n,s,c,l=this;return i(this,function(u){switch(u.label){case 0:return n=!1,s=null==t?void 0:t.doFinallyFn,[4,(c=function(u){return void 0===u&&(u=a.firstTry),r(l,void 0,void 0,function(){var r,l;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,9,10]),u!==a.finalRetry?[3,2]:(r=(null==t?void 0:t.retryDelayMs)||p(3e3,7e3),[4,o.wait(r)]);case 1:i.sent(),i.label=2;case 2:return[4,e()];case 3:return i.sent(),n=!0,[3,10];case 4:return l=i.sent(),console.error(l),u!==a.firstTry?[3,6]:[4,c(a.immediateRetry)];case 5:return i.sent(),[3,8];case 6:return u!==a.immediateRetry?[3,8]:[4,c(a.finalRetry)];case 7:i.sent(),i.label=8;case 8:return[3,10];case 9:return s&&(n||u===a.finalRetry)&&s(),[7];case 10:return[2]}})})})()];case 1:return u.sent(),[2]}})})},o.getPageURL=d,function(e){e.Launching="launching",e.GDPR_Response="gdpr_response",e.Install_App_Click="install_app_click",e.Vignette_Interaction="vignette_interaction",e.Sitelock_Banner_Popup="sitelock_banner_popup",e.Sitelock_Banner_Interaction="sitelock_banner_interaction"}(o.TrackType||(o.TrackType={})),o.getTrackingParams=f,o.sendTracking=function(e){var t=f(e,{encodeURLs:!0});l.default.inst.sendTracking(t)},o.strToBoolean=h,o.createDebug=function(){var e={},t=s.NgcBuildConfig.deploymentEnvironment,o=h(sessionStorage.getItem("NGC_DEBUG_API"));return Object.defineProperty(e,"API",{get:function(){return"Live"!==t&&o},set:function(e){if("Live"===t)throw new Error("[Debug] Setting Debug.API is forbidden in the current environment");if("boolean"!=typeof e)throw new TypeError("[Debug] Expect a 'boolean' value instead of a '"+typeof e+"'");o=e,sessionStorage.setItem("NGC_DEBUG_API",e.toString())}}),e},cc._RF.pop()},{"../GameFramework/Scripts/BuildConfig":"BuildConfig","../GameFramework/Scripts/CountryFlagsManager":"CountryFlagsManager","../SDK/Nano/NanoSrv":"NanoSrv","./Utils":"Utils"}],hsaprotobuf:[function(e,t){"use strict";var o;cc._RF.push(t,"9e0ebyumn1KVYDuSmf/BRBJ","hsaprotobuf"),o=function(e){var t,o,n=e.Reader,r=e.Writer,i=e.util,a=e.roots.default||(e.roots.default={});return a.MessageType=(t={},(o=Object.create(t))[t[0]="TIME_SYNC_REQUEST"]=0,o[t[1]="TIME_SYNC_RESPONSE"]=1,o[t[19]="BOT_REASSIGNMENT_REQUEST"]=19,o[t[25]="PING"]=25,o[t[26]="PONG"]=26,o[t[27]="JOIN_GAME_REQUEST"]=27,o[t[30]="COMMAND_DASH"]=30,o[t[29]="COMMAND_DRAG"]=29,o[t[6]="EXIT_GAME"]=6,o[t[28]="INITIAL_GAME_STATE"]=28,o[t[31]="BOT_CREATION_REQUEST"]=31,o[t[11]="SERVER_FULLGAMESTATE"]=11,o[t[17]="PLAYER_KILL"]=17,o[t[18]="PLAYER_DEATH"]=18,o[t[2]="CLIENT_REQUESTJOINGAME"]=2,o[t[3]="CLIENT_PING"]=3,o[t[9]="SERVER_GAMESTARTINGSTATUS"]=9,o[t[10]="SERVER_PING"]=10,o[t[5]="CLIENT_PLAYERSTATEDATA_MULTI"]=5,o[t[4]="CLIENT_PLAYERSTATEDATA"]=4,o[t[7]="BROADCAST_MESSAGE"]=7,o[t[8]="CLIENT_PLAYERATTACKCOMMAND"]=8,o[t[12]="SERVER_ORDERCREATEBOT"]=12,o[t[13]="SERVER_BROADCASTMESSAGE"]=13,o[t[14]="SERVER_ATTACKRESULT"]=14,o[t[15]="CLIENT_PLAYERDASH"]=15,o[t[16]="SERVER_PLAYERDASH"]=16,o[t[20]="SERVER_NOTIFICATION"]=20,o[t[21]="CLIENT_REQUESTJOINPARTY"]=21,o[t[22]="CLIENT_SENDMESSAGETOPARTY"]=22,o[t[23]="SERVER_PARTYSTATUS"]=23,o[t[24]="NONE"]=24,o),a.BotCreationRequest=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.gameId="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.msgType),t.uint32(18).string(e.gameId),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.BotCreationRequest;e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:r.msgType=e.int32();break;case 2:r.gameId=e.string();break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("msgType"))throw i.ProtocolError("missing required 'msgType'",{instance:r});if(!r.hasOwnProperty("gameId"))throw i.ProtocolError("missing required 'gameId'",{instance:r});return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return i.isString(e.gameId)?null:"gameId: string expected"},t.fromObject=function(e){if(e instanceof a.BotCreationRequest)return e;var t=new a.BotCreationRequest;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.gameId&&(t.gameId=String(e.gameId)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.gameId=""),null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.gameId&&e.hasOwnProperty("gameId")&&(o.gameId=e.gameId),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.BotReassignmentRequest=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.gameId="",t.prototype.playerId="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.msgType),t.uint32(18).string(e.gameId),t.uint32(26).string(e.playerId),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.BotReassignmentRequest;e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:r.msgType=e.int32();break;case 2:r.gameId=e.string();break;case 3:r.playerId=e.string();break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("msgType"))throw i.ProtocolError("missing required 'msgType'",{instance:r});if(!r.hasOwnProperty("gameId"))throw i.ProtocolError("missing required 'gameId'",{instance:r});if(!r.hasOwnProperty("playerId"))throw i.ProtocolError("missing required 'playerId'",{instance:r});return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return i.isString(e.gameId)?i.isString(e.playerId)?null:"playerId: string expected":"gameId: string expected"},t.fromObject=function(e){if(e instanceof a.BotReassignmentRequest)return e;var t=new a.BotReassignmentRequest;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.gameId&&(t.gameId=String(e.gameId)),null!=e.playerId&&(t.playerId=String(e.playerId)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.gameId="",o.playerId=""),null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.gameId&&e.hasOwnProperty("gameId")&&(o.gameId=e.gameId),null!=e.playerId&&e.hasOwnProperty("playerId")&&(o.playerId=e.playerId),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.CommandDash=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}var o;return t.prototype.msgType=0,t.prototype.commandTime=i.Long?i.Long.fromBits(0,0,!0):0,t.prototype.gameId="",t.prototype.playerId="",t.prototype.posX=null,t.prototype.posY=null,t.prototype.direction=null,t.prototype.energy=null,Object.defineProperty(t.prototype,"_posX",{get:i.oneOfGetter(o=["posX"]),set:i.oneOfSetter(o)}),Object.defineProperty(t.prototype,"_posY",{get:i.oneOfGetter(o=["posY"]),set:i.oneOfSetter(o)}),Object.defineProperty(t.prototype,"_direction",{get:i.oneOfGetter(o=["direction"]),set:i.oneOfSetter(o)}),Object.defineProperty(t.prototype,"_energy",{get:i.oneOfGetter(o=["energy"]),set:i.oneOfSetter(o)}),t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.msgType),t.uint32(16).uint64(e.commandTime),t.uint32(26).string(e.gameId),t.uint32(34).string(e.playerId),null!=e.posX&&Object.hasOwnProperty.call(e,"posX")&&t.uint32(45).float(e.posX),null!=e.posY&&Object.hasOwnProperty.call(e,"posY")&&t.uint32(53).float(e.posY),null!=e.direction&&Object.hasOwnProperty.call(e,"direction")&&t.uint32(61).float(e.direction),null!=e.energy&&Object.hasOwnProperty.call(e,"energy")&&t.uint32(69).float(e.energy),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.CommandDash;e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:r.msgType=e.int32();break;case 2:r.commandTime=e.uint64();break;case 3:r.gameId=e.string();break;case 4:r.playerId=e.string();break;case 5:r.posX=e.float();break;case 6:r.posY=e.float();break;case 7:r.direction=e.float();break;case 8:r.energy=e.float();break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("msgType"))throw i.ProtocolError("missing required 'msgType'",{instance:r});if(!r.hasOwnProperty("commandTime"))throw i.ProtocolError("missing required 'commandTime'",{instance:r});if(!r.hasOwnProperty("gameId"))throw i.ProtocolError("missing required 'gameId'",{instance:r});if(!r.hasOwnProperty("playerId"))throw i.ProtocolError("missing required 'playerId'",{instance:r});return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return i.isInteger(e.commandTime)||e.commandTime&&i.isInteger(e.commandTime.low)&&i.isInteger(e.commandTime.high)?i.isString(e.gameId)?i.isString(e.playerId)?null!=e.posX&&e.hasOwnProperty("posX")&&(t._posX=1,"number"!=typeof e.posX)?"posX: number expected":null!=e.posY&&e.hasOwnProperty("posY")&&(t._posY=1,"number"!=typeof e.posY)?"posY: number expected":null!=e.direction&&e.hasOwnProperty("direction")&&(t._direction=1,"number"!=typeof e.direction)?"direction: number expected":null!=e.energy&&e.hasOwnProperty("energy")&&(t._energy=1,"number"!=typeof e.energy)?"energy: number expected":null:"playerId: string expected":"gameId: string expected":"commandTime: integer|Long expected"},t.fromObject=function(e){if(e instanceof a.CommandDash)return e;var t=new a.CommandDash;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.commandTime&&(i.Long?(t.commandTime=i.Long.fromValue(e.commandTime)).unsigned=!0:"string"==typeof e.commandTime?t.commandTime=parseInt(e.commandTime,10):"number"==typeof e.commandTime?t.commandTime=e.commandTime:"object"==typeof e.commandTime&&(t.commandTime=new i.LongBits(e.commandTime.low>>>0,e.commandTime.high>>>0).toNumber(!0))),null!=e.gameId&&(t.gameId=String(e.gameId)),null!=e.playerId&&(t.playerId=String(e.playerId)),null!=e.posX&&(t.posX=Number(e.posX)),null!=e.posY&&(t.posY=Number(e.posY)),null!=e.direction&&(t.direction=Number(e.direction)),null!=e.energy&&(t.energy=Number(e.energy)),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults){if(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,i.Long){var n=new i.Long(0,0,!0);o.commandTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.commandTime=t.longs===String?"0":0;o.gameId="",o.playerId=""}return null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.commandTime&&e.hasOwnProperty("commandTime")&&("number"==typeof e.commandTime?o.commandTime=t.longs===String?String(e.commandTime):e.commandTime:o.commandTime=t.longs===String?i.Long.prototype.toString.call(e.commandTime):t.longs===Number?new i.LongBits(e.commandTime.low>>>0,e.commandTime.high>>>0).toNumber(!0):e.commandTime),null!=e.gameId&&e.hasOwnProperty("gameId")&&(o.gameId=e.gameId),null!=e.playerId&&e.hasOwnProperty("playerId")&&(o.playerId=e.playerId),null!=e.posX&&e.hasOwnProperty("posX")&&(o.posX=t.json&&!isFinite(e.posX)?String(e.posX):e.posX,t.oneofs&&(o._posX="posX")),null!=e.posY&&e.hasOwnProperty("posY")&&(o.posY=t.json&&!isFinite(e.posY)?String(e.posY):e.posY,t.oneofs&&(o._posY="posY")),null!=e.direction&&e.hasOwnProperty("direction")&&(o.direction=t.json&&!isFinite(e.direction)?String(e.direction):e.direction,t.oneofs&&(o._direction="direction")),null!=e.energy&&e.hasOwnProperty("energy")&&(o.energy=t.json&&!isFinite(e.energy)?String(e.energy):e.energy,t.oneofs&&(o._energy="energy")),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.CommandDrag=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}var o;return t.prototype.msgType=0,t.prototype.commandTime=i.Long?i.Long.fromBits(0,0,!0):0,t.prototype.gameId="",t.prototype.playerId="",t.prototype.direction=0,t.prototype.posX=null,t.prototype.posY=null,Object.defineProperty(t.prototype,"_posX",{get:i.oneOfGetter(o=["posX"]),set:i.oneOfSetter(o)}),Object.defineProperty(t.prototype,"_posY",{get:i.oneOfGetter(o=["posY"]),set:i.oneOfSetter(o)}),t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.msgType),t.uint32(16).uint64(e.commandTime),t.uint32(26).string(e.gameId),t.uint32(34).string(e.playerId),t.uint32(45).float(e.direction),null!=e.posX&&Object.hasOwnProperty.call(e,"posX")&&t.uint32(53).float(e.posX),null!=e.posY&&Object.hasOwnProperty.call(e,"posY")&&t.uint32(61).float(e.posY),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.CommandDrag;e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:r.msgType=e.int32();break;case 2:r.commandTime=e.uint64();break;case 3:r.gameId=e.string();break;case 4:r.playerId=e.string();break;case 5:r.direction=e.float();break;case 6:r.posX=e.float();break;case 7:r.posY=e.float();break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("msgType"))throw i.ProtocolError("missing required 'msgType'",{instance:r});if(!r.hasOwnProperty("commandTime"))throw i.ProtocolError("missing required 'commandTime'",{instance:r});if(!r.hasOwnProperty("gameId"))throw i.ProtocolError("missing required 'gameId'",{instance:r});if(!r.hasOwnProperty("playerId"))throw i.ProtocolError("missing required 'playerId'",{instance:r});if(!r.hasOwnProperty("direction"))throw i.ProtocolError("missing required 'direction'",{instance:r});return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return i.isInteger(e.commandTime)||e.commandTime&&i.isInteger(e.commandTime.low)&&i.isInteger(e.commandTime.high)?i.isString(e.gameId)?i.isString(e.playerId)?"number"!=typeof e.direction?"direction: number expected":null!=e.posX&&e.hasOwnProperty("posX")&&(t._posX=1,"number"!=typeof e.posX)?"posX: number expected":null!=e.posY&&e.hasOwnProperty("posY")&&(t._posY=1,"number"!=typeof e.posY)?"posY: number expected":null:"playerId: string expected":"gameId: string expected":"commandTime: integer|Long expected"},t.fromObject=function(e){if(e instanceof a.CommandDrag)return e;var t=new a.CommandDrag;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.commandTime&&(i.Long?(t.commandTime=i.Long.fromValue(e.commandTime)).unsigned=!0:"string"==typeof e.commandTime?t.commandTime=parseInt(e.commandTime,10):"number"==typeof e.commandTime?t.commandTime=e.commandTime:"object"==typeof e.commandTime&&(t.commandTime=new i.LongBits(e.commandTime.low>>>0,e.commandTime.high>>>0).toNumber(!0))),null!=e.gameId&&(t.gameId=String(e.gameId)),null!=e.playerId&&(t.playerId=String(e.playerId)),null!=e.direction&&(t.direction=Number(e.direction)),null!=e.posX&&(t.posX=Number(e.posX)),null!=e.posY&&(t.posY=Number(e.posY)),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults){if(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,i.Long){var n=new i.Long(0,0,!0);o.commandTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.commandTime=t.longs===String?"0":0;o.gameId="",o.playerId="",o.direction=0}return null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.commandTime&&e.hasOwnProperty("commandTime")&&("number"==typeof e.commandTime?o.commandTime=t.longs===String?String(e.commandTime):e.commandTime:o.commandTime=t.longs===String?i.Long.prototype.toString.call(e.commandTime):t.longs===Number?new i.LongBits(e.commandTime.low>>>0,e.commandTime.high>>>0).toNumber(!0):e.commandTime),null!=e.gameId&&e.hasOwnProperty("gameId")&&(o.gameId=e.gameId),null!=e.playerId&&e.hasOwnProperty("playerId")&&(o.playerId=e.playerId),null!=e.direction&&e.hasOwnProperty("direction")&&(o.direction=t.json&&!isFinite(e.direction)?String(e.direction):e.direction),null!=e.posX&&e.hasOwnProperty("posX")&&(o.posX=t.json&&!isFinite(e.posX)?String(e.posX):e.posX,t.oneofs&&(o._posX="posX")),null!=e.posY&&e.hasOwnProperty("posY")&&(o.posY=t.json&&!isFinite(e.posY)?String(e.posY):e.posY,t.oneofs&&(o._posY="posY")),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.ExitGame=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.gameId="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.msgType),t.uint32(18).string(e.gameId),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.ExitGame;e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:r.msgType=e.int32();break;case 2:r.gameId=e.string();break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("msgType"))throw i.ProtocolError("missing required 'msgType'",{instance:r});if(!r.hasOwnProperty("gameId"))throw i.ProtocolError("missing required 'gameId'",{instance:r});return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return i.isString(e.gameId)?null:"gameId: string expected"},t.fromObject=function(e){if(e instanceof a.ExitGame)return e;var t=new a.ExitGame;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.gameId&&(t.gameId=String(e.gameId)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.gameId=""),null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.gameId&&e.hasOwnProperty("gameId")&&(o.gameId=e.gameId),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.PlayerDeath=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}var o;return t.prototype.msgType=0,t.prototype.gameId="",t.prototype.playerId="",t.prototype.time=i.Long?i.Long.fromBits(0,0,!0):0,t.prototype.rank=null,Object.defineProperty(t.prototype,"_rank",{get:i.oneOfGetter(o=["rank"]),set:i.oneOfSetter(o)}),t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.msgType),t.uint32(18).string(e.gameId),t.uint32(26).string(e.playerId),t.uint32(32).uint64(e.time),null!=e.rank&&Object.hasOwnProperty.call(e,"rank")&&t.uint32(40).uint32(e.rank),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.PlayerDeath;e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:r.msgType=e.int32();break;case 2:r.gameId=e.string();break;case 3:r.playerId=e.string();break;case 4:r.time=e.uint64();break;case 5:r.rank=e.uint32();break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("msgType"))throw i.ProtocolError("missing required 'msgType'",{instance:r});if(!r.hasOwnProperty("gameId"))throw i.ProtocolError("missing required 'gameId'",{instance:r});if(!r.hasOwnProperty("playerId"))throw i.ProtocolError("missing required 'playerId'",{instance:r});if(!r.hasOwnProperty("time"))throw i.ProtocolError("missing required 'time'",{instance:r});return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return i.isString(e.gameId)?i.isString(e.playerId)?i.isInteger(e.time)||e.time&&i.isInteger(e.time.low)&&i.isInteger(e.time.high)?null!=e.rank&&e.hasOwnProperty("rank")&&!i.isInteger(e.rank)?"rank: integer expected":null:"time: integer|Long expected":"playerId: string expected":"gameId: string expected"},t.fromObject=function(e){if(e instanceof a.PlayerDeath)return e;var t=new a.PlayerDeath;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.gameId&&(t.gameId=String(e.gameId)),null!=e.playerId&&(t.playerId=String(e.playerId)),null!=e.time&&(i.Long?(t.time=i.Long.fromValue(e.time)).unsigned=!0:"string"==typeof e.time?t.time=parseInt(e.time,10):"number"==typeof e.time?t.time=e.time:"object"==typeof e.time&&(t.time=new i.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0))),null!=e.rank&&(t.rank=e.rank>>>0),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.gameId="",o.playerId="",i.Long){var n=new i.Long(0,0,!0);o.time=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.time=t.longs===String?"0":0;return null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.gameId&&e.hasOwnProperty("gameId")&&(o.gameId=e.gameId),null!=e.playerId&&e.hasOwnProperty("playerId")&&(o.playerId=e.playerId),null!=e.time&&e.hasOwnProperty("time")&&("number"==typeof e.time?o.time=t.longs===String?String(e.time):e.time:o.time=t.longs===String?i.Long.prototype.toString.call(e.time):t.longs===Number?new i.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0):e.time),null!=e.rank&&e.hasOwnProperty("rank")&&(o.rank=e.rank,t.oneofs&&(o._rank="rank")),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.PlayerKill=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.gameId="",t.prototype.playerId="",t.prototype.time=i.Long?i.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.msgType),t.uint32(18).string(e.gameId),t.uint32(26).string(e.playerId),t.uint32(32).uint64(e.time),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.PlayerKill;e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:r.msgType=e.int32();break;case 2:r.gameId=e.string();break;case 3:r.playerId=e.string();break;case 4:r.time=e.uint64();break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("msgType"))throw i.ProtocolError("missing required 'msgType'",{instance:r});if(!r.hasOwnProperty("gameId"))throw i.ProtocolError("missing required 'gameId'",{instance:r});if(!r.hasOwnProperty("playerId"))throw i.ProtocolError("missing required 'playerId'",{instance:r});if(!r.hasOwnProperty("time"))throw i.ProtocolError("missing required 'time'",{instance:r});return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return i.isString(e.gameId)?i.isString(e.playerId)?i.isInteger(e.time)||e.time&&i.isInteger(e.time.low)&&i.isInteger(e.time.high)?null:"time: integer|Long expected":"playerId: string expected":"gameId: string expected"},t.fromObject=function(e){if(e instanceof a.PlayerKill)return e;var t=new a.PlayerKill;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.gameId&&(t.gameId=String(e.gameId)),null!=e.playerId&&(t.playerId=String(e.playerId)),null!=e.time&&(i.Long?(t.time=i.Long.fromValue(e.time)).unsigned=!0:"string"==typeof e.time?t.time=parseInt(e.time,10):"number"==typeof e.time?t.time=e.time:"object"==typeof e.time&&(t.time=new i.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.gameId="",o.playerId="",i.Long){var n=new i.Long(0,0,!0);o.time=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.time=t.longs===String?"0":0;return null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.gameId&&e.hasOwnProperty("gameId")&&(o.gameId=e.gameId),null!=e.playerId&&e.hasOwnProperty("playerId")&&(o.playerId=e.playerId),null!=e.time&&e.hasOwnProperty("time")&&("number"==typeof e.time?o.time=t.longs===String?String(e.time):e.time:o.time=t.longs===String?i.Long.prototype.toString.call(e.time):t.longs===Number?new i.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0):e.time),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Client_PlayerStateData=function(){function t(e){if(this.playerStates=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.gameId="",t.prototype.time=i.Long?i.Long.fromBits(0,0,!0):0,t.prototype.playerStates=i.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=r.create()),t.uint32(8).int32(e.msgType),t.uint32(18).string(e.gameId),t.uint32(24).uint64(e.time),null!=e.playerStates&&e.playerStates.length)for(var o=0;o<e.playerStates.length;++o)a.PlayerState.encode(e.playerStates[o],t.uint32(34).fork()).ldelim();return t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Client_PlayerStateData;e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:r.msgType=e.int32();break;case 2:r.gameId=e.string();break;case 3:r.time=e.uint64();break;case 4:r.playerStates&&r.playerStates.length||(r.playerStates=[]),r.playerStates.push(a.PlayerState.decode(e,e.uint32()));break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("msgType"))throw i.ProtocolError("missing required 'msgType'",{instance:r});if(!r.hasOwnProperty("gameId"))throw i.ProtocolError("missing required 'gameId'",{instance:r});if(!r.hasOwnProperty("time"))throw i.ProtocolError("missing required 'time'",{instance:r});return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}if(!i.isString(e.gameId))return"gameId: string expected";if(!(i.isInteger(e.time)||e.time&&i.isInteger(e.time.low)&&i.isInteger(e.time.high)))return"time: integer|Long expected";if(null!=e.playerStates&&e.hasOwnProperty("playerStates")){if(!Array.isArray(e.playerStates))return"playerStates: array expected";for(var t=0;t<e.playerStates.length;++t){var o=a.PlayerState.verify(e.playerStates[t]);if(o)return"playerStates."+o}}return null},t.fromObject=function(e){if(e instanceof a.Client_PlayerStateData)return e;var t=new a.Client_PlayerStateData;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}if(null!=e.gameId&&(t.gameId=String(e.gameId)),null!=e.time&&(i.Long?(t.time=i.Long.fromValue(e.time)).unsigned=!0:"string"==typeof e.time?t.time=parseInt(e.time,10):"number"==typeof e.time?t.time=e.time:"object"==typeof e.time&&(t.time=new i.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0))),e.playerStates){if(!Array.isArray(e.playerStates))throw TypeError(".Client_PlayerStateData.playerStates: array expected");t.playerStates=[];for(var o=0;o<e.playerStates.length;++o){if("object"!=typeof e.playerStates[o])throw TypeError(".Client_PlayerStateData.playerStates: object expected");t.playerStates[o]=a.PlayerState.fromObject(e.playerStates[o])}}return t},t.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.playerStates=[]),t.defaults)if(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.gameId="",i.Long){var n=new i.Long(0,0,!0);o.time=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.time=t.longs===String?"0":0;if(null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.gameId&&e.hasOwnProperty("gameId")&&(o.gameId=e.gameId),null!=e.time&&e.hasOwnProperty("time")&&("number"==typeof e.time?o.time=t.longs===String?String(e.time):e.time:o.time=t.longs===String?i.Long.prototype.toString.call(e.time):t.longs===Number?new i.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0):e.time),e.playerStates&&e.playerStates.length){o.playerStates=[];for(var r=0;r<e.playerStates.length;++r)o.playerStates[r]=a.PlayerState.toObject(e.playerStates[r],t)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Client_PlayerDash=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.gameID="",t.prototype.netID="",t.prototype.direction=0,t.prototype.time=i.Long?i.Long.fromBits(0,0,!0):0,t.prototype.startPosX=0,t.prototype.startPosY=0,t.prototype.distanceRatio=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).int32(e.msgType),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(26).string(e.netID),null!=e.direction&&Object.hasOwnProperty.call(e,"direction")&&t.uint32(37).float(e.direction),null!=e.time&&Object.hasOwnProperty.call(e,"time")&&t.uint32(40).uint64(e.time),null!=e.startPosX&&Object.hasOwnProperty.call(e,"startPosX")&&t.uint32(53).float(e.startPosX),null!=e.startPosY&&Object.hasOwnProperty.call(e,"startPosY")&&t.uint32(61).float(e.startPosY),null!=e.distanceRatio&&Object.hasOwnProperty.call(e,"distanceRatio")&&t.uint32(69).float(e.distanceRatio),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Client_PlayerDash;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.msgType=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.netID=e.string();break;case 4:r.direction=e.float();break;case 5:r.time=e.uint64();break;case 6:r.startPosX=e.float();break;case 7:r.startPosY=e.float();break;case 8:r.distanceRatio=e.float();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.msgType&&e.hasOwnProperty("msgType"))switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return null!=e.gameID&&e.hasOwnProperty("gameID")&&!i.isString(e.gameID)?"gameID: string expected":null!=e.netID&&e.hasOwnProperty("netID")&&!i.isString(e.netID)?"netID: string expected":null!=e.direction&&e.hasOwnProperty("direction")&&"number"!=typeof e.direction?"direction: number expected":null!=e.time&&e.hasOwnProperty("time")&&!(i.isInteger(e.time)||e.time&&i.isInteger(e.time.low)&&i.isInteger(e.time.high))?"time: integer|Long expected":null!=e.startPosX&&e.hasOwnProperty("startPosX")&&"number"!=typeof e.startPosX?"startPosX: number expected":null!=e.startPosY&&e.hasOwnProperty("startPosY")&&"number"!=typeof e.startPosY?"startPosY: number expected":null!=e.distanceRatio&&e.hasOwnProperty("distanceRatio")&&"number"!=typeof e.distanceRatio?"distanceRatio: number expected":null},t.fromObject=function(e){if(e instanceof a.Client_PlayerDash)return e;var t=new a.Client_PlayerDash;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.netID&&(t.netID=String(e.netID)),null!=e.direction&&(t.direction=Number(e.direction)),null!=e.time&&(i.Long?(t.time=i.Long.fromValue(e.time)).unsigned=!0:"string"==typeof e.time?t.time=parseInt(e.time,10):"number"==typeof e.time?t.time=e.time:"object"==typeof e.time&&(t.time=new i.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0))),null!=e.startPosX&&(t.startPosX=Number(e.startPosX)),null!=e.startPosY&&(t.startPosY=Number(e.startPosY)),null!=e.distanceRatio&&(t.distanceRatio=Number(e.distanceRatio)),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults){if(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.gameID="",o.netID="",o.direction=0,i.Long){var n=new i.Long(0,0,!0);o.time=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.time=t.longs===String?"0":0;o.startPosX=0,o.startPosY=0,o.distanceRatio=0}return null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),null!=e.direction&&e.hasOwnProperty("direction")&&(o.direction=t.json&&!isFinite(e.direction)?String(e.direction):e.direction),null!=e.time&&e.hasOwnProperty("time")&&("number"==typeof e.time?o.time=t.longs===String?String(e.time):e.time:o.time=t.longs===String?i.Long.prototype.toString.call(e.time):t.longs===Number?new i.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0):e.time),null!=e.startPosX&&e.hasOwnProperty("startPosX")&&(o.startPosX=t.json&&!isFinite(e.startPosX)?String(e.startPosX):e.startPosX),null!=e.startPosY&&e.hasOwnProperty("startPosY")&&(o.startPosY=t.json&&!isFinite(e.startPosY)?String(e.startPosY):e.startPosY),null!=e.distanceRatio&&e.hasOwnProperty("distanceRatio")&&(o.distanceRatio=t.json&&!isFinite(e.distanceRatio)?String(e.distanceRatio):e.distanceRatio),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Server_PlayerDash=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.gameID="",t.prototype.netID="",t.prototype.direction=0,t.prototype.time=i.Long?i.Long.fromBits(0,0,!0):0,t.prototype.startPosX=0,t.prototype.startPosY=0,t.prototype.distanceRatio=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).int32(e.msgType),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(26).string(e.netID),null!=e.direction&&Object.hasOwnProperty.call(e,"direction")&&t.uint32(37).float(e.direction),null!=e.time&&Object.hasOwnProperty.call(e,"time")&&t.uint32(40).uint64(e.time),null!=e.startPosX&&Object.hasOwnProperty.call(e,"startPosX")&&t.uint32(53).float(e.startPosX),null!=e.startPosY&&Object.hasOwnProperty.call(e,"startPosY")&&t.uint32(61).float(e.startPosY),null!=e.distanceRatio&&Object.hasOwnProperty.call(e,"distanceRatio")&&t.uint32(69).float(e.distanceRatio),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Server_PlayerDash;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.msgType=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.netID=e.string();break;case 4:r.direction=e.float();break;case 5:r.time=e.uint64();break;case 6:r.startPosX=e.float();break;case 7:r.startPosY=e.float();break;case 8:r.distanceRatio=e.float();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.msgType&&e.hasOwnProperty("msgType"))switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return null!=e.gameID&&e.hasOwnProperty("gameID")&&!i.isString(e.gameID)?"gameID: string expected":null!=e.netID&&e.hasOwnProperty("netID")&&!i.isString(e.netID)?"netID: string expected":null!=e.direction&&e.hasOwnProperty("direction")&&"number"!=typeof e.direction?"direction: number expected":null!=e.time&&e.hasOwnProperty("time")&&!(i.isInteger(e.time)||e.time&&i.isInteger(e.time.low)&&i.isInteger(e.time.high))?"time: integer|Long expected":null!=e.startPosX&&e.hasOwnProperty("startPosX")&&"number"!=typeof e.startPosX?"startPosX: number expected":null!=e.startPosY&&e.hasOwnProperty("startPosY")&&"number"!=typeof e.startPosY?"startPosY: number expected":null!=e.distanceRatio&&e.hasOwnProperty("distanceRatio")&&"number"!=typeof e.distanceRatio?"distanceRatio: number expected":null},t.fromObject=function(e){if(e instanceof a.Server_PlayerDash)return e;var t=new a.Server_PlayerDash;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.netID&&(t.netID=String(e.netID)),null!=e.direction&&(t.direction=Number(e.direction)),null!=e.time&&(i.Long?(t.time=i.Long.fromValue(e.time)).unsigned=!0:"string"==typeof e.time?t.time=parseInt(e.time,10):"number"==typeof e.time?t.time=e.time:"object"==typeof e.time&&(t.time=new i.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0))),null!=e.startPosX&&(t.startPosX=Number(e.startPosX)),null!=e.startPosY&&(t.startPosY=Number(e.startPosY)),null!=e.distanceRatio&&(t.distanceRatio=Number(e.distanceRatio)),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults){if(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.gameID="",o.netID="",o.direction=0,i.Long){var n=new i.Long(0,0,!0);o.time=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.time=t.longs===String?"0":0;o.startPosX=0,o.startPosY=0,o.distanceRatio=0}return null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),null!=e.direction&&e.hasOwnProperty("direction")&&(o.direction=t.json&&!isFinite(e.direction)?String(e.direction):e.direction),null!=e.time&&e.hasOwnProperty("time")&&("number"==typeof e.time?o.time=t.longs===String?String(e.time):e.time:o.time=t.longs===String?i.Long.prototype.toString.call(e.time):t.longs===Number?new i.LongBits(e.time.low>>>0,e.time.high>>>0).toNumber(!0):e.time),null!=e.startPosX&&e.hasOwnProperty("startPosX")&&(o.startPosX=t.json&&!isFinite(e.startPosX)?String(e.startPosX):e.startPosX),null!=e.startPosY&&e.hasOwnProperty("startPosY")&&(o.startPosY=t.json&&!isFinite(e.startPosY)?String(e.startPosY):e.startPosY),null!=e.distanceRatio&&e.hasOwnProperty("distanceRatio")&&(o.distanceRatio=t.json&&!isFinite(e.distanceRatio)?String(e.distanceRatio):e.distanceRatio),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.InitialGameState=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.gameId="",t.prototype.gameParameters="",t.prototype.playerList="",t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.msgType),t.uint32(18).string(e.gameId),t.uint32(26).string(e.gameParameters),t.uint32(34).string(e.playerList),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.InitialGameState;e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:r.msgType=e.int32();break;case 2:r.gameId=e.string();break;case 3:r.gameParameters=e.string();break;case 4:r.playerList=e.string();break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("msgType"))throw i.ProtocolError("missing required 'msgType'",{instance:r});if(!r.hasOwnProperty("gameId"))throw i.ProtocolError("missing required 'gameId'",{instance:r});if(!r.hasOwnProperty("gameParameters"))throw i.ProtocolError("missing required 'gameParameters'",{instance:r});if(!r.hasOwnProperty("playerList"))throw i.ProtocolError("missing required 'playerList'",{instance:r});return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return i.isString(e.gameId)?i.isString(e.gameParameters)?i.isString(e.playerList)?null:"playerList: string expected":"gameParameters: string expected":"gameId: string expected"},t.fromObject=function(e){if(e instanceof a.InitialGameState)return e;var t=new a.InitialGameState;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.gameId&&(t.gameId=String(e.gameId)),null!=e.gameParameters&&(t.gameParameters=String(e.gameParameters)),null!=e.playerList&&(t.playerList=String(e.playerList)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.gameId="",o.gameParameters="",o.playerList=""),null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.gameId&&e.hasOwnProperty("gameId")&&(o.gameId=e.gameId),null!=e.gameParameters&&e.hasOwnProperty("gameParameters")&&(o.gameParameters=e.gameParameters),null!=e.playerList&&e.hasOwnProperty("playerList")&&(o.playerList=e.playerList),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.JoinGameRequest=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}var o;return t.prototype.msgType=0,t.prototype.requestTime=i.Long?i.Long.fromBits(0,0,!0):0,t.prototype.gameId=null,t.prototype.playerId="",t.prototype.playerName="",t.prototype.isBot=!1,t.prototype.sharkSkin="",t.prototype.sharkSize=0,Object.defineProperty(t.prototype,"_gameId",{get:i.oneOfGetter(o=["gameId"]),set:i.oneOfSetter(o)}),t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.msgType),t.uint32(16).uint64(e.requestTime),null!=e.gameId&&Object.hasOwnProperty.call(e,"gameId")&&t.uint32(26).string(e.gameId),t.uint32(34).string(e.playerId),t.uint32(42).string(e.playerName),t.uint32(48).bool(e.isBot),t.uint32(58).string(e.sharkSkin),t.uint32(64).uint32(e.sharkSize),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.JoinGameRequest;e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:r.msgType=e.int32();break;case 2:r.requestTime=e.uint64();break;case 3:r.gameId=e.string();break;case 4:r.playerId=e.string();break;case 5:r.playerName=e.string();break;case 6:r.isBot=e.bool();break;case 7:r.sharkSkin=e.string();break;case 8:r.sharkSize=e.uint32();break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("msgType"))throw i.ProtocolError("missing required 'msgType'",{instance:r});if(!r.hasOwnProperty("requestTime"))throw i.ProtocolError("missing required 'requestTime'",{instance:r});if(!r.hasOwnProperty("playerId"))throw i.ProtocolError("missing required 'playerId'",{instance:r});if(!r.hasOwnProperty("playerName"))throw i.ProtocolError("missing required 'playerName'",{instance:r});if(!r.hasOwnProperty("isBot"))throw i.ProtocolError("missing required 'isBot'",{instance:r});if(!r.hasOwnProperty("sharkSkin"))throw i.ProtocolError("missing required 'sharkSkin'",{instance:r});if(!r.hasOwnProperty("sharkSize"))throw i.ProtocolError("missing required 'sharkSize'",{instance:r});return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return i.isInteger(e.requestTime)||e.requestTime&&i.isInteger(e.requestTime.low)&&i.isInteger(e.requestTime.high)?null!=e.gameId&&e.hasOwnProperty("gameId")&&!i.isString(e.gameId)?"gameId: string expected":i.isString(e.playerId)?i.isString(e.playerName)?"boolean"!=typeof e.isBot?"isBot: boolean expected":i.isString(e.sharkSkin)?i.isInteger(e.sharkSize)?null:"sharkSize: integer expected":"sharkSkin: string expected":"playerName: string expected":"playerId: string expected":"requestTime: integer|Long expected"},t.fromObject=function(e){if(e instanceof a.JoinGameRequest)return e;var t=new a.JoinGameRequest;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.requestTime&&(i.Long?(t.requestTime=i.Long.fromValue(e.requestTime)).unsigned=!0:"string"==typeof e.requestTime?t.requestTime=parseInt(e.requestTime,10):"number"==typeof e.requestTime?t.requestTime=e.requestTime:"object"==typeof e.requestTime&&(t.requestTime=new i.LongBits(e.requestTime.low>>>0,e.requestTime.high>>>0).toNumber(!0))),null!=e.gameId&&(t.gameId=String(e.gameId)),null!=e.playerId&&(t.playerId=String(e.playerId)),null!=e.playerName&&(t.playerName=String(e.playerName)),null!=e.isBot&&(t.isBot=Boolean(e.isBot)),null!=e.sharkSkin&&(t.sharkSkin=String(e.sharkSkin)),null!=e.sharkSize&&(t.sharkSize=e.sharkSize>>>0),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults){if(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,i.Long){var n=new i.Long(0,0,!0);o.requestTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.requestTime=t.longs===String?"0":0;o.playerId="",o.playerName="",o.isBot=!1,o.sharkSkin="",o.sharkSize=0}return null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.requestTime&&e.hasOwnProperty("requestTime")&&("number"==typeof e.requestTime?o.requestTime=t.longs===String?String(e.requestTime):e.requestTime:o.requestTime=t.longs===String?i.Long.prototype.toString.call(e.requestTime):t.longs===Number?new i.LongBits(e.requestTime.low>>>0,e.requestTime.high>>>0).toNumber(!0):e.requestTime),null!=e.gameId&&e.hasOwnProperty("gameId")&&(o.gameId=e.gameId,t.oneofs&&(o._gameId="gameId")),null!=e.playerId&&e.hasOwnProperty("playerId")&&(o.playerId=e.playerId),null!=e.playerName&&e.hasOwnProperty("playerName")&&(o.playerName=e.playerName),null!=e.isBot&&e.hasOwnProperty("isBot")&&(o.isBot=e.isBot),null!=e.sharkSkin&&e.hasOwnProperty("sharkSkin")&&(o.sharkSkin=e.sharkSkin),null!=e.sharkSize&&e.hasOwnProperty("sharkSize")&&(o.sharkSize=e.sharkSize),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Ping=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.requesterTime=i.Long?i.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.msgType),t.uint32(16).uint64(e.requesterTime),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Ping;e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:r.msgType=e.int32();break;case 2:r.requesterTime=e.uint64();break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("msgType"))throw i.ProtocolError("missing required 'msgType'",{instance:r});if(!r.hasOwnProperty("requesterTime"))throw i.ProtocolError("missing required 'requesterTime'",{instance:r});return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return i.isInteger(e.requesterTime)||e.requesterTime&&i.isInteger(e.requesterTime.low)&&i.isInteger(e.requesterTime.high)?null:"requesterTime: integer|Long expected"},t.fromObject=function(e){if(e instanceof a.Ping)return e;var t=new a.Ping;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.requesterTime&&(i.Long?(t.requesterTime=i.Long.fromValue(e.requesterTime)).unsigned=!0:"string"==typeof e.requesterTime?t.requesterTime=parseInt(e.requesterTime,10):"number"==typeof e.requesterTime?t.requesterTime=e.requesterTime:"object"==typeof e.requesterTime&&(t.requesterTime=new i.LongBits(e.requesterTime.low>>>0,e.requesterTime.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,i.Long){var n=new i.Long(0,0,!0);o.requesterTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.requesterTime=t.longs===String?"0":0;return null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.requesterTime&&e.hasOwnProperty("requesterTime")&&("number"==typeof e.requesterTime?o.requesterTime=t.longs===String?String(e.requesterTime):e.requesterTime:o.requesterTime=t.longs===String?i.Long.prototype.toString.call(e.requesterTime):t.longs===Number?new i.LongBits(e.requesterTime.low>>>0,e.requesterTime.high>>>0).toNumber(!0):e.requesterTime),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.PlayerState=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.stateMsgID=0,t.prototype.netID="",t.prototype.lastPositionX=0,t.prototype.lastPositionY=0,t.prototype.lastState=0,t.prototype.score=0,t.prototype.hp=0,t.prototype.lastDirX=0,t.prototype.lastDirY=0,t.prototype.lastGuidedDirX=0,t.prototype.lastGuidedDirY=0,t.prototype.curSize=0,t.prototype.lastSpeed=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.stateMsgID&&Object.hasOwnProperty.call(e,"stateMsgID")&&t.uint32(8).uint32(e.stateMsgID),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(18).string(e.netID),null!=e.lastPositionX&&Object.hasOwnProperty.call(e,"lastPositionX")&&t.uint32(29).float(e.lastPositionX),null!=e.lastPositionY&&Object.hasOwnProperty.call(e,"lastPositionY")&&t.uint32(37).float(e.lastPositionY),null!=e.lastState&&Object.hasOwnProperty.call(e,"lastState")&&t.uint32(40).uint32(e.lastState),null!=e.score&&Object.hasOwnProperty.call(e,"score")&&t.uint32(48).uint32(e.score),null!=e.hp&&Object.hasOwnProperty.call(e,"hp")&&t.uint32(56).uint32(e.hp),null!=e.lastDirX&&Object.hasOwnProperty.call(e,"lastDirX")&&t.uint32(69).float(e.lastDirX),null!=e.lastDirY&&Object.hasOwnProperty.call(e,"lastDirY")&&t.uint32(77).float(e.lastDirY),null!=e.lastGuidedDirX&&Object.hasOwnProperty.call(e,"lastGuidedDirX")&&t.uint32(85).float(e.lastGuidedDirX),null!=e.lastGuidedDirY&&Object.hasOwnProperty.call(e,"lastGuidedDirY")&&t.uint32(93).float(e.lastGuidedDirY),null!=e.curSize&&Object.hasOwnProperty.call(e,"curSize")&&t.uint32(96).uint32(e.curSize),t.uint32(109).float(e.lastSpeed),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.PlayerState;e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:r.stateMsgID=e.uint32();break;case 2:r.netID=e.string();break;case 3:r.lastPositionX=e.float();break;case 4:r.lastPositionY=e.float();break;case 5:r.lastState=e.uint32();break;case 6:r.score=e.uint32();break;case 7:r.hp=e.uint32();break;case 8:r.lastDirX=e.float();break;case 9:r.lastDirY=e.float();break;case 10:r.lastGuidedDirX=e.float();break;case 11:r.lastGuidedDirY=e.float();break;case 12:r.curSize=e.uint32();break;case 13:r.lastSpeed=e.float();break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("lastSpeed"))throw i.ProtocolError("missing required 'lastSpeed'",{instance:r});return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.stateMsgID&&e.hasOwnProperty("stateMsgID")&&!i.isInteger(e.stateMsgID)?"stateMsgID: integer expected":null!=e.netID&&e.hasOwnProperty("netID")&&!i.isString(e.netID)?"netID: string expected":null!=e.lastPositionX&&e.hasOwnProperty("lastPositionX")&&"number"!=typeof e.lastPositionX?"lastPositionX: number expected":null!=e.lastPositionY&&e.hasOwnProperty("lastPositionY")&&"number"!=typeof e.lastPositionY?"lastPositionY: number expected":null!=e.lastState&&e.hasOwnProperty("lastState")&&!i.isInteger(e.lastState)?"lastState: integer expected":null!=e.score&&e.hasOwnProperty("score")&&!i.isInteger(e.score)?"score: integer expected":null!=e.hp&&e.hasOwnProperty("hp")&&!i.isInteger(e.hp)?"hp: integer expected":null!=e.lastDirX&&e.hasOwnProperty("lastDirX")&&"number"!=typeof e.lastDirX?"lastDirX: number expected":null!=e.lastDirY&&e.hasOwnProperty("lastDirY")&&"number"!=typeof e.lastDirY?"lastDirY: number expected":null!=e.lastGuidedDirX&&e.hasOwnProperty("lastGuidedDirX")&&"number"!=typeof e.lastGuidedDirX?"lastGuidedDirX: number expected":null!=e.lastGuidedDirY&&e.hasOwnProperty("lastGuidedDirY")&&"number"!=typeof e.lastGuidedDirY?"lastGuidedDirY: number expected":null!=e.curSize&&e.hasOwnProperty("curSize")&&!i.isInteger(e.curSize)?"curSize: integer expected":"number"!=typeof e.lastSpeed?"lastSpeed: number expected":null},t.fromObject=function(e){if(e instanceof a.PlayerState)return e;var t=new a.PlayerState;return null!=e.stateMsgID&&(t.stateMsgID=e.stateMsgID>>>0),null!=e.netID&&(t.netID=String(e.netID)),null!=e.lastPositionX&&(t.lastPositionX=Number(e.lastPositionX)),null!=e.lastPositionY&&(t.lastPositionY=Number(e.lastPositionY)),null!=e.lastState&&(t.lastState=e.lastState>>>0),null!=e.score&&(t.score=e.score>>>0),null!=e.hp&&(t.hp=e.hp>>>0),null!=e.lastDirX&&(t.lastDirX=Number(e.lastDirX)),null!=e.lastDirY&&(t.lastDirY=Number(e.lastDirY)),null!=e.lastGuidedDirX&&(t.lastGuidedDirX=Number(e.lastGuidedDirX)),null!=e.lastGuidedDirY&&(t.lastGuidedDirY=Number(e.lastGuidedDirY)),null!=e.curSize&&(t.curSize=e.curSize>>>0),null!=e.lastSpeed&&(t.lastSpeed=Number(e.lastSpeed)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.stateMsgID=0,o.netID="",o.lastPositionX=0,o.lastPositionY=0,o.lastState=0,o.score=0,o.hp=0,o.lastDirX=0,o.lastDirY=0,o.lastGuidedDirX=0,o.lastGuidedDirY=0,o.curSize=0,o.lastSpeed=0),null!=e.stateMsgID&&e.hasOwnProperty("stateMsgID")&&(o.stateMsgID=e.stateMsgID),null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),null!=e.lastPositionX&&e.hasOwnProperty("lastPositionX")&&(o.lastPositionX=t.json&&!isFinite(e.lastPositionX)?String(e.lastPositionX):e.lastPositionX),null!=e.lastPositionY&&e.hasOwnProperty("lastPositionY")&&(o.lastPositionY=t.json&&!isFinite(e.lastPositionY)?String(e.lastPositionY):e.lastPositionY),null!=e.lastState&&e.hasOwnProperty("lastState")&&(o.lastState=e.lastState),null!=e.score&&e.hasOwnProperty("score")&&(o.score=e.score),null!=e.hp&&e.hasOwnProperty("hp")&&(o.hp=e.hp),null!=e.lastDirX&&e.hasOwnProperty("lastDirX")&&(o.lastDirX=t.json&&!isFinite(e.lastDirX)?String(e.lastDirX):e.lastDirX),null!=e.lastDirY&&e.hasOwnProperty("lastDirY")&&(o.lastDirY=t.json&&!isFinite(e.lastDirY)?String(e.lastDirY):e.lastDirY),null!=e.lastGuidedDirX&&e.hasOwnProperty("lastGuidedDirX")&&(o.lastGuidedDirX=t.json&&!isFinite(e.lastGuidedDirX)?String(e.lastGuidedDirX):e.lastGuidedDirX),null!=e.lastGuidedDirY&&e.hasOwnProperty("lastGuidedDirY")&&(o.lastGuidedDirY=t.json&&!isFinite(e.lastGuidedDirY)?String(e.lastGuidedDirY):e.lastGuidedDirY),null!=e.curSize&&e.hasOwnProperty("curSize")&&(o.curSize=e.curSize),null!=e.lastSpeed&&e.hasOwnProperty("lastSpeed")&&(o.lastSpeed=t.json&&!isFinite(e.lastSpeed)?String(e.lastSpeed):e.lastSpeed),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Pong=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.requesterTime=i.Long?i.Long.fromBits(0,0,!0):0,t.prototype.responderTime=i.Long?i.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.msgType),t.uint32(16).uint64(e.requesterTime),t.uint32(24).uint64(e.responderTime),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Pong;e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:r.msgType=e.int32();break;case 2:r.requesterTime=e.uint64();break;case 3:r.responderTime=e.uint64();break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("msgType"))throw i.ProtocolError("missing required 'msgType'",{instance:r});if(!r.hasOwnProperty("requesterTime"))throw i.ProtocolError("missing required 'requesterTime'",{instance:r});if(!r.hasOwnProperty("responderTime"))throw i.ProtocolError("missing required 'responderTime'",{instance:r});return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return i.isInteger(e.requesterTime)||e.requesterTime&&i.isInteger(e.requesterTime.low)&&i.isInteger(e.requesterTime.high)?i.isInteger(e.responderTime)||e.responderTime&&i.isInteger(e.responderTime.low)&&i.isInteger(e.responderTime.high)?null:"responderTime: integer|Long expected":"requesterTime: integer|Long expected"},t.fromObject=function(e){if(e instanceof a.Pong)return e;var t=new a.Pong;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.requesterTime&&(i.Long?(t.requesterTime=i.Long.fromValue(e.requesterTime)).unsigned=!0:"string"==typeof e.requesterTime?t.requesterTime=parseInt(e.requesterTime,10):"number"==typeof e.requesterTime?t.requesterTime=e.requesterTime:"object"==typeof e.requesterTime&&(t.requesterTime=new i.LongBits(e.requesterTime.low>>>0,e.requesterTime.high>>>0).toNumber(!0))),null!=e.responderTime&&(i.Long?(t.responderTime=i.Long.fromValue(e.responderTime)).unsigned=!0:"string"==typeof e.responderTime?t.responderTime=parseInt(e.responderTime,10):"number"==typeof e.responderTime?t.responderTime=e.responderTime:"object"==typeof e.responderTime&&(t.responderTime=new i.LongBits(e.responderTime.low>>>0,e.responderTime.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults){if(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,i.Long){var n=new i.Long(0,0,!0);o.requesterTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.requesterTime=t.longs===String?"0":0;i.Long?(n=new i.Long(0,0,!0),o.responderTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):o.responderTime=t.longs===String?"0":0}return null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.requesterTime&&e.hasOwnProperty("requesterTime")&&("number"==typeof e.requesterTime?o.requesterTime=t.longs===String?String(e.requesterTime):e.requesterTime:o.requesterTime=t.longs===String?i.Long.prototype.toString.call(e.requesterTime):t.longs===Number?new i.LongBits(e.requesterTime.low>>>0,e.requesterTime.high>>>0).toNumber(!0):e.requesterTime),null!=e.responderTime&&e.hasOwnProperty("responderTime")&&("number"==typeof e.responderTime?o.responderTime=t.longs===String?String(e.responderTime):e.responderTime:o.responderTime=t.longs===String?i.Long.prototype.toString.call(e.responderTime):t.longs===Number?new i.LongBits(e.responderTime.low>>>0,e.responderTime.high>>>0).toNumber(!0):e.responderTime),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Server_FullGameState=function(){function t(e){if(this.playerStates=[],e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.gameId="",t.prototype.gameClock=0,t.prototype.clientTime=i.Long?i.Long.fromBits(0,0,!0):0,t.prototype.serverTime=i.Long?i.Long.fromBits(0,0,!0):0,t.prototype.gameState=0,t.prototype.gameStateMsgID=0,t.prototype.playerStates=i.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=r.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).int32(e.msgType),null!=e.gameId&&Object.hasOwnProperty.call(e,"gameId")&&t.uint32(18).string(e.gameId),null!=e.gameClock&&Object.hasOwnProperty.call(e,"gameClock")&&t.uint32(24).uint32(e.gameClock),null!=e.clientTime&&Object.hasOwnProperty.call(e,"clientTime")&&t.uint32(32).uint64(e.clientTime),null!=e.serverTime&&Object.hasOwnProperty.call(e,"serverTime")&&t.uint32(40).uint64(e.serverTime),null!=e.gameState&&Object.hasOwnProperty.call(e,"gameState")&&t.uint32(48).uint32(e.gameState),null!=e.gameStateMsgID&&Object.hasOwnProperty.call(e,"gameStateMsgID")&&t.uint32(56).uint32(e.gameStateMsgID),null!=e.playerStates&&e.playerStates.length)for(var o=0;o<e.playerStates.length;++o)a.PlayerState.encode(e.playerStates[o],t.uint32(66).fork()).ldelim();return t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Server_FullGameState;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.msgType=e.int32();break;case 2:r.gameId=e.string();break;case 3:r.gameClock=e.uint32();break;case 4:r.clientTime=e.uint64();break;case 5:r.serverTime=e.uint64();break;case 6:r.gameState=e.uint32();break;case 7:r.gameStateMsgID=e.uint32();break;case 8:r.playerStates&&r.playerStates.length||(r.playerStates=[]),r.playerStates.push(a.PlayerState.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.msgType&&e.hasOwnProperty("msgType"))switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}if(null!=e.gameId&&e.hasOwnProperty("gameId")&&!i.isString(e.gameId))return"gameId: string expected";if(null!=e.gameClock&&e.hasOwnProperty("gameClock")&&!i.isInteger(e.gameClock))return"gameClock: integer expected";if(null!=e.clientTime&&e.hasOwnProperty("clientTime")&&!(i.isInteger(e.clientTime)||e.clientTime&&i.isInteger(e.clientTime.low)&&i.isInteger(e.clientTime.high)))return"clientTime: integer|Long expected";if(null!=e.serverTime&&e.hasOwnProperty("serverTime")&&!(i.isInteger(e.serverTime)||e.serverTime&&i.isInteger(e.serverTime.low)&&i.isInteger(e.serverTime.high)))return"serverTime: integer|Long expected";if(null!=e.gameState&&e.hasOwnProperty("gameState")&&!i.isInteger(e.gameState))return"gameState: integer expected";if(null!=e.gameStateMsgID&&e.hasOwnProperty("gameStateMsgID")&&!i.isInteger(e.gameStateMsgID))return"gameStateMsgID: integer expected";if(null!=e.playerStates&&e.hasOwnProperty("playerStates")){if(!Array.isArray(e.playerStates))return"playerStates: array expected";for(var t=0;t<e.playerStates.length;++t){var o=a.PlayerState.verify(e.playerStates[t]);if(o)return"playerStates."+o}}return null},t.fromObject=function(e){if(e instanceof a.Server_FullGameState)return e;var t=new a.Server_FullGameState;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}if(null!=e.gameId&&(t.gameId=String(e.gameId)),null!=e.gameClock&&(t.gameClock=e.gameClock>>>0),null!=e.clientTime&&(i.Long?(t.clientTime=i.Long.fromValue(e.clientTime)).unsigned=!0:"string"==typeof e.clientTime?t.clientTime=parseInt(e.clientTime,10):"number"==typeof e.clientTime?t.clientTime=e.clientTime:"object"==typeof e.clientTime&&(t.clientTime=new i.LongBits(e.clientTime.low>>>0,e.clientTime.high>>>0).toNumber(!0))),null!=e.serverTime&&(i.Long?(t.serverTime=i.Long.fromValue(e.serverTime)).unsigned=!0:"string"==typeof e.serverTime?t.serverTime=parseInt(e.serverTime,10):"number"==typeof e.serverTime?t.serverTime=e.serverTime:"object"==typeof e.serverTime&&(t.serverTime=new i.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0))),null!=e.gameState&&(t.gameState=e.gameState>>>0),null!=e.gameStateMsgID&&(t.gameStateMsgID=e.gameStateMsgID>>>0),e.playerStates){if(!Array.isArray(e.playerStates))throw TypeError(".Server_FullGameState.playerStates: array expected");t.playerStates=[];for(var o=0;o<e.playerStates.length;++o){if("object"!=typeof e.playerStates[o])throw TypeError(".Server_FullGameState.playerStates: object expected");t.playerStates[o]=a.PlayerState.fromObject(e.playerStates[o])}}return t},t.toObject=function(e,t){t||(t={});var o={};if((t.arrays||t.defaults)&&(o.playerStates=[]),t.defaults){if(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.gameId="",o.gameClock=0,i.Long){var n=new i.Long(0,0,!0);o.clientTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.clientTime=t.longs===String?"0":0;i.Long?(n=new i.Long(0,0,!0),o.serverTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):o.serverTime=t.longs===String?"0":0,o.gameState=0,o.gameStateMsgID=0}if(null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.gameId&&e.hasOwnProperty("gameId")&&(o.gameId=e.gameId),null!=e.gameClock&&e.hasOwnProperty("gameClock")&&(o.gameClock=e.gameClock),null!=e.clientTime&&e.hasOwnProperty("clientTime")&&("number"==typeof e.clientTime?o.clientTime=t.longs===String?String(e.clientTime):e.clientTime:o.clientTime=t.longs===String?i.Long.prototype.toString.call(e.clientTime):t.longs===Number?new i.LongBits(e.clientTime.low>>>0,e.clientTime.high>>>0).toNumber(!0):e.clientTime),null!=e.serverTime&&e.hasOwnProperty("serverTime")&&("number"==typeof e.serverTime?o.serverTime=t.longs===String?String(e.serverTime):e.serverTime:o.serverTime=t.longs===String?i.Long.prototype.toString.call(e.serverTime):t.longs===Number?new i.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0):e.serverTime),null!=e.gameState&&e.hasOwnProperty("gameState")&&(o.gameState=e.gameState),null!=e.gameStateMsgID&&e.hasOwnProperty("gameStateMsgID")&&(o.gameStateMsgID=e.gameStateMsgID),e.playerStates&&e.playerStates.length){o.playerStates=[];for(var r=0;r<e.playerStates.length;++r)o.playerStates[r]=a.PlayerState.toObject(e.playerStates[r],t)}return o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.TimeSyncRequest=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.requesterTime=i.Long?i.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.msgType),t.uint32(16).uint64(e.requesterTime),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.TimeSyncRequest;e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:r.msgType=e.int32();break;case 2:r.requesterTime=e.uint64();break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("msgType"))throw i.ProtocolError("missing required 'msgType'",{instance:r});if(!r.hasOwnProperty("requesterTime"))throw i.ProtocolError("missing required 'requesterTime'",{instance:r});return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return i.isInteger(e.requesterTime)||e.requesterTime&&i.isInteger(e.requesterTime.low)&&i.isInteger(e.requesterTime.high)?null:"requesterTime: integer|Long expected"},t.fromObject=function(e){if(e instanceof a.TimeSyncRequest)return e;var t=new a.TimeSyncRequest;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.requesterTime&&(i.Long?(t.requesterTime=i.Long.fromValue(e.requesterTime)).unsigned=!0:"string"==typeof e.requesterTime?t.requesterTime=parseInt(e.requesterTime,10):"number"==typeof e.requesterTime?t.requesterTime=e.requesterTime:"object"==typeof e.requesterTime&&(t.requesterTime=new i.LongBits(e.requesterTime.low>>>0,e.requesterTime.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,i.Long){var n=new i.Long(0,0,!0);o.requesterTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.requesterTime=t.longs===String?"0":0;return null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.requesterTime&&e.hasOwnProperty("requesterTime")&&("number"==typeof e.requesterTime?o.requesterTime=t.longs===String?String(e.requesterTime):e.requesterTime:o.requesterTime=t.longs===String?i.Long.prototype.toString.call(e.requesterTime):t.longs===Number?new i.LongBits(e.requesterTime.low>>>0,e.requesterTime.high>>>0).toNumber(!0):e.requesterTime),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.TimeSyncResponse=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.requesterTime=i.Long?i.Long.fromBits(0,0,!0):0,t.prototype.responderTime=i.Long?i.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.msgType),t.uint32(16).uint64(e.requesterTime),t.uint32(24).uint64(e.responderTime),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.TimeSyncResponse;e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:r.msgType=e.int32();break;case 2:r.requesterTime=e.uint64();break;case 3:r.responderTime=e.uint64();break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("msgType"))throw i.ProtocolError("missing required 'msgType'",{instance:r});if(!r.hasOwnProperty("requesterTime"))throw i.ProtocolError("missing required 'requesterTime'",{instance:r});if(!r.hasOwnProperty("responderTime"))throw i.ProtocolError("missing required 'responderTime'",{instance:r});return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return i.isInteger(e.requesterTime)||e.requesterTime&&i.isInteger(e.requesterTime.low)&&i.isInteger(e.requesterTime.high)?i.isInteger(e.responderTime)||e.responderTime&&i.isInteger(e.responderTime.low)&&i.isInteger(e.responderTime.high)?null:"responderTime: integer|Long expected":"requesterTime: integer|Long expected"},t.fromObject=function(e){if(e instanceof a.TimeSyncResponse)return e;var t=new a.TimeSyncResponse;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.requesterTime&&(i.Long?(t.requesterTime=i.Long.fromValue(e.requesterTime)).unsigned=!0:"string"==typeof e.requesterTime?t.requesterTime=parseInt(e.requesterTime,10):"number"==typeof e.requesterTime?t.requesterTime=e.requesterTime:"object"==typeof e.requesterTime&&(t.requesterTime=new i.LongBits(e.requesterTime.low>>>0,e.requesterTime.high>>>0).toNumber(!0))),null!=e.responderTime&&(i.Long?(t.responderTime=i.Long.fromValue(e.responderTime)).unsigned=!0:"string"==typeof e.responderTime?t.responderTime=parseInt(e.responderTime,10):"number"==typeof e.responderTime?t.responderTime=e.responderTime:"object"==typeof e.responderTime&&(t.responderTime=new i.LongBits(e.responderTime.low>>>0,e.responderTime.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults){if(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,i.Long){var n=new i.Long(0,0,!0);o.requesterTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.requesterTime=t.longs===String?"0":0;i.Long?(n=new i.Long(0,0,!0),o.responderTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n):o.responderTime=t.longs===String?"0":0}return null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.requesterTime&&e.hasOwnProperty("requesterTime")&&("number"==typeof e.requesterTime?o.requesterTime=t.longs===String?String(e.requesterTime):e.requesterTime:o.requesterTime=t.longs===String?i.Long.prototype.toString.call(e.requesterTime):t.longs===Number?new i.LongBits(e.requesterTime.low>>>0,e.requesterTime.high>>>0).toNumber(!0):e.requesterTime),null!=e.responderTime&&e.hasOwnProperty("responderTime")&&("number"==typeof e.responderTime?o.responderTime=t.longs===String?String(e.responderTime):e.responderTime:o.responderTime=t.longs===String?i.Long.prototype.toString.call(e.responderTime):t.longs===Number?new i.LongBits(e.responderTime.low>>>0,e.responderTime.high>>>0).toNumber(!0):e.responderTime),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Server_AttackResult=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}var o;return t.prototype.msgType=0,t.prototype.gameId="",t.prototype.killerPlayerId="",t.prototype.victimPlayerId="",t.prototype.damage=0,t.prototype.isValidated=null,t.prototype.isResolved=null,Object.defineProperty(t.prototype,"_isValidated",{get:i.oneOfGetter(o=["isValidated"]),set:i.oneOfSetter(o)}),Object.defineProperty(t.prototype,"_isResolved",{get:i.oneOfGetter(o=["isResolved"]),set:i.oneOfSetter(o)}),t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),t.uint32(8).int32(e.msgType),t.uint32(18).string(e.gameId),t.uint32(26).string(e.killerPlayerId),t.uint32(34).string(e.victimPlayerId),t.uint32(40).uint32(e.damage),null!=e.isValidated&&Object.hasOwnProperty.call(e,"isValidated")&&t.uint32(48).bool(e.isValidated),null!=e.isResolved&&Object.hasOwnProperty.call(e,"isResolved")&&t.uint32(56).bool(e.isResolved),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Server_AttackResult;e.pos<o;){var s=e.uint32();switch(s>>>3){case 1:r.msgType=e.int32();break;case 2:r.gameId=e.string();break;case 3:r.killerPlayerId=e.string();break;case 4:r.victimPlayerId=e.string();break;case 5:r.damage=e.uint32();break;case 6:r.isValidated=e.bool();break;case 7:r.isResolved=e.bool();break;default:e.skipType(7&s)}}if(!r.hasOwnProperty("msgType"))throw i.ProtocolError("missing required 'msgType'",{instance:r});if(!r.hasOwnProperty("gameId"))throw i.ProtocolError("missing required 'gameId'",{instance:r});if(!r.hasOwnProperty("killerPlayerId"))throw i.ProtocolError("missing required 'killerPlayerId'",{instance:r});if(!r.hasOwnProperty("victimPlayerId"))throw i.ProtocolError("missing required 'victimPlayerId'",{instance:r});if(!r.hasOwnProperty("damage"))throw i.ProtocolError("missing required 'damage'",{instance:r});return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return i.isString(e.gameId)?i.isString(e.killerPlayerId)?i.isString(e.victimPlayerId)?i.isInteger(e.damage)?null!=e.isValidated&&e.hasOwnProperty("isValidated")&&(t._isValidated=1,"boolean"!=typeof e.isValidated)?"isValidated: boolean expected":null!=e.isResolved&&e.hasOwnProperty("isResolved")&&(t._isResolved=1,"boolean"!=typeof e.isResolved)?"isResolved: boolean expected":null:"damage: integer expected":"victimPlayerId: string expected":"killerPlayerId: string expected":"gameId: string expected"},t.fromObject=function(e){if(e instanceof a.Server_AttackResult)return e;var t=new a.Server_AttackResult;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.gameId&&(t.gameId=String(e.gameId)),null!=e.killerPlayerId&&(t.killerPlayerId=String(e.killerPlayerId)),null!=e.victimPlayerId&&(t.victimPlayerId=String(e.victimPlayerId)),null!=e.damage&&(t.damage=e.damage>>>0),null!=e.isValidated&&(t.isValidated=Boolean(e.isValidated)),null!=e.isResolved&&(t.isResolved=Boolean(e.isResolved)),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.gameId="",o.killerPlayerId="",o.victimPlayerId="",o.damage=0),null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.gameId&&e.hasOwnProperty("gameId")&&(o.gameId=e.gameId),null!=e.killerPlayerId&&e.hasOwnProperty("killerPlayerId")&&(o.killerPlayerId=e.killerPlayerId),null!=e.victimPlayerId&&e.hasOwnProperty("victimPlayerId")&&(o.victimPlayerId=e.victimPlayerId),null!=e.damage&&e.hasOwnProperty("damage")&&(o.damage=e.damage),null!=e.isValidated&&e.hasOwnProperty("isValidated")&&(o.isValidated=e.isValidated,t.oneofs&&(o._isValidated="isValidated")),null!=e.isResolved&&e.hasOwnProperty("isResolved")&&(o.isResolved=e.isResolved,t.oneofs&&(o._isResolved="isResolved")),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Client_RequestJoinGame=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.gameID="",t.prototype.netID="",t.prototype.playerName="",t.prototype.skin="",t.prototype.botOwnerNetID="",t.prototype.startingSize=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).int32(e.msgType),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.netID&&Object.hasOwnProperty.call(e,"netID")&&t.uint32(26).string(e.netID),null!=e.playerName&&Object.hasOwnProperty.call(e,"playerName")&&t.uint32(34).string(e.playerName),null!=e.skin&&Object.hasOwnProperty.call(e,"skin")&&t.uint32(42).string(e.skin),null!=e.botOwnerNetID&&Object.hasOwnProperty.call(e,"botOwnerNetID")&&t.uint32(50).string(e.botOwnerNetID),null!=e.startingSize&&Object.hasOwnProperty.call(e,"startingSize")&&t.uint32(56).uint32(e.startingSize),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Client_RequestJoinGame;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.msgType=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.netID=e.string();break;case 4:r.playerName=e.string();break;case 5:r.skin=e.string();break;case 6:r.botOwnerNetID=e.string();break;case 7:r.startingSize=e.uint32();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.msgType&&e.hasOwnProperty("msgType"))switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return null!=e.gameID&&e.hasOwnProperty("gameID")&&!i.isString(e.gameID)?"gameID: string expected":null!=e.netID&&e.hasOwnProperty("netID")&&!i.isString(e.netID)?"netID: string expected":null!=e.playerName&&e.hasOwnProperty("playerName")&&!i.isString(e.playerName)?"playerName: string expected":null!=e.skin&&e.hasOwnProperty("skin")&&!i.isString(e.skin)?"skin: string expected":null!=e.botOwnerNetID&&e.hasOwnProperty("botOwnerNetID")&&!i.isString(e.botOwnerNetID)?"botOwnerNetID: string expected":null!=e.startingSize&&e.hasOwnProperty("startingSize")&&!i.isInteger(e.startingSize)?"startingSize: integer expected":null},t.fromObject=function(e){if(e instanceof a.Client_RequestJoinGame)return e;var t=new a.Client_RequestJoinGame;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.netID&&(t.netID=String(e.netID)),null!=e.playerName&&(t.playerName=String(e.playerName)),null!=e.skin&&(t.skin=String(e.skin)),null!=e.botOwnerNetID&&(t.botOwnerNetID=String(e.botOwnerNetID)),null!=e.startingSize&&(t.startingSize=e.startingSize>>>0),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.gameID="",o.netID="",o.playerName="",o.skin="",o.botOwnerNetID="",o.startingSize=0),null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.netID&&e.hasOwnProperty("netID")&&(o.netID=e.netID),null!=e.playerName&&e.hasOwnProperty("playerName")&&(o.playerName=e.playerName),null!=e.skin&&e.hasOwnProperty("skin")&&(o.skin=e.skin),null!=e.botOwnerNetID&&e.hasOwnProperty("botOwnerNetID")&&(o.botOwnerNetID=e.botOwnerNetID),null!=e.startingSize&&e.hasOwnProperty("startingSize")&&(o.startingSize=e.startingSize),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Server_GameStartingStatus=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.gameID="",t.prototype.gameParameters="",t.prototype.playerList="",t.prototype.serverTime=i.Long?i.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).int32(e.msgType),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.gameParameters&&Object.hasOwnProperty.call(e,"gameParameters")&&t.uint32(26).string(e.gameParameters),null!=e.playerList&&Object.hasOwnProperty.call(e,"playerList")&&t.uint32(34).string(e.playerList),null!=e.serverTime&&Object.hasOwnProperty.call(e,"serverTime")&&t.uint32(40).uint64(e.serverTime),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Server_GameStartingStatus;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.msgType=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.gameParameters=e.string();break;case 4:r.playerList=e.string();break;case 5:r.serverTime=e.uint64();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.msgType&&e.hasOwnProperty("msgType"))switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return null!=e.gameID&&e.hasOwnProperty("gameID")&&!i.isString(e.gameID)?"gameID: string expected":null!=e.gameParameters&&e.hasOwnProperty("gameParameters")&&!i.isString(e.gameParameters)?"gameParameters: string expected":null!=e.playerList&&e.hasOwnProperty("playerList")&&!i.isString(e.playerList)?"playerList: string expected":null!=e.serverTime&&e.hasOwnProperty("serverTime")&&!(i.isInteger(e.serverTime)||e.serverTime&&i.isInteger(e.serverTime.low)&&i.isInteger(e.serverTime.high))?"serverTime: integer|Long expected":null},t.fromObject=function(e){if(e instanceof a.Server_GameStartingStatus)return e;var t=new a.Server_GameStartingStatus;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.gameParameters&&(t.gameParameters=String(e.gameParameters)),null!=e.playerList&&(t.playerList=String(e.playerList)),null!=e.serverTime&&(i.Long?(t.serverTime=i.Long.fromValue(e.serverTime)).unsigned=!0:"string"==typeof e.serverTime?t.serverTime=parseInt(e.serverTime,10):"number"==typeof e.serverTime?t.serverTime=e.serverTime:"object"==typeof e.serverTime&&(t.serverTime=new i.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.gameID="",o.gameParameters="",o.playerList="",i.Long){var n=new i.Long(0,0,!0);o.serverTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.serverTime=t.longs===String?"0":0;return null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.gameParameters&&e.hasOwnProperty("gameParameters")&&(o.gameParameters=e.gameParameters),null!=e.playerList&&e.hasOwnProperty("playerList")&&(o.playerList=e.playerList),null!=e.serverTime&&e.hasOwnProperty("serverTime")&&("number"==typeof e.serverTime?o.serverTime=t.longs===String?String(e.serverTime):e.serverTime:o.serverTime=t.longs===String?i.Long.prototype.toString.call(e.serverTime):t.longs===Number?new i.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0):e.serverTime),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.NotificationType=function(){var e={},t=Object.create(e);return t[e[0]="PLAYER_DISCONNECTED"]=0,t[e[2]="NONE"]=2,t}(),a.BroadcastMessage=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.gameId="",t.prototype.type="",t.prototype.playerId="",t.prototype.payload="",t.prototype.timestamp=i.Long?i.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).int32(e.msgType),null!=e.gameId&&Object.hasOwnProperty.call(e,"gameId")&&t.uint32(18).string(e.gameId),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(26).string(e.type),null!=e.playerId&&Object.hasOwnProperty.call(e,"playerId")&&t.uint32(34).string(e.playerId),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(42).string(e.payload),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(48).uint64(e.timestamp),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.BroadcastMessage;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.msgType=e.int32();break;case 2:r.gameId=e.string();break;case 3:r.type=e.string();break;case 4:r.playerId=e.string();break;case 5:r.payload=e.string();break;case 6:r.timestamp=e.uint64();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.msgType&&e.hasOwnProperty("msgType"))switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return null!=e.gameId&&e.hasOwnProperty("gameId")&&!i.isString(e.gameId)?"gameId: string expected":null!=e.type&&e.hasOwnProperty("type")&&!i.isString(e.type)?"type: string expected":null!=e.playerId&&e.hasOwnProperty("playerId")&&!i.isString(e.playerId)?"playerId: string expected":null!=e.payload&&e.hasOwnProperty("payload")&&!i.isString(e.payload)?"payload: string expected":null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!(i.isInteger(e.timestamp)||e.timestamp&&i.isInteger(e.timestamp.low)&&i.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":null},t.fromObject=function(e){if(e instanceof a.BroadcastMessage)return e;var t=new a.BroadcastMessage;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.gameId&&(t.gameId=String(e.gameId)),null!=e.type&&(t.type=String(e.type)),null!=e.playerId&&(t.playerId=String(e.playerId)),null!=e.payload&&(t.payload=String(e.payload)),null!=e.timestamp&&(i.Long?(t.timestamp=i.Long.fromValue(e.timestamp)).unsigned=!0:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new i.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.gameId="",o.type="",o.playerId="",o.payload="",i.Long){var n=new i.Long(0,0,!0);o.timestamp=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.timestamp=t.longs===String?"0":0;return null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.gameId&&e.hasOwnProperty("gameId")&&(o.gameId=e.gameId),null!=e.type&&e.hasOwnProperty("type")&&(o.type=e.type),null!=e.playerId&&e.hasOwnProperty("playerId")&&(o.playerId=e.playerId),null!=e.payload&&e.hasOwnProperty("payload")&&(o.payload=e.payload),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?o.timestamp=t.longs===String?String(e.timestamp):e.timestamp:o.timestamp=t.longs===String?i.Long.prototype.toString.call(e.timestamp):t.longs===Number?new i.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber(!0):e.timestamp),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Client_PlayerAttackCommand=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.gameID="",t.prototype.sender="",t.prototype.attacker="",t.prototype.target="",t.prototype.damage=0,t.prototype.playerState=null,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).int32(e.msgType),null!=e.gameID&&Object.hasOwnProperty.call(e,"gameID")&&t.uint32(18).string(e.gameID),null!=e.sender&&Object.hasOwnProperty.call(e,"sender")&&t.uint32(26).string(e.sender),null!=e.attacker&&Object.hasOwnProperty.call(e,"attacker")&&t.uint32(34).string(e.attacker),null!=e.target&&Object.hasOwnProperty.call(e,"target")&&t.uint32(42).string(e.target),null!=e.damage&&Object.hasOwnProperty.call(e,"damage")&&t.uint32(48).uint32(e.damage),null!=e.playerState&&Object.hasOwnProperty.call(e,"playerState")&&a.PlayerState.encode(e.playerState,t.uint32(58).fork()).ldelim(),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Client_PlayerAttackCommand;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.msgType=e.int32();break;case 2:r.gameID=e.string();break;case 3:r.sender=e.string();break;case 4:r.attacker=e.string();break;case 5:r.target=e.string();break;case 6:r.damage=e.uint32();break;case 7:r.playerState=a.PlayerState.decode(e,e.uint32());break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.msgType&&e.hasOwnProperty("msgType"))switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}if(null!=e.gameID&&e.hasOwnProperty("gameID")&&!i.isString(e.gameID))return"gameID: string expected";if(null!=e.sender&&e.hasOwnProperty("sender")&&!i.isString(e.sender))return"sender: string expected";if(null!=e.attacker&&e.hasOwnProperty("attacker")&&!i.isString(e.attacker))return"attacker: string expected";if(null!=e.target&&e.hasOwnProperty("target")&&!i.isString(e.target))return"target: string expected";if(null!=e.damage&&e.hasOwnProperty("damage")&&!i.isInteger(e.damage))return"damage: integer expected";if(null!=e.playerState&&e.hasOwnProperty("playerState")){var t=a.PlayerState.verify(e.playerState);if(t)return"playerState."+t}return null},t.fromObject=function(e){if(e instanceof a.Client_PlayerAttackCommand)return e;var t=new a.Client_PlayerAttackCommand;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}if(null!=e.gameID&&(t.gameID=String(e.gameID)),null!=e.sender&&(t.sender=String(e.sender)),null!=e.attacker&&(t.attacker=String(e.attacker)),null!=e.target&&(t.target=String(e.target)),null!=e.damage&&(t.damage=e.damage>>>0),null!=e.playerState){if("object"!=typeof e.playerState)throw TypeError(".Client_PlayerAttackCommand.playerState: object expected");t.playerState=a.PlayerState.fromObject(e.playerState)}return t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.gameID="",o.sender="",o.attacker="",o.target="",o.damage=0,o.playerState=null),null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.gameID&&e.hasOwnProperty("gameID")&&(o.gameID=e.gameID),null!=e.sender&&e.hasOwnProperty("sender")&&(o.sender=e.sender),null!=e.attacker&&e.hasOwnProperty("attacker")&&(o.attacker=e.attacker),null!=e.target&&e.hasOwnProperty("target")&&(o.target=e.target),null!=e.damage&&e.hasOwnProperty("damage")&&(o.damage=e.damage),null!=e.playerState&&e.hasOwnProperty("playerState")&&(o.playerState=a.PlayerState.toObject(e.playerState,t)),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Server_OrderCreateBot=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.requestID=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).int32(e.msgType),null!=e.requestID&&Object.hasOwnProperty.call(e,"requestID")&&t.uint32(16).uint32(e.requestID),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Server_OrderCreateBot;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.msgType=e.int32();break;case 2:r.requestID=e.uint32();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.msgType&&e.hasOwnProperty("msgType"))switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return null!=e.requestID&&e.hasOwnProperty("requestID")&&!i.isInteger(e.requestID)?"requestID: integer expected":null},t.fromObject=function(e){if(e instanceof a.Server_OrderCreateBot)return e;var t=new a.Server_OrderCreateBot;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.requestID&&(t.requestID=e.requestID>>>0),t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.requestID=0),null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.requestID&&e.hasOwnProperty("requestID")&&(o.requestID=e.requestID),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Server_Notification=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.notificationType=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).int32(e.msgType),null!=e.notificationType&&Object.hasOwnProperty.call(e,"notificationType")&&t.uint32(16).int32(e.notificationType),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Server_Notification;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.msgType=e.int32();break;case 2:r.notificationType=e.int32();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.msgType&&e.hasOwnProperty("msgType"))switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}if(null!=e.notificationType&&e.hasOwnProperty("notificationType"))switch(e.notificationType){default:return"notificationType: enum value expected";case 0:case 2:}return null},t.fromObject=function(e){if(e instanceof a.Server_Notification)return e;var t=new a.Server_Notification;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}switch(e.notificationType){case"PLAYER_DISCONNECTED":case 0:t.notificationType=0;break;case"NONE":case 2:t.notificationType=2}return t},t.toObject=function(e,t){t||(t={});var o={};return t.defaults&&(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.notificationType=t.enums===String?"PLAYER_DISCONNECTED":0),null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.notificationType&&e.hasOwnProperty("notificationType")&&(o.notificationType=t.enums===String?a.NotificationType[e.notificationType]:e.notificationType),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a.Server_PartyStatus=function(){function t(e){if(e)for(var t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return t.prototype.msgType=0,t.prototype.partyID="",t.prototype.partyParamemters="",t.prototype.playerList="",t.prototype.serverTime=i.Long?i.Long.fromBits(0,0,!0):0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=r.create()),null!=e.msgType&&Object.hasOwnProperty.call(e,"msgType")&&t.uint32(8).int32(e.msgType),null!=e.partyID&&Object.hasOwnProperty.call(e,"partyID")&&t.uint32(18).string(e.partyID),null!=e.partyParamemters&&Object.hasOwnProperty.call(e,"partyParamemters")&&t.uint32(26).string(e.partyParamemters),null!=e.playerList&&Object.hasOwnProperty.call(e,"playerList")&&t.uint32(34).string(e.playerList),null!=e.serverTime&&Object.hasOwnProperty.call(e,"serverTime")&&t.uint32(40).uint64(e.serverTime),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var o=void 0===t?e.len:e.pos+t,r=new a.Server_PartyStatus;e.pos<o;){var i=e.uint32();switch(i>>>3){case 1:r.msgType=e.int32();break;case 2:r.partyID=e.string();break;case 3:r.partyParamemters=e.string();break;case 4:r.playerList=e.string();break;case 5:r.serverTime=e.uint64();break;default:e.skipType(7&i)}}return r},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.msgType&&e.hasOwnProperty("msgType"))switch(e.msgType){default:return"msgType: enum value expected";case 0:case 1:case 19:case 25:case 26:case 27:case 30:case 29:case 6:case 28:case 31:case 11:case 17:case 18:case 2:case 3:case 9:case 10:case 5:case 4:case 7:case 8:case 12:case 13:case 14:case 15:case 16:case 20:case 21:case 22:case 23:case 24:}return null!=e.partyID&&e.hasOwnProperty("partyID")&&!i.isString(e.partyID)?"partyID: string expected":null!=e.partyParamemters&&e.hasOwnProperty("partyParamemters")&&!i.isString(e.partyParamemters)?"partyParamemters: string expected":null!=e.playerList&&e.hasOwnProperty("playerList")&&!i.isString(e.playerList)?"playerList: string expected":null!=e.serverTime&&e.hasOwnProperty("serverTime")&&!(i.isInteger(e.serverTime)||e.serverTime&&i.isInteger(e.serverTime.low)&&i.isInteger(e.serverTime.high))?"serverTime: integer|Long expected":null},t.fromObject=function(e){if(e instanceof a.Server_PartyStatus)return e;var t=new a.Server_PartyStatus;switch(e.msgType){case"TIME_SYNC_REQUEST":case 0:t.msgType=0;break;case"TIME_SYNC_RESPONSE":case 1:t.msgType=1;break;case"BOT_REASSIGNMENT_REQUEST":case 19:t.msgType=19;break;case"PING":case 25:t.msgType=25;break;case"PONG":case 26:t.msgType=26;break;case"JOIN_GAME_REQUEST":case 27:t.msgType=27;break;case"COMMAND_DASH":case 30:t.msgType=30;break;case"COMMAND_DRAG":case 29:t.msgType=29;break;case"EXIT_GAME":case 6:t.msgType=6;break;case"INITIAL_GAME_STATE":case 28:t.msgType=28;break;case"BOT_CREATION_REQUEST":case 31:t.msgType=31;break;case"SERVER_FULLGAMESTATE":case 11:t.msgType=11;break;case"PLAYER_KILL":case 17:t.msgType=17;break;case"PLAYER_DEATH":case 18:t.msgType=18;break;case"CLIENT_REQUESTJOINGAME":case 2:t.msgType=2;break;case"CLIENT_PING":case 3:t.msgType=3;break;case"SERVER_GAMESTARTINGSTATUS":case 9:t.msgType=9;break;case"SERVER_PING":case 10:t.msgType=10;break;case"CLIENT_PLAYERSTATEDATA_MULTI":case 5:t.msgType=5;break;case"CLIENT_PLAYERSTATEDATA":case 4:t.msgType=4;break;case"BROADCAST_MESSAGE":case 7:t.msgType=7;break;case"CLIENT_PLAYERATTACKCOMMAND":case 8:t.msgType=8;break;case"SERVER_ORDERCREATEBOT":case 12:t.msgType=12;break;case"SERVER_BROADCASTMESSAGE":case 13:t.msgType=13;break;case"SERVER_ATTACKRESULT":case 14:t.msgType=14;break;case"CLIENT_PLAYERDASH":case 15:t.msgType=15;break;case"SERVER_PLAYERDASH":case 16:t.msgType=16;break;case"SERVER_NOTIFICATION":case 20:t.msgType=20;break;case"CLIENT_REQUESTJOINPARTY":case 21:t.msgType=21;break;case"CLIENT_SENDMESSAGETOPARTY":case 22:t.msgType=22;break;case"SERVER_PARTYSTATUS":case 23:t.msgType=23;break;case"NONE":case 24:t.msgType=24}return null!=e.partyID&&(t.partyID=String(e.partyID)),null!=e.partyParamemters&&(t.partyParamemters=String(e.partyParamemters)),null!=e.playerList&&(t.playerList=String(e.playerList)),null!=e.serverTime&&(i.Long?(t.serverTime=i.Long.fromValue(e.serverTime)).unsigned=!0:"string"==typeof e.serverTime?t.serverTime=parseInt(e.serverTime,10):"number"==typeof e.serverTime?t.serverTime=e.serverTime:"object"==typeof e.serverTime&&(t.serverTime=new i.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0))),t},t.toObject=function(e,t){t||(t={});var o={};if(t.defaults)if(o.msgType=t.enums===String?"TIME_SYNC_REQUEST":0,o.partyID="",o.partyParamemters="",o.playerList="",i.Long){var n=new i.Long(0,0,!0);o.serverTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else o.serverTime=t.longs===String?"0":0;return null!=e.msgType&&e.hasOwnProperty("msgType")&&(o.msgType=t.enums===String?a.MessageType[e.msgType]:e.msgType),null!=e.partyID&&e.hasOwnProperty("partyID")&&(o.partyID=e.partyID),null!=e.partyParamemters&&e.hasOwnProperty("partyParamemters")&&(o.partyParamemters=e.partyParamemters),null!=e.playerList&&e.hasOwnProperty("playerList")&&(o.playerList=e.playerList),null!=e.serverTime&&e.hasOwnProperty("serverTime")&&("number"==typeof e.serverTime?o.serverTime=t.longs===String?String(e.serverTime):e.serverTime:o.serverTime=t.longs===String?i.Long.prototype.toString.call(e.serverTime):t.longs===Number?new i.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber(!0):e.serverTime),o},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),a},"function"==typeof define&&define.amd?define(["protobufjs/minimal"],o):"function"==typeof e&&"object"==typeof t&&t&&t.exports&&(t.exports=o(e("protobufjs/minimal"))),cc._RF.pop()},{"protobufjs/minimal":58}],nCSV:[function(e,t,o){"use strict";cc._RF.push(t,"90ad90PWAVNkYVdJPnaTlnT","nCSV"),Object.defineProperty(o,"__esModule",{value:!0}),o.nCSV=void 0;var n=function(){function e(){}return e.parseLineSingle=function(e,t){void 0===t&&(t=!1);for(var o=[],n=e.length,r=!1,i="",a=0;a<n;a++){var s=e.charAt(a);if(t||!/\s/.test(s)){if(r){if('"'==s){r=!1;continue}}else if('"'==s){r=!0;continue}","!=s||r?i+=s:(o.push(i),i="")}}return i.length>0&&o.push(i),o},e.parseParameters=function(t){var o=t.split("\r\n"),n={};return o.forEach(function(t){if(t.startsWith("#")){var o=e.parseLineSingle(t),r=o[0].substr(1);n[r]=o[1]}}),n},e.parseTable=function(t,o){if(void 0===o&&(o=!1),!t)return!1;var n=t.split("\r\n"),r=[];n.forEach(function(e){e.startsWith("#")||r.push(e)});for(var i=e.parseLineSingle(r[0]),a=r.length,s=i.length,c=[],l=1;l<a;l++){for(var u=e.parseLineSingle(r[l],o),p={},d=0;d<s;d++)d>=u.length?p[i[d]]="":p[i[d]]=u[d];c.push(p)}return c},e}();o.nCSV=n,cc._RF.pop()},{}],nodeAnimInfo:[function(e,t,o){"use strict";cc._RF.push(t,"a972962C7RG9L1LfxXAraY1","nodeAnimInfo");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.NgcNodeAnimInfo=void 0;var a,s=cc._decorator,c=s.ccclass,l=s.property;(function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical"})(a||(a={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slideDirection=a.Horizontal,t.slidingDistance=150,t.slidingDuration=.1,t.applyMobileOnly=!1,t.atEndPoint=!1,t.startPoint=0,t.endPoint=0,t.widget=null,t}return r(t,e),t.prototype.onLoad=function(){this.widget=this.node.getComponent(cc.Widget),this.widget&&!this.widget.enabled&&(this.widget=null)},t.prototype.animShow=function(e){var t=this;void 0===e&&(e=!0);var o=cc.sys.isMobile;if((!this.applyMobileOnly||o)&&!this.atEndPoint!=!e)if(this.atEndPoint?(this.endPoint=this.slideDirection===a.Horizontal?this.node.getPosition().x:this.node.getPosition().y,this.startPoint=this.endPoint-this.slidingDistance):(this.startPoint=this.slideDirection===a.Horizontal?this.node.getPosition().x:this.node.getPosition().y,this.endPoint=this.startPoint+this.slidingDistance),this.widget&&(this.widget.enabled=!1),this.node.stopActionByTag(0),e){var n=this.node.getPosition(),r=this.node.getPosition();this.slideDirection==a.Horizontal?(n.x=this.startPoint,r.x=this.endPoint):(n.y=this.startPoint,r.y=this.endPoint),this.node.setPosition(n),cc.tween(this.node).tag(0).parallel(cc.tween().to(this.slidingDuration,{opacity:255}),cc.tween().to(this.slidingDuration,{position:r})).call(function(){t.atEndPoint=!0}).start()}else n=this.node.getPosition(),r=this.node.getPosition(),this.slideDirection==a.Horizontal?(n.x=this.endPoint,r.x=this.startPoint):(n.y=this.endPoint,r.y=this.startPoint),this.node.setPosition(n),cc.tween(this.node).tag(0).parallel(cc.tween().to(this.slidingDuration,{opacity:255}),cc.tween().to(this.slidingDuration,{position:r})).call(function(){t.atEndPoint=!1,t.widget&&(t.widget.enabled=!0)}).start()},i([l({type:cc.Enum(a)})],t.prototype,"slideDirection",void 0),i([l],t.prototype,"slidingDistance",void 0),i([l],t.prototype,"slidingDuration",void 0),i([l],t.prototype,"applyMobileOnly",void 0),i([l(cc.Boolean)],t.prototype,"atEndPoint",void 0),i([c],t)}(cc.Component);o.NgcNodeAnimInfo=u,cc._RF.pop()},{}],scrollRecognition:[function(e,t){"use strict";cc._RF.push(t,"6bf00ca5nhFD6dGJJMLCmnM","scrollRecognition"),cc.Class({extends:cc.ViewGroup,properties:{scrollView:{default:null,type:cc.ScrollView}},onLoad:function(){var e=cc.director.getScene().getChildByName("Canvas").getComponentsInChildren(cc.PageView);e.length>0&&(this.pageView=e[0]),this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0)},_hasNestedViewGroup:function(e,t){if(e.eventPhase===cc.Event.CAPTURING_PHASE){if(t)for(var o=0;o<t.length;++o){var n=t[o];if(this.node===n)return!!e.target.getComponent(cc.ViewGroup);if(n.getComponent(cc.ViewGroup))return!0}return!1}},_stopPropagationIfTargetIsMe:function(e){e.eventPhase===cc.Event.AT_TARGET&&e.target===this.node&&e.stopPropagation()},_onTouchBegan:function(e,t){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(e,t)){var o=e.touch;this.node&&(this.pageView&&this.pageView._handlePressLogic(o),this.scrollView&&this.scrollView._handlePressLogic(o)),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(e)}},_onTouchMoved:function(e,t){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(e,t)){var o=e.touch;this.node&&this._handleMoveLogic(o);var n=o.getLocation().sub(o.getStartLocation());if(cc.Vec2.mag(n)>7&&!this._touchMoved&&e.target!==this.node){var r=new cc.Event.EventTouch(e.getTouches(),e.bubbles);r.type=cc.Node.EventType.TOUCH_CANCEL,r.touch=e.touch,r.simulate=!0,e.target.dispatchEvent(r),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(e)}},_onTouchEnded:function(e,t){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(e,t)){var o=e.touch;this.node&&this._handleReleaseLogic(o),this.pageView&&this.pageView._dispatchEvent("touch-up"),this.scrollView&&this.scrollView._dispatchEvent("touch-up"),this._touchMoved?e.stopPropagation():this._stopPropagationIfTargetIsMe(e)}},_onTouchCancelled:function(e,t){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(e,t)){if(!e.simulate){var o=e.touch;this.node&&this._handleReleaseLogic(o)}this._stopPropagationIfTargetIsMe(e)}},_clampDelta:function(e){return Math.abs(e.x)<Math.abs(e.y)?e.x=0:e.y=0,e},_handleMoveLogic:function(e){var t=this._clampDelta(e.getDelta());this.pageView&&this.pageView._processDeltaMove(t),t=this._clampDelta(e.getDelta()),this.scrollView&&this.scrollView._processDeltaMove(t)},_handleReleaseLogic:function(e){var t=e.getDelta();t=this._clampDelta(t),this.pageView&&this.pageView._handleReleaseLogic(),this.scrollView&&(this.scrollView._gatherTouchMove(t),this.scrollView._processInertiaScroll())}}),cc._RF.pop()},{}],textEffectGoldRush:[function(e,t,o){"use strict";cc._RF.push(t,"f89c1aHtsNGMqTNUCwOhSSI","textEffectGoldRush");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textLeft=null,t.textRight=null,t.sprLeft=null,t.sprRight=null,t.DoubleSpr=null,t.DamageSpr=null,t.GoldSpr=null,t.RushSpr=null,t.particlesShow=null,t}return r(t,e),t.prototype.playTextEffect=function(e,t,o,n){this.particlesShow.node.active=!0,this.textLeft.string=t,this.textRight.string=e,o?(this.sprLeft.getComponent(cc.Sprite).spriteFrame=this.GoldSpr,this.sprRight.getComponent(cc.Sprite).spriteFrame=this.RushSpr,this.startEffect(this.sprLeft,this.sprRight)):n?(this.sprLeft.getComponent(cc.Sprite).spriteFrame=this.DoubleSpr,this.sprRight.getComponent(cc.Sprite).spriteFrame=this.DamageSpr,this.startEffect(this.sprLeft,this.sprRight)):this.startEffect(this.textLeft.node,this.textRight.node)},t.prototype.startEffect=function(e,t){var o=this;cc.tween(e).parallel(cc.tween().to(.2,{position:cc.v2(0,e.y)}),cc.tween().to(.2,{opacity:255})).by(1.5,{position:cc.v2(20,0)}).parallel(cc.tween().by(.2,{scale:1.1}),cc.tween().to(.2,{position:cc.v2(cc.view.getVisibleSize().width/2,e.y)}),cc.tween().to(.2,{opacity:100})).start(),cc.tween(t).parallel(cc.tween().to(.2,{position:cc.v2(0,t.y)}),cc.tween().to(.2,{opacity:255})).by(1.5,{position:cc.v2(-20,0)}).parallel(cc.tween().by(.2,{scale:1.1}),cc.tween().to(.2,{position:cc.v2(-cc.view.getVisibleSize().width/2,t.y)}),cc.tween().to(.2,{opacity:100})).call(function(){o.node.destroy()}).start()},i([c(cc.Label)],t.prototype,"textLeft",void 0),i([c(cc.Label)],t.prototype,"textRight",void 0),i([c(cc.Node)],t.prototype,"sprLeft",void 0),i([c(cc.Node)],t.prototype,"sprRight",void 0),i([c(cc.SpriteFrame)],t.prototype,"DoubleSpr",void 0),i([c(cc.SpriteFrame)],t.prototype,"DamageSpr",void 0),i([c(cc.SpriteFrame)],t.prototype,"GoldSpr",void 0),i([c(cc.SpriteFrame)],t.prototype,"RushSpr",void 0),i([c(cc.ParticleSystem)],t.prototype,"particlesShow",void 0),i([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],water:[function(e,t,o){"use strict";cc._RF.push(t,"f90ffmIYINLi6c5dyLpyi/P","water");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./GameCamera"),s=e("./../globals"),c=cc._decorator,l=c.ccclass,u=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mainCamera=null,t.mainCameraOffsetScale=1,t.myStartX=0,t.myStartY=0,t}return r(t,e),t.prototype.onLoad=function(){this.myStartY=this.getWorldPosition().y},t.prototype.getWorldPosition=function(){return this.node.parent.convertToWorldSpaceAR(this.node.getPosition())},t.prototype.setWorldPosition=function(e){this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e))},t.prototype.start=function(){},t.prototype.update=function(){var e=this.myStartY-(this.mainCamera.getWorldPosition().y-this.myStartY)*this.mainCameraOffsetScale;this.setWorldPosition(cc.v2(this.getWorldPosition().x,e))},i([u(a.default)],t.prototype,"mainCamera",void 0),i([u],t.prototype,"mainCameraOffsetScale",void 0),i([l],t)}(cc.Component);o.default=p,s.default.Parallax=p,cc._RF.pop()},{"./../globals":"globals","./GameCamera":"GameCamera"}]},{},["CustomLB_UserInfo","Delegate","Event","LocalizedRichText","ResizableComponent","Utils","helpers","nCSV","scrollRecognition","ControlHint","CrownRoadManager","NgcCrownRoadItem","NgcCrownRoadMilestoneItem","NgcCrownRoadProgressionDialog","NgcCrownRoadUI","BigDay","DailyRewardManager","DailyRewardUI","NgcDay","RewardClaimAnimation","DeliveryRewardAnimation","DialogBase","DialogOnSceneBase","LoadingAdDialog","MessageDialog","NgcDialogManager","NoticeDialog","ItemSelectLanguage","SelectLanguageDialog","CoBranchEdgeHTML","EdgeExclusiveComp","EdgeExclusiveManager","EdgeExclusiveUI","Emoji","EmojiAnimationHandler","EmojiScrollItem","EmotesManager","EmotesUI","nodeAnimInfo","ResultUI","RewardItem","NgcRevive","ReviveDialog","RewardUI","NgcSpectatorManager","SpectatorItem","CCGIF","CCGIFTest","GIF","LZW","NgcGDPR","ModeButton","NgcGameModeInfoDialog","NgcGameModeManager","BundleAsset","InteractionButtonAsset","ItemTabAsset","SingleItemAsset","InteractionButton","ItemCategory","ItemContainer","ItemPool","Bundle","ItemShop","SingleItem","SingleItemType1","SingleItemType2","SingleItemType3","SingleItemTypeEdge","ItemStatus","ItemStatusEquipped","ItemStatusUnlock","PurchaseMethodAchievement","PurchaseMethodComingSoon","PurchaseMethodCrownRoad","PurchaseMethodCurrency","PurchaseMethodDailyReward","PurchaseMethodEdgeExclusive","PurchaseMethodIAP","PurchaseMethodLoginSocial","PurchaseMethodWatchAds","ItemTab","InteractionContent","InteractionContentBundle","InteractionContentEquipped","InteractionContentPurchaseAchievement","InteractionContentPurchaseComingSoon","InteractionContentPurchaseCrownRoad","InteractionContentPurchaseCurrency","InteractionContentPurchaseDailyReward","InteractionContentPurchaseEdgeExclusive","InteractionContentPurchaseIAP","InteractionContentPurchaseLoginSocial","InteractionContentPurchaseWatchAds","InteractionContentUnlock","NgcAchievementHelper","LB_UserInfo","LeaderBoardManager","LiveReskin","NgcLiveReskin","NgcBoosterTypeHelper","NgcBoosterTypeInGameHelper","NgcBoosterTypeInMainMenuHelper","DailyBoosterUI","NgcBoosterItem","NgcBoosterScroll","NgcLuckyBoosterManager","NavBarA2HSInstalledNotice","NavBarA2HSNotSupportTotally_Mobile","NavBarA2HSNotSupport_Mobile","NavBarA2HSNotSupport_PC","NavBarA2HSNoticeDialog","NavBarAboutDialog","NavBarConfirmDialog","NavBarConflictDialog","NavBarDialogBase","NavBarEditNameDialog","NavBarFBBrowserDialog","NavBarFBPagePluginDialog","NavBarGDPRDialog","NavBarHowToPlayDialog","NavBarItemSelectLanguage","NavBarLeaveGameDialog","NavBarLoginSocialDialog","NavBarManager","NavBarNoticeDialog","NavBarSelectLanguageDialog","NavBarSettingsDialog","NavBarShareDialog","NavBarTipItem","NavBarUserConflictInfo","NgcA2HSManager.ts","OfflineMode","PartyRoomConfirmDialog","PartyRoomDialogBase","PartyRoomEnterCodeDialog","PartyRoomNoticeDialog","ScanQRCodeDialog","PartyAnimation","PartyInfoBuilder","PartyPlayerItem","QRCodeGenerator","NgcRealPrizeManager","RealPrizeBuyTicketDialog","RealPrizeDefines","RealPrizeDialogBase","RealPrizeEventRuleDialog","RealPrizeLeaderboard","RealPrizeLeaderboardItem","RealPrizeTabMenu","RealPrizeTicketProgressTimer","RealPrizeWinner","RealPrizeWinnerItem","NgcRedirection","NgcRedirectionDialog","NgcTabBarManager","TabButton","BadConnectionNotification","NgcTechMessageUpdateIOS","TechMessageAndroidWebview","TechMessageFPS","TechMessageIdleDisconnect","TechMessageIdleFPSWarning","TechMessageIdleWarningDialog","TechMessageLatencyDisconnect","TechMessageLatencyWarning","TechMessageNetworkDisconnect","TechMessageSupportBrowser","TechMessages","TechMessagesDialog","TechMessagesPortraitOnly","TipManager","NgcXInOneBundleDialog","NgcXInOneBundleManager","NgcXInOneBundleUI","NgcXInOneDataInterface","AdsManager_impl","NgcAdsManager","BuildConfig","CONSTANTS","CountryFlagsManager","FullScreenButton","FontsManager","LabelLocalized","LocalizationDebugPanel","LocalizedManager","SpriteLocalized","TimerLabelLocalized","MessageBuilder","MessageDefines","Protocol","NetStatsTracker","NetUtils","NetworkInterface","NgcNetClient","NgcNetClientRefactor","NgcGame","NgcGameCamera","NgcItemInfoManager","NgcLocalStorage","NgcMain","NgcPlayer","NgcScreenBase","NgcScreenManager","NgcShopManager","NgcSoundManager","NgcTrackingManager","NgcUserInfo","NgcWorldPosInterface","ProfanityCheck","NgcLoadingScene","NgcShopScreen","NgcStartMain","NgcVersion","GameDistributionSrv","NanoSrv","SDK","UplaySrv","Ads","Ads_impl_GameDistributionSrv","DailyReward","DailyReward_impl_NanoSrv","GameShop","GameShop_impl_NanoSrv","Inventory","Inventory_impl_NanoSrv","Leaderboard","Leaderboard_impl_NanoSrv","PartyRoom","PartyRoom_impl_GameServerSrv","Platform","Platform_impl_GameDistributionSrv","Platform_impl_WebBase","Service","ServicesMgr","Social","Social_impl_UplaySrv","Telemetry","Telemetry_impl_FirebaseSrv","AddODRToChildren","AppEventsCenter","BackgroundAdapter","BackgroundAdapterX","BlendAnimBase","CameraHelper","CharacterControllerBase","CheatsManager","CollectibleBase","CollectibleDoubleDamage","CollectibleGoldRush","CollectibleHint","CollectibleSizeUp","CollisionController","CollisionManager","DeathZoneManager","EnemyAnimBase","EnemyControllerBase","Enemy_FishInFlock","Enemy_FishPursuit","Enemy_Mahi","Enemy_Shying","Enemy_Tuna","Pelican","PelicanManager","Fake3DRotation","FakeNames","FakeNamesManager","FlockManager","Game","GameCamera","GameCameraTarget","GameEnums","GameInforUI","GameInput","GameObject","DefaultScreen","GameObjectMgr","GamePoolItem","PoolItemInfo","GameTrackingDataHelper","GameTrackingDataSupporter","HSACountryFlagsManager","HSALogo","Messages","HSAUtils","HumanDiver","HumanManager","HumanSwimmer","LevelGrid","LevelGridLine","LoadingScene","HSAFontsManager","HSALabelLocalized","HSALocalizedManager","HSASpriteLocalized","Main","MainMenuBG","MapController","MatchMaking","HSANetUtils","ImprovedNetClient","NetClient","DieByOpponent","BlockObject","BombController","ObstacleControllerBase","ToxicController","OffScreen","OffscreenDisableAllRenders","OffscreenDisableCollider","OffscreenDisableRender","Parallax","ParticleFollow","CustomTask","OffFrameTasksMgr","PerformanceMonitor","PerformanceTask","SplittedAsyncTask","PlatformGameObject","PlayerStartPoint","HelicopterAnim","HelicopterController","PlayerAnim","PlayerBoxColiiderMgr","PlayerController","PlayerController_Bot","PlayerController_Remote","SharkMeat","ReScaleObject","SCPack","SceneManager","ScoreMultiplierButton","ScreenBase","ScreenManager","GameScreen","SimpleGame","SimpleGamePlayerHandler","SimpleGameScreen","LeaderBoardUI","MainScreen","PartyRoomManager","PartyRoomUI","PrizeScreen","ScreenResourceLoader","ShopScreen","SimpleShopScreen","SimpleBoosterUI","SimpleCharacterPreview","SimpleEquipUI","StartMain","SkyMovement","SoundManager","SoundResource","PowerUpSpawner","SpawnFish","SpawnObjectBase","StartBiggerBooster","StartPoint","TextEffectController","textEffectGoldRush","TrackingManager","TuningData","BoostBar","BoostBarOnShark","BoosterUI","CircleBar","DeathZone_Notice","DigitCountUp","DoubleTab","DragToControl","EatBar","GameUI","InGame_Leaderboard","InfoType_Popup","NameBar","PowerUpBar","RedWarning","RemoveWidgetPC","SizeBar","ThrobTween","TipBackAndForth","ToxicCountdown","ToxicWarning","Transition","Tutorial","WaitSpinner","UserInfo","ConstConfig","CustomEventEmitter","SplashWaterEffect","WaterSurfaceManager","WorldPosInterface","countDownStartGame","water","Defines","MessageUtils","hsaprotobuf","globals"]);